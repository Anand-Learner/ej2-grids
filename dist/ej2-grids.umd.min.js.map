/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 15.4.19
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_23__","__WEBPACK_EXTERNAL_MODULE_24__","__WEBPACK_EXTERNAL_MODULE_61__","__WEBPACK_EXTERNAL_MODULE_71__","__WEBPACK_EXTERNAL_MODULE_73__","__WEBPACK_EXTERNAL_MODULE_98__","__WEBPACK_EXTERNAL_MODULE_101__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","focus_strategy_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","clipboard_1","SortDescriptor","_super","Property","ChildProperty","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","freezeRefresh","Component","refresh","mergeCells","isEdit","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","Columnchooser","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","ctrlEnter","shiftEnter","tab","shiftTab","space","ctrlPlusC","ctrlShiftPlusH","setValue","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","pageSettings","filterSettings","groupSettings","searchSettings","sortSettings","columns","selectedRowIndex","ignoreOnColumn","forEach","currentObject","_i","_a","ignoreInArrays","addOnPersist","column","ignoreInColumn","val","requiredModules","allowFiltering","push","member","args","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","allowPaging","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","frozenColumns","frozenRows","editSettings","allowAdding","allowDeleting","allowEditing","extendRequiredModules","isCommandColumn","contextMenuItems","showColumnMenu","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","createSpinner","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","showSpinner","initialEnd","hideSpinner","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","focusModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateGridLines","allowTextWrap","applyTextWrap","removeTextWrap","freezeRender","case","isModeChg","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","getLocaleConstants","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getRowInfo","ele","parentsUntil","cell","closest","cellIndex","parseInt","getAttribute","row_1","rowIndex","rowsObject","uid","rowData","data","cells","getDataRows","rows","children","dataRows","getCellFromIndex","getColumnHeaderByIndex","getRowObjectFromUID","getRowsObject","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","isToggle","selectRows","rowIndexes","clearSelection","selectCell","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","copy","withHeader","clipboardModule","recalcIndentWidth","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","FocusStrategy","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","Clipboard","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","refreshTooltip","headerTable","htable","createTable","ctable","all","allele","table","getBoundingClientRect","Tooltip","document","body","removeChild","tag","type","myTableDiv","cssText","mySubDiv","myTable","myTr","mytd","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","updateData","event","headerRefreshed","dataBoundFunction","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","touches","checkEdit","preventDefault","click","mode","dblclick","display","filterClear","gridElement","localStorage","getItem","dataObj_1","JSON","parse","isProtectedOnChange","this_2","keys_1","isArray","extend","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","columns_1","commands","commandsTemplate","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","indexOf","showColumn","hideColumn","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","cultureName","intl","Internationalization","culture","getFormatFunction","format","getDateFormat","getNumberFormat","getParserFunction","getDateParser","getNumberParser","fromView","toView","result","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","pred","template","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","attributes","copied","first","second","exclude","moved","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","clientWidth","getRowHeight","rowHeight","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","showConfirmDialog","changeButtonType","elements_1","button","setFormatter","fmtr","skeleton","setParser","addRemoveActiveClasses","removeAttribute","distinctStringValues","temp","res","toString","getFilterMenuPostion","dialogObj","elementVisible","dlgWidth","newpos","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","allowResizing","enableGroupByFormat","showInColumnChooser","merge","valueFormatter","textAlign","templateFn","itemTemplate","fltrTemplateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","checkBoxChange","beforeCopy","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","onEmpty","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","beforeCellFocused","cellFocused","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","accessPredicate","contextMenuClick","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","data_1","cell_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","renderEmpty","Row","isDataRow","Cell","isDataCell","updateColumnType","record","items","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","reject","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_merge_renderer_1","row_model_generator_1","group_model_generator_1","util_2","isLoaded","drop","droppedElement","rafCallback","generator","getModelGenerator","setVisible","innerDiv","contentDiv","createContentTable","multiselectable","initializeContentDrop","cellspacing","setColGroup","cloneNode","getColGroup","hdrTbody","frag","createDocumentFragment","hdrfrag","RowRenderer","rowElements","modelData","generateRows","idx","fCont","mCont","cont","CellMergeRender","updateVirtualCells","isTR","nodeName","td","colcount","Number","overflowY","childElementCount","overflow","appendContent","contentPanel","panel","contentTable","colgroup","colGroup","testRow","some","clen","canSkip","displayVal","Droppable","accept","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","isSelected","cellType","refreshRow","isChanged","refreshMergeCells","cells_1","rowArgs","cellArgs","attrCopy","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","colSpan","cellSpan","isSpanned","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","rowSpan","class","ToolbarItem","spanText","aria-colSpan","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","split","getMergeCells","mCells","getIndexFromAllColumns","vColumnIndices","_b","rows_1","startIndex","generateRow","ensureColumns","generateCell","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","CommandColumn","rowId","oIndex","opt","isTemplate","rowID","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","cIndex_1","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","summaryRows","single","setTemplate","types","helper","disp","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","checkbox_filter_1","initDataManager","addRows","removeRows","crudActions","skipPage","clone","predicates","CheckBoxFilter","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","isGrpFmt","formatGroupColumn","getKey","foreignKeyData","executeQuery","date","update","url","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","ej2_buttons_1","ej2_inputs_1","ej2_popups_2","util_3","defaultConstants","OK","Filter","Clear","SelectAll","Blanks","NoResult","values","cBoxTrue","createCheckBox","label","cBoxFalse","initLocale","insertBefore","constants","closeDialog","clickHandler","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","updateDataSource","updateModel","filteredColumns","allowCaseSensitive","isFiltered","localizedStrings","getAndSetChkElem","sBox","hideSearchbox","placeholder","searchBox","Input","createInput","floatLabelType","spinner","cBox","showDialog","filterModel","columnType","Dialog","close","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","isPrimary","dialogCreated","open","dialogOpen","appendTo","maxHeight","getAllData","X","Y","openDialog","text","innerText","fltrBtnHandler","handler","optr","caseSen","defaults","matchcase","isNotEqual","itemsCnt","fObj","setDateObject","initiateFilter","fColl","firstVal","ejpredicate","filterCollection","parsed","parseFloat","processDataSource","getPredicateFromCols","dataSuccess","fullData","getDistinct","filteredData","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes","cBoxes_1","createCheckbox","cnt","selected","btn","disabled","isColFiltered","getCheckedState","lookup","sort","fnAscending","generatePredicate","updateDateFilter","sender","parentEle","visualElement","headercelldiv","headerTemplate","textContent","firstElementChild","lineHeight","dragStart","drag","cloneElement","dragStop","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","tHead","bodyCell","findHeaderRow","createHeaderContent","thead","rowBody","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","getCellCnt","colIndex","gCells","max","depth","checkDepth","Draggable","dragTarget","distance","abort","tabindex","rowChkBox","localizer","formatter","getGui","evaluate","invokeFormatter","refreshCell","refreshTD","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","CheckBox","property","buildAttributeFromCell","clipMode","colindex","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","editType","checkAllWrap","matchFlColumns","grabbed","extendPrepareHeader","headerTextAlign","alignment","matchFilteredColumns","setStateAndProperties","attribute","name","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","haspopup","toolTip","captionTemplate","aria-expanded","cellRenderMap","getEnumValue","services","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","mHdr","edit","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","freezeWidth","colGrp","mColGrp","select","currentInfo","oneTime","forget","skipFocus","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","onClick","force","isContent","beforeArgs","byKey","byClick","clickArgs","onKeyPress","skipOn","keyArgs","bValue","outline","swap","jump","isHeader","rowInitVal","activeElement","getFocusedElement","elementToFocus","active","setFocusedElement","setTimeout","removeFocus","addFocus","getFocusInfo","info","isFocused","isJump","container","getInfo","refreshMatrix","ContentFocus","HeaderFocus","cFocus","generate","actions","restoreFocus","evt","clearOutline","getPrevIndexes","forgetPrevious","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","_c","getFocusable","child","isDirty","isData","isSelectable","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","isBatchEdit","prevKey","isChkAll","isUnChkAll","chkAllCollec","isCheckedOnAdd","persistSelectedData","selectionRequest","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","updatePersistCollection","chkState","rowObj","pKey","primaryKey","updateCheckBoxes","chkBox","nextElementSibling","checkedTarget","setCheckAllState","clearCellSelection","isCellType","selectedCell","getColIndex","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","onCellFocused","onDataBound","checkBoxSelectionChanged","isCheckColumn","isChkSelection","chkField","chkAllObj","proxy_1","refreshPersistSelection","checkState","editChkBox","checkSelectAllAction","editForm","checkSelectAll","checkBox","state","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","checkedLen","spanEle","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","applyUpDown","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","onContentScroll","scrollTarget","scrollLeft","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","scrollHeight","clientHeight","setPageXY","pageX","pageY","css","isPrinting","printWindow","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","fn","getTemplate","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","dlgObj","hideDialog","renderDlgContent","targetElement","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","beforeClose","customDialogClose","searchElement","columnChooserManualSearch","dlgDiv","tarElement","showCloseIcon","closeOnEscape","getElementById","confirmDlgBtnClick","clearActions","mainDiv","searchDiv","ccsearchele","ccsearchicon","conDiv","searchFocus","searchBlur","innerDivContent","refreshCheckboxList","targt","columnStateChange","params","dialogInstance","stateColumns","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","checkBoxClickHandler","checkstate","columnUid","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","copyContent","isSelect","keyDownHandler","clipBoardTextArea","readonly","setCopyData","getSelection","selectedIndexes","getCopyData","userAgent","match","setSelectionRange","isCell","queryCommandSupported","execCommand","blur","removeAllRanges","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","command_column_1","context_menu_1","freeze_1","column_menu_1","excel_filter_1","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","setProperties","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","offset","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","callback","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","gLen","isVisible","n","currentFirst","iterateGroup","oRow","shift","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","pagerDestroy","pagerTemplate","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","keyPressHandler","canSkipAction","el","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","pageCount","getPagerTemplate","updateTotalPages","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","replace","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","change","onChange","filter_cell_renderer_1","filter_menu_renderer_1","nextFlMenuOpen","menu","FilterMenuRenderer","checkbox","excel","ExcelFilter","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","columnMenuFilter","filterIconClickHandler","isClose","filterDialogOpen","customOperators","displayName","filterHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","fltrElement","updateCrossIcon","processFilter","targetText","previousElementSibling","lastFilterElement","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","stringify","validateFilterValue","getOperator","substring","isNaN","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","filterIconElement","iconClass","filterBarTemplate","templateRead","read","templateWrite","write","filter_menu_operator_1","string_filter_ui_1","number_filter_ui_1","boolean_filter_ui_1","date_filter_ui_1","customFltrOperators","fltrObj","colTypes","string","StringFilterUI","number","NumberFilterUI","DateFilterUI","boolean","BooleanFilterUI","datetime","customFilterOperators","filterObj","flMuiObj","FlMenuOptrUI","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","dlgConetntEle","renderOperatorUI","renderFlValueUI","valueDiv","instanceofFilterUI","ui","getOptrInstance","localizeText","dlgContentEle","flValue","filteredValue","flOptrValue","targ","getFlOperator","flIcon","serLocator","actObj","AutoComplete","sortOrder","openPopup","filterType","autofill","arr","mapObj","filterOptr","actuiObj","optrData","customOptr","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","numericTxtObj","NumericTextBox","numberuiObj","dropInstance","ddActionComplete","drpuiObj","ej2_calendars_1","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","dateuiObj","popupElement","ej2_navigations_1","localeConstants","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","getCMenuDS","iconCss","separator","cmenu","createMenu","ul","icon","createMenuElem","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","isCMenuOpen","menuOptions","selectHandler","onClose","ContextMenu","client","resizeClassList","suppress","cursor","lines","Resize","tapped","isDblClk","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","offsetWidthValue","setHandlerHeight","getResizeHandlers","touchStartEvent","callAutoFit","getTargetColumn","refreshColumnWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","scrollElem","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","dropArea","dataRow","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","isExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","injectedModues","gridElem","idx_1","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","viewStr","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","targetEle","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","tempObj","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","datepicker_edit_cell_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","datepickeredit","DatePickerEditCell","booleanedit","BooleanEditCell","defaultedit","DefaultEditCell","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","EditRender","tapEvent","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","actionBeginFunction","actionCompleteFunction","form","editedData","inputs","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","parentElem","createTooltip","inputName","status","inputClient","arrow","focusOut","isInline","enabled","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","tArgs","isInput","tagName","getEditElement","tdElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","dataCell","activeClasses","classNames","selectChkBox","editRow","popupHeight","dlgElement","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","cellDetails","onBeforeCellFocused","setCellIdx","validateFormObj","editCellFromIndex","isAddRow","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","addRowObject","getIndexFromData","defaultData","getDefaultData","findNextEditableCell","checkNPCell","dValues","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","cIdx","isForceSave","previousValue","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","ExportValueFormatter","ExportHelper","isCsv","processRecords","adaptor","processInnerRecords","getQuery","blankRows","multipleExport","worksheets","processExcelHeader","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","_d","rLen","excelCellArgs","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","caption","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","getConvertedWidth","hideColumnInclude","take","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","returnFormattedValue","customFormat","ej2_pdf_export_1","ej2_pdf_export_2","ej2_pdf_export_3","ej2_pdf_export_4","ej2_pdf_export_5","ej2_pdf_export_6","PdfExport","customDataSource","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","pdfColor","PdfColor","penBrushColor","hexToRgb","g","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfBorders","borderColor","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","spanCell","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","command_column_renderer_1","CommandColumnRenderer","commandClickHandler","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","Button","menuClass","editIcon","pager","pdf","ungroup","csv","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","eventArgs","updateItemStatus","getLocaleText","showItems","dItem","ensureDisabledStatus","parentItem","hideItems","generateID","export","sortAscending","sortDescending","freeze_renderer_1","Freeze","FreezeRender","FreezeContentRender","freeze_row_model_generator_1","fDiv","mDiv","setFrozenContent","setMovableContent","getMovableContent","frozenContent","movableContent","getFrozenContent","FreezeRowModelGenerator","mTbl","refreshFreeze","rfshMovable","setFrozenHeader","setMovableHeader","getMovableHeader","mTable","renderMovable","getFrozenHeader","filterRow","fRows","mRows","setWrapHeight","isContReset","fRowHgt","mRowHgt","isWrap","tBody","frozenHeader","movableHeader","mEle","isFrzLoad","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","innerHeight","innerWidth","calculatePosition","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","getFilter","isFilterPopupOpen","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","columnChooser","filterPopup","getFilterPop","setPosition","gridPos","liPos","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-calendars\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf-export\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-calendars\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf-export\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_61__, __WEBPACK_EXTERNAL_MODULE_71__, __WEBPACK_EXTERNAL_MODULE_73__, __WEBPACK_EXTERNAL_MODULE_98__, __WEBPACK_EXTERNAL_MODULE_101__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(112)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(50), __webpack_require__(109), __webpack_require__(110), __webpack_require__(111)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(7), __webpack_require__(10), __webpack_require__(11), __webpack_require__(14), __webpack_require__(36), __webpack_require__(37), __webpack_require__(4), __webpack_require__(38), __webpack_require__(39), __webpack_require__(28), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43), __webpack_require__(44), __webpack_require__(45), __webpack_require__(46), __webpack_require__(47), __webpack_require__(48), __webpack_require__(49)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, focus_strategy_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1, clipboard_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], SortDescriptor.prototype, \"field\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], SortDescriptor.prototype, \"direction\", void 0);\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Collection([], SortDescriptor)\n\t        ], SortSettings.prototype, \"columns\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], SortSettings.prototype, \"allowUnsort\", void 0);\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"field\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"operator\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"value\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"matchCase\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"predicate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property({})\n\t        ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property({})\n\t        ], Predicate.prototype, \"actualOperator\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"type\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"ejpredicate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"matchcase\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Predicate.prototype, \"ignoreCase\", void 0);\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Collection([], Predicate)\n\t        ], FilterSettings.prototype, \"columns\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('filterbar')\n\t        ], FilterSettings.prototype, \"type\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], FilterSettings.prototype, \"mode\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(1500)\n\t        ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], FilterSettings.prototype, \"operators\", void 0);\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property('row')\n\t        ], SelectionSettings.prototype, \"mode\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('flow')\n\t        ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('single')\n\t        ], SelectionSettings.prototype, \"type\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], SelectionSettings.prototype, \"persistSelection\", void 0);\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property([])\n\t        ], SearchSettings.prototype, \"fields\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('')\n\t        ], SearchSettings.prototype, \"key\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('contains')\n\t        ], SearchSettings.prototype, \"operator\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], RowDropSettings.prototype, \"targetID\", void 0);\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property('both')\n\t        ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property([])\n\t        ], GroupSettings.prototype, \"columns\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], GroupSettings.prototype, \"captionTemplate\", void 0);\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], EditSettings.prototype, \"allowAdding\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], EditSettings.prototype, \"allowEditing\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('normal')\n\t        ], EditSettings.prototype, \"mode\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.freezeRefresh = ej2_base_1.Component.prototype.refresh;\n\t            _this.mergeCells = {};\n\t            _this.isEdit = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Save: 'Save',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found',\n\t                FilterButton: 'Filter',\n\t                ClearButton: 'Clear',\n\t                StartsWith: 'StartsWith',\n\t                EndsWith: 'EndsWith',\n\t                Contains: 'Contains',\n\t                Equal: 'Equal',\n\t                NotEqual: 'NotEqual',\n\t                LessThan: 'LessThan',\n\t                LessThanOrEqual: 'LessThanOrEqual',\n\t                GreaterThan: 'GreaterThan',\n\t                GreaterThanOrEqual: 'GreaterThanOrEqual',\n\t                ChooseDate: 'Choose a Date',\n\t                EnterValue: 'Enter the value',\n\t                Copy: 'Copy',\n\t                Group: 'Group by this column',\n\t                Ungroup: 'Ungroup by this column',\n\t                autoFitAll: 'Auto Fit all columns',\n\t                autoFit: 'Auto Fit this column',\n\t                Export: 'Export',\n\t                FirstPage: 'First Page',\n\t                LastPage: 'Last Page',\n\t                PreviousPage: 'Previous Page',\n\t                NextPage: 'Next Page',\n\t                SortAscending: 'Sort Ascending',\n\t                SortDescending: 'Sort Descending',\n\t                EditRecord: 'Edit Record',\n\t                DeleteRecord: 'Delete Record',\n\t                FilterMenu: 'Filter',\n\t                Columnchooser: 'Columns'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                ctrlEnter: 'ctrl+enter',\n\t                shiftEnter: 'shift+enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab',\n\t                space: 'space',\n\t                ctrlPlusC: 'ctrl+C',\n\t                ctrlShiftPlusH: 'ctrl+shift+H'\n\t            };\n\t            ej2_base_2.setValue('mergePersistData', _this.mergePersistGridData, _this);\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var _this = this;\n\t            var keyEntity = ['pageSettings', 'sortSettings',\n\t                'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n\t            var ignoreOnPersist = {\n\t                pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n\t                filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay'],\n\t                groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n\t                    'disablePageWiseAggregates', 'hideCaptionCount'],\n\t                searchSettings: ['fields', 'operator', 'ignoreCase'],\n\t                sortSettings: [], columns: [], selectedRowIndex: []\n\t            };\n\t            var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n\t                'commandTemplate', 'commands'];\n\t            keyEntity.forEach(function (value) {\n\t                var currentObject = _this[value];\n\t                for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n\t                    var val = _a[_i];\n\t                    delete currentObject[val];\n\t                }\n\t            });\n\t            this.ignoreInArrays(ignoreOnColumn, this.columns);\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n\t            var _this = this;\n\t            columns.forEach(function (column) {\n\t                if (column.columns) {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                    _this.ignoreInArrays(ignoreOnColumn, column.columns);\n\t                }\n\t                else {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                }\n\t            });\n\t        };\n\t        Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n\t            ignoreOnColumn.forEach(function (val) {\n\t                delete column[val];\n\t            });\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.frozenColumns || this.frozenRows) {\n\t                modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            this.extendRequiredModules(modules);\n\t            return modules;\n\t        };\n\t        Grid.prototype.extendRequiredModules = function (modules) {\n\t            if (this.isCommandColumn(this.columns)) {\n\t                modules.push({\n\t                    member: 'commandColumn',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.contextMenuItems) {\n\t                modules.push({\n\t                    member: 'contextMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.showColumnMenu) {\n\t                modules.push({\n\t                    member: 'columnMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            ej2_popups_1.createSpinner({ target: this.element });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.showSpinner();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.showSpinner = function () {\n\t            ej2_popups_1.showSpinner(this.element);\n\t        };\n\t        Grid.prototype.hideSpinner = function () {\n\t            ej2_popups_1.hideSpinner(this.element);\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t            this.focusModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    case 'frozenColumns':\n\t                    case 'frozenRows':\n\t                        this.freezeRefresh();\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.contextMenuItems) {\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.showColumnMenu) {\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.getLocaleConstants = function () {\n\t            return this.defaultLocale;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getRowInfo = function (target) {\n\t            var ele = target;\n\t            var args = {};\n\t            if (!ej2_base_2.isNullOrUndefined(target) && ej2_base_2.isNullOrUndefined(util_1.parentsUntil(ele, 'e-detailrowcollapse')\n\t                && ej2_base_2.isNullOrUndefined(util_1.parentsUntil(ele, 'e-recordplusexpand')))) {\n\t                var cell = ej2_base_1.closest(ele, '.e-rowcell');\n\t                if (!ej2_base_2.isNullOrUndefined(cell)) {\n\t                    var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n\t                    var row_1 = ej2_base_1.closest(cell, '.e-row');\n\t                    var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n\t                    var rowsObject = this.contentModule.getRows().filter(function (r) {\n\t                        return r.uid === row_1.getAttribute('data-uid');\n\t                    });\n\t                    var rowData = rowsObject[0].data;\n\t                    var column = rowsObject[0].cells[cellIndex].column;\n\t                    args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column };\n\t                }\n\t            }\n\t            return args;\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getRowsObject = function () {\n\t            return this.contentModule.getRows();\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.selectionModule.getSelectedRecords();\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index, isToggle) {\n\t            this.selectionModule.selectRow(index, isToggle);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex, isToggle) {\n\t            this.selectionModule.selectCell(cellIndex, isToggle);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.copy = function (withHeader) {\n\t            this.clipboardModule.copy(withHeader);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t            this.serviceLocator.register('focus', this.focusModule = new focus_strategy_1.FocusStrategy(this));\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.clipboardModule = new clipboard_1.Clipboard(this);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.refreshTooltip = function () {\n\t            var width;\n\t            var headerTable = this.getHeaderTable();\n\t            var contentTable = this.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var htable = this.createTable(headerTable, headerDivTag, 'header');\n\t            var ctable = this.createTable(headerTable, headerDivTag, 'content');\n\t            var all = this.element.querySelectorAll('.e-ellipsistooltip');\n\t            var allele = [];\n\t            for (var i = 0; i < all.length; i++) {\n\t                allele[i] = all[i];\n\t            }\n\t            allele.forEach(function (element) {\n\t                var td = element;\n\t                var table = headerTable.contains(element) ? htable : ctable;\n\t                var ele = headerTable.contains(element) ? 'th' : 'tr';\n\t                table.querySelector(ele).className = element.className;\n\t                table.querySelector(ele).innerHTML = element.innerHTML;\n\t                width = table.querySelector(ele).getBoundingClientRect().width;\n\t                if (width > element.getBoundingClientRect().width && !element.classList.contains('e-tooltip')) {\n\t                    var tooltip = new ej2_popups_1.Tooltip({ content: element.innerHTML }, element);\n\t                }\n\t                else if (width < element.getBoundingClientRect().width && element.classList.contains('e-tooltip')) {\n\t                    element.ej2_instances[0].destroy();\n\t                }\n\t            });\n\t            document.body.removeChild(htable);\n\t            document.body.removeChild(ctable);\n\t        };\n\t        Grid.prototype.createTable = function (table, tag, type) {\n\t            var myTableDiv = ej2_base_3.createElement('div');\n\t            myTableDiv.className = this.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_3.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_3.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var ele = (type === 'header') ? 'th' : 'td';\n\t            var myTr = ej2_base_3.createElement('tr');\n\t            var mytd = ej2_base_3.createElement(ele);\n\t            myTr.appendChild(mytd);\n\t            myTable.appendChild(myTr);\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            return myTableDiv;\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.on(event, _this.refreshTooltip, _this);\n\t            });\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.dataBoundFunction = this.refreshMediaCol.bind(this);\n\t            this.addEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.off(event, _this.refreshTooltip);\n\t            });\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return !util_1.parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id || ej2_base_1.closest(e.target, '.e-unboundcelldiv')) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.mergePersistGridData = function () {\n\t            var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n\t            if (!(ej2_base_2.isNullOrUndefined(data) || (data === ''))) {\n\t                var dataObj_1 = JSON.parse(data);\n\t                var keys = Object.keys(dataObj_1);\n\t                this.isProtectedOnChange = true;\n\t                var _loop_2 = function (key) {\n\t                    if ((typeof this_2[key] === 'object') && !ej2_base_2.isNullOrUndefined(this_2[key])) {\n\t                        if (Array.isArray(this_2[key])) {\n\t                            this_2[key].forEach(function (element, index) {\n\t                                ej2_base_1.extend(element, dataObj_1[key][index]);\n\t                            });\n\t                        }\n\t                        else {\n\t                            ej2_base_1.extend(this_2[key], dataObj_1[key]);\n\t                        }\n\t                    }\n\t                    else {\n\t                        this_2[key] = dataObj_1[key];\n\t                    }\n\t                };\n\t                var this_2 = this;\n\t                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                    var key = keys_1[_i];\n\t                    _loop_2(key);\n\t                }\n\t                this.isProtectedOnChange = false;\n\t            }\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n\t                    && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        Grid.prototype.isCommandColumn = function (columns) {\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (column.columns) {\n\t                    if (this.isCommandColumn(column.columns)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                else if (column.commands || column.commandsTemplate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.groupColumn = function (columnName) {\n\t            this.groupModule.groupColumn(columnName);\n\t        };\n\t        Grid.prototype.ungroupColumn = function (columnName) {\n\t            this.groupModule.ungroupColumn(columnName);\n\t        };\n\t        Grid.prototype.isContextMenuOpen = function () {\n\t            return this.contextMenuModule && this.contextMenuModule.isOpen;\n\t        };\n\t        Grid.prototype.ensureModuleInjected = function (module) {\n\t            return this.getInjectedModules().indexOf(module) >= 0;\n\t        };\n\t        Grid.prototype.showColumn = function (columnName, showBy) {\n\t            this.showHider.show(columnName, showBy);\n\t        };\n\t        Grid.prototype.hideColumn = function (columnName, hideBy) {\n\t            this.showHider.hide(columnName, hideBy);\n\t        };\n\t        __decorate([\n\t            ej2_base_4.Property([])\n\t        ], Grid.prototype, \"columns\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Grid.prototype, \"enableAltRow\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Grid.prototype, \"enableHover\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Grid.prototype, \"allowKeyboard\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowTextWrap\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, TextWrapSettings)\n\t        ], Grid.prototype, \"textWrapSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowPaging\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t        ], Grid.prototype, \"pageSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"enableVirtualization\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, SearchSettings)\n\t        ], Grid.prototype, \"searchSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowSorting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Grid.prototype, \"allowMultiSorting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowExcelExport\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowPdfExport\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, SortSettings)\n\t        ], Grid.prototype, \"sortSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Grid.prototype, \"allowSelection\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(-1)\n\t        ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, SelectionSettings)\n\t        ], Grid.prototype, \"selectionSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowFiltering\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowReordering\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowResizing\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, RowDropSettings)\n\t        ], Grid.prototype, \"rowDropSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, FilterSettings)\n\t        ], Grid.prototype, \"filterSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"allowGrouping\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"showColumnMenu\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, GroupSettings)\n\t        ], Grid.prototype, \"groupSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Complex({}, EditSettings)\n\t        ], Grid.prototype, \"editSettings\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t        ], Grid.prototype, \"aggregates\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Grid.prototype, \"showColumnChooser\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('auto')\n\t        ], Grid.prototype, \"height\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('auto')\n\t        ], Grid.prototype, \"width\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('default')\n\t        ], Grid.prototype, \"gridLines\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"rowTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"detailTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"childGrid\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"queryString\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('allpages')\n\t        ], Grid.prototype, \"printMode\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property([])\n\t        ], Grid.prototype, \"dataSource\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"query\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"toolbar\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"contextMenuItems\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"columnMenuItems\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Grid.prototype, \"pagerTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(0)\n\t        ], Grid.prototype, \"frozenRows\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(0)\n\t        ], Grid.prototype, \"frozenColumns\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"created\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"destroyed\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"load\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDataBound\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"queryCellInfo\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"actionBegin\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"actionComplete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"actionFailure\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"dataBound\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowSelecting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowSelected\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDeselecting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDeselected\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellSelecting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellSelected\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellDeselecting\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellDeselected\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"columnDragStart\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"columnDrag\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"columnDrop\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"printComplete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforePrint\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeExcelExport\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"excelExportComplete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforePdfExport\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"pdfExportComplete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"detailDataBound\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDragStart\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDrag\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"rowDrop\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"toolbarClick\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"batchAdd\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"batchDelete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beginEdit\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellEdit\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"cellSave\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"resizeStart\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"onResize\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"resizeStop\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeDataBound\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"contextMenuOpen\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"contextMenuClick\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"columnMenuOpen\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"columnMenuClick\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"checkBoxChange\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Grid.prototype, \"beforeCopy\", void 0);\n\t        Grid = __decorate([\n\t            ej2_base_4.NotifyPropertyChanges\n\t        ], Grid);\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t    function changeButtonType(target) {\n\t        var elements = [].slice.call(target.querySelectorAll('button'));\n\t        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t            var button = elements_1[_i];\n\t            ej2_base_3.attributes(button, { type: 'button' });\n\t        }\n\t    }\n\t    exports.changeButtonType = changeButtonType;\n\t    function setFormatter(serviceLocator, column) {\n\t        var fmtr = serviceLocator.getService('valueFormatter');\n\t        switch (column.type) {\n\t            case 'date':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n\t                break;\n\t            case 'datetime':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n\t                break;\n\t            case 'number':\n\t                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ format: column.format }));\n\t                break;\n\t        }\n\t    }\n\t    exports.setFormatter = setFormatter;\n\t    function addRemoveActiveClasses(cells, add) {\n\t        var args = [];\n\t        for (var _i = 2; _i < arguments.length; _i++) {\n\t            args[_i - 2] = arguments[_i];\n\t        }\n\t        for (var i = 0, len = cells.length; i < len; i++) {\n\t            if (add) {\n\t                ej2_base_1.classList(cells[i], args.slice(), []);\n\t                cells[i].setAttribute('aria-selected', 'true');\n\t            }\n\t            else {\n\t                ej2_base_1.classList(cells[i], [], args.slice());\n\t                cells[i].removeAttribute('aria-selected');\n\t            }\n\t        }\n\t    }\n\t    exports.addRemoveActiveClasses = addRemoveActiveClasses;\n\t    function distinctStringValues(result) {\n\t        var temp = {};\n\t        var res = [];\n\t        for (var i = 0; i < result.length; i++) {\n\t            if (!(result[i] in temp)) {\n\t                res.push(result[i].toString());\n\t                temp[result[i]] = 1;\n\t            }\n\t        }\n\t        return res;\n\t    }\n\t    exports.distinctStringValues = distinctStringValues;\n\t    function getFilterMenuPostion(target, dialogObj) {\n\t        var elementVisible = dialogObj.element.style.display;\n\t        dialogObj.element.style.display = 'block';\n\t        var dlgWidth = dialogObj.width;\n\t        var newpos = ej2_popups_1.calculateRelativeBasedPosition(target, dialogObj.element);\n\t        dialogObj.element.style.display = elementVisible;\n\t        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n\t        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n\t        if (leftPos < 1) {\n\t            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px';\n\t        }\n\t        else {\n\t            dialogObj.element.style.left = leftPos + -4 + 'px';\n\t        }\n\t    }\n\t    exports.getFilterMenuPostion = getFilterMenuPostion;\n\t    function getZIndexCalcualtion(args, dialogObj) {\n\t        args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n\t    }\n\t    exports.getZIndexCalcualtion = getZIndexCalcualtion;\n\t    function toogleCheckbox(elem) {\n\t        var span = elem.querySelector('.e-frame');\n\t        span.classList.contains('e-check') ? ej2_base_1.classList(span, ['e-uncheck'], ['e-check']) :\n\t            ej2_base_1.classList(span, ['e-check'], ['e-uncheck']);\n\t    }\n\t    exports.toogleCheckbox = toogleCheckbox;\n\t    function createCboxWithWrap(uid, elem, className) {\n\t        var div = ej2_base_3.createElement('div', { className: className });\n\t        div.appendChild(elem);\n\t        div.setAttribute('uid', uid);\n\t        return div;\n\t    }\n\t    exports.createCboxWithWrap = createCboxWithWrap;\n\t    function removeAddCboxClasses(elem, checked) {\n\t        ej2_base_3.removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n\t        if (checked) {\n\t            elem.classList.add('e-check');\n\t        }\n\t        else {\n\t            elem.classList.add('e-uncheck');\n\t        }\n\t    }\n\t    exports.removeAddCboxClasses = removeAddCboxClasses;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(4), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.showColumnMenu = true;\n\t            this.enableGroupByFormat = false;\n\t            this.allowEditing = true;\n\t            this.filter = {};\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.commands && !this.textAlign) {\n\t                this.textAlign = 'right';\n\t            }\n\t            if (this.template || this.commandsTemplate) {\n\t                this.templateFn = util_1.templateCompiler(this.template || this.commandsTemplate);\n\t            }\n\t            if (this.filter.itemTemplate) {\n\t                this.fltrTemplateFn = util_1.templateCompiler(this.filter.itemTemplate);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getFilterItemTemplate = function () {\n\t            return this.fltrTemplateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.checkBoxChange = 'checkBoxChange';\n\t    exports.beforeCopy = 'beforeCopy';\n\t    exports.filterChoiceRequest = 'filterchoicerequest';\n\t    exports.filterAfterOpen = 'filterafteropen';\n\t    exports.filterBeforeOpen = 'filterbeforeopen';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.onEmpty = 'on-empty';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.beforeCellFocused = 'beforecellfocused';\n\t    exports.cellFocused = 'cellfocused';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t    exports.accessPredicate = 'access-predicate';\n\t    exports.contextMenuClick = 'contextMenuClick';\n\t    exports.freezeRefresh = 'freezerefresh';\n\t    exports.freezeRender = 'freezerender';\n\t    exports.contextMenuOpen = 'contextMenuOpen';\n\t    exports.columnMenuClick = 'contextMenuClick';\n\t    exports.columnMenuOpen = 'columnMenuOpen';\n\t    exports.filterOpen = 'filterOpen';\n\t    exports.filterDialogCreated = 'filterDialogCreated';\n\t    exports.filterMenuClose = 'filter-menu-close';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(14), __webpack_require__(21), __webpack_require__(17), __webpack_require__(18), __webpack_require__(10), __webpack_require__(7), __webpack_require__(12), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32), __webpack_require__(33), __webpack_require__(34), __webpack_require__(35)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, row_1, cell_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent, locator);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            if (args.requestType !== 'virtualscroll') {\n\t                this.parent.showSpinner();\n\t            }\n\t            this.parent.isEdit = false;\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t                this.parent.notify(events.onEmpty, { rows: [new row_1.Row({ isDataRow: true, cells: [new cell_1.Cell({ isDataCell: true, visible: true })] })] });\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t                if (typeof (columns[i].format) === 'string') {\n\t                    util_1.setFormatter(this.locator, columns[i]);\n\t                }\n\t                else if (!columns[i].format && columns[i].type === 'number') {\n\t                    columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t                this.parent.hideSpinner();\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t            this.parent.hideSpinner();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            }).catch(function (e) { return deferred.reject(e); });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15), __webpack_require__(16), __webpack_require__(19), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_merge_renderer_1, row_model_generator_1, group_model_generator_1, util_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.isLoaded = true;\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function (args) { return function () {\n\t                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                _this.parent.notify(events.contentReady, { rows: _this.rows, args: args });\n\t                if (_this.isLoaded) {\n\t                    _this.parent.trigger(events.dataBound, {});\n\t                    if (_this.parent.allowTextWrap) {\n\t                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n\t                    }\n\t                }\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    _this.parent.notify(action, args);\n\t                }\n\t                _this.parent.hideSpinner();\n\t            }; };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            if (gObj.currentViewData.length === 0) {\n\t                return;\n\t            }\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var hdrfrag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var tbody;\n\t            var hdrTbody;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            this.rows = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var idx = modelData[0].cells[0].index;\n\t            var fCont = this.getPanel().querySelector('.e-frozencontent');\n\t            var mCont = this.getPanel().querySelector('.e-movablecontent');\n\t            var cont = this.getPanel().querySelector('.e-content');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                cellMerge.updateVirtualCells(modelData);\n\t            }\n\t            if (this.parent.frozenColumns && idx >= this.parent.frozenColumns) {\n\t                tbody = mCont.querySelector('tbody');\n\t            }\n\t            else {\n\t                tbody = this.getTable().querySelector('tbody');\n\t            }\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                if (gObj.frozenRows && i < gObj.frozenRows) {\n\t                    hdrfrag.appendChild(tr);\n\t                }\n\t                else {\n\t                    frag.appendChild(tr);\n\t                }\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            if (gObj.frozenRows) {\n\t                hdrTbody = gObj.frozenColumns ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n\t                    : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n\t                hdrTbody.innerHTML = '';\n\t                hdrTbody.appendChild(hdrfrag);\n\t            }\n\t            if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n\t                cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n\t            }\n\t            if (gObj.frozenColumns && idx === 0) {\n\t                this.getPanel().firstChild.style.overflowY = 'hidden';\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                if (gObj.frozenColumns) {\n\t                    tbody.appendChild(frag);\n\t                    if (idx === 0) {\n\t                        _this.isLoaded = false;\n\t                        fCont.querySelector('table').appendChild(tbody);\n\t                    }\n\t                    else {\n\t                        if (tbody.childElementCount < 1) {\n\t                            tbody.appendChild(ej2_base_3.createElement('tr').appendChild(ej2_base_3.createElement('td')));\n\t                        }\n\t                        _this.isLoaded = true;\n\t                        mCont.querySelector('table').appendChild(tbody);\n\t                        fCont.style.height = ((mCont.offsetHeight) - util_2.getScrollBarWidth()) + 'px';\n\t                        mCont.style.overflow = 'scroll';\n\t                    }\n\t                }\n\t                else {\n\t                    _this.appendContent(tbody, frag, args);\n\t                }\n\t                if (gObj.frozenColumns && idx === 0) {\n\t                    _this.refreshContentRows(args);\n\t                }\n\t            }, this.rafCallback(args));\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7), __webpack_require__(14), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1, cell_merge_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t                this.refreshMergeCells(row);\n\t            }\n\t            var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column, colSpan: 1 }));\n\t                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n\t                        var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                        td = cellMerge.render(cellArgs, row, i, td);\n\t                    }\n\t                }\n\t                if (!row.cells[i].isSpanned) {\n\t                    tr.appendChild(td);\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.refreshMergeCells = function (row) {\n\t            for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n\t                var cell = _a[_i];\n\t                cell.isSpanned = false;\n\t            }\n\t            return row;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t        CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t    var ToolbarItem;\n\t    (function (ToolbarItem) {\n\t        ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n\t        ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n\t        ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n\t        ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n\t        ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n\t        ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n\t        ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n\t        ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n\t        ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n\t        ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n\t        ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n\t        ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n\t    })(ToolbarItem = exports.ToolbarItem || (exports.ToolbarItem = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellMergeRender = (function () {\n\t        function CellMergeRender(serviceLocator, parent) {\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t            var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n\t                (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n\t            var visible = 0;\n\t            for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n\t                if (row.cells[j].visible === false) {\n\t                    visible++;\n\t                }\n\t                else {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t            }\n\t            if (visible > 0) {\n\t                for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t                if (i + span + visible >= row.cells.length) {\n\t                    span -= (i + span + visible) - row.cells.length;\n\t                }\n\t            }\n\t            if (row.cells[i].cellSpan) {\n\t                row.data[cellArgs.column.field] = row.cells[i].spanText;\n\t                td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t            }\n\t            if (span > 1) {\n\t                ej2_base_1.attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n\t            }\n\t            if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n\t                !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n\t                this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n\t            }\n\t            return td;\n\t        };\n\t        CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n\t            this.setMergeCells(this.generteKey(fName, data), span);\n\t        };\n\t        CellMergeRender.prototype.generteKey = function (fname, data) {\n\t            return fname + '__' + data.toString();\n\t        };\n\t        CellMergeRender.prototype.splitKey = function (key) {\n\t            return key.split('__');\n\t        };\n\t        CellMergeRender.prototype.containsKey = function (fname, data) {\n\t            return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n\t        };\n\t        CellMergeRender.prototype.getMergeCells = function () {\n\t            return this.parent.mergeCells;\n\t        };\n\t        CellMergeRender.prototype.setMergeCells = function (key, span) {\n\t            this.parent.mergeCells[key] = span;\n\t        };\n\t        CellMergeRender.prototype.updateVirtualCells = function (rows) {\n\t            var mCells = this.getMergeCells();\n\t            for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var value = mCells[key];\n\t                var merge = this.splitKey(key);\n\t                var columnIndex = this.getIndexFromAllColumns(merge[0]);\n\t                var vColumnIndices = this.parent.getColumnIndexesInView();\n\t                var span = value - (vColumnIndices[0] - columnIndex);\n\t                if (columnIndex < vColumnIndices[0] && span > 1) {\n\t                    for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n\t                        var row = rows_1[_b];\n\t                        if (row.data[merge[0]].toString() === merge[1].toString()) {\n\t                            row.cells[0].cellSpan = span;\n\t                            row.cells[0].spanText = merge[1];\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return index;\n\t        };\n\t        return CellMergeRender;\n\t    }());\n\t    exports.CellMergeRender = CellMergeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(17), __webpack_require__(14), __webpack_require__(18), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, ej2_base_1.isNullOrUndefined(dummy.commands) ? undefined : enum_1.CellType.CommandColumn, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan,\n\t                'commands': column.commands\n\t            };\n\t            if (opt.isDataCell || opt.column.type === 'checkbox') {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            this.isSpanned = false;\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                var cIndex_1 = 0;\n\t                captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n\t                visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n\t                if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n\t                    visibles = visibles.slice(1);\n\t                }\n\t                if (this.parent.getVisibleColumns().length === 1) {\n\t                    visibles = [];\n\t                }\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(9), __webpack_require__(5), __webpack_require__(7), __webpack_require__(14), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && !ej2_base_1.isNullOrUndefined(group.aggregates[key]) ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(4), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events, value_formatter_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                var predicate = void 0;\n\t                if (gObj.filterSettings.type === 'checkbox') {\n\t                    var predicates = checkbox_filter_1.CheckBoxFilter.getPredicate(gObj.filterSettings.columns);\n\t                    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                        var prop = _a[_i];\n\t                        var and = 'and';\n\t                        var obj = predicates[prop];\n\t                        predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                            predicate[and](obj) :\n\t                            obj;\n\t                    }\n\t                    query.where(predicate);\n\t                }\n\t                else {\n\t                    for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                        var col = columns_1[_b];\n\t                        var sType = gObj.getColumnByField(col.field).type;\n\t                        if (sType !== 'date' && sType !== 'datetime') {\n\t                            query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                        }\n\t                        else {\n\t                            query.where(this.getDatePredicate(col));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    var isGrpFmt = gObj.getColumnByField(columns[i]).enableGroupByFormat;\n\t                    var format = gObj.getColumnByField(columns[i]).format;\n\t                    if (isGrpFmt) {\n\t                        query.group(columns[i], this.formatGroupColumn.bind(this), format);\n\t                    }\n\t                    else {\n\t                        query.group(columns[i], null);\n\t                    }\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.formatGroupColumn = function (value, field) {\n\t            var gObj = this.parent;\n\t            var serviceLocator = this.serviceLocator;\n\t            var column = gObj.getColumnByField(field);\n\t            var date = value;\n\t            if (!column.type) {\n\t                column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n\t                    date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t            }\n\t            if (ej2_base_1.isNullOrUndefined(column.getFormatter())) {\n\t                util_1.setFormatter(serviceLocator, column);\n\t            }\n\t            var formatVal = value_formatter_1.ValueFormatter.prototype.toView(value, column.getFormatter());\n\t            return formatVal;\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var datePredicate;\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n\t                prevDate = new Date(value.setDate(value.getDate() - 1));\n\t                nextDate = new Date(value.setDate(value.getDate() + 2));\n\t                prevObj.value = prevDate;\n\t                nextObj.value = nextDate;\n\t                if (filterObject.operator === 'equal') {\n\t                    prevObj.operator = 'greaterthan';\n\t                    nextObj.operator = 'lessthan';\n\t                }\n\t                else if (filterObject.operator === 'notequal') {\n\t                    prevObj.operator = 'lessthanorequal';\n\t                    nextObj.operator = 'greaterthanorequal';\n\t                }\n\t                var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t                datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t            }\n\t            else {\n\t                var predicates = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                datePredicate = predicates;\n\t            }\n\t            return datePredicate;\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(23), __webpack_require__(10), __webpack_require__(4), __webpack_require__(7), __webpack_require__(6), __webpack_require__(24), __webpack_require__(6), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, ej2_buttons_1, events, value_formatter_1, util_2, ej2_popups_1, ej2_inputs_1, ej2_popups_2, util_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CheckBoxFilter = (function () {\n\t        function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n\t            this.defaultConstants = {\n\t                Search: 'Search',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel',\n\t                Filter: 'Filter',\n\t                Clear: 'Clear',\n\t                SelectAll: 'Select All',\n\t                Blanks: 'Blanks',\n\t                True: 'True',\n\t                False: 'False',\n\t                NoResult: 'No Matches Found'\n\t            };\n\t            this.values = {};\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(false, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(false, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.id = this.parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter(this.parent.locale);\n\t            this.initLocale(this.defaultConstants);\n\t            this.cBoxTrue.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        CheckBoxFilter.prototype.initLocale = function (constants) {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.parent.locale || 'en-US');\n\t        };\n\t        CheckBoxFilter.prototype.destroy = function () {\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchBoxKeyUp, this);\n\t        };\n\t        CheckBoxFilter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickHandler);\n\t            var elem = this.dlg.querySelector('.e-searchinput');\n\t            if (elem) {\n\t                ej2_base_1.EventHandler.remove(elem, 'keyup', this.searchBoxKeyUp);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxClick = function (e) {\n\t            var target = e.target;\n\t            if (target.classList.contains('e-searchclear')) {\n\t                this.sInput.value = '';\n\t                this.refreshCheckboxes();\n\t                this.updateSearchIcon();\n\t                this.sInput.focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n\t            this.refreshCheckboxes();\n\t            this.updateSearchIcon();\n\t        };\n\t        CheckBoxFilter.prototype.updateSearchIcon = function () {\n\t            if (this.sInput.value.length) {\n\t                ej2_base_1.classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n\t            }\n\t            else {\n\t                ej2_base_1.classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        CheckBoxFilter.prototype.updateDataSource = function () {\n\t            var dataSource = this.options.dataSource;\n\t            if (!(dataSource instanceof ej2_data_1.DataManager)) {\n\t                for (var i = 0; i < dataSource.length; i++) {\n\t                    if (typeof dataSource !== 'object') {\n\t                        var obj = {};\n\t                        obj[this.options.field] = dataSource[i];\n\t                        dataSource[i] = obj;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateModel = function (options) {\n\t            this.options = options;\n\t            this.options.dataSource = options.dataSource;\n\t            this.updateDataSource();\n\t            this.options.type = options.type || 'string';\n\t            this.options.format = options.format || '';\n\t            this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n\t            this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n\t            this.options.query = options.query || new ej2_data_1.Query();\n\t            this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n\t            this.values = {};\n\t            this.isFiltered = options.filteredColumns.length;\n\t            ej2_base_1.extend(this.defaultConstants, options.localizedStrings);\n\t        };\n\t        CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n\t            this.dlg = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_excelDlg',\n\t                className: 'e-checkboxfilter e-filter-popup'\n\t            });\n\t            this.sBox = ej2_base_2.createElement('div', { className: 'e-searchcontainer' });\n\t            if (!options.hideSearchbox) {\n\t                this.sInput = ej2_base_2.createElement('input', {\n\t                    id: this.id + '_SearchBox',\n\t                    className: 'e-searchinput'\n\t                });\n\t                this.sIcon = ej2_base_2.createElement('span', {\n\t                    className: 'e-searchclear e-search-icon e-icons', attrs: {\n\t                        type: 'text', placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox = ej2_base_2.createElement('span', { className: 'e-searchbox e-fields' });\n\t                this.searchBox.appendChild(this.sInput);\n\t                this.sBox.appendChild(this.searchBox);\n\t                ej2_inputs_1.Input.createInput({\n\t                    element: this.sInput, floatLabelType: 'Never', properties: {\n\t                        placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n\t            }\n\t            this.spinner = ej2_base_2.createElement('div', { className: 'e-spinner' });\n\t            this.cBox = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_CheckBoxList',\n\t                className: 'e-checkboxlist e-fields'\n\t            });\n\t            this.spinner.appendChild(this.cBox);\n\t            this.sBox.appendChild(this.spinner);\n\t            return this.sBox;\n\t        };\n\t        CheckBoxFilter.prototype.showDialog = function (options) {\n\t            var args = {\n\t                requestType: events.filterBeforeOpen, filterModel: this,\n\t                columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                visible: false, content: this.sBox,\n\t                close: this.closeDialog.bind(this),\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(options.target, 'e-bigger')))\n\t                    || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                target: this.parent.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    {\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'Cancel' : 'Clear') }\n\t                    }],\n\t                created: this.dialogCreated.bind(this),\n\t                open: this.dialogOpen.bind(this)\n\t            });\n\t            this.dialogObj.appendTo(this.dlg);\n\t            this.dialogObj.element.style.maxHeight = '800px';\n\t            this.dialogObj.show();\n\t            this.wireEvents();\n\t            ej2_popups_2.createSpinner({ target: this.spinner });\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            this.getAllData();\n\t        };\n\t        CheckBoxFilter.prototype.dialogCreated = function (e) {\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                util_3.getFilterMenuPostion(this.options.target, this.dialogObj);\n\t            }\n\t            else {\n\t                this.dialogObj.position = { X: 'center', Y: 'center' };\n\t            }\n\t            this.parent.notify(events.filterDialogCreated, e);\n\t        };\n\t        CheckBoxFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t        };\n\t        CheckBoxFilter.prototype.closeDialog = function () {\n\t            if (this.dialogObj && !this.dialogObj.isDestroyed) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.options.field });\n\t                this.dialogObj.destroy();\n\t                this.unWireEvents();\n\t                ej2_base_2.remove(this.dlg);\n\t                this.dlg = null;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.btnClick = function (e) {\n\t            var text = e.target.innerText.toLowerCase();\n\t            if (this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter').toLowerCase() === text) {\n\t                this.fltrBtnHandler();\n\t            }\n\t            else if (this.getLocalizedLabel('Clear').toLowerCase() === text) {\n\t                this.options.handler({ action: 'clear-filter', field: this.options.field });\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.fltrBtnHandler = function () {\n\t            var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n\t            var optr = 'equal';\n\t            var caseSen = this.options.type === 'string' ?\n\t                this.options.allowCaseSensitive : true;\n\t            var defaults = {\n\t                field: this.options.field, predicate: 'or',\n\t                operator: optr, matchcase: caseSen\n\t            };\n\t            var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n\t            if (isNotEqual) {\n\t                optr = 'notequal';\n\t                checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n\t                defaults.predicate = 'and';\n\t                defaults.operator = 'notequal';\n\t            }\n\t            var value;\n\t            var fObj;\n\t            var coll = [];\n\t            for (var i = 0; i < checked.length; i++) {\n\t                value = this.values[util_1.parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n\t                fObj = ej2_base_1.extend({}, { value: value }, defaults);\n\t                if (value && !value.toString().length) {\n\t                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n\t                }\n\t                coll.push(this.options.type === 'date' ? CheckBoxFilter.setDateObject(fObj) : fObj);\n\t            }\n\t            this.initiateFilter(coll);\n\t        };\n\t        CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n\t            var firstVal = fColl[0];\n\t            var predicate;\n\t            if (!ej2_base_1.isNullOrUndefined(firstVal)) {\n\t                predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n\t                    new ej2_data_1.Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchcase);\n\t                for (var j = 1; j < fColl.length; j++) {\n\t                    predicate = fColl[j].ejpredicate !== undefined ?\n\t                        predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n\t                        predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchcase);\n\t                }\n\t                var args = {\n\t                    action: 'filtering', filterCollection: fColl, field: this.options.field,\n\t                    ejpredicate: ej2_data_1.Predicate.or(predicate)\n\t                };\n\t                this.options.handler(args);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.refreshCheckboxes = function () {\n\t            var val = this.sInput.value;\n\t            var query = this.options.query.clone();\n\t            var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n\t            var operator = 'contains';\n\t            var matchcase = true;\n\t            parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n\t            if (this.options.type === 'boolean') {\n\t                if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('True').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'true';\n\t                }\n\t                else if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('False').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'false';\n\t                }\n\t            }\n\t            if (this.options.type === 'date' || this.options.type === 'datetime') {\n\t                parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n\t                operator = 'equal';\n\t                if (ej2_base_1.isNullOrUndefined(parsed) && val.length) {\n\t                    return;\n\t                }\n\t            }\n\t            if (val.length) {\n\t                query.where(this.options.field, operator, parsed, matchcase);\n\t            }\n\t            this.processDataSource(query);\n\t        };\n\t        CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n\t            var predicate;\n\t            var predicates = CheckBoxFilter.getPredicate(columns);\n\t            for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                var and = 'and';\n\t                var obj = predicates[prop];\n\t                predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                    predicate[and](obj) :\n\t                    obj;\n\t            }\n\t            return predicate;\n\t        };\n\t        CheckBoxFilter.prototype.getAllData = function () {\n\t            var _this = this;\n\t            var query = new ej2_data_1.Query();\n\t            query.requiresCount();\n\t            this.options.dataSource = this.options.dataSource instanceof ej2_data_1.DataManager ?\n\t                this.options.dataSource : new ej2_data_1.DataManager(this.options.dataSource);\n\t            var promise = this.options.dataSource.executeQuery(query);\n\t            promise.then(function (e) { return _this.dataSuccess(e); });\n\t        };\n\t        CheckBoxFilter.prototype.dataSuccess = function (e) {\n\t            this.fullData = e.result;\n\t            var query = new ej2_data_1.Query();\n\t            if ((this.options.filteredColumns.length)) {\n\t                var cols = [];\n\t                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n\t                    if (this.options.filteredColumns[i].field !== this.options.field) {\n\t                        cols.push(this.options.filteredColumns[i]);\n\t                    }\n\t                }\n\t                var predicate = this.getPredicateFromCols(cols);\n\t                if (predicate) {\n\t                    query.where(predicate);\n\t                }\n\t            }\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            var res = CheckBoxFilter.getDistinct(result, this.options.field);\n\t            this.filteredData = res.records;\n\t            this.processDataSource(null, true);\n\t            var args = {\n\t                requestType: events.filterAfterOpen,\n\t                filterModel: this, columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionComplete, args);\n\t        };\n\t        CheckBoxFilter.prototype.processDataSource = function (query, isInitial) {\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            query = query ? query : this.options.query.clone();\n\t            query.requiresCount();\n\t            var args = {\n\t                requestType: events.filterChoiceRequest, filterModel: this, query: query,\n\t                dataSource: this.filteredData\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            var result = new ej2_data_1.DataManager(args.dataSource).executeLocal(args.query);\n\t            var res = result;\n\t            this.updateResult();\n\t            this.createFilterItems(res.result, isInitial);\n\t        };\n\t        CheckBoxFilter.prototype.updateResult = function () {\n\t            this.result = {};\n\t            var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n\t            var query = new ej2_data_1.Query();\n\t            if (predicate) {\n\t                query.where(predicate);\n\t            }\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n\t                var res = result_1[_i];\n\t                this.result[res[this.options.field]] = true;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var elem = util_1.parentsUntil(target, 'e-checkbox-wrapper');\n\t            if (util_1.parentsUntil(target, 'e-searchbox')) {\n\t                this.searchBoxClick(e);\n\t            }\n\t            if (elem) {\n\t                var selectAll = elem.querySelector('.e-selectall');\n\t                if (selectAll) {\n\t                    this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n\t                }\n\t                else {\n\t                    util_3.toogleCheckbox(elem.parentElement);\n\t                }\n\t                this.updateIndeterminatenBtn();\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n\t            var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n\t            for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n\t                var cBox = cBoxes_1[_i];\n\t                util_3.removeAddCboxClasses(cBox, checked);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.dialogOpen = function () {\n\t            if (this.parent.element.classList.contains('e-device')) {\n\t                this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n\t                this.dialogObj.element.querySelector('.e-btn').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.createCheckbox = function (value, checked) {\n\t            var elem = checked ? this.cBoxTrue.cloneNode(true) :\n\t                this.cBoxFalse.cloneNode(true);\n\t            var label = elem.querySelector('.e-label');\n\t            label.innerHTML = !ej2_base_1.isNullOrUndefined(value) && value.toString().length ? value :\n\t                this.getLocalizedLabel('Blanks');\n\t            if (this.options.template) {\n\t                label.innerHTML = '';\n\t                var args = {};\n\t                args[this.options.field] = value;\n\t                util_1.appendChildren(label, this.options.template(args));\n\t            }\n\t            return elem;\n\t        };\n\t        CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n\t            var cnt = this.cBox.children.length - 1;\n\t            var className = [];\n\t            var elem = this.cBox.querySelector('.e-selectall');\n\t            var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n\t            var btn = this.dlg.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n\t            btn.disabled = false;\n\t            if (cnt === selected) {\n\t                className = ['e-check'];\n\t            }\n\t            else if (selected) {\n\t                className = ['e-stop'];\n\t            }\n\t            else {\n\t                btn.disabled = true;\n\t            }\n\t            ej2_base_1.removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n\t            ej2_base_1.addClass([elem], className);\n\t        };\n\t        CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n\t            var cBoxes = ej2_base_2.createElement('div');\n\t            this.itemsCnt = data.length;\n\t            if (data.length) {\n\t                var selectAll = util_3.createCboxWithWrap(util_1.getUid('cbox'), this.createCheckbox(this.getLocalizedLabel('SelectAll'), false), 'e-ftrchk');\n\t                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n\t                cBoxes.appendChild(selectAll);\n\t                var isColFiltered = new ej2_data_1.DataManager(this.options.filteredColumns).executeLocal(new ej2_data_1.Query().where('field', 'equal', this.options.field)).length;\n\t                for (var i = 0; i < data.length; i++) {\n\t                    var uid = util_1.getUid('cbox');\n\t                    this.values[uid] = ej2_base_1.getValue(this.options.field, data[i]);\n\t                    var value = this.valueFormatter.toView(ej2_base_1.getValue(this.options.field, data[i]), this.options.formatFn);\n\t                    cBoxes.appendChild(util_3.createCboxWithWrap(uid, this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid])), 'e-ftrchk'));\n\t                }\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t                this.updateIndeterminatenBtn();\n\t            }\n\t            else {\n\t                cBoxes.appendChild(ej2_base_2.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t            }\n\t            var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n\t            this.parent.trigger(events.actionComplete, args);\n\t            ej2_popups_2.hideSpinner(this.spinner);\n\t        };\n\t        CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n\t            if (!this.isFiltered || !isColFiltered) {\n\t                return true;\n\t            }\n\t            else {\n\t                return this.result[value];\n\t            }\n\t        };\n\t        CheckBoxFilter.getDistinct = function (json, field) {\n\t            var len = json.length;\n\t            var result = [];\n\t            var value;\n\t            var ejValue = 'ejValue';\n\t            var lookup = {};\n\t            while (len--) {\n\t                value = json[len];\n\t                value = ej2_base_1.getValue(field, value);\n\t                if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                    if (!(value in lookup)) {\n\t                        var obj = {};\n\t                        obj[ejValue] = value;\n\t                        ej2_base_1.setValue(field, value, obj);\n\t                        result.push(obj);\n\t                    }\n\t                    lookup[value] = true;\n\t                }\n\t            }\n\t            return ej2_data_1.DataUtil.group(ej2_data_1.DataUtil.sort(result, field, ej2_data_1.DataUtil.fnAscending), 'ejValue');\n\t        };\n\t        CheckBoxFilter.setDateObject = function (filterObject) {\n\t            var prevObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            var prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            var nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                nextObj.operator = 'lessthan';\n\t                nextObj.predicate = 'and';\n\t                prevObj.operator = 'greaterthan';\n\t                prevObj.predicate = 'and';\n\t            }\n\t            else if (filterObject.operator === 'notequal') {\n\t                nextObj.operator = 'greaterthanorequal';\n\t                nextObj.predicate = 'or';\n\t                prevObj.operator = 'lessthanorequal';\n\t                prevObj.predicate = 'or';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            filterObject.ejpredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) :\n\t                predicateSt.or(predicateEnd);\n\t            filterObject.type = 'date';\n\t            return filterObject;\n\t        };\n\t        CheckBoxFilter.getPredicate = function (columns) {\n\t            var cols = CheckBoxFilter.getDistinct(columns, 'field').records;\n\t            var collection;\n\t            var pred = {};\n\t            for (var i = 0; i < cols.length; i++) {\n\t                collection = new ej2_data_1.DataManager(columns).executeLocal(new ej2_data_1.Query().where('field', 'equal', cols[i].field));\n\t                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n\t            }\n\t            return pred;\n\t        };\n\t        CheckBoxFilter.generatePredicate = function (cols) {\n\t            var len = cols ? cols.length : 0;\n\t            var predicate;\n\t            var first;\n\t            first = CheckBoxFilter.updateDateFilter(cols[0]);\n\t            if (first.type === 'date' || first.type === 'datetime') {\n\t                predicate = CheckBoxFilter.getDatePredicate(first);\n\t            }\n\t            else {\n\t                predicate = first.ejpredicate ? first.ejpredicate :\n\t                    new ej2_data_1.Predicate(first.field, first.operator, first.value, first.ignoreCase || !first.matchcase);\n\t            }\n\t            for (var p = 1; p < len; p++) {\n\t                cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n\t                if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate.predicates.push(CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate.predicates.push(new ej2_data_1.Predicate(cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase));\n\t                    }\n\t                }\n\t                else {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate = predicate[(cols[p].predicate)](CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate = cols[p].ejpredicate ?\n\t                            predicate[cols[p].predicate](cols[p].ejpredicate) :\n\t                            predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase);\n\t                    }\n\t                }\n\t            }\n\t            return predicate || null;\n\t        };\n\t        CheckBoxFilter.getDatePredicate = function (predicate) {\n\t            return new ej2_data_1.Predicate(predicate.field, predicate.operator, predicate.value, predicate.ignoreCase || !predicate.matchcase);\n\t        };\n\t        CheckBoxFilter.updateDateFilter = function (filter) {\n\t            if (filter.type !== 'date' && !(filter.value instanceof Date)) {\n\t                return filter;\n\t            }\n\t            return ['equal', 'notequal'].indexOf(filter.operator) === -1 ? filter :\n\t                CheckBoxFilter.setDateObject(filter);\n\t        };\n\t        CheckBoxFilter.prototype.getModuleName = function () {\n\t            return 'checkboxFilter';\n\t        };\n\t        return CheckBoxFilter;\n\t    }());\n\t    exports.CheckBoxFilter = CheckBoxFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(10), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var parentEle = util_1.parentsUntil(target, 'e-headercell');\n\t                if (!(gObj.allowReordering || gObj.allowGrouping) || (!ej2_base_1.isNullOrUndefined(parentEle)\n\t                    && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var element = target.classList.contains('e-headercell') ? target : parentEle;\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                var col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n\t                if (!ej2_base_1.isNullOrUndefined(col.headerTemplate)) {\n\t                    if (col.headerTemplate.indexOf('#') !== -1) {\n\t                        visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n\t                    }\n\t                    else {\n\t                        visualElement.innerHTML = col.headerTemplate;\n\t                    }\n\t                }\n\t                else {\n\t                    visualElement.textContent = headercelldiv ?\n\t                        gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.firstElementChild.innerHTML;\n\t                }\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = this.rows = findHeaderRow.rows;\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header, gObj);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var column;\n\t            if (this.parent.frozenColumns) {\n\t                if (this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead')) {\n\t                    column = this.parent.columns.slice(this.parent.frozenColumns, this.parent.columns.length);\n\t                }\n\t                else {\n\t                    column = this.parent.columns.slice(0, this.parent.frozenColumns);\n\t                }\n\t            }\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns()\n\t                : (this.parent.frozenColumns ? column : this.parent.columns);\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            this.rows = findHeaderRow.rows;\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n\t                if (gCells.length) {\n\t                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                }\n\t            }\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.rowChkBox = ej2_base_2.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data), this.parent, 'template');\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date' && !ej2_base_1.isNullOrUndefined(value)) {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes) && column.type !== 'checkbox') {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            else if (column.type === 'checkbox') {\n\t                node.classList.add('e-gridchkbox');\n\t                node.setAttribute('aria-label', 'column header ' + cell.column.headerText);\n\t                if (this.parent.selectionSettings.persistSelection) {\n\t                    value = value === 'true';\n\t                }\n\t                else {\n\t                    value = false;\n\t                }\n\t                var checkWrap = ej2_buttons_1.createCheckBox(false, { checked: value, label: ' ' });\n\t                checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n\t                node.appendChild(checkWrap);\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (column.type === 'boolean') {\n\t                var obj = new ej2_buttons_1.CheckBox({ disabled: true, checked: value === 'true' });\n\t                obj.appendTo(node.firstElementChild);\n\t            }\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26), __webpack_require__(28), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            _this.chkAllBox = ej2_base_2.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            if (column.type !== 'checkbox') {\n\t                var value = column.headerText;\n\t                var headerText = this.hTxtEle.cloneNode();\n\t                headerText[column.getDomSetter()] = value;\n\t                innerDIV.appendChild(headerText);\n\t            }\n\t            else {\n\t                column.editType = 'booleanedit';\n\t                var checkAllWrap = ej2_buttons_1.createCheckBox(false, { checked: false, label: ' ' });\n\t                checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n\t                innerDIV.appendChild(checkAllWrap);\n\t                innerDIV.classList.add('e-headerchkcelldiv');\n\t            }\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'filterbar') &&\n\t                (column.allowFiltering && !ej2_base_1.isNullOrUndefined(column.field)) &&\n\t                !(this.parent.showColumnMenu && column.showColumnMenu)) {\n\t                ej2_base_2.attributes(fltrMenuEle, {\n\t                    'e-mappinguid': 'e-flmenu-' + column.uid,\n\t                });\n\t                node.classList.add('e-fltr-icon');\n\t                var matchFlColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n\t                    for (var index = 0; index < this.parent.columns.length; index++) {\n\t                        for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n\t                            if (this.parent.filterSettings.columns[count].field === column.field) {\n\t                                fltrMenuEle.classList.add('e-filtered');\n\t                                matchFlColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.appendChild(fltrMenuEle.cloneNode());\n\t            }\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            node = this.extendPrepareHeader(column, node);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    innerDIV.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    innerDIV.innerHTML = column.headerTemplate;\n\t                }\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n\t            if (this.parent.showColumnMenu && column.showColumnMenu) {\n\t                var element = (ej2_base_2.createElement('div', { className: 'e-icons e-columnmenu' }));\n\t                var matchFilteredColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n\t                    for (var i = 0; i < this.parent.columns.length; i++) {\n\t                        for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n\t                            if (this.parent.filterSettings.columns[j].field === column.field) {\n\t                                element.classList.add('e-filtered');\n\t                                matchFilteredColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.classList.add('e-fltr-icon');\n\t                node.appendChild(element);\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var gObj = this.parent;\n\t            var result;\n\t            var helper = {};\n\t            var value = cell.column.enableGroupByFormat ? data.key :\n\t                this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            if (!ej2_base_1.isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n\t                if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n\t                    result = util_1.templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n\t                }\n\t                else {\n\t                    result = util_1.templateCompiler(gObj.groupSettings.captionTemplate)(data);\n\t                }\n\t                util_1.appendChildren(node, result);\n\t            }\n\t            else {\n\t                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing && module === 'resize') {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol;\n\t            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns && mHdr && mHdr.querySelector('colgroup')) {\n\t                headerCol = mHdr.querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                headerCol = header.querySelector('colgroup').children[index];\n\t            }\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t            }\n\t            var contentCol;\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns) {\n\t                contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n\t                    .querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                contentCol = content.querySelector('colgroup').children[index];\n\t            }\n\t            if (contentCol) {\n\t                contentCol.style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = null;\n\t            if (this.parent.frozenColumns) {\n\t                var freezeWidth = 0;\n\t                var colGrp = this.parent.getContentTable().querySelector('colgroup');\n\t                var mColGrp = ej2_base_1.select('.e-movablecontent');\n\t                for (var i = 0; i < this.parent.getHeaderTable().querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(colGrp.children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t                freezeWidth = 0;\n\t                for (var i = 0; i < ej2_base_1.select('.e-movableheader').querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(mColGrp.children[0].querySelector('colgroup').children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                ej2_base_1.select('.e-movableheader').firstElementChild.style.width = tWidth;\n\t                ej2_base_1.select('.e-movablecontent').firstElementChild.style.width = tWidth;\n\t            }\n\t            else {\n\t                tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t            }\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1, event) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FocusStrategy = (function () {\n\t        function FocusStrategy(parent) {\n\t            this.currentInfo = {};\n\t            this.oneTime = true;\n\t            this.forget = true;\n\t            this.skipFocus = false;\n\t            this.prevIndexes = {};\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        FocusStrategy.prototype.focusCheck = function (e) {\n\t            var target = e.target;\n\t            this.skipFocus = ej2_base_1.closest(target, 'e-pager') !== null;\n\t        };\n\t        FocusStrategy.prototype.onFocus = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.setActive(true);\n\t            var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n\t            this.getContent().matrix.select(current[0], current[1]);\n\t            if (this.skipFocus) {\n\t                this.focus();\n\t                this.skipFocus = false;\n\t            }\n\t        };\n\t        FocusStrategy.prototype.onClick = function (e, force) {\n\t            var isContent = !ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridcontent'));\n\t            if (!isContent && ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridheader')) ||\n\t                e.target.classList.contains('e-filtermenudiv')) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: false, byClick: !ej2_base_1.isNullOrUndefined(e.target), clickArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            this.setActive(isContent);\n\t            var returnVal = this.getContent().onClick(e, force);\n\t            if (returnVal === false) {\n\t                return;\n\t            }\n\t            this.focus();\n\t        };\n\t        FocusStrategy.prototype.onKeyPress = function (e) {\n\t            if (this.skipOn(e)) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            var bValue = this.getContent().matrix.current;\n\t            this.currentInfo.outline = true;\n\t            this.swap = this.getContent().jump(e.action, bValue);\n\t            if (this.swap) {\n\t                var isHeader = this.header === this.getContent();\n\t                this.setActive(isHeader);\n\t                var rowInitVal = isHeader ? -1 : this.header.matrix.matrix.length;\n\t                var current = this.getContent().matrix.get(rowInitVal, bValue[1], [0, 0], e.action, this.getContent().validator());\n\t                this.getContent().matrix.current = [rowInitVal, current[1]];\n\t                this.prevIndexes = {};\n\t            }\n\t            e.preventDefault();\n\t            this.getContent().onKeyPress(e);\n\t            this.focus(e);\n\t        };\n\t        FocusStrategy.prototype.skipOn = function (e) {\n\t            var target = e.target;\n\t            if (!target) {\n\t                return false;\n\t            }\n\t            return (this.parent.editSettings.mode !== 'batch' && (this.parent.isEdit || ['insert', 'f2', 'delete'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(document.activeElement, '.e-filterbarcell') !== null && ['leftArrow', 'rightArrow'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(target, '.e-gridcontent') === null && ej2_base_1.closest(target, '.e-gridheader') === null)\n\t                || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && ej2_base_1.closest(target, '.e-gridchkbox') === null\n\t                    && ej2_base_1.closest(target, '.e-headerchkcelldiv') === null)));\n\t        };\n\t        FocusStrategy.prototype.getFocusedElement = function () {\n\t            return this.currentInfo.elementToFocus;\n\t        };\n\t        FocusStrategy.prototype.getContent = function () {\n\t            return this.active || this.content;\n\t        };\n\t        FocusStrategy.prototype.setActive = function (content) {\n\t            this.active = content ? this.content : this.header;\n\t        };\n\t        FocusStrategy.prototype.setFocusedElement = function (element) {\n\t            var _this = this;\n\t            this.currentInfo.elementToFocus = element;\n\t            setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n\t        };\n\t        FocusStrategy.prototype.focus = function (e) {\n\t            this.removeFocus();\n\t            this.addFocus(this.getContent().getFocusInfo(), e);\n\t        };\n\t        FocusStrategy.prototype.removeFocus = function () {\n\t            if (!this.currentInfo.element) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n\t            this.currentInfo.elementToFocus.tabIndex = -1;\n\t        };\n\t        FocusStrategy.prototype.addFocus = function (info, e) {\n\t            this.currentInfo = info;\n\t            this.currentInfo.outline = info.outline && !ej2_base_1.isNullOrUndefined(e);\n\t            if (!info.element) {\n\t                return;\n\t            }\n\t            var isFocused = info.elementToFocus.classList.contains('e-focus');\n\t            if (isFocused) {\n\t                return;\n\t            }\n\t            if (this.currentInfo.outline) {\n\t                ej2_base_1.addClass([info.element], ['e-focused']);\n\t            }\n\t            ej2_base_1.addClass([info.elementToFocus], ['e-focus']);\n\t            info.element.tabIndex = 0;\n\t            if (!isFocused) {\n\t                this.setFocusedElement(info.elementToFocus);\n\t            }\n\t            this.parent.notify(event.cellFocused, {\n\t                element: info.elementToFocus,\n\t                parent: info.element,\n\t                indexes: this.getContent().matrix.current,\n\t                byKey: !ej2_base_1.isNullOrUndefined(e),\n\t                byClick: ej2_base_1.isNullOrUndefined(e),\n\t                keyArgs: e,\n\t                isJump: this.swap,\n\t                container: this.getContent().getInfo(e),\n\t                outline: !ej2_base_1.isNullOrUndefined(e)\n\t            });\n\t            var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n\t            this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n\t        };\n\t        FocusStrategy.prototype.refreshMatrix = function (content) {\n\t            var _this = this;\n\t            return function (e) {\n\t                if (content && !_this.content) {\n\t                    _this.content = new ContentFocus(_this.parent);\n\t                }\n\t                if (!content && !_this.header) {\n\t                    _this.header = new HeaderFocus(_this.parent);\n\t                }\n\t                var cFocus = content ? _this.content : _this.header;\n\t                cFocus.matrix.generate(e.rows, cFocus.selector);\n\t                cFocus.generateRows(e.rows);\n\t                var actions = ['paging', 'grouping'];\n\t                if (e.args && actions.indexOf(e.args.requestType) > -1) {\n\t                    _this.skipFocus = true;\n\t                    _this.onFocus();\n\t                }\n\t            };\n\t        };\n\t        FocusStrategy.prototype.addEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed || this.parent.frozenColumns || this.parent.frozenRows) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n\t            this.parent.on(event.keyPressed, this.onKeyPress, this);\n\t            this.parent.on(event.click, this.onClick, this);\n\t            this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n\t            this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n\t            this.parent.on('close-edit', this.restoreFocus, this);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearOutline, _this); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n\t            this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n\t            this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n\t            this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n\t            this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n\t        };\n\t        FocusStrategy.prototype.removeEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n\t            this.parent.off(event.keyPressed, this.onKeyPress);\n\t            this.parent.off(event.click, this.onClick);\n\t            this.parent.off(event.contentReady, this.refreshMatrix(true));\n\t            this.parent.off(event.headerRefreshed, this.refreshMatrix());\n\t            this.parent.off('close-edit', this.restoreFocus);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n\t            this.parent.off(event.batchAdd, this.refreshMatrix(true));\n\t            this.parent.off(event.batchDelete, this.refreshMatrix(true));\n\t            this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n\t            this.parent.off(event.onEmpty, this.refreshMatrix(true));\n\t        };\n\t        FocusStrategy.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        FocusStrategy.prototype.restoreFocus = function () {\n\t            this.addFocus(this.getContent().getFocusInfo());\n\t        };\n\t        FocusStrategy.prototype.clearOutline = function () {\n\t            this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n\t            if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n\t        };\n\t        FocusStrategy.prototype.getPrevIndexes = function () {\n\t            var forget = this.forget;\n\t            this.forget = false;\n\t            return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n\t        };\n\t        FocusStrategy.prototype.forgetPrevious = function () {\n\t            this.forget = true;\n\t        };\n\t        return FocusStrategy;\n\t    }());\n\t    exports.FocusStrategy = FocusStrategy;\n\t    var Matrix = (function () {\n\t        function Matrix() {\n\t            this.matrix = [];\n\t            this.current = [];\n\t        }\n\t        Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n\t            this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n\t            this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n\t        };\n\t        Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n\t            var tmp = columnIndex;\n\t            if (rowIndex + navigator[0] < 0) {\n\t                return [rowIndex, columnIndex];\n\t            }\n\t            rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n\t            var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n\t            columnIndex = first === null ? tmp : first;\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + columnIndex, this.matrix);\n\t            return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n\t                this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n\t            if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n\t                && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n\t                return null;\n\t            }\n\t            return !this.inValid(vector[index]) ? index :\n\t                this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n\t        };\n\t        Matrix.prototype.select = function (rowIndex, columnIndex) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n\t            this.current = [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.generate = function (rows, selector) {\n\t            var _this = this;\n\t            this.rows = rows.length - 1;\n\t            this.matrix = [];\n\t            rows.forEach(function (row, rIndex) {\n\t                var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n\t                _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n\t                cells.forEach(function (cell, cIndex) {\n\t                    _this.set(rIndex, cIndex, selector(row, cell));\n\t                });\n\t            });\n\t            return this.matrix;\n\t        };\n\t        Matrix.prototype.inValid = function (value) {\n\t            return value === 0 || value === undefined;\n\t        };\n\t        return Matrix;\n\t    }());\n\t    exports.Matrix = Matrix;\n\t    var ContentFocus = (function () {\n\t        function ContentFocus(parent) {\n\t            var _this = this;\n\t            this.matrix = new Matrix();\n\t            this.parent = parent;\n\t            this.keyActions = {\n\t                'rightArrow': [0, 1],\n\t                'tab': [0, 1],\n\t                'leftArrow': [0, -1],\n\t                'shiftTab': [0, -1],\n\t                'upArrow': [-1, 0],\n\t                'downArrow': [1, 0],\n\t                'shiftUp': [-1, 0],\n\t                'shiftDown': [1, 0],\n\t                'shiftRight': [0, 1],\n\t                'shiftLeft': [0, -1],\n\t                'enter': [1, 0],\n\t                'shiftEnter': [-1, 0]\n\t            };\n\t            this.indexesByKey = function (action) {\n\t                var opt = {\n\t                    'home': [_this.matrix.current[0], -1, 0, 1],\n\t                    'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n\t                    'ctrlHome': [0, -1, 0, 1],\n\t                    'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n\t                };\n\t                return opt[action] || null;\n\t            };\n\t        }\n\t        ContentFocus.prototype.onKeyPress = function (e) {\n\t            var navigator = this.keyActions[e.action];\n\t            var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n\t            if (!current) {\n\t                return;\n\t            }\n\t            this.matrix.select(current[0], current[1]);\n\t        };\n\t        ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n\t            if (navigator === void 0) { navigator = [0, 0]; }\n\t            if (!isPresent && !this.indexesByKey(action)) {\n\t                return null;\n\t            }\n\t            if (!this.shouldFocusChange(e)) {\n\t                return this.matrix.current;\n\t            }\n\t            var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n\t            var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n\t            return current;\n\t        };\n\t        ContentFocus.prototype.onClick = function (e, force) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-rowcell') ? target : ej2_base_1.closest(target, 'td'));\n\t            if (!target) {\n\t                return;\n\t            }\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(rowIndex, cellIndex);\n\t        };\n\t        ContentFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            this.matrix.current = [rowIndex, cellIndex];\n\t            info.element = this.parent.getContentTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-detailcell');\n\t            return info;\n\t        };\n\t        ContentFocus.prototype.getFocusable = function (element) {\n\t            var child = [].slice\n\t                .call(element.querySelectorAll('button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])'));\n\t            return child.length ? child[0] : element;\n\t        };\n\t        ContentFocus.prototype.selector = function (row, cell) {\n\t            var types = [enum_1.CellType.Expand, enum_1.CellType.GroupCaption, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary];\n\t            return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n\t                || (row.isDataRow && cell.cellType === enum_1.CellType.DetailExpand)\n\t                || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n\t                || (cell.column && cell.column.type === 'checkbox'))\n\t                && !(row.edit === 'delete' && row.isDirty);\n\t        };\n\t        ContentFocus.prototype.jump = function (action, current) {\n\t            return action === 'upArrow' && current[0] === 0;\n\t        };\n\t        ContentFocus.prototype.generateRows = function (rows) {\n\t        };\n\t        ContentFocus.prototype.getInfo = function (e) {\n\t            var info = this.getFocusInfo();\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            var isData = info.element.classList.contains('e-rowcell');\n\t            var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n\t                || info.element.classList.contains('e-detailrowexpand')));\n\t            var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n\t                Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n\t            return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n\t        };\n\t        ContentFocus.prototype.validator = function () {\n\t            var table = this.parent.getContentTable();\n\t            return function (rowIndex, cellIndex, action) {\n\t                var cell = table.rows[rowIndex].cells[cellIndex];\n\t                if (action === 'enter' || action === 'shiftEnter') {\n\t                    return cell.classList.contains('e-rowcell');\n\t                }\n\t                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n\t                    return true;\n\t                }\n\t                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n\t                    return cell.getBoundingClientRect().width !== 0;\n\t                }\n\t                return false;\n\t            };\n\t        };\n\t        ContentFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getContentTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' || e.action === 'shiftEnter' ? cell.classList.contains('e-rowcell') : true;\n\t        };\n\t        return ContentFocus;\n\t    }());\n\t    exports.ContentFocus = ContentFocus;\n\t    var HeaderFocus = (function (_super) {\n\t        __extends(HeaderFocus, _super);\n\t        function HeaderFocus(parent) {\n\t            return _super.call(this, parent) || this;\n\t        }\n\t        HeaderFocus.prototype.onClick = function (e) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-headercell') ? target : ej2_base_1.closest(target, 'th'));\n\t            if (!target) {\n\t                return;\n\t            }\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n\t        };\n\t        HeaderFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            info.element = this.parent.getHeaderTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-filterbarcell');\n\t            return info;\n\t        };\n\t        HeaderFocus.prototype.selector = function (row, cell) {\n\t            return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox';\n\t        };\n\t        HeaderFocus.prototype.jump = function (action, current) {\n\t            return action === 'downArrow' && current[0] === this.matrix.matrix.length - 1;\n\t        };\n\t        HeaderFocus.prototype.generateRows = function (rows) {\n\t            var _this = this;\n\t            var length = this.matrix.matrix.length;\n\t            if (this.parent.allowFiltering && this.parent.filterSettings.type === 'filterbar') {\n\t                this.matrix.rows = ++this.matrix.rows;\n\t                rows[0].cells.forEach(function (cell, cIndex) {\n\t                    return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n\t                });\n\t            }\n\t        };\n\t        HeaderFocus.prototype.getInfo = function () {\n\t            return { isContent: false, isHeader: true };\n\t        };\n\t        HeaderFocus.prototype.validator = function () {\n\t            return function () { return true; };\n\t        };\n\t        HeaderFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getHeaderTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' ? !cell.classList.contains('e-headercell') : true;\n\t        };\n\t        return HeaderFocus;\n\t    }(ContentFocus));\n\t    exports.HeaderFocus = HeaderFocus;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_1.Property(12)\n\t        ], PageSettings.prototype, \"pageSize\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property(8)\n\t        ], PageSettings.prototype, \"pageCount\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property(1)\n\t        ], PageSettings.prototype, \"currentPage\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property()\n\t        ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property(false)\n\t        ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property(false)\n\t        ], PageSettings.prototype, \"pageSizes\", void 0);\n\t        __decorate([\n\t            ej2_base_1.Property(null)\n\t        ], PageSettings.prototype, \"template\", void 0);\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.preventFocus = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.persistSelection = false;\n\t            this.selectedRowState = {};\n\t            this.isBatchEdit = false;\n\t            this.prevKey = 0;\n\t            this.totalRecordsCount = 0;\n\t            this.isChkAll = false;\n\t            this.isUnChkAll = false;\n\t            this.chkAllCollec = [];\n\t            this.isCheckedOnAdd = false;\n\t            this.persistSelectedData = [];\n\t            this.selectionRequest = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit && !this.persistSelection;\n\t        };\n\t        Selection.prototype.selectRow = function (index, isToggle) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n\t            if (!isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToggle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t            if (this.selectionSettings.type === 'single' && this.persistSelection) {\n\t                this.selectedRowState = {};\n\t            }\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n\t            if (this.persistSelection && !ej2_base_2.isNullOrUndefined(selectedRow)) {\n\t                var rowObj = this.parent.getRowObjectFromUID(selectedRow.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (pKey === null) {\n\t                    return;\n\t                }\n\t                rowObj.isSelected = chkState;\n\t                if (chkState) {\n\t                    this.selectedRowState[pKey] = chkState;\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) < 0) {\n\t                        this.persistSelectedData.push(rowObj.data);\n\t                    }\n\t                }\n\t                else {\n\t                    delete (this.selectedRowState[pKey]);\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) >= 0) {\n\t                        this.persistSelectedData.splice(this.persistSelectedData.indexOf(rowObj.data), 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateCheckBoxes = function (row, chkState) {\n\t            if (!ej2_base_2.isNullOrUndefined(row)) {\n\t                var chkBox = row.querySelector('.e-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(chkBox)) {\n\t                    util_1.removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n\t                    if (ej2_base_2.isNullOrUndefined(this.checkedTarget) || (!ej2_base_2.isNullOrUndefined(this.checkedTarget)\n\t                        && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.updatePersistCollection(selectedRow, true);\n\t            this.updateCheckBoxes(selectedRow, true);\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t            if (!this.preventFocus) {\n\t                var target = this.focus.getPrevIndexes().cellIndex ?\n\t                    selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n\t                    selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n\t                if (!target) {\n\t                    return;\n\t                }\n\t                this.focus.onClick({ target: target }, true);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            if (!this.persistSelection || (this.persistSelection && !this.parent.isEdit) ||\n\t                (!ej2_base_2.isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t                if (span.classList.contains('e-rowselect')) {\n\t                    span.classList.remove('e-spanclicked');\n\t                }\n\t                this.clearRowSelection();\n\t                this.clearCellSelection();\n\t                this.enableSelectMultiTouch = false;\n\t            }\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                    this.updatePersistCollection(row_1, false);\n\t                    this.updateCheckBoxes(row_1);\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.updatePersistCollection(row[0], false);\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t            this.updateCheckBoxes(row[0]);\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex, isToggle) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            isToggle = !isToggle ? isToggle : !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isToggle) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, this.getColIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex));\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getColIndex = function (rowIndex, index) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Selection.prototype.getLastColIndex = function (rowIndex) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(cells[0], 'tr'));\n\t            }\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            if (selectedCell.classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(selectedCell, 'tr'), true);\n\t            }\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            if (!this.preventFocus) {\n\t                this.focus.onClick({ target: cell }, true);\n\t            }\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.addEventListener(events.dataBound, this.onDataBound.bind(this));\n\t            this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t            this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.cellFocused, this.onCellFocused);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t            this.parent.removeEventListener(events.dataBound, this.onDataBound);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBegin);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t            this.parent.off(events.rowsRemoved, this.rowsRemoved);\n\t        };\n\t        Selection.prototype.rowsRemoved = function (e) {\n\t            for (var i = 0; i < e.records.length; i++) {\n\t                delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n\t                --this.totalRecordsCount;\n\t            }\n\t            this.setCheckAllState();\n\t        };\n\t        ;\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.checkBoxSelectionChanged = function () {\n\t            var isCheckColumn = false;\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.type === 'checkbox') {\n\t                    this.isChkSelection = true;\n\t                    this.parent.selectionSettings.type = 'multiple';\n\t                    this.chkField = col.field;\n\t                    this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n\t                    if (ej2_base_2.isNullOrUndefined(this.totalRecordsCount)) {\n\t                        this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                    }\n\t                    this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t                    this.chkAllObj = this.chkAllBox;\n\t                    isCheckColumn = true;\n\t                    this.parent.element.classList.add('e-checkboxselection');\n\t                    break;\n\t                }\n\t            }\n\t            if (!isCheckColumn) {\n\t                this.isChkSelection = false;\n\t                this.chkField = '';\n\t                this.chkAllBox = this.chkAllObj = null;\n\t                this.parent.element.classList.remove('e-checkboxselection');\n\t            }\n\t            if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n\t                this.persistSelection = true;\n\t                this.parent.element.classList.add('e-persistselection');\n\t                this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n\t                if (!this.parent.enableVirtualization && this.chkField && Object.keys(this.selectedRowState).length === 0) {\n\t                    var data = this.parent.getDataModule();\n\t                    var query = new ej2_data_1.Query().where(this.chkField, 'equal', true);\n\t                    var dataManager = data.getData({}, query);\n\t                    var proxy_1 = this;\n\t                    this.parent.showSpinner();\n\t                    dataManager.then(function (e) {\n\t                        proxy_1.dataSuccess(e.result);\n\t                        proxy_1.refreshPersistSelection();\n\t                        proxy_1.parent.hideSpinner();\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                this.persistSelection = false;\n\t                this.parent.element.classList.remove('e-persistselection');\n\t                this.selectedRowState = {};\n\t            }\n\t        };\n\t        Selection.prototype.dataSuccess = function (res) {\n\t            for (var i = 0; i < res.length; i++) {\n\t                if (ej2_base_2.isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n\t                    this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n\t                }\n\t            }\n\t            this.persistSelectedData = res;\n\t        };\n\t        Selection.prototype.refreshPersistSelection = function () {\n\t            this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t            this.chkAllObj = this.chkAllBox;\n\t            var rows = this.parent.getRows();\n\t            if (rows.length > 0 && (this.persistSelection || this.chkField)) {\n\t                var indexes = [];\n\t                for (var j = 0; j < rows.length; j++) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(rows[j].getAttribute('data-uid'));\n\t                    var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                    if (pKey === null) {\n\t                        return;\n\t                    }\n\t                    var checkState = void 0;\n\t                    var chkBox = rows[j].querySelector('.e-checkselect');\n\t                    if (this.selectedRowState[pKey] || (this.isChkAll && this.chkAllCollec.indexOf(pKey) < 0)\n\t                        || (this.isUnChkAll && this.chkAllCollec.indexOf(pKey) > 0)\n\t                        || (!this.isChkAll && !this.isUnChkAll && this.chkField && rowObj.data[this.chkField]\n\t                            && chkBox.checked)) {\n\t                        indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n\t                        checkState = true;\n\t                    }\n\t                    else {\n\t                        checkState = false;\n\t                        if (this.checkedTarget !== chkBox && this.isChkSelection) {\n\t                            util_1.removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n\t                        }\n\t                    }\n\t                    this.updatePersistCollection(rows[j], checkState);\n\t                }\n\t                if (this.selectionSettings.type === 'multiple') {\n\t                    this.selectRows(indexes);\n\t                }\n\t                else {\n\t                    this.clearSelection();\n\t                    if (indexes.length > 0) {\n\t                        this.selectRow(indexes[0], true);\n\t                    }\n\t                }\n\t            }\n\t            if (this.isChkSelection) {\n\t                this.setCheckAllState();\n\t            }\n\t        };\n\t        Selection.prototype.actionBegin = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(editChkBox)) {\n\t                    var row = ej2_base_3.closest(editChkBox, '.e-editedrow');\n\t                    if (row) {\n\t                        if (this.parent.editSettings.mode === 'dialog') {\n\t                            row = this.parent.element.querySelector('.e-dlgeditrow');\n\t                        }\n\t                        var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                        if (!rowObj) {\n\t                            return;\n\t                        }\n\t                        this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n\t                    }\n\t                    else {\n\t                        this.isCheckedOnAdd = editChkBox.checked;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.actionComplete = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                if (e.action === 'add' && this.isCheckedOnAdd) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n\t                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.onDataBound = function () {\n\t            if (this.persistSelection || this.chkField) {\n\t                if (this.parent.enableVirtualization) {\n\t                    var records = this.parent.getCurrentViewRecords();\n\t                    this.dataSuccess(records);\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAllAction = function (checkState) {\n\t            var editForm = this.parent.element.querySelector('.e-gridform');\n\t            this.checkedTarget = this.chkAllBox;\n\t            if (checkState) {\n\t                this.selectRowsByRange(0, this.parent.getCurrentViewRecords().length);\n\t                this.isChkAll = true;\n\t                this.isUnChkAll = false;\n\t            }\n\t            else {\n\t                this.clearSelection();\n\t                this.isUnChkAll = true;\n\t                this.isChkAll = false;\n\t            }\n\t            this.chkAllCollec = [];\n\t            if (this.persistSelection) {\n\t                var rows = this.parent.getRows();\n\t                for (var i = 0; i < rows.length; i++) {\n\t                    this.updatePersistCollection(rows[i], checkState);\n\t                }\n\t                if (this.isUnChkAll) {\n\t                    this.selectedRowState = {};\n\t                    this.persistSelectedData = [];\n\t                }\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(editForm)) {\n\t                var editChkBox = editForm.querySelector('.e-edit-checkselect');\n\t                util_1.removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAll = function (checkBox) {\n\t            var checkObj = checkBox;\n\t            var state = checkBox.nextElementSibling.classList.contains('e-check');\n\t            this.checkSelectAllAction(!state);\n\t            this.target = null;\n\t            this.setCheckAllState();\n\t            this.triggerChkChangeEvent(checkBox, !state);\n\t        };\n\t        Selection.prototype.checkSelect = function (checkBox) {\n\t            var target = ej2_base_3.closest(this.checkedTarget, '.e-rowcell');\n\t            var checkObj = checkBox;\n\t            this.isMultiCtrlRequest = true;\n\t            var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t            if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                ++rIndex;\n\t            }\n\t            this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t            this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t            this.setCheckAllState();\n\t            this.isMultiCtrlRequest = false;\n\t            this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n\t        };\n\t        Selection.prototype.moveIntoUncheckCollection = function (row) {\n\t            if (this.isChkAll || this.isUnChkAll) {\n\t                var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (!pKey) {\n\t                    return;\n\t                }\n\t                if (this.chkAllCollec.indexOf(pKey) < 0) {\n\t                    this.chkAllCollec.push(pKey);\n\t                }\n\t                else {\n\t                    this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n\t            this.parent.trigger(events.checkBoxChange, {\n\t                checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n\t                target: checkBox\n\t            });\n\t            if (!this.parent.isEdit) {\n\t                this.checkedTarget = null;\n\t            }\n\t        };\n\t        Selection.prototype.setCheckAllState = function () {\n\t            if (this.isChkSelection) {\n\t                var checkedLen = Object.keys(this.selectedRowState).length;\n\t                if (!this.persistSelection) {\n\t                    checkedLen = this.selectedRecords.length;\n\t                    this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                }\n\t                var spanEle = this.chkAllBox.nextElementSibling;\n\t                ej2_base_2.removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n\t                if (checkedLen === this.totalRecordsCount || (this.persistSelection && this.parent.allowPaging\n\t                    && this.isChkAll && this.chkAllCollec.length === 0)) {\n\t                    ej2_base_2.addClass([spanEle], ['e-check']);\n\t                }\n\t                else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n\t                    ej2_base_2.addClass([spanEle], ['e-uncheck']);\n\t                }\n\t                else {\n\t                    ej2_base_2.addClass([spanEle], ['e-stop']);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            var chkSelect = false;\n\t            this.preventFocus = true;\n\t            var checkBox;\n\t            this.selectionRequest = true;\n\t            var checkWrap = util_1.parentsUntil(target, 'e-checkbox-wrapper');\n\t            if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n\t                target = checkWrap.querySelector('input[type=\"checkbox\"]');\n\t                checkBox = target;\n\t                chkSelect = true;\n\t            }\n\t            if (target && (target.classList.contains('e-rowcell') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n\t                if (this.isChkSelection) {\n\t                    this.isMultiCtrlRequest = true;\n\t                }\n\t                this.target = target;\n\t                if (!ej2_base_2.isNullOrUndefined(checkBox)) {\n\t                    this.checkedTarget = checkBox;\n\t                    if (checkBox.classList.contains('e-checkselectall')) {\n\t                        this.checkSelectAll(checkBox);\n\t                    }\n\t                    else {\n\t                        this.checkSelect(checkBox);\n\t                        this.target = ej2_base_3.closest(target, '.e-rowcell');\n\t                    }\n\t                }\n\t                else {\n\t                    var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t                    if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                        ++rIndex;\n\t                    }\n\t                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t                    if (this.isChkSelection) {\n\t                        this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t                if (!this.isChkSelection && ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.selectionRequest = false;\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex, true);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.onCellFocused = function (e) {\n\t            var clear = ((e.container.isHeader && e.isJump) || (e.container.isContent && !e.container.isSelectable)) &&\n\t                !(e.byKey && e.keyArgs.action === 'space');\n\t            var headerAction = e.container.isHeader && !(e.byKey && e.keyArgs.action === 'space');\n\t            if (!e.byKey || clear) {\n\t                if (clear) {\n\t                    this.clearSelection();\n\t                }\n\t                return;\n\t            }\n\t            var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var prev = this.focus.getPrevIndexes();\n\t            if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n\t                rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n\t                return;\n\t            }\n\t            this.preventFocus = true;\n\t            switch (e.keyArgs.action) {\n\t                case 'downArrow':\n\t                case 'upArrow':\n\t                case 'enter':\n\t                case 'shiftEnter':\n\t                    this.applyDownUpKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'rightArrow':\n\t                case 'leftArrow':\n\t                    this.applyRightLeftKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftDown':\n\t                case 'shiftUp':\n\t                    this.shiftDownKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftLeft':\n\t                case 'shiftRight':\n\t                    this.applyShiftLeftRightKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    this.applyHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'ctrlHome':\n\t                case 'ctrlEnd':\n\t                    this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'escape':\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    this.ctrlPlusA();\n\t                    break;\n\t                case 'space':\n\t                    this.selectionRequest = true;\n\t                    var target = e.element;\n\t                    if (target.classList.contains('e-checkselectall')) {\n\t                        this.checkedTarget = target;\n\t                        this.checkSelectAll(this.checkedTarget);\n\t                    }\n\t                    else {\n\t                        if (target.classList.contains('e-checkselect')) {\n\t                            this.checkedTarget = target;\n\t                            this.checkSelect(this.checkedTarget);\n\t                        }\n\t                    }\n\t                    this.selectionRequest = false;\n\t                    break;\n\t            }\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isChkSelection && this.isChkAll) {\n\t                this.checkSelectAllAction(false);\n\t                this.checkedTarget = null;\n\t            }\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            if (rowIndex < 0) {\n\t                return;\n\t            }\n\t            if (!this.target) {\n\t                this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n\t            }\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                this.addAttribute(this.target);\n\t            }\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    this.selectRowsByRange(this.prevRowIndex, rowIndex);\n\t                    this.applyUpDown(rowIndex);\n\t                }\n\t                else {\n\t                    this.selectRow(0, true);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        Selection.prototype.getSelectedRecords = function () {\n\t            var selectedData = [];\n\t            if (!this.selectionSettings.persistSelection) {\n\t                selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n\t                    .map(function (m) { return m.data; });\n\t            }\n\t            else {\n\t                selectedData = this.persistSelectedData;\n\t            }\n\t            return selectedData;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(39)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n\t                this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var mHdrHeight = 0;\n\t            var content = this.parent.getContent().firstChild;\n\t            if (this.parent.frozenRows) {\n\t                mHdrHeight =\n\t                    this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height - mHdrHeight);\n\t            }\n\t            else {\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            }\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var top = target.scrollTop;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t            };\n\t        };\n\t        Scroll.prototype.onWheelScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var top = element.scrollTop + e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                e.preventDefault();\n\t                _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t            };\n\t        };\n\t        Scroll.prototype.onTouchScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (e.pointerType === 'mouse') {\n\t                    return;\n\t                }\n\t                var cont;\n\t                var mHdr;\n\t                var pageXY = _this.getPointXY(e);\n\t                var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n\t                var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n\t                if (_this.parent.getHeaderContent().contains(e.target)) {\n\t                    mHdr = _this.parent.frozenColumns ?\n\t                        _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n\t                    if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n\t                        return;\n\t                    }\n\t                    e.preventDefault();\n\t                    mHdr.scrollLeft = left;\n\t                    element.scrollLeft = left;\n\t                    _this.pageXY.x = pageXY.x;\n\t                    _this.previousValues.left = left;\n\t                }\n\t                else {\n\t                    cont = _this.parent.getContent().querySelector('.e-frozencontent');\n\t                    if (_this.previousValues.top === top || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n\t                        return;\n\t                    }\n\t                    e.preventDefault();\n\t                    cont.scrollTop = top;\n\t                    element.scrollTop = top;\n\t                    _this.pageXY.y = pageXY.y;\n\t                    _this.previousValues.top = top;\n\t                }\n\t            };\n\t        };\n\t        Scroll.prototype.setPageXY = function () {\n\t            var _this = this;\n\t            return function (e) {\n\t                if (e.pointerType === 'mouse') {\n\t                    return;\n\t                }\n\t                _this.pageXY = _this.getPointXY(e);\n\t            };\n\t        };\n\t        Scroll.prototype.getPointXY = function (e) {\n\t            var pageXY = { x: 0, y: 0 };\n\t            if (e.touches && e.touches.length) {\n\t                pageXY.x = e.touches[0].pageX;\n\t                pageXY.y = e.touches[0].pageY;\n\t            }\n\t            else {\n\t                pageXY.x = e.pageX;\n\t                pageXY.y = e.pageY;\n\t            }\n\t            return pageXY;\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                var mCont = this.content.querySelector('.e-movablecontent');\n\t                var fCont = this.content.querySelector('.e-frozencontent');\n\t                var mHdr = this.header.querySelector('.e-movableheader');\n\t                if (this.parent.frozenRows) {\n\t                    ej2_base_1.EventHandler.add(this.parent.frozenColumns ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n\t                    ej2_base_1.EventHandler.add(this.parent.frozenColumns ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(this.parent.frozenColumns ? mCont : this.content), this);\n\t                }\n\t                if (this.parent.frozenColumns) {\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n\t                }\n\t                else {\n\t                    ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                    ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t                if (this.parent.frozenColumns) {\n\t                    ej2_base_2.addClass(this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t                }\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            if (this.parent.frozenColumns) {\n\t                content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t            else {\n\t                content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = { fn: ej2_base_1.compile(this.footerTemplate, helper),\n\t                    property: 'footerTemplate' };\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = { fn: ej2_base_1.compile(this.groupFooterTemplate, helper),\n\t                    property: 'groupFooterTemplate' };\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = { fn: ej2_base_1.compile(this.groupCaptionTemplate, helper),\n\t                    property: 'groupCaptionTemplate' };\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"type\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"field\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"columnName\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"format\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t        __decorate([\n\t            ej2_base_3.Property()\n\t        ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        __decorate([\n\t            ej2_base_3.Collection([], AggregateColumn)\n\t        ], AggregateRow.prototype, \"columns\", void 0);\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(5), __webpack_require__(10), __webpack_require__(6), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, events, ej2_popups_1, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.isCustomizeOpenCC = false;\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(true, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(true, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.cBoxTrue.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.element) {\n\t                this.dlgObj.destroy();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!this.isCustomizeOpenCC) {\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                    if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                        if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                            this.isDlgOpen = true;\n\t                            return;\n\t                        }\n\t                    }\n\t                    else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                        targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                        this.columnChooserSearch('');\n\t                        this.removeCancelIcon();\n\t                    }\n\t                }\n\t                else {\n\t                    if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n\t                        this.dlgObj.hide();\n\t                        this.isDlgOpen = false;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(ej2_base_2.closest(target, '.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + ej2_base_2.closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + ej2_base_2.closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t            }\n\t            else {\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            this.isCustomizeOpenCC = true;\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n\t        };\n\t        ColumnChooser.prototype.customDialogOpen = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.customDialogClose = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t            util_1.changeButtonType(this.dlgObj.element);\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', this.searchFocus.bind(this, ccsearchele));\n\t            ccsearchele.addEventListener('blur', this.searchBlur.bind(this, ccsearchele));\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.searchFocus = function (targt) {\n\t            targt.parentElement.classList.add('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.searchBlur = function (targt) {\n\t            targt.parentElement.classList.remove('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index];\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n\t            if (isChecked) {\n\t                if (this.hideColumn.indexOf(coluid) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.showColumn.indexOf(coluid) === -1) {\n\t                    this.showColumn.push(coluid);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(coluid) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(coluid) === -1) {\n\t                    this.hideColumn.push(coluid);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            if (this.dlgObj.element) {\n\t                ej2_base_2.EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n\t            }\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n\t            var checkstate;\n\t            var elem = util_1.parentsUntil(e.target, 'e-checkbox-wrapper');\n\t            if (elem) {\n\t                util_1.toogleCheckbox(elem.parentElement);\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t                if (elem.querySelector('.e-check')) {\n\t                    checkstate = true;\n\t                }\n\t                else if (elem.querySelector('.e-uncheck')) {\n\t                    checkstate = false;\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                var columnUid = util_1.parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n\t                this.checkstatecolumn(checkstate, columnUid);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var columnUID = util_1.parentsUntil(element, 'e-ccheck').getAttribute('uid');\n\t                var column = this.parent.getColumnByUid(columnUID);\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n\t            var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n\t            cbox.querySelector('.e-label').innerHTML = label;\n\t            return util_1.createCboxWithWrap(uid, cbox, 'e-ccheck');\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n\t                var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n\t                cclist.appendChild(cccheckboxlist);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t                this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Clipboard = (function () {\n\t        function Clipboard(parent) {\n\t            this.copyContent = '';\n\t            this.isSelect = false;\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Clipboard.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyDownHandler, this);\n\t        };\n\t        Clipboard.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.keyPressed, this.keyDownHandler);\n\t        };\n\t        Clipboard.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.clipBoardTextArea = ej2_base_1.createElement('textarea', {\n\t                className: 'e-clipboard',\n\t                styles: 'opacity: 0',\n\t                attrs: { readonly: 'true' }\n\t            });\n\t            this.parent.element.appendChild(this.clipBoardTextArea);\n\t        };\n\t        Clipboard.prototype.keyDownHandler = function (e) {\n\t            if (e.action === 'ctrlPlusC') {\n\t                this.copy();\n\t            }\n\t            else if (e.action === 'ctrlShiftPlusH') {\n\t                this.copy(true);\n\t            }\n\t        };\n\t        Clipboard.prototype.setCopyData = function (withHeader) {\n\t            if (window.getSelection().toString() === '') {\n\t                this.clipBoardTextArea.value = this.copyContent = '';\n\t                if (this.parent.selectionSettings.mode !== 'cell') {\n\t                    var rows = this.parent.getRows();\n\t                    var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n\t                    if (withHeader) {\n\t                        this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-headercell')), false, '\\t', withHeader);\n\t                        this.copyContent += '\\n';\n\t                    }\n\t                    for (var i = 0; i < selectedIndexes.length; i++) {\n\t                        if (i > 0) {\n\t                            this.copyContent += '\\n';\n\t                        }\n\t                        this.getCopyData([].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell')), false, '\\t', withHeader);\n\t                    }\n\t                }\n\t                else {\n\t                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n\t                }\n\t                var args = {\n\t                    data: this.copyContent,\n\t                    cancel: false,\n\t                };\n\t                this.parent.trigger(events.beforeCopy, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.clipBoardTextArea.value = this.copyContent = args.data;\n\t                if (!ej2_base_1.Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n\t                    this.clipBoardTextArea.select();\n\t                }\n\t                else {\n\t                    this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n\t                }\n\t                this.isSelect = true;\n\t            }\n\t        };\n\t        Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n\t            for (var j = 0; j < cells.length; j++) {\n\t                if (withHeader && isCell) {\n\t                    this.copyContent += this.parent.getVisibleColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n\t                }\n\t                this.copyContent += cells[j].textContent;\n\t                if (j < cells.length - 1) {\n\t                    this.copyContent += splitKey;\n\t                }\n\t            }\n\t        };\n\t        Clipboard.prototype.copy = function (withHeader) {\n\t            if (document.queryCommandSupported('copy')) {\n\t                this.setCopyData(withHeader);\n\t                document.execCommand('copy');\n\t                this.clipBoardTextArea.blur();\n\t            }\n\t            if (this.isSelect) {\n\t                window.getSelection().removeAllRanges();\n\t                this.isSelect = false;\n\t            }\n\t        };\n\t        Clipboard.prototype.getModuleName = function () {\n\t            return 'clipboard';\n\t        };\n\t        Clipboard.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.clipBoardTextArea);\n\t        };\n\t        return Clipboard;\n\t    }());\n\t    exports.Clipboard = Clipboard;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(21), __webpack_require__(55), __webpack_require__(56), __webpack_require__(42), __webpack_require__(63), __webpack_require__(43), __webpack_require__(45), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(77), __webpack_require__(46), __webpack_require__(78), __webpack_require__(79), __webpack_require__(80), __webpack_require__(51), __webpack_require__(83), __webpack_require__(94), __webpack_require__(92), __webpack_require__(93), __webpack_require__(95), __webpack_require__(48), __webpack_require__(97), __webpack_require__(100), __webpack_require__(99), __webpack_require__(49), __webpack_require__(102), __webpack_require__(22), __webpack_require__(104), __webpack_require__(105), __webpack_require__(108), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1, clipboard_1, command_column_1, checkbox_filter_1, context_menu_1, freeze_1, column_menu_1, excel_filter_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t    __export(clipboard_1);\n\t    __export(command_column_1);\n\t    __export(checkbox_filter_1);\n\t    __export(context_menu_1);\n\t    __export(freeze_1);\n\t    __export(column_menu_1);\n\t    __export(excel_filter_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(52), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(12), __webpack_require__(25), __webpack_require__(53), __webpack_require__(54)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(16), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst && currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns, locator) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            var gObj = this.parent;\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n\t                return;\n\t            }\n\t            if (!gObj.allowMultiSorting) {\n\t                isMultiSort = gObj.allowMultiSorting;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = gObj.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressed, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressed);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler') &&\n\t                !e.target.classList.contains('e-columnmenu') &&\n\t                !e.target.classList.contains('e-filtermenudiv')) {\n\t                var gObj = this.parent;\n\t                var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (colObj.type !== 'checkbox') {\n\t                    this.initiateSort(target, e, colObj);\n\t                    if (ej2_base_1.Browser.isDevice) {\n\t                        this.showPopUp(e);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.keyPressed = function (e) {\n\t            if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')) {\n\t                var target = this.focus.getFocusedElement();\n\t                if (!target || !target.classList.contains('e-headercell') || (this.parent.frozenColumns || this.parent.frozenRows)) {\n\t                    return;\n\t                }\n\t                var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                this.initiateSort(target, e, col);\n\t            }\n\t        };\n\t        Sort.prototype.initiateSort = function (target, e, column) {\n\t            var gObj = this.parent;\n\t            var field = column.field;\n\t            var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                'descending';\n\t            if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n\t                && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n\t                this.removeSortColumn(field);\n\t            }\n\t            else {\n\t                this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(57), __webpack_require__(60), __webpack_require__(62), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            this.pagerDestroy();\n\t            if (!ej2_base_2.isNullOrUndefined(this.parent.pagerTemplate)) {\n\t                this.pageSettings.template = this.parent.pagerTemplate;\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            if (!(this.pageSettings.template)) {\n\t                var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t                var links = numericContainer.querySelectorAll('a');\n\t                for (var i = 0; i < links.length; i++) {\n\t                    if (this.parent.getContentTable()) {\n\t                        links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                    }\n\t                }\n\t                var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    if (_this.parent.getContentTable()) {\n\t                        element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.isForceCancel = true;\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.pagerObj.dataBind();\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerDestroy();\n\t        };\n\t        Page.prototype.pagerDestroy = function () {\n\t            if (this.pagerObj && !this.pagerObj.isDestroyed) {\n\t                this.pagerObj.destroy();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(58), __webpack_require__(59), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            if (this.template) {\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.initLocalization();\n\t                this.updateRTL();\n\t                this.totalRecordsCount = this.totalRecordsCount || 0;\n\t                this.renderFirstPrevDivForDevice();\n\t                this.containerModule.render();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.render();\n\t                }\n\t                this.renderNextLastDivForDevice();\n\t                if (this.checkpagesizes()) {\n\t                    this.pagerdropdownModule.render();\n\t                }\n\t                this.addAriaLabel();\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.render();\n\t                }\n\t                this.refresh();\n\t                this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t            }\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['currentPage', 'pageSize'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'template':\n\t                        this.templateFn = this.compile(this.template);\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.pagerTemplate = function () {\n\t            var result;\n\t            this.element.classList.add('e-pagertemplate');\n\t            this.compile(this.template);\n\t            var data = {\n\t                currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n\t                totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n\t            };\n\t            result = this.getPagerTemplate()(data);\n\t            util_1.appendChildren(this.element, result);\n\t        };\n\t        Pager.prototype.updateTotalPages = function () {\n\t            this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n\t                (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n\t        };\n\t        Pager.prototype.getPagerTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Pager.prototype.compile = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        this.templateFn = ej2_base_2.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    this.templateFn = ej2_base_2.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            if (this.template) {\n\t                this.element.innerHTML = '';\n\t                this.updateTotalPages();\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.updateRTL();\n\t                this.containerModule.refresh();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.refresh();\n\t                }\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.refresh();\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Pager.prototype, \"enableQueryString\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(true)\n\t        ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(12)\n\t        ], Pager.prototype, \"pageSize\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(10)\n\t        ], Pager.prototype, \"pageCount\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(1)\n\t        ], Pager.prototype, \"currentPage\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Pager.prototype, \"externalMessage\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property(false)\n\t        ], Pager.prototype, \"pageSizes\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property()\n\t        ], Pager.prototype, \"template\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Property('')\n\t        ], Pager.prototype, \"customText\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Pager.prototype, \"click\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Pager.prototype, \"dropDownChanged\", void 0);\n\t        __decorate([\n\t            ej2_base_4.Event()\n\t        ], Pager.prototype, \"created\", void 0);\n\t        Pager = __decorate([\n\t            ej2_base_4.NotifyPropertyChanges\n\t        ], Pager);\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            this.pagerModule.updateTotalPages();\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(61)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_61__;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(10), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(64), __webpack_require__(7), __webpack_require__(65), __webpack_require__(22), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1, util_2, filter_menu_renderer_1, checkbox_filter_1, excel_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.nextFlMenuOpen = '';\n\t            this.type = { 'menu': filter_menu_renderer_1.FilterMenuRenderer, 'checkbox': checkbox_filter_1.CheckBoxFilter, 'excel': excel_filter_1.ExcelFilter };\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.fltrDlgDetails = { field: '', isOpen: false };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.getLocalizedCustomOperators();\n\t            if (this.parent.filterSettings.type === 'filterbar') {\n\t                if (gObj.columns.length) {\n\t                    var fltrElem = gObj.element.querySelector('.e-filterbar');\n\t                    if (fltrElem) {\n\t                        ej2_base_2.remove(fltrElem);\n\t                    }\n\t                    var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter, gObj);\n\t                    var row = void 0;\n\t                    var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                    cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                    this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                    rowRenderer.element = ej2_base_2.createElement('tr', { className: 'e-filterbar' });\n\t                    row = this.generateRow();\n\t                    row.data = this.values;\n\t                    this.element = rowRenderer.render(row, gObj.getColumns());\n\t                    this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                    var detail = this.element.querySelector('.e-detailheadercell');\n\t                    if (detail) {\n\t                        detail.className = 'e-filterbarcell e-mastercell';\n\t                    }\n\t                    var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n\t                    if (gCells.length) {\n\t                        gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                    }\n\t                    this.wireEvents();\n\t                    this.parent.notify(events.freezeRender, { case: 'filter' });\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            if (this.filterModule) {\n\t                this.filterModule.destroy();\n\t            }\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t                if (this.parent.frozenColumns) {\n\t                    ej2_base_2.remove(this.parent.getHeaderContent().querySelector('.e-filterbar'));\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n\t            ej2_base_1.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n\t            this.parent.on(events.click, this.filterIconClickHandler, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.clickHandler);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t            this.parent.off(events.filterOpen, this.columnMenuFilter);\n\t            this.parent.off(events.filterMenuClose, this.filterMenuClose);\n\t            this.parent.off(events.click, this.filterIconClickHandler);\n\t        };\n\t        Filter.prototype.filterMenuClose = function (args) {\n\t            this.fltrDlgDetails.isOpen = false;\n\t        };\n\t        Filter.prototype.columnMenuFilter = function (args) {\n\t            this.column = args.col;\n\t            var ele = ej2_base_1.closest(args.target, '#' + args.id);\n\t            if (args.isClose && !ele) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            else if (ele) {\n\t                this.filterDialogOpen(this.column, args.target);\n\t            }\n\t        };\n\t        Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n\t            var gObj = this.parent;\n\t            if (this.filterModule) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n\t            this.filterModule.openDialog({\n\t                type: col.type, field: col.field, displayName: col.headerText,\n\t                dataSource: col.filter.dataSource || gObj.dataSource, format: col.format,\n\t                filteredColumns: gObj.filterSettings.columns, target: target,\n\t                sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n\t                parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n\t                hideSearchbox: ej2_base_1.isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n\t                handler: this.filterHandler.bind(this), localizedStrings: {},\n\t                position: { X: left, Y: top }\n\t            });\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                filterCell = gObj.getHeaderContent().querySelector('#' + this.column.field + '_filterBarcell');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = !ej2_base_1.isNullOrUndefined(filterValue) && filterValue.toString();\n\t            if (this.column.type === 'number' || this.column.type === 'date') {\n\t                this.matchCase = true;\n\t            }\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (this.filterSettings.type === 'filterbar' && filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                    case 'type':\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var fCell;\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (this.filterSettings.type === 'filterbar' && !isClearFilterBar) {\n\t                        fCell = this.parent.getHeaderContent().querySelector('#' + cols[i].field + '_filterBarcell');\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    var fltrElement = this.parent.getColumnHeaderByField(field);\n\t                    fltrElement.removeAttribute('aria-filtered');\n\t                    if (this.filterSettings.type !== 'filterbar') {\n\t                        fltrElement.querySelector('.e-icon-filter').classList.remove('e-filtered');\n\t                    }\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (target && ej2_base_2.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                var gObj = this.parent;\n\t                var columns = this.filterSettings.columns;\n\t                var formater = this.serviceLocator.getService('valueFormatter');\n\t                var column = void 0;\n\t                var value = void 0;\n\t                if (!this.filterSettings.showFilterBarStatus) {\n\t                    return;\n\t                }\n\t                if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                    this.filterStatusMsg = '';\n\t                    for (var index = 0; index < columns.length; index++) {\n\t                        column = gObj.getColumnByField(columns[index].field);\n\t                        if (index) {\n\t                            this.filterStatusMsg += ' && ';\n\t                        }\n\t                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                    }\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    gObj.updateExternalMessage(this.filterStatusMsg);\n\t                }\n\t                this.filterStatusMsg = '';\n\t            }\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.parent.getHeaderContent()\n\t                .querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_1.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_1.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        Filter.prototype.getLocalizedCustomOperators = function () {\n\t            var numOptr = [\n\t                { value: 'equal', text: this.l10n.getConstant('Equal') },\n\t                { value: 'greaterThan', text: this.l10n.getConstant('GreaterThan') },\n\t                { value: 'greaterThanOrEqual', text: this.l10n.getConstant('GreaterThanOrEqual') },\n\t                { value: 'lessThan', text: this.l10n.getConstant('LessThan') },\n\t                { value: 'lessThanOrEqual', text: this.l10n.getConstant('LessThanOrEqual') },\n\t                { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t            ];\n\t            this.customOperators = {\n\t                stringOperator: [\n\t                    { value: 'startsWith', text: this.l10n.getConstant('StartsWith') },\n\t                    { value: 'endsWith', text: this.l10n.getConstant('EndsWith') },\n\t                    { value: 'contains', text: this.l10n.getConstant('Contains') },\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ],\n\t                numberOperator: numOptr,\n\t                dateOperator: numOptr,\n\t                datetimeOperator: numOptr,\n\t                booleanOperator: [\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ]\n\t            };\n\t        };\n\t        ;\n\t        Filter.prototype.filterIconClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'menu' ||\n\t                this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel')) {\n\t                var gObj = this.parent;\n\t                var col = gObj.getColumnByUid(util_2.parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n\t                var gClient = gObj.element.getBoundingClientRect();\n\t                var fClient = target.getBoundingClientRect();\n\t                this.column = col;\n\t                if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n\t                    return;\n\t                }\n\t                if (this.filterModule) {\n\t                    this.filterModule.closeDialog();\n\t                }\n\t                this.fltrDlgDetails = { field: col.field, isOpen: true };\n\t                this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n\t            }\n\t        };\n\t        Filter.prototype.clickHandler = function (e) {\n\t            if (this.parent.filterSettings.type === 'menu' ||\n\t                this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel') {\n\t                var gObj = this.parent;\n\t                var target = e.target;\n\t                var datepickerEle = target.classList.contains('e-day');\n\t                if (util_2.parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n\t                    return;\n\t                }\n\t                else if (this.filterModule &&\n\t                    (!util_2.parentsUntil(target, 'e-popup-wrapper')\n\t                        && (!ej2_base_1.closest(target, '.e-filter-item.e-menu-item'))\n\t                        && (!util_2.parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n\t                    this.filterModule.closeDialog(target);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.filterHandler = function (args) {\n\t            var filterIconElement;\n\t            var dataManager = new ej2_data_1.DataManager(this.filterSettings.columns);\n\t            var query = new ej2_data_1.Query().where('field', this.filterOperators.equal, args.field);\n\t            var result = dataManager.executeLocal(query);\n\t            for (var i = 0; i < result.length; i++) {\n\t                var index = -1;\n\t                for (var j = 0; j < this.filterSettings.columns.length; j++) {\n\t                    if (result[i].field === this.filterSettings.columns[j].field) {\n\t                        index = j;\n\t                        break;\n\t                    }\n\t                }\n\t                if (index !== -1) {\n\t                    this.filterSettings.columns.splice(index, 1);\n\t                }\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n\t            if (args.action === 'filtering') {\n\t                this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n\t                if (this.filterSettings.columns.length && filterIconElement) {\n\t                    filterIconElement.classList.add('e-filtered');\n\t                }\n\t            }\n\t            else {\n\t                if (filterIconElement) {\n\t                    filterIconElement.classList.remove('e-filtered');\n\t                }\n\t                this.parent.refresh();\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if (column.type !== 'checkbox') {\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    node.classList.add('e-fltrtemp');\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-fltrtempdiv'\n\t                    });\n\t                    if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                        input = ej2_base_2.createElement('input', {\n\t                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            attrs: { type: 'search', title: column.headerText }\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                    else {\n\t                        var args = { column: column };\n\t                        var temp = column.filterBarTemplate.create;\n\t                        if (typeof temp === 'string') {\n\t                            temp = ej2_base_1.getValue(temp, window);\n\t                        }\n\t                        input = temp(args);\n\t                        if (typeof input === 'string') {\n\t                            var div = ej2_base_2.createElement('div');\n\t                            div.innerHTML = input;\n\t                            input = div.firstChild;\n\t                        }\n\t                        ej2_base_2.attributes(innerDIV, {\n\t                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            title: column.headerText,\n\t                            id: column.field + '_filterBarcell',\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-filterdiv e-fltrinputdiv'\n\t                    });\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                        attrs: {\n\t                            type: 'search', title: column.headerText + cell.attributes.title,\n\t                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                        }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                    innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                        className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                        attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                    }));\n\t                }\n\t                if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                    input.setAttribute('disabled', 'true');\n\t                    input.classList.add('e-disable');\n\t                }\n\t                if (!column.visible) {\n\t                    node.classList.add('e-hide');\n\t                }\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    var templateRead = column.filterBarTemplate.read;\n\t                    var templateWrite = column.filterBarTemplate.write;\n\t                    var args = { element: input, column: column };\n\t                    if (typeof templateRead === 'string') {\n\t                        templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                    }\n\t                    if (typeof templateWrite === 'string') {\n\t                        templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                    }\n\t                    templateWrite.call(this, args);\n\t                }\n\t                this.appendHtml(node, innerDIV);\n\t            }\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(67), __webpack_require__(66), __webpack_require__(68), __webpack_require__(69), __webpack_require__(70), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_popups_1, filter_menu_operator_1, string_filter_ui_1, number_filter_ui_1, boolean_filter_ui_1, date_filter_ui_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterMenuRenderer = (function () {\n\t        function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n\t            this.colTypes = {\n\t                'string': string_filter_ui_1.StringFilterUI, 'number': number_filter_ui_1.NumberFilterUI, 'date': date_filter_ui_1.DateFilterUI, 'boolean': boolean_filter_ui_1.BooleanFilterUI, 'datetime': date_filter_ui_1.DateFilterUI\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.customFilterOperators = customFltrOperators;\n\t            this.filterObj = fltrObj;\n\t            this.flMuiObj = new filter_menu_operator_1.FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        }\n\t        FilterMenuRenderer.prototype.openDialog = function (args) {\n\t            this.col = this.parent.getColumnByField(args.field);\n\t            if (ej2_base_1.isNullOrUndefined(this.col.filter) || (ej2_base_1.isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'menu')) {\n\t                this.renderDlgContent(args.target, this.col);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.closeDialog = function () {\n\t            var elem = document.getElementById(this.dlgObj.element.id);\n\t            if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.col.field });\n\t                this.dlgObj.destroy();\n\t                ej2_base_1.remove(elem);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n\t            var mainDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n\t            this.dlgDiv = ej2_base_2.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                created: this.dialogCreated.bind(this, target, column),\n\t                position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n\t                target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n\t                buttons: [{\n\t                        click: this.filterBtnClick.bind(this, column),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearBtnClick.bind(this, column),\n\t                        buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n\t                    }],\n\t                content: mainDiv,\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                animationSettings: { effect: 'None' },\n\t                cssClass: 'e-filter-popup'\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t        };\n\t        FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n\t            if (!ej2_base_2.Browser.isDevice) {\n\t                util_1.getFilterMenuPostion(target, this.dlgObj);\n\t            }\n\t            this.renderFilterUI(target, column);\n\t            this.parent.notify(events.filterDialogCreated, {});\n\t            this.dlgObj.element.style.maxHeight = '350px';\n\t            this.dlgObj.show();\n\t            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n\t        };\n\t        FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n\t            var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n\t            this.renderOperatorUI(dlgConetntEle, target, col);\n\t            this.renderFlValueUI(dlgConetntEle, target, col);\n\t        };\n\t        FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n\t            this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n\t        };\n\t        FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n\t            var valueDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-valuediv' });\n\t            dlgConetntEle.appendChild(valueDiv);\n\t            var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n\t            var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(column.filter) && !ej2_base_1.isNullOrUndefined(column.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(column.filter.ui.create)) {\n\t                var temp = column.filter.ui.create;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                column.filter.ui.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t            else {\n\t                instanceofFilterUI.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n\t            var flValue;\n\t            var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    flValue = column.value;\n\t                }\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) && !ej2_base_1.isNullOrUndefined(col.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(col.filter.ui.write)) {\n\t                var temp = col.filter.ui.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.filter.ui.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t            else {\n\t                instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n\t            var flValue;\n\t            var flOptrValue;\n\t            var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n\t            flOptrValue = this.flMuiObj.getFlOperator();\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) &&\n\t                !ej2_base_1.isNullOrUndefined(col.filter.ui) && !ej2_base_1.isNullOrUndefined(col.filter.ui.read)) {\n\t                var temp = col.filter.ui.read;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                flValue = col.filter.ui.read({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n\t            }\n\t            else {\n\t                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n\t            var flIcon = column.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.add('e-filtered');\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n\t            this.filterObj.removeFilteredColsByField(column.field);\n\t            this.closeDialog();\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n\t            var flIcon = col.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.remove('e-filtered');\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.destroy = function () {\n\t        };\n\t        return FilterMenuRenderer;\n\t    }());\n\t    exports.FilterMenuRenderer = FilterMenuRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(8), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_data_1, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StringFilterUI = (function () {\n\t        function StringFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        StringFilterUI.prototype.create = function (args) {\n\t            var _this = this;\n\t            var data;\n\t            var floptr;\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.dialogObj = args.dialogObj;\n\t            this.actObj = new ej2_dropdowns_1.AutoComplete({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                fields: { value: args.column.field },\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                sortOrder: 'Ascending',\n\t                open: this.openPopup.bind(this),\n\t                cssClass: 'e-popup-flmenu',\n\t                focus: function () {\n\t                    _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n\t                },\n\t                autofill: true,\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                actionComplete: function (e) {\n\t                    e.result = e.result.filter(function (obj, index, arr) {\n\t                        return arr.map(function (mapObj) {\n\t                            return mapObj[_this.actObj.fields.value];\n\t                        }).indexOf(obj[_this.actObj.fields.value]) === index;\n\t                    });\n\t                }\n\t            });\n\t            this.actObj.appendTo(this.instance);\n\t        };\n\t        StringFilterUI.prototype.write = function (args) {\n\t            var columns = this.filterSettings.columns;\n\t            if (args.filteredValue !== '') {\n\t                var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n\t                struiObj.value = args.filteredValue;\n\t            }\n\t        };\n\t        StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n\t            var filterValue = actuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        StringFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return StringFilterUI;\n\t    }());\n\t    exports.StringFilterUI = StringFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_base_1, ej2_base_2, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FlMenuOptrUI = (function () {\n\t        function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t            this.customFilterOperators = customFltrOperators;\n\t        }\n\t        FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n\t            this.dialogObj = dlgObj;\n\t            var optr = column.type + 'Operator';\n\t            this.optrData = this.customOptr = (!ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators) &&\n\t                !ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n\t                this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n\t            var dropDatasource = this.customOptr;\n\t            var selectedValue = this.dropSelectedVal(column, optr);\n\t            var optrDiv = ej2_base_2.createElement('div', { className: 'e-flm_optrdiv' });\n\t            dlgConetntEle.appendChild(optrDiv);\n\t            var optrInput = ej2_base_2.createElement('input', { id: column.uid + '-floptr' });\n\t            optrDiv.appendChild(optrInput);\n\t            this.dropOptr = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: dropDatasource,\n\t                fields: { text: 'text', value: 'value' },\n\t                open: this.dropDownOpen.bind(this),\n\t                text: selectedValue\n\t            });\n\t            this.dropOptr.appendTo('#' + column.uid + '-floptr');\n\t        };\n\t        FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n\t            args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n\t            var selValue = '';\n\t            var columns = this.parent.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    var selectedField = new ej2_data_1.DataManager(this.optrData).executeLocal(new ej2_data_1.Query().where('value', 'equal', column.operator));\n\t                    selValue = !ej2_base_1.isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n\t                }\n\t            }\n\t            if (selValue === '') {\n\t                selValue = this.optrData[0].text;\n\t            }\n\t            return selValue;\n\t        };\n\t        FlMenuOptrUI.prototype.getFlOperator = function () {\n\t            return this.dropOptr.value;\n\t        };\n\t        return FlMenuOptrUI;\n\t    }());\n\t    exports.FlMenuOptrUI = FlMenuOptrUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(24), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_inputs_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumberFilterUI = (function () {\n\t        function NumberFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.filterSettings = filterSettings;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t        }\n\t        NumberFilterUI.prototype.create = function (args) {\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.numericTxtObj = new ej2_inputs_1.NumericTextBox({\n\t                format: args.column.format,\n\t                locale: this.parent.locale,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                enableRtl: this.parent.enableRtl,\n\t            });\n\t            this.numericTxtObj.appendTo(this.instance);\n\t        };\n\t        NumberFilterUI.prototype.write = function (args) {\n\t            var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n\t            numberuiObj.value = args.filteredValue;\n\t        };\n\t        NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n\t            var filterValue = numberuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        return NumberFilterUI;\n\t    }());\n\t    exports.NumberFilterUI = NumberFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(8), __webpack_require__(61), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, ej2_data_1, ej2_dropdowns_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanFilterUI = (function () {\n\t        function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        BooleanFilterUI.prototype.create = function (args) {\n\t            var data;\n\t            this.elem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n\t            args.target.appendChild(this.elem);\n\t            this.dialogObj = args.dialogObj;\n\t            this.dropInstance = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field),\n\t                fields: { text: args.column.field, value: args.column.field },\n\t                placeholder: args.localizeText.getConstant('SelectValue'),\n\t                cssClass: 'e-popup-flmenu',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t                actionComplete: this.ddActionComplete\n\t            });\n\t            this.dropInstance.appendTo(this.elem);\n\t        };\n\t        BooleanFilterUI.prototype.write = function (args) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n\t            drpuiObj.text = !ej2_base_1.isNullOrUndefined(args.filteredValue) ? args.filteredValue : '';\n\t        };\n\t        BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n\t            var filterValue = drpuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        BooleanFilterUI.prototype.ddActionComplete = function (e) {\n\t            e.result = util_1.distinctStringValues(e.result);\n\t        };\n\t        BooleanFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return BooleanFilterUI;\n\t    }());\n\t    exports.BooleanFilterUI = BooleanFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(71), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_calendars_1, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DateFilterUI = (function () {\n\t        function DateFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.locator = serviceLocator;\n\t            this.fltrSettings = filterSettings;\n\t        }\n\t        DateFilterUI.prototype.create = function (args) {\n\t            var intl = new ej2_base_2.Internationalization();\n\t            var colFormat = args.column.format;\n\t            var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n\t            this.dialogObj = args.dialogObj;\n\t            this.inputElem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n\t            args.target.appendChild(this.inputElem);\n\t            this.datePickerObj = new ej2_calendars_1.DatePicker({\n\t                format: format,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('ChooseDate'),\n\t                width: '100%',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t            });\n\t            this.datePickerObj.appendTo(this.inputElem);\n\t        };\n\t        DateFilterUI.prototype.write = function (args) {\n\t            var columns = this.fltrSettings.columns;\n\t            var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n\t            dateuiObj.value = args.filteredValue;\n\t        };\n\t        DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n\t            var filterValue = dateuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        DateFilterUI.prototype.openPopup = function (args) {\n\t            args.popupElement.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        return DateFilterUI;\n\t    }());\n\t    exports.DateFilterUI = DateFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_71__;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(73), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_navigations_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelFilter = (function (_super) {\n\t        __extends(ExcelFilter, _super);\n\t        function ExcelFilter(parent, filterSettings, serviceLocator) {\n\t            var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n\t            _this.localeConstants = {\n\t                ClearFilter: 'Clear Filter',\n\t                NumberFilter: 'Number Filters',\n\t                TextFilter: 'Text Filters',\n\t                DateFilter: 'Date Filters',\n\t                MatchCase: 'Match Case',\n\t                Equal: 'Equal',\n\t                NotEqual: 'Not Equal',\n\t                LessThan: 'Less Than',\n\t                LessThanOrEqual: 'Less Than Or Equal',\n\t                GreaterThan: 'Greater Than',\n\t                GreaterThanOrEqual: 'Greater Than Or Equal',\n\t                Between: 'Between',\n\t                CustomFilter: 'Custom Filter',\n\t                StartsWith: 'Starts With',\n\t                EndsWith: 'Ends With',\n\t                Contains: 'Contains',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel'\n\t            };\n\t            ej2_base_1.extend(_this.defaultConstants, _this.localeConstants);\n\t            _this.isExcel = true;\n\t            _this.initLocale(_this.defaultConstants);\n\t            return _this;\n\t        }\n\t        ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n\t            var options = {\n\t                number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n\t                    'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n\t                string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n\t            };\n\t            options.date = options.number;\n\t            options.datetime = options.number;\n\t            var model = [];\n\t            for (var i = 0; i < options[type].length; i++) {\n\t                if (options[type][i].length) {\n\t                    if (operator) {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...',\n\t                            iconCss: 'e-icons e-icon-check ' + (operator === options[type][i] ? '' : 'e-emptyicon')\n\t                        });\n\t                    }\n\t                    else {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...'\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    model.push({ separator: true });\n\t                }\n\t            }\n\t            return model;\n\t        };\n\t        ExcelFilter.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            ej2_base_1.remove(this.cmenu);\n\t        };\n\t        ExcelFilter.prototype.createMenu = function (type, isFiltered) {\n\t            var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n\t            this.menu = ej2_base_1.createElement('div', { className: 'e-contextmenu-wrapper' });\n\t            var ul = ej2_base_1.createElement('ul');\n\t            var icon = isFiltered ? 'e-icon-filter e-filtered' : 'e-icon-filter';\n\t            ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n\t            if (type !== 'boolean') {\n\t                ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isFiltered ? 'e-icon-check' : icon + ' e-emptyicon', true));\n\t            }\n\t            this.menu.appendChild(ul);\n\t        };\n\t        ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n\t            var li = ej2_base_1.createElement('li', { className: className + ' e-menu-item' });\n\t            li.innerHTML = val;\n\t            li.insertBefore(ej2_base_1.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n\t            if (isSubMenu) {\n\t                li.appendChild(ej2_base_1.createElement('span', { className: 'e-icons e-caret' }));\n\t            }\n\t            return li;\n\t        };\n\t        ExcelFilter.prototype.wireExEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n\t        };\n\t        ExcelFilter.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n\t        };\n\t        ExcelFilter.prototype.clickExHandler = function (e) {\n\t            var menuItem = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText) {\n\t            }\n\t        };\n\t        ExcelFilter.prototype.destroyCMenu = function () {\n\t            if (this.menuObj && !this.menuObj.isDestroyed) {\n\t                this.menuObj.destroy();\n\t            }\n\t        };\n\t        ExcelFilter.prototype.hoverHandler = function (e) {\n\t            var target = e.target.querySelector('.e-contextmenu');\n\t            var li = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            var focused = this.menu.querySelector('.e-focused');\n\t            var isSubMenu;\n\t            if (focused) {\n\t                focused.classList.remove('e-focused');\n\t            }\n\t            if (li) {\n\t                li.classList.add('e-focused');\n\t                isSubMenu = li.classList.contains('e-submenu');\n\t            }\n\t            if (target) {\n\t                return;\n\t            }\n\t            if (!isSubMenu) {\n\t                var submenu = this.menu.querySelector('.e-submenu');\n\t                submenu.classList.remove('e-selected');\n\t                this.isCMenuOpen = false;\n\t                this.destroyCMenu();\n\t            }\n\t            if (!this.isCMenuOpen && isSubMenu) {\n\t                li.classList.add('e-selected');\n\t                this.isCMenuOpen = true;\n\t                var menuOptions = {\n\t                    items: this.getCMenuDS(this.options.type),\n\t                    select: this.selectHandler.bind(this),\n\t                    onClose: this.destroyCMenu.bind(this),\n\t                };\n\t                this.parent.element.appendChild(this.cmenu);\n\t                this.menuObj = new ej2_navigations_1.ContextMenu(menuOptions, this.cmenu);\n\t                var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n\t                this.menuObj.open(client.top, this.dlg.getBoundingClientRect().right + 1);\n\t            }\n\t        };\n\t        ExcelFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t            this.dialogObj.height = '345px';\n\t            this.dialogObj.dataBind();\n\t            this.createMenu(options.type, false);\n\t            this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n\t            this.dlg.classList.add('e-excelfilter');\n\t            this.cmenu = ej2_base_1.createElement('ul', { className: 'e-excel-menu' });\n\t            this.wireExEvents();\n\t        };\n\t        ExcelFilter.prototype.closeDialog = function () {\n\t            _super.prototype.closeDialog.call(this);\n\t            this.unwireEvents();\n\t        };\n\t        ExcelFilter.prototype.selectHandler = function (e) {\n\t        };\n\t        ExcelFilter.prototype.getModuleName = function () {\n\t            return 'excelFilter';\n\t        };\n\t        return ExcelFilter;\n\t    }(checkbox_filter_1.CheckBoxFilter));\n\t    exports.ExcelFilter = ExcelFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_73__;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(39), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            if (this.parent.frozenColumns) {\n\t                this.parent.on(events.freezeRefresh, this.render, this);\n\t            }\n\t            else {\n\t                this.parent.on(events.headerRefreshed, this.render, this);\n\t            }\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (this.parent.allowResizing &&\n\t                !(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return this.parent.frozenColumns ?\n\t                [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + exports.resizeClassList.root))\n\t                : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                if (this.getScrollBarWidth() === 0) {\n\t                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n\t                        var col = _a[_i];\n\t                        this.widthService.setColumnWidth(col);\n\t                    }\n\t                    this.widthService.setWidthToTable();\n\t                }\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper || this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.refreshColumnWidth = function () {\n\t            var columns = this.parent.getColumns();\n\t            for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n\t                var ele = _a[_i];\n\t                for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                    var column = columns_1[_b];\n\t                    if (ele.querySelector('[e-mappinguid]') &&\n\t                        ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n\t                        column.width = ele.getBoundingClientRect().width;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return columns;\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n\t            if (this.parent.frozenColumns) {\n\t                if (rect.parentElement.children.length !== this.parent.frozenColumns) {\n\t                    tr.splice(0, tr.length / 2);\n\t                }\n\t                else {\n\t                    tr.splice(tr.length / 2, tr.length / 2);\n\t                }\n\t            }\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function (height) {\n\t            var ele = this.parent.frozenColumns ? this.parent.getContent().querySelector('.e-movablecontent')\n\t                : this.parent.getContent().firstChild;\n\t            return (ele.scrollHeight > ele.clientHeight && height) ||\n\t                ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'single')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                if (gObj.selectionSettings.mode === 'row' && gObj.selectionSettings.type === 'single') {\n\t                    var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n\t                    gObj.selectRow(index);\n\t                }\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    var row = element.parentElement.querySelector('[class^=\"e-record\"]');\n\t                    if (!row) {\n\t                        break;\n\t                    }\n\t                    this.expandCollapseRows(row);\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    ej2_base_2.addClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.removeClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    ej2_base_2.removeClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    ej2_base_2.removeClass([toExpand[i]], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([toExpand[i]], 'e-recordpluscollapse');\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n\t            if (groupElem) {\n\t                ej2_base_2.remove(groupElem);\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            if (!ej2_base_3.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    childDiv.innerHTML = column.headerTemplate;\n\t                }\n\t                childDiv.firstElementChild.classList.add('e-grouptext');\n\t            }\n\t            else {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-grouptext', innerHTML: column.headerText,\n\t                    attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t                }));\n\t            }\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n\t                            if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                                ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                            }\n\t                            if (!isRemove) {\n\t                                headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                    className: 'e-grptogglebtn e-icons ' +\n\t                                        (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                            : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                                }));\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28), __webpack_require__(17), __webpack_require__(18), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1, row_1, cell_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent, locator) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.focus = locator.getService('focus');\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var uid_1 = tr.getAttribute('data-uid');\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        var row = new row_1.Row({\n\t                            isDataRow: true,\n\t                            cells: [new cell_1.Cell({ cellType: enum_1.CellType.Indent }), new cell_1.Cell({ isDataCell: true, visible: true })]\n\t                        });\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                            row.cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            detailCell.appendChild(gridElem);\n\t                            grid.appendTo(gridElem);\n\t                        }\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        var idx_1;\n\t                        this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                        gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    if (!element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n\t                        break;\n\t                    }\n\t                    this.toogleExpandcollapse(element);\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.items = ['add', 'edit', 'update', 'delete', 'cancel', 'print', 'search',\n\t                'columnchooser', 'pdfexport', 'excelexport', 'csvexport', 'wordexport'];\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            var viewStr = 'viewContainerRef';\n\t            var registerTemp = 'registeredTemplate';\n\t            if (this.parent[viewStr]) {\n\t                this.toolbar[registerTemp] = {};\n\t                this.toolbar[viewStr] = this.parent[viewStr];\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    util_1.appendChildren(this.element, util_1.templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                switch (typeof item) {\n\t                    case 'number':\n\t                        items.push(this.getItemObject(this.items[item]));\n\t                        break;\n\t                    case 'string':\n\t                        items.push(this.getItemObject(item));\n\t                        break;\n\t                    default:\n\t                        items.push(this.getItem(item));\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            return item ? ej2_base_1.extend(item, item, itemObject) : itemObject;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(10), __webpack_require__(81), __webpack_require__(82), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(12), __webpack_require__(13), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator, null, this.parent);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing && args.module === 'resize') {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var tempObj = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(85), __webpack_require__(89), __webpack_require__(90), __webpack_require__(84), __webpack_require__(91), __webpack_require__(92), __webpack_require__(94), __webpack_require__(95), __webpack_require__(6), __webpack_require__(7), __webpack_require__(24), __webpack_require__(96)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_inputs_1, datepicker_edit_cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell, 'numericedit': numeric_edit_cell_1.NumericEditCell,\n\t                'datepickeredit': datepicker_edit_cell_1.DatePickerEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'defaultedit': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            this.parent.notify('start-edit', {});\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t            this.parent.notify('close-edit', {});\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t            this.parent.notify('start-add', {});\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.dataBind();\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-griderror'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                ej2_base_3.remove(elem);\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            util_1.changeButtonType(obj.element);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.actionBeginFunction = this.onActionBegin.bind(this);\n\t            this.actionCompleteFunction = this.actionComplete.bind(this);\n\t            this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n\t            if (actions.indexOf(e.requestType) < 0) {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col && col.field) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    if (col.type !== 'checkbox') {\n\t                        value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    }\n\t                    else {\n\t                        value = inputs[i].checked;\n\t                    }\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && e.requestType !== 'save' && this.formObj && !this.formObj.isDestroyed) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.getColumns();\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.destroyToolTip();\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.destroyToolTip();\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.destroyForm();\n\t            this.removeEventListener();\n\t            var elem = this.dialogObj.element;\n\t            this.dialogObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            elem = this.alertDObj.element;\n\t            this.alertDObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (!util_1.parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var id = error.getAttribute('for');\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + id + '_Error');\n\t                if (!elem) {\n\t                    this.createTooltip(inputElement, error, id, '');\n\t                }\n\t                else {\n\t                    elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + args.inputName + '_Error');\n\t                if (elem) {\n\t                    if (args.status === 'failure') {\n\t                        elem.style.display = '';\n\t                    }\n\t                    else {\n\t                        elem.style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.createTooltip = function (element, error, name, display) {\n\t            var table = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n\t            var client = table.getBoundingClientRect();\n\t            var inputClient = util_1.parentsUntil(element, 'e-rowcell').getBoundingClientRect();\n\t            var div = ej2_base_3.createElement('div', {\n\t                className: 'e-tooltip-wrap e-popup e-griderror',\n\t                id: name + '_Error',\n\t                styles: 'display:' + display + ';top:' +\n\t                    (inputClient.bottom - client.top + table.scrollTop + 9) + 'px;left:' +\n\t                    (inputClient.left - client.left + table.scrollLeft + inputClient.width / 2) + 'px;'\n\t            });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-tip-content' });\n\t            content.appendChild(error);\n\t            var arrow = ej2_base_3.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n\t            div.appendChild(content);\n\t            div.appendChild(arrow);\n\t            table.appendChild(div);\n\t            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            element.ej2_instances[0].focusOut();\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(86), __webpack_require__(87), __webpack_require__(88), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2, enum_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t            this.focus = serviceLocator.getService('focus');\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible || col.commands) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                col.edit.write({\n\t                    rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row\n\t                });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell, args.type);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem, type) {\n\t            var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t            if (!ej2_base_1.isNullOrUndefined(chkBox)) {\n\t                chkBox.nextElementSibling.classList.add('e-focus');\n\t            }\n\t            if (this.parent.editSettings.mode === 'batch') {\n\t                this.focus.onClick({ target: ej2_base_1.closest(elem, 'td') }, true);\n\t            }\n\t            else {\n\t                elem.focus();\n\t            }\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var col = cols[i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                if (col.commands || col.commandsTemplate) {\n\t                    var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t                    var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t                    var cellRenderer = cellRendererFact.getCellRenderer(enum_1.CellType.CommandColumn);\n\t                    var cells = model.generateRows(args.rowData)[0].cells;\n\t                    var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n\t                    var div = td.firstElementChild;\n\t                    div.setAttribute('textAlign', td.getAttribute('textAlign'));\n\t                    elements[col.uid] = div;\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if (col.textAlign === 'right') {\n\t                    input.classList.add('e-ralign');\n\t                }\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true, tdElement));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            var m = 0;\n\t            i = 0;\n\t            while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n\t                var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n\t                var col = gObj.getColumns()[i];\n\t                if (col.visible) {\n\t                    var td_1 = ej2_base_1.createElement('td', {\n\t                        className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n\t                    });\n\t                    td_1.appendChild(elements[col.uid]);\n\t                    if (col.editType === 'booleanedit') {\n\t                        td_1.classList.add('e-boolcell');\n\t                    }\n\t                    else if (col.commands || col.commandsTemplate) {\n\t                        ej2_base_1.addClass([td_1], 'e-unboundcell');\n\t                    }\n\t                    tr.appendChild(td_1);\n\t                }\n\t                i = span ? i + parseInt(span, 10) : i + 1;\n\t                m++;\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t            util_1.changeButtonType(this.dialogObj.element);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.getColumns();\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                dataCell.appendChild(elements[cols[i].uid]);\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.activeClasses = ['e-selectionbackground', 'e-active'];\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var classNames = 'e-field e-boolcell';\n\t            if (col.type === 'checkbox') {\n\t                classNames = 'e-field e-boolcell e-edit-checkselect';\n\t            }\n\t            return ej2_base_1.createElement('input', {\n\t                className: classNames, attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            var selectChkBox;\n\t            var chkState;\n\t            if (!ej2_base_1.isNullOrUndefined(args.row)) {\n\t                selectChkBox = args.row.querySelector('.e-edit-checkselect');\n\t            }\n\t            if (args.rowData[args.column.field]) {\n\t                chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(selectChkBox)) {\n\t                this.editType = this.parent.editSettings.mode;\n\t                this.editRow = args.row;\n\t                if (args.requestType !== 'add') {\n\t                    var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n\t                    chkState = row ? row.isSelected : false;\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n\t            }\n\t            this.obj = new ej2_buttons_1.CheckBox(ej2_base_2.extend({\n\t                label: this.parent.editSettings.mode !== 'dialog' ? '' : args.column.headerText,\n\t                checked: chkState,\n\t                disabled: !util_1.isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n\t                change: this.checkBoxChange.bind(this)\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        BooleanEditCell.prototype.checkBoxChange = function (args) {\n\t            if (this.editRow && this.editType !== 'dialog') {\n\t                var add = false;\n\t                if (!args.checked) {\n\t                    this.editRow.removeAttribute('aria-selected');\n\t                }\n\t                else {\n\t                    add = true;\n\t                    this.editRow.setAttribute('aria-selected', add.toString());\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n\t            }\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(61), __webpack_require__(8), __webpack_require__(7), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1, util_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.dropDownOpen = function (args) {\n\t            var dlgElement = util_2.parentsUntil(this.obj.element, 'e-dialog');\n\t            if (!ej2_base_1.isNullOrUndefined(dlgElement)) {\n\t                var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n\t                args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n\t            }\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent') && !util_1.parentsUntil(target, 'e-unboundcelldiv')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            this.parent.isEdit = false;\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                        || !this.parent.element.classList.contains('e-persistselection')) {\n\t                        this.parent.selectRow(0);\n\t                    }\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            if (gObj.editSettings.mode === 'dialog') {\n\t                args.row.classList.add('e-dlgeditrow');\n\t            }\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.showSpinner();\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            gObj.editModule.destroyWidgets();\n\t            gObj.editModule.destroyForm();\n\t            gObj.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t            if (gObj.editSettings.mode === 'dialog' && args.action !== 'add') {\n\t                gObj.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.parent.isEdit = false;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                || !this.parent.element.classList.contains('e-persistselection')) {\n\t                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            }\n\t            this.parent.element.focus();\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.getColumns(), true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            if (!this.parent.isEdit) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            gObj.isEdit = false;\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add'\n\t                });\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(26), __webpack_require__(18), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, util_1, events, row_renderer_1, cell_renderer_1, cell_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.dataBoundFunction = this.dataBound.bind(this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n\t            this.parent.on(events.cellFocused, this.onCellFocused);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = util_1.parentsUntil(e.target, 'e-rowcell');\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.onBeforeCellFocused = function (e) {\n\t            if (this.parent.isEdit && this.validateFormObj() &&\n\t                (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n\t                e.cancel = true;\n\t                if (e.byClick) {\n\t                    e.clickArgs.preventDefault();\n\t                }\n\t                else {\n\t                    e.keyArgs.preventDefault();\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.onCellFocused = function (e) {\n\t            var clear = !e.container.isContent || !e.container.isDataCell;\n\t            if (!e.byKey || clear) {\n\t                return;\n\t            }\n\t            var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.keyArgs.action) {\n\t                    case 'tab':\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editCellFromIndex(rowIndex, cellIndex);\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                    case 'shiftEnter':\n\t                        e.keyArgs.preventDefault();\n\t                        if (isEdit) {\n\t                            this.editCell(rowIndex, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(rowIndex, cellIndex);\n\t                        this.focus.focus();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = this.parent.getRowsObject();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.showSpinner();\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.getRowsObject();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.getRowsObject();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.getRowsObject().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n\t            gObj.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t                modelData[0].cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            this.focus.forgetPrevious();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.getColumns()[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t            gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.getColumns();\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var cells = [].slice.apply(row.cells);\n\t                var args = {\n\t                    cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                if (!args.cell) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n\t                    cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10)\n\t                };\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.isEdit = true;\n\t                gObj.clearSelection();\n\t                if (!gObj.element.classList.contains('e-checkboxselection') || !gObj.element.classList.contains('e-persistselection')) {\n\t                    gObj.selectRow(this.cellDetails.rowIndex, true);\n\t                }\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.getColIndex = function (cells, index) {\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_1.removeClass([tr], ['e-editedrow', 'e-batchrow']);\n\t            ej2_base_1.removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(71), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_calendars_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DatePickerEditCell = (function () {\n\t        function DatePickerEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DatePickerEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        DatePickerEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DatePickerEditCell.prototype.write = function (args) {\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_calendars_1.DatePicker(ej2_base_1.extend({\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t                value: new Date(args.rowData[args.column.field]), placeholder: isInline ?\n\t                    '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n\t                enabled: util_1.isEditable(args.column, args.type, args.element),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        DatePickerEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DatePickerEditCell;\n\t    }());\n\t    exports.DatePickerEditCell = DatePickerEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(98), __webpack_require__(5), __webpack_require__(21), __webpack_require__(99), __webpack_require__(20), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.isElementIdChanged = false;\n\t            this.parent = parent;\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            if (gObj.element !== null && gObj.element.id === '') {\n\t                gObj.element.id = new Date().toISOString();\n\t                this.isElementIdChanged = true;\n\t            }\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.helper = new export_helper_1.ExportHelper(gObj);\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            gObj.trigger(events.beforeExcelExport);\n\t            this.data = new data_1.Data(gObj);\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            return this.processRecords(gObj, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, export_helper_1.ExportHelper.getQuery(gObj, _this.data));\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = this.helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentpage') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t                if (this.isElementIdChanged) {\n\t                    gObj.element.id = '';\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var excelCellArgs = { data: record[r], column: headerRow.columns[c] };\n\t                        gObj.trigger(events.excelQueryCellInfo, ej2_base_1.extend(excelCellArgs, {\n\t                            column: headerRow.columns[c], data: record[r],\n\t                            value: value, style: undefined, colSpan: 1\n\t                        }));\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = excelCellArgs.value;\n\t                        if (excelCellArgs.colSpan > 1) {\n\t                            cell.colSpan = excelCellArgs.colSpan;\n\t                        }\n\t                        if (excelCellArgs.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 12;\n\t            style.borders = { color: '#E0E0E0' };\n\t            if (theme !== undefined && theme.header !== undefined) {\n\t                style = this.updateThemeStyle(theme.header, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n\t            if (themestyle.fontColor !== undefined) {\n\t                style.fontColor = themestyle.fontColor;\n\t            }\n\t            if (themestyle.fontName !== undefined) {\n\t                style.fontName = themestyle.fontName;\n\t            }\n\t            if (themestyle.fontSize !== undefined) {\n\t                style.fontSize = themestyle.fontSize;\n\t            }\n\t            if (themestyle.borders !== undefined) {\n\t                if (themestyle.borders.color !== undefined) {\n\t                    style.borders.color = themestyle.borders.color;\n\t                }\n\t                if (themestyle.borders.lineStyle !== undefined) {\n\t                    style.borders.lineStyle = themestyle.borders.lineStyle;\n\t                }\n\t            }\n\t            if (themestyle.bold !== false) {\n\t                style.bold = themestyle.bold;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 13;\n\t            style.backColor = '#F6F6F6';\n\t            if (theme !== undefined && theme.caption !== undefined) {\n\t                style = this.updateThemeStyle(theme.caption, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 13;\n\t            style.borders = { color: '#E0E0E0' };\n\t            if (theme !== undefined && theme.record !== undefined) {\n\t                style = this.updateThemeStyle(theme.record, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: typeof col.width === 'number' ? col.width : this.helper.getConvertedWidth(col.width) });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_98__;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(14), __webpack_require__(5), __webpack_require__(18), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.getQuery = function (parent, data) {\n\t            return data.isRemote() ?\n\t                data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n\t                data.generateQuery(true).requiresCount();\n\t        };\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.getConvertedWidth = function (input) {\n\t            var value = parseFloat(input);\n\t            return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.value)) {\n\t                return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t            }\n\t            else {\n\t                return '';\n\t            }\n\t        };\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.returnFormattedValue(args, format);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.returnFormattedValue(args, customFormat);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(99), __webpack_require__(21), __webpack_require__(20), __webpack_require__(5), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_export_1, ej2_pdf_export_2, ej2_pdf_export_3, ej2_pdf_export_4, ej2_pdf_export_5, ej2_pdf_export_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.helper = new export_helper_1.ExportHelper(gObj);\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, export_helper_1.ExportHelper.getQuery(parent, _this.data));\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            if (pdfExportProperties !== undefined) {\n\t                this.gridTheme = pdfExportProperties.theme;\n\t            }\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_export_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = this.helper.getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            if (this.gridTheme !== undefined && this.gridTheme.caption !== undefined && this.gridTheme.caption !== null) {\n\t                var fontSize = this.gridTheme.caption.fontSize !== undefined ? this.gridTheme.caption.fontSize : 9.75;\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.caption.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(pdfColor)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t            else {\n\t                return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_export_1.PdfBorders();\n\t            if (this.gridTheme !== undefined && this.gridTheme.header !== undefined && this.gridTheme.header !== null) {\n\t                if (this.gridTheme.header.borders !== undefined && this.gridTheme.header.borders.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b));\n\t                }\n\t                var fontSize = this.gridTheme.header.fontSize !== undefined ? this.gridTheme.header.fontSize : 10.5;\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.header.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, fontSize), brush: new ej2_pdf_export_3.PdfSolidBrush(pdfColor) };\n\t            }\n\t            else {\n\t                border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(234, 234, 234));\n\t                return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.cells.getCell(groupIndex + 1).style.stringFormat = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left);\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_export_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'landscape') ? ej2_pdf_export_6.PdfPageOrientation.Landscape : ej2_pdf_export_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_export_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_export_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentpage') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pagenumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_export_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_export_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_export_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : this.helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            if (this.gridTheme !== undefined && this.gridTheme.record !== undefined && this.gridTheme.record !== null) {\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.record.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(pdfColor));\n\t            }\n\t            else {\n\t                row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var data = items;\n\t                    var args = {\n\t                        data: data,\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined,\n\t                        colSpan: 1\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                    if (args.colSpan > 1) {\n\t                        if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n\t                            args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n\t                        }\n\t                        cell.columnSpan = args.colSpan;\n\t                        for (var i = 1; i < cell.columnSpan; i++) {\n\t                            var spanCell = gridRow.cells.getCell(j + startIndex + i);\n\t                            spanCell.value = '';\n\t                        }\n\t                        j += (args.colSpan - 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                var textPenColor = this.hexToRgb(args.style.textPenColor);\n\t                cell.style.textPen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_export_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_export_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_export_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_export_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_export_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_export_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'lowerlatin':\n\t                    return 2;\n\t                case 'lowerroman':\n\t                    return 3;\n\t                case 'upperlatin':\n\t                    return 4;\n\t                case 'upperroman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left, ej2_pdf_export_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_export_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'letter':\n\t                    return new ej2_pdf_export_6.SizeF(612, 792);\n\t                case 'note':\n\t                    return new ej2_pdf_export_6.SizeF(540, 720);\n\t                case 'legal':\n\t                    return new ej2_pdf_export_6.SizeF(612, 1008);\n\t                case 'a0':\n\t                    return new ej2_pdf_export_6.SizeF(2380, 3368);\n\t                case 'a1':\n\t                    return new ej2_pdf_export_6.SizeF(1684, 2380);\n\t                case 'a2':\n\t                    return new ej2_pdf_export_6.SizeF(1190, 1684);\n\t                case 'a3':\n\t                    return new ej2_pdf_export_6.SizeF(842, 1190);\n\t                case 'a5':\n\t                    return new ej2_pdf_export_6.SizeF(421, 595);\n\t                case 'a6':\n\t                    return new ej2_pdf_export_6.SizeF(297, 421);\n\t                case 'a7':\n\t                    return new ej2_pdf_export_6.SizeF(210, 297);\n\t                case 'a8':\n\t                    return new ej2_pdf_export_6.SizeF(148, 210);\n\t                case 'a9':\n\t                    return new ej2_pdf_export_6.SizeF(105, 148);\n\t                case 'b0':\n\t                    return new ej2_pdf_export_6.SizeF(2836, 4008);\n\t                case 'b1':\n\t                    return new ej2_pdf_export_6.SizeF(2004, 2836);\n\t                case 'b2':\n\t                    return new ej2_pdf_export_6.SizeF(1418, 2004);\n\t                case 'b3':\n\t                    return new ej2_pdf_export_6.SizeF(1002, 1418);\n\t                case 'b4':\n\t                    return new ej2_pdf_export_6.SizeF(709, 1002);\n\t                case 'b5':\n\t                    return new ej2_pdf_export_6.SizeF(501, 709);\n\t                case 'archa':\n\t                    return new ej2_pdf_export_6.SizeF(648, 864);\n\t                case 'archb':\n\t                    return new ej2_pdf_export_6.SizeF(864, 1296);\n\t                case 'archc':\n\t                    return new ej2_pdf_export_6.SizeF(1296, 1728);\n\t                case 'archd':\n\t                    return new ej2_pdf_export_6.SizeF(1728, 2592);\n\t                case 'arche':\n\t                    return new ej2_pdf_export_6.SizeF(2592, 3456);\n\t                case 'flsa':\n\t                    return new ej2_pdf_export_6.SizeF(612, 936);\n\t                case 'halfletter':\n\t                    return new ej2_pdf_export_6.SizeF(396, 612);\n\t                case 'letter11x17':\n\t                    return new ej2_pdf_export_6.SizeF(792, 1224);\n\t                case 'ledger':\n\t                    return new ej2_pdf_export_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_export_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'dash':\n\t                    return 1;\n\t                case 'dot':\n\t                    return 2;\n\t                case 'dashdot':\n\t                    return 3;\n\t                case 'dashdotdot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_101__;\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(14), __webpack_require__(103)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, constant_1, enum_1, command_column_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumn = (function () {\n\t        function CommandColumn(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        CommandColumn.prototype.initiateRender = function () {\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            cellFac.addCellRenderer(enum_1.CellType.CommandColumn, new command_column_renderer_1.CommandColumnRenderer(this.parent, this.locator));\n\t        };\n\t        CommandColumn.prototype.commandClickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var gID = this.parent.element.id;\n\t            var target = ej2_base_1.closest(e.target, 'button');\n\t            if (!target || !gObj.editModule) {\n\t                return;\n\t            }\n\t            switch (target.id.split('_')[0]) {\n\t                case gID + 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.startEdit(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t                case gID + 'cancel':\n\t                    gObj.editModule.closeEdit();\n\t                    break;\n\t                case gID + 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case gID + 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.deleteRow(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t            }\n\t        };\n\t        CommandColumn.prototype.getModuleName = function () {\n\t            return 'commandColumn';\n\t        };\n\t        CommandColumn.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.removeEventListener();\n\t        };\n\t        CommandColumn.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.click, this.commandClickHandler);\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.keyPressed, this.keyPressHandler);\n\t        };\n\t        CommandColumn.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.click, this.commandClickHandler, this);\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.keyPressed, this.keyPressHandler, this);\n\t        };\n\t        CommandColumn.prototype.keyPressHandler = function (e) {\n\t            if (e.action === 'enter' && ej2_base_1.closest(e.target, 'button')) {\n\t                this.commandClickHandler(e);\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        return CommandColumn;\n\t    }());\n\t    exports.CommandColumn = CommandColumn;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumnRenderer = (function (_super) {\n\t        __extends(CommandColumnRenderer, _super);\n\t        function CommandColumnRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.buttonElement = ej2_base_1.createElement('button', {});\n\t            _this.unbounDiv = ej2_base_1.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-rowcell e-unboundcell', attrs: {\n\t                    role: 'gridcell', tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(this.unbounDiv.cloneNode());\n\t            node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n\t            if (cell.column.commandsTemplate) {\n\t                util_1.appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n\t            }\n\t            else {\n\t                for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n\t                    var command = _a[_i];\n\t                    node = this.renderButton(node, command, attributes.index);\n\t                }\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (this.parent.isEdit) {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t            }\n\t            else {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t            }\n\t            return node;\n\t        };\n\t        CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n\t            var button = this.buttonElement.cloneNode();\n\t            ej2_base_1.attributes(button, { 'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button' });\n\t            button.onclick = buttonOption.buttonOption.click;\n\t            node.firstElementChild.appendChild(new ej2_buttons_1.Button(buttonOption.buttonOption, button).element);\n\t            switch (buttonOption.type) {\n\t                case 'edit':\n\t                case 'delete':\n\t                    ej2_base_1.addClass([button], ['e-edit-delete', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t                case 'cancel':\n\t                case 'save':\n\t                    ej2_base_1.addClass([button], ['e-save-cancel', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t            }\n\t            return node;\n\t        };\n\t        return CommandColumnRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.CommandColumnRenderer = CommandColumnRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(74), __webpack_require__(56), __webpack_require__(77), __webpack_require__(55), __webpack_require__(100), __webpack_require__(97)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, resize_1, page_1, group_1, sort_1, pdf_export_1, excel_export_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.menuClass = {\n\t        header: '.e-gridheader',\n\t        content: '.e-gridcontent',\n\t        edit: '.e-inline-edit',\n\t        editIcon: 'e-edit',\n\t        pager: '.e-gridpager',\n\t        delete: 'e-delete',\n\t        save: 'e-save',\n\t        cancel: 'e-cancel',\n\t        copy: 'e-copy',\n\t        pdf: 'e-pdfexport',\n\t        group: 'e-icon-group',\n\t        ungroup: 'e-icon-ungroup',\n\t        csv: 'e-csvexport',\n\t        excel: 'e-excelexport',\n\t        fPage: 'e-icon-first',\n\t        nPage: 'e-icon-next',\n\t        lPage: 'e-icon-last',\n\t        pPage: 'e-icon-prev',\n\t        ascending: 'e-icon-ascending',\n\t        descending: 'e-icon-descending',\n\t        groupHeader: 'e-groupdroparea',\n\t        touchPop: 'e-gridpopup'\n\t    };\n\t    var ContextMenu = (function () {\n\t        function ContextMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.disableItems = [];\n\t            this.hiddenItems = [];\n\t            this.localeText = this.setLocaleKey();\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ContextMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.render, this);\n\t        };\n\t        ContextMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.render);\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_cmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            var target = '#' + this.gridID;\n\t            this.contextMenu = new ej2_navigations_1.ContextMenu({\n\t                items: this.getMenuItems(),\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                target: target,\n\t                select: this.contextMenuItemClick.bind(this),\n\t                beforeOpen: this.contextMenuBeforeOpen.bind(this),\n\t                onOpen: this.contextMenuOpen.bind(this),\n\t                onClose: this.contextMenuOnClose.bind(this),\n\t                cssClass: 'e-grid-menu'\n\t            });\n\t            this.contextMenu.appendTo(this.element);\n\t        };\n\t        ContextMenu.prototype.getMenuItems = function () {\n\t            var menuItems = [];\n\t            var exportItems = [];\n\t            for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n\t                    if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n\t                        exportItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                    else {\n\t                        menuItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                }\n\t                else if (typeof item !== 'string') {\n\t                    menuItems.push(item);\n\t                }\n\t            }\n\t            if (exportItems.length > 0) {\n\t                var exportGroup = this.buildDefaultItems('export');\n\t                exportGroup.items = exportItems;\n\t                menuItems.push(exportGroup);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.getLastPage = function () {\n\t            var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n\t            if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n\t                totalpage += 1;\n\t            }\n\t            return totalpage;\n\t        };\n\t        ContextMenu.prototype.contextMenuOpen = function () {\n\t            this.isOpen = true;\n\t        };\n\t        ContextMenu.prototype.contextMenuItemClick = function (args) {\n\t            var item = this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.startEdit();\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.deleteRow(this.parent.getRowByIndex(this.parent.selectedRowIndex));\n\t                    break;\n\t                case 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case 'cancel':\n\t                    this.parent.editModule.closeEdit();\n\t                    break;\n\t                case 'copy':\n\t                    this.parent.copy();\n\t                    break;\n\t                case 'pdfExport':\n\t                    this.parent.pdfExport();\n\t                    break;\n\t                case 'excelExport':\n\t                    this.parent.excelExport();\n\t                    break;\n\t                case 'csvExport':\n\t                    this.parent.csvExport();\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'firstPage':\n\t                    this.parent.goToPage(1);\n\t                    break;\n\t                case 'prevPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n\t                    break;\n\t                case 'lastPage':\n\t                    this.parent.goToPage(this.getLastPage());\n\t                    break;\n\t                case 'nextPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.contextMenuClick, args);\n\t        };\n\t        ContextMenu.prototype.contextMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.updateItemStatus();\n\t            }\n\t        };\n\t        ContextMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ContextMenu.prototype.updateItemStatus = function () {\n\t            this.contextMenu.showItems(this.hiddenItems);\n\t            this.contextMenu.enableItems(this.disableItems);\n\t            this.hiddenItems = [];\n\t            this.disableItems = [];\n\t            this.isOpen = false;\n\t        };\n\t        ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n\t            this.targetColumn = this.getColumn(args.event);\n\t            if (args.event && (ej2_base_1.closest(args.event.target, '.' + exports.menuClass.groupHeader)\n\t                || ej2_base_1.closest(args.event.target, '.' + exports.menuClass.touchPop))) {\n\t                args.cancel = true;\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key)) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                    if (args.event && ej2_base_1.closest(args.event.target, exports.menuClass.edit)) {\n\t                        if (key !== 'save' && key !== 'cancel') {\n\t                            this.hiddenItems.push(item.text);\n\t                        }\n\t                    }\n\t                    else if (ej2_base_1.isNullOrUndefined(args.parentItem) && args.event\n\t                        && !ej2_base_1.closest(args.event.target, dItem.target)) {\n\t                        this.hiddenItems.push(item.text);\n\t                    }\n\t                }\n\t                else if (item.target && args.event &&\n\t                    !ej2_base_1.closest(args.event.target, item.target)) {\n\t                    this.hiddenItems.push(item.text);\n\t                }\n\t            }\n\t            this.contextMenu.enableItems(this.disableItems, false);\n\t            this.contextMenu.hideItems(this.hiddenItems);\n\t            this.eventArgs = args.event;\n\t            this.parent.trigger(events.contextMenuOpen, args);\n\t            if (this.hiddenItems.length === args.items.length) {\n\t                this.updateItemStatus();\n\t                args.cancel = true;\n\t            }\n\t        };\n\t        ContextMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(group_1.Group)\n\t                        || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                            && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'edit':\n\t                case 'delete':\n\t                case 'save':\n\t                case 'cancel':\n\t                    if (!this.parent.editModule) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'copy':\n\t                    if (this.parent.getSelectedRowIndexes().length === 0) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'export':\n\t                    if ((!this.parent.allowExcelExport && !this.parent.excelExport) ||\n\t                        !this.parent.ensureModuleInjected(pdf_export_1.PdfExport) && !this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'pdfExport':\n\t                    if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(pdf_export_1.PdfExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'excelExport':\n\t                case 'csvExport':\n\t                    if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortAscending':\n\t                case 'sortDescending':\n\t                    if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    else if (this.parent.ensureModuleInjected(sort_1.Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (element) {\n\t                            if (element.field === _this.targetColumn.field\n\t                                && element.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    break;\n\t                case 'firstPage':\n\t                case 'prevPage':\n\t                    if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === 1)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'lastPage':\n\t                case 'nextPage':\n\t                    if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t            }\n\t            return status;\n\t        };\n\t        ContextMenu.prototype.getContextMenu = function () {\n\t            return this.element;\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            this.contextMenu.destroy();\n\t            ej2_base_2.remove(this.element);\n\t            this.removeEventListener();\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextMenu';\n\t        };\n\t        ContextMenu.prototype.generateID = function (item) {\n\t            return this.gridID + '_cmenu_' + item;\n\t        };\n\t        ContextMenu.prototype.getKeyFromId = function (id) {\n\t            return id.replace(this.gridID + '_cmenu_', '');\n\t        };\n\t        ContextMenu.prototype.buildDefaultItems = function (item) {\n\t            var menuItem;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    menuItem = { target: exports.menuClass.header };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.group };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ungroup };\n\t                    break;\n\t                case 'edit':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.editIcon };\n\t                    break;\n\t                case 'delete':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.delete };\n\t                    break;\n\t                case 'save':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.save };\n\t                    break;\n\t                case 'cancel':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.cancel };\n\t                    break;\n\t                case 'copy':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.copy };\n\t                    break;\n\t                case 'export':\n\t                    menuItem = { target: exports.menuClass.content };\n\t                    break;\n\t                case 'pdfExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.pdf };\n\t                    break;\n\t                case 'excelExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.excel };\n\t                    break;\n\t                case 'csvExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.csv };\n\t                    break;\n\t                case 'sortAscending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ascending };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.descending };\n\t                    break;\n\t                case 'firstPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.fPage };\n\t                    break;\n\t                case 'prevPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.pPage };\n\t                    break;\n\t                case 'lastPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.lPage };\n\t                    break;\n\t                case 'nextPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.nPage };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ContextMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit',\n\t                'group', 'ungroup', 'edit', 'delete', 'save', 'cancel', 'copy', 'export',\n\t                'pdfExport', 'excelExport', 'csvExport', 'sortAscending', 'sortDescending',\n\t                'firstPage', 'prevPage', 'lastPage', 'nextPage'];\n\t        };\n\t        ContextMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'copy': 'Copy',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'edit': 'EditRecord',\n\t                'delete': 'DeleteRecord',\n\t                'save': 'Save',\n\t                'cancel': 'CancelButton',\n\t                'pdfExport': 'Pdfexport',\n\t                'excelExport': 'Excelexport',\n\t                'csvExport': 'Csvexport',\n\t                'export': 'Export',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'firstPage': 'FirstPage',\n\t                'lastPage': 'LastPage',\n\t                'prevPage': 'PreviousPage',\n\t                'nextPage': 'NextPage'\n\t            };\n\t        };\n\t        ContextMenu.prototype.getColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, 'th.e-headercell');\n\t            if (cell) {\n\t                var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.selectRow = function (e) {\n\t            var row = ej2_base_1.closest(e.target, 'tr.e-row');\n\t            if (row) {\n\t                this.parent.selectRow(this.parent.getDataRows().indexOf(row));\n\t            }\n\t        };\n\t        return ContextMenu;\n\t    }());\n\t    exports.ContextMenu = ContextMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(14), __webpack_require__(106)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, enum_1, freeze_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Freeze = (function () {\n\t        function Freeze(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Freeze.prototype.getModuleName = function () {\n\t            return 'freeze';\n\t        };\n\t        Freeze.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t        };\n\t        Freeze.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new freeze_renderer_1.FreezeRender(this.parent, this.locator));\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t            if (this.parent.frozenRows && !this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t        };\n\t        Freeze.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.instantiateRenderer);\n\t        };\n\t        Freeze.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return Freeze;\n\t    }());\n\t    exports.Freeze = Freeze;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(25), __webpack_require__(12), __webpack_require__(107), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, header_renderer_1, content_renderer_1, freeze_row_model_generator_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeContentRender = (function (_super) {\n\t        __extends(FreezeContentRender, _super);\n\t        function FreezeContentRender(parent, locator) {\n\t            return _super.call(this, parent, locator) || this;\n\t        }\n\t        FreezeContentRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                var fDiv = ej2_base_1.createElement('div', { className: 'e-frozencontent' });\n\t                var mDiv = ej2_base_1.createElement('div', { className: 'e-movablecontent' });\n\t                this.getPanel().firstChild.appendChild(fDiv);\n\t                this.getPanel().firstChild.appendChild(mDiv);\n\t                this.setFrozenContent(fDiv);\n\t                this.setMovableContent(mDiv);\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.renderEmpty = function (tbody) {\n\t            _super.prototype.renderEmpty.call(this, tbody);\n\t            if (this.parent.frozenColumns) {\n\t                this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n\t                if (this.parent.frozenRows) {\n\t                    this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n\t                    this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n\t                }\n\t            }\n\t            else if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.setFrozenContent = function (ele) {\n\t            this.frozenContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.setMovableContent = function (ele) {\n\t            this.movableContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.getFrozenContent = function () {\n\t            return this.frozenContent;\n\t        };\n\t        FreezeContentRender.prototype.getMovableContent = function () {\n\t            return this.movableContent;\n\t        };\n\t        FreezeContentRender.prototype.getModelGenerator = function () {\n\t            return new freeze_row_model_generator_1.FreezeRowModelGenerator(this.parent);\n\t        };\n\t        FreezeContentRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                this.getFrozenContent().appendChild(this.getTable());\n\t                var mTbl = this.getTable().cloneNode(true);\n\t                this.getMovableContent().appendChild(mTbl);\n\t            }\n\t            if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().firstChild.classList.add('e-frozenhdrcont');\n\t            }\n\t        };\n\t        return FreezeContentRender;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FreezeContentRender = FreezeContentRender;\n\t    var FreezeRender = (function (_super) {\n\t        __extends(FreezeRender, _super);\n\t        function FreezeRender(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FreezeRender.prototype.addEventListener = function () {\n\t            this.parent.on(events.freezeRender, this.refreshFreeze, this);\n\t        };\n\t        FreezeRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            this.rfshMovable();\n\t        };\n\t        FreezeRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            var fDiv = ej2_base_1.createElement('div', { className: 'e-frozenheader' });\n\t            var mDiv = ej2_base_1.createElement('div', { className: 'e-movableheader' });\n\t            this.getPanel().firstChild.appendChild(fDiv);\n\t            this.getPanel().firstChild.appendChild(mDiv);\n\t            this.setFrozenHeader(fDiv);\n\t            this.setMovableHeader(mDiv);\n\t        };\n\t        FreezeRender.prototype.refreshUI = function () {\n\t            this.getMovableHeader().innerHTML = '';\n\t            _super.prototype.refreshUI.call(this);\n\t            this.rfshMovable();\n\t            var mTable = this.getMovableHeader().querySelector('table');\n\t            ej2_base_1.remove(this.getMovableHeader().querySelector('colgroup'));\n\t            mTable.insertBefore(this.renderMovable(this.getFrozenHeader().querySelector('colgroup')), mTable.querySelector('thead'));\n\t        };\n\t        FreezeRender.prototype.rfshMovable = function () {\n\t            this.getFrozenHeader().appendChild(this.getTable());\n\t            this.getMovableHeader().appendChild(this.createTable());\n\t            this.refreshFreeze({ case: 'filter' });\n\t            this.parent.notify(events.freezeRefresh, {});\n\t        };\n\t        FreezeRender.prototype.refreshFreeze = function (obj) {\n\t            if (obj.case === 'filter') {\n\t                var filterRow = this.getTable().querySelector('.e-filterbar');\n\t                if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n\t                    this.getMovableHeader().querySelector('thead')\n\t                        .appendChild(this.renderMovable(filterRow));\n\t                }\n\t            }\n\t            else if (obj.case === 'textwrap') {\n\t                var fRows = void 0;\n\t                var mRows = void 0;\n\t                var wrapMode = this.parent.textWrapSettings.wrapMode;\n\t                if (wrapMode !== 'header' || obj.isModeChg) {\n\t                    fRows = this.parent.getContent()\n\t                        .querySelector('.e-frozencontent').querySelectorAll('tr');\n\t                    mRows = this.parent.getContent()\n\t                        .querySelector('.e-movablecontent').querySelectorAll('tr');\n\t                    this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n\t                }\n\t                if (this.parent.frozenRows) {\n\t                    if (wrapMode === 'content' && this.parent.allowTextWrap) {\n\t                        this.parent.getHeaderContent().firstChild.classList.add('e-wrap');\n\t                    }\n\t                    else {\n\t                        this.parent.getHeaderContent().firstChild.classList.remove('e-wrap');\n\t                    }\n\t                    if (wrapMode === 'both' || obj.isModeChg) {\n\t                        fRows = this.getFrozenHeader().querySelectorAll('tr');\n\t                        mRows = this.getMovableHeader().querySelectorAll('tr');\n\t                    }\n\t                    else {\n\t                        fRows = this.getFrozenHeader().querySelector(wrapMode === 'content' ? 'tbody' : 'thead')\n\t                            .querySelectorAll('tr');\n\t                        mRows = this.getMovableHeader().querySelector(wrapMode === 'content' ? 'tbody' : 'thead')\n\t                            .querySelectorAll('tr');\n\t                    }\n\t                    this.setWrapHeight(fRows, mRows, obj.isModeChg);\n\t                }\n\t            }\n\t        };\n\t        FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset) {\n\t            var fRowHgt;\n\t            var mRowHgt;\n\t            var isWrap = this.parent.allowTextWrap;\n\t            var wrapMode = this.parent.textWrapSettings.wrapMode;\n\t            var tHead = this.parent.getHeaderContent().querySelector('thead');\n\t            var tBody = this.parent.getHeaderContent().querySelector('tbody');\n\t            for (var i = 0, len = fRows.length; i < len; i++) {\n\t                if (isModeChg && ((wrapMode === 'header' && isContReset) || ((wrapMode === 'content' && tHead.contains(fRows[i]))\n\t                    || (wrapMode === 'header' && tBody.contains(fRows[i]))))) {\n\t                    fRows[i].style.height = null;\n\t                    mRows[i].style.height = null;\n\t                }\n\t                fRowHgt = fRows[i].offsetHeight;\n\t                mRowHgt = mRows[i].offsetHeight;\n\t                if ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt > mRowHgt)) {\n\t                    fRows[i].style.height = mRowHgt + 'px';\n\t                }\n\t                else if ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt < mRowHgt)) {\n\t                    mRows[i].style.height = fRowHgt + 'px';\n\t                }\n\t            }\n\t        };\n\t        FreezeRender.prototype.setFrozenHeader = function (ele) {\n\t            this.frozenHeader = ele;\n\t        };\n\t        FreezeRender.prototype.setMovableHeader = function (ele) {\n\t            this.movableHeader = ele;\n\t        };\n\t        FreezeRender.prototype.getFrozenHeader = function () {\n\t            return this.frozenHeader;\n\t        };\n\t        FreezeRender.prototype.getMovableHeader = function () {\n\t            return this.movableHeader;\n\t        };\n\t        FreezeRender.prototype.renderMovable = function (ele) {\n\t            var mEle = ele.cloneNode(true);\n\t            for (var i = 0; i < this.parent.frozenColumns; i++) {\n\t                mEle.removeChild(mEle.children[0]);\n\t            }\n\t            for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n\t                ele.removeChild(ele.children[ele.childElementCount - 1]);\n\t            }\n\t            return mEle;\n\t        };\n\t        return FreezeRender;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.FreezeRender = FreezeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeRowModelGenerator = (function () {\n\t        function FreezeRowModelGenerator(parent) {\n\t            this.isFrzLoad = 1;\n\t            this.parent = parent;\n\t            this.rowModelGenerator = new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n\t            if (this.parent.frozenColumns) {\n\t                for (var i = 0, len = row.length; i < len; i++) {\n\t                    if (this.isFrzLoad % 2 === 0) {\n\t                        row[i].cells = row[i].cells.slice(this.parent.frozenColumns, row[i].cells.length);\n\t                    }\n\t                    else {\n\t                        row[i].cells = row[i].cells.slice(0, this.parent.frozenColumns);\n\t                    }\n\t                }\n\t            }\n\t            this.isFrzLoad++;\n\t            return row;\n\t        };\n\t        return FreezeRowModelGenerator;\n\t    }());\n\t    exports.FreezeRowModelGenerator = FreezeRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(7), __webpack_require__(10), __webpack_require__(6), __webpack_require__(23), __webpack_require__(77), __webpack_require__(55), __webpack_require__(63), __webpack_require__(74)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, util_1, events, ej2_popups_1, ej2_buttons_1, group_1, sort_1, filter_1, resize_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnMenu = (function () {\n\t        function ColumnMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.localeText = this.setLocaleKey();\n\t            this.disableItems = [];\n\t            this.hiddenItems = [];\n\t            this.isOpen = false;\n\t            this.GROUP = 'e-icon-group';\n\t            this.UNGROUP = 'e-icon-ungroup';\n\t            this.ASCENDING = 'e-icon-ascending';\n\t            this.DESCENDING = 'e-icon-descending';\n\t            this.ROOT = 'e-columnmenu';\n\t            this.FILTER = 'e-icon-filter';\n\t            this.POP = 'e-filter-popup';\n\t            this.WRAP = 'e-col-menu';\n\t            this.CHOOSER = '_chooser_';\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnMenu.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.destroy = function () {\n\t            this.columnMenu.destroy();\n\t            this.removeEventListener();\n\t            this.unwireFilterEvents();\n\t            this.unwireEvents();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n\t            if (e.target.classList.contains('e-columnmenu')) {\n\t                if (!this.isOpen) {\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else if (this.isOpen && this.headerCell !== this.getHeaderCell(e)) {\n\t                    this.columnMenu.close();\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else {\n\t                    this.columnMenu.close();\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.openColumnMenu = function (e) {\n\t            var pos = { top: 0, left: 0 };\n\t            this.element.style.cssText = 'display:block;visibility:hidden';\n\t            var elePos = this.element.getBoundingClientRect();\n\t            this.element.style.cssText = 'display:none;visibility:visible';\n\t            this.headerCell = this.getHeaderCell(e);\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n\t                pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n\t            }\n\t            else {\n\t                if (this.parent.enableRtl) {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'left', 'bottom');\n\t                }\n\t                else {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'right', 'bottom');\n\t                    pos.left -= elePos.width;\n\t                }\n\t            }\n\t            this.columnMenu.open(pos.top, pos.left);\n\t            e.preventDefault();\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n\t            this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenuHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n\t        };\n\t        ColumnMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.wireEvents, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            if (this.isFilterItemAdded()) {\n\t                this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n\t            }\n\t            this.parent.on(events.click, this.columnMenuHandlerClick, this);\n\t        };\n\t        ColumnMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.unwireEvents);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            if (this.isFilterItemAdded()) {\n\t                this.parent.off(events.filterDialogCreated, this.filterPosition);\n\t            }\n\t            this.parent.off(events.click, this.columnMenuHandlerClick);\n\t        };\n\t        ColumnMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            this.columnMenu = new ej2_navigations_1.ContextMenu({\n\t                cssClass: 'e-grid-menu',\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                items: this.getItems(),\n\t                select: this.columnMenuItemClick.bind(this),\n\t                beforeOpen: this.columnMenuBeforeOpen.bind(this),\n\t                onClose: this.columnMenuOnClose.bind(this),\n\t                beforeItemRender: this.beforeMenuItemRender.bind(this),\n\t                beforeClose: this.columnMenuBeforeClose.bind(this)\n\t            });\n\t            this.columnMenu.appendTo(this.element);\n\t            this.wireFilterEvents();\n\t        };\n\t        ColumnMenu.prototype.wireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice && this.isFilterItemAdded()) {\n\t                ej2_base_1.EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.unwireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice && this.isFilterItemAdded()) {\n\t                ej2_base_1.EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n\t            if (this.isChooserItem(args.item)) {\n\t                var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                var column = this.parent.getColumnByField(field);\n\t                var check = ej2_buttons_1.createCheckBox(false, {\n\t                    label: args.item.text,\n\t                    checked: column.visible\n\t                });\n\t                if (this.parent.enableRtl) {\n\t                    check.classList.add('e-rtl');\n\t                }\n\t                args.element.innerHTML = '';\n\t                args.element.appendChild(check);\n\t            }\n\t            else if (args.item.id && this.getKeyFromId(args.item.id) === 'filter') {\n\t                args.element.appendChild(ej2_base_2.createElement('span', { className: 'e-icons e-caret' }));\n\t                args.element.className += 'e-filter-item e-menu-caret-icon';\n\t            }\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.parentItem) &&\n\t                this.getKeyFromId(args.parentItem.id) === 'columnChooser' &&\n\t                ej2_base_1.closest(args.event.target, '.e-menu-parent')) {\n\t                args.cancel = true;\n\t            }\n\t            else if (args.event && (ej2_base_1.closest(args.event.target, '.' + this.POP)\n\t                || (util_1.parentsUntil(args.event.target, 'e-popup')))) {\n\t                args.cancel = true;\n\t            }\n\t        };\n\t        ColumnMenu.prototype.isChooserItem = function (item) {\n\t            return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n\t                this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n\t            args.column = this.targetColumn = this.getColumn();\n\t            this.parent.trigger(events.columnMenuOpen, args);\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key) && !dItem.hide) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                    else if (item.hide) {\n\t                        this.hiddenItems.push(item.text);\n\t                    }\n\t                }\n\t            }\n\t            this.columnMenu.enableItems(this.disableItems, false);\n\t            this.columnMenu.hideItems(this.hiddenItems);\n\t        };\n\t        ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.ensureModuleInjected(group_1.Group) || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortDescending':\n\t                case 'sortAscending':\n\t                    if (this.parent.allowSorting && this.parent.ensureModuleInjected(sort_1.Sort)\n\t                        && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (ele) {\n\t                            if (ele.field === _this.targetColumn.field\n\t                                && ele.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'filter':\n\t                    status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar')\n\t                        && this.parent.ensureModuleInjected(filter_1.Filter));\n\t            }\n\t            return status;\n\t        };\n\t        ColumnMenu.prototype.columnMenuItemClick = function (args) {\n\t            var item = this.isChooserItem(args.item) ? 'columnChooser' : this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'columnChooser':\n\t                    var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                    var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\t                    if (checkbox && checkbox.classList.contains('e-check')) {\n\t                        checkbox.classList.remove('e-check');\n\t                        this.parent.hideColumn(key, 'field');\n\t                    }\n\t                    else if (checkbox) {\n\t                        this.parent.showColumn(key, 'field');\n\t                        checkbox.classList.add('e-check');\n\t                    }\n\t                    break;\n\t                case 'filter':\n\t                    this.getFilter(args.element, args.item.id);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.columnMenuClick, args);\n\t        };\n\t        ColumnMenu.prototype.columnMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.columnMenu.enableItems(this.disableItems);\n\t                this.disableItems = [];\n\t                this.columnMenu.showItems(this.hiddenItems);\n\t                this.hiddenItems = [];\n\t                if (this.isFilterPopupOpen()) {\n\t                    this.getFilter(args.element, args.element.id, true);\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit', 'sortAscending', 'sortDescending', 'group', 'ungroup', 'columnChooser', 'filter'];\n\t        };\n\t        ColumnMenu.prototype.getItems = function () {\n\t            var items = [];\n\t            var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\t            for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n\t                var item = defultItems_1[_i];\n\t                if (typeof item === 'string') {\n\t                    if (item === 'columnChooser') {\n\t                        var col = this.getDefaultItem(item);\n\t                        col.items = this.createChooserItems();\n\t                        items.push(col);\n\t                    }\n\t                    else {\n\t                        items.push(this.getDefaultItem(item));\n\t                    }\n\t                }\n\t                else {\n\t                    items.push(item);\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.getDefaultItem = function (item) {\n\t            var menuItem = {};\n\t            switch (item) {\n\t                case 'sortAscending':\n\t                    menuItem = { iconCss: this.ASCENDING };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { iconCss: this.DESCENDING };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { iconCss: this.GROUP };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { iconCss: this.UNGROUP };\n\t                    break;\n\t                case 'filter':\n\t                    menuItem = { iconCss: this.FILTER };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ColumnMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ColumnMenu.prototype.generateID = function (item, append) {\n\t            return this.gridID + '_colmenu_' + (append ? append + item : item);\n\t        };\n\t        ColumnMenu.prototype.getKeyFromId = function (id, append) {\n\t            return id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenu = function () {\n\t            return this.element;\n\t        };\n\t        ColumnMenu.prototype.getModuleName = function () {\n\t            return 'columnMenu';\n\t        };\n\t        ColumnMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'columnChooser': 'Columnchooser',\n\t                'filter': 'FilterMenu'\n\t            };\n\t        };\n\t        ColumnMenu.prototype.getHeaderCell = function (e) {\n\t            return ej2_base_1.closest(e.target, 'th.e-headercell');\n\t        };\n\t        ColumnMenu.prototype.getColumn = function () {\n\t            if (this.headerCell) {\n\t                var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ColumnMenu.prototype.createChooserItems = function () {\n\t            var items = [];\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.showInColumnChooser) {\n\t                    items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.appendFilter = function (e) {\n\t            var filter = 'filter';\n\t            if (!this.defaultItems[filter]) {\n\t                return;\n\t            }\n\t            else {\n\t                var key = this.defaultItems[filter].id;\n\t                if (ej2_base_1.closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n\t                    this.getFilter(e.target, key);\n\t                }\n\t                else if (!ej2_base_1.closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n\t                    this.getFilter(e.target, key, true);\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n\t            var filterPopup = this.getFilterPop();\n\t            if (filterPopup) {\n\t                filterPopup.style.display = isClose ? 'none' : 'block';\n\t            }\n\t            else {\n\t                this.parent.notify(events.filterOpen, {\n\t                    col: this.targetColumn, target: target, isClose: isClose, id: id\n\t                });\n\t            }\n\t        };\n\t        ColumnMenu.prototype.setPosition = function (li, ul) {\n\t            var gridPos = this.parent.element.getBoundingClientRect();\n\t            var liPos = li.getBoundingClientRect();\n\t            var left = liPos.left - gridPos.left;\n\t            var top = liPos.top - gridPos.top;\n\t            if (gridPos.height < top) {\n\t                top = top - ul.offsetHeight + liPos.height;\n\t            }\n\t            else if (gridPos.height < top + ul.offsetHeight) {\n\t                top = gridPos.height - ul.offsetHeight;\n\t            }\n\t            if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n\t                top = window.innerHeight - ul.offsetHeight - gridPos.top;\n\t            }\n\t            left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n\t            if (gridPos.width <= left + ul.offsetWidth) {\n\t                left -= liPos.width + ul.offsetWidth;\n\t            }\n\t            else if (left < 0) {\n\t                left += ul.offsetWidth + liPos.width;\n\t            }\n\t            ul.style.top = top + 'px';\n\t            ul.style.left = left + 'px';\n\t        };\n\t        ColumnMenu.prototype.filterPosition = function (e) {\n\t            var filterPopup = this.getFilterPop();\n\t            filterPopup.classList.add(this.WRAP);\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                var disp = filterPopup.style.display;\n\t                filterPopup.style.cssText += 'display:block;visibility:hidden';\n\t                var li = this.element.querySelector('.' + this.FILTER);\n\t                if (li) {\n\t                    this.setPosition(li.parentElement, filterPopup);\n\t                    filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefault = function () {\n\t            var items = [];\n\t            if (this.parent.ensureModuleInjected(resize_1.Resize)) {\n\t                items.push('autoFitAll');\n\t                items.push('autoFit');\n\t            }\n\t            if (this.parent.allowGrouping && this.parent.ensureModuleInjected(group_1.Group)) {\n\t                items.push('group');\n\t                items.push('ungroup');\n\t            }\n\t            if (this.parent.allowSorting && this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                items.push('sortAscending');\n\t                items.push('sortDescending');\n\t            }\n\t            items.push('columnChooser');\n\t            if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar') &&\n\t                this.parent.ensureModuleInjected(filter_1.Filter)) {\n\t                items.push('filter');\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.isFilterPopupOpen = function () {\n\t            var filterPopup = this.getFilterPop();\n\t            return filterPopup && filterPopup.style.display !== 'none';\n\t        };\n\t        ColumnMenu.prototype.getFilterPop = function () {\n\t            return this.parent.element.querySelector('.' + this.POP);\n\t        };\n\t        ColumnMenu.prototype.isFilterItemAdded = function () {\n\t            return (this.parent.columnMenuItems &&\n\t                this.parent.columnMenuItems.indexOf('filter') >= 0) || !this.parent.columnMenuItems;\n\t        };\n\t        return ColumnMenu;\n\t    }());\n\t    exports.ColumnMenu = ColumnMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(25), __webpack_require__(12), __webpack_require__(13), __webpack_require__(26), __webpack_require__(27), __webpack_require__(64), __webpack_require__(29), __webpack_require__(11), __webpack_require__(64), __webpack_require__(30), __webpack_require__(31), __webpack_require__(87), __webpack_require__(88), __webpack_require__(86), __webpack_require__(85), __webpack_require__(89), __webpack_require__(91), __webpack_require__(90), __webpack_require__(84), __webpack_require__(96), __webpack_require__(103), __webpack_require__(106), __webpack_require__(66), __webpack_require__(68), __webpack_require__(70), __webpack_require__(69), __webpack_require__(67)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, datepicker_edit_cell_1, command_column_renderer_1, freeze_renderer_1, string_filter_ui_1, number_filter_ui_1, date_filter_ui_1, boolean_filter_ui_1, filter_menu_operator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t    __export(datepicker_edit_cell_1);\n\t    __export(command_column_renderer_1);\n\t    __export(freeze_renderer_1);\n\t    __export(string_filter_ui_1);\n\t    __export(number_filter_ui_1);\n\t    __export(date_filter_ui_1);\n\t    __export(boolean_filter_ui_1);\n\t    __export(filter_menu_operator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(36), __webpack_require__(37), __webpack_require__(16), __webpack_require__(19), __webpack_require__(107)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1, freeze_row_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t    __export(freeze_row_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(57), __webpack_require__(62), __webpack_require__(58), __webpack_require__(59)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmZjgxMWJlMDQwZjAxZDBhYTZmMyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS91dGlsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2VudW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1tZXJnZS1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NoZWNrYm94LWZpbHRlci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZm9jdXMtc3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLWNob29zZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jbGlwYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL3BhZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9udW1lcmljLWNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9leHRlcm5hbC1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1tZW51LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N0cmluZy1maWx0ZXItdWkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLW1lbnUtb3BlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtYmVyLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kYXRlLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy90b29sYmFyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9pbmxpbmUtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYmF0Y2gtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2V4cG9ydC1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wZGYtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb21tYW5kLWNvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbnRleHQtbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2ZyZWV6ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZnJlZXplLXJvdy1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDVkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLG1DQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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YTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELFNBQVM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLFlBQVk7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGtDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxrQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUM5eUREO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ2pERCxnRDs7Ozs7O0FDQUEsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDeklEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsTUFBTSwwQkFBMEI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDLFdBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLHNDQUFzQyxFQUFFO0FBQ3pHO0FBQ0EsZ0RBQStDLDBD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QUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRSxTQUFTO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCx5RUFBeUU7QUFDM0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsU0FBUztBQUM5RDtBQUNBLDJEQUEwRCxVQUFVO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELFNBQVM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZ0UsOEJBQThCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixzQkFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELGdCQUFnQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixpQkFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakIsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNwREQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxhQUFhO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDM1JEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtB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Z0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUFzQyxtQkFBbUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCLGNBQWE7QUFDYjtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzNWRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQix5QkFBeUI7QUFDcEQ7QUFDQTtBQUNBLDZCQUE0QjtBQUM1QixrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQ7QUFDdkQsY0FBYTtBQUNiO0FBQ0E7QUFDQSx1RUFBc0Usa0NBQWtDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDN09EO0FBQ0E7QUFDQSxtREFBa0QsY0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLGdCQUFnQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE0RTtBQUM1RSw0QkFBMkI7QUFDM0IsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsZ0JBQWdCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQThELGtCQUFrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsZ0JBQWdCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9IQUFtSCxnQkFBZ0I7QUFDbkk7QUFDQSxzREFBcUQsdUJBQXVCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCwwQkFBMEI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELGVBQWU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBa0Usd0JBQXdCLHFDQUFxQztBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDbmFEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELDJFQUEyRTtBQUM3SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCx3Q0FBd0M7QUFDL0Y7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBK0Usc0VBQXNFLHdCQUF3QixFQUFFO0FBQy9LLGtGQUFpRiwwRUFBMEUsd0JBQXdCLEVBQUU7QUFDckw7QUFDQTtBQUNBLDhFQUE2RSw4QkFBOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLGdFQUFnRTtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE2RCx1Q0FBdUMsRUFBRTtBQUN0RztBQUNBO0FBQ0EsOERBQTZELHdDQUF3QyxFQUFFO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxrRUFBa0U7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDM09EO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQixnRUFBK0QsOENBQThDO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRCxTQUFTO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE2RSw4QkFBOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MseUNBQXlDO0FBQ3hGO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsU0FBUztBQUM5RDtBQUNBO0FBQ0Esd0RBQXVELCtDQUErQztBQUN0RztBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ3ZMRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRDtBQUNwRCxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBeUQsb0VBQW9FO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsUUFBUTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsU0FBUztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsU0FBUztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxTQUFTO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELHVDQUF1QyxtQkFBbUIsRUFBRTtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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U0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNuTEQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBbUQsd0JBQXdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsb0NBQW9DO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdIQUErRztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELDRCQUE0QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0EsOENBQTZDLHFCQUFxQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDdlFEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDO0FBQy9DO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHdCQUF3QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxvQ0FBb0M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLG9CQUFvQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBbUY7QUFDbkY7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDL1BEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlC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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBLG9EQUFtRCxnQkFBZ0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsRUFBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQiwyQkFBMkI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLDJCQUEyQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBLGdDQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3o2QkQsa0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3ZFRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBdUU7QUFDdkUsZ0VBQStELGlFQUFpRTtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxnQkFBZ0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywyRkFBMkY7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN0RUQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELDZCQUE2QjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQStELGdCQUFnQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLGdCQUFnQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzNkRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O2lFQ1BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ2pDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDWEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQyIsImZpbGUiOiJlajItZ3JpZHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzI0X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNjFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83MV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzczX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOThfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMDFfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBmZjgxMWJlMDQwZjAxZDBhYTZmMyIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZ3JpZC9pbmRleFwiLCBcIi4vcGFnZXIvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb21tb25cIiwgXCIuL2FjdGlvbnNcIiwgXCIuL21vZGVsc1wiLCBcIi4vcmVuZGVyZXJcIiwgXCIuL3NlcnZpY2VzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29tbW9uXzEsIGFjdGlvbnNfMSwgbW9kZWxzXzEsIHJlbmRlcmVyXzEsIHNlcnZpY2VzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbW1vbl8xKTtcbiAgICBfX2V4cG9ydChhY3Rpb25zXzEpO1xuICAgIF9fZXhwb3J0KG1vZGVsc18xKTtcbiAgICBfX2V4cG9ydChyZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlc18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2Jhc2UvZ3JpZFwiLCBcIi4vYmFzZS9lbnVtXCIsIFwiLi9iYXNlL3V0aWxcIiwgXCIuL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBncmlkXzEsIGVudW1fMSwgdXRpbF8xLCBjb25zdGFudF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChncmlkXzEpO1xuICAgIF9fZXhwb3J0KGVudW1fMSk7XG4gICAgX19leHBvcnQodXRpbF8xKTtcbiAgICBfX2V4cG9ydChjb25zdGFudF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4vdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9yZW5kZXJcIiwgXCIuL2VudW1cIiwgXCIuLi9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvc2VydmljZS1sb2NhdG9yXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIiwgXCIuLi9zZXJ2aWNlcy9mb2N1cy1zdHJhdGVneVwiLCBcIi4uL21vZGVscy9wYWdlLXNldHRpbmdzXCIsIFwiLi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4uL2FjdGlvbnMvc2hvdy1oaWRlXCIsIFwiLi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuLi9hY3Rpb25zL3ByaW50XCIsIFwiLi4vbW9kZWxzL2FnZ3JlZ2F0ZVwiLCBcIi4uL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuLi9hY3Rpb25zL2NsaXBib2FyZFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBldmVudHMsIHJlbmRlcl8xLCBlbnVtXzEsIGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSwgc2VydmljZV9sb2NhdG9yXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCByZW5kZXJlcl9mYWN0b3J5XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSwgYXJpYV9zZXJ2aWNlXzEsIGZvY3VzX3N0cmF0ZWd5XzEsIHBhZ2Vfc2V0dGluZ3NfMSwgc2VsZWN0aW9uXzEsIHNlYXJjaF8xLCBzaG93X2hpZGVfMSwgc2Nyb2xsXzEsIHByaW50XzEsIGFnZ3JlZ2F0ZV8xLCBjb2x1bW5fY2hvb3Nlcl8xLCBjbGlwYm9hcmRfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydERlc2NyaXB0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU29ydERlc2NyaXB0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnREZXNjcmlwdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFNvcnREZXNjcmlwdG9yLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBTb3J0RGVzY3JpcHRvci5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBTb3J0RGVzY3JpcHRvcjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIGV4cG9ydHMuU29ydERlc2NyaXB0b3IgPSBTb3J0RGVzY3JpcHRvcjtcbiAgICB2YXIgU29ydFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNvcnRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU29ydFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBTb3J0RGVzY3JpcHRvcilcbiAgICAgICAgXSwgU29ydFNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgICAgICBdLCBTb3J0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93VW5zb3J0XCIsIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBTb3J0U2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBleHBvcnRzLlNvcnRTZXR0aW5ncyA9IFNvcnRTZXR0aW5ncztcbiAgICB2YXIgUHJlZGljYXRlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFByZWRpY2F0ZSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUHJlZGljYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJvcGVyYXRvclwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwibWF0Y2hDYXNlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwicHJlZGljYXRlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7fSlcbiAgICAgICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJhY3R1YWxGaWx0ZXJWYWx1ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoe30pXG4gICAgICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiYWN0dWFsT3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiZWpwcmVkaWNhdGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJtYXRjaGNhc2VcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJpZ25vcmVDYXNlXCIsIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBQcmVkaWNhdGU7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBleHBvcnRzLlByZWRpY2F0ZSA9IFByZWRpY2F0ZTtcbiAgICB2YXIgRmlsdGVyU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmlsdGVyU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBQcmVkaWNhdGUpXG4gICAgICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnZmlsdGVyYmFyJylcbiAgICAgICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RmlsdGVyQmFyU3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxNTAwKVxuICAgICAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaW1tZWRpYXRlTW9kZURlbGF5XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGVyYXRvcnNcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIEZpbHRlclNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgZXhwb3J0cy5GaWx0ZXJTZXR0aW5ncyA9IEZpbHRlclNldHRpbmdzO1xuICAgIHZhciBTZWxlY3Rpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWxlY3Rpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU2VsZWN0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdyb3cnKVxuICAgICAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2Zsb3cnKVxuICAgICAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGlvbk1vZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdzaW5nbGUnKVxuICAgICAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjaGVja2JveE9ubHlcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwicGVyc2lzdFNlbGVjdGlvblwiLCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvblNldHRpbmdzID0gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIFNlYXJjaFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNlYXJjaFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZWFyY2hTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJmaWVsZHNcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgICAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwia2V5XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnY29udGFpbnMnKVxuICAgICAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJpZ25vcmVDYXNlXCIsIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBTZWFyY2hTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIGV4cG9ydHMuU2VhcmNoU2V0dGluZ3MgPSBTZWFyY2hTZXR0aW5ncztcbiAgICB2YXIgUm93RHJvcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJvd0Ryb3BTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUm93RHJvcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIFJvd0Ryb3BTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFyZ2V0SURcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIFJvd0Ryb3BTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIGV4cG9ydHMuUm93RHJvcFNldHRpbmdzID0gUm93RHJvcFNldHRpbmdzO1xuICAgIHZhciBUZXh0V3JhcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRleHRXcmFwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRleHRXcmFwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdib3RoJylcbiAgICAgICAgXSwgVGV4dFdyYXBTZXR0aW5ncy5wcm90b3R5cGUsIFwid3JhcE1vZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIFRleHRXcmFwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBleHBvcnRzLlRleHRXcmFwU2V0dGluZ3MgPSBUZXh0V3JhcFNldHRpbmdzO1xuICAgIHZhciBHcm91cFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dEcm9wQXJlYVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dUb2dnbGVCdXR0b25cIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93R3JvdXBlZENvbHVtblwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICAgICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd1VuZ3JvdXBCdXR0b25cIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJkaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICAgICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJjYXB0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIEdyb3VwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBleHBvcnRzLkdyb3VwU2V0dGluZ3MgPSBHcm91cFNldHRpbmdzO1xuICAgIHZhciBFZGl0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRWRpdFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFZGl0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93QWRkaW5nXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0VkaXRpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RGVsZXRpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdub3JtYWwnKVxuICAgICAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dFZGl0T25EYmxDbGlja1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICAgICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93Q29uZmlybURpYWxvZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2dcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIEVkaXRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIGV4cG9ydHMuRWRpdFNldHRpbmdzID0gRWRpdFNldHRpbmdzO1xuICAgIHZhciBHcmlkID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyaWQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyaWQob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5zb3J0ZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICBfdGhpcy5pblZpZXdJbmRleGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5mcmVlemVSZWZyZXNoID0gZWoyX2Jhc2VfMS5Db21wb25lbnQucHJvdG90eXBlLnJlZnJlc2g7XG4gICAgICAgICAgICBfdGhpcy5tZXJnZUNlbGxzID0ge307XG4gICAgICAgICAgICBfdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmZpbHRlck9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ2NvbnRhaW5zJywgZW5kc1dpdGg6ICdlbmRzd2l0aCcsIGVxdWFsOiAnZXF1YWwnLCBncmVhdGVyVGhhbjogJ2dyZWF0ZXJ0aGFuJywgZ3JlYXRlclRoYW5PckVxdWFsOiAnZ3JlYXRlcnRoYW5vcmVxdWFsJyxcbiAgICAgICAgICAgICAgICBsZXNzVGhhbjogJ2xlc3N0aGFuJywgbGVzc1RoYW5PckVxdWFsOiAnbGVzc3RoYW5vcmVxdWFsJywgbm90RXF1YWw6ICdub3RlcXVhbCcsIHN0YXJ0c1dpdGg6ICdzdGFydHN3aXRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRMb2NhbGUgPSB7XG4gICAgICAgICAgICAgICAgRW1wdHlSZWNvcmQ6ICdObyByZWNvcmRzIHRvIGRpc3BsYXknLFxuICAgICAgICAgICAgICAgIFRydWU6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICBGYWxzZTogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBJbnZhbGlkRmlsdGVyTWVzc2FnZTogJ0ludmFsaWQgRmlsdGVyIERhdGEnLFxuICAgICAgICAgICAgICAgIEdyb3VwRHJvcEFyZWE6ICdEcmFnIGEgY29sdW1uIGhlYWRlciBoZXJlIHRvIGdyb3VwIGl0cyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIFVuR3JvdXA6ICdDbGljayBoZXJlIHRvIHVuZ3JvdXAnLFxuICAgICAgICAgICAgICAgIEdyb3VwRGlzYWJsZTogJ0dyb3VwaW5nIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgRmlsdGVyYmFyVGl0bGU6ICdcXCdzIGZpbHRlciBiYXIgY2VsbCcsXG4gICAgICAgICAgICAgICAgRW1wdHlEYXRhU291cmNlRXJyb3I6ICdEYXRhU291cmNlIG11c3Qgbm90IGJlIGVtcHR5IGF0IGluaXRpYWwgbG9hZCBzaW5jZSBjb2x1bW5zIGFyZSBnZW5lcmF0ZWQgZnJvbSBkYXRhU291cmNlIGluIEF1dG9HZW5lcmF0ZSBDb2x1bW4gR3JpZCcsXG4gICAgICAgICAgICAgICAgQWRkOiAnQWRkJyxcbiAgICAgICAgICAgICAgICBFZGl0OiAnRWRpdCcsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBVcGRhdGU6ICdVcGRhdGUnLFxuICAgICAgICAgICAgICAgIERlbGV0ZTogJ0RlbGV0ZScsXG4gICAgICAgICAgICAgICAgUHJpbnQ6ICdQcmludCcsXG4gICAgICAgICAgICAgICAgUGRmZXhwb3J0OiAnUERGIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgRXhjZWxleHBvcnQ6ICdFeGNlbCBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIFdvcmRleHBvcnQ6ICdXb3JkIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgQ3N2ZXhwb3J0OiAnQ1NWIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgU2VhcmNoOiAnU2VhcmNoJyxcbiAgICAgICAgICAgICAgICBTYXZlOiAnU2F2ZScsXG4gICAgICAgICAgICAgICAgSXRlbTogJ2l0ZW0nLFxuICAgICAgICAgICAgICAgIEl0ZW1zOiAnaXRlbXMnLFxuICAgICAgICAgICAgICAgIEVkaXRPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGVkaXQgb3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBEZWxldGVPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGRlbGV0ZSBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIFNhdmVCdXR0b246ICdTYXZlJyxcbiAgICAgICAgICAgICAgICBPS0J1dHRvbjogJ09LJyxcbiAgICAgICAgICAgICAgICBDYW5jZWxCdXR0b246ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIEVkaXRGb3JtVGl0bGU6ICdEZXRhaWxzIG9mICcsXG4gICAgICAgICAgICAgICAgQWRkRm9ybVRpdGxlOiAnQWRkIE5ldyBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIEJhdGNoU2F2ZUNvbmZpcm06ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2F2ZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlTG9zdENoYW5nZXM6ICdVbnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/JyxcbiAgICAgICAgICAgICAgICBDb25maXJtRGVsZXRlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIERlbGV0ZSBSZWNvcmQ/JyxcbiAgICAgICAgICAgICAgICBDYW5jZWxFZGl0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIENhbmNlbCB0aGUgY2hhbmdlcz8nLFxuICAgICAgICAgICAgICAgIENob29zZUNvbHVtbnM6ICdDaG9vc2UgQ29sdW1uJyxcbiAgICAgICAgICAgICAgICBTZWFyY2hDb2x1bW5zOiAnc2VhcmNoIGNvbHVtbnMnLFxuICAgICAgICAgICAgICAgIE1hdGNoczogJ05vIE1hdGNoZXMgRm91bmQnLFxuICAgICAgICAgICAgICAgIEZpbHRlckJ1dHRvbjogJ0ZpbHRlcicsXG4gICAgICAgICAgICAgICAgQ2xlYXJCdXR0b246ICdDbGVhcicsXG4gICAgICAgICAgICAgICAgU3RhcnRzV2l0aDogJ1N0YXJ0c1dpdGgnLFxuICAgICAgICAgICAgICAgIEVuZHNXaXRoOiAnRW5kc1dpdGgnLFxuICAgICAgICAgICAgICAgIENvbnRhaW5zOiAnQ29udGFpbnMnLFxuICAgICAgICAgICAgICAgIEVxdWFsOiAnRXF1YWwnLFxuICAgICAgICAgICAgICAgIE5vdEVxdWFsOiAnTm90RXF1YWwnLFxuICAgICAgICAgICAgICAgIExlc3NUaGFuOiAnTGVzc1RoYW4nLFxuICAgICAgICAgICAgICAgIExlc3NUaGFuT3JFcXVhbDogJ0xlc3NUaGFuT3JFcXVhbCcsXG4gICAgICAgICAgICAgICAgR3JlYXRlclRoYW46ICdHcmVhdGVyVGhhbicsXG4gICAgICAgICAgICAgICAgR3JlYXRlclRoYW5PckVxdWFsOiAnR3JlYXRlclRoYW5PckVxdWFsJyxcbiAgICAgICAgICAgICAgICBDaG9vc2VEYXRlOiAnQ2hvb3NlIGEgRGF0ZScsXG4gICAgICAgICAgICAgICAgRW50ZXJWYWx1ZTogJ0VudGVyIHRoZSB2YWx1ZScsXG4gICAgICAgICAgICAgICAgQ29weTogJ0NvcHknLFxuICAgICAgICAgICAgICAgIEdyb3VwOiAnR3JvdXAgYnkgdGhpcyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIFVuZ3JvdXA6ICdVbmdyb3VwIGJ5IHRoaXMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBhdXRvRml0QWxsOiAnQXV0byBGaXQgYWxsIGNvbHVtbnMnLFxuICAgICAgICAgICAgICAgIGF1dG9GaXQ6ICdBdXRvIEZpdCB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgRXhwb3J0OiAnRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBGaXJzdFBhZ2U6ICdGaXJzdCBQYWdlJyxcbiAgICAgICAgICAgICAgICBMYXN0UGFnZTogJ0xhc3QgUGFnZScsXG4gICAgICAgICAgICAgICAgUHJldmlvdXNQYWdlOiAnUHJldmlvdXMgUGFnZScsXG4gICAgICAgICAgICAgICAgTmV4dFBhZ2U6ICdOZXh0IFBhZ2UnLFxuICAgICAgICAgICAgICAgIFNvcnRBc2NlbmRpbmc6ICdTb3J0IEFzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgU29ydERlc2NlbmRpbmc6ICdTb3J0IERlc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgIEVkaXRSZWNvcmQ6ICdFZGl0IFJlY29yZCcsXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVjb3JkOiAnRGVsZXRlIFJlY29yZCcsXG4gICAgICAgICAgICAgICAgRmlsdGVyTWVudTogJ0ZpbHRlcicsXG4gICAgICAgICAgICAgICAgQ29sdW1uY2hvb3NlcjogJ0NvbHVtbnMnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBkb3duQXJyb3c6ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHVwQXJyb3c6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICByaWdodEFycm93OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbGVmdEFycm93OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdERvd246ICdzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0VXA6ICdzaGlmdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFJpZ2h0OiAnc2hpZnQrcmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRMZWZ0OiAnc2hpZnQrbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlc2NhcGU6ICdlc2NhcGUnLFxuICAgICAgICAgICAgICAgIGN0cmxIb21lOiAnY3RybCtob21lJyxcbiAgICAgICAgICAgICAgICBjdHJsRW5kOiAnY3RybCtlbmQnLFxuICAgICAgICAgICAgICAgIHBhZ2VVcDogJ3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgcGFnZURvd246ICdwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VVcDogJ2N0cmwrYWx0K3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VEb3duOiAnY3RybCthbHQrcGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VVcDogJ2FsdCtwYWdldXAnLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VEb3duOiAnYWx0K3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBhbHREb3duQXJyb3c6ICdhbHQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBhbHRVcEFycm93OiAnYWx0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxEb3duQXJyb3c6ICdjdHJsK2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFVwQXJyb3c6ICdjdHJsK3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzQTogJ2N0cmwrQScsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNQOiAnY3RybCtQJyxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6ICdpbnNlcnQnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgZjI6ICdmMicsXG4gICAgICAgICAgICAgICAgZW50ZXI6ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgY3RybEVudGVyOiAnY3RybCtlbnRlcicsXG4gICAgICAgICAgICAgICAgc2hpZnRFbnRlcjogJ3NoaWZ0K2VudGVyJyxcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIHNoaWZ0VGFiOiAnc2hpZnQrdGFiJyxcbiAgICAgICAgICAgICAgICBzcGFjZTogJ3NwYWNlJyxcbiAgICAgICAgICAgICAgICBjdHJsUGx1c0M6ICdjdHJsK0MnLFxuICAgICAgICAgICAgICAgIGN0cmxTaGlmdFBsdXNIOiAnY3RybCtzaGlmdCtIJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0VmFsdWUoJ21lcmdlUGVyc2lzdERhdGEnLCBfdGhpcy5tZXJnZVBlcnNpc3RHcmlkRGF0YSwgX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ3BhZ2VTZXR0aW5ncycsICdzb3J0U2V0dGluZ3MnLFxuICAgICAgICAgICAgICAgICdmaWx0ZXJTZXR0aW5ncycsICdncm91cFNldHRpbmdzJywgJ2NvbHVtbnMnLCAnc2VhcmNoU2V0dGluZ3MnLCAnc2VsZWN0ZWRSb3dJbmRleCddO1xuICAgICAgICAgICAgdmFyIGlnbm9yZU9uUGVyc2lzdCA9IHtcbiAgICAgICAgICAgICAgICBwYWdlU2V0dGluZ3M6IFsndGVtcGxhdGUnLCAncGFnZVNpemVzJywgJ2VuYWJsZVF1ZXJ5U3RyaW5nJywgJ3RvdGFsUmVjb3Jkc0NvdW50JywgJ3BhZ2VDb3VudCddLFxuICAgICAgICAgICAgICAgIGZpbHRlclNldHRpbmdzOiBbJ3R5cGUnLCAnbW9kZScsICdzaG93RmlsdGVyQmFyU3RhdHVzJywgJ2ltbWVkaWF0ZU1vZGVEZWxheSddLFxuICAgICAgICAgICAgICAgIGdyb3VwU2V0dGluZ3M6IFsnc2hvd0Ryb3BBcmVhJywgJ3Nob3dUb2dnbGVCdXR0b24nLCAnc2hvd0dyb3VwZWRDb2x1bW4nLCAnc2hvd1VuZ3JvdXBCdXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAnZGlzYWJsZVBhZ2VXaXNlQWdncmVnYXRlcycsICdoaWRlQ2FwdGlvbkNvdW50J10sXG4gICAgICAgICAgICAgICAgc2VhcmNoU2V0dGluZ3M6IFsnZmllbGRzJywgJ29wZXJhdG9yJywgJ2lnbm9yZUNhc2UnXSxcbiAgICAgICAgICAgICAgICBzb3J0U2V0dGluZ3M6IFtdLCBjb2x1bW5zOiBbXSwgc2VsZWN0ZWRSb3dJbmRleDogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaWdub3JlT25Db2x1bW4gPSBbJ2ZpbHRlcicsICdlZGl0JywgJ2ZpbHRlckJhclRlbXBsYXRlJywgJ2hlYWRlclRlbXBsYXRlJywgJ3RlbXBsYXRlJyxcbiAgICAgICAgICAgICAgICAnY29tbWFuZFRlbXBsYXRlJywgJ2NvbW1hbmRzJ107XG4gICAgICAgICAgICBrZXlFbnRpdHkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE9iamVjdCA9IF90aGlzW3ZhbHVlXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gaWdub3JlT25QZXJzaXN0W3ZhbHVlXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnRPYmplY3RbdmFsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlSW5BcnJheXMoaWdub3JlT25Db2x1bW4sIHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaWdub3JlSW5BcnJheXMgPSBmdW5jdGlvbiAoaWdub3JlT25Db2x1bW4sIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZ25vcmVJbkNvbHVtbihpZ25vcmVPbkNvbHVtbiwgY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWdub3JlSW5BcnJheXMoaWdub3JlT25Db2x1bW4sIGNvbHVtbi5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlnbm9yZUluQ29sdW1uKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pZ25vcmVJbkNvbHVtbiA9IGZ1bmN0aW9uIChpZ25vcmVPbkNvbHVtbiwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZ25vcmVPbkNvbHVtbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgY29sdW1uW3ZhbF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuZmlsdGVyU2V0dGluZ3MsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0V4Y2VsRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnRXhjZWxFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGRmRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnUGRmRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc29ydFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMucGFnZVNldHRpbmdzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVtYmVyOiAncmVzaXplJyxcbiAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncmVvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jvd0RyYWdBbmREcm9wJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5ncm91cFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7IG1lbWJlcjogJ2FnZ3JlZ2F0ZScsIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdkZXRhaWxSb3cnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIgfHwgdGhpcy50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd0b29sYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVWaXJ0dWFsaXphdGlvbiB8fCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAndmlydHVhbHNjcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZnJvemVuQ29sdW1ucyB8fCB0aGlzLmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goeyBtZW1iZXI6ICdmcmVlemUnLCBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4dGVuZFJlcXVpcmVkTW9kdWxlcyhtb2R1bGVzKTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5leHRlbmRSZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAobW9kdWxlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDb21tYW5kQ29sdW1uKHRoaXMuY29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdjb21tYW5kQ29sdW1uJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0TWVudUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnY29udGV4dE1lbnUnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW5NZW51KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnY29sdW1uTWVudScsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gbmV3IHNlcnZpY2VfbG9jYXRvcl8xLlNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VydmljZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZWxlbWVudCwgeyByb2xlOiAnZ3JpZCcgfSk7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzEuY3JlYXRlU3Bpbm5lcih7IHRhcmdldDogdGhpcy5lbGVtZW50IH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUgPSBuZXcgcmVuZGVyXzEuUmVuZGVyKHRoaXMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5nZXRNZWRpYUNvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoTW9kdWxlID0gbmV3IHNlYXJjaF8xLlNlYXJjaCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbmV3IHNjcm9sbF8xLlNjcm9sbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyTW9kdWxlID0gbmV3IGNvbHVtbl9jaG9vc2VyXzEuQ29sdW1uQ2hvb3Nlcih0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbml0aWFsTG9hZCwge30pO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50cy5sb2FkKTtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NNb2RlbCgpO1xuICAgICAgICAgICAgdGhpcy5ncmlkUmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGVmYXVsdEN1cnNvcigpO1xuICAgICAgICAgICAgdGhpcy5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluaXRpYWxFbmQsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2hvd1NwaW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzEuc2hvd1NwaW5uZXIodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaGlkZVNwaW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzEuaGlkZVNwaW5uZXIodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TWVkaWFDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdjb2wgPSB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFNob3dIaWRlU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnc2hvd0hpZGVTZXJ2aWNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGdjb2wpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBnY29sLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGdjb2xbaW5kZXhdLmhpZGVBdE1lZGlhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVkaWFDb2wucHVzaChnY29sW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEoZ2NvbFtpbmRleF0uaGlkZUF0TWVkaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyeVVwZGF0ZShpbmRleCwgbWVkaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZExpc3RlbmVyKHRoaXMubWVkaWFRdWVyeVVwZGF0ZS5iaW5kKHRoaXMsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLm1lZGlhUXVlcnlVcGRhdGUgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNZWRpYVF1ZXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldENvbHVtbnMoKVtjb2x1bW5JbmRleF07XG4gICAgICAgICAgICBjb2wudmlzaWJsZSA9IGUubWF0Y2hlcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbExvYWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhjb2wuaGVhZGVyVGV4dCwgJ2hlYWRlclRleHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLmhpZGUoY29sLmhlYWRlclRleHQsICdoZWFkZXJUZXh0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoTWVkaWFDb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01lZGlhUXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWVkaWFRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxMb2FkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXZlbnRJbml0aWFsaXplciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGVzdHJveSwge30pO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95RGVwZW5kZW50TW9kdWxlcygpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmVsZW1lbnQsIFtdLCBbJ2UtcnRsJywgJ2UtZ3JpZGhvdmVyJywgJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnLCAnZS1kZXZpY2UnXSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlc3Ryb3lEZXBlbmRlbnRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JpZCc7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciByZXF1aXJlUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVHcmlkUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ3Vyc29yO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1BhZ2luZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncGFnZXInLCBlbmFibGU6IHRoaXMuYWxsb3dQYWdpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZVNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3BhZ2VyJywgcHJvcGVydGllczogbmV3UHJvcC5wYWdlU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSkgJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqLnNldExvY2FsZShuZXdQcm9wLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5zZXRDdWx0dXJlKG5ld1Byb3AubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dTb3J0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdzb3J0JywgZW5hYmxlOiB0aGlzLmFsbG93U29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0ZpbHRlcmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZmlsdGVyJywgZW5hYmxlOiB0aGlzLmFsbG93RmlsdGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdzY3JvbGwnLCBwcm9wZXJ0aWVzOiB7IHdpZHRoOiBuZXdQcm9wLndpZHRoLCBoZWlnaHQ6IG5ld1Byb3AuaGVpZ2h0IH0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSZW9yZGVyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdyZW9yZGVyJywgZW5hYmxlOiB0aGlzLmFsbG93UmVvcmRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jvd0RyYWdBbmREcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdyb3dEcmFnQW5kRHJvcCcsIGVuYWJsZTogdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Jvd1RlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RldGFpbFRlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsVGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMuZGV0YWlsVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93R3JvdXBpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2dyb3VwJywgZW5hYmxlOiB0aGlzLmFsbG93R3JvdXBpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGlsZEdyaWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2xiYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Rvb2xiYXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dyb3VwU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZ3JvdXAnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmdyb3VwU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWdncmVnYXRlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnYWdncmVnYXRlJywgcHJvcGVydGllczogbmV3UHJvcCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uT2JqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlR3JpZFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zyb3plbkNvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdmcm96ZW5Sb3dzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlZXplUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZGVkUHJvcGVydHlDaGFuZ2UocHJvcCwgbmV3UHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrQ3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0Q3Vyc29yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWlyZUdyaWRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXF1aXJlUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4dGVuZGVkUHJvcGVydHlDaGFuZ2UgPSBmdW5jdGlvbiAocHJvcCwgbmV3UHJvcCkge1xuICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUucmVtb3ZlUGFkZGluZyghbmV3UHJvcC5lbmFibGVSdGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhck1vZHVsZS5nZXRUb29sYmFyKCkuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhck1vZHVsZS5nZXRUb29sYmFyKCkuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVNb2R1bGUuZ2V0Q29udGV4dE1lbnUoKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudU1vZHVsZS5nZXRDb250ZXh0TWVudSgpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uTWVudSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51TW9kdWxlLmdldENvbHVtbk1lbnUoKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51TW9kdWxlLmdldENvbHVtbk1lbnUoKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlQWx0Um93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlc2l6aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyaWRMaW5lcyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JpZExpbmVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlclNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZmlsdGVyJywgcHJvcGVydGllczogbmV3UHJvcC5maWx0ZXJTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNoU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWFyY2gnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlYXJjaFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzb3J0JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0aW9uU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWxlY3Rpb24nLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlbGVjdGlvblNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdlZGl0JywgcHJvcGVydGllczogbmV3UHJvcC5lZGl0U2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93VGV4dFdyYXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRXcmFwU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1RleHRXcmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZnJlZXplUmVuZGVyLCB7IGNhc2U6ICd0ZXh0d3JhcCcsIGlzTW9kZUNoZzogKHByb3AgPT09ICd0ZXh0V3JhcFNldHRpbmdzJykgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGFTb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlSG92ZXInOlxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gbmV3UHJvcC5lbmFibGVIb3ZlciA/IGVqMl9iYXNlXzMuYWRkQ2xhc3MgOiBlajJfYmFzZV8zLnJlbW92ZUNsYXNzO1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb24oW3RoaXMuZWxlbWVudF0sICdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRGVmYXVsdEN1cnNvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcgfHwgdGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk1vZGVsID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk1vZGVsKGNvbHVtbnNbaV0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsLnB1c2goY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbnZpZXcgPSB0aGlzLmluVmlld0luZGV4ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2IC0gX3RoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgfSkuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2ID4gLTE7IH0pO1xuICAgICAgICAgICAgdmFyIHZMZW4gPSBpbnZpZXcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW5Nb2RlbCkgfHwgdGhpcy5jb2x1bW5Nb2RlbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5Nb2RlbCh0aGlzLmNvbHVtbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB2TGVuID09PSAwID8gdGhpcy5jb2x1bW5Nb2RlbCA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbC5zbGljZShpbnZpZXdbMF0sIGludmlld1t2TGVuIC0gMV0gKyAxKTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzSW5WaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5WaWV3SW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TG9jYWxlQ29uc3RhbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdExvY2FsZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0Q29sdW1uSW5kZXhlc0luVmlldyA9IGZ1bmN0aW9uIChpbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluVmlld0luZGV4ZXMgPSBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb2x1bW5Nb2RlbDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnB1c2goY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0SGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5zZXRQYW5lbChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZS5zZXRUYWJsZShlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZENvbnRlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlLnNldFBhbmVsKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUuc2V0VGFibGUoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEZvb3RlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGZvb3RlcicpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVyRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRmb290ZXInKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3RlckVsZW1lbnQuZmlyc3RDaGlsZC5maXJzdENoaWxkO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdyaWRQYWdlcjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZFBhZ2VyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFBhZ2VyID0gZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dCeUluZGV4KGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93RWxlbWVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93SW5mbyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSB0YXJnZXQ7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHt9O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkgJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh1dGlsXzEucGFyZW50c1VudGlsKGVsZSwgJ2UtZGV0YWlscm93Y29sbGFwc2UnKVxuICAgICAgICAgICAgICAgICYmIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodXRpbF8xLnBhcmVudHNVbnRpbChlbGUsICdlLXJlY29yZHBsdXNleHBhbmQnKSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZWxlLCAnLmUtcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjZWxsKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gcGFyc2VJbnQoY2VsbC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93XzEgPSBlajJfYmFzZV8xLmNsb3Nlc3QoY2VsbCwgJy5lLXJvdycpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludChyb3dfMS5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93c09iamVjdCA9IHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dzKCkuZmlsdGVyKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci51aWQgPT09IHJvd18xLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dEYXRhID0gcm93c09iamVjdFswXS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gcm93c09iamVjdFswXS5jZWxsc1tjZWxsSW5kZXhdLmNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHsgY2VsbDogY2VsbCwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIHJvdzogcm93XzEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93RGF0YTogcm93RGF0YSwgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJncztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGF0YVJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBkYXRhUm93cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGRlbnJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFSb3dzLnB1c2gocm93c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGFSb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDZWxsRnJvbUluZGV4ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NvbHVtbkluZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSGVhZGVyQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1oZWFkZXJjZWxsJylbaW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dPYmplY3RGcm9tVUlEID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAocm93LnVpZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd3NPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uSGVhZGVyQnlVaWQodGhpcy5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKS51aWQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPScgKyB1aWQgKyAnXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IGluZGV4IDogLTE7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0VWlkQnlDb2x1bW5GaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnVpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXggPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldENvbHVtbkluZGV4QnlVaWQodWlkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBpbmRleCArPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbCgpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uRmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmdldENvbHVtbnMoKS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMuZ2V0Q29sdW1ucygpW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lcy5wdXNoKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbk5hbWVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd1RlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERldGFpbFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWlsVGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5ID0gMCwgY29sID0gdGhpcy5jb2x1bW5zLCBjTGVuID0gY29sLmxlbmd0aDsga2V5IDwgY0xlbjsga2V5KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sW2tleV0uaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChjb2xba2V5XS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJlY29yZHMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kdWxlID8gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWRSb3dJbmRleGVzIDogW107XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kdWxlLmdldFNlbGVjdGVkUmVjb3JkcygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREYXRhTW9kdWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTW9kdWxlLmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNob3dDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIHNob3dCeSkge1xuICAgICAgICAgICAgc2hvd0J5ID0gc2hvd0J5ID8gc2hvd0J5IDogJ2hlYWRlclRleHQnO1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhrZXlzLCBzaG93QnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlQ29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIGhpZGVCeSA9IGhpZGVCeSA/IGhpZGVCeSA6ICdoZWFkZXJUZXh0JztcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLmhpZGUoa2V5cywgaGlkZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmdvVG9QYWdlKHBhZ2VObyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc29ydENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUuc29ydENvbHVtbihjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJTb3J0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLmNsZWFyU29ydGluZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5maWx0ZXJCeUNvbHVtbihmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xlYXJGaWx0ZXJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgaXNDbGVhckZpbHRlckJhcikge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChmaWVsZCwgaXNDbGVhckZpbHRlckJhcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdFJvdyA9IGZ1bmN0aW9uIChpbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdFJvdyhpbmRleCwgaXNUb2dnbGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RSb3dzID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdFJvd3Mocm93SW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Q2VsbCA9IGZ1bmN0aW9uIChjZWxsSW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RDZWxsKGNlbGxJbmRleCwgaXNUb2dnbGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaE1vZHVsZS5zZWFyY2goc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaW50TW9kdWxlLnByaW50KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSZWNvcmQoZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnN0YXJ0RWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmFkZFJlY29yZChkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVsZXRlUm93ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUm93KHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uICh3aXRoSGVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmNsaXBib2FyZE1vZHVsZS5jb3B5KHdpdGhIZWFkZXIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWNhbGNJbmRlbnRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCghdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmICF0aGlzLmlzRGV0YWlsKCkpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLmdldEF0dHJpYnV0ZSgnaW5kZW50UmVmcmVzaGVkJykgfHxcbiAgICAgICAgICAgICAgICAhdGhpcy5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IHRoaXMuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCcuZS1lbXB0eWNlbGwnKS5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgY29udGVudENvbCA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgdmFyIHBlclBpeGVsID0gaW5kZW50V2lkdGggLyAzMDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChwZXJQaXhlbCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAoMzAgLyBwZXJQaXhlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGluZGVudFdpZHRoID0gMzA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICBjb250ZW50Q29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHsgaW5kZXg6IGksIHdpZHRoOiBpbmRlbnRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbCgpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnNldEF0dHJpYnV0ZSgnaW5kZW50UmVmcmVzaGVkJywgJ3RydWUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVvcmRlckNvbHVtbnMgPSBmdW5jdGlvbiAoZnJvbUZOYW1lLCB0b0ZOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnJlb3JkZXJNb2R1bGUucmVvcmRlckNvbHVtbnMoZnJvbUZOYW1lLCB0b0ZOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXV0b0ZpdENvbHVtbnMgPSBmdW5jdGlvbiAoZmllbGROYW1lcykge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVNb2R1bGUuYXV0b0ZpdENvbHVtbnMoZmllbGROYW1lcyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNyZWF0ZUNvbHVtbmNob29zZXIgPSBmdW5jdGlvbiAoeCwgeSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJNb2R1bGUucmVuZGVyQ29sdW1uQ2hvb3Nlcih4LCB5LCB0YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pbml0aWFsaXplU2VydmljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCd3aWR0aFNlcnZpY2UnLCB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2NlbGxSZW5kZXJlckZhY3RvcnknLCBuZXcgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLkNlbGxSZW5kZXJlckZhY3RvcnkpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcigncmVuZGVyZXJGYWN0b3J5JywgbmV3IHJlbmRlcmVyX2ZhY3RvcnlfMS5SZW5kZXJlckZhY3RvcnkpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignbG9jYWxpemF0aW9uJywgdGhpcy5sb2NhbGVPYmogPSBuZXcgZWoyX2Jhc2VfNC5MMTBuKHRoaXMuZ2V0TW9kdWxlTmFtZSgpLCB0aGlzLmRlZmF1bHRMb2NhbGUsIHRoaXMubG9jYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCd2YWx1ZUZvcm1hdHRlcicsIHRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKHRoaXMubG9jYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdzaG93SGlkZVNlcnZpY2UnLCB0aGlzLnNob3dIaWRlciA9IG5ldyBzaG93X2hpZGVfMS5TaG93SGlkZSh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdhcmlhU2VydmljZScsIHRoaXMuYXJpYVNlcnZpY2UgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdmb2N1cycsIHRoaXMuZm9jdXNNb2R1bGUgPSBuZXcgZm9jdXNfc3RyYXRlZ3lfMS5Gb2N1c1N0cmF0ZWd5KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJvY2Vzc01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc0NvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWc7XG4gICAgICAgICAgICB2YXIgajtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNMZW4gPSBzQ29scy5sZW5ndGg7IGogPCBzTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQ29sc1tqXS5maWVsZCA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xzLnB1c2goeyBmaWVsZDogZ0NvbHNbaV0sIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc18xLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5zb3J0ZWRDb2x1bW5zLnB1c2goc0NvbHNbal0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHNbal0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzXzEuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXNfMS5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBnQ29sc1tpXTsgfSlbMF0gOiB0aGlzXzEuZ2V0Q29sdW1uQnlGaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpLCBsZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzLnBhcmVudEtleUZpZWxkVmFsdWUpID8gJ3VuZGVmaW5lZCcgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlKHRoaXMucXVlcnlTdHJpbmcsICdlcXVhbCcsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ3JpZFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVIb3Zlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWRldmljZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnXSwgW10pO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyRmFjdG9yeSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZSA9IHJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZSA9IG5ldyBwcmludF8xLlByaW50KHRoaXMsIHRoaXMuc2Nyb2xsTW9kdWxlKTtcbiAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkTW9kdWxlID0gbmV3IGNsaXBib2FyZF8xLkNsaXBib2FyZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEluaXRpYWxpemVyKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFdpZHRoKCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVHcmlkUG9wVXBFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBvcHVwJywgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNvbnRlbnQnLCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW2NvbnRlbnQsIGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVwdGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZG93bnRhaWwgZS10YWlsJyB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUdyaWRMaW5lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS12ZXJ0aWNhbGxpbmVzJywgJ2UtaG9yaXpvbnRhbGxpbmVzJywgJ2UtaGlkZWxpbmVzJywgJ2UtYm90aGxpbmVzJ10pO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRMaW5lcykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3Jpem9udGFsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS12ZXJ0aWNhbGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWJvdGhsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXBwbHlUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUYWJsZSA9IHRoaXMuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGFibGUgPSB0aGlzLmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZShoZWFkZXJUYWJsZSwgaGVhZGVyRGl2VGFnLCAnaGVhZGVyJyk7XG4gICAgICAgICAgICB2YXIgY3RhYmxlID0gdGhpcy5jcmVhdGVUYWJsZShoZWFkZXJUYWJsZSwgaGVhZGVyRGl2VGFnLCAnY29udGVudCcpO1xuICAgICAgICAgICAgdmFyIGFsbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1lbGxpcHNpc3Rvb2x0aXAnKTtcbiAgICAgICAgICAgIHZhciBhbGxlbGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYWxsZWxlW2ldID0gYWxsW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxsZWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGhlYWRlclRhYmxlLmNvbnRhaW5zKGVsZW1lbnQpID8gaHRhYmxlIDogY3RhYmxlO1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBoZWFkZXJUYWJsZS5jb250YWlucyhlbGVtZW50KSA/ICd0aCcgOiAndHInO1xuICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICB0YWJsZS5xdWVyeVNlbGVjdG9yKGVsZSkuaW5uZXJIVE1MID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGVsZSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9vbHRpcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwID0gbmV3IGVqMl9wb3B1cHNfMS5Ub29sdGlwKHsgY29udGVudDogZWxlbWVudC5pbm5lckhUTUwgfSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdpZHRoIDwgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS10b29sdGlwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaHRhYmxlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY3RhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAodGFibGUsIHRhZywgdHlwZSkge1xuICAgICAgICAgICAgdmFyIG15VGFibGVEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5jbGFzc05hbWUgPSB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIGVsZSA9ICh0eXBlID09PSAnaGVhZGVyJykgPyAndGgnIDogJ3RkJztcbiAgICAgICAgICAgIHZhciBteVRyID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIG15dGQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoZWxlKTtcbiAgICAgICAgICAgIG15VHIuYXBwZW5kQ2hpbGQobXl0ZCk7XG4gICAgICAgICAgICBteVRhYmxlLmFwcGVuZENoaWxkKG15VHIpO1xuICAgICAgICAgICAgbXlTdWJEaXYuYXBwZW5kQ2hpbGQobXlUYWJsZSk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmFwcGVuZENoaWxkKG15U3ViRGl2KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gbXlUYWJsZURpdjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5nZXRDb250ZW50KCksICdkYmxjbGljaycsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGFiSW5kZXggPSB0aGlzLmVsZW1lbnQudGFiSW5kZXggPT09IC0xID8gMCA6IHRoaXMuZWxlbWVudC50YWJJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfNS5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMucmVjYWxjSW5kZW50V2lkdGgsIHRoaXMpO1xuICAgICAgICAgICAgW2V2ZW50cy51cGRhdGVEYXRhLCBldmVudHMubW9kZWxDaGFuZ2VkLCBldmVudHMuY29udGVudFJlYWR5LCBldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vbihldmVudCwgX3RoaXMucmVmcmVzaFRvb2x0aXAsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlY2FsY0luZGVudFdpZHRoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YUJvdW5kRnVuY3Rpb24gPSB0aGlzLnJlZnJlc2hNZWRpYUNvbC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuZGF0YUJvdW5kRnVuY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMucmVjYWxjSW5kZW50V2lkdGgpO1xuICAgICAgICAgICAgW2V2ZW50cy51cGRhdGVEYXRhLCBldmVudHMubW9kZWxDaGFuZ2VkLCBldmVudHMuY29udGVudFJlYWR5LCBldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vZmYoZXZlbnQsIF90aGlzLnJlZnJlc2hUb29sdGlwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmRGdW5jdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEN1cnJlbnRWaWV3UmVjb3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5hbGxvd0dyb3VwaW5nICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkgP1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhLnJlY29yZHMgOiB0aGlzLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubW91c2VDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkgfHwgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRwb3B1cCcpICYmIGUudG91Y2hlcykgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2xvbmVwcm9wZXJ0aWVzJykubGVuZ3RoIHx8IHRoaXMuY2hlY2tFZGl0KGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoIXRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpKSB8fFxuICAgICAgICAgICAgICAgICghKHRoaXMuYWxsb3dHcm91cGluZyB8fCB0aGlzLmFsbG93UmVvcmRlcmluZykgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpKSkgJiYgZS50b3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRoZWFkZXInKSAmJiB0aGlzLmFsbG93Um93RHJhZ0FuZERyb3ApIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY2xpY2ssIGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jaGVja0VkaXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Jyk7XG4gICAgICAgICAgICB2YXIgaXNFZGl0ID0gdGhpcy5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0ICYmIHRyICYmICh0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZWRpdGVkcm93JykgfHwgdHIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWFkZGVkcm93JykpO1xuICAgICAgICAgICAgcmV0dXJuICF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS11bmJvdW5kY2VsbGRpdicpICYmIChpc0VkaXQgfHwgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJlxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZWRpdGVkYmF0Y2hjZWxsJykpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJykuaWQgIT09IHRoaXMuZWxlbWVudC5pZCB8fCBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICcuZS11bmJvdW5kY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmRibGNsaWNrLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZm9jdXNPdXRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hpbGRHcmlkKGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWx0ZXJDbGVhciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYW5jZWw6bm90KC5lLWhpZGUpJyk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyQ2xlYXIpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJDbGVhci5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaXNDaGlsZEdyaWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZCcpO1xuICAgICAgICAgICAgaWYgKGdyaWRFbGVtZW50ICYmIGdyaWRFbGVtZW50LmlkICE9PSB0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubWVyZ2VQZXJzaXN0R3JpZERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmdldE1vZHVsZU5hbWUoKSArIHRoaXMuZWxlbWVudC5pZCk7XG4gICAgICAgICAgICBpZiAoIShlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEpIHx8IChkYXRhID09PSAnJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFPYmpfMSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhT2JqXzEpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHRoaXNfMltrZXldID09PSAnb2JqZWN0JykgJiYgIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpc18yW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzXzJba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzJba2V5XS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChlbGVtZW50LCBkYXRhT2JqXzFba2V5XVtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQodGhpc18yW2tleV0sIGRhdGFPYmpfMVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMltrZXldID0gZGF0YU9ial8xW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0aGlzXzIgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBfbG9vcF8yKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0RldGFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNoaWxkR3JpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmtleUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pc0VkaXQgJiYgZS5hY3Rpb24gIT09ICdlc2NhcGUnICYmIGUuYWN0aW9uICE9PSAnZW50ZXInICYmIGUuYWN0aW9uICE9PSAnc2hpZnRFbnRlcidcbiAgICAgICAgICAgICAgICAgICAgJiYgZS5hY3Rpb24gIT09ICd0YWInICYmIGUuYWN0aW9uICE9PSAnc2hpZnRUYWInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdjdHJsUGx1c1AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMua2V5UHJlc3NlZCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEluamVjdGVkTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluamVjdGVkTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk9iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4Y2VsRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3N2RXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wZGZFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZGZFeHBvcnRNb2R1bGUuTWFwKHRoaXMsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzQ29tbWFuZENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NvbW1hbmRDb2x1bW4oY29sdW1uLmNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4uY29tbWFuZHMgfHwgY29sdW1uLmNvbW1hbmRzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ncm91cENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwTW9kdWxlLmdyb3VwQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51bmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBNb2R1bGUudW5ncm91cENvbHVtbihjb2x1bW5OYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaXNDb250ZXh0TWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0TWVudU1vZHVsZSAmJiB0aGlzLmNvbnRleHRNZW51TW9kdWxlLmlzT3BlbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZW5zdXJlTW9kdWxlSW5qZWN0ZWQgPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbmplY3RlZE1vZHVsZXMoKS5pbmRleE9mKG1vZHVsZSkgPj0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2hvd0NvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBzaG93QnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLnNob3coY29sdW1uTmFtZSwgc2hvd0J5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaGlkZUNvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLmhpZGUoY29sdW1uTmFtZSwgaGlkZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVBbHRSb3dcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUhvdmVyXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0tleWJvYXJkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dUZXh0V3JhcFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgVGV4dFdyYXBTZXR0aW5ncylcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidGV4dFdyYXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGFnaW5nXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBwYWdlX3NldHRpbmdzXzEuUGFnZVNldHRpbmdzKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwYWdlU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVWaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTZWFyY2hTZXR0aW5ncylcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VhcmNoU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NvcnRpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93TXVsdGlTb3J0aW5nXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dFeGNlbEV4cG9ydFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGRmRXhwb3J0XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTb3J0U2V0dGluZ3MpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNvcnRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dTZWxlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KC0xKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzZWxlY3RlZFJvd0luZGV4XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTZWxlY3Rpb25TZXR0aW5ncylcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VsZWN0aW9uU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0ZpbHRlcmluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UmVvcmRlcmluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UmVzaXppbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jvd0RyYWdBbmREcm9wXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBSb3dEcm9wU2V0dGluZ3MpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Ryb3BTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRmlsdGVyU2V0dGluZ3MpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZpbHRlclNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dHcm91cGluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNob3dDb2x1bW5NZW51XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBHcm91cFNldHRpbmdzKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncm91cFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBFZGl0U2V0dGluZ3MpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVkaXRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgYWdncmVnYXRlXzEuQWdncmVnYXRlUm93KVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2hvd0NvbHVtbkNob29zZXJcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhdXRvJylcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnZGVmYXVsdCcpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImdyaWRMaW5lc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXRhaWxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGlsZEdyaWRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhbGxwYWdlcycpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50TW9kZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFTb3VyY2VcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb250ZXh0TWVudUl0ZW1zXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbk1lbnVJdGVtc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ0b29sYmFyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGFnZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZnJvemVuUm93c1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZnJvemVuQ29sdW1uc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJsb2FkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0RhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJxdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkJlZ2luXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkNvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkZhaWx1cmVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd1NlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEZXNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEZXNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxEZXNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5EcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5Ecm9wXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50Q29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlUHJpbnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGRmUXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJleGNlbFF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlRXhjZWxFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZXhjZWxFeHBvcnRDb21wbGV0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVQZGZFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGRmRXhwb3J0Q29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGV0YWlsRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0RyYWdTdGFydFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Ryb3BcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhckNsaWNrXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJhdGNoQWRkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJhdGNoRGVsZXRlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoQWRkXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoRGVsZXRlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoU2F2ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWdpbkVkaXRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbEVkaXRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbFNhdmVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicmVzaXplU3RhcnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwib25SZXNpemVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicmVzaXplU3RvcFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgICAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29udGV4dE1lbnVPcGVuXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbnRleHRNZW51Q2xpY2tcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uTWVudU9wZW5cIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uTWVudUNsaWNrXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNoZWNrQm94Q2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUNvcHlcIiwgdm9pZCAwKTtcbiAgICAgICAgR3JpZCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICAgICAgXSwgR3JpZCk7XG4gICAgICAgIHJldHVybiBHcmlkO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBleHBvcnRzLkdyaWQgPSBHcmlkO1xuICAgIEdyaWQuSW5qZWN0KHNlbGVjdGlvbl8xLlNlbGVjdGlvbik7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS9ncmlkLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWYWx1ZUZvcm1hdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZhbHVlRm9ybWF0dGVyKGN1bHR1cmVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmludGwgPSBuZXcgZWoyX2Jhc2VfMi5JbnRlcm5hdGlvbmFsaXphdGlvbigpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50bC5jdWx0dXJlID0gY3VsdHVyZU5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmdldEZvcm1hdEZ1bmN0aW9uID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXREYXRlRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldE51bWJlckZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0UGFyc2VyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyUGFyc2VyKGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5mcm9tVmlldyA9IGZ1bmN0aW9uICh2YWx1ZSwgZm9ybWF0LCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnIHx8IHR5cGUgPT09ICdkYXRldGltZScgfHwgdHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLnRvVmlldyA9IGZ1bmN0aW9uICh2YWx1ZSwgZm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZm9ybWF0KSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLnNldEN1bHR1cmUgPSBmdW5jdGlvbiAoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjdWx0dXJlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNldEN1bHR1cmUoY3VsdHVyZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmFsdWVGb3JtYXR0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZhbHVlRm9ybWF0dGVyID0gVmFsdWVGb3JtYXR0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIGNvbHVtbl8xLCBlajJfcG9wdXBzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZnVuY3Rpb24gZG9lc0ltcGxlbWVudEludGVyZmFjZSh0YXJnZXQsIGNoZWNrRm9yKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQucHJvdG90eXBlICYmIGNoZWNrRm9yIGluIHRhcmdldC5wcm90b3R5cGU7XG4gICAgfVxuICAgIGV4cG9ydHMuZG9lc0ltcGxlbWVudEludGVyZmFjZSA9IGRvZXNJbXBsZW1lbnRJbnRlcmZhY2U7XG4gICAgZnVuY3Rpb24gdmFsdWVBY2Nlc3NvcihmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgIGZpZWxkID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChmaWVsZCkgPyAnJyA6IGZpZWxkO1xuICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZShmaWVsZCwgZGF0YSk7XG4gICAgfVxuICAgIGV4cG9ydHMudmFsdWVBY2Nlc3NvciA9IHZhbHVlQWNjZXNzb3I7XG4gICAgZnVuY3Rpb24gZ2V0VXBkYXRlVXNpbmdSYWYodXBkYXRlRnVuY3Rpb24sIGNhbGxCYWNrKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKG51bGwsIHVwZGF0ZUZ1bmN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VXBkYXRlVXNpbmdSYWYgPSBnZXRVcGRhdGVVc2luZ1JhZjtcbiAgICBmdW5jdGlvbiBpdGVyYXRlQXJyYXlPck9iamVjdChjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHByZWQgPSBwcmVkaWNhdGUoY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocHJlZCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBleHBvcnRzLml0ZXJhdGVBcnJheU9yT2JqZWN0ID0gaXRlcmF0ZUFycmF5T3JPYmplY3Q7XG4gICAgZnVuY3Rpb24gdGVtcGxhdGVDb21waWxlcih0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBleHBvcnRzLnRlbXBsYXRlQ29tcGlsZXIgPSB0ZW1wbGF0ZUNvbXBpbGVyO1xuICAgIGZ1bmN0aW9uIHNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBjb3B5QXR0ciA9IHt9O1xuICAgICAgICB2YXIgbGl0ZXJhbHMgPSBbJ3N0eWxlJywgJ2NsYXNzJ107XG4gICAgICAgIGVqMl9iYXNlXzIuZXh0ZW5kKGNvcHlBdHRyLCBjdXN0b21BdHRyaWJ1dGVzLCB7fSk7XG4gICAgICAgIGlmICgnc3R5bGUnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKG5vZGUsIGNvcHlBdHRyW2xpdGVyYWxzWzBdXSk7XG4gICAgICAgICAgICBkZWxldGUgY29weUF0dHJbbGl0ZXJhbHNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY2xhc3MnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKFtub2RlXSwgY29weUF0dHJbbGl0ZXJhbHNbMV1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1sxXV07XG4gICAgICAgIH1cbiAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKG5vZGUsIGNvcHlBdHRyKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMgPSBzZXRTdHlsZUFuZEF0dHJpYnV0ZXM7XG4gICAgZnVuY3Rpb24gZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCwgZXhjbHVkZSkge1xuICAgICAgICB2YXIgbW92ZWQgPSBlajJfYmFzZV8yLmV4dGVuZChjb3BpZWQsIGZpcnN0LCBzZWNvbmQpO1xuICAgICAgICBPYmplY3Qua2V5cyhtb3ZlZCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbW92ZWRbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1vdmVkO1xuICAgIH1cbiAgICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcbiAgICBmdW5jdGlvbiBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zLCBhdXRvV2lkdGgpIHtcbiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuOyBjKyspIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbHVtbnNbY10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbih7IGZpZWxkOiBjb2x1bW5zW2NdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIShjb2x1bW5zW2NdIGluc3RhbmNlb2YgY29sdW1uXzEuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgIGlmICghY29sdW1uc1tjXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKGNvbHVtbnNbY10pO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2NdLmNvbHVtbnMgPSBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zW2NdLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4uaGVhZGVyVGV4dCA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRleHQpID8gY29sdW1uLmZpZWxkIHx8ICcnIDogY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICBjb2x1bW4udmFsdWVBY2Nlc3NvciA9IGNvbHVtbi52YWx1ZUFjY2Vzc29yIHx8IHZhbHVlQWNjZXNzb3I7XG4gICAgICAgICAgICBjb2x1bW4ud2lkdGggPSBhdXRvV2lkdGggJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4ud2lkdGgpID8gMjAwIDogY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uc1tjXSA9IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICB9XG4gICAgZXhwb3J0cy5wcmVwYXJlQ29sdW1ucyA9IHByZXBhcmVDb2x1bW5zO1xuICAgIGZ1bmN0aW9uIHNldENzc0luR3JpZFBvcFVwKHBvcFVwLCBlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIHBvcFVwU3BhbiA9IHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gcG9wVXAucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHRhcmdldFBvc2l0aW9uID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBpc0JvdHRvbVRhaWw7XG4gICAgICAgIHBvcFVwU3Bhbi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHBvcFVwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgaXNCb3R0b21UYWlsID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpID4gcG9wVXAub2Zmc2V0SGVpZ2h0ICsgMTA7XG4gICAgICAgIHBvcFVwLnN0eWxlLnRvcCA9IHRhcmdldFBvc2l0aW9uLnRvcCAtIHBvc2l0aW9uLnRvcCArXG4gICAgICAgICAgICAoaXNCb3R0b21UYWlsID8gLShwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgOiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgKyAncHgnO1xuICAgICAgICBwb3BVcC5zdHlsZS5sZWZ0ID0gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wVXAsIGUsIHRhcmdldFBvc2l0aW9uLCBwb3NpdGlvbi5sZWZ0KSArICdweCc7XG4gICAgICAgIGlmIChpc0JvdHRvbVRhaWwpIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLXVwdGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldENzc0luR3JpZFBvcFVwID0gc2V0Q3NzSW5HcmlkUG9wVXA7XG4gICAgZnVuY3Rpb24gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wdXAsIGUsIHRhcmdldFBvc2l0aW9uLCBsZWZ0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHBvcHVwLm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgdmFyIHggPSBnZXRQb3NpdGlvbihlKS54O1xuICAgICAgICBpZiAoeCAtIHRhcmdldFBvc2l0aW9uLmxlZnQgPCB3aWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFBvc2l0aW9uLmxlZnQgLSBsZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldFBvc2l0aW9uLnJpZ2h0IC0geCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ucmlnaHQgLSBsZWZ0IC0gd2lkdGggKiAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcGVydGllcyhvYmopIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuZ2V0VmFsdWUoJ3Byb3BlcnRpZXMnLCBvYmopO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BlcnRpZXMgPSBnZXRBY3R1YWxQcm9wZXJ0aWVzO1xuICAgIGZ1bmN0aW9uIHBhcmVudHNVbnRpbChlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIGV4cG9ydHMucGFyZW50c1VudGlsID0gcGFyZW50c1VudGlsO1xuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRJbmRleChlbGVtZW50LCBlbGVtZW50cykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uaXNFcXVhbE5vZGUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBleHBvcnRzLmdldEVsZW1lbnRJbmRleCA9IGdldEVsZW1lbnRJbmRleDtcbiAgICBmdW5jdGlvbiBpbkFycmF5KHZhbHVlLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbltpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGV4cG9ydHMuaW5BcnJheSA9IGluQXJyYXk7XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcEZyb21Db2xsKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGNvbGwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldLmhhc093blByb3BlcnR5KCdwcm9wZXJ0aWVzJykpIHtcbiAgICAgICAgICAgICAgICBjb2xsLnB1c2goY29sbGVjdGlvbltpXS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbDtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRBY3R1YWxQcm9wRnJvbUNvbGwgPSBnZXRBY3R1YWxQcm9wRnJvbUNvbGw7XG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCh0YXJnZXQsIHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbWVudHNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMucmVtb3ZlRWxlbWVudCA9IHJlbW92ZUVsZW1lbnQ7XG4gICAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oZSkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB7fTtcbiAgICAgICAgcG9zaXRpb24ueCA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WCkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOlxuICAgICAgICAgICAgZS5jbGllbnRYKTtcbiAgICAgICAgcG9zaXRpb24ueSA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WSkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOlxuICAgICAgICAgICAgZS5jbGllbnRZKTtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFBvc2l0aW9uID0gZ2V0UG9zaXRpb247XG4gICAgdmFyIHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gZ2V0VWlkKHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgdWlkKys7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VWlkID0gZ2V0VWlkO1xuICAgIGZ1bmN0aW9uIGFwcGVuZENoaWxkcmVuKGVsZW0sIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG4gICAgZXhwb3J0cy5hcHBlbmRDaGlsZHJlbiA9IGFwcGVuZENoaWxkcmVuO1xuICAgIGZ1bmN0aW9uIHBhcmVudHMoZWxlbSwgc2VsZWN0b3IsIGlzSUQpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW07XG4gICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0lEID8gcGFyZW50LmlkID09PSBzZWxlY3RvciA6IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzID0gcGFyZW50cztcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgZGF0YSwgY29sdW1uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUgPyBjb2x1bW4uY3VzdG9tQWdncmVnYXRlLmNhbGwoY29udGV4dCwgZGF0YSwgY29sdW1uKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlajJfZGF0YV8xLkRhdGFVdGlsLmFnZ3JlZ2F0ZXNbdHlwZV0oZGF0YSwgY29sdW1uLmZpZWxkKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVBZ2dyZWdhdGUgPSBjYWxjdWxhdGVBZ2dyZWdhdGU7XG4gICAgdmFyIHNjcm9sbFdpZHRoID0gbnVsbDtcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxCYXJXaWR0aCgpIHtcbiAgICAgICAgaWYgKHNjcm9sbFdpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpdk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHZhbHVlID0gMDtcbiAgICAgICAgZGl2Tm9kZS5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOjEwMHB4O2hlaWdodDogMTAwcHg7b3ZlcmZsb3c6IHNjcm9sbDtwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiAtOTk5OXB4Oyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHZhbHVlID0gKGRpdk5vZGUub2Zmc2V0V2lkdGggLSBkaXZOb2RlLmNsaWVudFdpZHRoKSB8IDA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHJldHVybiBzY3JvbGxXaWR0aCA9IHZhbHVlO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFNjcm9sbEJhcldpZHRoID0gZ2V0U2Nyb2xsQmFyV2lkdGg7XG4gICAgdmFyIHJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBnZXRSb3dIZWlnaHQoZWxlbWVudCkge1xuICAgICAgICBpZiAocm93SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIHN0eWxlczogJ3Zpc2liaWxpdHk6IGhpZGRlbicgfSk7XG4gICAgICAgIHRhYmxlLmlubmVySFRNTCA9ICc8dHI+PHRkIGNsYXNzPVwiZS1yb3djZWxsXCI+QTx0ZD48L3RyPic7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB2YXIgcmVjdCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQodGFibGUpO1xuICAgICAgICByb3dIZWlnaHQgPSBNYXRoLmNlaWwocmVjdC5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gcm93SGVpZ2h0O1xuICAgIH1cbiAgICBleHBvcnRzLmdldFJvd0hlaWdodCA9IGdldFJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBpc0VkaXRhYmxlKGNvbCwgdHlwZSwgZWxlbSkge1xuICAgICAgICB2YXIgcm93ID0gcGFyZW50c1VudGlsKGVsZW0sICdlLXJvdycpO1xuICAgICAgICB2YXIgaXNPbGRSb3cgPSAhcm93ID8gdHJ1ZSA6IHJvdyAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2JlZ2luRWRpdCcgJiYgaXNPbGRSb3cpIHtcbiAgICAgICAgICAgIGlmIChjb2wuaXNJZGVudGl0eSB8fCBjb2wuaXNQcmltYXJ5S2V5IHx8ICFjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNPbGRSb3cgJiYgIWNvbC5hbGxvd0VkaXRpbmcgJiYgIWNvbC5pc0lkZW50aXR5ICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5pc0VkaXRhYmxlID0gaXNFZGl0YWJsZTtcbiAgICBmdW5jdGlvbiBpc0FjdGlvblByZXZlbnQoaW5zdCkge1xuICAgICAgICB2YXIgZGxnID0gaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaW5zdC5lbGVtZW50LmlkICsgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIHJldHVybiBpbnN0LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAoaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCkgJiYgaW5zdC5lZGl0U2V0dGluZ3Muc2hvd0NvbmZpcm1EaWFsb2cgJiZcbiAgICAgICAgICAgIChkbGcgPyBkbGcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBvcHVwLWNsb3NlJykgOiB0cnVlKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pc0FjdGlvblByZXZlbnQgPSBpc0FjdGlvblByZXZlbnQ7XG4gICAgZnVuY3Rpb24gd3JhcChlbGVtLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIGNsTmFtZSA9ICdlLXdyYXAnO1xuICAgICAgICBlbGVtID0gZWxlbSBpbnN0YW5jZW9mIEFycmF5ID8gZWxlbSA6IFtlbGVtXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhY3Rpb24gPyBlbGVtW2ldLmNsYXNzTGlzdC5hZGQoY2xOYW1lKSA6IGVsZW1baV0uY2xhc3NMaXN0LnJlbW92ZShjbE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMud3JhcCA9IHdyYXA7XG4gICAgZnVuY3Rpb24gY2hhbmdlQnV0dG9uVHlwZSh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0YXJnZXQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKGJ1dHRvbiwgeyB0eXBlOiAnYnV0dG9uJyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmNoYW5nZUJ1dHRvblR5cGUgPSBjaGFuZ2VCdXR0b25UeXBlO1xuICAgIGZ1bmN0aW9uIHNldEZvcm1hdHRlcihzZXJ2aWNlTG9jYXRvciwgY29sdW1uKSB7XG4gICAgICAgIHZhciBmbXRyID0gc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgc3dpdGNoIChjb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgZm9ybWF0OiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0Rm9ybWF0dGVyID0gc2V0Rm9ybWF0dGVyO1xuICAgIGZ1bmN0aW9uIGFkZFJlbW92ZUFjdGl2ZUNsYXNzZXMoY2VsbHMsIGFkZCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2VsbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChjZWxsc1tpXSwgYXJncy5zbGljZSgpLCBbXSk7XG4gICAgICAgICAgICAgICAgY2VsbHNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KGNlbGxzW2ldLCBbXSwgYXJncy5zbGljZSgpKTtcbiAgICAgICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmFkZFJlbW92ZUFjdGl2ZUNsYXNzZXMgPSBhZGRSZW1vdmVBY3RpdmVDbGFzc2VzO1xuICAgIGZ1bmN0aW9uIGRpc3RpbmN0U3RyaW5nVmFsdWVzKHJlc3VsdCkge1xuICAgICAgICB2YXIgdGVtcCA9IHt9O1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIShyZXN1bHRbaV0gaW4gdGVtcCkpIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChyZXN1bHRbaV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgdGVtcFtyZXN1bHRbaV1dID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBleHBvcnRzLmRpc3RpbmN0U3RyaW5nVmFsdWVzID0gZGlzdGluY3RTdHJpbmdWYWx1ZXM7XG4gICAgZnVuY3Rpb24gZ2V0RmlsdGVyTWVudVBvc3Rpb24odGFyZ2V0LCBkaWFsb2dPYmopIHtcbiAgICAgICAgdmFyIGVsZW1lbnRWaXNpYmxlID0gZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHZhciBkbGdXaWR0aCA9IGRpYWxvZ09iai53aWR0aDtcbiAgICAgICAgdmFyIG5ld3BvcyA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVSZWxhdGl2ZUJhc2VkUG9zaXRpb24odGFyZ2V0LCBkaWFsb2dPYmouZWxlbWVudCk7XG4gICAgICAgIGRpYWxvZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBlbGVtZW50VmlzaWJsZTtcbiAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gKG5ld3Bvcy50b3AgKyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSAtIDUgKyAncHgnO1xuICAgICAgICB2YXIgbGVmdFBvcyA9ICgobmV3cG9zLmxlZnQgLSBkbGdXaWR0aCkgKyB0YXJnZXQuY2xpZW50V2lkdGgpO1xuICAgICAgICBpZiAobGVmdFBvcyA8IDEpIHtcbiAgICAgICAgICAgIGRpYWxvZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAoZGxnV2lkdGggKyBsZWZ0UG9zKSAtIDE2ICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpYWxvZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0UG9zICsgLTQgKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0RmlsdGVyTWVudVBvc3Rpb24gPSBnZXRGaWx0ZXJNZW51UG9zdGlvbjtcbiAgICBmdW5jdGlvbiBnZXRaSW5kZXhDYWxjdWFsdGlvbihhcmdzLCBkaWFsb2dPYmopIHtcbiAgICAgICAgYXJncy5wb3B1cC5lbGVtZW50LnN0eWxlLnpJbmRleCA9IChkaWFsb2dPYmouekluZGV4ICsgMSkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRaSW5kZXhDYWxjdWFsdGlvbiA9IGdldFpJbmRleENhbGN1YWx0aW9uO1xuICAgIGZ1bmN0aW9uIHRvb2dsZUNoZWNrYm94KGVsZW0pIHtcbiAgICAgICAgdmFyIHNwYW4gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyYW1lJyk7XG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrJykgPyBlajJfYmFzZV8xLmNsYXNzTGlzdChzcGFuLCBbJ2UtdW5jaGVjayddLCBbJ2UtY2hlY2snXSkgOlxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3Qoc3BhbiwgWydlLWNoZWNrJ10sIFsnZS11bmNoZWNrJ10pO1xuICAgIH1cbiAgICBleHBvcnRzLnRvb2dsZUNoZWNrYm94ID0gdG9vZ2xlQ2hlY2tib3g7XG4gICAgZnVuY3Rpb24gY3JlYXRlQ2JveFdpdGhXcmFwKHVpZCwgZWxlbSwgY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndWlkJywgdWlkKTtcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVDYm94V2l0aFdyYXAgPSBjcmVhdGVDYm94V2l0aFdyYXA7XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWRkQ2JveENsYXNzZXMoZWxlbSwgY2hlY2tlZCkge1xuICAgICAgICBlajJfYmFzZV8zLnJlbW92ZUNsYXNzKFtlbGVtXSwgWydlLWNoZWNrJywgJ2Utc3RvcCcsICdlLXVuY2hlY2snXSk7XG4gICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2snKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZS11bmNoZWNrJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmVBZGRDYm94Q2xhc3NlcyA9IHJlbW92ZUFkZENib3hDbGFzc2VzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbihvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93UmVzaXppbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uTWVudSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUdyb3VwQnlGb3JtYXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyID0ge307XG4gICAgICAgICAgICB0aGlzLnNob3dJbkNvbHVtbkNob29zZXIgPSB0cnVlO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdXRpbF8xLmdldFVpZCgnZ3JpZC1jb2x1bW4nKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZm9ybWF0ICYmIChvcHRpb25zLmZvcm1hdC5za2VsZXRvbiB8fCBvcHRpb25zLmZvcm1hdC5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb3JtYXR0ZXIodmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBhcnNlcih2YWx1ZUZvcm1hdHRlci5nZXRQYXJzZXJGdW5jdGlvbihvcHRpb25zLmZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dTb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb21tYW5kcyAmJiAhdGhpcy50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZSB8fCB0aGlzLmNvbW1hbmRzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnRlbXBsYXRlIHx8IHRoaXMuY29tbWFuZHNUZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXIuaXRlbVRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHRyVGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMuZmlsdGVyLml0ZW1UZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5nZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Rm4gPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5nZXRQYXJzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXJGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5zZXRQYXJzZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VyRm4gPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5nZXRDb2x1bW5UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0RmlsdGVySXRlbVRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmx0clRlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0RG9tU2V0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZUh0bWxFbmNvZGUgPyAndGV4dENvbnRlbnQnIDogJ2lubmVySFRNTCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW47XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbHVtbiA9IENvbHVtbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvY29sdW1uLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5jcmVhdGVkID0gJ2NyZWF0ZSc7XG4gICAgZXhwb3J0cy5kZXN0cm95ZWQgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5sb2FkID0gJ2xvYWQnO1xuICAgIGV4cG9ydHMucm93RGF0YUJvdW5kID0gJ3Jvd0RhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5xdWVyeUNlbGxJbmZvID0gJ3F1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYWN0aW9uQmVnaW4gPSAnYWN0aW9uQmVnaW4nO1xuICAgIGV4cG9ydHMuYWN0aW9uQ29tcGxldGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgIGV4cG9ydHMuYWN0aW9uRmFpbHVyZSA9ICdhY3Rpb25GYWlsdXJlJztcbiAgICBleHBvcnRzLmRhdGFCb3VuZCA9ICdkYXRhQm91bmQnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0aW5nID0gJ3Jvd1NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3RlZCA9ICdyb3dTZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5yb3dEZXNlbGVjdGluZyA9ICdyb3dEZXNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dEZXNlbGVjdGVkID0gJ3Jvd0Rlc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGluZyA9ICdjZWxsU2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3RlZCA9ICdjZWxsU2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbERlc2VsZWN0aW5nID0gJ2NlbGxEZXNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsRGVzZWxlY3RlZCA9ICdjZWxsRGVzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnU3RhcnQgPSAnY29sdW1uRHJhZ1N0YXJ0JztcbiAgICBleHBvcnRzLmNvbHVtbkRyYWcgPSAnY29sdW1uRHJhZyc7XG4gICAgZXhwb3J0cy5jb2x1bW5Ecm9wID0gJ2NvbHVtbkRyb3AnO1xuICAgIGV4cG9ydHMucm93RHJhZ1N0YXJ0ID0gJ3Jvd0RyYWdTdGFydCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnID0gJ3Jvd0RyYWcnO1xuICAgIGV4cG9ydHMucm93RHJvcCA9ICdyb3dEcm9wJztcbiAgICBleHBvcnRzLmJlZm9yZVByaW50ID0gJ2JlZm9yZVByaW50JztcbiAgICBleHBvcnRzLnByaW50Q29tcGxldGUgPSAncHJpbnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5kZXRhaWxEYXRhQm91bmQgPSAnZGV0YWlsRGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnRvb2xiYXJDbGljayA9ICd0b29sYmFyQ2xpY2snO1xuICAgIGV4cG9ydHMuYmF0Y2hBZGQgPSAnYmF0Y2hBZGQnO1xuICAgIGV4cG9ydHMuYmF0Y2hEZWxldGUgPSAnYmF0Y2hEZWxldGUnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hBZGQgPSAnYmVmb3JlQmF0Y2hBZGQnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hEZWxldGUgPSAnYmVmb3JlQmF0Y2hEZWxldGUnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hTYXZlID0gJ2JlZm9yZUJhdGNoU2F2ZSc7XG4gICAgZXhwb3J0cy5iZWdpbkVkaXQgPSAnYmVnaW5FZGl0JztcbiAgICBleHBvcnRzLmNlbGxFZGl0ID0gJ2NlbGxFZGl0JztcbiAgICBleHBvcnRzLmNlbGxTYXZlID0gJ2NlbGxTYXZlJztcbiAgICBleHBvcnRzLmVuZEFkZCA9ICdlbmRBZGQnO1xuICAgIGV4cG9ydHMuZW5kRGVsZXRlID0gJ2VuZERlbGV0ZSc7XG4gICAgZXhwb3J0cy5lbmRFZGl0ID0gJ2VuZEVkaXQnO1xuICAgIGV4cG9ydHMucmVjb3JkRG91YmxlQ2xpY2sgPSAncmVjb3JkRG91YmxlQ2xpY2snO1xuICAgIGV4cG9ydHMucmVjb3JkQ2xpY2sgPSAncmVjb3JkQ2xpY2snO1xuICAgIGV4cG9ydHMuYmVmb3JlRGF0YUJvdW5kID0gJ2JlZm9yZURhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVPcGVuQ29sdW1uQ2hvb3NlciA9ICdiZWZvcmVPcGVuQ29sdW1uQ2hvb3Nlcic7XG4gICAgZXhwb3J0cy5yZXNpemVTdGFydCA9ICdyZXNpemVTdGFydCc7XG4gICAgZXhwb3J0cy5vblJlc2l6ZSA9ICdvblJlc2l6ZSc7XG4gICAgZXhwb3J0cy5yZXNpemVTdG9wID0gJ3Jlc2l6ZVN0b3AnO1xuICAgIGV4cG9ydHMuY2hlY2tCb3hDaGFuZ2UgPSAnY2hlY2tCb3hDaGFuZ2UnO1xuICAgIGV4cG9ydHMuYmVmb3JlQ29weSA9ICdiZWZvcmVDb3B5JztcbiAgICBleHBvcnRzLmZpbHRlckNob2ljZVJlcXVlc3QgPSAnZmlsdGVyY2hvaWNlcmVxdWVzdCc7XG4gICAgZXhwb3J0cy5maWx0ZXJBZnRlck9wZW4gPSAnZmlsdGVyYWZ0ZXJvcGVuJztcbiAgICBleHBvcnRzLmZpbHRlckJlZm9yZU9wZW4gPSAnZmlsdGVyYmVmb3Jlb3Blbic7XG4gICAgZXhwb3J0cy5pbml0aWFsTG9hZCA9ICdpbml0aWFsLWxvYWQnO1xuICAgIGV4cG9ydHMuaW5pdGlhbEVuZCA9ICdpbml0aWFsLWVuZCc7XG4gICAgZXhwb3J0cy5kYXRhUmVhZHkgPSAnZGF0YS1yZWFkeSc7XG4gICAgZXhwb3J0cy5jb250ZW50UmVhZHkgPSAnY29udGVudC1yZWFkeSc7XG4gICAgZXhwb3J0cy51aVVwZGF0ZSA9ICd1aS11cGRhdGUnO1xuICAgIGV4cG9ydHMub25FbXB0eSA9ICdvbi1lbXB0eSc7XG4gICAgZXhwb3J0cy5pbkJvdW5kTW9kZWxDaGFuZ2VkID0gJ2luYm91bmQtbW9kZWwtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5tb2RlbENoYW5nZWQgPSAnbW9kZWwtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5jb2xHcm91cFJlZnJlc2ggPSAnY29sZ3JvdXAtcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5oZWFkZXJSZWZyZXNoZWQgPSAnaGVhZGVyLXJlZnJlc2hlZCc7XG4gICAgZXhwb3J0cy5wYWdlQmVnaW4gPSAncGFnaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnBhZ2VDb21wbGV0ZSA9ICdwYWdpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc29ydEJlZ2luID0gJ3NvcnRpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuc29ydENvbXBsZXRlID0gJ3NvcnRpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZmlsdGVyQmVnaW4gPSAnZmlsdGVyaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLmZpbHRlckNvbXBsZXRlID0gJ2ZpbHRlcmluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5zZWFyY2hCZWdpbiA9ICdzZWFyY2hpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuc2VhcmNoQ29tcGxldGUgPSAnc2VhcmNoaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlb3JkZXJCZWdpbiA9ICdyZW9yZGVyLWJlZ2luJztcbiAgICBleHBvcnRzLnJlb3JkZXJDb21wbGV0ZSA9ICdyZW9yZGVyLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQmVnaW4gPSAncm93ZHJhZ2FuZGRyb3AtYmVnaW4nO1xuICAgIGV4cG9ydHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSA9ICdyb3dkcmFnYW5kZHJvcC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5ncm91cEJlZ2luID0gJ2dyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLmdyb3VwQ29tcGxldGUgPSAnZ3JvdXBpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMudW5ncm91cEJlZ2luID0gJ3VuZ3JvdXBpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMudW5ncm91cENvbXBsZXRlID0gJ3VuZ3JvdXBpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0aW9uQmVnaW4gPSAncm93c2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlID0gJ3Jvd3NlbGVjdGVkJztcbiAgICBleHBvcnRzLmNvbHVtblNlbGVjdGlvbkJlZ2luID0gJ2NvbHVtbnNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25Db21wbGV0ZSA9ICdjb2x1bW5zZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW9uQmVnaW4gPSAnY2VsbHNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUgPSAnY2VsbHNlbGVjdGVkJztcbiAgICBleHBvcnRzLmJlZm9yZUNlbGxGb2N1c2VkID0gJ2JlZm9yZWNlbGxmb2N1c2VkJztcbiAgICBleHBvcnRzLmNlbGxGb2N1c2VkID0gJ2NlbGxmb2N1c2VkJztcbiAgICBleHBvcnRzLmtleVByZXNzZWQgPSAna2V5LXByZXNzZWQnO1xuICAgIGV4cG9ydHMuY2xpY2sgPSAnY2xpY2snO1xuICAgIGV4cG9ydHMuZGVzdHJveSA9ICdkZXN0cm95JztcbiAgICBleHBvcnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkID0gJ2NvbHVtbi12aXNpYmxlLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuc2Nyb2xsID0gJ3Njcm9sbCc7XG4gICAgZXhwb3J0cy5jb2x1bW5XaWR0aENoYW5nZWQgPSAnY29sdW1uLXdpZHRoLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkID0gJ2NvbHVtbi1wb3NpdGlvbi1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wID0gJ3Jvdy1kcmFnLWFuZC1kcm9wJztcbiAgICBleHBvcnRzLnJvd3NBZGRlZCA9ICdyb3dzLWFkZGVkJztcbiAgICBleHBvcnRzLnJvd3NSZW1vdmVkID0gJ3Jvd3MtcmVtb3ZlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnU3RvcCA9ICdjb2x1bW4tZHJhZy1zdG9wJztcbiAgICBleHBvcnRzLmhlYWRlckRyb3AgPSAnaGVhZGVyLWRyb3AnO1xuICAgIGV4cG9ydHMuZGF0YVNvdXJjZU1vZGlmaWVkID0gJ2RhdGFzb3VyY2UtbW9kaWZpZWQnO1xuICAgIGV4cG9ydHMucmVmcmVzaENvbXBsZXRlID0gJ3JlZnJlc2gtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucmVmcmVzaFZpcnR1YWxCbG9jayA9ICdyZWZyZXNoLXZpcnR1YWwtYmxvY2snO1xuICAgIGV4cG9ydHMuZGJsY2xpY2sgPSAnZGJsY2xpY2snO1xuICAgIGV4cG9ydHMudG9vbGJhclJlZnJlc2ggPSAndG9vbGJhci1yZWZyZXNoJztcbiAgICBleHBvcnRzLmJ1bGtTYXZlID0gJ2J1bGstc2F2ZSc7XG4gICAgZXhwb3J0cy5hdXRvQ29sID0gJ2F1dG8tY29sJztcbiAgICBleHBvcnRzLnRvb2x0aXBEZXN0cm95ID0gJ3Rvb2x0aXAtZGVzdHJveSc7XG4gICAgZXhwb3J0cy51cGRhdGVEYXRhID0gJ3VwZGF0ZS1kYXRhJztcbiAgICBleHBvcnRzLmVkaXRCZWdpbiA9ICdlZGl0LWJlZ2luJztcbiAgICBleHBvcnRzLmVkaXRDb21wbGV0ZSA9ICdlZGl0LWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmFkZEJlZ2luID0gJ2FkZC1iZWdpbic7XG4gICAgZXhwb3J0cy5hZGRDb21wbGV0ZSA9ICdhZGQtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2F2ZUNvbXBsZXRlID0gJ3NhdmUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZGVsZXRlQmVnaW4gPSAnZGVsZXRlLWJlZ2luJztcbiAgICBleHBvcnRzLmRlbGV0ZUNvbXBsZXRlID0gJ2RlbGV0ZS1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wcmV2ZW50QmF0Y2ggPSAncHJldmVudC1iYXRjaCc7XG4gICAgZXhwb3J0cy5kaWFsb2dEZXN0cm95ID0gJ2RpYWxvZy1kZXN0cm95JztcbiAgICBleHBvcnRzLmNydWRBY3Rpb24gPSAnY3J1ZC1BY3Rpb24nO1xuICAgIGV4cG9ydHMuYWRkRGVsZXRlQWN0aW9uID0gJ2FkZC1kZWxldGUtQWN0aW9uJztcbiAgICBleHBvcnRzLmRlc3Ryb3lGb3JtID0gJ2Rlc3Ryb3ktZm9ybSc7XG4gICAgZXhwb3J0cy5kb3VibGVUYXAgPSAnZG91YmxlLXRhcCc7XG4gICAgZXhwb3J0cy5iZWZvcmVFeGNlbEV4cG9ydCA9ICdiZWZvcmVFeGNlbEV4cG9ydCc7XG4gICAgZXhwb3J0cy5leGNlbEV4cG9ydENvbXBsZXRlID0gJ2V4Y2VsRXhwb3J0Q29tcGxldGUnO1xuICAgIGV4cG9ydHMuZXhjZWxRdWVyeUNlbGxJbmZvID0gJ2V4Y2VsUXVlcnlDZWxsSW5mbyc7XG4gICAgZXhwb3J0cy5iZWZvcmVQZGZFeHBvcnQgPSAnYmVmb3JlUGRmRXhwb3J0JztcbiAgICBleHBvcnRzLnBkZkV4cG9ydENvbXBsZXRlID0gJ3BkZkV4cG9ydENvbXBsZXRlJztcbiAgICBleHBvcnRzLnBkZlF1ZXJ5Q2VsbEluZm8gPSAncGRmUXVlcnlDZWxsSW5mbyc7XG4gICAgZXhwb3J0cy5hY2Nlc3NQcmVkaWNhdGUgPSAnYWNjZXNzLXByZWRpY2F0ZSc7XG4gICAgZXhwb3J0cy5jb250ZXh0TWVudUNsaWNrID0gJ2NvbnRleHRNZW51Q2xpY2snO1xuICAgIGV4cG9ydHMuZnJlZXplUmVmcmVzaCA9ICdmcmVlemVyZWZyZXNoJztcbiAgICBleHBvcnRzLmZyZWV6ZVJlbmRlciA9ICdmcmVlemVyZW5kZXInO1xuICAgIGV4cG9ydHMuY29udGV4dE1lbnVPcGVuID0gJ2NvbnRleHRNZW51T3Blbic7XG4gICAgZXhwb3J0cy5jb2x1bW5NZW51Q2xpY2sgPSAnY29udGV4dE1lbnVDbGljayc7XG4gICAgZXhwb3J0cy5jb2x1bW5NZW51T3BlbiA9ICdjb2x1bW5NZW51T3Blbic7XG4gICAgZXhwb3J0cy5maWx0ZXJPcGVuID0gJ2ZpbHRlck9wZW4nO1xuICAgIGV4cG9ydHMuZmlsdGVyRGlhbG9nQ3JlYXRlZCA9ICdmaWx0ZXJEaWFsb2dDcmVhdGVkJztcbiAgICBleHBvcnRzLmZpbHRlck1lbnVDbG9zZSA9ICdmaWx0ZXItbWVudS1jbG9zZSc7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS9jb25zdGFudC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaGVhZGVyLWluZGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2RhdGFfMSwgZW51bV8xLCBkYXRhXzEsIHJvd18xLCBjZWxsXzEsIGV2ZW50cywgdXRpbF8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBjZWxsX3JlbmRlcmVyXzEsIGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEsIHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgZXhwYW5kX2NlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLCBkZXRhaWxfaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLCBkZXRhaWxfZXhwYW5kX2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHBhcmVudCwgbG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlSb3coZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9OyB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZS5yZXF1ZXN0VHlwZSArIFwiLWJlZ2luXCIsIGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGUpO1xuICAgICAgICAgICAgaWYgKGUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVmcmVzaENvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoRGF0YU1hbmFnZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IHt9OyB9XG4gICAgICAgICAgICBpZiAoYXJncy5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJlYWR5ID0gdGhpcy5kYXRhLmRhdGFNYW5hZ2VyLnJlYWR5O1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRCdXN5KHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IHRoaXMuZGF0YS5nZXREYXRhKGFyZ3MsIHRoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIGlmICghcmVhZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5kaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIgPSBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy52YWxpZGF0ZUdyb3VwUmVjb3JkcyhlKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFNYW5hZ2VyU3VjY2VzcyhlLCBhcmdzKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kYXRhTWFuYWdlckZhaWx1cmUoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnNlbmRCdWxrUmVxdWVzdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmRhdGEuc2F2ZUNoYW5nZXMoYXJncy5jaGFuZ2VzLCB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5vZmZsaW5lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoeyByZXF1ZXN0VHlwZTogJ2JhdGNoc2F2ZScgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kbVN1Y2Nlc3MoZSwgYXJncyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZG1GYWlsdXJlKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kbVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlclN1Y2Nlc3MoZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZG1GYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJGYWlsdXJlKGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlbmRlckVtcHR5Um93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5lbXB0eVJvdyA9IGZ1bmN0aW9uIChpc1RyaWdnZXIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSB0aGlzLmNvbnRlbnRSZW5kZXJlci5nZXRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0Ym9keSk7XG4gICAgICAgICAgICB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1lbXB0eXJvdycgfSk7XG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIGlubmVySFRNTDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFbXB0eVJlY29yZCcpLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbHNwYW46IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlckVtcHR5KHRib2R5KTtcbiAgICAgICAgICAgIGlmIChpc1RyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5kYXRhQm91bmQsIHt9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm9uRW1wdHksIHsgcm93czogW25ldyByb3dfMS5Sb3coeyBpc0RhdGFSb3c6IHRydWUsIGNlbGxzOiBbbmV3IGNlbGxfMS5DZWxsKHsgaXNEYXRhQ2VsbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSB9KV0gfSldIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbHVtblR5cGUgPSBmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gcmVjb3JkICYmIHJlY29yZC5pdGVtcyA/IHJlY29yZC5pdGVtc1swXSA6IHJlY29yZDtcbiAgICAgICAgICAgIHZhciBmbXRyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZWoyX2Jhc2VfMi5nZXRWYWx1ZShjb2x1bW5zW2ldLmZpZWxkIHx8ICcnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xUeXBlRGVmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0udHlwZSA9IHZhbHVlLmdldERheSA/ICh2YWx1ZS5nZXRIb3VycygpID4gMCB8fCB2YWx1ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZ2V0U2Vjb25kcygpID4gMCB8fCB2YWx1ZS5nZXRNaWxsaXNlY29uZHMoKSA+IDAgPyAnZGF0ZXRpbWUnIDogJ2RhdGUnKSA6IHR5cGVvZiAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnR5cGUgPSBjb2x1bW5zW2ldLnR5cGUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoY29sdW1uc1tpXS5mb3JtYXQpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Rm9ybWF0dGVyKHRoaXMubG9jYXRvciwgY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjb2x1bW5zW2ldLmZvcm1hdCAmJiBjb2x1bW5zW2ldLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyBmb3JtYXQ6ICduMicgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlclN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlRGF0YUJvdW5kLCBlKTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBPYmplY3Qua2V5cyhlLnJlc3VsdCkubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgZ09iai5jdXJyZW50Vmlld0RhdGEgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgIGlmICghbGVuICYmIGUuY291bnQgJiYgZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlc09uSW5pdGlhbFJlbmRlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NvbFR5cGVEZWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtblR5cGUoZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRhdGFSZWFkeSwgZWoyX2Jhc2VfMi5leHRlbmQoeyBjb3VudDogZS5jb3VudCwgcmVzdWx0OiBlLnJlc3VsdCwgYWdncmVnYXRlczogZS5hZ2dyZWdhdGVzIH0sIGFyZ3MpKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggfHwgKGFyZ3MgJiYgYXJncy5yZXF1ZXN0VHlwZSA9PT0gJ3VuZ3JvdXBpbmcnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVmcmVzaENvbnRlbnRSb3dzKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VtcHR5RGF0YVNvdXJjZUVycm9yJykpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnNldFJvd0VsZW1lbnRzKFtdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVtcHR5Um93KCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChhcmdzLnJlcXVlc3RUeXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpICsgJy1jb21wbGV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShhY3Rpb24sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5oaWRlU3Bpbm5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRhdGFNYW5hZ2VyRmFpbHVyZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQsIHsgYnVzeTogZmFsc2UsIGludmFsaWQ6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25GYWlsdXJlLCB7IGVycm9yOiBlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhID0gW107XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVtcHR5Um93KCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5oaWRlU3Bpbm5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZXNPbkluaXRpYWxSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5idWlsZENvbHVtbnMoZS5yZXN1bHRbMF0pO1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuYXV0b0NvbCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmJ1aWxkQ29sdW1ucyA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gT2JqZWN0LmtleXMocmVjb3JkKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHNbaV0gPSB7ICdmaWVsZCc6IGNvbHVtbnNbaV0gfTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29sc1tpXS53aWR0aCA9ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHNbaV0ud2lkdGgpID8gY29sc1tpXS53aWR0aCA6IDIwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jb2x1bW5zID0gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5pbnN0YW50aWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIsIG5ldyBoZWFkZXJfcmVuZGVyZXJfMS5IZWFkZXJSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdmFyIGNlbGxyZW5kZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkhlYWRlciwgbmV3IGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEuSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EYXRhLCBuZXcgY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgbmV3IHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkluZGVudCwgbmV3IGluZGVudF9jZWxsX3JlbmRlcmVyXzEuSW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24sIG5ldyBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMS5Hcm91cENhcHRpb25DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbkVtcHR5LCBuZXcgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEuR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkV4cGFuZCwgbmV3IGV4cGFuZF9jZWxsX3JlbmRlcmVyXzEuRXhwYW5kQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQsIG5ldyBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEuSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBuZXcgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyLCBuZXcgZGV0YWlsX2hlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMS5EZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRldGFpbEV4cGFuZCwgbmV3IGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xLkRldGFpbEV4cGFuZENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucmVmcmVzaENvbXBsZXRlLCB0aGlzLnJlZnJlc2hDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYnVsa1NhdmUsIHRoaXMuc2VuZEJ1bGtSZXF1ZXN0LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS52YWxpZGF0ZUdyb3VwUmVjb3JkcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZS5yZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwMCA9IGUucmVzdWx0WzBdO1xuICAgICAgICAgICAgdmFyIGdyb3VwTiA9IGUucmVzdWx0W2luZGV4XTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSBbXTtcbiAgICAgICAgICAgIHZhciBhZGRXaGVyZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgICAgIFtncm91cDAsIGdyb3VwTl0uZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZS5wdXNoKG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZSgnZmllbGQnLCAnPT0nLCBncm91cC5maWVsZCkuYW5kKF90aGlzLmdldFByZWRpY2F0ZSgna2V5JywgJ2VxdWFsJywgZ3JvdXAua2V5KSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0LndoZXJlKGVqMl9kYXRhXzEuUHJlZGljYXRlLm9yKHByZWRpY2F0ZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICBhZGRXaGVyZShxdWVyeSk7XG4gICAgICAgICAgICB2YXIgY3VyRG0gPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihlLnJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgY3VyRmlsdGVyID0gY3VyRG0uZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciBuZXdRdWVyeSA9IHRoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpO1xuICAgICAgICAgICAgdmFyIHJQcmVkaWNhdGUgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaXNSZW1vdGUoKSkge1xuICAgICAgICAgICAgICAgIFtncm91cDAsIGdyb3VwTl0uZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJQcmVkaWNhdGUucHVzaChfdGhpcy5nZXRQcmVkaWNhdGUoZ3JvdXAuZmllbGQsICdlcXVhbCcsIGdyb3VwLmtleSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5ld1F1ZXJ5LndoZXJlKGVqMl9kYXRhXzEuUHJlZGljYXRlLm9yKHJQcmVkaWNhdGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZFdoZXJlKG5ld1F1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBlajJfZGF0YV8xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGlzLmRhdGEuZ2V0RGF0YSh7fSwgbmV3UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVHcm91cEluZm8oY3VyRmlsdGVyLCByLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBkZWZlcnJlZC5yZWplY3QoZSk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZ2V0UHJlZGljYXRlID0gZnVuY3Rpb24gKGtleSwgb3BlcmF0b3IsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXREYXRlUHJlZGljYXRlKHsgZmllbGQ6IGtleSwgb3BlcmF0b3I6IG9wZXJhdG9yLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKGtleSwgb3BlcmF0b3IsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVHcm91cEluZm8gPSBmdW5jdGlvbiAoY3VycmVudCwgdW50b3VjaGVkKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRtID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodW50b3VjaGVkKTtcbiAgICAgICAgICAgIGN1cnJlbnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHVHcm91cCA9IGRtLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoJ2ZpZWxkJywgJz09JywgZWxlbWVudC5maWVsZCkuYW5kKF90aGlzLmdldFByZWRpY2F0ZSgna2V5JywgJ2VxdWFsJywgZWxlbWVudC5rZXkpKSkpWzBdO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY291bnQgPSB1R3JvdXAuY291bnQ7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1Hcm91cCA9IGVsZW1lbnQuaXRlbXM7XG4gICAgICAgICAgICAgICAgdmFyIHVHcm91cEl0ZW0gPSB1R3JvdXAuaXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1Hcm91cC5Hcm91cEd1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pdGVtcyA9IF90aGlzLnVwZGF0ZUdyb3VwSW5mbyhlbGVtZW50Lml0ZW1zLCB1R3JvdXAuaXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGUgaW5zdGFuY2VvZiBBcnJheSA/IGNvbHVtbi50eXBlIDogW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY29sdW1uLmZpZWxkICsgJyAtICcgKyB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWdncmVnYXRlc1trZXldID0gdXRpbF8xLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBpdGVtR3JvdXAubGV2ZWwgPyB1R3JvdXBJdGVtLnJlY29yZHMgOiB1R3JvdXAuaXRlbXMsIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW5kZXIgPSBSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvcmVuZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuL2NlbGwtbWVyZ2UtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xLCBjZWxsX21lcmdlX3JlbmRlcmVyXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEsIHV0aWxfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRlbnRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZHJvcHBlZEVsZW1lbnQ6IGUuZHJvcHBlZEVsZW1lbnQgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yYWZDYWxsYmFjayA9IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeShfdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29udGVudFJlYWR5LCB7IHJvd3M6IF90aGlzLnJvd3MsIGFyZ3M6IGFyZ3MgfSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5kYXRhQm91bmQsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5hbGxvd1RleHRXcmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5mcmVlemVSZW5kZXIsIHsgY2FzZTogJ3RleHR3cmFwJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGFyZ3MucmVxdWVzdFR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgKyAnLWNvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShhY3Rpb24sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH07IH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IHRoaXMuZ2V0TW9kZWxHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5zZXRWaXNpYmxlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2xHcm91cFJlZnJlc2gsIHRoaXMuY29sR3JvdXBSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jb250ZW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGlubmVyRGl2LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKGlubmVyRGl2LCB7IGJ1c3k6IGZhbHNlIH0pO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgY29udGVudERpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUNvbnRlbnRUYWJsZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUoY29udGVudERpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmdldFRhYmxlKCksIHtcbiAgICAgICAgICAgICAgICBtdWx0aXNlbGVjdGFibGU6IHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29udGVudERyb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY3JlYXRlQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NvbnRlbnRfdGFibGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoaXMuZ2V0Q29sR3JvdXAoKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5JykpO1xuICAgICAgICAgICAgaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyRGl2O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoQ29udGVudFJvd3MgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IHt9OyB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGdPYmouY3VycmVudFZpZXdEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkYXRhU291cmNlID0gZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciBoZHJmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0cjtcbiAgICAgICAgICAgIHZhciB0Ym9keTtcbiAgICAgICAgICAgIHZhciBoZHJUYm9keTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB2YXIgbW9kZWxEYXRhID0gdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIGlkeCA9IG1vZGVsRGF0YVswXS5jZWxsc1swXS5pbmRleDtcbiAgICAgICAgICAgIHZhciBmQ29udCA9IHRoaXMuZ2V0UGFuZWwoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5jb250ZW50Jyk7XG4gICAgICAgICAgICB2YXIgbUNvbnQgPSB0aGlzLmdldFBhbmVsKCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBjb250ID0gdGhpcy5nZXRQYW5lbCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsTWVyZ2UgPSBuZXcgY2VsbF9tZXJnZV9yZW5kZXJlcl8xLkNlbGxNZXJnZVJlbmRlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgY2VsbE1lcmdlLnVwZGF0ZVZpcnR1YWxDZWxscyhtb2RlbERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgJiYgaWR4ID49IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0Ym9keSA9IG1Db250LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0Ym9keSA9IHRoaXMuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vZGVsRGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5yb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhW2ldLCBjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGdPYmouZ2V0Um93VGVtcGxhdGUoKShlajJfYmFzZV8yLmV4dGVuZCh7IGluZGV4OiBpIH0sIGRhdGFTb3VyY2VbaV0pLCBnT2JqLCAncm93VGVtcGxhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVFIgPSBlbGVtZW50c1tqXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndHInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVFIgfHwgKGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwgJiYgZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCgndHInKS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHIgPSBpc1RSID8gZWxlbWVudHNbal0gOiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yKCd0cicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plblJvd3MgJiYgaSA8IGdPYmouZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgICAgICBoZHJmcmFnLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaChtb2RlbERhdGFbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbERhdGFbaV0uaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGw6bm90KC5lLWhpZGUpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS1kZXRhaWxyb3d2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cy5wdXNoKHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwgeyBjb2xjb3VudDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgaGRyVGJvZHkgPSBnT2JqLmZyb3plbkNvbHVtbnMgPyBnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKGlkeCA9PT0gMCA/ICcuZS1mcm96ZW5oZWFkZXInXG4gICAgICAgICAgICAgICAgICAgIDogJy5lLW1vdmFibGVoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpIDogZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgaGRyVGJvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgaGRyVGJvZHkuYXBwZW5kQ2hpbGQoaGRyZnJhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Sb3dzICYmIGlkeCA9PT0gMCAmJiBjb250Lm9mZnNldEhlaWdodCA9PT0gTnVtYmVyKGdPYmouaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIGNvbnQuc3R5bGUuaGVpZ2h0ID0gKGNvbnQub2Zmc2V0SGVpZ2h0IC0gaGRyVGJvZHkub2Zmc2V0SGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Db2x1bW5zICYmIGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgICAgIHV0aWxfMS5nZXRVcGRhdGVVc2luZ1JhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmQ29udC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Ym9keS5jaGlsZEVsZW1lbnRDb3VudCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RyJykuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0ZCcpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBtQ29udC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZDb250LnN0eWxlLmhlaWdodCA9ICgobUNvbnQub2Zmc2V0SGVpZ2h0KSAtIHV0aWxfMi5nZXRTY3JvbGxCYXJXaWR0aCgpKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBtQ29udC5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hcHBlbmRDb250ZW50KHRib2R5LCBmcmFnLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZnJvemVuQ29sdW1ucyAmJiBpZHggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVmcmVzaENvbnRlbnRSb3dzKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRoaXMucmFmQ2FsbGJhY2soYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRib2R5LCBmcmFnLCBhcmdzKSB7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRQYW5lbCA9IGZ1bmN0aW9uIChwYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UGFuZWwgPSBwYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50VGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFRhYmxlID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93RWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dFbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0Um93RWxlbWVudHMgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucm93RWxlbWVudHMgPSBlbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgdmFyIHRlc3RSb3c7XG4gICAgICAgICAgICByb3dzLnNvbWUoZnVuY3Rpb24gKHIpIHsgaWYgKHIuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgdGVzdFJvdyA9IHI7XG4gICAgICAgICAgICB9IHJldHVybiByLmlzRGF0YVJvdzsgfSk7XG4gICAgICAgICAgICB2YXIgdGFza3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBjbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBjbGVuOyBjKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhblNraXAoY29sdW1uLCB0ZXN0Um93LCBpZHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheVZhbCA9IGNvbHVtbi52aXNpYmxlID09PSB0cnVlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmdldENvbEdyb3VwKCkuY2hpbGROb2Rlc1tpZHhdLCB7ICdkaXNwbGF5JzogZGlzcGxheVZhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENvbnRlbnRSb3dzKHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY29sR3JvdXBSZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q29sR3JvdXAoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IHRoaXMuZ2V0Q29sR3JvdXAoKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5pbm5lckhUTUwgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUNvbnRlbnREcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzEuRHJvcHBhYmxlKGdPYmouZ2V0Q29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jYW5Ta2lwID0gZnVuY3Rpb24gKGNvbHVtbiwgcm93LCBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93KSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnZpc2libGUpIHx8XG4gICAgICAgICAgICAgICAgcm93LmNlbGxzW2luZGV4XS52aXNpYmxlID09PSBjb2x1bW4udmlzaWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0TW9kZWxHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IgPSB0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nID8gbmV3IGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwTW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpIDogbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlckVtcHR5ID0gZnVuY3Rpb24gKHRib2R5KSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAodWlkLCBzZXQsIGNsZWFyQWxsKSB7XG4gICAgICAgICAgICB0aGlzLmdldFJvd3MoKS5maWx0ZXIoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gY2xlYXJBbGwgfHwgdWlkID09PSByb3cudWlkOyB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5pc1NlbGVjdGVkID0gc2V0OyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGVudFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29udGVudFJlbmRlciA9IENvbnRlbnRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY29udGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuL2NlbGwtbWVyZ2UtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjb25zdGFudF8xLCB1dGlsXzEsIGVudW1fMSwgY2VsbF9tZXJnZV9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd1JlbmRlcmVyKHNlcnZpY2VMb2NhdG9yLCBjZWxsVHlwZSwgcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBhdHRyczogeyByb2xlOiAncm93JyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5jZWxsVHlwZSA9IGNlbGxUeXBlO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZyZXNoUm93KHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGlzQ2hhbmdlZCwgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICByb3cuZGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCByb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVyZ2VDZWxscyhyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93LnVpZCArICddJyk7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHRyLmNlbGxzKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxzXzEgPSBjZWxsczsgX2kgPCBjZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHJvd0FyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgY2VsbEFyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgYXR0ckNvcHkgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgYXR0cmlidXRlcywge30pO1xuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLmluZGV4T2Yocm93LmluZGV4KSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21Sb3codHIsIHJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModHIsIGF0dHJDb3B5KTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIHJvdy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXJGYWN0ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93LmNlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgY2VsbC5pc1NlbGVjdGVkID0gcm93LmlzU2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSB8fCBlbnVtXzEuQ2VsbFR5cGUuRGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gY2VsbFJlbmRlcmVyLnJlbmRlcihyb3cuY2VsbHNbaV0sIHJvdy5kYXRhLCB7ICdpbmRleCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHJvdy5pbmRleCkgPyByb3cuaW5kZXgudG9TdHJpbmcoKSA6ICcnIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyb3cuY2VsbHNbaV0uY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoY29uc3RhbnRfMS5xdWVyeUNlbGxJbmZvLCBlajJfYmFzZV8xLmV4dGVuZChjZWxsQXJncywgeyBjZWxsOiB0ZCwgY29sdW1uOiBjZWxsLmNvbHVtbiwgY29sU3BhbjogMSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsQXJncy5jb2xTcGFuID4gMSB8fCByb3cuY2VsbHNbaV0uY2VsbFNwYW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbE1lcmdlID0gbmV3IGNlbGxfbWVyZ2VfcmVuZGVyZXJfMS5DZWxsTWVyZ2VSZW5kZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGQgPSBjZWxsTWVyZ2UucmVuZGVyKGNlbGxBcmdzLCByb3csIGksIHRkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXJvdy5jZWxsc1tpXS5pc1NwYW5uZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihjb25zdGFudF8xLnJvd0RhdGFCb3VuZCwgZWoyX2Jhc2VfMS5leHRlbmQocm93QXJncywgeyByb3c6IHRyIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKHJvdy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoTWVyZ2VDZWxscyA9IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSByb3cuY2VsbHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY2VsbC5pc1NwYW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5idWlsZEF0dHJpYnV0ZUZyb21Sb3cgPSBmdW5jdGlvbiAodHIsIHJvdykge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAncm93aW5kZXgnOiAnYXJpYS1yb3dpbmRleCcsICdkYXRhVUlEJzogJ2RhdGEtdWlkJywgJ2FyaWFTZWxlY3RlZCc6ICdhcmlhLXNlbGVjdGVkJyB9O1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLXJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc0FsdFJvdykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1hbHRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLnJvd2luZGV4XSA9IHJvdy5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IHJvdy5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy51aWQpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuZGF0YVVJRF0gPSByb3cudWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmFyaWFTZWxlY3RlZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIGF0dHIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93UmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd1JlbmRlcmVyID0gUm93UmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvcm93LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsVHlwZTtcbiAgICAoZnVuY3Rpb24gKENlbGxUeXBlKSB7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGF0YVwiXSA9IDBdID0gXCJEYXRhXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSGVhZGVyXCJdID0gMV0gPSBcIkhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIlN1bW1hcnlcIl0gPSAyXSA9IFwiU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwU3VtbWFyeVwiXSA9IDNdID0gXCJHcm91cFN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJDYXB0aW9uU3VtbWFyeVwiXSA9IDRdID0gXCJDYXB0aW9uU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkZpbHRlclwiXSA9IDVdID0gXCJGaWx0ZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJJbmRlbnRcIl0gPSA2XSA9IFwiSW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBDYXB0aW9uXCJdID0gN10gPSBcIkdyb3VwQ2FwdGlvblwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwQ2FwdGlvbkVtcHR5XCJdID0gOF0gPSBcIkdyb3VwQ2FwdGlvbkVtcHR5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRXhwYW5kXCJdID0gOV0gPSBcIkV4cGFuZFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkhlYWRlckluZGVudFwiXSA9IDEwXSA9IFwiSGVhZGVySW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiU3RhY2tlZEhlYWRlclwiXSA9IDExXSA9IFwiU3RhY2tlZEhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRldGFpbEhlYWRlclwiXSA9IDEyXSA9IFwiRGV0YWlsSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGV0YWlsRXhwYW5kXCJdID0gMTNdID0gXCJEZXRhaWxFeHBhbmRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJDb21tYW5kQ29sdW1uXCJdID0gMTRdID0gXCJDb21tYW5kQ29sdW1uXCI7XG4gICAgfSkoQ2VsbFR5cGUgPSBleHBvcnRzLkNlbGxUeXBlIHx8IChleHBvcnRzLkNlbGxUeXBlID0ge30pKTtcbiAgICB2YXIgUmVuZGVyVHlwZTtcbiAgICAoZnVuY3Rpb24gKFJlbmRlclR5cGUpIHtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiSGVhZGVyXCJdID0gMF0gPSBcIkhlYWRlclwiO1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJDb250ZW50XCJdID0gMV0gPSBcIkNvbnRlbnRcIjtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiU3VtbWFyeVwiXSA9IDJdID0gXCJTdW1tYXJ5XCI7XG4gICAgfSkoUmVuZGVyVHlwZSA9IGV4cG9ydHMuUmVuZGVyVHlwZSB8fCAoZXhwb3J0cy5SZW5kZXJUeXBlID0ge30pKTtcbiAgICB2YXIgVG9vbGJhckl0ZW07XG4gICAgKGZ1bmN0aW9uIChUb29sYmFySXRlbSkge1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIkFkZFwiXSA9IDBdID0gXCJBZGRcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJFZGl0XCJdID0gMV0gPSBcIkVkaXRcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJVcGRhdGVcIl0gPSAyXSA9IFwiVXBkYXRlXCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiRGVsZXRlXCJdID0gM10gPSBcIkRlbGV0ZVwiO1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIkNhbmNlbFwiXSA9IDRdID0gXCJDYW5jZWxcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJQcmludFwiXSA9IDVdID0gXCJQcmludFwiO1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIlNlYXJjaFwiXSA9IDZdID0gXCJTZWFyY2hcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJDb2x1bW5DaG9vc2VyXCJdID0gN10gPSBcIkNvbHVtbkNob29zZXJcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJQZGZFeHBvcnRcIl0gPSA4XSA9IFwiUGRmRXhwb3J0XCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiRXhjZWxFeHBvcnRcIl0gPSA5XSA9IFwiRXhjZWxFeHBvcnRcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJDc3ZFeHBvcnRcIl0gPSAxMF0gPSBcIkNzdkV4cG9ydFwiO1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIldvcmRFeHBvcnRcIl0gPSAxMV0gPSBcIldvcmRFeHBvcnRcIjtcbiAgICB9KShUb29sYmFySXRlbSA9IGV4cG9ydHMuVG9vbGJhckl0ZW0gfHwgKGV4cG9ydHMuVG9vbGJhckl0ZW0gPSB7fSkpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvZW51bS5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbE1lcmdlUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbE1lcmdlUmVuZGVyKHNlcnZpY2VMb2NhdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGxBcmdzLCByb3csIGksIHRkKSB7XG4gICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyRmFjdCA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSB8fCBlbnVtXzEuQ2VsbFR5cGUuRGF0YSk7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHJvdy5jZWxsc1tpXS5jZWxsU3BhbiA/IHJvdy5jZWxsc1tpXS5jZWxsU3BhbiA6XG4gICAgICAgICAgICAgICAgKGNlbGxBcmdzLmNvbFNwYW4gKyBpKSA8PSByb3cuY2VsbHMubGVuZ3RoID8gY2VsbEFyZ3MuY29sU3BhbiA6IHJvdy5jZWxscy5sZW5ndGggLSBpO1xuICAgICAgICAgICAgdmFyIHZpc2libGUgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgaSArIHNwYW4gJiYgaiA8IHJvdy5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuY2VsbHNbal0udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzW2pdLmlzU3Bhbm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpc2libGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyBzcGFuOyBqIDwgaSArIHNwYW4gKyB2aXNpYmxlICYmIGogPCByb3cuY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzW2pdLmlzU3Bhbm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpICsgc3BhbiArIHZpc2libGUgPj0gcm93LmNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuIC09IChpICsgc3BhbiArIHZpc2libGUpIC0gcm93LmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmNlbGxzW2ldLmNlbGxTcGFuKSB7XG4gICAgICAgICAgICAgICAgcm93LmRhdGFbY2VsbEFyZ3MuY29sdW1uLmZpZWxkXSA9IHJvdy5jZWxsc1tpXS5zcGFuVGV4dDtcbiAgICAgICAgICAgICAgICB0ZCA9IGNlbGxSZW5kZXJlci5yZW5kZXIocm93LmNlbGxzW2ldLCByb3cuZGF0YSwgeyAnaW5kZXgnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpID8gcm93LmluZGV4LnRvU3RyaW5nKCkgOiAnJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcGFuID4gMSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0ZCwgeyAnY29sU3Bhbic6IHNwYW4udG9TdHJpbmcoKSwgJ2FyaWEtY29sU3Bhbic6IHNwYW4udG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiAhcm93LmNlbGxzW2ldLmNlbGxTcGFuICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuY29udGFpbnNLZXkoY2VsbEFyZ3MuY29sdW1uLmZpZWxkLCBjZWxsQXJncy5kYXRhW2NlbGxBcmdzLmNvbHVtbi5maWVsZF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrdXBNZXJnZUNlbGxzKGNlbGxBcmdzLmNvbHVtbi5maWVsZCwgY2VsbEFyZ3MuZGF0YVtjZWxsQXJncy5jb2x1bW4uZmllbGRdLCBjZWxsQXJncy5jb2xTcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5iYWNrdXBNZXJnZUNlbGxzID0gZnVuY3Rpb24gKGZOYW1lLCBkYXRhLCBzcGFuKSB7XG4gICAgICAgICAgICB0aGlzLnNldE1lcmdlQ2VsbHModGhpcy5nZW5lcnRlS2V5KGZOYW1lLCBkYXRhKSwgc3Bhbik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuZ2VuZXJ0ZUtleSA9IGZ1bmN0aW9uIChmbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGZuYW1lICsgJ19fJyArIGRhdGEudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5zcGxpdEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkuc3BsaXQoJ19fJyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAoZm5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE1lcmdlQ2VsbHMoKS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmdlbmVydGVLZXkoZm5hbWUsIGRhdGEpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5nZXRNZXJnZUNlbGxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lm1lcmdlQ2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuc2V0TWVyZ2VDZWxscyA9IGZ1bmN0aW9uIChrZXksIHNwYW4pIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm1lcmdlQ2VsbHNba2V5XSA9IHNwYW47XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUudXBkYXRlVmlydHVhbENlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBtQ2VsbHMgPSB0aGlzLmdldE1lcmdlQ2VsbHMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhtQ2VsbHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbUNlbGxzW2tleV07XG4gICAgICAgICAgICAgICAgdmFyIG1lcmdlID0gdGhpcy5zcGxpdEtleShrZXkpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMuZ2V0SW5kZXhGcm9tQWxsQ29sdW1ucyhtZXJnZVswXSk7XG4gICAgICAgICAgICAgICAgdmFyIHZDb2x1bW5JbmRpY2VzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gdmFsdWUgLSAodkNvbHVtbkluZGljZXNbMF0gLSBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbkluZGV4IDwgdkNvbHVtbkluZGljZXNbMF0gJiYgc3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCByb3dzXzEgPSByb3dzOyBfYiA8IHJvd3NfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2JdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5kYXRhW21lcmdlWzBdXS50b1N0cmluZygpID09PSBtZXJnZVsxXS50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzWzBdLmNlbGxTcGFuID0gc3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHNbMF0uc3BhblRleHQgPSBtZXJnZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLmdldEluZGV4RnJvbUFsbENvbHVtbnMgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDZWxsTWVyZ2VSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxNZXJnZVJlbmRlciA9IENlbGxNZXJnZVJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jZWxsLW1lcmdlLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd18xLCBlbnVtXzEsIGNlbGxfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/IGFyZ3Muc3RhcnRJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoOyBpIDwgbGVuOyBpKyssIHN0YXJ0SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5lbnN1cmVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2xzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZXgsIGNzc0NsYXNzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBvcHRpb25zLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtcm93Jyk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb25zLmNzc0NsYXNzID0gY3NzQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zLmlzQWx0Um93ID0gdGhpcy5wYXJlbnQuZW5hYmxlQWx0Um93ID8gaW5kZXggJSAyICE9PSAwIDogZmFsc2U7XG4gICAgICAgICAgICBvcHRpb25zLmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKGluZGV4KSA+IC0xO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5lbnN1cmVDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IGNlbGxzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2VsbHMob3B0aW9ucykpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1taWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgZHVtbWllcy5mb3JFYWNoKGZ1bmN0aW9uIChkdW1teSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGR1bW15LCBvcHRpb25zLnVpZCwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkdW1teS5jb21tYW5kcykgPyB1bmRlZmluZWQgOiBlbnVtXzEuQ2VsbFR5cGUuQ29tbWFuZENvbHVtbiwgbnVsbCwgaW5kZXgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHJvd0lkLCBjZWxsVHlwZSwgY29sU3Bhbiwgb0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQgfHwgY29sdW1uLnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogcm93SWQsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsVHlwZSkgPyBjZWxsVHlwZSA6IGVudW1fMS5DZWxsVHlwZS5EYXRhLFxuICAgICAgICAgICAgICAgICdjb2xTcGFuJzogY29sU3BhbixcbiAgICAgICAgICAgICAgICAnY29tbWFuZHMnOiBjb2x1bW4uY29tbWFuZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAob3B0LmlzRGF0YUNlbGwgfHwgb3B0LmNvbHVtbi50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgb3B0LmluZGV4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dNb2RlbEdlbmVyYXRvciA9IFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93KG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJvdztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93ID0gUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGwob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5pc1NwYW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGwgPSBDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL21vZGVscy9yb3dcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBlajJfYmFzZV8xLCBlbnVtXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cE1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cE1vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgX3RoaXMuc3VtbWFyeU1vZGVsR2VuID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmNhcHRpb25Nb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MuY2FsbCh0aGlzLCBkYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uID8gKHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogZGF0YS5yZWNvcmRzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoMCwgZGF0YVtpXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdyb3VwZWRSZWNvcmRzID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhLCByYXcpIHtcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IHJhdztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEuaXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YS5Hcm91cEd1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHRoaXMucm93cy5jb25jYXQodGhpcy5nZW5lcmF0ZURhdGFSb3dzKGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCwgZGF0YVtqXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KHRoaXMuZ2VuZXJhdGVDYXB0aW9uUm93KGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaXRlbXMgJiYgZGF0YS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCArIDEsIGRhdGEuaXRlbXMsIGRhdGEuaXRlbXMubGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gdGhpcy5yb3dzKS5wdXNoLmFwcGx5KF9hLCB0aGlzLnN1bW1hcnlNb2RlbEdlbi5nZW5lcmF0ZVJvd3MoZGF0YSwgeyBsZXZlbDogbGV2ZWwgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2FwdGlvblJvd0NlbGxzID0gZnVuY3Rpb24gKGZpZWxkLCBpbmRlbnQsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwZWRMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRlbnQgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IDEgOlxuICAgICAgICAgICAgICAgICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCArIGdyb3VwZWRMZW4gKyAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCA/IDEgOiAwKSAtXG4gICAgICAgICAgICAgICAgICAgIGluZGVudCArICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCA/IC0xIDogMCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoICYmICF0aGlzLmNhcHRpb25Nb2RlbEdlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FwdGlvbkNlbGxzID0gdGhpcy5jYXB0aW9uTW9kZWxHZW4uZ2VuZXJhdGVSb3dzKGRhdGEpWzBdO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGRhdGEsIGNhcHRpb25DZWxscy5kYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgY0luZGV4XzEgPSAwO1xuICAgICAgICAgICAgICAgIGNhcHRpb25DZWxscy5jZWxscy5zb21lKGZ1bmN0aW9uIChjZWxsLCBpbmRleCkgeyBjSW5kZXhfMSA9IGluZGV4OyByZXR1cm4gY2VsbC52aXNpYmxlICYmIGNlbGwuaXNEYXRhQ2VsbDsgfSk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZXMgPSBjYXB0aW9uQ2VsbHMuY2VsbHMuc2xpY2UoY0luZGV4XzEpLmZpbHRlcihmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY2FwdGlvbkNlbGxzLnZpc2libGUgJiYgdmlzaWJsZXNbMF0uY29sdW1uLmZpZWxkID09PSB0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpWzBdLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVzID0gdmlzaWJsZXMuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgLSB2aXNpYmxlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29scyA9ICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbY29sdW1uXSA6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgY29scy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcEZsYWcgPSB3RmxhZyAmJiBpbmRleGVzLmluZGV4T2YoaW5kZW50KSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRtcEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxUeXBlID0gIV90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCB0bXBGbGFnID9cbiAgICAgICAgICAgICAgICAgICAgZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiA6IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eTtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24gPyBpbmRlbnQgKyBncm91cGVkTGVuIDogaW5kZW50O1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGNvbHVtbiwgbnVsbCwgY2VsbFR5cGUsIGluZGVudCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjZWxscy5wdXNoLmFwcGx5KGNlbGxzLCB2aXNpYmxlcyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2FwdGlvblJvdyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChkYXRhLmZpZWxkKTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkYXRhKTtcbiAgICAgICAgICAgIGlmIChjb2wpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZmllbGQgPSBkYXRhLmZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5pc0RhdGFSb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMuZ2V0Q2FwdGlvblJvd0NlbGxzKGRhdGEuZmllbGQsIGluZGVudCwgcm93LmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVEYXRhUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IHRoaXMuZ2VuZXJhdGVSb3coZGF0YVtpXSwgdGhpcy5pbmRleCwgaSA/IHVuZGVmaW5lZCA6ICdlLWZpcnN0Y2hpbGRyb3cnLCBpbmRlbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy51bnNoaWZ0KHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVJbmRlbnRDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaFJvd3MgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IF90aGlzLmdlbmVyYXRlQ2VsbHMocm93KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3cuaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKHJvdy5pbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLnVuc2hpZnQoX3RoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY1JvdyA9IF90aGlzLmdlbmVyYXRlQ2FwdGlvblJvdyhyb3cuZGF0YSwgcm93LmluZGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IGNSb3cuY2VsbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cE1vZGVsR2VuZXJhdG9yO1xuICAgIH0ocm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cE1vZGVsR2VuZXJhdG9yID0gR3JvdXBNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL21vZGVscy9jb2x1bW5cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL21vZGVscy9jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGNvbHVtbl8xLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVudW1fMSwgY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBfdGhpcy5jb2x1bW5TZWxlY3Rvcihjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goeyBjb2x1bW5zOiBjb2x1bW5zIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY29sdW1ucy5wdXNoKG5ldyBjb2x1bW5fMS5Db2x1bW4oe30pKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2gobmV3IGNvbHVtbl8xLkNvbHVtbih7fSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1ucy5wdXNoLmFwcGx5KGNvbHVtbnMsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoaW5wdXQsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5idWlsZFN1bW1hcnlEYXRhKGlucHV0LCBhcmdzKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmdldERhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcm93cy5wdXNoKF90aGlzLmdldEdlbmVyYXRlZFJvdyhyb3csIGRhdGFbaW5kZXhdLCBhcmdzID8gYXJncy5sZXZlbCA6IHVuZGVmaW5lZCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHZW5lcmF0ZWRSb3cgPSBmdW5jdGlvbiAoc3VtbWFyeVJvdywgZGF0YSwgcmF3KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGVudHMgPSB0aGlzLmdldEluZGVudEJ5TGV2ZWwocmF3KTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRMZW5ndGggPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICsgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlID8gMSA6IDApO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiB0bXAucHVzaChfdGhpcy5nZXRHZW5lcmF0ZWRDZWxsKHZhbHVlLCBzdW1tYXJ5Um93LCBpbmRleCA+PSBpbmRlbnRMZW5ndGggPyBfdGhpcy5nZXRDZWxsVHlwZSgpIDogZW51bV8xLkNlbGxUeXBlLkluZGVudCwgaW5kZW50c1tpbmRleF0pKTsgfSk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyh7IGRhdGE6IGRhdGEsIGF0dHJpYnV0ZXM6IHsgY2xhc3M6ICdlLXN1bW1hcnlyb3cnIH0gfSk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0bXA7XG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRtcC5zb21lKGZ1bmN0aW9uIChjZWxsKSB7IHJldHVybiBjZWxsLmlzRGF0YUNlbGwgJiYgY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R2VuZXJhdGVkQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHN1bW1hcnlSb3csIGNlbGxUeXBlLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBzQ29sdW1uID0gc3VtbWFyeVJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoc2NvbHVtbikgeyByZXR1cm4gc2NvbHVtbi5jb2x1bW5OYW1lID09PSBjb2x1bW4uZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgdmFyIGF0dHJzID0geyAnc3R5bGUnOiB7ICd0ZXh0QWxpZ24nOiBjb2x1bW4udGV4dEFsaWduIH0gfTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgICAgICAgICBhdHRycy5jbGFzcyA9IGluZGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNDb2x1bW4pLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogc0NvbHVtbiAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzQ29sdW1uLmZvb3RlclRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHx8IHNDb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBzQ29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogc0NvbHVtbiB8fCB7fSxcbiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcyc6IGF0dHJzLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmJ1aWxkU3VtbWFyeURhdGEgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1teSA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1bW1hcnlSb3dzID0gdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0ge307XG4gICAgICAgICAgICB2YXIga2V5ID0gJyc7XG4gICAgICAgICAgICBzdW1tYXJ5Um93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBzaW5nbGUgPSB7fTtcbiAgICAgICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlID0gX3RoaXMuc2V0VGVtcGxhdGUoY29sdW1uLCAoYXJncyAmJiBhcmdzLmFnZ3JlZ2F0ZXMpID8gYXJncyA6IGRhdGEsIHNpbmdsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHVtbXkucHVzaChzaW5nbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZHVtbXk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiAnZS1pbmRlbnRjZWxsdG9wJzsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoY29sdW1uLCBkYXRhLCBzaW5nbGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZTtcbiAgICAgICAgICAgIHZhciBoZWxwZXIgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JtYXRGbiA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGE7IH07IH0pKCk7XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBkYXRhO1xuICAgICAgICAgICAgaWYgKCEodHlwZXMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICB0eXBlcyA9IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcCA9IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBncm91cC5hZ2dyZWdhdGVzICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdyb3VwLmFnZ3JlZ2F0ZXNba2V5XSkgPyBncm91cC5hZ2dyZWdhdGVzW2tleV0gOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGdyb3VwLmFnZ3JlZ2F0ZXMgPyBncm91cC5yZXN1bHQgOiBkYXRhLCBjb2x1bW4sIF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdID0gc2luZ2xlW2Rpc3BdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVtrZXldID0gdmFsO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVt0eXBlXSA9IGZvcm1hdEZuKHZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXS5maWVsZCA9IGdyb3VwLmZpZWxkO1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0ua2V5ID0gZ3JvdXAua2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyLmZvcm1hdCA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGNvbHVtbi5zZXRUZW1wbGF0ZShoZWxwZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHNpbmdsZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRJbmRlbnRCeUxldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubWFwKGZ1bmN0aW9uICh2LCBpbmR4KSB7IHJldHVybiBpbmR4IDw9IGxldmVsIC0gMSA/ICcnIDogJ2UtaW5kZW50Y2VsbHRvcCc7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5pdFZhbCA9IHsgY29sdW1uczogW10gfTtcbiAgICAgICAgICAgIHJldHVybiBbX3N1cGVyLnByb3RvdHlwZS5nZXREYXRhLmNhbGwodGhpcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldi5jb2x1bW5zID0gcHJldi5jb2x1bW5zLmNvbmNhdChjdXIuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgIH0sIGluaXRWYWwpXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5nZXREYXRhKClbMF0uY29sdW1ucyB8fCBbXSkubGVuZ3RoID09PSAwO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9hY3Rpb25zL2NoZWNrYm94LWZpbHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSwgZXZlbnRzLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgY2hlY2tib3hfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5pbml0RGF0YU1hbmFnZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dzQWRkZWQsIHRoaXMuYWRkUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucmVtb3ZlUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51cGRhdGVEYXRhLCB0aGlzLmNydWRBY3Rpb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hZGREZWxldGVBY3Rpb24sIHRoaXMuZ2V0RGF0YSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaW5pdERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBnT2JqLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID8gZ09iai5kYXRhU291cmNlIDpcbiAgICAgICAgICAgICAgICAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRhdGFTb3VyY2UpID8gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoKSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGdPYmouZGF0YVNvdXJjZSkpO1xuICAgICAgICAgICAgZ09iai5xdWVyeSA9IGdPYmoucXVlcnkgaW5zdGFuY2VvZiBlajJfZGF0YV8xLlF1ZXJ5ID8gZ09iai5xdWVyeSA6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdlbmVyYXRlUXVlcnkgPSBmdW5jdGlvbiAoc2tpcFBhZ2UpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBnT2JqLnF1ZXJ5LmNsb25lKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGVzID0gY2hlY2tib3hfZmlsdGVyXzEuQ2hlY2tCb3hGaWx0ZXIuZ2V0UHJlZGljYXRlKGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcmVkaWNhdGVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZCA9ICdhbmQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHByZWRpY2F0ZXNbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwcmVkaWNhdGUpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbYW5kXShvYmopIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2IgPCBjb2x1bW5zXzEubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19iXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzVHlwZSA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2wuZmllbGQpLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc1R5cGUgIT09ICdkYXRlJyAmJiBzVHlwZSAhPT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKGNvbC5maWVsZCwgY29sLm9wZXJhdG9yLCBjb2wudmFsdWUsICFjb2wubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHRoaXMuZ2V0RGF0ZVByZWRpY2F0ZShjb2wpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnNlYXJjaFNldHRpbmdzLmtleS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc1NldHRpbmdzID0gZ09iai5zZWFyY2hTZXR0aW5ncztcbiAgICAgICAgICAgICAgICBzU2V0dGluZ3MuZmllbGRzID0gc1NldHRpbmdzLmZpZWxkcy5sZW5ndGggPyBzU2V0dGluZ3MuZmllbGRzIDogZ09iai5nZXRDb2x1bW5GaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICAgICAgcXVlcnkuc2VhcmNoKHNTZXR0aW5ncy5rZXksIHNTZXR0aW5ncy5maWVsZHMsIHNTZXR0aW5ncy5vcGVyYXRvciwgc1NldHRpbmdzLmlnbm9yZUNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5hZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZSBpbnN0YW5jZW9mIEFycmF5ID8gY29sdW1uLnR5cGUgOiBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7IHJldHVybiBxdWVyeS5hZ2dyZWdhdGUodHlwZSwgY29sdW1uLmZpZWxkKTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSAmJiBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICB2YXIgc29ydEdycCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5zLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbnNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuc29ydEJ5KGNvbHVtbnNbaV0uZmllbGQsIGNvbHVtbnNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRHcnAucHVzaChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc29ydEdycC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5zb3J0Qnkoc29ydEdycFtpXS5maWVsZCwgc29ydEdycFtpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1BhZ2luZyB8fCBnT2JqLmVuYWJsZVZpcnR1YWxpemF0aW9uKSAmJiBza2lwUGFnZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnBhZ2UoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UsIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNHcnBGbXQgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpXSkuZW5hYmxlR3JvdXBCeUZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5zW2ldKS5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0dycEZtdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuZ3JvdXAoY29sdW1uc1tpXSwgdGhpcy5mb3JtYXRHcm91cENvbHVtbi5iaW5kKHRoaXMpLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuZ3JvdXAoY29sdW1uc1tpXSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoYXJncywgcXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAnJyB9OyB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoYXJncy5mb3JlaWduS2V5RGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFyZ3MuZm9yZWlnbktleURhdGEpLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgYXJncy5mb3JlaWduS2V5RGF0YSA6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCkpO1xuICAgICAgICAgICAgc3dpdGNoIChhcmdzLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIucmVtb3ZlKGtleSwgYXJncy5kYXRhWzBdLCBudWxsLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5pbnNlcnQoYXJncy5kYXRhLCBudWxsLCBxdWVyeSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YU1hbmFnZXIucmVhZHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZHkgPSB0aGlzLmRhdGFNYW5hZ2VyLnJlYWR5O1xuICAgICAgICAgICAgICAgIHJlYWR5LnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5mb3JtYXRHcm91cENvbHVtbiA9IGZ1bmN0aW9uICh2YWx1ZSwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VydmljZUxvY2F0b3IgPSB0aGlzLnNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCFjb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbi50eXBlID0gZGF0ZS5nZXREYXkgPyAoZGF0ZS5nZXRIb3VycygpID4gMCB8fCBkYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXRTZWNvbmRzKCkgPiAwIHx8IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgPiAwID8gJ2RhdGV0aW1lJyA6ICdkYXRlJykgOiB0eXBlb2YgKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Rm9ybWF0dGVyKHNlcnZpY2VMb2NhdG9yLCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZvcm1hdFZhbCA9IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS50b1ZpZXcodmFsdWUsIGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VmFsO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5jcnVkQWN0aW9ucyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBwciA9ICdwcm9taXNlJztcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleShhcmdzLmZvcmVpZ25LZXlEYXRhICYmXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYXJncy5mb3JlaWduS2V5RGF0YSkubGVuZ3RoID8gYXJncy5mb3JlaWduS2V5RGF0YSA6XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIudXBkYXRlKGtleSwgYXJncy5kYXRhLCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1twcl0gPSBwcm9taXNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jcnVkQWN0aW9uLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNoYW5nZXMoY2hhbmdlcywga2V5LCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaXNSZW1vdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLm9mZmxpbmUgIT09IHRydWUgJiYgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLnVybCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRlUHJlZGljYXRlID0gZnVuY3Rpb24gKGZpbHRlck9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGRhdGVQcmVkaWNhdGU7XG4gICAgICAgICAgICB2YXIgcHJldkRhdGU7XG4gICAgICAgICAgICB2YXIgbmV4dERhdGU7XG4gICAgICAgICAgICB2YXIgcHJldk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciBuZXh0T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoZmlsdGVyT2JqZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcgfHwgZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnbm90ZXF1YWwnKSB7XG4gICAgICAgICAgICAgICAgcHJldkRhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSAtIDEpKTtcbiAgICAgICAgICAgICAgICBuZXh0RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpICsgMikpO1xuICAgICAgICAgICAgICAgIHByZXZPYmoudmFsdWUgPSBwcmV2RGF0ZTtcbiAgICAgICAgICAgICAgICBuZXh0T2JqLnZhbHVlID0gbmV4dERhdGU7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJykge1xuICAgICAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFuJztcbiAgICAgICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdsZXNzdGhhbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ25vdGVxdWFsJykge1xuICAgICAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW5vcmVxdWFsJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZVN0ID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZXZPYmouZmllbGQsIHByZXZPYmoub3BlcmF0b3IsIHByZXZPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJlZGljYXRlRW5kID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKG5leHRPYmouZmllbGQsIG5leHRPYmoub3BlcmF0b3IsIG5leHRPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkYXRlUHJlZGljYXRlID0gZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnID8gcHJlZGljYXRlU3QuYW5kKHByZWRpY2F0ZUVuZCkgOiBwcmVkaWNhdGVTdC5vcihwcmVkaWNhdGVFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZXMgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUocHJldk9iai5maWVsZCwgcHJldk9iai5vcGVyYXRvciwgcHJldk9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRhdGVQcmVkaWNhdGUgPSBwcmVkaWNhdGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGVQcmVkaWNhdGU7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmFkZFJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGUucmVjb3Jkcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbi5zcGxpY2UoZS50b0luZGV4LCAwLCBlLnJlY29yZHNbaSAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUucmVtb3ZlUm93cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uO1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24gPSBqc29uLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiBlLnJlY29yZHMuaW5kZXhPZih2YWx1ZSkgPT09IC0xOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yZW1vdmVSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmFkZERlbGV0ZUFjdGlvbiwgdGhpcy5nZXREYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGEgPSBEYXRhO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlajJfYnV0dG9uc18xLCBldmVudHMsIHZhbHVlX2Zvcm1hdHRlcl8xLCB1dGlsXzIsIGVqMl9wb3B1cHNfMSwgZWoyX2lucHV0c18xLCBlajJfcG9wdXBzXzIsIHV0aWxfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2hlY2tCb3hGaWx0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDaGVja0JveEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0Q29uc3RhbnRzID0ge1xuICAgICAgICAgICAgICAgIFNlYXJjaDogJ1NlYXJjaCcsXG4gICAgICAgICAgICAgICAgT0s6ICdPSycsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBGaWx0ZXI6ICdGaWx0ZXInLFxuICAgICAgICAgICAgICAgIENsZWFyOiAnQ2xlYXInLFxuICAgICAgICAgICAgICAgIFNlbGVjdEFsbDogJ1NlbGVjdCBBbGwnLFxuICAgICAgICAgICAgICAgIEJsYW5rczogJ0JsYW5rcycsXG4gICAgICAgICAgICAgICAgVHJ1ZTogJ1RydWUnLFxuICAgICAgICAgICAgICAgIEZhbHNlOiAnRmFsc2UnLFxuICAgICAgICAgICAgICAgIE5vUmVzdWx0OiAnTm8gTWF0Y2hlcyBGb3VuZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jQm94VHJ1ZSA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3goZmFsc2UsIHsgY2hlY2tlZDogdHJ1ZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveChmYWxzZSwgeyBjaGVja2VkOiBmYWxzZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMucGFyZW50LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKHRoaXMucGFyZW50LmxvY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmluaXRMb2NhbGUodGhpcy5kZWZhdWx0Q29uc3RhbnRzKTtcbiAgICAgICAgICAgIHRoaXMuY0JveFRydWUuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGstaGlkZGVuJywgYXR0cnM6IHsgdHlwZTogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94VHJ1ZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hrLWhpZGRlbicsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94RmFsc2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5xdWVyeVNlbGVjdG9yKCcuZS1mcmFtZScpLmNsYXNzTGlzdC5hZGQoJ2UtdW5jaGVjaycpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RoaXMuY0JveFRydWUsIHRoaXMuY0JveEZhbHNlXSwgWydlLXJ0bCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuaW5pdExvY2FsZSA9IGZ1bmN0aW9uIChjb25zdGFudHMpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqID0gbmV3IGVqMl9iYXNlXzEuTDEwbih0aGlzLmdldE1vZHVsZU5hbWUoKSwgdGhpcy5kZWZhdWx0Q29uc3RhbnRzLCB0aGlzLnBhcmVudC5sb2NhbGUgfHwgJ2VuLVVTJyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZywgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnLnF1ZXJ5U2VsZWN0b3IoJy5lLXNlYXJjaGlucHV0JyksICdrZXl1cCcsIHRoaXMuc2VhcmNoQm94S2V5VXAsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZGxnLCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMuZGxnLnF1ZXJ5U2VsZWN0b3IoJy5lLXNlYXJjaGlucHV0Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGVtLCAna2V5dXAnLCB0aGlzLnNlYXJjaEJveEtleVVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnNlYXJjaEJveENsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlYXJjaGNsZWFyJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlYXJjaEljb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuc2VhcmNoQm94S2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVTZWFyY2hJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc0lucHV0LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRoaXMuc0ljb24sIFsnZS1jaGtjYW5jZWwtaWNvbiddLCBbJ2Utc2VhcmNoLWljb24nXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0aGlzLnNJY29uLCBbJ2Utc2VhcmNoLWljb24nXSwgWydlLWNoa2NhbmNlbC1pY29uJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmouZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZURhdGFTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKCEoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhU291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVNvdXJjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialt0aGlzLm9wdGlvbnMuZmllbGRdID0gZGF0YVNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VbaV0gPSBvYmo7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgPSBvcHRpb25zLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFTb3VyY2UoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICdzdHJpbmcnO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8ICcnO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucyA9IG9wdGlvbnMuZmlsdGVyZWRDb2x1bW5zIHx8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc29ydGVkQ29sdW1ucyA9IG9wdGlvbnMuc29ydGVkQ29sdW1ucyB8fCB0aGlzLnBhcmVudC5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5xdWVyeSA9IG9wdGlvbnMucXVlcnkgfHwgbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbGxvd0Nhc2VTZW5zaXRpdmUgPSBvcHRpb25zLmFsbG93Q2FzZVNlbnNpdGl2ZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgICAgICB0aGlzLmlzRmlsdGVyZWQgPSBvcHRpb25zLmZpbHRlcmVkQ29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZCh0aGlzLmRlZmF1bHRDb25zdGFudHMsIG9wdGlvbnMubG9jYWxpemVkU3RyaW5ncyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRBbmRTZXRDaGtFbGVtID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyB0aGlzLm9wdGlvbnMudHlwZSArICdfZXhjZWxEbGcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hlY2tib3hmaWx0ZXIgZS1maWx0ZXItcG9wdXAnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc0JveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXNlYXJjaGNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGlkZVNlYXJjaGJveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc0lucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyAnX1NlYXJjaEJveCcsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utc2VhcmNoaW5wdXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zSWNvbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1zZWFyY2hjbGVhciBlLXNlYXJjaC1pY29uIGUtaWNvbnMnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VhcmNoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNlYXJjaGJveCBlLWZpZWxkcycgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3guYXBwZW5kQ2hpbGQodGhpcy5zSW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc0JveC5hcHBlbmRDaGlsZCh0aGlzLnNlYXJjaEJveCk7XG4gICAgICAgICAgICAgICAgZWoyX2lucHV0c18xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5zSW5wdXQsIGZsb2F0TGFiZWxUeXBlOiAnTmV2ZXInLCBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VhcmNoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94LnF1ZXJ5U2VsZWN0b3IoJy5lLWlucHV0LWdyb3VwJykuYXBwZW5kQ2hpbGQodGhpcy5zSWNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNwaW5uZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zcGlubmVyJyB9KTtcbiAgICAgICAgICAgIHRoaXMuY0JveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkICsgdGhpcy5vcHRpb25zLnR5cGUgKyAnX0NoZWNrQm94TGlzdCcsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGVja2JveGxpc3QgZS1maWVsZHMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3Bpbm5lci5hcHBlbmRDaGlsZCh0aGlzLmNCb3gpO1xuICAgICAgICAgICAgdGhpcy5zQm94LmFwcGVuZENoaWxkKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zQm94O1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogZXZlbnRzLmZpbHRlckJlZm9yZU9wZW4sIGZpbHRlck1vZGVsOiB0aGlzLFxuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMub3B0aW9ucy5maWVsZCwgY29sdW1uVHlwZTogdGhpcy5vcHRpb25zLnR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwgY29udGVudDogdGhpcy5zQm94LFxuICAgICAgICAgICAgICAgIGNsb3NlOiB0aGlzLmNsb3NlRGlhbG9nLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgd2lkdGg6ICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh1dGlsXzEucGFyZW50c1VudGlsKG9wdGlvbnMudGFyZ2V0LCAnZS1iaWdnZXInKSkpXG4gICAgICAgICAgICAgICAgICAgIHx8IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpID8gMjYwIDogMjUwLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwodGhpcy5pc0V4Y2VsID8gJ09LJyA6ICdGaWx0ZXInKSwgY3NzQ2xhc3M6ICdlLXByaW1hcnknLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmdldExvY2FsaXplZExhYmVsKHRoaXMuaXNFeGNlbCA/ICdDYW5jZWwnIDogJ0NsZWFyJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiB0aGlzLmRpYWxvZ0NyZWF0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLmRpYWxvZ09wZW4uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5hcHBlbmRUbyh0aGlzLmRsZyk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICc4MDBweCc7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMi5jcmVhdGVTcGlubmVyKHsgdGFyZ2V0OiB0aGlzLnNwaW5uZXIgfSk7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzIuc2hvd1NwaW5uZXIodGhpcy5zcGlubmVyKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGlhbG9nQ3JlYXRlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMy5nZXRGaWx0ZXJNZW51UG9zdGlvbih0aGlzLm9wdGlvbnMudGFyZ2V0LCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlckRpYWxvZ0NyZWF0ZWQsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUub3BlbkRpYWxvZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5nZXRBbmRTZXRDaGtFbGVtKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2dPYmogJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5maWx0ZXJNZW51Q2xvc2UsIHsgZmllbGQ6IHRoaXMub3B0aW9ucy5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmRsZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuYnRuQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBlLnRhcmdldC5pbm5lclRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldExvY2FsaXplZExhYmVsKHRoaXMuaXNFeGNlbCA/ICdPSycgOiAnRmlsdGVyJykudG9Mb3dlckNhc2UoKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx0ckJ0bkhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0NsZWFyJykudG9Mb3dlckNhc2UoKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5oYW5kbGVyKHsgYWN0aW9uOiAnY2xlYXItZmlsdGVyJywgZmllbGQ6IHRoaXMub3B0aW9ucy5maWVsZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmZsdHJCdG5IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBbXS5zbGljZS5jYWxsKHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jaGVjazpub3QoLmUtc2VsZWN0YWxsKScpKTtcbiAgICAgICAgICAgIHZhciBvcHRyID0gJ2VxdWFsJztcbiAgICAgICAgICAgIHZhciBjYXNlU2VuID0gdGhpcy5vcHRpb25zLnR5cGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWxsb3dDYXNlU2Vuc2l0aXZlIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy5vcHRpb25zLmZpZWxkLCBwcmVkaWNhdGU6ICdvcicsXG4gICAgICAgICAgICAgICAgb3BlcmF0b3I6IG9wdHIsIG1hdGNoY2FzZTogY2FzZVNlblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpc05vdEVxdWFsID0gdGhpcy5pdGVtc0NudCAhPT0gY2hlY2tlZC5sZW5ndGggJiYgdGhpcy5pdGVtc0NudCAtIGNoZWNrZWQubGVuZ3RoIDwgY2hlY2tlZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoaXNOb3RFcXVhbCkge1xuICAgICAgICAgICAgICAgIG9wdHIgPSAnbm90ZXF1YWwnO1xuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBbXS5zbGljZS5jYWxsKHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11bmNoZWNrOm5vdCguZS1zZWxlY3RhbGwpJykpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzLm9wZXJhdG9yID0gJ25vdGVxdWFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmT2JqO1xuICAgICAgICAgICAgdmFyIGNvbGwgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNbdXRpbF8xLnBhcmVudHNVbnRpbChjaGVja2VkW2ldLCAnZS1mdHJjaGsnKS5nZXRBdHRyaWJ1dGUoJ3VpZCcpXTtcbiAgICAgICAgICAgICAgICBmT2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHsgdmFsdWU6IHZhbHVlIH0sIGRlZmF1bHRzKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgIXZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZPYmoub3BlcmF0b3IgPSBpc05vdEVxdWFsID8gJ25vdGVxdWFsJyA6ICdlcXVhbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbGwucHVzaCh0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2RhdGUnID8gQ2hlY2tCb3hGaWx0ZXIuc2V0RGF0ZU9iamVjdChmT2JqKSA6IGZPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWF0ZUZpbHRlcihjb2xsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmluaXRpYXRlRmlsdGVyID0gZnVuY3Rpb24gKGZDb2xsKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RWYWwgPSBmQ29sbFswXTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZmlyc3RWYWwpKSB7XG4gICAgICAgICAgICAgICAgcHJlZGljYXRlID0gZmlyc3RWYWwuZWpwcmVkaWNhdGUgPyBmaXJzdFZhbC5lanByZWRpY2F0ZSA6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShmaXJzdFZhbC5maWVsZCwgZmlyc3RWYWwub3BlcmF0b3IsIGZpcnN0VmFsLnZhbHVlLCAhZmlyc3RWYWwubWF0Y2hjYXNlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGZDb2xsLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IGZDb2xsW2pdLmVqcHJlZGljYXRlICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlW2ZDb2xsW2pdLnByZWRpY2F0ZV0oZkNvbGxbal0uZWpwcmVkaWNhdGUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZVtmQ29sbFtqXS5wcmVkaWNhdGVdKGZDb2xsW2pdLmZpZWxkLCBmQ29sbFtqXS5vcGVyYXRvciwgZkNvbGxbal0udmFsdWUsICFmQ29sbFtqXS5tYXRjaGNhc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZmlsdGVyaW5nJywgZmlsdGVyQ29sbGVjdGlvbjogZkNvbGwsIGZpZWxkOiB0aGlzLm9wdGlvbnMuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGVqcHJlZGljYXRlOiBlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihwcmVkaWNhdGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaGFuZGxlcihhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMuc0lucHV0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5vcHRpb25zLnF1ZXJ5LmNsb25lKCk7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gKHRoaXMub3B0aW9ucy50eXBlICE9PSAnc3RyaW5nJyAmJiBwYXJzZUZsb2F0KHZhbCkpID8gcGFyc2VGbG9hdCh2YWwpIDogdmFsO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9yID0gJ2NvbnRhaW5zJztcbiAgICAgICAgICAgIHZhciBtYXRjaGNhc2UgPSB0cnVlO1xuICAgICAgICAgICAgcGFyc2VkID0gKHBhcnNlZCA9PT0gJycgfHwgcGFyc2VkID09PSB1bmRlZmluZWQpID8gdW5kZWZpbmVkIDogcGFyc2VkO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnVHJ1ZScpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwYXJzZWQudG9Mb3dlckNhc2UoKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnRmFsc2UnKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocGFyc2VkLnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSAnZmFsc2UnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2RhdGUnIHx8IHRoaXMub3B0aW9ucy50eXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gdGhpcy52YWx1ZUZvcm1hdHRlci5mcm9tVmlldyh2YWwsIHRoaXMub3B0aW9ucy5wYXJzZXJGbiwgdGhpcy5vcHRpb25zLnR5cGUpO1xuICAgICAgICAgICAgICAgIG9wZXJhdG9yID0gJ2VxdWFsJztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwYXJzZWQpICYmIHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkud2hlcmUodGhpcy5vcHRpb25zLmZpZWxkLCBvcGVyYXRvciwgcGFyc2VkLCBtYXRjaGNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YVNvdXJjZShxdWVyeSk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRQcmVkaWNhdGVGcm9tQ29scyA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZXMgPSBDaGVja0JveEZpbHRlci5nZXRQcmVkaWNhdGUoY29sdW1ucyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJlZGljYXRlcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGFuZCA9ICdhbmQnO1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSBwcmVkaWNhdGVzW3Byb3BdO1xuICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHByZWRpY2F0ZSkgP1xuICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbYW5kXShvYmopIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmdldEFsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIHF1ZXJ5LnJlcXVpcmVzQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kYXRhU291cmNlID0gdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMub3B0aW9ucy5kYXRhU291cmNlKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YVN1Y2Nlc3MoZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGF0YVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5mdWxsRGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnNbaV0uZmllbGQgIT09IHRoaXMub3B0aW9ucy5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29scy5wdXNoKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLmdldFByZWRpY2F0ZUZyb21Db2xzKGNvbHMpO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5mdWxsRGF0YSkuZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciByZXMgPSBDaGVja0JveEZpbHRlci5nZXREaXN0aW5jdChyZXN1bHQsIHRoaXMub3B0aW9ucy5maWVsZCk7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IHJlcy5yZWNvcmRzO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YVNvdXJjZShudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQWZ0ZXJPcGVuLFxuICAgICAgICAgICAgICAgIGZpbHRlck1vZGVsOiB0aGlzLCBjb2x1bW5OYW1lOiB0aGlzLm9wdGlvbnMuZmllbGQsIGNvbHVtblR5cGU6IHRoaXMub3B0aW9ucy50eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0RhdGFTb3VyY2UgPSBmdW5jdGlvbiAocXVlcnksIGlzSW5pdGlhbCkge1xuICAgICAgICAgICAgZWoyX3BvcHVwc18yLnNob3dTcGlubmVyKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLm9wdGlvbnMucXVlcnkuY2xvbmUoKTtcbiAgICAgICAgICAgIHF1ZXJ5LnJlcXVpcmVzQ291bnQoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQ2hvaWNlUmVxdWVzdCwgZmlsdGVyTW9kZWw6IHRoaXMsIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLmZpbHRlcmVkRGF0YVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihhcmdzLmRhdGFTb3VyY2UpLmV4ZWN1dGVMb2NhbChhcmdzLnF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGaWx0ZXJJdGVtcyhyZXMucmVzdWx0LCBpc0luaXRpYWwpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlUmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLmdldFByZWRpY2F0ZUZyb21Db2xzKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS53aGVyZShwcmVkaWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMuZnVsbERhdGEpLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJlc3VsdF8xID0gcmVzdWx0OyBfaSA8IHJlc3VsdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHRfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRbcmVzW3RoaXMub3B0aW9ucy5maWVsZF1dID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1jaGVja2JveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXNlYXJjaGJveCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3hDbGljayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdEFsbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmUtc2VsZWN0YWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdEFsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENCb3hlcyghc2VsZWN0QWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVjaycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMy50b29nbGVDaGVja2JveChlbGVtLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGVuQnRuKCk7XG4gICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1jaGstaGlkZGVuJykuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUFsbENCb3hlcyA9IGZ1bmN0aW9uIChjaGVja2VkKSB7XG4gICAgICAgICAgICB2YXIgY0JveGVzID0gW10uc2xpY2UuY2FsbCh0aGlzLmNCb3gucXVlcnlTZWxlY3RvckFsbCgnLmUtZnJhbWUnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNCb3hlc18xID0gY0JveGVzOyBfaSA8IGNCb3hlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjQm94ID0gY0JveGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHV0aWxfMy5yZW1vdmVBZGRDYm94Q2xhc3NlcyhjQm94LCBjaGVja2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmRpYWxvZ09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV2aWNlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWlucHV0LWdyb3VwJykuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYnRuJykuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmNyZWF0ZUNoZWNrYm94ID0gZnVuY3Rpb24gKHZhbHVlLCBjaGVja2VkKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGNoZWNrZWQgPyB0aGlzLmNCb3hUcnVlLmNsb25lTm9kZSh0cnVlKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5jQm94RmFsc2UuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1sYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpICYmIHZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID8gdmFsdWUgOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0JsYW5rcycpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge307XG4gICAgICAgICAgICAgICAgYXJnc1t0aGlzLm9wdGlvbnMuZmllbGRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKGxhYmVsLCB0aGlzLm9wdGlvbnMudGVtcGxhdGUoYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVJbmRldGVybWluYXRlbkJ0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjbnQgPSB0aGlzLmNCb3guY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBbXTtcbiAgICAgICAgICAgIHZhciBlbGVtID0gdGhpcy5jQm94LnF1ZXJ5U2VsZWN0b3IoJy5lLXNlbGVjdGFsbCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5jQm94LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNoZWNrOm5vdCguZS1zZWxlY3RhbGwpJykubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGJ0biA9IHRoaXMuZGxnLnF1ZXJ5U2VsZWN0b3IoJy5lLWZvb3Rlci1jb250ZW50JykucXVlcnlTZWxlY3RvcignLmUtYnRuJykuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNudCA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBbJ2UtY2hlY2snXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gWydlLXN0b3AnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtlbGVtXSwgWydlLWNoZWNrJywgJ2Utc3RvcCcsICdlLXVuY2hlY2snXSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtlbGVtXSwgY2xhc3NOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmNyZWF0ZUZpbHRlckl0ZW1zID0gZnVuY3Rpb24gKGRhdGEsIGlzSW5pdGlhbCkge1xuICAgICAgICAgICAgdmFyIGNCb3hlcyA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zQ250ID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0QWxsID0gdXRpbF8zLmNyZWF0ZUNib3hXaXRoV3JhcCh1dGlsXzEuZ2V0VWlkKCdjYm94JyksIHRoaXMuY3JlYXRlQ2hlY2tib3godGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VsZWN0QWxsJyksIGZhbHNlKSwgJ2UtZnRyY2hrJyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0QWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyYW1lJykuY2xhc3NMaXN0LmFkZCgnZS1zZWxlY3RhbGwnKTtcbiAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQoc2VsZWN0QWxsKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNDb2xGaWx0ZXJlZCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKCdmaWVsZCcsICdlcXVhbCcsIHRoaXMub3B0aW9ucy5maWVsZCkpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IHV0aWxfMS5nZXRVaWQoJ2Nib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdWlkXSA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGhpcy5vcHRpb25zLmZpZWxkLCBkYXRhW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZUZvcm1hdHRlci50b1ZpZXcoZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0aGlzLm9wdGlvbnMuZmllbGQsIGRhdGFbaV0pLCB0aGlzLm9wdGlvbnMuZm9ybWF0Rm4pO1xuICAgICAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQodXRpbF8zLmNyZWF0ZUNib3hXaXRoV3JhcCh1aWQsIHRoaXMuY3JlYXRlQ2hlY2tib3godmFsdWUsIHRoaXMuZ2V0Q2hlY2tlZFN0YXRlKGlzQ29sRmlsdGVyZWQsIHRoaXMudmFsdWVzW3VpZF0pKSwgJ2UtZnRyY2hrJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNCb3guaW5uZXJIVE1MID0gY0JveGVzLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGVuQnRuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBpbm5lckhUTUw6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ05vUmVzdWx0JykgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY0JveC5pbm5lckhUTUwgPSBjQm94ZXMuaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQ2hvaWNlUmVxdWVzdCwgZmlsdGVyTW9kZWw6IHRoaXMsIGRhdGFTb3VyY2U6IGRhdGEgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMi5oaWRlU3Bpbm5lcih0aGlzLnNwaW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0Q2hlY2tlZFN0YXRlID0gZnVuY3Rpb24gKGlzQ29sRmlsdGVyZWQsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNGaWx0ZXJlZCB8fCAhaXNDb2xGaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0W3ZhbHVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuZ2V0RGlzdGluY3QgPSBmdW5jdGlvbiAoanNvbiwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBqc29uLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBlalZhbHVlID0gJ2VqVmFsdWUnO1xuICAgICAgICAgICAgdmFyIGxvb2t1cCA9IHt9O1xuICAgICAgICAgICAgd2hpbGUgKGxlbi0tKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBqc29uW2xlbl07XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBlajJfYmFzZV8xLmdldFZhbHVlKGZpZWxkLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISh2YWx1ZSBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbZWpWYWx1ZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuc2V0VmFsdWUoZmllbGQsIHZhbHVlLCBvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb29rdXBbdmFsdWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWoyX2RhdGFfMS5EYXRhVXRpbC5ncm91cChlajJfZGF0YV8xLkRhdGFVdGlsLnNvcnQocmVzdWx0LCBmaWVsZCwgZWoyX2RhdGFfMS5EYXRhVXRpbC5mbkFzY2VuZGluZyksICdlalZhbHVlJyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnNldERhdGVPYmplY3QgPSBmdW5jdGlvbiAoZmlsdGVyT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgcHJldk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzIuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciBuZXh0T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMi5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoZmlsdGVyT2JqZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIHZhciBwcmV2RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpIC0gMSkpO1xuICAgICAgICAgICAgdmFyIG5leHREYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgKyAyKSk7XG4gICAgICAgICAgICBwcmV2T2JqLnZhbHVlID0gcHJldkRhdGU7XG4gICAgICAgICAgICBuZXh0T2JqLnZhbHVlID0gbmV4dERhdGU7XG4gICAgICAgICAgICBpZiAoZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnKSB7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdsZXNzdGhhbic7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFuJztcbiAgICAgICAgICAgICAgICBwcmV2T2JqLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnbm90ZXF1YWwnKSB7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdncmVhdGVydGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgICAgIG5leHRPYmoucHJlZGljYXRlID0gJ29yJztcbiAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgcHJldk9iai5wcmVkaWNhdGUgPSAnb3InO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZVN0ID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZXZPYmouZmllbGQsIHByZXZPYmoub3BlcmF0b3IsIHByZXZPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVFbmQgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUobmV4dE9iai5maWVsZCwgbmV4dE9iai5vcGVyYXRvciwgbmV4dE9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgZmlsdGVyT2JqZWN0LmVqcHJlZGljYXRlID0gZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnID8gcHJlZGljYXRlU3QuYW5kKHByZWRpY2F0ZUVuZCkgOlxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZVN0Lm9yKHByZWRpY2F0ZUVuZCk7XG4gICAgICAgICAgICBmaWx0ZXJPYmplY3QudHlwZSA9ICdkYXRlJztcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJPYmplY3Q7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLmdldFByZWRpY2F0ZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IENoZWNrQm94RmlsdGVyLmdldERpc3RpbmN0KGNvbHVtbnMsICdmaWVsZCcpLnJlY29yZHM7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbjtcbiAgICAgICAgICAgIHZhciBwcmVkID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoY29sdW1ucykuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUoJ2ZpZWxkJywgJ2VxdWFsJywgY29sc1tpXS5maWVsZCkpO1xuICAgICAgICAgICAgICAgIHByZWRbY29sc1tpXS5maWVsZF0gPSBDaGVja0JveEZpbHRlci5nZW5lcmF0ZVByZWRpY2F0ZShjb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmVkO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5nZW5lcmF0ZVByZWRpY2F0ZSA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gY29scyA/IGNvbHMubGVuZ3RoIDogMDtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGU7XG4gICAgICAgICAgICB2YXIgZmlyc3Q7XG4gICAgICAgICAgICBmaXJzdCA9IENoZWNrQm94RmlsdGVyLnVwZGF0ZURhdGVGaWx0ZXIoY29sc1swXSk7XG4gICAgICAgICAgICBpZiAoZmlyc3QudHlwZSA9PT0gJ2RhdGUnIHx8IGZpcnN0LnR5cGUgPT09ICdkYXRldGltZScpIHtcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBDaGVja0JveEZpbHRlci5nZXREYXRlUHJlZGljYXRlKGZpcnN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IGZpcnN0LmVqcHJlZGljYXRlID8gZmlyc3QuZWpwcmVkaWNhdGUgOlxuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoZmlyc3QuZmllbGQsIGZpcnN0Lm9wZXJhdG9yLCBmaXJzdC52YWx1ZSwgZmlyc3QuaWdub3JlQ2FzZSB8fCAhZmlyc3QubWF0Y2hjYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIHAgPSAxOyBwIDwgbGVuOyBwKyspIHtcbiAgICAgICAgICAgICAgICBjb2xzW3BdID0gQ2hlY2tCb3hGaWx0ZXIudXBkYXRlRGF0ZUZpbHRlcihjb2xzW3BdKTtcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMiAmJiBwID4gMSAmJiBjb2xzW3BdLnByZWRpY2F0ZSA9PT0gJ29yJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sc1twXS50eXBlID09PSAnZGF0ZScgfHwgY29sc1twXS50eXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUucHJlZGljYXRlcy5wdXNoKENoZWNrQm94RmlsdGVyLmdldERhdGVQcmVkaWNhdGUoY29sc1twXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlLnByZWRpY2F0ZXMucHVzaChuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoY29sc1twXS5maWVsZCwgY29sc1twXS5vcGVyYXRvciwgY29sc1twXS52YWx1ZSwgY29sc1twXS5pZ25vcmVDYXNlIHx8ICFjb2xzW3BdLm1hdGNoY2FzZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sc1twXS50eXBlID09PSAnZGF0ZScgfHwgY29sc1twXS50eXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGVbKGNvbHNbcF0ucHJlZGljYXRlKV0oQ2hlY2tCb3hGaWx0ZXIuZ2V0RGF0ZVByZWRpY2F0ZShjb2xzW3BdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBjb2xzW3BdLmVqcHJlZGljYXRlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbY29sc1twXS5wcmVkaWNhdGVdKGNvbHNbcF0uZWpwcmVkaWNhdGUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbKGNvbHNbcF0ucHJlZGljYXRlKV0oY29sc1twXS5maWVsZCwgY29sc1twXS5vcGVyYXRvciwgY29sc1twXS52YWx1ZSwgY29sc1twXS5pZ25vcmVDYXNlIHx8ICFjb2xzW3BdLm1hdGNoY2FzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlIHx8IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLmdldERhdGVQcmVkaWNhdGUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZWRpY2F0ZS5maWVsZCwgcHJlZGljYXRlLm9wZXJhdG9yLCBwcmVkaWNhdGUudmFsdWUsIHByZWRpY2F0ZS5pZ25vcmVDYXNlIHx8ICFwcmVkaWNhdGUubWF0Y2hjYXNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIudXBkYXRlRGF0ZUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXIudHlwZSAhPT0gJ2RhdGUnICYmICEoZmlsdGVyLnZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFsnZXF1YWwnLCAnbm90ZXF1YWwnXS5pbmRleE9mKGZpbHRlci5vcGVyYXRvcikgPT09IC0xID8gZmlsdGVyIDpcbiAgICAgICAgICAgICAgICBDaGVja0JveEZpbHRlci5zZXREYXRlT2JqZWN0KGZpbHRlcik7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdjaGVja2JveEZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDaGVja0JveEZpbHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2hlY2tCb3hGaWx0ZXIgPSBDaGVja0JveEZpbHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NoZWNrYm94LWZpbHRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIzX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMjRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIlxuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlbnVtXzEsIHJvd19yZW5kZXJlcl8xLCBjZWxsXzEsIHJvd18xLCBldmVudHMsIGVqMl9iYXNlXzQsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVyUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyUmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpIHx8ICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwYXJlbnRFbGUpXG4gICAgICAgICAgICAgICAgICAgICYmIHBhcmVudEVsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jaGVja3NlbGVjdGFsbCcpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnY2xvbmUgZS1oZWFkZXJjbG9uZScgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6IHBhcmVudEVsZTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcmNlbGxkaXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeVVpZChoZWFkZXJjZWxsZGl2LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuaGVhZGVyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuaGVhZGVyVGVtcGxhdGUuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5pbm5lckhUTUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbC5oZWFkZXJUZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuaW5uZXJIVE1MID0gY29sLmhlYWRlclRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gaGVhZGVyY2VsbGRpdiA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkJ5VWlkKGhlYWRlcmNlbGxkaXYuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuaGVhZGVyVGV4dCA6IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gKGhlaWdodCAtIDYpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh2aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZXN0IHx8IGNsb3Nlc3QuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXJlb3JkZXJ1cGFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcmRvd25hcnJvdycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiBlLnRhcmdldCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGV2ZW50OiBlLmV2ZW50IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGlmICgoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSAmJiAhdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWdPYmouYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCFlLmhlbHBlci5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0b3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZXZlbnQ6IGUuZXZlbnQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBjYW5jZWw6IGNhbmNlbCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgfHxcbiAgICAgICAgICAgICAgICAgICAgIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmhlYWRlckRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgdWlkOiB1aWQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3dpZHRoU2VydmljZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVUksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjb250ZW50JyB9KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyVGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKGhlYWRlckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyb3AoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7IHJvd3M6IHRoaXMucm93cyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS50SGVhZC5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyB9IH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHRoZWFkID0gZmluZEhlYWRlclJvdy50aGVhZDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7IGNsYXNzTmFtZTogdGhpcy5wYXJlbnQuZnJvemVuUm93cyA/ICcnIDogJ2UtaGlkZScgfSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgcm93Qm9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBib2R5Q2VsbDtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5yb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3dzW2ldLmNlbGxzW2pdO1xuICAgICAgICAgICAgICAgICAgICBib2R5Q2VsbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgcm93Qm9keS5hcHBlbmRDaGlsZChib2R5Q2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgfHwgZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgnZS1zb3J0ZmlsdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvd0JvZHkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRhYmxlLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgICAgICB2YXIgY29sSGVhZGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1jb2x1bW5oZWFkZXInIH0pO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIGdPYmopO1xuICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGNvbEhlYWRlcjtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93O1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMuZ2V0T2JqRGVwdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhpKTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5lbnN1cmVDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMuZ2V0SGVhZGVyQ2VsbHMocm93cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb2xEZXB0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93ID0gcm93UmVuZGVyZXIucmVuZGVyKHJvd3NbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHtcbiAgICAgICAgICAgICAgICB0aGVhZDogdGhlYWQsXG4gICAgICAgICAgICAgICAgcm93czogcm93c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmaW5kSGVhZGVyUm93O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUoY29sLCB7ICdkaXNwbGF5JzogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmVuc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW5fMiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbl8yOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoYykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKSAmJiB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5wYXJlbnQuY29sdW1ucy5zbGljZSh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zLCB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLnNsaWNlKDAsIHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICA6ICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zID8gY29sdW1uIDogdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZENlbGxzKGNvbHNbaV0sIHJvd3MsIDAsIGkgPT09IDAsIGZhbHNlLCBpID09PSAobGVuIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ2VsbHMgPSBmdW5jdGlvbiAoY29scywgcm93cywgaW5kZXgsIGlzRmlyc3RPYmosIGlzRmlyc3RDb2wsIGlzTGFzdENvbCkge1xuICAgICAgICAgICAgdmFyIGxhc3RDb2wgPSBpc0xhc3RDb2wgPyAnZS1sYXN0Y2VsbCcgOiAnJztcbiAgICAgICAgICAgIGlmICghY29scy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbCA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENudChjb2xzLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sU3Bhbikge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29scy5jb2x1bW5zW2ldLCByb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHJvd18xLlJvdyh7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2xJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0LnJvd1NwYW4gfHwgb3B0LnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZ2V0Um93cygpKTtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gJyc7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIGlkeCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYWwgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkTm9kZXNbaWR4XSwgeyAnZGlzcGxheSc6IGRpc3BsYXlWYWwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNoaWxkKHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgdGFibGUuaW5zZXJ0QmVmb3JlKGZpbmRIZWFkZXJSb3cudGhlYWQsIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCksIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZENvbnRlbnQodGFibGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2xHcm91cFJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVIZWFkZXJEcmFnKCk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dzXzEgPSByb3dzOyBfaSA8IHJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZ0NlbGxzID0gW10uc2xpY2UuY2FsbChyb3cucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXB0b3BsZWZ0Y2VsbCcpKTtcbiAgICAgICAgICAgICAgICBpZiAoZ0NlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnQ2VsbHNbZ0NlbGxzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2UtbGFzdGdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgeyByb3dzOiB0aGlzLnJvd3MgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dUZXh0V3JhcCAmJiB0aGlzLnBhcmVudC50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlID09PSAnaGVhZGVyJykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHJvd3MsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRPYmpEZXB0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sc1tpXSwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA8IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRlcHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXggKyAxO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNoZWNrRGVwdGggPSBmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Q2VsbENudCA9IGZ1bmN0aW9uIChjb2wsIGNudCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNudCA9IHRoaXMuZ2V0Q2VsbENudChjb2wuY29sdW1uc1tpXSwgY250KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY250Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNudDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5hbGxvd1Jlb3JkZXJpbmcgfHwgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbChnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaGVhZGVyUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnID0gbmV3IGVqMl9iYXNlXzQuRHJhZ2dhYmxlKGhlYWRlclJvd3NbaV0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWhlYWRlcmNlbGwnLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6ICcuZS1yaGFuZGxlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV80LkRyb3BwYWJsZShnT2JqLmdldEhlYWRlckNvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlclJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSGVhZGVyUmVuZGVyID0gSGVhZGVyUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5yb3dDaGtCb3ggPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWNoZWNrc2VsZWN0JywgYXR0cnM6IHsgJ3R5cGUnOiAnY2hlY2tib3gnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXplciA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlciA9IGxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0dGVyLnRvVmlldyh2YWx1ZSwgY29sdW1uLmdldEZvcm1hdHRlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpdGVyYWxzID0gWydpbmRleCddO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNlbGwuY29sdW1uLmdldENvbHVtblRlbXBsYXRlKCkoZWoyX2Jhc2VfMS5leHRlbmQoeyAnaW5kZXgnOiBhdHRyaWJ1dGVzW2xpdGVyYWxzWzBdXSB9LCBkYXRhKSwgdGhpcy5wYXJlbnQsICd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lclRleHQgKyAnIGlzIHRlbXBsYXRlIGNlbGwnICsgJyBjb2x1bW4gaGVhZGVyICcgK1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5pbnZva2VGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5kb2VzSW1wbGVtZW50SW50ZXJmYWNlKGNvbHVtbi5mb3JtYXR0ZXIsICdnZXRWYWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBjb2x1bW4uZm9ybWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBmb3JtYXR0ZXIoKS5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29sdW1uLmZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbHVtbi5mb3JtYXR0ZXIoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlci5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFREID0gZnVuY3Rpb24gKHRkLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbm5lckh0bWwgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShjb2x1bW4uZmllbGQsIGRhdGEsIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdkYXRlJyAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5mb3JtYXQoY29sdW1uLCB2YWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICBpbm5lckh0bWwgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNOdWxsID0gKHZhbHVlICE9PSAndHJ1ZScgJiYgdmFsdWUgIT09ICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uZGlzcGxheUFzQ2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWNoZWNrYm94Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCA9IGlzTnVsbCA/IG51bGwgOiAnPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGRpc2FibGVkICcgKyAnLz4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsZVN0ciA9IGlzTnVsbCA/IG51bGwgOiB2YWx1ZSA9PT0gJ3RydWUnID8gJ1RydWUnIDogJ0ZhbHNlJztcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sID0gbG9jYWxlU3RyID8gdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQobG9jYWxlU3RyKSA6IGlubmVySHRtbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJvbUZvcm1hdHRlciA9IHRoaXMuaW52b2tlRm9ybWF0dGVyKGNvbHVtbiwgdmFsdWUsIGRhdGEpO1xuICAgICAgICAgICAgaW5uZXJIdG1sID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdHRlcikgPyBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZyb21Gb3JtYXR0ZXIpID8gJycgOiBmcm9tRm9ybWF0dGVyLnRvU3RyaW5nKCkgOiBpbm5lckh0bWw7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGlubmVySHRtbCArICcgY29sdW1uIGhlYWRlciAnICsgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ldmFsdWF0ZShub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSAmJiBjb2x1bW4udHlwZSAhPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSHRtbChub2RlLCBpbm5lckh0bWwsIGNvbHVtbi5nZXREb21TZXR0ZXIgPyBjb2x1bW4uZ2V0RG9tU2V0dGVyKCkgOiAnaW5uZXJIVE1MJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1ncmlkY2hrYm94Jyk7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnY29sdW1uIGhlYWRlciAnICsgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrV3JhcCA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3goZmFsc2UsIHsgY2hlY2tlZDogdmFsdWUsIGxhYmVsOiAnICcgfSk7XG4gICAgICAgICAgICAgICAgY2hlY2tXcmFwLmluc2VydEJlZm9yZSh0aGlzLnJvd0Noa0JveC5jbG9uZU5vZGUoKSwgY2hlY2tXcmFwLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hlY2tXcmFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgZGlzYWJsZWQ6IHRydWUsIGNoZWNrZWQ6IHZhbHVlID09PSAndHJ1ZScgfSk7XG4gICAgICAgICAgICAgICAgb2JqLmFwcGVuZFRvKG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwsIHByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IHZvaWQgMCkgeyBwcm9wZXJ0eSA9ICdpbm5lckhUTUwnOyB9XG4gICAgICAgICAgICBub2RlW3Byb3BlcnR5XSA9IGlubmVySHRtbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnRleHRBbGlnbiA9IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnY2xpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGNsaXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2VsbGlwc2lzd2l0aHRvb2x0aXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCkge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAnY29saW5kZXgnOiAnYXJpYS1jb2xpbmRleCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5jb2xTcGFuID0gY2VsbC5jb2xTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IGNlbGwucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtdGVtcGxhdGVjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoLmFwcGx5KGNsYXNzZXMsIFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmNvbGluZGV4XSA9IGNlbGwuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi52YWx1ZUFjY2Vzc29yKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyID0gQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEsIGFyaWFfc2VydmljZV8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwnLCBhdHRyczogeyByb2xlOiAnY29sdW1uaGVhZGVyJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIF90aGlzLmFyaWFTZXJ2aWNlID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICBfdGhpcy5oVHh0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcnRleHQnIH0pO1xuICAgICAgICAgICAgX3RoaXMuc29ydEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXNvcnRmaWx0ZXJkaXYgZS1pY29ucycgfSk7XG4gICAgICAgICAgICBfdGhpcy5ndWkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgX3RoaXMuY2hrQWxsQm94ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1jaGVja3NlbGVjdGFsbCcsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3VpLmNsb25lTm9kZSgpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBmbHRyTWVudUVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcm1lbnVkaXYgZS1pY29ucyBlLWljb24tZmlsdGVyJyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSwgZmx0ck1lbnVFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoY2VsbCwgbm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhbihub2RlKTtcbiAgICAgICAgICAgIHZhciBmbHRyTWVudUVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcm1lbnVkaXYgZS1pY29ucyBlLWljb24tZmlsdGVyJyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSwgZmx0ck1lbnVFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUhlYWRlciA9IGZ1bmN0aW9uIChjZWxsLCBub2RlLCBmbHRyTWVudUVsZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyID0ge307XG4gICAgICAgICAgICB2YXIgaW5uZXJESVYgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgJ2UtbWFwcGluZ3VpZCc6IGNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtaGVhZGVyY2VsbGRpdidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlclRleHQgPSB0aGlzLmhUeHRFbGUuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGV4dFtjb2x1bW4uZ2V0RG9tU2V0dGVyKCldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4uZWRpdFR5cGUgPSAnYm9vbGVhbmVkaXQnO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0FsbFdyYXAgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KGZhbHNlLCB7IGNoZWNrZWQ6IGZhbHNlLCBsYWJlbDogJyAnIH0pO1xuICAgICAgICAgICAgICAgIGNoZWNrQWxsV3JhcC5pbnNlcnRCZWZvcmUodGhpcy5jaGtBbGxCb3guY2xvbmVOb2RlKCksIGNoZWNrQWxsV3JhcC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChjaGVja0FsbFdyYXApO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmNsYXNzTGlzdC5hZGQoJ2UtaGVhZGVyY2hrY2VsbGRpdicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zb3J0RWxlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSAhPT0gJ2ZpbHRlcmJhcicpICYmXG4gICAgICAgICAgICAgICAgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQpKSAmJlxuICAgICAgICAgICAgICAgICEodGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgJiYgY29sdW1uLnNob3dDb2x1bW5NZW51KSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhmbHRyTWVudUVsZSwge1xuICAgICAgICAgICAgICAgICAgICAnZS1tYXBwaW5ndWlkJzogJ2UtZmxtZW51LScgKyBjb2x1bW4udWlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1mbHRyLWljb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hGbENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggIT09IG1hdGNoRmxDb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvdW50ID0gMDsgY291bnQgPCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgY291bnQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zW2NvdW50XS5maWVsZCA9PT0gY29sdW1uLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsdHJNZW51RWxlLmNsYXNzTGlzdC5hZGQoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGbENvbHVtbnMucHVzaChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChmbHRyTWVudUVsZS5jbG9uZU5vZGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2VsbC5jbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjb2x1bW4uY3VzdG9tQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIGFyaWFBdHRyLnNvcnQgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBhcmlhQXR0ci5ncmFiYmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gdGhpcy5leHRlbmRQcmVwYXJlSGVhZGVyKGNvbHVtbiwgbm9kZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaGVhZGVyVGVtcGxhdGUuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5pbm5lckhUTUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmlubmVySFRNTCA9IGNvbHVtbi5oZWFkZXJUZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnMobm9kZSwgYXJpYUF0dHIpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZXh0QWxpZ24pIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZXh0QWxpZ24pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsaWdubWVudCA9IGNvbHVtbi5oZWFkZXJUZXh0QWxpZ24gfHwgY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbm1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWdubWVudCA9PT0gJ3JpZ2h0JyB8fCBhbGlnbm1lbnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ2UtcmlnaHRhbGlnbicgOiAnZS1sZWZ0YWxpZ24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnY2xpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGNsaXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2VsbGlwc2lzd2l0aHRvb2x0aXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93c3BhbicsICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsLnJvd1NwYW4pID8gY2VsbC5yb3dTcGFuIDogMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1jb2xzcGFuJywgJzEnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmV4dGVuZFByZXBhcmVIZWFkZXIgPSBmdW5jdGlvbiAoY29sdW1uLCBub2RlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgJiYgY29sdW1uLnNob3dDb2x1bW5NZW51KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1jb2x1bW5tZW51JyB9KSk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoRmlsdGVyZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICE9PSBtYXRjaEZpbHRlcmVkQ29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tqXS5maWVsZCA9PT0gY29sdW1uLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZpbHRlcmVkQ29sdW1ucy5wdXNoKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0ci1pY29uJyk7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuY2xhc3NOYW1lID0gY29sdW1uLmFsbG93UmVzaXppbmcgPyAnZS1yaGFuZGxlciBlLXJjdXJzb3InIDogJ2UtcnN1cHByZXNzJztcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSGVhZGVyQ2VsbFJlbmRlcmVyID0gSGVhZGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBcmlhU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFyaWFTZXJ2aWNlKCkge1xuICAgICAgICB9XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHByb3BzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgICAgICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWdbbmFtZV0sIG9wdGlvbnNbbmFtZV0pOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEV4cGFuZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGV4cGFuZCkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmV4cGFuZCwgZXhwYW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldFNvcnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5zb3J0LCBkaXJlY3Rpb24sIHR5cGVvZiBkaXJlY3Rpb24gPT09ICdib29sZWFuJyk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRCdXN5ID0gZnVuY3Rpb24gKHRhcmdldCwgaXNCdXN5KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuYnVzeSwgaXNCdXN5KTtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5pbnZhbGlkLCBudWxsLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEdyYWJiZWQgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0dyYWJiZWQsIHJlbW92ZSkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmdyYWJiZWQsIGlzR3JhYmJlZCwgcmVtb3ZlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldERyb3BUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc1RhcmdldCkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmRyb3BlZmZlY3QsICdjb3B5JywgIWlzVGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFyaWFTZXJ2aWNlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5BcmlhU2VydmljZSA9IEFyaWFTZXJ2aWNlO1xuICAgIGZ1bmN0aW9uIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGF0dHJpYnV0ZSwgdmFsdWUsIHJlbW92ZSkge1xuICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBleHBhbmQ6ICdhcmlhLWV4cGFuZGVkJyxcbiAgICAgICAgcm9sZTogJ3JvbGUnLFxuICAgICAgICBzZWxlY3RlZDogJ2FyaWEtc2VsZWN0ZWQnLFxuICAgICAgICBtdWx0aXNlbGVjdGFibGU6ICdhcmlhLW11bHRpc2VsZWN0YWJsZScsXG4gICAgICAgIHNvcnQ6ICdhcmlhLXNvcnQnLFxuICAgICAgICBidXN5OiAnYXJpYS1idXN5JyxcbiAgICAgICAgaW52YWxpZDogJ2FyaWEtaW52YWxpZCcsXG4gICAgICAgIGdyYWJiZWQ6ICdhcmlhLWdyYWJiZWQnLFxuICAgICAgICBkcm9wZWZmZWN0OiAnYXJpYS1kcm9wZWZmZWN0JyxcbiAgICAgICAgaGFzcG9wdXA6ICdhcmlhLWhhc3BvcHVwJyxcbiAgICAgICAgbGV2ZWw6ICdhcmlhLWxldmVsJyxcbiAgICAgICAgY29sY291bnQ6ICdhcmlhLWNvbGNvdW50J1xuICAgIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvYXJpYS1zZXJ2aWNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsIGUtc3RhY2tlZGhlYWRlcmNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICByb2xlOiAnY29sdW1uaGVhZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3RhY2tlZGhlYWRlcmNlbGxkaXYnIH0pO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGNlbGwuY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4udG9vbFRpcCkge1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd0aXRsZScsIGNlbGwuY29sdW1uLnRvb2xUaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5jb2x1bW4udGV4dEFsaWduKSkge1xuICAgICAgICAgICAgICAgIGRpdi5zdHlsZS50ZXh0QWxpZ24gPSBjZWxsLmNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWNvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1yb3dzcGFuJywgJzEnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIgPSBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjZWxsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5JbmRlbnRDZWxsUmVuZGVyZXIgPSBJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgaGVscGVyID0ge307XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsLmNvbHVtbi5lbmFibGVHcm91cEJ5Rm9ybWF0ID8gZGF0YS5rZXkgOlxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0KGNlbGwuY29sdW1uLCBjZWxsLmNvbHVtbi52YWx1ZUFjY2Vzc29yKCdrZXknLCBkYXRhLCBjZWxsLmNvbHVtbikpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouZ3JvdXBTZXR0aW5ncy5jYXB0aW9uVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jYXB0aW9uVGVtcGxhdGUuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdPYmouZ3JvdXBTZXR0aW5ncy5jYXB0aW9uVGVtcGxhdGUpLmlubmVySFRNTC50cmltKCkpKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIoZ09iai5ncm91cFNldHRpbmdzLmNhcHRpb25UZW1wbGF0ZSkoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0ICsgJzogJyArIHZhbHVlICsgJyAtICcgKyBkYXRhLmNvdW50ICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKGRhdGEuY291bnQgPCAyID8gdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQoJ0l0ZW0nKSA6IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KCdJdGVtcycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBub2RlLmlubmVySFRNTCArICcgaXMgZ3JvdXBjYXB0aW9uIGNlbGwnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyID0gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyO1xuICAgIHZhciBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwY2FwdGlvbicgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyZuYnNwOyc7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5Hcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciA9IEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vaW5kZW50LWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeHBhbmRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRXhwYW5kQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFeHBhbmRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRXhwYW5kQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICdlLXJlY29yZHBsdXNleHBhbmQnO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJywgZGF0YS5maWVsZCk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZWotbWFwcGluZ3ZhbHVlJywgZGF0YS5rZXkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHBhbmRDZWxsUmVuZGVyZXI7XG4gICAgfShpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLkluZGVudENlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRXhwYW5kQ2VsbFJlbmRlcmVyID0gRXhwYW5kQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwdG9wbGVmdGNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsZGl2IGUtZW1wdHljZWxsJywgaW5uZXJIVE1MOiAnJm5ic3A7JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGhlYWRlcmNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1lbXB0eWNlbGwnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZGV0YWlscm93Y29sbGFwc2UnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7ICdhcmlhLWV4cGFuZGVkJzogJ2ZhbHNlJywgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1kdGRpYWdvbmFscmlnaHQgZS1pY29uLWdyaWdodGFycm93JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbEV4cGFuZENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkRldGFpbEV4cGFuZENlbGxSZW5kZXJlciA9IERldGFpbEV4cGFuZENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsUmVuZGVyZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbFJlbmRlcmVyRmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbFJlbmRlck1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmFkZENlbGxSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICBuYW1lID0gdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZSA6IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuZ2V0Q2VsbFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lIDogZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSBjZWxsUmVuZGVyZXIgXCIgKyBuYW1lICsgXCIgaXMgbm90IGZvdW5kXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2VsbFJlbmRlcmVyRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyRmFjdG9yeSA9IENlbGxSZW5kZXJlckZhY3Rvcnk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvY2VsbC1yZW5kZXItZmFjdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZXJ2aWNlTG9jYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlcnZpY2VMb2NhdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFNlcnZpY2VMb2NhdG9yLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZXNbbmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZXJ2aWNlTG9jYXRvci5wcm90b3R5cGUuZ2V0U2VydmljZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHNlcnZpY2UgXCIgKyBuYW1lICsgXCIgaXMgbm90IHJlZ2lzdGVyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzW25hbWVdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VydmljZUxvY2F0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlcnZpY2VMb2NhdG9yID0gU2VydmljZUxvY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc2VydmljZS1sb2NhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVuZGVyZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyZXJGYWN0b3J5KCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuYWRkUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgdmFyIHJOYW1lID0gZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLlJlbmRlclR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZW5kZXJlck1hcFtyTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcFtyTmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciByTmFtZSA9IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5SZW5kZXJUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVuZGVyZXJNYXBbck5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHJlbmRlcmVyIFwiICsgck5hbWUgKyBcIiBpcyBub3QgZm91bmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcmVyRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyZXJGYWN0b3J5ID0gUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3JlbmRlcmVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNvbnN0YW50XzEsIGNvbHVtbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5XaWR0aFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9Db2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgdmFyIHdGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5XaWR0aChuZXcgY29sdW1uXzEuQ29sdW1uKHsgd2lkdGg6ICczMHB4JyB9KSwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uV2lkdGgobmV3IGNvbHVtbl8xLkNvbHVtbih7IHdpZHRoOiAnMzBweCcgfSksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRDb2x1bW5XaWR0aChjb2x1bW4sIHdGbGFnID8gdW5kZWZpbmVkIDogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0Q29sdW1uV2lkdGggPSBmdW5jdGlvbiAoY29sdW1uLCBpbmRleCwgbW9kdWxlKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKSA6IGluZGV4O1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoKGNXaWR0aCwgY29sdW1uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nICYmIG1vZHVsZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXaWR0aFRvVGFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGNvbnN0YW50XzEuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBjb2x1bW5JbmRleCwgd2lkdGg6IGNXaWR0aCwgY29sdW1uOiBjb2x1bW4sIG1vZHVsZTogbW9kdWxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKHdpZHRoLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGZXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdCh3aWR0aCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sO1xuICAgICAgICAgICAgdmFyIG1IZHIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWhlYWRlcicpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgJiYgaW5kZXggPj0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyAmJiBtSGRyICYmIG1IZHIucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbCA9IG1IZHIucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleCAtIHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhlYWRlckNvbCkge1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbC5zdHlsZS53aWR0aCA9IGZXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgJiYgaW5kZXggPj0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2wgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKVxuICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleCAtIHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudENvbCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudENvbCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2wuc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXhdLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFNpYmxpbmdzSGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IHRoaXMuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbihlbGVtZW50LCAncHJldmlvdXMnKTtcbiAgICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICduZXh0Jyk7XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXMgKyBuZXh0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldEhlaWdodEZyb21EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2libGluZyA9IGVsZW1lbnRbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nW2RpcmVjdGlvbiArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgJiYgdGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludChjb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5taW5XaWR0aCAmJiB3aWR0aCA8IHBhcnNlSW50KGNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1pbldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGNvbHVtbi5tYXhXaWR0aCAmJiB3aWR0aCA+IHBhcnNlSW50KGNvbHVtbi5tYXhXaWR0aC50b1N0cmluZygpLCAxMCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5tYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0VGFibGVXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgdFdpZHRoID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgIT09IGZhbHNlICYmIGNXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0V2lkdGggKz0gcGFyc2VJbnQoY1dpZHRoLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdFdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9UYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJlZXplV2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjb2xHcnAgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpO1xuICAgICAgICAgICAgICAgIHZhciBtQ29sR3JwID0gZWoyX2Jhc2VfMS5zZWxlY3QoJy5lLW1vdmFibGVjb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbHVtbmhlYWRlcicpLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyZWV6ZVdpZHRoICs9IHBhcnNlSW50KGNvbEdycC5jaGlsZHJlbltpXS5zdHlsZS53aWR0aCwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0V2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQoZnJlZXplV2lkdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICAgICAgZnJlZXplV2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWoyX2Jhc2VfMS5zZWxlY3QoJy5lLW1vdmFibGVoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCcuZS1jb2x1bW5oZWFkZXInKS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmcmVlemVXaWR0aCArPSBwYXJzZUludChtQ29sR3JwLmNoaWxkcmVuWzBdLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baV0uc3R5bGUud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdFdpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KGZyZWV6ZVdpZHRoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnNlbGVjdCgnLmUtbW92YWJsZWhlYWRlcicpLmZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuc2VsZWN0KCcuZS1tb3ZhYmxlY29udGVudCcpLmZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdFdpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KHRoaXMuZ2V0VGFibGVXaWR0aCh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVkaXQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlLmUtaW5saW5lLWVkaXQnKTtcbiAgICAgICAgICAgIGlmIChlZGl0KSB7XG4gICAgICAgICAgICAgICAgZWRpdC5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbldpZHRoU2VydmljZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uV2lkdGhTZXJ2aWNlID0gQ29sdW1uV2lkdGhTZXJ2aWNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZW51bV8xLCBldmVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRm9jdXNTdHJhdGVneSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZvY3VzU3RyYXRlZ3kocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvID0ge307XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5mb3JnZXQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5za2lwRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJldkluZGV4ZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZm9jdXNDaGVjayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLnNraXBGb2N1cyA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICdlLXBhZ2VyJykgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmdldCgwLCAtMSwgWzAsIDFdLCBudWxsLCB0aGlzLmdldENvbnRlbnQoKS52YWxpZGF0b3IoKSk7XG4gICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguc2VsZWN0KGN1cnJlbnRbMF0sIGN1cnJlbnRbMV0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2tpcEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcEZvY3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSwgZm9yY2UpIHtcbiAgICAgICAgICAgIHZhciBpc0NvbnRlbnQgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1ncmlkY29udGVudCcpKTtcbiAgICAgICAgICAgIGlmICghaXNDb250ZW50ICYmIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtZ3JpZGhlYWRlcicpKSB8fFxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJtZW51ZGl2JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmVmb3JlQXJncyA9IHsgY2FuY2VsOiBmYWxzZSwgYnlLZXk6IGZhbHNlLCBieUNsaWNrOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlLnRhcmdldCksIGNsaWNrQXJnczogZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50LmJlZm9yZUNlbGxGb2N1c2VkLCBiZWZvcmVBcmdzKTtcbiAgICAgICAgICAgIGlmIChiZWZvcmVBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKGlzQ29udGVudCk7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsID0gdGhpcy5nZXRDb250ZW50KCkub25DbGljayhlLCBmb3JjZSk7XG4gICAgICAgICAgICBpZiAocmV0dXJuVmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwT24oZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmVmb3JlQXJncyA9IHsgY2FuY2VsOiBmYWxzZSwgYnlLZXk6IHRydWUsIGJ5Q2xpY2s6IGZhbHNlLCBrZXlBcmdzOiBlIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnQuYmVmb3JlQ2VsbEZvY3VzZWQsIGJlZm9yZUFyZ3MpO1xuICAgICAgICAgICAgaWYgKGJlZm9yZUFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJWYWx1ZSA9IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5jdXJyZW50O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mby5vdXRsaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc3dhcCA9IHRoaXMuZ2V0Q29udGVudCgpLmp1bXAoZS5hY3Rpb24sIGJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zd2FwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzSGVhZGVyID0gdGhpcy5oZWFkZXIgPT09IHRoaXMuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKGlzSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5pdFZhbCA9IGlzSGVhZGVyID8gLTEgOiB0aGlzLmhlYWRlci5tYXRyaXgubWF0cml4Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5nZXQocm93SW5pdFZhbCwgYlZhbHVlWzFdLCBbMCwgMF0sIGUuYWN0aW9uLCB0aGlzLmdldENvbnRlbnQoKS52YWxpZGF0b3IoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmN1cnJlbnQgPSBbcm93SW5pdFZhbCwgY3VycmVudFsxXV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2SW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KCkub25LZXlQcmVzcyhlKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoZSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnNraXBPbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgKHRoaXMucGFyZW50LmlzRWRpdCB8fCBbJ2luc2VydCcsICdmMicsICdkZWxldGUnXS5pbmRleE9mKGUuYWN0aW9uKSA+IC0xKVxuICAgICAgICAgICAgICAgIHx8IChlajJfYmFzZV8xLmNsb3Nlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJy5lLWZpbHRlcmJhcmNlbGwnKSAhPT0gbnVsbCAmJiBbJ2xlZnRBcnJvdycsICdyaWdodEFycm93J10uaW5kZXhPZihlLmFjdGlvbikgPiAtMSlcbiAgICAgICAgICAgICAgICB8fCAoZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRjb250ZW50JykgPT09IG51bGwgJiYgZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRoZWFkZXInKSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICB8fCAoZS5hY3Rpb24gPT09ICdzcGFjZScgJiYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyaWRjaGtib3gnKSAmJiBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZGNoa2JveCcpID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICYmIGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjaGtjZWxsZGl2JykgPT09IG51bGwpKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmdldEZvY3VzZWRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXM7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmUgfHwgdGhpcy5jb250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBjb250ZW50ID8gdGhpcy5jb250ZW50IDogdGhpcy5oZWFkZXI7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnNldEZvY3VzZWRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzID0gZWxlbWVudDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXMuZm9jdXMoKTsgfSwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm9jdXModGhpcy5nZXRDb250ZW50KCkuZ2V0Rm9jdXNJbmZvKCksIGUpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5yZW1vdmVGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50SW5mby5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5jdXJyZW50SW5mby5lbGVtZW50LCB0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzXSwgWydlLWZvY3VzZWQnLCAnZS1mb2N1cyddKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXMudGFiSW5kZXggPSAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuYWRkRm9jdXMgPSBmdW5jdGlvbiAoaW5mbywgZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mbyA9IGluZm87XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvLm91dGxpbmUgPSBpbmZvLm91dGxpbmUgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZSk7XG4gICAgICAgICAgICBpZiAoIWluZm8uZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0ZvY3VzZWQgPSBpbmZvLmVsZW1lbnRUb0ZvY3VzLmNsYXNzTGlzdC5jb250YWlucygnZS1mb2N1cycpO1xuICAgICAgICAgICAgaWYgKGlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmZvLm91dGxpbmUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtpbmZvLmVsZW1lbnRdLCBbJ2UtZm9jdXNlZCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2luZm8uZWxlbWVudFRvRm9jdXNdLCBbJ2UtZm9jdXMnXSk7XG4gICAgICAgICAgICBpbmZvLmVsZW1lbnQudGFiSW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKCFpc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzZWRFbGVtZW50KGluZm8uZWxlbWVudFRvRm9jdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50LmNlbGxGb2N1c2VkLCB7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogaW5mby5lbGVtZW50VG9Gb2N1cyxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGluZm8uZWxlbWVudCxcbiAgICAgICAgICAgICAgICBpbmRleGVzOiB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguY3VycmVudCxcbiAgICAgICAgICAgICAgICBieUtleTogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZSksXG4gICAgICAgICAgICAgICAgYnlDbGljazogZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlKSxcbiAgICAgICAgICAgICAgICBrZXlBcmdzOiBlLFxuICAgICAgICAgICAgICAgIGlzSnVtcDogdGhpcy5zd2FwLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250ZW50KCkuZ2V0SW5mbyhlKSxcbiAgICAgICAgICAgICAgICBvdXRsaW5lOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguY3VycmVudCwgcm93SW5kZXggPSBfYVswXSwgY2VsbEluZGV4ID0gX2FbMV07XG4gICAgICAgICAgICB0aGlzLnByZXZJbmRleGVzID0geyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnJlZnJlc2hNYXRyaXggPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50ICYmICFfdGhpcy5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbnRlbnQgPSBuZXcgQ29udGVudEZvY3VzKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY29udGVudCAmJiAhX3RoaXMuaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlciA9IG5ldyBIZWFkZXJGb2N1cyhfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY0ZvY3VzID0gY29udGVudCA/IF90aGlzLmNvbnRlbnQgOiBfdGhpcy5oZWFkZXI7XG4gICAgICAgICAgICAgICAgY0ZvY3VzLm1hdHJpeC5nZW5lcmF0ZShlLnJvd3MsIGNGb2N1cy5zZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgY0ZvY3VzLmdlbmVyYXRlUm93cyhlLnJvd3MpO1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpb25zID0gWydwYWdpbmcnLCAnZ3JvdXBpbmcnXTtcbiAgICAgICAgICAgICAgICBpZiAoZS5hcmdzICYmIGFjdGlvbnMuaW5kZXhPZihlLmFyZ3MucmVxdWVzdFR5cGUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2tpcEZvY3VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25Gb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkIHx8IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgfHwgdGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCAnbW91c2Vkb3duJywgdGhpcy5mb2N1c0NoZWNrLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLm9uRm9jdXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQua2V5UHJlc3NlZCwgdGhpcy5vbktleVByZXNzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmNsaWNrLCB0aGlzLm9uQ2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuY29udGVudFJlYWR5LCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hNYXRyaXgoKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbignY2xvc2UtZWRpdCcsIHRoaXMucmVzdG9yZUZvY3VzLCB0aGlzKTtcbiAgICAgICAgICAgIFsnc3RhcnQtZWRpdCcsICdzdGFydC1hZGQnXS5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHsgcmV0dXJuIF90aGlzLnBhcmVudC5vbihldnQsIF90aGlzLmNsZWFyT3V0bGluZSwgX3RoaXMpOyB9KTtcbiAgICAgICAgICAgIFsnc29ydGluZyddLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gX3RoaXMucGFyZW50Lm9uKGFjdGlvbiArIFwiLWNvbXBsZXRlXCIsIF90aGlzLnJlc3RvcmVGb2N1cywgX3RoaXMpOyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmJhdGNoQWRkLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuYmF0Y2hEZWxldGUsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5kZXRhaWxEYXRhQm91bmQsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5vbkVtcHR5LCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnbW91c2Vkb3duJywgdGhpcy5mb2N1c0NoZWNrKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLm9uRm9jdXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmtleVByZXNzZWQsIHRoaXMub25LZXlQcmVzcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuY2xpY2ssIHRoaXMub25DbGljayk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuY29udGVudFJlYWR5LCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoTWF0cml4KCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKCdjbG9zZS1lZGl0JywgdGhpcy5yZXN0b3JlRm9jdXMpO1xuICAgICAgICAgICAgWydzdGFydC1lZGl0JywgJ3N0YXJ0LWFkZCddLmZvckVhY2goZnVuY3Rpb24gKGV2dCkgeyByZXR1cm4gX3RoaXMucGFyZW50Lm9mZihldnQsIF90aGlzLmNsZWFyT3V0bGluZSk7IH0pO1xuICAgICAgICAgICAgWydzb3J0aW5nJ10uZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBfdGhpcy5wYXJlbnQub2ZmKGFjdGlvbiArIFwiLWNvbXBsZXRlXCIsIF90aGlzLnJlc3RvcmVGb2N1cyk7IH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmJhdGNoQWRkLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmJhdGNoRGVsZXRlLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmRldGFpbERhdGFCb3VuZCwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5vbkVtcHR5LCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSkpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnJlc3RvcmVGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRm9jdXModGhpcy5nZXRDb250ZW50KCkuZ2V0Rm9jdXNJbmZvKCkpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5jbGVhck91dGxpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguY3VycmVudCA9IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5nZXQoMCwgLTEsIFswLCAxXSwgJ2Rvd25BcnJvdycsIHRoaXMuZ2V0Q29udGVudCgpLnZhbGlkYXRvcigpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50SW5mby5lbGVtZW50IHx8ICF0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5jdXJyZW50SW5mby5lbGVtZW50LCB0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzXSwgWydlLWZvY3VzJywgJ2UtZm9jdXNlZCddKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZ2V0UHJldkluZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZm9yZ2V0ID0gdGhpcy5mb3JnZXQ7XG4gICAgICAgICAgICB0aGlzLmZvcmdldCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZvcmdldCA/IHsgcm93SW5kZXg6IG51bGwsIGNlbGxJbmRleDogbnVsbCB9IDogdGhpcy5wcmV2SW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZm9yZ2V0UHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZvcmdldCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGb2N1c1N0cmF0ZWd5O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Gb2N1c1N0cmF0ZWd5ID0gRm9jdXNTdHJhdGVneTtcbiAgICB2YXIgTWF0cml4ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTWF0cml4KCkge1xuICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCwgYWxsb3cpIHtcbiAgICAgICAgICAgIHJvd0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93SW5kZXgsIHRoaXMucm93cykpO1xuICAgICAgICAgICAgY29sdW1uSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5JbmRleCwgdGhpcy5jb2x1bW5zKSk7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeFtyb3dJbmRleF0gPSB0aGlzLm1hdHJpeFtyb3dJbmRleF0gfHwgW107XG4gICAgICAgICAgICB0aGlzLm1hdHJpeFtyb3dJbmRleF1bY29sdW1uSW5kZXhdID0gYWxsb3cgPyAxIDogMDtcbiAgICAgICAgfTtcbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4LCBuYXZpZ2F0b3IsIGFjdGlvbiwgdmFsaWRhdG9yKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gY29sdW1uSW5kZXg7XG4gICAgICAgICAgICBpZiAocm93SW5kZXggKyBuYXZpZ2F0b3JbMF0gPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtyb3dJbmRleCwgY29sdW1uSW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dJbmRleCArIG5hdmlnYXRvclswXSwgdGhpcy5yb3dzKSk7XG4gICAgICAgICAgICBjb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkluZGV4ICsgbmF2aWdhdG9yWzFdLCB0aGlzLm1hdHJpeFtyb3dJbmRleF0ubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5maXJzdCh0aGlzLm1hdHJpeFtyb3dJbmRleF0sIGNvbHVtbkluZGV4LCBuYXZpZ2F0b3IsIHRydWUsIGFjdGlvbik7XG4gICAgICAgICAgICBjb2x1bW5JbmRleCA9IGZpcnN0ID09PSBudWxsID8gdG1wIDogZmlyc3Q7XG4gICAgICAgICAgICB2YXIgdmFsID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZShyb3dJbmRleCArIFwiLlwiICsgY29sdW1uSW5kZXgsIHRoaXMubWF0cml4KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluVmFsaWQodmFsKSB8fCAhdmFsaWRhdG9yKHJvd0luZGV4LCBjb2x1bW5JbmRleCwgYWN0aW9uKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5nZXQocm93SW5kZXgsIHRtcCwgbmF2aWdhdG9yLCBhY3Rpb24sIHZhbGlkYXRvcikgOiBbcm93SW5kZXgsIGNvbHVtbkluZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICh2ZWN0b3IsIGluZGV4LCBuYXZpZ2F0b3IsIG1vdmVUbywgYWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoKChpbmRleCA8IDAgfHwgaW5kZXggPT09IHZlY3Rvci5sZW5ndGgpICYmIHRoaXMuaW5WYWxpZCh2ZWN0b3JbaW5kZXhdKVxuICAgICAgICAgICAgICAgICYmIChhY3Rpb24gIT09ICd1cEFycm93JyAmJiBhY3Rpb24gIT09ICdkb3duQXJyb3cnKSkgfHwgIXZlY3Rvci5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2ID09PSAxOyB9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmluVmFsaWQodmVjdG9yW2luZGV4XSkgPyBpbmRleCA6XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdCh2ZWN0b3IsIChbJ3VwQXJyb3cnLCAnZG93bkFycm93JywgJ3NoaWZ0VXAnLCAnc2hpZnREb3duJ10uaW5kZXhPZihhY3Rpb24pICE9PSAtMSkgPyBtb3ZlVG8gPyAwIDogKytpbmRleCA6IGluZGV4ICsgbmF2aWdhdG9yWzFdLCBuYXZpZ2F0b3IsIGZhbHNlLCBhY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBNYXRyaXgucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHJvd0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93SW5kZXgsIHRoaXMucm93cykpO1xuICAgICAgICAgICAgY29sdW1uSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5JbmRleCwgdGhpcy5tYXRyaXhbcm93SW5kZXhdLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IFtyb3dJbmRleCwgY29sdW1uSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBNYXRyaXgucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKHJvd3MsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gcm93cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBbXTtcbiAgICAgICAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93LCBySW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSByb3cuY2VsbHMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmlzU3Bhbm5lZCAhPT0gdHJ1ZTsgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sdW1ucyA9IE1hdGgubWF4KGNlbGxzLmxlbmd0aCAtIDEsIF90aGlzLmNvbHVtbnMgfCAwKTtcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGZ1bmN0aW9uIChjZWxsLCBjSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0KHJJbmRleCwgY0luZGV4LCBzZWxlY3Rvcihyb3csIGNlbGwpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4O1xuICAgICAgICB9O1xuICAgICAgICBNYXRyaXgucHJvdG90eXBlLmluVmFsaWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTWF0cml4O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5NYXRyaXggPSBNYXRyaXg7XG4gICAgdmFyIENvbnRlbnRGb2N1cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRlbnRGb2N1cyhwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXgoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5rZXlBY3Rpb25zID0ge1xuICAgICAgICAgICAgICAgICdyaWdodEFycm93JzogWzAsIDFdLFxuICAgICAgICAgICAgICAgICd0YWInOiBbMCwgMV0sXG4gICAgICAgICAgICAgICAgJ2xlZnRBcnJvdyc6IFswLCAtMV0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0VGFiJzogWzAsIC0xXSxcbiAgICAgICAgICAgICAgICAndXBBcnJvdyc6IFstMSwgMF0sXG4gICAgICAgICAgICAgICAgJ2Rvd25BcnJvdyc6IFsxLCAwXSxcbiAgICAgICAgICAgICAgICAnc2hpZnRVcCc6IFstMSwgMF0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0RG93bic6IFsxLCAwXSxcbiAgICAgICAgICAgICAgICAnc2hpZnRSaWdodCc6IFswLCAxXSxcbiAgICAgICAgICAgICAgICAnc2hpZnRMZWZ0JzogWzAsIC0xXSxcbiAgICAgICAgICAgICAgICAnZW50ZXInOiBbMSwgMF0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0RW50ZXInOiBbLTEsIDBdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5pbmRleGVzQnlLZXkgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2hvbWUnOiBbX3RoaXMubWF0cml4LmN1cnJlbnRbMF0sIC0xLCAwLCAxXSxcbiAgICAgICAgICAgICAgICAgICAgJ2VuZCc6IFtfdGhpcy5tYXRyaXguY3VycmVudFswXSwgX3RoaXMubWF0cml4LmNvbHVtbnMgKyAxLCAwLCAtMV0sXG4gICAgICAgICAgICAgICAgICAgICdjdHJsSG9tZSc6IFswLCAtMSwgMCwgMV0sXG4gICAgICAgICAgICAgICAgICAgICdjdHJsRW5kJzogW190aGlzLm1hdHJpeC5yb3dzLCBfdGhpcy5tYXRyaXguY29sdW1ucyArIDEsIDAsIC0xXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdFthY3Rpb25dIHx8IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbmF2aWdhdG9yID0gdGhpcy5rZXlBY3Rpb25zW2UuYWN0aW9uXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRDdXJyZW50RnJvbUFjdGlvbihlLmFjdGlvbiwgbmF2aWdhdG9yLCBlLmFjdGlvbiBpbiB0aGlzLmtleUFjdGlvbnMsIGUpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXRyaXguc2VsZWN0KGN1cnJlbnRbMF0sIGN1cnJlbnRbMV0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmdldEN1cnJlbnRGcm9tQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgbmF2aWdhdG9yLCBpc1ByZXNlbnQsIGUpIHtcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IgPT09IHZvaWQgMCkgeyBuYXZpZ2F0b3IgPSBbMCwgMF07IH1cbiAgICAgICAgICAgIGlmICghaXNQcmVzZW50ICYmICF0aGlzLmluZGV4ZXNCeUtleShhY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvdWxkRm9jdXNDaGFuZ2UoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXguY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuaW5kZXhlc0J5S2V5KGFjdGlvbikgfHwgdGhpcy5tYXRyaXguY3VycmVudC5jb25jYXQobmF2aWdhdG9yKSwgcm93SW5kZXggPSBfYVswXSwgY2VsbEluZGV4ID0gX2FbMV0sIHJOID0gX2FbMl0sIGNOID0gX2FbM107XG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMubWF0cml4LmdldChyb3dJbmRleCwgY2VsbEluZGV4LCBbck4sIGNOXSwgYWN0aW9uLCB0aGlzLnZhbGlkYXRvcigpKTtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSwgZm9yY2UpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldCA9ICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSA/IHRhcmdldCA6IGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0ZCcpKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hID0gW3RhcmdldC5wYXJlbnRFbGVtZW50LnJvd0luZGV4LCB0YXJnZXQuY2VsbEluZGV4XSwgcm93SW5kZXggPSBfYVswXSwgY2VsbEluZGV4ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgX2IgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBvUm93SW5kZXggPSBfYlswXSwgb0NlbGxJbmRleCA9IF9iWzFdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUocm93SW5kZXggKyBcIi5cIiArIGNlbGxJbmRleCwgdGhpcy5tYXRyaXgubWF0cml4KTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdHJpeC5pblZhbGlkKHZhbCkgfHwgKCFmb3JjZSAmJiBvUm93SW5kZXggPT09IHJvd0luZGV4ICYmIG9DZWxsSW5kZXggPT09IGNlbGxJbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5zZWxlY3Qocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuZ2V0Rm9jdXNJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWF0cml4LmN1cnJlbnQsIF9iID0gX2FbMF0sIHJvd0luZGV4ID0gX2IgPT09IHZvaWQgMCA/IDAgOiBfYiwgX2MgPSBfYVsxXSwgY2VsbEluZGV4ID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYztcbiAgICAgICAgICAgIHRoaXMubWF0cml4LmN1cnJlbnQgPSBbcm93SW5kZXgsIGNlbGxJbmRleF07XG4gICAgICAgICAgICBpbmZvLmVsZW1lbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKVxuICAgICAgICAgICAgICAgIC5yb3dzW3Jvd0luZGV4XS5jZWxsc1tjZWxsSW5kZXhdO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50VG9Gb2N1cyA9IHRoaXMuZ2V0Rm9jdXNhYmxlKGluZm8uZWxlbWVudCk7XG4gICAgICAgICAgICBpbmZvLm91dGxpbmUgPSAhaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5nZXRGb2N1c2FibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gW10uc2xpY2VcbiAgICAgICAgICAgICAgICAuY2FsbChlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbiwgW2hyZWZdLCBpbnB1dDpub3QoW3R5cGU9XCJoaWRkZW5cIl0pLCBzZWxlY3QsIHRleHRhcmVhLCBbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9XCItMVwiXSknKSk7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQubGVuZ3RoID8gY2hpbGRbMF0gOiBlbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLnNlbGVjdG9yID0gZnVuY3Rpb24gKHJvdywgY2VsbCkge1xuICAgICAgICAgICAgdmFyIHR5cGVzID0gW2VudW1fMS5DZWxsVHlwZS5FeHBhbmQsIGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24sIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeV07XG4gICAgICAgICAgICByZXR1cm4gKChyb3cuaXNEYXRhUm93ICYmIGNlbGwudmlzaWJsZSAmJiAoY2VsbC5pc0RhdGFDZWxsIHx8IGNlbGwuaXNUZW1wbGF0ZSkpXG4gICAgICAgICAgICAgICAgfHwgKHJvdy5pc0RhdGFSb3cgJiYgY2VsbC5jZWxsVHlwZSA9PT0gZW51bV8xLkNlbGxUeXBlLkRldGFpbEV4cGFuZClcbiAgICAgICAgICAgICAgICB8fCAoIXJvdy5pc0RhdGFSb3cgJiYgdHlwZXMuaW5kZXhPZihjZWxsLmNlbGxUeXBlKSA+IC0xKVxuICAgICAgICAgICAgICAgIHx8IChjZWxsLmNvbHVtbiAmJiBjZWxsLmNvbHVtbi50eXBlID09PSAnY2hlY2tib3gnKSlcbiAgICAgICAgICAgICAgICAmJiAhKHJvdy5lZGl0ID09PSAnZGVsZXRlJyAmJiByb3cuaXNEaXJ0eSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuanVtcCA9IGZ1bmN0aW9uIChhY3Rpb24sIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24gPT09ICd1cEFycm93JyAmJiBjdXJyZW50WzBdID09PSAwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuZ2V0SW5mbyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuZ2V0Rm9jdXNJbmZvKCk7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBySW5kZXggPSBfYVswXSwgY0luZGV4ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgaXNEYXRhID0gaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gaXNEYXRhIHx8IChlICYmIGUuYWN0aW9uICE9PSAnZW50ZXInICYmIChpbmZvLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJylcbiAgICAgICAgICAgICAgICB8fCBpbmZvLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSk7XG4gICAgICAgICAgICB2YXIgX2IgPSBbTWF0aC5taW4ocGFyc2VJbnQoaW5mby5lbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSwgckluZGV4KSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihwYXJzZUludChpbmZvLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKSwgY0luZGV4KV0sIHJvd0luZGV4ID0gX2JbMF0sIGNlbGxJbmRleCA9IF9iWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHsgaXNDb250ZW50OiB0cnVlLCBpc0RhdGFDZWxsOiBpc0RhdGEsIGluZGV4ZXM6IFtyb3dJbmRleCwgY2VsbEluZGV4XSwgaXNTZWxlY3RhYmxlOiBpc1NlbGVjdGFibGUgfTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS52YWxpZGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCwgYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSB0YWJsZS5yb3dzW3Jvd0luZGV4XS5jZWxsc1tjZWxsSW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdlbnRlcicgfHwgYWN0aW9uID09PSAnc2hpZnRFbnRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChhY3Rpb24gPT09ICdzaGlmdFVwJyB8fCBhY3Rpb24gPT09ICdzaGlmdERvd24nKSAmJiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiAhPT0gJ3NoaWZ0VXAnICYmIGFjdGlvbiAhPT0gJ3NoaWZ0RG93bicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggIT09IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuc2hvdWxkRm9jdXNDaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgX2IgPSBfYVswXSwgckluZGV4ID0gX2IgPT09IHZvaWQgMCA/IC0xIDogX2IsIF9jID0gX2FbMV0sIGNJbmRleCA9IF9jID09PSB2b2lkIDAgPyAtMSA6IF9jO1xuICAgICAgICAgICAgaWYgKHJJbmRleCA8IDAgfHwgY0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNlbGwgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5yb3dzW3JJbmRleF0uY2VsbHNbY0luZGV4XTtcbiAgICAgICAgICAgIHJldHVybiBlLmFjdGlvbiA9PT0gJ2VudGVyJyB8fCBlLmFjdGlvbiA9PT0gJ3NoaWZ0RW50ZXInID8gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIDogdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRGb2N1cztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29udGVudEZvY3VzID0gQ29udGVudEZvY3VzO1xuICAgIHZhciBIZWFkZXJGb2N1cyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIZWFkZXJGb2N1cywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyRm9jdXMocGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldCA9ICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6IGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0aCcpKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hID0gW3RhcmdldC5wYXJlbnRFbGVtZW50LnJvd0luZGV4LCB0YXJnZXQuY2VsbEluZGV4XSwgcm93SW5kZXggPSBfYVswXSwgY2VsbEluZGV4ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgdmFsID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZShyb3dJbmRleCArIFwiLlwiICsgY2VsbEluZGV4LCB0aGlzLm1hdHJpeC5tYXRyaXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4LmluVmFsaWQodmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF0cml4LnNlbGVjdCh0YXJnZXQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgdGFyZ2V0LmNlbGxJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5nZXRGb2N1c0luZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgX2IgPSBfYVswXSwgcm93SW5kZXggPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLCBfYyA9IF9hWzFdLCBjZWxsSW5kZXggPSBfYyA9PT0gdm9pZCAwID8gMCA6IF9jO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKVxuICAgICAgICAgICAgICAgIC5yb3dzW3Jvd0luZGV4XS5jZWxsc1tjZWxsSW5kZXhdO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50VG9Gb2N1cyA9IHRoaXMuZ2V0Rm9jdXNhYmxlKGluZm8uZWxlbWVudCk7XG4gICAgICAgICAgICBpbmZvLm91dGxpbmUgPSAhaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJiYXJjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLnNlbGVjdG9yID0gZnVuY3Rpb24gKHJvdywgY2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChjZWxsLnZpc2libGUgJiYgKGNlbGwuY29sdW1uLmZpZWxkICE9PSB1bmRlZmluZWQgfHwgY2VsbC5pc1RlbXBsYXRlKSkgfHwgY2VsbC5jb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94JztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmp1bXAgPSBmdW5jdGlvbiAoYWN0aW9uLCBjdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uID09PSAnZG93bkFycm93JyAmJiBjdXJyZW50WzBdID09PSB0aGlzLm1hdHJpeC5tYXRyaXgubGVuZ3RoIC0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubWF0cml4Lm1hdHJpeC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeC5yb3dzID0gKyt0aGlzLm1hdHJpeC5yb3dzO1xuICAgICAgICAgICAgICAgIHJvd3NbMF0uY2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2VsbCwgY0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tYXRyaXguc2V0KGxlbmd0aCwgY0luZGV4LCBjZWxsLnZpc2libGUgJiYgY2VsbC5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcgIT09IGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmdldEluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpc0NvbnRlbnQ6IGZhbHNlLCBpc0hlYWRlcjogdHJ1ZSB9O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJGb2N1cy5wcm90b3R5cGUudmFsaWRhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5zaG91bGRGb2N1c0NoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBySW5kZXggPSBfYVswXSwgY0luZGV4ID0gX2FbMV07XG4gICAgICAgICAgICBpZiAockluZGV4IDwgMCB8fCBjSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2VsbCA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucm93c1tySW5kZXhdLmNlbGxzW2NJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gZS5hY3Rpb24gPT09ICdlbnRlcicgPyAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpIDogdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckZvY3VzO1xuICAgIH0oQ29udGVudEZvY3VzKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJGb2N1cyA9IEhlYWRlckZvY3VzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2ZvY3VzLXN0cmF0ZWd5LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZVNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFBhZ2VTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZVNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxMilcbiAgICAgICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoOClcbiAgICAgICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KClcbiAgICAgICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgICAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VTaXplc1wiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICAgICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gUGFnZVNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgZXhwb3J0cy5QYWdlU2V0dGluZ3MgPSBQYWdlU2V0dGluZ3M7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIHV0aWxfMSwgZXZlbnRzLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlbGVjdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvbihwYXJlbnQsIHNlbGVjdGlvblNldHRpbmdzLCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaXNCYXRjaEVkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJldktleSA9IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuaXNDaGtBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNVbkNoa0FsbCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jaGtBbGxDb2xsZWMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNDaGVja2VkT25BZGQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MgPSBzZWxlY3Rpb25TZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChhcmdzLCB0eXBlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWxlY3Rpb24nO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc0VkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuaXNFZGl0ICYmICF0aGlzLnBlcnNpc3RTZWxlY3Rpb247XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8ICFzZWxlY3RlZFJvdyB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUm93U2VsZWN0ZWQgPSBzZWxlY3RlZFJvdy5oYXNBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlzVG9nZ2xlID0gIWlzVG9nZ2xlID8gaXNUb2dnbGUgOiBpbmRleCA9PT0gdGhpcy5wcmV2Um93SW5kZXggJiYgaXNSb3dTZWxlY3RlZDtcbiAgICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvdygpO1xuICAgICAgICAgICAgaWYgKCFpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKHNlbGVjdGVkUm93LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhpbmRleCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0RGF0YSwgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93c0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93cyh0aGlzLmdldENvbGxlY3Rpb25Gcm9tSW5kZXhlcyhzdGFydEluZGV4LCBlbmRJbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4ZXNbMF1dO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMSA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4KSwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgcm93SW5kZXhlczogcm93SW5kZXhlcywgcm93OiBzZWxlY3RlZFJvdywgcm93SW5kZXg6IHJvd0luZGV4ZXNbMF0sIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGFcbiAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUm93c1RvU2VsZWN0aW9uID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMiA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVblNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCkgPiAtMTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCBbcm93SW5kZXhdLCBkYXRhLCBbc2VsZWN0ZWRSb3ddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmluZGV4T2Yocm93SW5kZXgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmluZGV4T2Yoc2VsZWN0ZWRSb3cpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgZmFsc2UsIG51bGwsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIF9hID0gKHN0YXJ0SW5kZXggPCBlbmRJbmRleCkgP1xuICAgICAgICAgICAgICAgIHsgaTogc3RhcnRJbmRleCwgbWF4OiBlbmRJbmRleCB9IDogeyBpOiBlbmRJbmRleCwgbWF4OiBzdGFydEluZGV4IH0sIGkgPSBfYS5pLCBtYXggPSBfYS5tYXg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8PSBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gLTE7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJyAmJiB0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZSb3dJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzUm93U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggJiYgdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChzZWxlY3RlZFJvdywgY2hrU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gJiYgIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoc2VsZWN0ZWRSb3cpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQoc2VsZWN0ZWRSb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgcEtleSA9IHJvd09iaiA/IHJvd09iai5kYXRhW3RoaXMucHJpbWFyeUtleV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChwS2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93T2JqLmlzU2VsZWN0ZWQgPSBjaGtTdGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAoY2hrU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlW3BLZXldID0gY2hrU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblJlcXVlc3QgJiYgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhLmluZGV4T2Yocm93T2JqLmRhdGEpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhLnB1c2gocm93T2JqLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgKHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtwS2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblJlcXVlc3QgJiYgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhLmluZGV4T2Yocm93T2JqLmRhdGEpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YS5zcGxpY2UodGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhLmluZGV4T2Yocm93T2JqLmRhdGEpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVDaGVja0JveGVzID0gZnVuY3Rpb24gKHJvdywgY2hrU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3cpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoa0JveCA9IHJvdy5xdWVyeVNlbGVjdG9yKCcuZS1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjaGtCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVBZGRDYm94Q2xhc3NlcyhjaGtCb3gubmV4dEVsZW1lbnRTaWJsaW5nLCBjaGtTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZFRhcmdldCkgfHwgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZFRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICF0aGlzLmNoZWNrZWRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0YWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRSb3csIHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5wdXNoKHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMucHVzaChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICBzZWxlY3RlZFJvdy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihzZWxlY3RlZFJvdywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMoc2VsZWN0ZWRSb3csIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCB0cnVlLCBudWxsLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZm9jdXMuZ2V0UHJldkluZGV4ZXMoKS5jZWxsSW5kZXggP1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdy5jZWxsc1t0aGlzLmZvY3VzLmdldFByZXZJbmRleGVzKCkuY2VsbEluZGV4XSA6XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLXNlbGVjdGlvbmJhY2tncm91bmQ6bm90KC5lLWhpZGUpJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLm9uQ2xpY2soeyB0YXJnZXQ6IHRhcmdldCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0U2VsZWN0aW9uIHx8ICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gJiYgIXRoaXMucGFyZW50LmlzRWRpdCkgfHxcbiAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGVja2VkVGFyZ2V0KSAmJiB0aGlzLmNoZWNrZWRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0YWxsJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93c2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2godGhpcy5wYXJlbnQuZ2V0Um93cygpW3RoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4LnB1c2godGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dfMSA9IHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93XzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd18xLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhyb3dfMSwgZmFsc2UsIHRydWUsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihyb3dfMSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMocm93XzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGVkLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yb3dEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCByb3dJbmRleCwgZGF0YSwgcm93KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcnNpc3RDb2xsZWN0aW9uKHJvd1swXSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LCBkYXRhOiBkYXRhLCByb3c6IHJvd1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMocm93WzBdKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXgucm93SW5kZXgsIHRoaXMuZ2V0Q29sSW5kZXgoY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGNlbGxJbmRleC5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkgfHwgIXNlbGVjdGVkQ2VsbCB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzQ2VsbFNlbGVjdGVkID0gc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgaXNUb2dnbGUgPSAhaXNUb2dnbGUgPyBpc1RvZ2dsZSA6ICEoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpICYmXG4gICAgICAgICAgICAgICAgY2VsbEluZGV4LnJvd0luZGV4ID09PSB0aGlzLnByZXZDSWR4cy5yb3dJbmRleCAmJiBjZWxsSW5kZXguY2VsbEluZGV4ID09PSB0aGlzLnByZXZDSWR4cy5jZWxsSW5kZXggJiZcbiAgICAgICAgICAgICAgICBpc0NlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCwgY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKGNlbGxJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHNCeVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoc3RhcnRJbmRleC5yb3dJbmRleCwgc3RhcnRJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdmFyIG1pbjtcbiAgICAgICAgICAgIHZhciBtYXg7XG4gICAgICAgICAgICB2YXIgc3RJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgZWRJbmRleCA9IGVuZEluZGV4ID0gZW5kSW5kZXggPyBlbmRJbmRleCA6IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4ZXM7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHN0YXJ0SW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogc3RhcnRJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXgucm93SW5kZXggPiBlbmRJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgZW5kSW5kZXggPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXgucm93SW5kZXg7IGkgPD0gZW5kSW5kZXgucm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLmNlbGxTZWxlY3Rpb25Nb2RlICE9PSAnYm94Jykge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBpID09PSBzdGFydEluZGV4LnJvd0luZGV4ID8gKHN0YXJ0SW5kZXguY2VsbEluZGV4KSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGkgPT09IGVuZEluZGV4LnJvd0luZGV4ID8gKGVuZEluZGV4LmNlbGxJbmRleCkgOiB0aGlzLmdldExhc3RDb2xJbmRleChpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IHN0YXJ0SW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBlbmRJbmRleC5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IG1pbiA8IG1heCA/IG1pbiA6IG1heCwgbGVuID0gbWluID4gbWF4ID8gbWluIDogbWF4OyBqIDw9IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChpLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzLnB1c2goaik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiBpLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhzdEluZGV4LCBlZEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHN0YXJ0SW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxscyA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGxJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNlbGxMZW4gPSByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlcy5sZW5ndGg7IGogPCBjZWxsTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSwgeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkQ2VsbHNUb1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChjZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KGNlbGxJbmRleGVzWzBdLnJvd0luZGV4LCB0aGlzLmdldENvbEluZGV4KGNlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXhlc1swXS5jZWxsSW5kZXgpKTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY2VsbEluZGV4ZXNbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsSW5kZXhlc18xID0gY2VsbEluZGV4ZXM7IF9pIDwgY2VsbEluZGV4ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gY2VsbEluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSBjZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGlzVW5TZWxlY3RlZCA9IGluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsSWR4ID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2VsbElkeC5pbmRleE9mKGNlbGxJbmRleC5jZWxsSW5kZXgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIFt7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbY2VsbEluZGV4LmNlbGxJbmRleF0gfV0sIHNlbGVjdGVkRGF0YSwgW3NlbGVjdGVkQ2VsbF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsSWR4LnNwbGljZShzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5TZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXguY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oYXJncywgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXhlc1swXSwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5lLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgY2VsbHMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSBwYXJzZUludChjZWxsc1ttXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldExhc3RDb2xJbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgndGQuZS1yb3djZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhckNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNlbGxEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCBjZWxsSW5kZXhlcywgZGF0YSwgY2VsbHMpIHtcbiAgICAgICAgICAgIGlmIChjZWxsc1swXSAmJiBjZWxsc1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JpZGNoa2JveCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja0JveGVzKGVqMl9iYXNlXzMuY2xvc2VzdChjZWxsc1swXSwgJ3RyJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgY2VsbHM6IGNlbGxzLCBkYXRhOiBkYXRhLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRDZWxsLCByb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5hZGQoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyaWRjaGtib3gnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tCb3hlcyhlajJfYmFzZV8zLmNsb3Nlc3Qoc2VsZWN0ZWRDZWxsLCAndHInKSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChjZWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IGNlbGw7XG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5vbkNsaWNrKHsgdGFyZ2V0OiBjZWxsIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Q0lkeHMgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzID0gZW5kSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCAmJiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJvd0NlbGxJbmRleCA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpc1Jvd0F2YWlsO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXggPT09IHJvd0NlbGxJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jvd0F2YWlsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSb3dBdmFpbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLmluZGV4T2Yocm93Q2VsbEluZGV4LmNlbGxJbmRleCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXMucHVzaChyb3dDZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbcm93Q2VsbEluZGV4LmNlbGxJbmRleF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGxzID0gdGhpcy5nZXRTZWxlY3RlZENlbGxzRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHZhciByb3dDZWxsID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVtyb3dDZWxsW2ldLnJvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjTGVuID0gcm93Q2VsbC5sZW5ndGg7IGogPCBjTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsW2ldLnJvd0luZGV4LCByb3dDZWxsW2ldLmNlbGxJbmRleGVzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGluZywgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZENlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCByb3dDZWxsLCBkYXRhLCBjZWxscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMgPSBjZWxscy5jb25jYXQoW10uc2xpY2UuY2FsbChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHgxID0gdGhpcy54O1xuICAgICAgICAgICAgdmFyIHkxID0gdGhpcy55O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgdmFyIHgyID0gcG9zaXRpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHkyID0gcG9zaXRpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICB2YXIgdG1wO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRoaXMucGFyZW50LmVsZW1lbnQub2Zmc2V0TGVmdCArIDIsIGUuY2xpZW50WSksICd0cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHgxID4geDIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB4MjtcbiAgICAgICAgICAgICAgICB4MiA9IHgxO1xuICAgICAgICAgICAgICAgIHgxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkxID4geTIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB5MjtcbiAgICAgICAgICAgICAgICB5MiA9IHkxO1xuICAgICAgICAgICAgICAgIHkxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0geTEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0geDIgLSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0geTIgLSB5MSArICdweCc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMuc3RhcnRJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZS1kaXNhYmxldXNlcnNlbGVjdCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LmJvZHksICdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICFlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc1NpbmdsZVNlbCgpIHx8IGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICd0ZCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy54ID0gcG9zdGlvbi54IC0gZ0JSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy55ID0gcG9zdGlvbi55IC0gZ0JSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkZHJhZ2FyZWEnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcgJiYgIXRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93U2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbEZvY3VzZWQsIHRoaXMub25DZWxsRm9jdXNlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY2xlYXJTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5vbkRhdGFCb3VuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLmFjdGlvbkJlZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucm93c1JlbW92ZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsRm9jdXNlZCwgdGhpcy5vbkNlbGxGb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5jbGVhclNlbEFmdGVyUmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jbGVhclNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMub25EYXRhQm91bmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMuYWN0aW9uQmVnaW4pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yb3dzUmVtb3ZlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93c1JlbW92ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLnJlY29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgKHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtlLnJlY29yZHNbaV1bdGhpcy5wcmltYXJ5S2V5XV0pO1xuICAgICAgICAgICAgICAgIC0tdGhpcy50b3RhbFJlY29yZHNDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tBbGxTdGF0ZSgpO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcgJiYgIXRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy50eXBlKSAmJiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMubW9kZSkgfHxcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMuY2VsbFNlbGVjdGlvbk1vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGVja0JveFNlbGVjdGlvbkNoYW5nZWQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5oaWRlUG9wVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3dzZWxlY3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3codGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQm94U2VsZWN0aW9uQ2hhbmdlZCgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrQm94U2VsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpc0NoZWNrQ29sdW1uID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2hrU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9ICdtdWx0aXBsZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrRmllbGQgPSBjb2wuZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzQ291bnQgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudG90YWxSZWNvcmRzQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsQm94ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jaGVja3NlbGVjdGFsbCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbE9iaiA9IHRoaXMuY2hrQWxsQm94O1xuICAgICAgICAgICAgICAgICAgICBpc0NoZWNrQ29sdW1uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWNoZWNrYm94c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNDaGVja0NvbHVtbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGtTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoa0ZpZWxkID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxCb3ggPSB0aGlzLmNoa0FsbE9iaiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWNoZWNrYm94c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1wZXJzaXN0c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmltYXJ5S2V5ID0gdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKVswXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uICYmIHRoaXMuY2hrRmllbGQgJiYgT2JqZWN0LmtleXModGhpcy5zZWxlY3RlZFJvd1N0YXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnBhcmVudC5nZXREYXRhTW9kdWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUodGhpcy5jaGtGaWVsZCwgJ2VxdWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IGRhdGEuZ2V0RGF0YSh7fSwgcXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJveHlfMSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzEuZGF0YVN1Y2Nlc3MoZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5yZWZyZXNoUGVyc2lzdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXBlcnNpc3RzZWxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kYXRhU3VjY2VzcyA9IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZWxlY3RlZFJvd1N0YXRlW3Jlc1tpXVt0aGlzLnByaW1hcnlLZXldXSkgJiYgcmVzW2ldW3RoaXMuY2hrRmllbGRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtyZXNbaV1bdGhpcy5wcmltYXJ5S2V5XV0gPSByZXNbaV1bdGhpcy5jaGtGaWVsZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhID0gcmVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlZnJlc2hQZXJzaXN0U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jaGtBbGxCb3ggPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrc2VsZWN0YWxsJyk7XG4gICAgICAgICAgICB0aGlzLmNoa0FsbE9iaiA9IHRoaXMuY2hrQWxsQm94O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzKCk7XG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwICYmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gfHwgdGhpcy5jaGtGaWVsZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRChyb3dzW2pdLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwS2V5ID0gcm93T2JqID8gcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwS2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrU3RhdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGtCb3ggPSByb3dzW2pdLnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93U3RhdGVbcEtleV0gfHwgKHRoaXMuaXNDaGtBbGwgJiYgdGhpcy5jaGtBbGxDb2xsZWMuaW5kZXhPZihwS2V5KSA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5pc1VuQ2hrQWxsICYmIHRoaXMuY2hrQWxsQ29sbGVjLmluZGV4T2YocEtleSkgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCF0aGlzLmlzQ2hrQWxsICYmICF0aGlzLmlzVW5DaGtBbGwgJiYgdGhpcy5jaGtGaWVsZCAmJiByb3dPYmouZGF0YVt0aGlzLmNoa0ZpZWxkXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGNoa0JveC5jaGVja2VkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKHBhcnNlSW50KHJvd3Nbal0uZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRUYXJnZXQgIT09IGNoa0JveCAmJiB0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUFkZENib3hDbGFzc2VzKGNoa0JveC5uZXh0RWxlbWVudFNpYmxpbmcsIGNoZWNrU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdENvbGxlY3Rpb24ocm93c1tqXSwgY2hlY2tTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzKGluZGV4ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhpbmRleGVzWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja0FsbFN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgPT09ICdzYXZlJyAmJiB0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZWRpdENoa0JveCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZWRpdC1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlZGl0Q2hrQm94KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGVkaXRDaGtCb3gsICcuZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGxnZWRpdHJvdycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQocm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvd09iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtyb3dPYmouZGF0YVt0aGlzLnByaW1hcnlLZXldXSA9IHJvd09iai5pc1NlbGVjdGVkID0gZWRpdENoa0JveC5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NoZWNrZWRPbkFkZCA9IGVkaXRDaGtCb3guY2hlY2tlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSA9PT0gJ3NhdmUnICYmIHRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2FkZCcgJiYgdGhpcy5pc0NoZWNrZWRPbkFkZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0aGlzLnBhcmVudC5nZXRSb3dzKClbZS5zZWxlY3RlZFJvd10uZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlW3Jvd09iai5kYXRhW3RoaXMucHJpbWFyeUtleV1dID0gcm93T2JqLmlzU2VsZWN0ZWQgPSB0aGlzLmlzQ2hlY2tlZE9uQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQZXJzaXN0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25EYXRhQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uIHx8IHRoaXMuY2hrRmllbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY29yZHMgPSB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU3VjY2VzcyhyZWNvcmRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUGVyc2lzdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrU2VsZWN0QWxsQWN0aW9uID0gZnVuY3Rpb24gKGNoZWNrU3RhdGUpIHtcbiAgICAgICAgICAgIHZhciBlZGl0Rm9ybSA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IHRoaXMuY2hrQWxsQm94O1xuICAgICAgICAgICAgaWYgKGNoZWNrU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKDAsIHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Noa0FsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VuQ2hrQWxsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VuQ2hrQWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hrQWxsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoa0FsbENvbGxlYyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0Um93cygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcnNpc3RDb2xsZWN0aW9uKHJvd3NbaV0sIGNoZWNrU3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1VuQ2hrQWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZWRpdEZvcm0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVkaXRDaGtCb3ggPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0LWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUFkZENib3hDbGFzc2VzKGVkaXRDaGtCb3gubmV4dEVsZW1lbnRTaWJsaW5nLCBjaGVja1N0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1NlbGVjdEFsbCA9IGZ1bmN0aW9uIChjaGVja0JveCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrT2JqID0gY2hlY2tCb3g7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBjaGVja0JveC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrJyk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0QWxsQWN0aW9uKCFzdGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckNoa0NoYW5nZUV2ZW50KGNoZWNrQm94LCAhc3RhdGUpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrU2VsZWN0ID0gZnVuY3Rpb24gKGNoZWNrQm94KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRoaXMuY2hlY2tlZFRhcmdldCwgJy5lLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIHZhciBjaGVja09iaiA9IGNoZWNrQm94O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHJJbmRleCA9IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uICYmIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtYWRkZWRyb3cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgKytySW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyKHJJbmRleCwgcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCkpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlSW50b1VuY2hlY2tDb2xsZWN0aW9uKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1yb3cnKSk7XG4gICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJDaGtDaGFuZ2VFdmVudChjaGVja0JveCwgY2hlY2tCb3gubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVjaycpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3ZlSW50b1VuY2hlY2tDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtBbGwgfHwgdGhpcy5pc1VuQ2hrQWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQocm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHBLZXkgPSByb3dPYmogPyByb3dPYmouZGF0YVt0aGlzLnByaW1hcnlLZXldIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIXBLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGtBbGxDb2xsZWMuaW5kZXhPZihwS2V5KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxDb2xsZWMucHVzaChwS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsQ29sbGVjLnNwbGljZSh0aGlzLmNoa0FsbENvbGxlYy5pbmRleE9mKHBLZXkpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudHJpZ2dlckNoa0NoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKGNoZWNrQm94LCBjaGVja1N0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jaGVja0JveENoYW5nZSwge1xuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNoZWNrU3RhdGUsIHNlbGVjdGVkUm93SW5kZXhlczogdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBjaGVja0JveFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2V0Q2hlY2tBbGxTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRMZW4gPSBPYmplY3Qua2V5cyh0aGlzLnNlbGVjdGVkUm93U3RhdGUpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkTGVuID0gdGhpcy5zZWxlY3RlZFJlY29yZHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3BhbkVsZSA9IHRoaXMuY2hrQWxsQm94Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFtzcGFuRWxlXSwgWydlLWNoZWNrJywgJ2Utc3RvcCcsICdlLXVuY2hlY2snXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWRMZW4gPT09IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5hbGxvd1BhZ2luZ1xuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmlzQ2hrQWxsICYmIHRoaXMuY2hrQWxsQ29sbGVjLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbc3BhbkVsZV0sIFsnZS1jaGVjayddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tlZExlbiA9PT0gMCB8fCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbc3BhbkVsZV0sIFsnZS11bmNoZWNrJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbc3BhbkVsZV0sIFsnZS1zdG9wJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBlLmN0cmxLZXkgfHwgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZS5zaGlmdEtleTtcbiAgICAgICAgICAgIHRoaXMucG9wVXBDbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICB2YXIgY2hrU2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY2hlY2tCb3g7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGNoZWNrV3JhcCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1jaGVja2JveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tXcmFwICYmIGNoZWNrV3JhcC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jaGVja3NlbGVjdCwuZS1jaGVja3NlbGVjdGFsbCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBjaGVja1dyYXAucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgICAgICAgICAgY2hlY2tCb3ggPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgY2hrU2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICF0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy5jaGVja2JveE9ubHkpIHx8IGNoa1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNoZWNrQm94KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSBjaGVja0JveDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQm94LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdGFsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0QWxsKGNoZWNrQm94KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3QoY2hlY2tCb3gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgckluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFkZGVkcm93JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKytySW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dDZWxsU2VsZWN0aW9uSGFuZGxlcihySW5kZXgsIHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZUludG9VbmNoZWNrQ29sbGVjdGlvbihlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtcm93JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja0FsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2hrU2VsZWN0aW9uICYmIGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiB0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93c2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNwYW5jbGlja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNob3dQb3B1cCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utcm93c2VsZWN0IGUtaWNvbnMgZS1pY29uLXJvd3NlbGVjdCcgK1xuICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZScgJiZcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDEgfHwgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCA+IDEpID8gJyBlLXNwYW5jbGlja2VkJyA6ICcnKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCAmJiAhdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpID8gcm93SW5kZXggOiB0aGlzLnByZXZSb3dJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpID8geyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0gOiB0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dzVG9TZWxlY3Rpb24oW3Jvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDZWxsc1RvU2VsZWN0aW9uKFt7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkNlbGxGb2N1c2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9ICgoZS5jb250YWluZXIuaXNIZWFkZXIgJiYgZS5pc0p1bXApIHx8IChlLmNvbnRhaW5lci5pc0NvbnRlbnQgJiYgIWUuY29udGFpbmVyLmlzU2VsZWN0YWJsZSkpICYmXG4gICAgICAgICAgICAgICAgIShlLmJ5S2V5ICYmIGUua2V5QXJncy5hY3Rpb24gPT09ICdzcGFjZScpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckFjdGlvbiA9IGUuY29udGFpbmVyLmlzSGVhZGVyICYmICEoZS5ieUtleSAmJiBlLmtleUFyZ3MuYWN0aW9uID09PSAnc3BhY2UnKTtcbiAgICAgICAgICAgIGlmICghZS5ieUtleSB8fCBjbGVhcikge1xuICAgICAgICAgICAgICAgIGlmIChjbGVhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IGUuY29udGFpbmVyLmlzQ29udGVudCA/IGUuY29udGFpbmVyLmluZGV4ZXMgOiBlLmluZGV4ZXMsIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLmZvY3VzLmdldFByZXZJbmRleGVzKCk7XG4gICAgICAgICAgICBpZiAoaGVhZGVyQWN0aW9uIHx8IChbJ2N0cmxQbHVzQScsICdlc2NhcGUnXS5pbmRleE9mKGUua2V5QXJncy5hY3Rpb24pID09PSAtMSAmJiBlLmtleUFyZ3MuYWN0aW9uICE9PSAnc3BhY2UnICYmXG4gICAgICAgICAgICAgICAgcm93SW5kZXggPT09IHByZXYucm93SW5kZXggJiYgY2VsbEluZGV4ID09PSBwcmV2LmNlbGxJbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5QXJncy5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseURvd25VcEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHRBcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnREb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFVwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdERvd25LZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0TGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaGlmdExlZnRSaWdodEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhvbWVFbmRLZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxIb21lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUN0cmxIb21lRW5kS2V5KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxQbHVzQSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybFBsdXNBKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3RhbGwnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkVGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdEFsbCh0aGlzLmNoZWNrZWRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0KHRoaXMuY2hlY2tlZFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsUGx1c0EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSgwLCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSwgY2VsbEluZGV4OiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseURvd25VcEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24gJiYgdGhpcy5pc0Noa0FsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3RBbGxBY3Rpb24oZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5VXBEb3duID0gZnVuY3Rpb24gKHJvd0luZGV4KSB7XG4gICAgICAgICAgICBpZiAocm93SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5wYXJlbnQuZ2V0Um93cygpWzBdLmNoaWxkcmVuW3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggfHwgMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY0luZGV4ID0gcGFyc2VJbnQodGhpcy50YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0Um93QnlJbmRleChyb3dJbmRleCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NJbmRleF07XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlSaWdodExlZnRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5SG9tZUVuZEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnREb3duS2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZSb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KDAsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMgfHwgeyByb3dJbmRleDogMCwgY2VsbEluZGV4OiAwIH0sIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlDdHJsSG9tZUVuZEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnBhcmVudC5nZXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyA9IGZ1bmN0aW9uIChyb3csIGlzQWRkLCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHV0aWxfMS5hZGRSZW1vdmVBY3RpdmVDbGFzc2VzLmFwcGx5KHZvaWQgMCwgW2NlbGxzLCBpc0FkZF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyZXIoKS5zZXRTZWxlY3Rpb24ocm93ID8gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGwsIGlzQWRkLCBjbGVhckFsbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNSb3dUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ3JvdycgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdjZWxsJyB8fCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdib3RoJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc1NpbmdsZVNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50UmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIgPSB0aGlzLmZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UmVuZGVyZXI7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IFtdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvblNldHRpbmdzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGEgPSB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5pc1NlbGVjdGVkOyB9KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmRhdGE7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhID0gdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VsZWN0aW9uID0gU2VsZWN0aW9uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VhcmNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuc2VhcmNoLCBhcmcxOiBzZWFyY2hTdHJpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoU3RyaW5nICE9PSBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSkge1xuICAgICAgICAgICAgICAgIGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5ID0gc2VhcmNoU3RyaW5nO1xuICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHNlYXJjaFN0cmluZzogdGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3Mua2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NlYXJjaGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleSwgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWFyY2gnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VhcmNoO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZWFyY2ggPSBTZWFyY2g7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTaG93SGlkZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNob3dIaWRlKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgc2hvd0J5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgc2hvd0J5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5nZXRUb2dnbGVGaWVsZHMoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucyhrZXlzLCBoaWRlQnkpO1xuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0VG9nZ2xlRmllbGRzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGZpbmFsaXplZCA9IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0gW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZWQgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVkO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBnZXRLZXlCeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KGtleXMsIGZ1bmN0aW9uIChrZXksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bZ2V0S2V5QnldID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2x1bW5zID0gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW5zKSA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSA6IGNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCBjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNob3dIaWRlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TaG93SGlkZSA9IFNob3dIaWRlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2hvdy1oaWRlLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgY29uc3RhbnRfMSwgd2lkdGhfY29udHJvbGxlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTY3JvbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlcyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUud2lkdGggPSBlajJfYmFzZV8zLmZvcm1hdFVuaXQodGhpcy5wYXJlbnQud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUgJiYgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlLnRvb2xiYXIucmVmcmVzaE92ZXJmbG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1IZHJIZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgbUhkckhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC5oZWlnaHQgLSBtSGRySGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuc3VyZU92ZXJmbG93KGNvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxXaWR0aCA9IFNjcm9sbC5nZXRTY3JvbGxCYXJXaWR0aCgpIC0gdGhpcy5nZXRUaHJlc2hvbGQoKTtcbiAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuZ2V0Q3NzUHJvcGVydGllcygpO1xuICAgICAgICAgICAgY29udGVudC5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSBzY3JvbGxXaWR0aCA+IDAgPyAnMXB4JyA6ICcwcHgnO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9IHNjcm9sbFdpZHRoID4gMCA/IHNjcm9sbFdpZHRoICsgJ3B4JyA6ICcwcHgnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZVBhZGRpbmcgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMocnRsKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnBhcmVudEVsZW1lbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmhlaWdodCAhPT0gJzEwMCUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLndpZHRoU2VydmljZS5nZXRTaWJsaW5nc0hlaWdodChjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2NhbGMoMTAwJSAtICcgKyBoZWlnaHQgKyAncHgpJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRUaHJlc2hvbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXBwTmFtZSA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICBpZiAoYXBwTmFtZSA9PT0gJ21vemlsbGEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Db250ZW50U2Nyb2xsID0gZnVuY3Rpb24gKHNjcm9sbFRhcmdldCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGlzSGVhZGVyID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnQucXVlcnlTZWxlY3RvcigndGJvZHknKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBzTGltaXQgPSB0YXJnZXQuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGlzRm9vdGVyID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdW1tYXJ5Y29udGVudCcpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID09PSBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9ICFpc0hlYWRlciA/IF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA6IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBpZiAoaXNGb290ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyLnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGNvbnN0YW50XzEuc2Nyb2xsLCB7IGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uRnJlZXplQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9PT0gdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25XaGVlbFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyBlLmRlbHRhTW9kZSA9PT0gMSA/IGUuZGVsdGFZICogMzAgOiBlLmRlbHRhWTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID09PSB0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5jb250ZW50Jykuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9IHRvcDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Ub3VjaFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvbnQ7XG4gICAgICAgICAgICAgICAgdmFyIG1IZHI7XG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VYWSA9IF90aGlzLmdldFBvaW50WFkoZSk7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wICsgKF90aGlzLnBhZ2VYWS55IC0gcGFnZVhZLnkpO1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0ICsgKF90aGlzLnBhZ2VYWS54IC0gcGFnZVhZLngpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBtSGRyID0gX3RoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlaGVhZGVyJykgOiBfdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID09PSBsZWZ0IHx8IChsZWZ0IDwgMCB8fCAobUhkci5zY3JvbGxXaWR0aCAtIG1IZHIuY2xpZW50V2lkdGgpIDwgbGVmdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIG1IZHIuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhZ2VYWS54ID0gcGFnZVhZLng7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udCA9IF90aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtZnJvemVuY29udGVudCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID09PSB0b3AgfHwgKHRvcCA8IDAgfHwgKGNvbnQuc2Nyb2xsSGVpZ2h0IC0gY29udC5jbGllbnRIZWlnaHQpIDwgdG9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYWdlWFkueSA9IHBhZ2VYWS55O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRQYWdlWFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUucG9pbnRlclR5cGUgPT09ICdtb3VzZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYWdlWFkgPSBfdGhpcy5nZXRQb2ludFhZKGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRQb2ludFhZID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlWFkgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHBhZ2VYWS54ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgICAgIHBhZ2VYWS55ID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZVhZLnggPSBlLnBhZ2VYO1xuICAgICAgICAgICAgICAgIHBhZ2VYWS55ID0gZS5wYWdlWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYWdlWFk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uZVRpbWVSZWFkeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgdmFyIG1Db250ID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVjb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGZDb250ID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZyb3plbmNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbUhkciA9IHRoaXMuaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVoZWFkZXInKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyA/IG1IZHIgOiB0aGlzLmhlYWRlciwgJ3RvdWNoc3RhcnQgcG9pbnRlcmRvd24nLCB0aGlzLnNldFBhZ2VYWSgpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgPyBtSGRyIDogdGhpcy5oZWFkZXIsICd0b3VjaG1vdmUgcG9pbnRlcm1vdmUnLCB0aGlzLm9uVG91Y2hTY3JvbGwodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyA/IG1Db250IDogdGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChtQ29udCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKG1IZHIpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKG1Db250LCAnc2Nyb2xsJywgdGhpcy5vbkZyZWV6ZUNvbnRlbnRTY3JvbGwoZkNvbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGZDb250LCAnc2Nyb2xsJywgdGhpcy5vbkZyZWV6ZUNvbnRlbnRTY3JvbGwobUNvbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKG1IZHIsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbChtQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZkNvbnQsICd3aGVlbCcsIHRoaXMub25XaGVlbFNjcm9sbChtQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZkNvbnQsICd0b3VjaHN0YXJ0IHBvaW50ZXJkb3duJywgdGhpcy5zZXRQYWdlWFkoKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChmQ29udCwgJ3RvdWNobW92ZSBwb2ludGVybW92ZScsIHRoaXMub25Ub3VjaFNjcm9sbChtQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuY29udGVudCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuaGVhZGVyKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmhlYWRlciwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuY29udGVudCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0YWJsZS5zY3JvbGxIZWlnaHQgPCB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cjpsYXN0LWNoaWxkIHRkJyksICdlLWxhc3Ryb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKS5xdWVyeVNlbGVjdG9yQWxsKCd0cjpsYXN0LWNoaWxkIHRkJyksICdlLWxhc3Ryb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSB0aGlzLnByZXZpb3VzVmFsdWVzLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHRoaXMucHJldmlvdXNWYWx1ZXMubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRDc3NQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGVuYWJsZVJ0bCA9IGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQocnRsKSA/IHRoaXMucGFyZW50LmVuYWJsZVJ0bCA6IHJ0bDtcbiAgICAgICAgICAgIGNzcy5ib3JkZXIgPSBlbmFibGVSdGwgPyAnYm9yZGVyTGVmdFdpZHRoJyA6ICdib3JkZXJSaWdodFdpZHRoJztcbiAgICAgICAgICAgIGNzcy5wYWRkaW5nID0gZW5hYmxlUnRsID8gJ3BhZGRpbmdMZWZ0JyA6ICdwYWRkaW5nUmlnaHQnO1xuICAgICAgICAgICAgcmV0dXJuIGNzcztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVPdmVyZmxvdyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKS5zdHlsZS5vdmVyZmxvd1kgPSB0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5vdmVyZmxvd1kgPSB0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGRdLCAnZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZF0sICdlLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmdldFNjcm9sbEJhcldpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTY3JvbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNjcm9sbCA9IFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Njcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUHJpbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQcmludChwYXJlbnQsIHNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmNvbnRlbnRSZWFkeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gc2Nyb2xsTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZ09iai5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJ3ByaW50JywgJ2hlaWdodD0nICsgd2luZG93Lm91dGVySGVpZ2h0ICsgJyx3aWR0aD0nICsgd2luZG93Lm91dGVyV2lkdGggKyAnLHRhYmJhcj1ubycpO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93LnJlc2l6ZVRvKHNjcmVlbi5hdmFpbFdpZHRoLCBzY3JlZW4uYXZhaWxIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5wcmludE1vZGUgPT09ICdjdXJyZW50cGFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGFnZXJEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWxsb3dQYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5jb250ZW50UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbnRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhZ2VyRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBnT2JqLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdlckRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZ09iai5hbGxvd1BhZ2luZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuc2Nyb2xsTW9kdWxlLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckRpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEdyb3VwKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdG9vbGJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZpbHRlcmJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFjdGl2ZScpLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uMWJhY2tncm91bmQnKSwgJ2UtY2VsbHNlbGVjdGlvbjFiYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ByaW50JywgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93czogZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0clthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXScpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVQcmludCwgYXJncyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnByaW50KHRoaXMuZWxlbWVudCwgdGhpcy5wcmludFdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucHJpbnRDb21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5yZW1vdmVDb2xHcm91cCA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgICAgICAgICAgdmFyIGdyb3VwQ2FwdGlvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cGNhcHRpb24nKTtcbiAgICAgICAgICAgIHZhciBjb2xTcGFuID0gZ3JvdXBDYXB0aW9uW2RlcHRoIC0gMV0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwQ2FwdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdyb3VwQ2FwdGlvbltpXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xHcm91cHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sR3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZXB0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbEdyb3Vwc1tpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ByaW50JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByaW50O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QcmludCA9IFByaW50O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcHJpbnQuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZW51bV8xLCBlajJfYmFzZV8zLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlQ29sdW1uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFnZ3JlZ2F0ZUNvbHVtbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlQ29sdW1uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy50ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdCAmJiAodGhpcy5mb3JtYXQuc2tlbGV0b24gfHwgdGhpcy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0Rm4gPSB2YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbih0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoaGVscGVyKSB7XG4gICAgICAgICAgICBpZiAoaGVscGVyID09PSB2b2lkIDApIHsgaGVscGVyID0ge307IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeSldID0geyBmbjogZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZm9vdGVyVGVtcGxhdGUsIGhlbHBlciksXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZm9vdGVyVGVtcGxhdGUnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSB7IGZuOiBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlLCBoZWxwZXIpLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ2dyb3VwRm9vdGVyVGVtcGxhdGUnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5KV0gPSB7IGZuOiBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSwgaGVscGVyKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdncm91cENhcHRpb25UZW1wbGF0ZScgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgdHlwZSldO1xuICAgICAgICB9O1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgICAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICAgICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgICAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImNvbHVtbk5hbWVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICAgICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb3JtYXRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICAgICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgICAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImdyb3VwRm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICAgICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJncm91cENhcHRpb25UZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgICAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImN1c3RvbUFnZ3JlZ2F0ZVwiLCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gQWdncmVnYXRlQ29sdW1uO1xuICAgIH0oZWoyX2Jhc2VfMy5DaGlsZFByb3BlcnR5KSk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGVDb2x1bW4gPSBBZ2dyZWdhdGVDb2x1bW47XG4gICAgdmFyIEFnZ3JlZ2F0ZVJvdyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBZ2dyZWdhdGVSb3csIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZVJvdygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuQ29sbGVjdGlvbihbXSwgQWdncmVnYXRlQ29sdW1uKVxuICAgICAgICBdLCBBZ2dyZWdhdGVSb3cucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZVJvdztcbiAgICB9KGVqMl9iYXNlXzMuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlUm93ID0gQWdncmVnYXRlUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCBlajJfYmFzZV8yLCBldmVudHMsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5DaG9vc2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uQ2hvb3NlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGxnaGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsT3BlbkRsZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzQ3VzdG9taXplT3BlbkNDID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNCb3hUcnVlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveCh0cnVlLCB7IGNoZWNrZWQ6IHRydWUsIGxhYmVsOiAnICcgfSk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZSA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3godHJ1ZSwgeyBjaGVja2VkOiBmYWxzZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hUcnVlLmluc2VydEJlZm9yZShlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hrLWhpZGRlbiBlLWNjIGUtY2MtY2hib3gnLCBhdHRyczogeyB0eXBlOiAnY2hlY2tib3gnIH1cbiAgICAgICAgICAgIH0pLCB0aGlzLmNCb3hUcnVlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5jQm94RmFsc2UuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGstaGlkZGVuIGUtY2MgZS1jYy1jaGJveCcsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94RmFsc2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5xdWVyeVNlbGVjdG9yKCcuZS1mcmFtZScpLmNsYXNzTGlzdC5hZGQoJ2UtdW5jaGVjaycpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RoaXMuY0JveFRydWUsIHRoaXMuY0JveEZhbHNlXSwgWydlLXJ0bCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmhpZGVEaWFsb2cuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJEbGdDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLmdldFNob3dIaWRlU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnc2hvd0hpZGVTZXJ2aWNlJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ3VzdG9taXplT3BlbkNDKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MnKSkgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldEVsZW1lbnQsICcuZS1jYy10b29sYmFyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5jaG9vc2VyLWJ0bicpIHx8IHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNjLXRvb2xiYXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLmluaXRpYWxPcGVuRGxnICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHx8ICF0aGlzLmlzRGxnT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY3NlYXJjaCcpLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJTZWFyY2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmRsZ09iaikgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSAmJiAhdGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9vbGJhci1pdGVtcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5oaWRlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNvbHVtbkNob29zZXIgPSBmdW5jdGlvbiAoeCwgeSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zID0geyBYOiBudWxsLCBZOiBudWxsIH07XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MxID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVPcGVuQ29sdW1uQ2hvb3NlciwgYXJnczEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94U3RhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzQzMHB4JztcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFZpc2libGUgPSB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB2YXIgbmV3cG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbihlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtdG9vbGJhci1pdGVtJyksIHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRWaXNpYmxlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gbmV3cG9zLnRvcCArIGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1jYy10b29sYmFyJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2YXIgZGxnV2lkdGggPSAyNTA7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1iaWdnZXInKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoud2lkdGggPSAyNTM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoub3BlbiA9IHRoaXMubU9wZW5EbGcuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IHRhcmdldC5vZmZzZXRMZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9ICgobmV3cG9zLmxlZnQgLSBkbGdXaWR0aCkgKyBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtY2MtdG9vbGJhcicpLmNsaWVudFdpZHRoKSArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5vcGVuQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uIChYLCBZKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ3VzdG9taXplT3BlbkNDID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbE9wZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5jb250ZW50ID0gdGhpcy5yZW5kZXJDaG9vc2VyTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKFgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLnRvcCA9IFkgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IFggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouYmVmb3JlT3BlbiA9IHRoaXMuY3VzdG9tRGlhbG9nT3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmJlZm9yZUNsb3NlID0gdGhpcy5jdXN0b21EaWFsb2dDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jdXN0b21EaWFsb2dPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jdXN0b21EaWFsb2dDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jY2RsZyBlLWNjJywgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NjZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdmFyIHhwb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjUwO1xuICAgICAgICAgICAgdmFyIGRpYWxvUG9zID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0Nob29zZUNvbHVtbnMnKSxcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jb25maXJtRGxnQnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWNjIGUtY2Nfb2tidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckFjdGlvbnMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0IGUtY2MgZS1jYy1jbmJ0bicsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlbmRlckNob29zZXJMaXN0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI1MCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNob29zZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbWFpbi1kaXYgZS1jYycgfSk7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2Mtc2VhcmNoZGl2IGUtY2MgZS1pbnB1dC1ncm91cCcgfSk7XG4gICAgICAgICAgICB2YXIgY2NzZWFyY2hlbGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2NzZWFyY2ggZS1jYyBlLWlucHV0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBwbGFjZWhvbGRlcjogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjY3NlYXJjaGljb24gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtY2NzZWFyY2gtaWNvbiBlLWljb25zIGUtY2MgZS1pbnB1dC1ncm91cC1pY29uJyB9KTtcbiAgICAgICAgICAgIHZhciBjb25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jYy1jb250ZW50ZGl2JyB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pbm5lcmRpdiBlLWNjJyB9KTtcbiAgICAgICAgICAgIHNlYXJjaERpdi5hcHBlbmRDaGlsZChjY3NlYXJjaGVsZSk7XG4gICAgICAgICAgICBzZWFyY2hEaXYuYXBwZW5kQ2hpbGQoY2NzZWFyY2hpY29uKTtcbiAgICAgICAgICAgIGNjc2VhcmNoZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5zZWFyY2hGb2N1cy5iaW5kKHRoaXMsIGNjc2VhcmNoZWxlKSk7XG4gICAgICAgICAgICBjY3NlYXJjaGVsZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5zZWFyY2hCbHVyLmJpbmQodGhpcywgY2NzZWFyY2hlbGUpKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdkNvbnRlbnQgPSB0aGlzLnJlZnJlc2hDaGVja2JveExpc3QodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXZDb250ZW50KTtcbiAgICAgICAgICAgIGNvbkRpdi5hcHBlbmRDaGlsZCh0aGlzLmlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdi5hcHBlbmRDaGlsZChzZWFyY2hEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKGNvbkRpdik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWluRGl2O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zZWFyY2hGb2N1cyA9IGZ1bmN0aW9uICh0YXJndCkge1xuICAgICAgICAgICAgdGFyZ3QucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnNlYXJjaEJsdXIgPSBmdW5jdGlvbiAodGFyZ3QpIHtcbiAgICAgICAgICAgIHRhcmd0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jb25maXJtRGxnQnRuQ2xpY2sgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGVDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5oaWRlQ29sdW1uLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5zaG93Q29sdW1uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdjb2x1bW5zdGF0ZScsIGVsZW1lbnQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zLCBkaWFsb2dJbnN0YW5jZTogdGhpcy5kbGdPYmpcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlLnNldFZpc2libGUodGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJBY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtblN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKHN0YXRlQ29sdW1ucywgc3RhdGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZUNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbFVpZCA9IHN0YXRlQ29sdW1uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChjb2xVaWQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb2wudmlzaWJsZSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zLnB1c2goY3VycmVudENvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNsZWFyQWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jaGVja3N0YXRlY29sdW1uID0gZnVuY3Rpb24gKGlzQ2hlY2tlZCwgY29sdWlkKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKGNvbHVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbi5zcGxpY2UodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdWlkKSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4uaW5kZXhPZihjb2x1aWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4ucHVzaChjb2x1aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4uaW5kZXhPZihjb2x1aWQpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4uc3BsaWNlKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVpZCksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uLnB1c2goY29sdWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoVmFsKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXJTZWFyY2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBmbHRyQ29sO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFZhbCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICBmbHRyQ29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIGNsZWFyU2VhcmNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZSgnaGVhZGVyVGV4dCcsICdzdGFydHN3aXRoJywgc2VhcmNoVmFsLCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmx0ckNvbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2NubWRpdicpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5yZWZyZXNoQ2hlY2tib3hMaXN0KGZsdHJDb2wsIHNlYXJjaFZhbCkpO1xuICAgICAgICAgICAgICAgIGlmICghY2xlYXJTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG5NYXRjaGVsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jYyBlLW5tYXRjaCcgfSk7XG4gICAgICAgICAgICAgICAgbk1hdGNoZWxlLmlubmVySFRNTCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTWF0Y2hzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5pbm5lckhUTUwgPSAnICc7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChuTWF0Y2hlbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZ09iai5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNoZWNrQm94Q2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGxnT2JqLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5kbGdPYmouZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jaGVja0JveENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrQm94Q2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjaGVja3N0YXRlO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1jaGVja2JveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS50b29nbGVDaGVja2JveChlbGVtLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvcignLmUtY2hrLWhpZGRlbicpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0ucXVlcnlTZWxlY3RvcignLmUtY2hlY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS11bmNoZWNrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tzdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uVWlkID0gdXRpbF8xLnBhcmVudHNVbnRpbChlbGVtLCAnZS1jY2hlY2snKS5nZXRBdHRyaWJ1dGUoJ3VpZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tzdGF0ZWNvbHVtbihjaGVja3N0YXRlLCBjb2x1bW5VaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZWZyZXNoQ2hlY2tib3hMaXN0ID0gZnVuY3Rpb24gKGdkQ29sLCBzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHRoaXMudWxFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd1bCcsIHsgY2xhc3NOYW1lOiAnZS1jY3VsLWVsZSBlLWNjJyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2RDb2wubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdkQ29sW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hlY2tib3goY29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWlucHV0JykudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3NlclNlYXJjaCgnJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2MtY2hib3gnKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5VSUQgPSB1dGlsXzEucGFyZW50c1VudGlsKGVsZW1lbnQsICdlLWNjaGVjaycpLmdldEF0dHJpYnV0ZSgndWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGNvbHVtblVJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNyZWF0ZUNoZWNrQm94ID0gZnVuY3Rpb24gKGxhYmVsLCBjaGVja2VkLCB1aWQpIHtcbiAgICAgICAgICAgIHZhciBjYm94ID0gY2hlY2tlZCA/IHRoaXMuY0JveFRydWUuY2xvbmVOb2RlKHRydWUpIDogdGhpcy5jQm94RmFsc2UuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgY2JveC5xdWVyeVNlbGVjdG9yKCcuZS1sYWJlbCcpLmlubmVySFRNTCA9IGxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5jcmVhdGVDYm94V2l0aFdyYXAodWlkLCBjYm94LCAnZS1jY2hlY2snKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ2hlY2tib3ggPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgY2NsaXN0O1xuICAgICAgICAgICAgdmFyIGhpZGVDb2xTdGF0ZTtcbiAgICAgICAgICAgIHZhciBzaG93Q29sU3RhdGU7XG4gICAgICAgICAgICB2YXIgY2hlY2tCb3hPYmo7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnNob3dJbkNvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICBjY2xpc3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xpJywgeyBjbGFzc05hbWU6ICdlLWNjbGlzdCBlLWNjJywgc3R5bGVzOiAnbGlzdC1zdHlsZTpOb25lJywgaWQ6ICdlLWNjbGlfJyArIGNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICAgICAgaGlkZUNvbFN0YXRlID0gdGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHNob3dDb2xTdGF0ZSA9IHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgY2NjaGVja2JveGxpc3QgPSB0aGlzLmNyZWF0ZUNoZWNrQm94KGNvbHVtbi5oZWFkZXJUZXh0LCAoY29sdW1uLnZpc2libGUgJiYgIWhpZGVDb2xTdGF0ZSkgfHwgc2hvd0NvbFN0YXRlLCBjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBjY2xpc3QuYXBwZW5kQ2hpbGQoY2NjaGVja2JveGxpc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMudWxFbGVtZW50LmFwcGVuZENoaWxkKGNjbGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RhcnRUaW1lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gIXByb3h5LmZsYWcgJiYgZS5rZXlDb2RlICE9PSAxMyA/IDUwMCA6IDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcHJveHkuY29sdW1uQ2hvb3NlclNlYXJjaChwcm94eS5zZWFyY2hWYWx1ZSk7IH0sIGludGVydmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmFkZGNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QuYWRkKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW1vdmVDYW5jZWxJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYucXVlcnlTZWxlY3RvcignLmUtY2MuZS1jY3NlYXJjaC1pY29uJykuY2xhc3NMaXN0LnJlbW92ZSgnZS1jYy1jYW5jZWwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUubU9wZW5EbGcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYy1zZWFyY2hkaXYnKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0NvbHVtbkNob29zZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uQ2hvb3NlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uQ2hvb3NlciA9IENvbHVtbkNob29zZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tY2hvb3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDbGlwYm9hcmQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDbGlwYm9hcmQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ID0gJyc7XG4gICAgICAgICAgICB0aGlzLmlzU2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlEb3duSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jbGlwYm9hcmQnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ29wYWNpdHk6IDAnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJlYWRvbmx5OiAndHJ1ZScgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEpO1xuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmtleURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2N0cmxQbHVzQycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUuYWN0aW9uID09PSAnY3RybFNoaWZ0UGx1c0gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLnNldENvcHlEYXRhID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnZhbHVlID0gdGhpcy5jb3B5Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlICE9PSAnY2VsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aXRoSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvcHlEYXRhKFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1oZWFkZXJjZWxsJykpLCBmYWxzZSwgJ1xcdCcsIHdpdGhIZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5Q29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkSW5kZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5Q29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29weURhdGEoW10uc2xpY2UuY2FsbChyb3dzW3NlbGVjdGVkSW5kZXhlc1tpXV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpKSwgZmFsc2UsICdcXHQnLCB3aXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb3B5RGF0YShbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKSksIHRydWUsICdcXG4nLCB3aXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY29weUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVDb3B5LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnZhbHVlID0gdGhpcy5jb3B5Q29udGVudCA9IGFyZ3MuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci51c2VyQWdlbnQubWF0Y2goL2lwYWR8aXBvZHxpcGhvbmUvaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYS5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5nZXRDb3B5RGF0YSA9IGZ1bmN0aW9uIChjZWxscywgaXNDZWxsLCBzcGxpdEtleSwgd2l0aEhlYWRlcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh3aXRoSGVhZGVyICYmIGlzQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKClbcGFyc2VJbnQoY2VsbHNbal0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uaGVhZGVyVGV4dCArICdcXG4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IGNlbGxzW2pdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIGlmIChqIDwgY2VsbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IHNwbGl0S2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2NvcHknKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29weURhdGEod2l0aEhlYWRlcik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdjbGlwYm9hcmQnO1xuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2xpcGJvYXJkO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DbGlwYm9hcmQgPSBDbGlwYm9hcmQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jbGlwYm9hcmQuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9hY3Rpb25zL3NvcnRcIiwgXCIuL2FjdGlvbnMvcGFnZVwiLCBcIi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuL2FjdGlvbnMvZmlsdGVyXCIsIFwiLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuL2FjdGlvbnMvcmVzaXplXCIsIFwiLi9hY3Rpb25zL3Jlb3JkZXJcIiwgXCIuL2FjdGlvbnMvcm93LXJlb3JkZXJcIiwgXCIuL2FjdGlvbnMvZ3JvdXBcIiwgXCIuL2FjdGlvbnMvcHJpbnRcIiwgXCIuL2FjdGlvbnMvZGV0YWlsLXJvd1wiLCBcIi4vYWN0aW9ucy90b29sYmFyXCIsIFwiLi9hY3Rpb25zL2FnZ3JlZ2F0ZVwiLCBcIi4vYWN0aW9ucy92aXJ0dWFsLXNjcm9sbFwiLCBcIi4vYWN0aW9ucy9lZGl0XCIsIFwiLi9hY3Rpb25zL2JhdGNoLWVkaXRcIiwgXCIuL2FjdGlvbnMvaW5saW5lLWVkaXRcIiwgXCIuL2FjdGlvbnMvbm9ybWFsLWVkaXRcIiwgXCIuL2FjdGlvbnMvZGlhbG9nLWVkaXRcIiwgXCIuL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZXhwb3J0XCIsIFwiLi9hY3Rpb25zL3BkZi1leHBvcnRcIiwgXCIuL2FjdGlvbnMvZXhwb3J0LWhlbHBlclwiLCBcIi4vYWN0aW9ucy9jbGlwYm9hcmRcIiwgXCIuL2FjdGlvbnMvY29tbWFuZC1jb2x1bW5cIiwgXCIuL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyXCIsIFwiLi9hY3Rpb25zL2NvbnRleHQtbWVudVwiLCBcIi4vYWN0aW9ucy9mcmVlemVcIiwgXCIuL2FjdGlvbnMvY29sdW1uLW1lbnVcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZmlsdGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGF0YV8xLCBzb3J0XzEsIHBhZ2VfMSwgc2VsZWN0aW9uXzEsIGZpbHRlcl8xLCBzZWFyY2hfMSwgc2Nyb2xsXzEsIHJlc2l6ZV8xLCByZW9yZGVyXzEsIHJvd19yZW9yZGVyXzEsIGdyb3VwXzEsIHByaW50XzEsIGRldGFpbF9yb3dfMSwgdG9vbGJhcl8xLCBhZ2dyZWdhdGVfMSwgdmlydHVhbF9zY3JvbGxfMSwgZWRpdF8xLCBiYXRjaF9lZGl0XzEsIGlubGluZV9lZGl0XzEsIG5vcm1hbF9lZGl0XzEsIGRpYWxvZ19lZGl0XzEsIGNvbHVtbl9jaG9vc2VyXzEsIGV4Y2VsX2V4cG9ydF8xLCBwZGZfZXhwb3J0XzEsIGV4cG9ydF9oZWxwZXJfMSwgY2xpcGJvYXJkXzEsIGNvbW1hbmRfY29sdW1uXzEsIGNoZWNrYm94X2ZpbHRlcl8xLCBjb250ZXh0X21lbnVfMSwgZnJlZXplXzEsIGNvbHVtbl9tZW51XzEsIGV4Y2VsX2ZpbHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChkYXRhXzEpO1xuICAgIF9fZXhwb3J0KHNvcnRfMSk7XG4gICAgX19leHBvcnQocGFnZV8xKTtcbiAgICBfX2V4cG9ydChzZWxlY3Rpb25fMSk7XG4gICAgX19leHBvcnQoZmlsdGVyXzEpO1xuICAgIF9fZXhwb3J0KHNlYXJjaF8xKTtcbiAgICBfX2V4cG9ydChzY3JvbGxfMSk7XG4gICAgX19leHBvcnQocmVzaXplXzEpO1xuICAgIF9fZXhwb3J0KHJlb3JkZXJfMSk7XG4gICAgX19leHBvcnQocm93X3Jlb3JkZXJfMSk7XG4gICAgX19leHBvcnQoZ3JvdXBfMSk7XG4gICAgX19leHBvcnQocHJpbnRfMSk7XG4gICAgX19leHBvcnQoZGV0YWlsX3Jvd18xKTtcbiAgICBfX2V4cG9ydCh0b29sYmFyXzEpO1xuICAgIF9fZXhwb3J0KGFnZ3JlZ2F0ZV8xKTtcbiAgICBfX2V4cG9ydCh2aXJ0dWFsX3Njcm9sbF8xKTtcbiAgICBfX2V4cG9ydChlZGl0XzEpO1xuICAgIF9fZXhwb3J0KGJhdGNoX2VkaXRfMSk7XG4gICAgX19leHBvcnQoaW5saW5lX2VkaXRfMSk7XG4gICAgX19leHBvcnQobm9ybWFsX2VkaXRfMSk7XG4gICAgX19leHBvcnQoZGlhbG9nX2VkaXRfMSk7XG4gICAgX19leHBvcnQoY29sdW1uX2Nob29zZXJfMSk7XG4gICAgX19leHBvcnQoZXhjZWxfZXhwb3J0XzEpO1xuICAgIF9fZXhwb3J0KHBkZl9leHBvcnRfMSk7XG4gICAgX19leHBvcnQoZXhwb3J0X2hlbHBlcl8xKTtcbiAgICBfX2V4cG9ydChjbGlwYm9hcmRfMSk7XG4gICAgX19leHBvcnQoY29tbWFuZF9jb2x1bW5fMSk7XG4gICAgX19leHBvcnQoY2hlY2tib3hfZmlsdGVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbnRleHRfbWVudV8xKTtcbiAgICBfX2V4cG9ydChmcmVlemVfMSk7XG4gICAgX19leHBvcnQoY29sdW1uX21lbnVfMSk7XG4gICAgX19leHBvcnQoZXhjZWxfZmlsdGVyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsU2Nyb2xsKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndmlydHVhbHNjcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIsIG5ldyB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMS5WaXJ0dWFsSGVhZGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLlZpcnR1YWxDb250ZW50UmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVQYWdlU2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVQYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dIZWlnaHQgPSB1dGlsXzEuZ2V0Um93SGVpZ2h0KHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSB+fih0aGlzLnBhcmVudC5oZWlnaHQgLyByb3dIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuYmxvY2tTaXplICogMjtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0UHJvcGVydGllcyh7IHBhZ2VTZXR0aW5nczogeyBwYWdlU2l6ZTogc2l6ZSA8IGhlaWdodCA/IGhlaWdodCA6IHNpemUgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgYXJncy5tb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsU2Nyb2xsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsU2Nyb2xsID0gVmlydHVhbFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyXCIsIFwiLi4vc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLCB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbENvbnRlbnRSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhWaXJ0dWFsQ29udGVudFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucHJldkhlaWdodCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmFjdGlvbnMgPSBbJ2ZpbHRlcmluZycsICdzZWFyY2hpbmcnLCAnZ3JvdXBpbmcnLCAndW5ncm91cGluZyddO1xuICAgICAgICAgICAgX3RoaXMub2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZSA9IG5ldyBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgIF90aGlzLm9mZnNldEtleXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5ldmVudExpc3RlbmVyKCdvbicpO1xuICAgICAgICAgICAgX3RoaXMudmdlbmVyYXRvciA9IF90aGlzLmdlbmVyYXRvcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLndyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlRXZlbnQgPSAodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgJiYgIXRoaXMucGFyZW50LmRhdGFTb3VyY2UuZGF0YVNvdXJjZS5vZmZsaW5lKTtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRlbnQsIHBhZ2VIZWlnaHQ6IHRoaXMuZ2V0QmxvY2tIZWlnaHQoKSAqIDIsIGRlYm91bmNlRXZlbnQ6IGRlYm91bmNlRXZlbnQsXG4gICAgICAgICAgICAgICAgYXhlczogdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbJ1gnLCAnWSddIDogWydZJ11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLkludGVyU2VjdGlvbk9ic2VydmVyKHRoaXMudmlydHVhbEVsZS53cmFwcGVyLCBvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eSA9IGZ1bmN0aW9uICh0Ym9keSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZSgwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuc2Nyb2xsTGlzdGVuZXIgPSBmdW5jdGlvbiAoc2Nyb2xsQXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldmVudEV2ZW50IHx8IHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRoaXMuY29udGVudCA9PT0gZWoyX2Jhc2VfMS5jbG9zZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICcuZS1jb250ZW50JykgfHwgdGhpcy5jb250ZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGluZm8gPSBzY3JvbGxBcmdzLnNlbnRpbmVsO1xuICAgICAgICAgICAgdmFyIHZpZXdJbmZvID0gdGhpcy5nZXRJbmZvRnJvbVZpZXcoc2Nyb2xsQXJncy5kaXJlY3Rpb24sIGluZm8sIHNjcm9sbEFyZ3Mub2Zmc2V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvICYmICgoaW5mby5heGlzID09PSAnWScgJiYgdGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSA9PT0gdmlld0luZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgfHwgKGluZm8uYXhpcyA9PT0gJ1gnICYmIHRoaXMucHJldkluZm8uY29sdW1uSW5kZXhlcy50b1N0cmluZygpID09PSB2aWV3SW5mby5jb2x1bW5JbmRleGVzLnRvU3RyaW5nKCkpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB2aWV3SW5mby5jb2x1bW5JbmRleGVzIDogW10pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gdmlld0luZm8ubG9hZE5leHQgJiYgIXZpZXdJbmZvLmxvYWRTZWxmID8gdmlld0luZm8ubmV4dEluZm8ucGFnZSA6IHZpZXdJbmZvLnBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkodmlld0luZm8uZXZlbnQsIHsgcmVxdWVzdFR5cGU6ICd2aXJ0dWFsc2Nyb2xsJywgdmlydHVhbEluZm86IHZpZXdJbmZvIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ibG9jayA9IGZ1bmN0aW9uIChibGspIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZShibGspO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbmZvRnJvbVZpZXcgPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBpbmZvLCBlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcEJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZm9UeXBlID0geyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgc2VudGluZWxJbmZvOiBpbmZvLCBvZmZzZXRzOiBlIH07XG4gICAgICAgICAgICBpbmZvVHlwZS5wYWdlID0gdGhpcy5nZXRQYWdlRnJvbVRvcChlLnRvcCwgaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gdGVtcEJsb2NrcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mb1R5cGUucGFnZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5sb2FkU2VsZiA9ICF0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZSh0ZW1wQmxvY2tzW2luZm9UeXBlLmJsb2NrXSk7XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gdGhpcy5lbnN1cmVCbG9ja3MoaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gYmxvY2tzO1xuICAgICAgICAgICAgaW5mb1R5cGUubG9hZE5leHQgPSAhYmxvY2tzLmZpbHRlcihmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0ZW1wQmxvY2tzLmluZGV4T2YodmFsKSA9PT0gLTE7IH0pXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KHRoaXMuYmxvY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ldmVudCA9IChpbmZvVHlwZS5sb2FkTmV4dCB8fCBpbmZvVHlwZS5sb2FkU2VsZikgPyBjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCA6IGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaztcbiAgICAgICAgICAgIGluZm9UeXBlLm5leHRJbmZvID0gaW5mb1R5cGUubG9hZE5leHQgPyB7IHBhZ2U6IE1hdGgubWF4KDEsIGluZm9UeXBlLnBhZ2UgKyAoZGlyZWN0aW9uID09PSAnZG93bicgPyAxIDogLTEpKSB9IDoge307XG4gICAgICAgICAgICBpbmZvVHlwZS5jb2x1bW5JbmRleGVzID0gaW5mby5heGlzID09PSAnWCcgPyB0aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZm8uYXhpcyA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgaW5mb1R5cGUuZXZlbnQgPSBjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb1R5cGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmVuc3VyZUJsb2NrcyA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5mby5ibG9ja0luZGV4ZXNbaW5mby5ibG9ja107XG4gICAgICAgICAgICB2YXIgbUlkeDtcbiAgICAgICAgICAgIHZhciBvbGQgPSBpbmRleDtcbiAgICAgICAgICAgIHZhciBtYXggPSBNYXRoLm1heDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gaW5mby5kaXJlY3Rpb24gPT09ICdkb3duJyA/IFttYXgoaW5kZXgsIDEpLCArK2luZGV4LCArK2luZGV4XSA6IFttYXgoaW5kZXggLSAxLCAxKSwgaW5kZXgsIGluZGV4ICsgMV07XG4gICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaW5kKSB7IHJldHVybiBpbmRleGVzLmluZGV4T2YodmFsKSA9PT0gaW5kOyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpID09PSBpbmRleGVzLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmZvLmxvYWRTZWxmIHx8IChpbmZvLmRpcmVjdGlvbiA9PT0gJ2Rvd24nICYmIHRoaXMuaXNFbmRCbG9jayhvbGQpKSkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleGVzLnNvbWUoZnVuY3Rpb24gKHZhbCwgaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbCA9PT0gX3RoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1JZHggPSBpbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChtSWR4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5zbGljZSgwLCBtSWR4ICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2sgPT09IDAgJiYgaW5kZXhlcy5sZW5ndGggPT09IDEgJiYgdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1swXSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBbaW5kZXhlc1swXSAtIDEsIGluZGV4ZXNbMF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhcmdldCwgbmV3Q2hpbGQsIGUpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gZS52aXJ0dWFsSW5mbztcbiAgICAgICAgICAgIHRoaXMucHJldkluZm8gPSB0aGlzLnByZXZJbmZvIHx8IGUudmlydHVhbEluZm87XG4gICAgICAgICAgICB2YXIgY0Jsb2NrID0gKGluZm8uY29sdW1uSW5kZXhlc1swXSkgLSAxO1xuICAgICAgICAgICAgdmFyIGNPZmZzZXQgPSB0aGlzLmdldENvbHVtbk9mZnNldChjQmxvY2spO1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5nZXRUcmFuc2xhdGVZKHRoaXMuY29udGVudC5zY3JvbGxUb3AsIHRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsIGluZm8pO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNJbmRleCA9IGluZm8uY29sdW1uSW5kZXhlcztcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNJbmRleFtjSW5kZXgubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0luZGV4WzBdIC0gMSkgKyAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLnNldFdyYXBwZXJXaWR0aCh3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuc2V0V3JhcHBlcldpZHRoKHdpZHRoLCB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBlajJfYmFzZV8yLkJyb3dzZXIuaXNJRSk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxrID0gdGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0gLSB0aGlzLnByZXZIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNUb3AgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gc1RvcCArIGJsaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRQYWdlSGVpZ2h0KHRoaXMuZ2V0T2Zmc2V0KGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRPZmZzZXQoYmxvY2tzWzBdIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2SW5mbyA9IGluZm87XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25EYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGUuY291bnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsUG9zaXRpb24oZS5yZXF1ZXN0VHlwZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnNldFZpcnR1YWxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5PZmZzZXQodGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGggKyB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIC0gMSkgKyAncHgnIDogJzEwMCUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnNldFZpcnR1YWxIZWlnaHQodGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0sIHdpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuc2V0VmlydHVhbEhlaWdodCgxLCB3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFBhZ2VGcm9tVG9wID0gZnVuY3Rpb24gKHNUb3AsIGluZm8pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IDA7XG4gICAgICAgICAgICB2YXIgZXh0cmEgPSB0aGlzLm9mZnNldHNbdG90YWxdIC0gdGhpcy5wcmV2SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRLZXlzLnNvbWUoZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNUb3AgPCBfdGhpcy5vZmZzZXRzW29mZnNldF0gfHwgKGlPZmZzZXQgPT09IHRvdGFsICYmIHNUb3AgPiBfdGhpcy5vZmZzZXRzW29mZnNldF0pO1xuICAgICAgICAgICAgICAgIGlmIChib3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9jayA9IGlPZmZzZXQgJSAyID09PSAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBNYXRoLm1pbihfdGhpcy52Z2VuZXJhdG9yLmdldFBhZ2UoaU9mZnNldCksIF90aGlzLm1heFBhZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRyYW5zbGF0ZVkgPSBmdW5jdGlvbiAoc1RvcCwgY0hlaWdodCwgaW5mbykge1xuICAgICAgICAgICAgaWYgKGluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZm8gPSB7IHBhZ2U6IHRoaXMuZ2V0UGFnZUZyb21Ub3Aoc1RvcCwge30pIH07XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmxvY2sgPSAoaW5mby5ibG9ja0luZGV4ZXNbMF0gfHwgMSkgLSAxO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrKTtcbiAgICAgICAgICAgIHZhciBlbmRUcmFuc2xhdGUgPSB0aGlzLmdldE9mZnNldChpbmZvLmJsb2NrSW5kZXhlc1tpbmZvLmJsb2NrSW5kZXhlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlID4gc1RvcCA/IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrIC0gMSkgOiBlbmRUcmFuc2xhdGUgPCAoc1RvcCArIGNIZWlnaHQpID8gdGhpcy5nZXRPZmZzZXQoYmxvY2sgKyAxKSA6IHRyYW5zbGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0T2Zmc2V0ID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odGhpcy5vZmZzZXRzW2Jsb2NrXSB8IDAsIHRoaXMub2Zmc2V0c1t0aGlzLm1heEJsb2NrXSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uRW50ZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIGN1cnJlbnQsIGRpcmVjdGlvbiwgZSkge1xuICAgICAgICAgICAgICAgIHZhciB4QXhpcyA9IGN1cnJlbnQuYXhpcyA9PT0gJ1gnO1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBfdGhpcy5wcmV2SW5mby5vZmZzZXRzID8gX3RoaXMucHJldkluZm8ub2Zmc2V0cy50b3AgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IF90aGlzLmdldENvbHVtbk9mZnNldCh4QXhpcyA/IF90aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpWzBdIC0gMSA6IF90aGlzLnByZXZJbmZvLmNvbHVtbkluZGV4ZXNbMF0gLSAxKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IF90aGlzLmdldFRyYW5zbGF0ZVkoZS50b3AsIGhlaWdodCwgeEF4aXMgJiYgdG9wID09PSBlLnRvcCA/IF90aGlzLnByZXZJbmZvIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKHgsIE1hdGgubWluKHksIF90aGlzLm9mZnNldHNbX3RoaXMubWF4QmxvY2tdKSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oZWFkZXIudmlydHVhbEVsZS5hZGp1c3RUYWJsZSh4LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ldmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50W2FjdGlvbl0oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMub25EYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRbYWN0aW9uXShjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2ssIHRoaXMucmVmcmVzaENvbnRlbnRSb3dzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMucGFyZW50W2FjdGlvbl0oZXZlbnQgKyBcIi1iZWdpblwiLCBfdGhpcy5vbkFjdGlvbkJlZ2luLCBfdGhpcyk7IH0pO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9ic2VydmVyLm9ic2VydmUoZnVuY3Rpb24gKHNjcm9sbEFyZ3MpIHsgcmV0dXJuIF90aGlzLnNjcm9sbExpc3RlbmVyKHNjcm9sbEFyZ3MpOyB9LCBfdGhpcy5vbkVudGVyZWQoKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEJsb2NrU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUgPj4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmxvY2tIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCbG9ja1NpemUoKSAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuaXNFbmRCbG9jayA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IHRvdGFsQmxvY2tzIHx8IGluZGV4ID09PSB0b3RhbEJsb2NrcyAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRvdGFsQmxvY2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmNvdW50IC8gdGhpcy5nZXRCbG9ja1NpemUoKSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldENvbHVtbk9mZnNldCA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5jT2Zmc2V0c1tibG9ja10gfCAwO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVzZXRTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnMuc29tZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBhY3Rpb247IH0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wICE9PSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldFByb3BlcnRpZXMoeyBwYWdlU2V0dGluZ3M6IHsgY3VycmVudFBhZ2U6IDEgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuZ2V0Um93cygpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SWR4ID0gKHByZXZbMF0gLSAxKSAqIHRoaXMuZ2V0QmxvY2tTaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleCAtIHN0YXJ0SWR4XTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaE9mZnNldHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvdyA9IDA7XG4gICAgICAgICAgICB2YXIgYlNpemUgPSB0aGlzLmdldEJsb2NrU2l6ZSgpO1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5vZmZzZXRzW3RvdGFsXTtcbiAgICAgICAgICAgIHRoaXMubWF4QmxvY2sgPSB0b3RhbCAlIDIgPT09IDAgPyB0b3RhbCAtIDIgOiB0b3RhbCAtIDE7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KHRvdGFsKSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuICsrcm93OyB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSAoX3RoaXMudmdlbmVyYXRvci5jYWNoZVtibG9ja10gfHwgW10pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgcmVtID0gX3RoaXMuY291bnQgJSBiU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGJsb2NrIGluIF90aGlzLnZnZW5lcmF0b3IuY2FjaGUgP1xuICAgICAgICAgICAgICAgICAgICB0bXAgKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCkgOiByZW0gJiYgYmxvY2sgPT09IHRvdGFsID8gcmVtICogdXRpbF8xLmdldFJvd0hlaWdodCgpIDogX3RoaXMuZ2V0QmxvY2tIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRzW2Jsb2NrXSA9IChfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwKSArIHNpemU7XG4gICAgICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0c1tibG9ja10gPSBfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9mZnNldEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9mZnNldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52Z2VuZXJhdG9yLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudmdlbmVyYXRvci5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxDb250ZW50UmVuZGVyZXIgPSBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVmlydHVhbEhlYWRlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlID0gbmV3IFZpcnR1YWxFbGVtZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgX3RoaXMuZ2VuID0gbmV3IHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaywgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUudmlydHVhbEluZm8uc2VudGluZWxJbmZvLmF4aXMgPT09ICdYJyA/IF90aGlzLnJlZnJlc2hVSSgpIDogbnVsbDsgfSwgX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdlbi5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLmdlbi5nZXRDb2x1bW5JbmRleGVzKHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkKSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcignYWJzb2x1dGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUud3JhcHBlci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFVJID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZW4ucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5nZW4uZ2V0Q29sdW1uSW5kZXhlcyh0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCkpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoVUkuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxIZWFkZXJSZW5kZXJlcjtcbiAgICB9KGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcikpO1xuICAgIGV4cG9ydHMuVmlydHVhbEhlYWRlclJlbmRlcmVyID0gVmlydHVhbEhlYWRlclJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5yZW5kZXJXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdmlydHVhbHRhYmxlJyB9KTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnJlbmRlclBsYWNlSG9sZGVyID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IHZvaWQgMCkgeyBwb3NpdGlvbiA9ICdyZWxhdGl2ZSc7IH1cbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS12aXJ0dWFsdHJhY2snLCBzdHlsZXM6IFwicG9zaXRpb246XCIgKyBwb3NpdGlvbiB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5hZGp1c3RUYWJsZSA9IGZ1bmN0aW9uICh4VmFsdWUsIHlWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKFwiICsgeFZhbHVlICsgXCJweCwgXCIgKyB5VmFsdWUgKyBcInB4KVwiO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnNldFdyYXBwZXJXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgZnVsbCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLndpZHRoID0gd2lkdGggPyB3aWR0aCArIFwicHhcIiA6IGZ1bGwgPyAnMTAwJScgOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5zZXRWaXJ0dWFsSGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCwgd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbEVsZW1lbnRIYW5kbGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSBWaXJ0dWFsRWxlbWVudEhhbmRsZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvdmlydHVhbC1jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbnRlclNlY3Rpb25PYnNlcnZlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5mcm9tV2hlZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuc2VudGluZWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICd1cCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gcmVjdC50b3AgLSBfdGhpcy5jb250YWluZXJSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHRvcCA+PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvcCArIChfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyKSA+PSAwO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBheGlzOiAnWSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdkb3duJzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjSGVpZ2h0ID0gX3RoaXMub3B0aW9ucy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IHJlY3QuYm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gcmVjdC5ib3R0b20gPD0gX3RoaXMuY29udGFpbmVyUmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9wIC0gKF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDIpIDw9IF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdZJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ3JpZ2h0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IHJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSByaWdodCA8IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHQgLSBfdGhpcy5jb250YWluZXJSZWN0LndpZHRoIDw9IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSByZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSBsZWZ0ID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgX3RoaXMuY29udGFpbmVyUmVjdC53aWR0aCA+PSBfdGhpcy5jb250YWluZXJSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZWN0ID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnd2hlZWwnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mcm9tV2hlZWwgPSB0cnVlOyB9LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy52aXJ0dWFsU2Nyb2xsSGFuZGxlcihjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5zZW50aW5lbEluZm9bZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHJldHVybiBpbmZvLmNoZWNrKHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgaW5mbyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS52aXJ0dWFsU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHByZXZUb3AgPSAwO1xuICAgICAgICAgICAgdmFyIHByZXZMZWZ0ID0gMDtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZWQxMDAgPSBlajJfYmFzZV8yLmRlYm91bmNlKGNhbGxiYWNrLCAxMDApO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlZDUwID0gZWoyX2Jhc2VfMi5kZWJvdW5jZShjYWxsYmFjaywgNTApO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGUudGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGUudGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHByZXZUb3AgPCB0b3AgPyAnZG93bicgOiAndXAnO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHByZXZMZWZ0ID09PSBsZWZ0ID8gZGlyZWN0aW9uIDogcHJldkxlZnQgPCBsZWZ0ID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICAgICAgICBwcmV2VG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIHByZXZMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IF90aGlzLnNlbnRpbmVsSW5mb1tkaXJlY3Rpb25dO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmF4ZXMuaW5kZXhPZihjdXJyZW50LmF4aXMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IF90aGlzLmNoZWNrKGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuZW50ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkVudGVyQ2FsbGJhY2soX3RoaXMuZWxlbWVudCwgY3VycmVudCwgZGlyZWN0aW9uLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX3RoaXMuZnJvbVdoZWVsID8gX3RoaXMub3B0aW9ucy5kZWJvdW5jZUV2ZW50ID8gZGVib3VuY2VkMTAwIDogY2FsbGJhY2sgOiBkZWJvdW5jZWQxMDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4gPSBkZWJvdW5jZWQ1MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmbih7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBzZW50aW5lbDogY3VycmVudCwgb2Zmc2V0OiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmZyb21XaGVlbCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnNldFBhZ2VIZWlnaHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wYWdlSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMucm93TW9kZWxHZW5lcmF0b3IgPSB0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nID8gbmV3IGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwTW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpIDogbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgbm90aWZ5QXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmZvID0gbm90aWZ5QXJncy52aXJ0dWFsSW5mbyA9IG5vdGlmeUFyZ3MudmlydHVhbEluZm8gfHwgdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgeEF4aXMgPSBpbmZvLnNlbnRpbmVsSW5mbyAmJiBpbmZvLnNlbnRpbmVsSW5mby5heGlzID09PSAnWCc7XG4gICAgICAgICAgICB2YXIgcGFnZSA9ICF4QXhpcyAmJiBpbmZvLmxvYWROZXh0ICYmICFpbmZvLmxvYWRTZWxmID8gaW5mby5uZXh0SW5mby5wYWdlIDogaW5mby5wYWdlO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5nZXRCbG9ja0luZGV4ZXMocGFnZSk7XG4gICAgICAgICAgICB2YXIgbG9hZGVkQmxvY2tzID0gW107XG4gICAgICAgICAgICB0aGlzLmNoZWNrQW5kUmVzZXRDYWNoZShub3RpZnlBcmdzLnJlcXVlc3RUeXBlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbdmFsdWVdID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IucmVmcmVzaFJvd3MoX3RoaXMuY2FjaGVbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpcnR1YWxJbmZvOiBpbmZvLCBzdGFydEluZGV4OiBfdGhpcy5nZXRTdGFydEluZGV4KHZhbHVlLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhbiA9IH5+TWF0aC5tYXgocm93cy5sZW5ndGgsIF90aGlzLm1vZGVsLnBhZ2VTaXplKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbaW5kZXhlc1swXV0gPSByb3dzLnNsaWNlKDAsIG1lZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVtpbmRleGVzWzFdXSA9IHJvd3Muc2xpY2UobWVkaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXhBeGlzICYmIF90aGlzLmNhY2hlW3ZhbHVlXSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVt2YWx1ZV0gPSBfdGhpcy51cGRhdGVHcm91cFJvdyhfdGhpcy5jYWNoZVt2YWx1ZV0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LCBfdGhpcy5jYWNoZVt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWRCbG9ja3MucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcyA9IGxvYWRlZEJsb2NrcztcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0QmxvY2tJbmRleGVzID0gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBbcGFnZSArIChwYWdlIC0gMSksIHBhZ2UgKiAyXTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRQYWdlID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gYmxvY2sgJSAyID09PSAwID8gYmxvY2sgLyAyIDogKGJsb2NrICsgMSkgLyAyO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzQmxvY2tBdmFpbGFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbiB0aGlzLmNhY2hlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMubW9kZWwuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgYmxvY2tJbmRleGVzOiB0aGlzLmdldEJsb2NrSW5kZXhlcyh0aGlzLm1vZGVsLmN1cnJlbnRQYWdlKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdkb3duJyxcbiAgICAgICAgICAgICAgICBjb2x1bW5JbmRleGVzOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0U3RhcnRJbmRleCA9IGZ1bmN0aW9uIChibGssIGRhdGEsIGZ1bGwpIHtcbiAgICAgICAgICAgIGlmIChmdWxsID09PSB2b2lkIDApIHsgZnVsbCA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciBwYWdlID0gdGhpcy5nZXRQYWdlKGJsayk7XG4gICAgICAgICAgICB2YXIgZXZlbiA9IGJsayAlIDIgPT09IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAocGFnZSAtIDEpICogdGhpcy5tb2RlbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBmdWxsIHx8ICFldmVuID8gaW5kZXggOiBpbmRleCArIH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoY29udGVudCA9PT0gdm9pZCAwKSB7IGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZDsgfVxuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzTGVmdCA9IGNvbnRlbnQuc2Nyb2xsTGVmdCB8IDA7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuY09mZnNldHMpO1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IGNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBzTGVmdCA9IE1hdGgubWluKHRoaXMuY09mZnNldHNba2V5cy5sZW5ndGggLSAxXSAtIGNXaWR0aCwgc0xlZnQpO1xuICAgICAgICAgICAgdmFyIGNhbFdpZHRoID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gMiAqIGNXaWR0aCA6IGNXaWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IHNMZWZ0ICsgY1dpZHRoICsgKHNMZWZ0ID09PSAwID8gY2FsV2lkdGggOiAwKTtcbiAgICAgICAgICAgIGtleXMuc29tZShmdW5jdGlvbiAob2Zmc2V0LCBpbmR4LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFZhbCA9IF90aGlzLmNPZmZzZXRzW29mZnNldF07XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNMZWZ0IC0gY2FsV2lkdGggPD0gb2Zmc2V0VmFsICYmIGxlZnQgKyBjYWxXaWR0aCA+PSBvZmZzZXRWYWw7XG4gICAgICAgICAgICAgICAgaWYgKGJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaU9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgY2FsV2lkdGggPCBvZmZzZXRWYWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNoZWNrQW5kUmVzZXRDYWNoZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9IFsncGFnaW5nJywgJ3JlZnJlc2gnLCAnc29ydGluZycsICdmaWx0ZXJpbmcnLCAnc2VhcmNoaW5nJywgJ2dyb3VwaW5nJywgJ3VuZ3JvdXBpbmcnXVxuICAgICAgICAgICAgICAgIC5zb21lKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gYWN0aW9uID09PSB2YWx1ZTsgfSk7XG4gICAgICAgICAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbGVhcjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoQ29sT2Zmc2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gMDtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBjTGVuID0gY29scy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZpc2libGUgJiZcbiAgICAgICAgICAgICAgICAoIV90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uID8gX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbi5maWVsZCkgPCAwIDogY29sdW1uLnZpc2libGUpOyB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGMsIG4pIHsgcmV0dXJuIF90aGlzLmNPZmZzZXRzW25dID0gKF90aGlzLmNPZmZzZXRzW24gLSAxXSB8IDApICsgMzA7IH0pO1xuICAgICAgICAgICAgQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoY0xlbikpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBjb2wrKzsgfSkuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2ssIGkpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IGJsb2NrICsgZ0xlbjtcbiAgICAgICAgICAgICAgICBfdGhpcy5jT2Zmc2V0c1tibG9ja10gPSAoX3RoaXMuY09mZnNldHNbYmxvY2sgLSAxXSB8IDApICsgKGlzVmlzaWJsZShjb2xzW2ldKSA/IHBhcnNlSW50KGNvbHNbaV0ud2lkdGgsIDEwKSA6IDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUudXBkYXRlR3JvdXBSb3cgPSBmdW5jdGlvbiAoY3VycmVudCwgYmxvY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpcnN0ID0gY3VycmVudFswXTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKGtleSkgPCBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKGN1cnJlbnRGaXJzdCAmJiBjdXJyZW50Rmlyc3QuaXNEYXRhUm93KSB8fCBibG9jayAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pdGVyYXRlR3JvdXAgPSBmdW5jdGlvbiAoY3VycmVudCwgcm93cykge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaXJzdCA9IGN1cnJlbnRbMF07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rmlyc3QgJiYgY3VycmVudEZpcnN0LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUHJlc2VudCA9IGN1cnJlbnQuc29tZShmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd3Muc29tZShmdW5jdGlvbiAob1JvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9Sb3cgJiYgb1Jvdy5kYXRhLmZpZWxkICE9PSB1bmRlZmluZWQgJiYgb1Jvdy5kYXRhLmZpZWxkID09PSByb3cuZGF0YS5maWVsZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgb1Jvdy5kYXRhLmtleSA9PT0gcm93LmRhdGEua2V5O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzLnNsaWNlKG9mZnNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTb3J0KHBhcmVudCwgc29ydFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zLCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzID0gc29ydFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzb3J0ZWRDb2x1bW4gPSB7IGZpZWxkOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24gfTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBnQ29scyA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdDb2xzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gW3NvcnRlZENvbHVtbl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVkQ29scyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkKGdDb2xzW2ldLCBzb3J0ZWRDb2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbk5hbWUgPT09IGdDb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NvbCA9IHRoaXMuZ2V0U29ydENvbHVtbkZyb21GaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHsgZmllbGQ6IHNDb2wuZmllbGQsIGRpcmVjdGlvbjogc0NvbC5kaXJlY3Rpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gc29ydGVkQ29scztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnNbaW5kZXhdID0gc29ydGVkQ29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFNvcnRlZENvbCA9IHRoaXMuY29sdW1uTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9ICF0aGlzLmlzUmVtb3ZlID8ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfTtcbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8yLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpLmFsbG93U29ydGluZyA9PT0gZmFsc2UgfHwgdGhpcy5wYXJlbnQuaXNDb250ZXh0TWVudU9wZW4oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5hbGxvd011bHRpU29ydGluZykge1xuICAgICAgICAgICAgICAgIGlzTXVsdGlTb3J0ID0gZ09iai5hbGxvd011bHRpU29ydGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudCgpKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBhcmcxOiBjb2x1bW5OYW1lLCBhcmcyOiBkaXJlY3Rpb24sIGFyZzM6IGlzTXVsdGlTb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGlzTXVsdGlTb3J0O1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvcnRlZENvbHMoY29sdW1uTmFtZSwgaXNNdWx0aVNvcnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVTb3J0ZWRDb2xzID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuc29ydGVkQ29sdW1uc1tpXSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoMCwgdGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5wdXNoKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHV0aWxfMS5nZXRBY3R1YWxQcm9wRnJvbUNvbGwodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmNsZWFyU29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5yZW1vdmVTb3J0Q29sdW1uLCBhcmcxOiBmaWVsZCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kZWxDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgc29ydGVkQ29sdW1ucykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBzb3J0ZWRDb2x1bW5zID8gc29ydGVkQ29sdW1ucyA6IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2wuZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbihjb2wuZmllbGQsIGNvbC5kaXJlY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXNvcnRkaXJlY3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyU29ydGluZygpO1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucG9wVXBDbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdycHRvZ2dsZWJ0bicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbCcpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbGRpdicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yaGFuZGxlcicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5tZW51JykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcm1lbnVkaXYnKSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbE9iaiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gIXRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGggPyAnYXNjZW5kaW5nJyA6XG4gICAgICAgICAgICAgICAgICAgICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICBpZiAoY29sT2JqLnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWF0ZVNvcnQodGFyZ2V0LCBlLCBjb2xPYmopO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3BVcChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUua2V5UHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCAmJiAoZS5hY3Rpb24gPT09ICdlbnRlcicgfHwgZS5hY3Rpb24gPT09ICdjdHJsRW50ZXInIHx8IGUuYWN0aW9uID09PSAnc2hpZnRFbnRlcicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZm9jdXMuZ2V0Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldCB8fCAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgfHwgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgfHwgdGhpcy5wYXJlbnQuZnJvemVuUm93cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYXRlU29ydCh0YXJnZXQsIGUsIGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmluaXRpYXRlU29ydCA9IGZ1bmN0aW9uICh0YXJnZXQsIGUsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAhdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCA/ICdhc2NlbmRpbmcnIDpcbiAgICAgICAgICAgICAgICAnZGVzY2VuZGluZyc7XG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSB8fCAodGhpcy5zb3J0U2V0dGluZ3MuYWxsb3dVbnNvcnQgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRlc2NlbmRpbmcnKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgJiYgIShnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGZpZWxkKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oZmllbGQsIGRpcmVjdGlvbiwgZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zaG93UG9wVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpIHx8IHRoaXMucGFyZW50LmlzQ29udGV4dE1lbnVPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utc29ydGRpcmVjdCBlLWljb25zIGUtaWNvbi1zb3J0ZGlyZWN0JyArICh0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoID4gMSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc29ydGRpcmVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5hZGRTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIGNvbHNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpU29ydCAmJiBjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSwgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcnRleHQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoZmlsdGVyRWxlbWVudCwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZVNvcnRJY29ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBvc2l0aW9uID8gcG9zaXRpb24gOiAwLCBsZW4gPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb3NpdGlvbikgPyBwb3NpdGlvbiArIDEgOiBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFtdLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZycsICdlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydG51bWJlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykucmVtb3ZlQ2hpbGQoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZUFyaWFBdHRyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnNvcnRlZENvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGNvbCkuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBcmlhQXR0cigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU29ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU29ydCA9IFNvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXJcIiwgXCIuLi8uLi9wYWdlci9wYWdlci1kcm9wZG93blwiLCBcIi4uLy4uL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgcGFnZXJfMSwgcGFnZXJfZHJvcGRvd25fMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBwYWdlcl8xLlBhZ2VyLkluamVjdChleHRlcm5hbF9tZXNzYWdlXzEuRXh0ZXJuYWxNZXNzYWdlLCBwYWdlcl9kcm9wZG93bl8xLlBhZ2VyRHJvcERvd24pO1xuICAgIHZhciBQYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZShwYXJlbnQsIHBhZ2VTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncyA9IHBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwYWdlck9iajtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEZXN0cm95KCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQucGFnZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy50ZW1wbGF0ZSA9IHRoaXMucGFyZW50LnBhZ2VyVGVtcGxhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcGFnZXInIH0pO1xuICAgICAgICAgICAgcGFnZXJPYmogPSB1dGlsXzEuZXh0ZW5kKHt9LCBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXModGhpcy5wYWdlU2V0dGluZ3MpKSwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyb3BEb3duQ2hhbmdlZDogdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogZ09iai5lbmFibGVSdGwsIGxvY2FsZTogZ09iai5sb2NhbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5hZGRBcmlhQXR0ci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LCBbJ3BhcmVudE9iaicsICdwcm9wTmFtZSddKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmogPSBuZXcgcGFnZXJfMS5QYWdlcihwYWdlck9iaik7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLnBhZ2VTaXplID0gZS5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkQXJpYUF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYWdlU2V0dGluZ3MudGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWVyaWNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbnVtZXJpY2NvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IG51bWVyaWNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ducycsIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtZmlyc3QnLCAnLmUtcHJldicsICcuZS1uZXh0JywgJy5lLWxhc3QnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5kYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmoucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50ID0gZS5jb3VudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlLCByZXF1ZXN0VHlwZTogJ3BhZ2luZycsXG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3UHJvcCA9IGUucHJvcGVydGllcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqW3Byb3BdID0gbmV3UHJvcFtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvcmNlQ2FuY2VsIHx8IHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb3JjZUNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmdvVG9QYWdlLCBhcmcxOiBlLmN1cnJlbnRQYWdlIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb3JjZUNhbmNlbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZQYWdlID0gdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IGUuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAncGFnaW5nJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2U6IHByZXZQYWdlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBlLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Ta2lwQWN0aW9uKGUuYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiBpbiBrZXlBY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGtleUFjdGlvbnNbZS5hY3Rpb25dKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5jYW5Ta2lwQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSB7XG4gICAgICAgICAgICAgICAgcGFnZVVwOiBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnNjcm9sbFRvcCAhPT0gMDsgfSxcbiAgICAgICAgICAgICAgICBwYWdlRG93bjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiAhKGVsLnNjcm9sbFRvcCA+PSBlbC5zY3JvbGxIZWlnaHQgLSBlbC5jbGllbnRIZWlnaHQpOyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRlbnQnKSAmJlxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuaXNFcXVhbE5vZGUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkKSAmJiBbJ3BhZ2VVcCcsICdwYWdlRG93biddLmluZGV4T2YoYWN0aW9uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZVthY3Rpb25dKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYWdlck9iai5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmVuYWJsZUV4dGVybmFsTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5leHRlcm5hbE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hcHBlbmRUb0VsZW1lbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0R3JpZFBhZ2VyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVG9FbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHRoaXMucmVuZGVyLFxuICAgICAgICAgICAgICAgIGVuZDogdGhpcy5hcHBlbmRUb0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgcmVhZHk6IHRoaXMuZGF0YVJlYWR5LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLm9uQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgdXBkYXRlTGF5b3V0OiB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLFxuICAgICAgICAgICAgICAgIGluYm91bmRDaGFuZ2U6IHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsXG4gICAgICAgICAgICAgICAga2V5UHJlc3M6IHRoaXMua2V5UHJlc3NIYW5kbGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmhhbmRsZXJzLmxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaGFuZGxlcnMuZW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnBhZ2VDb21wbGV0ZSwgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuaGFuZGxlcnMudXBkYXRlTGF5b3V0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMuaGFuZGxlcnMua2V5UHJlc3MsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5oYW5kbGVycy5sb2FkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5oYW5kbGVycy5lbmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wYWdlQ29tcGxldGUsIHRoaXMuaGFuZGxlcnMuY29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5oYW5kbGVycy51cGRhdGVMYXlvdXQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmhhbmRsZXJzLmtleVByZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucGFnZXJEZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJPYmogJiYgIXRoaXMucGFnZXJPYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZSA9IFBhZ2U7XG4gICAgdmFyIGtleUFjdGlvbnMgPSB7XG4gICAgICAgIHBhZ2VVcDogJy5lLXByZXYnLFxuICAgICAgICBwYWdlRG93bjogJy5lLW5leHQnLFxuICAgICAgICBjdHJsQWx0UGFnZURvd246ICcuZS1sYXN0JyxcbiAgICAgICAgY3RybEFsdFBhZ2VVcDogJy5lLWZpcnN0JyxcbiAgICAgICAgYWx0UGFnZVVwOiAnLmUtcHAnLFxuICAgICAgICBhbHRQYWdlRG93bjogJy5lLW5wJ1xuICAgIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9udW1lcmljLWNvbnRhaW5lclwiLCBcIi4vcGFnZXItbWVzc2FnZVwiLCBcIi4uL2dyaWQvYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFBhZ2VyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQYWdlcihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZGVmYXVsdENvbnN0YW50cyA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZUluZm86ICd7MH0gb2YgezF9IHBhZ2VzJyxcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zSW5mbzogJyh7MH0gaXRlbXMpJyxcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2VUb29sdGlwOiAnR28gdG8gZmlyc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2VUb29sdGlwOiAnR28gdG8gbGFzdCBwYWdlJyxcbiAgICAgICAgICAgICAgICBuZXh0UGFnZVRvb2x0aXA6ICdHbyB0byBuZXh0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZVRvb2x0aXA6ICdHbyB0byBwcmV2aW91cyBwYWdlJyxcbiAgICAgICAgICAgICAgICBuZXh0UGFnZXJUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlcicsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQYWdlclRvb2x0aXA6ICdHbyB0byBwcmV2aW91cyBwYWdlcicsXG4gICAgICAgICAgICAgICAgcGFnZXJEcm9wRG93bjogJ0l0ZW1zIHBlciBwYWdlJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lck1vZHVsZSA9IG5ldyBudW1lcmljX2NvbnRhaW5lcl8xLk51bWVyaWNDb250YWluZXIoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMucGFnZXJNZXNzYWdlTW9kdWxlID0gbmV3IHBhZ2VyX21lc3NhZ2VfMS5QYWdlck1lc3NhZ2UoX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZXh0ZXJuYWxNZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja3BhZ2VzaXplcygpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncGFnZXJkcm9wZG93bicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy50b3RhbFJlY29yZHNDb3VudCB8fCAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5leHRMYXN0RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXJpYUxhYmVsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NyZWF0ZWQnLCB7ICdjdXJyZW50UGFnZSc6IHRoaXMuY3VycmVudFBhZ2UsICd0b3RhbFJlY29yZHNDb3VudCc6IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ2N1cnJlbnRQYWdlJywgJ3BhZ2VTaXplJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlQ291bnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaE51bWVyaWNMaW5rcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbnRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrR29Ub1BhZ2UobmV3UHJvcC5jdXJyZW50UGFnZSwgb2xkUHJvcC5jdXJyZW50UGFnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTaXplJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG90YWxSZWNvcmRzQ291bnQnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXN0b21UZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTaXplcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja3BhZ2VzaXplcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSB0aGlzLmNvbXBpbGUodGhpcy50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVFeHRlcm5hbE1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVQYWdlck1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRMb2NhbGl6ZWRMYWJlbCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZU9iai5nZXRDb25zdGFudChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKHBhZ2VObykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU5vO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrcGFnZXNpemVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZVNpemVzID09PSB0cnVlIHx8IHRoaXMucGFnZVNpemVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuY2hlY2tHb1RvUGFnZSA9IGZ1bmN0aW9uIChuZXdQYWdlTm8sIG9sZFBhZ2VObykge1xuICAgICAgICAgICAgaWYgKG5ld1BhZ2VObyAhPT0gdGhpcy5jdXJyZW50UGFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlTm8gPSB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKG9sZFBhZ2VObykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gb2xkUGFnZU5vO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNQYWdlTm8gIT09IG5ld1BhZ2VObyAmJiAobmV3UGFnZU5vID49IDEgJiYgbmV3UGFnZU5vIDw9IHRoaXMudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmN1cnJlbnRQYWdlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVRdWVyeVN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0geyBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSwgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGljaycsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKCFhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucGFnZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1wYWdlcnRlbXBsYXRlJyk7XG4gICAgICAgICAgICB0aGlzLmNvbXBpbGUodGhpcy50ZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSwgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsIHBhZ2VDb3VudDogdGhpcy5wYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHRoaXMudG90YWxSZWNvcmRzQ291bnQsIHRvdGFsUGFnZXM6IHRoaXMudG90YWxQYWdlc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0UGFnZXJUZW1wbGF0ZSgpKGRhdGEpO1xuICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKHRoaXMuZWxlbWVudCwgcmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVRvdGFsUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSAodGhpcy50b3RhbFJlY29yZHNDb3VudCAlIHRoaXMucGFnZVNpemUgPT09IDApID8gKHRoaXMudG90YWxSZWNvcmRzQ291bnQgLyB0aGlzLnBhZ2VTaXplKSA6XG4gICAgICAgICAgICAgICAgKHBhcnNlSW50KCh0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYWdlU2l6ZSkudG9TdHJpbmcoKSwgMTApICsgMSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRQYWdlclRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IGVqMl9iYXNlXzIuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb3RhbFBhZ2VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UgJiYgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5pbml0TG9jYWxpemF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVPYmogPSBuZXcgZWoyX2Jhc2VfMS5MMTBuKHRoaXMuZ2V0TW9kdWxlTmFtZSgpLCB0aGlzLmRlZmF1bHRDb25zdGFudHMsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9IHRoaXMuZ2V0VXBkYXRlZFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZiwgJ3BhZ2UnLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IHBhdGg6IHVwZGF0ZWRVcmwgfSwgJycsIHVwZGF0ZWRVcmwpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0VXBkYXRlZFVSTCA9IGZ1bmN0aW9uICh1cmksIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZWd4ID0gbmV3IFJlZ0V4cCgnKFs/fCZdKScgKyBrZXkgKyAnPS4qPygmfCN8JCknLCAnaScpO1xuICAgICAgICAgICAgaWYgKHVyaS5tYXRjaChyZWd4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmkucmVwbGFjZShyZWd4LCAnJDEnICsga2V5ICsgJz0nICsgdmFsdWUgKyAnJDInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHVyaS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSB1cmkucmVwbGFjZSgvLiojLywgJyMnKTtcbiAgICAgICAgICAgICAgICAgICAgdXJpID0gdXJpLnJlcGxhY2UoLyMuKi8sICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVyaSArICh1cmkuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JykgKyBrZXkgKyAnPScgKyB2YWx1ZSArIGhhc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXJGaXJzdFByZXZEaXZGb3JEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlck5leHRMYXN0RGl2Rm9yRGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tbGFzdCBlLWljb25zIGUtaWNvbi1sYXN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnbGFzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmFkZEFyaWFMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZUV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVBhZ2VyTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTIpXG4gICAgICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTApXG4gICAgICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEpXG4gICAgICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXJyZW50UGFnZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgICAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwidG90YWxSZWNvcmRzQ291bnRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZXNcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnJylcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImN1c3RvbVRleHRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImNsaWNrXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJkcm9wRG93bkNoYW5nZWRcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICAgICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICAgICAgUGFnZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgICAgIF0sIFBhZ2VyKTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBleHBvcnRzLlBhZ2VyID0gUGFnZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL3BhZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOdW1lcmljQ29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtZXJpY0NvbnRhaW5lcihwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50ID0gdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOdW1lcmljQ29udGFpbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS51cGRhdGVUb3RhbFBhZ2VzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmtzSHRtbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaE51bWVyaWNMaW5rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsaW5rO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBwYWdlck9iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW51bWVyaWNjb250YWluZXInKTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1udW1lcmljaXRlbSBlLXNwYWNpbmcgZS1wYWdlci1kZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgcm9sZTogJ2xpbmsnLCB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnR290byBQYWdlICcgKyBpIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QobGluaywgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10sIFsnZS1wYWdlci1kZWZhdWx0J10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICAgICAgdGhpcy5saW5rcyA9IFtdLnNsaWNlLmNhbGwoZGl2LmNoaWxkTm9kZXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFnZXJFbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTnVtZXJpY0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtcGFnZXJjb250YWluZXInLCBhdHRyczogeyAncm9sZSc6ICduYXZpZ2F0aW9uJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3ROUHJldih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcmV2UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1udW1lcmljY29udGFpbmVyJyB9KSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck5leHRQYWdlclNldCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0Tkxhc3QodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJGaXJzdE5QcmV2ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maXJzdCBlLWljb25zIGUtaWNvbi1maXJzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2ZpcnN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByZXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXByZXYgZS1pY29ucyBlLWljb24tcHJldicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbdGhpcy5maXJzdCwgdGhpcy5wcmV2XSwgcGFnZXJDb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJQcmV2UGFnZXJTZXQgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuUFAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtcHAgZS1zcGFjaW5nJywgaW5uZXJIVE1MOiAnLi4uJyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlclRvb2x0aXAnKSwgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLlBQKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dFBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLk5QID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLW5wIGUtc3BhY2luZycsXG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiAnLi4uJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlclRvb2x0aXAnKSwgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlclRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBhZ2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuTlApO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJOZXh0Tkxhc3QgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbmV4dCBlLWljb25zIGUtaWNvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxhc3QgZS1pY29ucyBlLWljb24tbGFzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMubmV4dCwgdGhpcy5sYXN0XSwgcGFnZXJDb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnByZXZpb3VzUGFnZU5vID0gcGFnZXJPYmouY3VycmVudFBhZ2U7XG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGlzYWJsZScpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2luZGV4JykpKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTGlua3NIdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVNldDtcbiAgICAgICAgICAgIHZhciBwYWdlTm87XG4gICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSA9IHBhZ2VyT2JqLnRvdGFsUGFnZXMgPT09IDEgPyAxIDogcGFnZXJPYmouY3VycmVudFBhZ2U7XG4gICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgPiBwYWdlck9iai50b3RhbFBhZ2VzICYmIHBhZ2VyT2JqLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSA9IHBhZ2VyT2JqLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IHBhcnNlSW50KChwYWdlck9iai5jdXJyZW50UGFnZSAvIHBhZ2VyT2JqLnBhZ2VDb3VudCkudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICUgcGFnZXJPYmoucGFnZUNvdW50ID09PSAwICYmIGN1cnJlbnRQYWdlU2V0ID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlU2V0ID0gY3VycmVudFBhZ2VTZXQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlck9iai5wYWdlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhZ2VObyA9IChjdXJyZW50UGFnZVNldCAqIHBhZ2VyT2JqLnBhZ2VDb3VudCkgKyAxICsgaTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZU5vIDw9IHBhZ2VyT2JqLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc2V0QXR0cmlidXRlKCdpbmRleCcsIHBhZ2VOby50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5pbm5lckhUTUwgPSAhcGFnZXJPYmouY3VzdG9tVGV4dCA/IHBhZ2VOby50b1N0cmluZygpIDogcGFnZXJPYmouY3VzdG9tVGV4dCArIHBhZ2VObztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICE9PSBwYWdlTm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uY2xhc3NMaXN0LmFkZCgnZS1wYWdlci1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGlua3NbaV0sIFtdLCBbJ2UtY3VycmVudGl0ZW0nLCAnZS1hY3RpdmUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpcnN0LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAnMScpO1xuICAgICAgICAgICAgdGhpcy5sYXN0LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wcmV2LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgLSAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMubmV4dC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsIHBhZ2VyT2JqLnRvdGFsUGFnZXMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgLSAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1uZXh0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5QUC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhcnNlSW50KHRoaXMubGlua3NbMF0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgLSBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5OUC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhcnNlSW50KHRoaXMubGlua3NbdGhpcy5saW5rcy5sZW5ndGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2luZGV4JyksIDEwKSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU5leHRQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0Tkxhc3RTdHlsZXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGlua3NbKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgLSAxKSAlIHRoaXMucGFnZXJNb2R1bGUucGFnZUNvdW50XSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlRmlyc3ROUHJldlN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSBbJ2UtZmlyc3RwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZURpc2FibGVkID0gWydlLWZpcnN0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHByZXZQYWdlID0gWydlLXByZXZwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIHByZXZQYWdlRGlzYWJsZWQgPSBbJ2UtcHJldnBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucHJldiwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZmlyc3QsIGZpcnN0UGFnZSwgZmlyc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLCBwcmV2UGFnZSwgcHJldlBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlRGlzYWJsZWQsIHByZXZQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0JyksIGZpcnN0UGFnZURpc2FibGVkLCBmaXJzdFBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVQcmV2UGFnZXJTZXRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IHRoaXMucGFnZXJNb2R1bGUucGFnZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5QUCwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5QUCwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZSA9IHRoaXMubGlua3NbMF0uaW5uZXJIVE1MLnJlcGxhY2UocGFnZXJPYmouY3VzdG9tVGV4dCwgJycpO1xuICAgICAgICAgICAgaWYgKCFmaXJzdFBhZ2UubGVuZ3RoIHx8ICF0aGlzLmxpbmtzLmxlbmd0aCB8fCAocGFyc2VJbnQoZmlyc3RQYWdlLCAxMCkgKyBwYWdlck9iai5wYWdlQ291bnQgPiBwYWdlck9iai50b3RhbFBhZ2VzKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuTlAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuTlAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dE5MYXN0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxhc3RQYWdlID0gWydlLWxhc3RwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIGxhc3RQYWdlRGlzYWJsZWQgPSBbJ2UtbGFzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBuZXh0UGFnZSA9IFsnZS1uZXh0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBuZXh0UGFnZURpc2FibGVkID0gWydlLW5leHRwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBwYWdlck9iai50b3RhbFBhZ2VzIHx8IHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5sYXN0LCBsYXN0UGFnZURpc2FibGVkLCBsYXN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5uZXh0LCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWxhc3QnKSwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1uZXh0JyksIG5leHRQYWdlRGlzYWJsZWQsIG5leHRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2UsIGxhc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZSwgbmV4dFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1lcmljQ29udGFpbmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljQ29udGFpbmVyID0gTnVtZXJpY0NvbnRhaW5lcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvbnVtZXJpYy1jb250YWluZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZXJNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXJNZXNzYWdlKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFyZW50bXNnYmFyJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgSW5mb3JtYXRpb24nIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZW5vbXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlY291bnRtc2cnLCBzdHlsZXM6ICd0ZXh0YWxpZ246cmlnaHQnIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hcHBlbmQoW3RoaXMucGFnZU5vTXNnRWxlbSwgdGhpcy5wYWdlQ291bnRNc2dFbGVtXSwgZGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdChwYWdlck9iai5nZXRMb2NhbGl6ZWRMYWJlbCgnY3VycmVudFBhZ2VJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCA/IDAgOlxuICAgICAgICAgICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSwgcGFnZXJPYmoudG90YWxQYWdlcyB8fCAwXSkgKyAnICc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdChwYWdlck9iai5nZXRMb2NhbGl6ZWRMYWJlbCgndG90YWxJdGVtc0luZm8nKSwgW3BhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IHx8IDBdKTtcbiAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMucGFnZU5vTXNnRWxlbS50ZXh0Q29udGVudCArIHRoaXMucGFnZUNvdW50TXNnRWxlbS50ZXh0Q29udGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlTm9Nc2dFbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlQ291bnRNc2dFbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuc2hvd01lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChzdHIsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByZWd4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVneCA9IG5ldyBSZWdFeHAoJ1xcXFx7JyArIChpKSArICdcXFxcfScsICdnbScpO1xuICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKHJlZ3gsIGFyZ3NbaV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZXJNZXNzYWdlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlck1lc3NhZ2UgPSBQYWdlck1lc3NhZ2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL3BhZ2VyLW1lc3NhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kcm9wZG93bnNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZXJEcm9wRG93biA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyRHJvcERvd24ocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcmRyb3Bkb3duJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VzaXplcycgfSk7XG4gICAgICAgICAgICB2YXIgZHJvcERvd25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmRyb3Bkb3duJyB9KTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VGV4dERpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VyY29uc3RhbnQnIH0pO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgYXR0cnM6IHsgdHlwZTogJ3RleHQnLCB0YWJpbmRleDogJzEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyQ29ucyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jb25zdGFudCcsIGlubmVySFRNTDogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncGFnZXJEcm9wRG93bicpIH0pO1xuICAgICAgICAgICAgZHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgZGVmYXVsdFRleHREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYWdlckNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdi5hcHBlbmRDaGlsZChkZWZhdWx0VGV4dERpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5wYWdlckRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIHZhciBwYWdlU2l6ZXNNb2R1bGUgPSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplcztcbiAgICAgICAgICAgIHZhciBwYWdlU2l6ZXNBcnJheSA9IChwYWdlU2l6ZXNNb2R1bGUubGVuZ3RoID8gcGFnZVNpemVzTW9kdWxlIDogWzUsIDEwLCAxMiwgMjBdKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSAocGFnZVNpemVzQXJyYXkpLmluZGV4T2YodGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSkgPiAtMSA/IHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUgOiBwYWdlU2l6ZXNBcnJheVswXTtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0ID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3Qoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHBhZ2VTaXplc0FycmF5LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgY2hhbmdlOiB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuYXBwZW5kVG8oaW5wdXQpO1xuICAgICAgICAgICAgcGFnZXJPYmoucGFnZVNpemUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICBwYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgcGFnZXJPYmoudHJpZ2dlcignZHJvcERvd25DaGFuZ2VkJywgeyBwYWdlU2l6ZTogZGVmYXVsdFZhbHVlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplID0gdGhpcy5kcm9wRG93bkxpc3RPYmplY3QudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnRyaWdnZXIoJ2Ryb3BEb3duQ2hhbmdlZCcsIHsgcGFnZVNpemU6IHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LnZhbHVlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyb3BEb3duTGlzdE9iamVjdCAmJiAhdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5wYWdlckRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyRHJvcERvd247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBhZ2VyRHJvcERvd24gPSBQYWdlckRyb3BEb3duO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1kcm9wZG93bi5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzYxX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXh0ZXJuYWxNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXh0ZXJuYWxNZXNzYWdlKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdleHRlcm5hbE1lc3NhZ2UnO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VyZXh0ZXJuYWxtc2cnLCBhdHRyczogeyAnYXJpYS1sYWJlbCc6ICdQYWdlciBleHRlcm5hbCBtZXNzYWdlJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuZXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMucGFnZXJNb2R1bGUuZXh0ZXJuYWxNZXNzYWdlLnRvU3RyaW5nKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5oaWRlTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4dGVybmFsTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXh0ZXJuYWxNZXNzYWdlID0gRXh0ZXJuYWxNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9leHRlcm5hbC1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9yZW5kZXJlci9maWx0ZXItbWVudS1yZW5kZXJlclwiLCBcIi4uL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyXCIsIFwiLi4vYWN0aW9ucy9leGNlbC1maWx0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVqMl9iYXNlXzIsIGVqMl9kYXRhXzEsIGV2ZW50cywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgdXRpbF8yLCBmaWx0ZXJfbWVudV9yZW5kZXJlcl8xLCBjaGVja2JveF9maWx0ZXJfMSwgZXhjZWxfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMubmV4dEZsTWVudU9wZW4gPSAnJztcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHsgJ21lbnUnOiBmaWx0ZXJfbWVudV9yZW5kZXJlcl8xLkZpbHRlck1lbnVSZW5kZXJlciwgJ2NoZWNrYm94JzogY2hlY2tib3hfZmlsdGVyXzEuQ2hlY2tCb3hGaWx0ZXIsICdleGNlbCc6IGV4Y2VsX2ZpbHRlcl8xLkV4Y2VsRmlsdGVyIH07XG4gICAgICAgICAgICB0aGlzLmZpbHRlck9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ2NvbnRhaW5zJywgZW5kc1dpdGg6ICdlbmRzd2l0aCcsIGVxdWFsOiAnZXF1YWwnLCBncmVhdGVyVGhhbjogJ2dyZWF0ZXJ0aGFuJywgZ3JlYXRlclRoYW5PckVxdWFsOiAnZ3JlYXRlcnRoYW5vcmVxdWFsJyxcbiAgICAgICAgICAgICAgICBsZXNzVGhhbjogJ2xlc3N0aGFuJywgbGVzc1RoYW5PckVxdWFsOiAnbGVzc3RoYW5vcmVxdWFsJywgbm90RXF1YWw6ICdub3RlcXVhbCcsIHN0YXJ0c1dpdGg6ICdzdGFydHN3aXRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmx0ckRsZ0RldGFpbHMgPSB7IGZpZWxkOiAnJywgaXNPcGVuOiBmYWxzZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRDdXN0b21PcGVyYXRvcnMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbHRyRWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1maWx0ZXJiYXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsdHJFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShmbHRyRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIsIGdPYmopO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHJlbmRlciA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLCBuZXcgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMS5GaWx0ZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gdGhpcy5nZW5lcmF0ZVJvdygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuZGF0YSA9IHRoaXMudmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb3dSZW5kZXJlci5yZW5kZXIocm93LCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGV0YWlsaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuY2xhc3NOYW1lID0gJ2UtZmlsdGVyYmFyY2VsbCBlLW1hc3RlcmNlbGwnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBnQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHRvcGxlZnRjZWxsJykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ0NlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ0NlbGxzW2dDZWxscy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKCdlLWxhc3Rncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZnJlZXplUmVuZGVyLCB7IGNhc2U6ICdmaWx0ZXInIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWZpbHRlcmJhcicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMuZ2VuZXJhdGVDZWxscygpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkdW1teSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGR1bW15KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgY2VsbFR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICdyb3dJZCc6ICcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogY2VsbFR5cGUgPyBjZWxsVHlwZSA6IGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIsXG4gICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZXMnOiB7IHRpdGxlOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ZpbHRlcmJhclRpdGxlJykgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlck9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy5maWVsZE5hbWUsIG9wZXJhdG9yOiB0aGlzLm9wZXJhdG9yLCB2YWx1ZTogdGhpcy52YWx1ZSwgcHJlZGljYXRlOiB0aGlzLnByZWRpY2F0ZSxcbiAgICAgICAgICAgICAgICBtYXRjaENhc2U6IHRoaXMubWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZToge30sIGFjdHVhbE9wZXJhdG9yOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0RmlsdGVyZWRDb2xzSW5kZXhCeUZpZWxkKHRoaXMuZmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zW2luZGV4XSA9IHRoaXMuY3VycmVudEZpbHRlck9iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5wdXNoKHRoaXMuY3VycmVudEZpbHRlck9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldEZpbHRlcmVkQ29sc0luZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9ICF0aGlzLmlzUmVtb3ZlID8ge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRGaWx0ZXJPYmplY3Q6IHRoaXMuY3VycmVudEZpbHRlck9iamVjdCwgY3VycmVudEZpbHRlcmluZ0NvbHVtbjogdGhpcy5jb2x1bW4uZmllbGQsXG4gICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLCByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcywgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZWxlbWVudCwgJ2ZvY3VzaW4nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcywgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1c2luJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMudXBkYXRlU3BhbkNsYXNzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJCeUNvbHVtbihjb2wuZmllbGQsIGNvbC5vcGVyYXRvciwgY29sLnZhbHVlLCBjb2wucHJlZGljYXRlLCBjb2wubWF0Y2hDYXNlLCBjb2wuYWN0dWFsRmlsdGVyVmFsdWUsIGNvbC5hY3R1YWxPcGVyYXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZmlsdGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJNZW51Q2xvc2UsIHRoaXMuZmlsdGVyTWVudUNsb3NlLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlck9wZW4sIHRoaXMuY29sdW1uTWVudUZpbHRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuZmlsdGVySWNvbkNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmZpbHRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY29sdW1uUG9zaXRpb25DaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmZpbHRlck9wZW4sIHRoaXMuY29sdW1uTWVudUZpbHRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmZpbHRlck1lbnVDbG9zZSwgdGhpcy5maWx0ZXJNZW51Q2xvc2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5maWx0ZXJJY29uQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJNZW51Q2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5mbHRyRGxnRGV0YWlscy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jb2x1bW5NZW51RmlsdGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gYXJncy5jb2w7XG4gICAgICAgICAgICB2YXIgZWxlID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MudGFyZ2V0LCAnIycgKyBhcmdzLmlkKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmlzQ2xvc2UgJiYgIWVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckRpYWxvZ09wZW4odGhpcy5jb2x1bW4sIGFyZ3MudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJEaWFsb2dPcGVuID0gZnVuY3Rpb24gKGNvbCwgdGFyZ2V0LCBsZWZ0LCB0b3ApIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUgPSBuZXcgdGhpcy50eXBlW2NvbC5maWx0ZXIudHlwZSB8fCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlXSh0aGlzLnBhcmVudCwgZ09iai5maWx0ZXJTZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5jdXN0b21PcGVyYXRvcnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUub3BlbkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgdHlwZTogY29sLnR5cGUsIGZpZWxkOiBjb2wuZmllbGQsIGRpc3BsYXlOYW1lOiBjb2wuaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBjb2wuZmlsdGVyLmRhdGFTb3VyY2UgfHwgZ09iai5kYXRhU291cmNlLCBmb3JtYXQ6IGNvbC5mb3JtYXQsXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRDb2x1bW5zOiBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgICAgIHNvcnRlZENvbHVtbnM6IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMsIGZvcm1hdEZuOiBjb2wuZ2V0Rm9ybWF0dGVyKCksXG4gICAgICAgICAgICAgICAgcGFyc2VyRm46IGNvbC5nZXRQYXJzZXIoKSwgcXVlcnk6IGdPYmoucXVlcnksIHRlbXBsYXRlOiBjb2wuZ2V0RmlsdGVySXRlbVRlbXBsYXRlKCksXG4gICAgICAgICAgICAgICAgaGlkZVNlYXJjaGJveDogZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLmhpZGVTZWFyY2hib3gpID8gZmFsc2UgOiBjb2wuZmlsdGVyLmhpZGVTZWFyY2hib3gsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5maWx0ZXJIYW5kbGVyLmJpbmQodGhpcyksIGxvY2FsaXplZFN0cmluZ3M6IHt9LFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IFg6IGxlZnQsIFk6IHRvcCB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJCeUNvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJDZWxsO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2VsbCA9IGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbHVtbi5hbGxvd0ZpbHRlcmluZykgJiYgIXRoaXMuY29sdW1uLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmZpbHRlckJ5Q29sdW1uLCBhcmcxOiBmaWVsZE5hbWUsIGFyZzI6IGZpbHRlck9wZXJhdG9yLCBhcmczOiBmaWx0ZXJWYWx1ZSwgYXJnNDogcHJlZGljYXRlLFxuICAgICAgICAgICAgICAgICAgICBhcmc1OiBtYXRjaENhc2UsIGFyZzY6IGFjdHVhbEZpbHRlclZhbHVlLCBhcmc3OiBhY3R1YWxPcGVyYXRvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gbWF0Y2hDYXNlIHx8IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gICAgICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZSB8fCAnYW5kJztcbiAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSBmaWx0ZXJPcGVyYXRvcjtcbiAgICAgICAgICAgIGZpbHRlclZhbHVlID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZmlsdGVyVmFsdWUpICYmIGZpbHRlclZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW4udHlwZSA9PT0gJ251bWJlcicgfHwgdGhpcy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5jb2x1bW4uZmllbGRdID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGROYW1lKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZmlsdGVyZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgfHwgdGhpcy5jaGVja0ZvclNraXBJbnB1dCh0aGlzLmNvbHVtbiwgZmlsdGVyVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSBmaWx0ZXJWYWx1ZS5sZW5ndGggPCAxID8gJycgOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJyAmJiBmaWx0ZXJDZWxsLnZhbHVlICE9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGZpbHRlckNlbGwudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkKHRoaXMuY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLmZpZWxkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RmlsdGVyQmFyU3RhdHVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByb3BlcnRpZXNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVFeHRlcm5hbE1lc3NhZ2UoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVmcmVzaEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhckZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2xzW2ldLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBmaWVsZCAmJiBjb2wudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmIGNvbC5wcmVkaWNhdGUgPT09IHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB2YXIgZkNlbGw7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGZpZWxkLCBhcmcyOiBpc0NsZWFyRmlsdGVyQmFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicgJiYgIWlzQ2xlYXJGaWx0ZXJCYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZDZWxsID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJyMnICsgY29sc1tpXS5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVzW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZsdHJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGZsdHJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy50eXBlICE9PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmx0ckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaWNvbi1maWx0ZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmaWx0ZXInO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiBlajJfYmFzZV8yLm1hdGNoZXModGFyZ2V0LCAnLmUtZmlsdGVyYmFyIGlucHV0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZCh0YXJnZXQuaWQuc3BsaXQoJ18nKVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Jvc3NJY29uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmZpbHRlclNldHRpbmdzLm1vZGUgPT09ICdpbW1lZGlhdGUnIHx8IGUua2V5Q29kZSA9PT0gMTMpICYmIGUua2V5Q29kZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGFyZ2V0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRmlsdGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVTcGFuQ2xhc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jYW5jZWwnKSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUZXh0ID0gdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRUZXh0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzaW4nICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVydGV4dCcpICYmICF0YXJnZXQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0RmlsdGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDcm9zc0ljb24odGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzaW4nICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcnRleHQnKSAmJiB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlQ3Jvc3NJY29uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUZpbHRlck1zZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlclNldHRpbmdzLnNob3dGaWx0ZXJCYXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMuZmlsdGVyU3RhdHVzTXNnICE9PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpbmRleF0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgKz0gJyAmJiAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgKz0gY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdGhpcy52YWx1ZXNbY29sdW1uLmZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSh0aGlzLmZpbHRlclN0YXR1c01zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tGb3JTa2lwSW5wdXQgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGlzU2tpcDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc9JywgJyAnLCAnISddO1xuICAgICAgICAgICAgICAgIGlmIChlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9sc1t2YWx1ZV0gfHwgc2tpcElucHV0LmluZGV4T2YodmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz4nLCAnPCcsICc9JywgJyEnXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlXzEgPSB2YWx1ZTsgX2kgPCB2YWx1ZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gdmFsdWVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWwpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2tpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNTa2lwO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnByb2Nlc3NGaWx0ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMub25UaW1lclRpY2soKTsgfSwgZS5rZXlDb2RlID09PSAxMyA/IDAgOiB0aGlzLmZpbHRlclNldHRpbmdzLmltbWVkaWF0ZU1vZGVEZWxheSk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUub25UaW1lclRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRWxlbWVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKVxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbHRlckVsZW1lbnQudmFsdWUpKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQodGhpcy5jb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVGaWx0ZXJWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4odGhpcy5jb2x1bW4uZmllbGQsIHRoaXMub3BlcmF0b3IsIHRoaXMudmFsdWUsIHRoaXMucHJlZGljYXRlLCB0aGlzLm1hdGNoQ2FzZSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudmFsaWRhdGVGaWx0ZXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IHRydWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY29sdW1uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcElucHV0LmluZGV4T2YodmFsdWVbaV0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPcGVyYXRvcih2YWx1ZS5zdWJzdHJpbmcoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycgJiYgdmFsdWUubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZUZvcm1hdHRlci5mcm9tVmlldyh0aGlzLnZhbHVlLCB0aGlzLmNvbHVtbi5nZXRQYXJzZXIoKSwgdGhpcy5jb2x1bW4udHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICcqJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQodmFsdWUubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuY2hhckF0KDApID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVuZHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUgPT09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRPcGVyYXRvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNpbmdsZU9wID0gdmFsdWUuY2hhckF0KDApO1xuICAgICAgICAgICAgdmFyIG11bHRpcGxlT3AgPSB2YWx1ZS5zbGljZSgwLCAyKTtcbiAgICAgICAgICAgIHZhciBvcGVyYXRvcnMgPSBlajJfYmFzZV8xLmV4dGVuZCh7ICc9JzogdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWwsICchJzogdGhpcy5maWx0ZXJPcGVyYXRvcnMubm90RXF1YWwgfSwgZWoyX2RhdGFfMS5EYXRhVXRpbC5vcGVyYXRvclN5bWJvbHMpO1xuICAgICAgICAgICAgaWYgKG9wZXJhdG9ycy5oYXNPd25Qcm9wZXJ0eShzaW5nbGVPcCkgfHwgb3BlcmF0b3JzLmhhc093blByb3BlcnR5KG11bHRpcGxlT3ApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1tzaW5nbGVPcF07XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3BlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1ttdWx0aXBsZU9wXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMubGVzc1RoYW4gfHwgdGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZ3JlYXRlclRoYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5jaGFyQXQoMCkgPT09ICc9Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5vcGVyYXRvciArICdvcmVxdWFsJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGxzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZmlsdGVyYmFyY2VsbCcpKTtcbiAgICAgICAgICAgIGZpbHRlckNlbGxzLnNwbGljZShlLnRvSW5kZXgsIDAsIGZpbHRlckNlbGxzLnNwbGljZShlLmZyb21JbmRleCwgMSlbMF0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmaWx0ZXJDZWxsc18xID0gZmlsdGVyQ2VsbHM7IF9pIDwgZmlsdGVyQ2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGZpbHRlckNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRMb2NhbGl6ZWRDdXN0b21PcGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbnVtT3B0ciA9IFtcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VxdWFsJykgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZ3JlYXRlclRoYW4nLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyZWF0ZXJUaGFuJykgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZ3JlYXRlclRoYW5PckVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcmVhdGVyVGhhbk9yRXF1YWwnKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdsZXNzVGhhbicsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTGVzc1RoYW4nKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdsZXNzVGhhbk9yRXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0xlc3NUaGFuT3JFcXVhbCcpIH0sXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ25vdEVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdOb3RFcXVhbCcpIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbU9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBzdHJpbmdPcGVyYXRvcjogW1xuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnc3RhcnRzV2l0aCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU3RhcnRzV2l0aCcpIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdlbmRzV2l0aCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW5kc1dpdGgnKSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnY29udGFpbnMnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NvbnRhaW5zJykgfSxcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2VxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFcXVhbCcpIH0sIHsgdmFsdWU6ICdub3RFcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTm90RXF1YWwnKSB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBudW1iZXJPcGVyYXRvcjogbnVtT3B0cixcbiAgICAgICAgICAgICAgICBkYXRlT3BlcmF0b3I6IG51bU9wdHIsXG4gICAgICAgICAgICAgICAgZGF0ZXRpbWVPcGVyYXRvcjogbnVtT3B0cixcbiAgICAgICAgICAgICAgICBib29sZWFuT3BlcmF0b3I6IFtcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2VxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFcXVhbCcpIH0sIHsgdmFsdWU6ICdub3RFcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTm90RXF1YWwnKSB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckljb25DbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVybWVudWRpdicpICYmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnbWVudScgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnY2hlY2tib3gnIHx8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdleGNlbCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeVVpZCh1dGlsXzIucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciBnQ2xpZW50ID0gZ09iai5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBmQ2xpZW50ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gY29sO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsdHJEbGdEZXRhaWxzLmZpZWxkID09PSBjb2wuZmllbGQgJiYgdGhpcy5mbHRyRGxnRGV0YWlscy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mbHRyRGxnRGV0YWlscyA9IHsgZmllbGQ6IGNvbC5maWVsZCwgaXNPcGVuOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJEaWFsb2dPcGVuKHRoaXMuY29sdW1uLCB0YXJnZXQsIGZDbGllbnQucmlnaHQgLSBnQ2xpZW50LmxlZnQsIGZDbGllbnQuYm90dG9tIC0gZ0NsaWVudC50b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ21lbnUnIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZXhjZWwnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVwaWNrZXJFbGUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRheScpO1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzIucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZmlsdGVyLXBvcHVwJykgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJtZW51ZGl2JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmZpbHRlck1vZHVsZSAmJlxuICAgICAgICAgICAgICAgICAgICAoIXV0aWxfMi5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1wb3B1cC13cmFwcGVyJylcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICghZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWZpbHRlci1pdGVtLmUtbWVudS1pdGVtJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAoIXV0aWxfMi5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1wb3B1cCcpKSkgJiYgIWRhdGVwaWNrZXJFbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xvc2VEaWFsb2codGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZmlsdGVySGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVySWNvbkVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS53aGVyZSgnZmllbGQnLCB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbCwgYXJncy5maWVsZCk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZGF0YU1hbmFnZXIuZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtpXS5maWVsZCA9PT0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zW2pdLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGo7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpY29uQ2xhc3MgPSB0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSA/ICcuZS1jb2x1bW5tZW51JyA6ICcuZS1pY29uLWZpbHRlcic7XG4gICAgICAgICAgICBmaWx0ZXJJY29uRWxlbWVudCA9IHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoYXJncy5maWVsZCkucXVlcnlTZWxlY3RvcihpY29uQ2xhc3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuYWN0aW9uID09PSAnZmlsdGVyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5jb25jYXQoYXJncy5maWx0ZXJDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAmJiBmaWx0ZXJJY29uRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlckljb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckljb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpbHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZmlsdGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWx0ZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyY2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRmlsdGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgaW5uZXJESVYgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIGlucHV0O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1mbHRydGVtcCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdlLWZsdHJ0ZW1wZGl2J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJywgY2xhc3NOYW1lOiAnZS1maWx0ZXJVaV9pbnB1dCBlLWZpbHRlcnRleHQgZS1mbHRyVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0geyBjb2x1bW46IGNvbHVtbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUuY3JlYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IHRlbXAoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICdlLWZpbHRlclVpX2lucHV0IGUtZmlsdGVydGV4dCBlLWZsdHJUZW1wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZS1maWx0ZXJkaXYgZS1mbHRyaW5wdXRkaXYnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJywgY2xhc3NOYW1lOiAnZS1maWx0ZXJ0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCArIGNlbGwuYXR0cmlidXRlcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0gPyBkYXRhW2NlbGwuY29sdW1uLmZpZWxkXSA6ICcnLCByb2xlOiAnc2VhcmNoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNhbmNlbCBlLWhpZGUgZS1pY29ucyBlLWljb24taGlkZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyAnYXJpYS1sYWJlbCc6ICdjbGVhciBmaWx0ZXIgY2VsbCcsIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmFsbG93RmlsdGVyaW5nID09PSBmYWxzZSB8fCBjb2x1bW4uZmllbGQgPT09ICcnIHx8IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZS1kaXNhYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVJlYWQgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUucmVhZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlV3JpdGUgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUud3JpdGU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0geyBlbGVtZW50OiBpbnB1dCwgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVJlYWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlYWQgPSBhcmdzLmNvbHVtbiA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcGxhdGVSZWFkLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGVXcml0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlV3JpdGUgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXBsYXRlV3JpdGUsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVXcml0ZS5jYWxsKHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJESVYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRmlsdGVyQ2VsbFJlbmRlcmVyID0gRmlsdGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4vZmlsdGVyLW1lbnUtb3BlcmF0b3JcIiwgXCIuL3N0cmluZy1maWx0ZXItdWlcIiwgXCIuL251bWJlci1maWx0ZXItdWlcIiwgXCIuL2Jvb2xlYW4tZmlsdGVyLXVpXCIsIFwiLi9kYXRlLWZpbHRlci11aVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfcG9wdXBzXzEsIGZpbHRlcl9tZW51X29wZXJhdG9yXzEsIHN0cmluZ19maWx0ZXJfdWlfMSwgbnVtYmVyX2ZpbHRlcl91aV8xLCBib29sZWFuX2ZpbHRlcl91aV8xLCBkYXRlX2ZpbHRlcl91aV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyTWVudVJlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyTWVudVJlbmRlcmVyKHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yLCBjdXN0b21GbHRyT3BlcmF0b3JzLCBmbHRyT2JqKSB7XG4gICAgICAgICAgICB0aGlzLmNvbFR5cGVzID0ge1xuICAgICAgICAgICAgICAgICdzdHJpbmcnOiBzdHJpbmdfZmlsdGVyX3VpXzEuU3RyaW5nRmlsdGVyVUksICdudW1iZXInOiBudW1iZXJfZmlsdGVyX3VpXzEuTnVtYmVyRmlsdGVyVUksICdkYXRlJzogZGF0ZV9maWx0ZXJfdWlfMS5EYXRlRmlsdGVyVUksICdib29sZWFuJzogYm9vbGVhbl9maWx0ZXJfdWlfMS5Cb29sZWFuRmlsdGVyVUksICdkYXRldGltZSc6IGRhdGVfZmlsdGVyX3VpXzEuRGF0ZUZpbHRlclVJXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbUZpbHRlck9wZXJhdG9ycyA9IGN1c3RvbUZsdHJPcGVyYXRvcnM7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck9iaiA9IGZsdHJPYmo7XG4gICAgICAgICAgICB0aGlzLmZsTXVpT2JqID0gbmV3IGZpbHRlcl9tZW51X29wZXJhdG9yXzEuRmxNZW51T3B0clVJKHRoaXMucGFyZW50LCB0aGlzLmN1c3RvbUZpbHRlck9wZXJhdG9ycywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUub3BlbkRpYWxvZyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoYXJncy5maWVsZCk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbC5maWx0ZXIpIHx8IChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sLmZpbHRlci50eXBlKSB8fCB0aGlzLmNvbC5maWx0ZXIudHlwZSA9PT0gJ21lbnUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGxnQ29udGVudChhcmdzLnRhcmdldCwgdGhpcy5jb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLmNsb3NlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRsZ09iai5lbGVtZW50LmlkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRsZ09iaiAmJiAhdGhpcy5kbGdPYmouaXNEZXN0cm95ZWQgJiYgZWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZmlsdGVyTWVudUNsb3NlLCB7IGZpZWxkOiB0aGlzLmNvbC5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICh0YXJnZXQsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIG1haW5EaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtbWFpbmRpdicsIGlkOiBjb2x1bW4udWlkICsgJy1mbG1lbnUnIH0pO1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUnLCBpZDogY29sdW1uLnVpZCArICctZmxtZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgc2hvd0Nsb3NlSWNvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5kaWFsb2dDcmVhdGVkLmJpbmQodGhpcywgdGFyZ2V0LCBjb2x1bW4pLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXZpY2UnKSA/IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH0gOiB7IFg6ICcnLCBZOiAnJyB9LFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV2aWNlJykgPyBkb2N1bWVudC5ib2R5IDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZmlsdGVyQnRuQ2xpY2suYmluZCh0aGlzLCBjb2x1bW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ZpbHRlckJ1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsIGNzc0NsYXNzOiAnZS1mbG1lbnUtb2tidG4nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsZWFyQnRuQ2xpY2suYmluZCh0aGlzLCBjb2x1bW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDbGVhckJ1dHRvbicpLCBjc3NDbGFzczogJ2UtZmxtZW51LWNhbmNlbGJ0bicgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBtYWluRGl2LFxuICAgICAgICAgICAgICAgIHdpZHRoOiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWJpZ2dlcicpKSkgfHwgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV2aWNlJykgPyAyNjAgOiAyNTAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtZmlsdGVyLXBvcHVwJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5hcHBlbmRUbyh0aGlzLmRsZ0Rpdik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUuZGlhbG9nQ3JlYXRlZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuZ2V0RmlsdGVyTWVudVBvc3Rpb24odGFyZ2V0LCB0aGlzLmRsZ09iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpbHRlclVJKHRhcmdldCwgY29sdW1uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZmlsdGVyRGlhbG9nQ3JlYXRlZCwge30pO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnMzUwcHgnO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouc2hvdygpO1xuICAgICAgICAgICAgdGhpcy53cml0ZU1ldGhvZChjb2x1bW4sIHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBjb2x1bW4udWlkICsgJy1mbG1lbnUnKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRmlsdGVyVUkgPSBmdW5jdGlvbiAodGFyZ2V0LCBjb2wpIHtcbiAgICAgICAgICAgIHZhciBkbGdDb25ldG50RWxlID0gdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1mbG1lbnUtbWFpbmRpdicpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJPcGVyYXRvclVJKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmxWYWx1ZVVJKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJPcGVyYXRvclVJID0gZnVuY3Rpb24gKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sdW1uKSB7XG4gICAgICAgICAgICB0aGlzLmZsTXVpT2JqLnJlbmRlck9wZXJhdG9yVUkoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2x1bW4sIHRoaXMuZGxnT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGbFZhbHVlVUkgPSBmdW5jdGlvbiAoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZURpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS12YWx1ZWRpdicgfSk7XG4gICAgICAgICAgICBkbGdDb25ldG50RWxlLmFwcGVuZENoaWxkKHZhbHVlRGl2KTtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyB0YXJnZXQ6IHZhbHVlRGl2LCBjb2x1bW46IGNvbHVtbiwgZ2V0T3B0ckluc3RhbmNlOiB0aGlzLmZsTXVpT2JqLCBkaWFsb2dPYmo6IHRoaXMuZGxnT2JqIH07XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VvZkZpbHRlclVJID0gbmV3IHRoaXMuY29sVHlwZXNbY29sdW1uLnR5cGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlcikgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlci51aSlcbiAgICAgICAgICAgICAgICAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyLnVpLmNyZWF0ZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbHVtbi5maWx0ZXIudWkuY3JlYXRlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sdW1uLmZpbHRlci51aS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwgdGFyZ2V0OiB2YWx1ZURpdixcbiAgICAgICAgICAgICAgICAgICAgZ2V0T3B0ckluc3RhbmNlOiB0aGlzLmZsTXVpT2JqLCBkaWFsb2dPYmo6IHRoaXMuZGxnT2JqXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZW9mRmlsdGVyVUkuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sIHRhcmdldDogdmFsdWVEaXYsXG4gICAgICAgICAgICAgICAgICAgIGdldE9wdHJJbnN0YW5jZTogdGhpcy5mbE11aU9iaiwgbG9jYWxpemVUZXh0OiB0aGlzLmwxMG4sIGRpYWxvZ09iajogdGhpcy5kbGdPYmpcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZU1ldGhvZCA9IGZ1bmN0aW9uIChjb2wsIGRsZ0NvbnRlbnRFbGUpIHtcbiAgICAgICAgICAgIHZhciBmbFZhbHVlO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGRsZ0NvbnRlbnRFbGUucXVlcnlTZWxlY3RvcignLmUtZmxtZW51LXZhbGlucHV0Jyk7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VvZkZpbHRlclVJID0gbmV3IHRoaXMuY29sVHlwZXNbY29sLnR5cGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncyk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5maWVsZCA9PT0gY29sdW1uLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsVmFsdWUgPSBjb2x1bW4udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIudWkpXG4gICAgICAgICAgICAgICAgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlci51aS53cml0ZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5maWx0ZXIudWkud3JpdGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2wuZmlsdGVyLnVpLndyaXRlKHsgY29sdW1uOiBjb2wsIHRhcmdldDogdGFyZ2V0LCBwYXJlbnQ6IHRoaXMucGFyZW50LCBmaWx0ZXJlZFZhbHVlOiBmbFZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VvZkZpbHRlclVJLndyaXRlKHsgY29sdW1uOiBjb2wsIHRhcmdldDogdGFyZ2V0LCBwYXJlbnQ6IHRoaXMucGFyZW50LCBmaWx0ZXJlZFZhbHVlOiBmbFZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLmZpbHRlckJ0bkNsaWNrID0gZnVuY3Rpb24gKGNvbCkge1xuICAgICAgICAgICAgdmFyIGZsVmFsdWU7XG4gICAgICAgICAgICB2YXIgZmxPcHRyVmFsdWU7XG4gICAgICAgICAgICB2YXIgdGFyZyA9IHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZmxtZW51LXZhbHVlZGl2IGlucHV0Jyk7XG4gICAgICAgICAgICBmbE9wdHJWYWx1ZSA9IHRoaXMuZmxNdWlPYmouZ2V0RmxPcGVyYXRvcigpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlb2ZGaWx0ZXJVSSA9IG5ldyB0aGlzLmNvbFR5cGVzW2NvbC50eXBlXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIpICYmXG4gICAgICAgICAgICAgICAgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlci51aSkgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlci51aS5yZWFkKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmZpbHRlci51aS5yZWFkO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmxWYWx1ZSA9IGNvbC5maWx0ZXIudWkucmVhZCh7IGVsZW1lbnQ6IHRhcmcsIGNvbHVtbjogY29sLCBvcGVyYXRvcjogZmxPcHRyVmFsdWUsIGZsdHJPYmo6IHRoaXMuZmlsdGVyT2JqIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VvZkZpbHRlclVJLnJlYWQodGFyZywgY29sLCBmbE9wdHJWYWx1ZSwgdGhpcy5maWx0ZXJPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ID8gJy5lLWNvbHVtbm1lbnUnIDogJy5lLWljb24tZmlsdGVyJztcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9XCInICsgY29sLnVpZCArICdcIl0nKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGZsSWNvbiA9IGNvbHVtbi5xdWVyeVNlbGVjdG9yKGljb25DbGFzcyk7XG4gICAgICAgICAgICBpZiAoZmxJY29uKSB7XG4gICAgICAgICAgICAgICAgZmxJY29uLmNsYXNzTGlzdC5hZGQoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5jbGVhckJ0bkNsaWNrID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPYmoucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ID8gJy5lLWNvbHVtbm1lbnUnIDogJy5lLWljb24tZmlsdGVyJztcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9XCInICsgY29sdW1uLnVpZCArICdcIl0nKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGZsSWNvbiA9IGNvbC5xdWVyeVNlbGVjdG9yKGljb25DbGFzcyk7XG4gICAgICAgICAgICBpZiAoZmxJY29uKSB7XG4gICAgICAgICAgICAgICAgZmxJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyTWVudVJlbmRlcmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXJNZW51UmVuZGVyZXIgPSBGaWx0ZXJNZW51UmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLW1lbnUtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Ryb3Bkb3duc18xLCBlajJfZGF0YV8xLCBlajJfYmFzZV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN0cmluZ0ZpbHRlclVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU3RyaW5nRmlsdGVyVUkocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgZmlsdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgIH1cbiAgICAgICAgU3RyaW5nRmlsdGVyVUkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICB2YXIgZmxvcHRyO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LWlucHV0JywgaWQ6ICdzdHJ1aS0nICsgYXJncy5jb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgYXJncy50YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5pbnN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IGFyZ3MuZGlhbG9nT2JqO1xuICAgICAgICAgICAgdGhpcy5hY3RPYmogPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkF1dG9Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSksXG4gICAgICAgICAgICAgICAgZmllbGRzOiB7IHZhbHVlOiBhcmdzLmNvbHVtbi5maWVsZCB9LFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogJ0FzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5vcGVuUG9wdXAuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtcG9wdXAtZmxtZW51JyxcbiAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY3RPYmouZmlsdGVyVHlwZSA9IGFyZ3MuZ2V0T3B0ckluc3RhbmNlLmdldEZsT3BlcmF0b3IoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF1dG9maWxsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBhcmdzLmxvY2FsaXplVGV4dC5nZXRDb25zdGFudCgnRW50ZXJWYWx1ZScpLFxuICAgICAgICAgICAgICAgIGFjdGlvbkNvbXBsZXRlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnJlc3VsdCA9IGUucmVzdWx0LmZpbHRlcihmdW5jdGlvbiAob2JqLCBpbmRleCwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAobWFwT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcE9ialtfdGhpcy5hY3RPYmouZmllbGRzLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmluZGV4T2Yob2JqW190aGlzLmFjdE9iai5maWVsZHMudmFsdWVdKSA9PT0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hY3RPYmouYXBwZW5kVG8odGhpcy5pbnN0YW5jZSk7XG4gICAgICAgIH07XG4gICAgICAgIFN0cmluZ0ZpbHRlclVJLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmIChhcmdzLmZpbHRlcmVkVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0cnVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0cnVpLScgKyBhcmdzLmNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgc3RydWlPYmoudmFsdWUgPSBhcmdzLmZpbHRlcmVkVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFN0cmluZ0ZpbHRlclVJLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbHVtbiwgZmlsdGVyT3B0ciwgZmlsdGVyT2JqKSB7XG4gICAgICAgICAgICB2YXIgYWN0dWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RydWktJyArIGNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBhY3R1aU9iai52YWx1ZTtcbiAgICAgICAgICAgIGZpbHRlck9iai5maWx0ZXJCeUNvbHVtbihjb2x1bW4uZmllbGQsIGZpbHRlck9wdHIsIGZpbHRlclZhbHVlLCAnYW5kJywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpbmdGaWx0ZXJVSS5wcm90b3R5cGUub3BlblBvcHVwID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHV0aWxfMS5nZXRaSW5kZXhDYWxjdWFsdGlvbihhcmdzLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdHJpbmdGaWx0ZXJVSTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3RyaW5nRmlsdGVyVUkgPSBTdHJpbmdGaWx0ZXJVSTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdHJpbmctZmlsdGVyLXVpLmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Ryb3Bkb3duc18xLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGbE1lbnVPcHRyVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGbE1lbnVPcHRyVUkocGFyZW50LCBjdXN0b21GbHRyT3BlcmF0b3JzLCBzZXJ2aWNlTG9jYXRvciwgZmlsdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21GaWx0ZXJPcGVyYXRvcnMgPSBjdXN0b21GbHRyT3BlcmF0b3JzO1xuICAgICAgICB9XG4gICAgICAgIEZsTWVudU9wdHJVSS5wcm90b3R5cGUucmVuZGVyT3BlcmF0b3JVSSA9IGZ1bmN0aW9uIChkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbHVtbiwgZGxnT2JqKSB7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IGRsZ09iajtcbiAgICAgICAgICAgIHZhciBvcHRyID0gY29sdW1uLnR5cGUgKyAnT3BlcmF0b3InO1xuICAgICAgICAgICAgdGhpcy5vcHRyRGF0YSA9IHRoaXMuY3VzdG9tT3B0ciA9ICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5vcGVyYXRvcnMpICYmXG4gICAgICAgICAgICAgICAgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3Mub3BlcmF0b3JzW29wdHJdKSkgP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLm9wZXJhdG9yc1tvcHRyXSA6IHRoaXMuY3VzdG9tRmlsdGVyT3BlcmF0b3JzW29wdHJdO1xuICAgICAgICAgICAgdmFyIGRyb3BEYXRhc291cmNlID0gdGhpcy5jdXN0b21PcHRyO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFsdWUgPSB0aGlzLmRyb3BTZWxlY3RlZFZhbChjb2x1bW4sIG9wdHIpO1xuICAgICAgICAgICAgdmFyIG9wdHJEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mbG1fb3B0cmRpdicgfSk7XG4gICAgICAgICAgICBkbGdDb25ldG50RWxlLmFwcGVuZENoaWxkKG9wdHJEaXYpO1xuICAgICAgICAgICAgdmFyIG9wdHJJbnB1dCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGlkOiBjb2x1bW4udWlkICsgJy1mbG9wdHInIH0pO1xuICAgICAgICAgICAgb3B0ckRpdi5hcHBlbmRDaGlsZChvcHRySW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5kcm9wT3B0ciA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBkcm9wRGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgdGV4dDogJ3RleHQnLCB2YWx1ZTogJ3ZhbHVlJyB9LFxuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMuZHJvcERvd25PcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgdGV4dDogc2VsZWN0ZWRWYWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRyb3BPcHRyLmFwcGVuZFRvKCcjJyArIGNvbHVtbi51aWQgKyAnLWZsb3B0cicpO1xuICAgICAgICB9O1xuICAgICAgICBGbE1lbnVPcHRyVUkucHJvdG90eXBlLmRyb3BEb3duT3BlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLnBvcHVwLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gKHRoaXMuZGlhbG9nT2JqLnpJbmRleCArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZsTWVudU9wdHJVSS5wcm90b3R5cGUuZHJvcFNlbGVjdGVkVmFsID0gZnVuY3Rpb24gKGNvbCwgb3B0cikge1xuICAgICAgICAgICAgdmFyIHNlbFZhbHVlID0gJyc7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZmllbGQgPT09IGNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRGaWVsZCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMub3B0ckRhdGEpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKCd2YWx1ZScsICdlcXVhbCcsIGNvbHVtbi5vcGVyYXRvcikpO1xuICAgICAgICAgICAgICAgICAgICBzZWxWYWx1ZSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNlbGVjdGVkRmllbGRbMF0pID8gc2VsZWN0ZWRGaWVsZFswXS50ZXh0IDogJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbFZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHNlbFZhbHVlID0gdGhpcy5vcHRyRGF0YVswXS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBGbE1lbnVPcHRyVUkucHJvdG90eXBlLmdldEZsT3BlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kcm9wT3B0ci52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZsTWVudU9wdHJVSTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRmxNZW51T3B0clVJID0gRmxNZW51T3B0clVJO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1tZW51LW9wZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfaW5wdXRzXzEsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIE51bWJlckZpbHRlclVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtYmVyRmlsdGVyVUkocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgZmlsdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICB9XG4gICAgICAgIE51bWJlckZpbHRlclVJLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LWlucHV0JywgaWQ6ICdudW1iZXJ1aS0nICsgYXJncy5jb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgYXJncy50YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5pbnN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLm51bWVyaWNUeHRPYmogPSBuZXcgZWoyX2lucHV0c18xLk51bWVyaWNUZXh0Qm94KHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtcG9wdXAtZmxtZW51JyxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYXJncy5sb2NhbGl6ZVRleHQuZ2V0Q29uc3RhbnQoJ0VudGVyVmFsdWUnKSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5udW1lcmljVHh0T2JqLmFwcGVuZFRvKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJGaWx0ZXJVSS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIG51bWJlcnVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI251bWJlcnVpLScgKyBhcmdzLmNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICBudW1iZXJ1aU9iai52YWx1ZSA9IGFyZ3MuZmlsdGVyZWRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtYmVyRmlsdGVyVUkucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29sdW1uLCBmaWx0ZXJPcHRyLCBmaWx0ZXJPYmopIHtcbiAgICAgICAgICAgIHZhciBudW1iZXJ1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNudW1iZXJ1aS0nICsgY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IG51bWJlcnVpT2JqLnZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyT2JqLmZpbHRlckJ5Q29sdW1uKGNvbHVtbi5maWVsZCwgZmlsdGVyT3B0ciwgZmlsdGVyVmFsdWUsICdhbmQnLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWJlckZpbHRlclVJO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1iZXJGaWx0ZXJVSSA9IE51bWJlckZpbHRlclVJO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL251bWJlci1maWx0ZXItdWkuanNcbi8vIG1vZHVsZSBpZCA9IDY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBlajJfZGF0YV8xLCBlajJfZHJvcGRvd25zXzEsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJvb2xlYW5GaWx0ZXJVSSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJvb2xlYW5GaWx0ZXJVSShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCBmaWx0ZXJTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgIH1cbiAgICAgICAgQm9vbGVhbkZpbHRlclVJLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICB0aGlzLmVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS1pbnB1dCcsIGlkOiAnYm9vbC11aS0nICsgYXJncy5jb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgYXJncy50YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gYXJncy5kaWFsb2dPYmo7XG4gICAgICAgICAgICB0aGlzLmRyb3BJbnN0YW5jZSA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5kYXRhU291cmNlKSxcbiAgICAgICAgICAgICAgICBxdWVyeTogbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS5zZWxlY3QoYXJncy5jb2x1bW4uZmllbGQpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB0ZXh0OiBhcmdzLmNvbHVtbi5maWVsZCwgdmFsdWU6IGFyZ3MuY29sdW1uLmZpZWxkIH0sXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGFyZ3MubG9jYWxpemVUZXh0LmdldENvbnN0YW50KCdTZWxlY3RWYWx1ZScpLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1wb3B1cC1mbG1lbnUnLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMub3BlblBvcHVwLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYWN0aW9uQ29tcGxldGU6IHRoaXMuZGRBY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRyb3BJbnN0YW5jZS5hcHBlbmRUbyh0aGlzLmVsZW0pO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRmlsdGVyVUkucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBkcnB1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib29sLXVpLScgKyBhcmdzLmNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICBkcnB1aU9iai50ZXh0ID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5maWx0ZXJlZFZhbHVlKSA/IGFyZ3MuZmlsdGVyZWRWYWx1ZSA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRmlsdGVyVUkucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29sdW1uLCBmaWx0ZXJPcHRyLCBmaWx0ZXJPYmopIHtcbiAgICAgICAgICAgIHZhciBkcnB1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib29sLXVpLScgKyBjb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gZHJwdWlPYmoudmFsdWU7XG4gICAgICAgICAgICBmaWx0ZXJPYmouZmlsdGVyQnlDb2x1bW4oY29sdW1uLmZpZWxkLCBmaWx0ZXJPcHRyLCBmaWx0ZXJWYWx1ZSwgJ2FuZCcsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkZpbHRlclVJLnByb3RvdHlwZS5kZEFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucmVzdWx0ID0gdXRpbF8xLmRpc3RpbmN0U3RyaW5nVmFsdWVzKGUucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkZpbHRlclVJLnByb3RvdHlwZS5vcGVuUG9wdXAgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdXRpbF8xLmdldFpJbmRleENhbGN1YWx0aW9uKGFyZ3MsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW5GaWx0ZXJVSTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQm9vbGVhbkZpbHRlclVJID0gQm9vbGVhbkZpbHRlclVJO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Jvb2xlYW4tZmlsdGVyLXVpLmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9jYWxlbmRhcnNfMSwgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGF0ZUZpbHRlclVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGF0ZUZpbHRlclVJKHBhcmVudCwgc2VydmljZUxvY2F0b3IsIGZpbHRlclNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5mbHRyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBEYXRlRmlsdGVyVUkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgICAgICB2YXIgY29sRm9ybWF0ID0gYXJncy5jb2x1bW4uZm9ybWF0O1xuICAgICAgICAgICAgdmFyIGZvcm1hdCA9IGludGwuZ2V0RGF0ZVBhdHRlcm4oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2xGb3JtYXQgfSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBhcmdzLmRpYWxvZ09iajtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtaW5wdXQnLCBpZDogJ2RhdGV1aS0nICsgYXJncy5jb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgYXJncy50YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dEVsZW0pO1xuICAgICAgICAgICAgdGhpcy5kYXRlUGlja2VyT2JqID0gbmV3IGVqMl9jYWxlbmRhcnNfMS5EYXRlUGlja2VyKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtcG9wdXAtZmxtZW51JyxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYXJncy5sb2NhbGl6ZVRleHQuZ2V0Q29uc3RhbnQoJ0Nob29zZURhdGUnKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMub3BlblBvcHVwLmJpbmQodGhpcyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2tlck9iai5hcHBlbmRUbyh0aGlzLmlucHV0RWxlbSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVGaWx0ZXJVSS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZsdHJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRhdGV1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRldWktJyArIGFyZ3MuY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIGRhdGV1aU9iai52YWx1ZSA9IGFyZ3MuZmlsdGVyZWRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZpbHRlclVJLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbHVtbiwgZmlsdGVyT3B0ciwgZmlsdGVyT2JqKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZXVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGV1aS0nICsgY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGRhdGV1aU9iai52YWx1ZTtcbiAgICAgICAgICAgIGZpbHRlck9iai5maWx0ZXJCeUNvbHVtbihjb2x1bW4uZmllbGQsIGZpbHRlck9wdHIsIGZpbHRlclZhbHVlLCAnYW5kJywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVGaWx0ZXJVSS5wcm90b3R5cGUub3BlblBvcHVwID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MucG9wdXBFbGVtZW50LmVsZW1lbnQuc3R5bGUuekluZGV4ID0gKHRoaXMuZGlhbG9nT2JqLnpJbmRleCArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEYXRlRmlsdGVyVUk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGVGaWx0ZXJVSSA9IERhdGVGaWx0ZXJVSTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kYXRlLWZpbHRlci11aS5qc1xuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzcxX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCJcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9hY3Rpb25zL2NoZWNrYm94LWZpbHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZWoyX25hdmlnYXRpb25zXzEsIGNoZWNrYm94X2ZpbHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeGNlbEZpbHRlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFeGNlbEZpbHRlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRXhjZWxGaWx0ZXIocGFyZW50LCBmaWx0ZXJTZXR0aW5ncywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMubG9jYWxlQ29uc3RhbnRzID0ge1xuICAgICAgICAgICAgICAgIENsZWFyRmlsdGVyOiAnQ2xlYXIgRmlsdGVyJyxcbiAgICAgICAgICAgICAgICBOdW1iZXJGaWx0ZXI6ICdOdW1iZXIgRmlsdGVycycsXG4gICAgICAgICAgICAgICAgVGV4dEZpbHRlcjogJ1RleHQgRmlsdGVycycsXG4gICAgICAgICAgICAgICAgRGF0ZUZpbHRlcjogJ0RhdGUgRmlsdGVycycsXG4gICAgICAgICAgICAgICAgTWF0Y2hDYXNlOiAnTWF0Y2ggQ2FzZScsXG4gICAgICAgICAgICAgICAgRXF1YWw6ICdFcXVhbCcsXG4gICAgICAgICAgICAgICAgTm90RXF1YWw6ICdOb3QgRXF1YWwnLFxuICAgICAgICAgICAgICAgIExlc3NUaGFuOiAnTGVzcyBUaGFuJyxcbiAgICAgICAgICAgICAgICBMZXNzVGhhbk9yRXF1YWw6ICdMZXNzIFRoYW4gT3IgRXF1YWwnLFxuICAgICAgICAgICAgICAgIEdyZWF0ZXJUaGFuOiAnR3JlYXRlciBUaGFuJyxcbiAgICAgICAgICAgICAgICBHcmVhdGVyVGhhbk9yRXF1YWw6ICdHcmVhdGVyIFRoYW4gT3IgRXF1YWwnLFxuICAgICAgICAgICAgICAgIEJldHdlZW46ICdCZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICBDdXN0b21GaWx0ZXI6ICdDdXN0b20gRmlsdGVyJyxcbiAgICAgICAgICAgICAgICBTdGFydHNXaXRoOiAnU3RhcnRzIFdpdGgnLFxuICAgICAgICAgICAgICAgIEVuZHNXaXRoOiAnRW5kcyBXaXRoJyxcbiAgICAgICAgICAgICAgICBDb250YWluczogJ0NvbnRhaW5zJyxcbiAgICAgICAgICAgICAgICBPSzogJ09LJyxcbiAgICAgICAgICAgICAgICBDYW5jZWw6ICdDYW5jZWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQoX3RoaXMuZGVmYXVsdENvbnN0YW50cywgX3RoaXMubG9jYWxlQ29uc3RhbnRzKTtcbiAgICAgICAgICAgIF90aGlzLmlzRXhjZWwgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMuaW5pdExvY2FsZShfdGhpcy5kZWZhdWx0Q29uc3RhbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuZ2V0Q01lbnVEUyA9IGZ1bmN0aW9uICh0eXBlLCBvcGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBbJ0VxdWFsJywgJ05vdEVxdWFsJywgJycsICdMZXNzVGhhbicsICdMZXNzVGhhbk9yRXF1YWwnLCAnR3JlYXRlclRoYW4nLFxuICAgICAgICAgICAgICAgICAgICAnR3JlYXRlclRoYW5PckVxdWFsJywgJ0JldHdlZW4nLCAnJywgJ0N1c3RvbUZpbHRlciddLFxuICAgICAgICAgICAgICAgIHN0cmluZzogWydFcXVhbCcsICdOb3RFcXVhbCcsICcnLCAnU3RhcnRzV2l0aCcsICdFbmRzV2l0aCcsICcnLCAnQ29udGFpbnMnLCAnJywgJ0N1c3RvbUZpbHRlciddLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0ZSA9IG9wdGlvbnMubnVtYmVyO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRldGltZSA9IG9wdGlvbnMubnVtYmVyO1xuICAgICAgICAgICAgdmFyIG1vZGVsID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnNbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1t0eXBlXVtpXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldExvY2FsaXplZExhYmVsKG9wdGlvbnNbdHlwZV1baV0pICsgJy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkNzczogJ2UtaWNvbnMgZS1pY29uLWNoZWNrICcgKyAob3BlcmF0b3IgPT09IG9wdGlvbnNbdHlwZV1baV0gPyAnJyA6ICdlLWVtcHR5aWNvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwob3B0aW9uc1t0eXBlXVtpXSkgKyAnLi4uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLnB1c2goeyBzZXBhcmF0b3I6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5jbWVudSk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5jcmVhdGVNZW51ID0gZnVuY3Rpb24gKHR5cGUsIGlzRmlsdGVyZWQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0geyBzdHJpbmc6ICdUZXh0RmlsdGVyJywgZGF0ZTogJ0RhdGVGaWx0ZXInLCBkYXRldGltZTogJ0RhdGVGaWx0ZXInLCBudW1iZXI6ICdOdW1iZXJGaWx0ZXInIH07XG4gICAgICAgICAgICB0aGlzLm1lbnUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jb250ZXh0bWVudS13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgIHZhciBpY29uID0gaXNGaWx0ZXJlZCA/ICdlLWljb24tZmlsdGVyIGUtZmlsdGVyZWQnIDogJ2UtaWNvbi1maWx0ZXInO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVNZW51RWxlbSh0aGlzLmdldExvY2FsaXplZExhYmVsKCdDbGVhckZpbHRlcicpLCBpc0ZpbHRlcmVkID8gJycgOiAnZS1kaXNhYmxlZCcsIGljb24pKTtcbiAgICAgICAgICAgIGlmICh0eXBlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB1bC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZU1lbnVFbGVtKHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwob3B0aW9uc1t0eXBlXSksICdlLXN1Ym1lbnUnLCBpc0ZpbHRlcmVkID8gJ2UtaWNvbi1jaGVjaycgOiBpY29uICsgJyBlLWVtcHR5aWNvbicsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVudS5hcHBlbmRDaGlsZCh1bCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5jcmVhdGVNZW51RWxlbSA9IGZ1bmN0aW9uICh2YWwsIGNsYXNzTmFtZSwgaWNvbk5hbWUsIGlzU3ViTWVudSkge1xuICAgICAgICAgICAgdmFyIGxpID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsaScsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnIGUtbWVudS1pdGVtJyB9KTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IHZhbDtcbiAgICAgICAgICAgIGxpLmluc2VydEJlZm9yZShlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtbWVudS1pY29uIGUtaWNvbnMgJyArIGljb25OYW1lIH0pLCBsaS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmIChpc1N1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1jYXJldCcgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUud2lyZUV4RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnLCAnbW91c2VvdmVyJywgdGhpcy5ob3ZlckhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnLCAnY2xpY2snLCB0aGlzLmNsaWNrRXhIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmRsZywgJ21vdXNlb3ZlcicsIHRoaXMuaG92ZXJIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmRsZywgJ2NsaWNrJywgdGhpcy5jbGlja0V4SGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5jbGlja0V4SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1tZW51LWl0ZW0nKTtcbiAgICAgICAgICAgIGlmIChtZW51SXRlbSAmJiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdDbGVhckZpbHRlcicpID09PSBtZW51SXRlbS5pbm5lclRleHQpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3lDTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbnVPYmogJiYgIXRoaXMubWVudU9iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVudU9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5ob3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbnRleHRtZW51Jyk7XG4gICAgICAgICAgICB2YXIgbGkgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1tZW51LWl0ZW0nKTtcbiAgICAgICAgICAgIHZhciBmb2N1c2VkID0gdGhpcy5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5lLWZvY3VzZWQnKTtcbiAgICAgICAgICAgIHZhciBpc1N1Yk1lbnU7XG4gICAgICAgICAgICBpZiAoZm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIGZvY3VzZWQuY2xhc3NMaXN0LnJlbW92ZSgnZS1mb2N1c2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGkpIHtcbiAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdlLWZvY3VzZWQnKTtcbiAgICAgICAgICAgICAgICBpc1N1Yk1lbnUgPSBsaS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3VibWVudScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNTdWJNZW51KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1Ym1lbnUgPSB0aGlzLm1lbnUucXVlcnlTZWxlY3RvcignLmUtc3VibWVudScpO1xuICAgICAgICAgICAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnZS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDTWVudU9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lDTWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ01lbnVPcGVuICYmIGlzU3ViTWVudSkge1xuICAgICAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ2Utc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ01lbnVPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgbWVudU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldENNZW51RFModGhpcy5vcHRpb25zLnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0SGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiB0aGlzLmRlc3Ryb3lDTWVudS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNtZW51KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPYmogPSBuZXcgZWoyX25hdmlnYXRpb25zXzEuQ29udGV4dE1lbnUobWVudU9wdGlvbnMsIHRoaXMuY21lbnUpO1xuICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSB0aGlzLm1lbnUucXVlcnlTZWxlY3RvcignLmUtc3VibWVudScpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudU9iai5vcGVuKGNsaWVudC50b3AsIHRoaXMuZGxnLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5vcGVuRGlhbG9nID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmdldEFuZFNldENoa0VsZW0ob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnNob3dEaWFsb2cob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5oZWlnaHQgPSAnMzQ1cHgnO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVudShvcHRpb25zLnR5cGUsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZGxnLmluc2VydEJlZm9yZSh0aGlzLm1lbnUsIHRoaXMuZGxnLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5kbGcuY2xhc3NMaXN0LmFkZCgnZS1leGNlbGZpbHRlcicpO1xuICAgICAgICAgICAgdGhpcy5jbWVudSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndWwnLCB7IGNsYXNzTmFtZTogJ2UtZXhjZWwtbWVudScgfSk7XG4gICAgICAgICAgICB0aGlzLndpcmVFeEV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRGlhbG9nLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuc2VsZWN0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdleGNlbEZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeGNlbEZpbHRlcjtcbiAgICB9KGNoZWNrYm94X2ZpbHRlcl8xLkNoZWNrQm94RmlsdGVyKSk7XG4gICAgZXhwb3J0cy5FeGNlbEZpbHRlciA9IEV4Y2VsRmlsdGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZmlsdGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdCA9IHtcbiAgICAgICAgcm9vdDogJ2UtcmhhbmRsZXInLFxuICAgICAgICBzdXBwcmVzczogJ2UtcnN1cHByZXNzJyxcbiAgICAgICAgaWNvbjogJ2Utcmljb24nLFxuICAgICAgICBoZWxwZXI6ICdlLXJoZWxwZXInLFxuICAgICAgICBoZWFkZXI6ICd0aC5lLWhlYWRlcmNlbGwnLFxuICAgICAgICBjdXJzb3I6ICdlLXJjdXJzb3InLFxuICAgICAgICBsaW5lczogJ2UtcmxpbmVzJ1xuICAgIH07XG4gICAgdmFyIFJlc2l6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlc2l6ZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBuZXcgd2lkdGhfY29udHJvbGxlcl8xLkNvbHVtbldpZHRoU2VydmljZShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWUgPSAoZk5hbWUgPT09IHVuZGVmaW5lZCB8fCBmTmFtZSA9PT0gbnVsbCB8fCBmTmFtZS5sZW5ndGggPD0gMCkgP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZmllbGQ7IH0pIDogKHR5cGVvZiBmTmFtZSA9PT0gJ3N0cmluZycpID8gW2ZOYW1lXSA6IGZOYW1lO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUNvbHVtbiA9IGZ1bmN0aW9uIChmTmFtZSwgaW5kZXgsIGlkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGFibGUgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGhDbG9uZSA9IGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IDA7XG4gICAgICAgICAgICBpZiAoaW5kZW50V2lkdGhDbG9uZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnRXaWR0aENsb25lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGVudFdpZHRoICs9IGluZGVudFdpZHRoQ2xvbmVbaV0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVpZCA9IGlkID8gaWQgOiB0aGlzLnBhcmVudC5nZXRVaWRCeUNvbHVtbkZpZWxkKGZOYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCh1aWQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHRDbG9uZSA9IGhlYWRlclRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJylbY29sdW1uSW5kZXhdLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0ID0gW2hlYWRlclRleHRDbG9uZV07XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHRDbG9uZSA9IGNvbnRlbnRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidGQ6bnRoLWNoaWxkKFwiICsgKGNvbHVtbkluZGV4ICsgMSkgKyBcIilcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudFRleHRDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUZXh0W2ldID0gY29udGVudFRleHRDbG9uZVtpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd0hlYWRlciA9IHRoaXMuY3JlYXRlVGFibGUoaGVhZGVyVGFibGUsIGhlYWRlclRleHQsIGhlYWRlckRpdlRhZyk7XG4gICAgICAgICAgICB2YXIgd0NvbnRlbnQgPSB0aGlzLmNyZWF0ZVRhYmxlKGNvbnRlbnRUYWJsZSwgY29udGVudFRleHQsIGNvbnRlbnREaXZUYWcpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbmJ5aW5kZXggPSBnT2JqLmdldENvbHVtbnMoKVtpbmRleF07XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKHdIZWFkZXIgPiB3Q29udGVudCkgPyBjb2x1bW5ieWluZGV4LndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdIZWFkZXIpIDogY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3Q29udGVudCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChnT2JqLmdldENvbHVtbnMoKVtpbmRleF0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ09iai5nZXRDb2x1bW5zKCkuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC53aWR0aCA9PT0gbnVsbCB8fCB4LndpZHRoID09PSB1bmRlZmluZWQgfHwgeC53aWR0aC5sZW5ndGggPD0gMDsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRXaWR0aCA9IHRXaWR0aCArIHBhcnNlSW50KGVsZW1lbnQud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YWJsZVdpZHRoXzEgPSB0V2lkdGggKyBpbmRlbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0YWJsZVdpZHRoXzEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGVXaWR0aCA9IGhlYWRlclRhYmxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnR3aWR0aCA9IChnT2JqLmdldENvbnRlbnQoKS5zY3JvbGxXaWR0aCk7XG4gICAgICAgICAgICBpZiAoY29udGVudHdpZHRoID4gdGFibGVXaWR0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LmFkZCgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZXNpemUnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmZpbmRDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBmTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gX3RoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XS52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2l6ZUNvbHVtbihmaWVsZE5hbWUsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGV4dCwgdGFnKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB0ZXh0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBteVRyLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTmFtZSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJykuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRXaWR0aFZhbHVlID0gbXlUYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG9mZnNldFdpZHRoVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5mcmVlemVSZWZyZXNoLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZyAmJlxuICAgICAgICAgICAgICAgICEodGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAndmVydGljYWwnIHx8IHRoaXMucGFyZW50LmdyaWRMaW5lcyA9PT0gJ2JvdGgnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5saW5lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEhhbmRsZXJIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gZWxlLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmdldFJlc2l6ZUhhbmRsZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgX3RoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0UmVzaXplSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyA/XG4gICAgICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSlcbiAgICAgICAgICAgICAgICA6IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnJvb3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5zZXRIYW5kbGVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Quc3VwcHJlc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gZWxlLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbGxBdXRvRml0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldFRhcmdldENvbHVtbihlKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ29sdW1uKGNvbC5maWVsZCwgdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbC51aWQpLCBjb2wudWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0U2Nyb2xsQmFyV2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5yZWZyZXNoQ29sdW1uV2lkdGgoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChjb2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9UYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEhlbHBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHRoaXMuZ2V0UG9pbnRYKGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAtICh0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgKz0gdGhpcy5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgIXRoaXMuaGVscGVyLmNsYXNzTGlzdC5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyLmNsYXNzTGlzdC5hZGQoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdGFydCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdhZGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYW5jZWxSZXNpemVBY3Rpb24gPSBmdW5jdGlvbiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdyZW1vdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgaWYgKG1pbldpZHRoICYmIHdpZHRoIDwgbWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF4V2lkdGggJiYgd2lkdGggPiBtYXhXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXppbmcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICB2YXIgbW91c2Vtb3ZlID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gLShwYWdlWCAtIHRoaXMucGFnZVgpIDogKHBhZ2VYIC0gdGhpcy5wYWdlWCk7XG4gICAgICAgICAgICB2YXIgY29sRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQodGhpcy53aWR0aFNlcnZpY2UuZ2V0V2lkdGgodGhpcy5jb2x1bW4pLnRvU3RyaW5nKCksIDEwKSArIG1vdXNlbW92ZSxcbiAgICAgICAgICAgICAgICBtaW5XaWR0aDogdGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiB0aGlzLmNvbHVtbi5tYXhXaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbERhdGEud2lkdGgsIGNvbERhdGEubWluV2lkdGgsIGNvbERhdGEubWF4V2lkdGgpO1xuICAgICAgICAgICAgaWYgKCghdGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA+PSBwYWdlWCkgfHwgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCAmJiB0aGlzLm1pbk1vdmUgPD0gcGFnZVgpKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2VYID0gdGhpcy5taW5Nb3ZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4ud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5vblJlc2l6ZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldENvbHVtbldpZHRoKHRoaXMuY29sdW1uLCBudWxsLCAncmVzaXplJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIZWxwZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVFbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlciB8fCB0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZTogZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucmVzaXplU3RvcCwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMuZG91YmxlVGFwRXZlbnQoZSk7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRQb2ludFggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlZnJlc2hDb2x1bW5XaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmFwcGx5KHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgndGguZS1oZWFkZXJjZWxsJykpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfYiA8IGNvbHVtbnNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfYl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZF0nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWRdJykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSA9PT0gY29sdW1uLnVpZCAmJiBjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLndpZHRoID0gZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRUYXJnZXRDb2x1bW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB2YXIgdWlkID0gY2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh1aWQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUN1cnNvciA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgndGgnKSk7XG4gICAgICAgICAgICBoZWFkZXJSb3dzLnB1c2godGhpcy5wYXJlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGhlYWRlclJvd3NfMSA9IGhlYWRlclJvd3M7IF9pIDwgaGVhZGVyUm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBoZWFkZXJSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3RbYWN0aW9uXShleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5jdXJzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnBhZ2VYID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuYXBwZW5kSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlbHBlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkub2Zmc2V0SGVpZ2h0IC0gdGhpcy5nZXRTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlajJfYmFzZV8xLmNsb3Nlc3QodGhpcy5lbGVtZW50LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdmFyIHRyID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgndHInKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LnBhcmVudEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoICE9PSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyLnNwbGljZSgwLCB0ci5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyLnNwbGljZSh0ci5sZW5ndGggLyAyLCB0ci5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdHIuaW5kZXhPZihyZWN0LnBhcmVudEVsZW1lbnQpOyBpIDwgdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQgKz0gdHJbaV0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuY2FsY1BvcyhyZWN0KTtcbiAgICAgICAgICAgIHBvcy5sZWZ0ICs9ICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAwIC0gMSA6IHJlY3Qub2Zmc2V0V2lkdGggLSAyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OiAnICsgaGVpZ2h0ICsgJ3B4OyB0b3A6ICcgKyBwb3MudG9wICsgJ3B4OyBsZWZ0OicgKyBNYXRoLmZsb29yKHBvcy5sZWZ0KSArICdweDsnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgPyB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKVxuICAgICAgICAgICAgICAgIDogdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICByZXR1cm4gKGVsZS5zY3JvbGxIZWlnaHQgPiBlbGUuY2xpZW50SGVpZ2h0ICYmIGhlaWdodCkgfHxcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsV2lkdGggPiBlbGUuY2xpZW50V2lkdGggPyB1dGlsXzEuZ2V0U2Nyb2xsQmFyV2lkdGgoKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlSGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbHMgPSBlLnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAoIShjbHMuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Qucm9vdCkgfHwgY2xzLmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSAmJiB0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKHRoaXMuY2FsY1BvcyhyZWN0KS5sZWZ0ICsgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpKSArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FsY1BvcyA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50T2Zmc2V0ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmXG4gICAgICAgICAgICAgICAgKG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50KSAmJlxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudC5zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSBlbGVtICYmIG9mZnNldFBhcmVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmRvdWJsZVRhcEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFVzZXJBZ2VudCgpICYmIHRoaXMuaXNEYmxDbGspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxBdXRvRml0KGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSBlajJfYmFzZV8xLkJyb3dzZXIudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gL2lwaG9uZXxpcG9kfGlwYWQvLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS50aW1lb3V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlc2l6ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVzaXplID0gUmVzaXplO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVzaXplLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW9yZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVvcmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlb3JkZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5kcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB0aGlzLmRyYWdTdG9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY2hrRHJvcFBvc2l0aW9uID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjRWxlbS5wYXJlbnRFbGVtZW50LmlzRXF1YWxOb2RlKGRlc3RFbGVtLnBhcmVudEVsZW1lbnQpICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNoa0Ryb3BBbGxDb2xzID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaXNGb3VuZDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB3aGlsZSAoIWlzRm91bmQgJiYgaGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVycy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpc0ZvdW5kID0gc3JjRWxlbSAhPT0gaGVhZGVyICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNGb3VuZDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZmluZENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2wsIGNvbHMsIHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sID09PSBjb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2xzW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IHBhcmVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5wdXNoKGNvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmluZENvbFBhcmVudChjb2wsIGNvbHNbaV0uY29sdW1ucywgcGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNwbGljZShjbnQsIHBhcmVudC5sZW5ndGggLSBjbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbHVtbnNNb2RlbCA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uTW9kZWwgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdWJDb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHVtbk1vZGVsLnB1c2goY29sc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBzdWJDb2xzID0gc3ViQ29scy5jb25jYXQoY29sc1tpXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ViQ29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Nb2RlbCA9IGNvbHVtbk1vZGVsLmNvbmNhdCh0aGlzLmdldENvbHVtbnNNb2RlbChzdWJDb2xzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTW9kZWw7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmhlYWRlckRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAndGgnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXN0RWxlbSA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmIChkZXN0RWxlbSAmJiAhKCF0aGlzLmNoa0Ryb3BQb3NpdGlvbih0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICAgICAgdmFyIG9sZElkeCA9IHV0aWxfMS5nZXRFbGVtZW50SW5kZXgodGhpcy5lbGVtZW50LCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc01vZGVsKHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW29sZElkeF07XG4gICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleCh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKG5ld0luZGV4LCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5pc0FjdGlvblByZXZlbnQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm1vdmVDb2x1bW5zID0gZnVuY3Rpb24gKGRlc3RJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5tb3ZlQ29sdW1ucywgYXJnMTogZGVzdEluZGV4LCBhcmcyOiBjb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGNvbHVtbiwgdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzcmNJZHggPSB1dGlsXzEuaW5BcnJheShjb2x1bW4sIGNvbHMpO1xuICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBzcmNJZHggPT09IGRlc3RJbmRleCB8fCBzcmNJZHggPT09IC0xIHx8IGRlc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xzLnNwbGljZShkZXN0SW5kZXgsIDAsIGNvbHMuc3BsaWNlKHNyY0lkeCwgMSlbMF0pO1xuICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKHRydWUpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgeyBmcm9tSW5kZXg6IGRlc3RJbmRleCwgdG9JbmRleDogc3JjSWR4IH0pO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyZW9yZGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4ID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhdENvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNNb2RlbChjb2xzKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChmbGF0Q29sdW1uc1t1dGlsXzEuZ2V0RWxlbWVudEluZGV4KHNyY0VsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgICAgICBjb2xzID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiBjb2xzO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pbkFycmF5KGZsYXRDb2x1bW5zW3V0aWxfMS5nZXRFbGVtZW50SW5kZXgoZGVzdEVsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLmZpbmRDb2xQYXJlbnQoY29sdW1uLCBjb2x1bW5zLCBwYXJlbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnJlb3JkZXJDb2x1bW5zID0gZnVuY3Rpb24gKGZyb21GTmFtZSwgdG9GTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQodG9GTmFtZSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoY29sdW1uLCB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRlc3RJbmRleCA9IHV0aWxfMS5pbkFycmF5KGNvbHVtbiwgY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAoZGVzdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKGRlc3RJbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmcm9tRk5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY3JlYXRlUmVvcmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cgPSBoZWFkZXIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1pY29uLXJlb3JkZXJ1cGFycm93IGUtcmVvcmRlcnVwYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdyA9IGhlYWRlci5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWljb24tcmVvcmRlcmRvd25hcnJvdyBlLXJlb3JkZXJkb3duYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMudXBBcnJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmRvd25BcnJvdyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucmVvcmRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0b3AsIHRoaXMuZHJhZ1N0b3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsOm5vdCguZS1zdGFja2VkSGVhZGVyQ2VsbCknKTtcbiAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICB2YXIgaXNMZWZ0ID0gdGhpcy54ID4gdXRpbF8xLmdldFBvc2l0aW9uKGUuZXZlbnQpLnggKyBnT2JqLmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVvcmRlcmluZGljYXRlJyksIFsnZS1yZW9yZGVyaW5kaWNhdGUnXSk7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxQb3N0aW9uKGUuZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgIWNsb3Nlc3QuaXNFcXVhbE5vZGUodGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGNsb3Nlc3Q7XG4gICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuY2hrRHJvcFBvc2l0aW9uKHRoaXMuZWxlbWVudCwgdGFyZ2V0KSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIHRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXJyb3dQb3NpdGlvbih0YXJnZXQsIGlzTGVmdCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRhcmdldCwgWydlLWFsbG93RHJvcCcsICdlLXJlb3JkZXJpbmRpY2F0ZSddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoZ09iai5hbGxvd0dyb3VwaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUG9zdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHggPSB1dGlsXzEuZ2V0UG9zaXRpb24oZSkueDtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0QmFzZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlbSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmICh4ID4gY2xpUmVjdEJhc2UubGVmdCAmJiB4IDwgY2xpUmVjdEJhc2UubGVmdCArIDM1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IF90aGlzLnNldFNjcm9sbExlZnQoc2Nyb2xsRWxlbSwgdHJ1ZSk7IH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHggPCBjbGlSZWN0QmFzZS5yaWdodCAmJiB4ID4gY2xpUmVjdEJhc2UucmlnaHQgLSAzNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5zZXRTY3JvbGxMZWZ0KHNjcm9sbEVsZW0sIGZhbHNlKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKHNjcm9sbEVsZW0sIGlzTGVmdCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBzY3JvbGxFbGVtLnNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQgKyAoaXNMZWZ0ID8gLTUgOiA1KTtcbiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0ICE9PSBzY3JvbGxFbGVtLnNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnVwZGF0ZUFycm93UG9zaXRpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0xlZnQpIHtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGNsaVJlY3RCYXNlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGlmICgoaXNMZWZ0ICYmIGNsaVJlY3QubGVmdCA8IGNsaVJlY3RCYXNlLmxlZnQpIHx8ICghaXNMZWZ0ICYmIGNsaVJlY3QucmlnaHQgPiBjbGlSZWN0QmFzZS5yaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUudG9wID0gY2xpUmVjdC50b3AgKyBjbGlSZWN0LmhlaWdodCAtIGNsaVJlY3RCYXNlLnRvcCArICdweCc7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdy5zdHlsZS50b3AgPSBjbGlSZWN0LnRvcCAtIGNsaVJlY3RCYXNlLnRvcCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLmxlZnQgPSB0aGlzLmRvd25BcnJvdy5zdHlsZS5sZWZ0ID0gKGlzTGVmdCA/IGNsaVJlY3QubGVmdCA6IGNsaVJlY3QucmlnaHQpIC0gY2xpUmVjdEJhc2UubGVmdCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIHRoaXMueCA9IHV0aWxfMS5nZXRQb3NpdGlvbihlLmV2ZW50KS54ICsgZ09iai5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAoIWUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5Ecm9wLCB7IHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlb3JkZXJpbmRpY2F0ZScpLCBbJ2UtcmVvcmRlcmluZGljYXRlJ10pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXREaXNwbGF5ID0gZnVuY3Rpb24gKGRpc3BsYXkpIHtcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZW9yZGVyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlb3JkZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlb3JkZXIgPSBSZW9yZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVvcmRlci5qc1xuLy8gbW9kdWxlIGlkID0gNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dERCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd0REKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGRyYWdhcmVhJykubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgICghZS5zZW5kZXIudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykgJiYgZ09iai5zZWxlY3Rpb25TZXR0aW5ncy50eXBlICE9PSAnc2luZ2xlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdhbmRkcm9wIGUtZ3JpZCBlLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogJ2hlaWdodDpcImF1dG9cIiwgei1pbmRleDoyLCB3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgc3R5bGVzOiAnd2lkdGg6JyArIGdPYmouZWxlbWVudC5vZmZzZXRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ3JvdycgJiYgZ09iai5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludChlLnNlbmRlci50YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyhpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSBnT2JqLmdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZFJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gc2VsZWN0ZWRSb3dzW2ldLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1pbmRlbnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtZGV0YWlscm93Y29sbGFwc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoc2VsZWN0ZWRSb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZHJhZ2FyZWEnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0RyYWdTdGFydCwge1xuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGUudGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEICYmIGRyb3BFbGVtICYmIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcEVsZW0uZWoyX2luc3RhbmNlc1swXS5nZXRDb250ZW50KCkuY2xhc3NMaXN0LmFkZCgnZS1hbGxvd1Jvd0Ryb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuaXNEcmFnU3RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5nZXRFbGVtZW50RnJvbVBvc2l0aW9uKGNsb25lRWxlbWVudCwgZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0RyYWcsIHtcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJywgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJvd2RyYWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoY2xvbmVFbGVtZW50LnBhcmVudEVsZW1lbnQsICdlLWdyaWQnKS5pZCA9PT0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLmdldEVsZW1lbnRGcm9tUG9zaXRpb24oZS5oZWxwZXIsIGUuZXZlbnQpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJvd2RyYWcnKTtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEICYmIGRyb3BFbGVtICYmIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcEVsZW0uZWoyX2luc3RhbmNlc1swXS5nZXRDb250ZW50KCkuY2xhc3NMaXN0LnJlbW92ZSgnZS1hbGxvd1Jvd0Ryb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcm9wLCB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsXG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVEcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5pbml0aWFsaXplRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgdmFyIGRyYWc7XG4gICAgICAgICAgICBkcmFnID0gbmV3IGVqMl9iYXNlXzEuRHJhZ2dhYmxlKGdPYmouZ2V0Q29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLXJvd2NlbGwnLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihldmVudCk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgeyB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0VGFyZ2V0SWR4ID0gZnVuY3Rpb24gKHRhcmdldFJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFJvdyA/IHBhcnNlSW50KHRhcmdldFJvdy5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApIDogMDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmNvbHVtbkRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgIT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Um93ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgc3JjQ29udHJvbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LnBhcmVudEVsZW1lbnQuaWQgIT09IGdPYmouZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICBzcmNDb250cm9sID0gZS5kcm9wcGVkRWxlbWVudC5wYXJlbnRFbGVtZW50LmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzcmNDb250cm9sLmVsZW1lbnQuaWQgIT09IGdPYmouZWxlbWVudC5pZCAmJiBzcmNDb250cm9sLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAhPT0gZ09iai5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlY29yZHMgPSBzcmNDb250cm9sLmdldFNlbGVjdGVkUmVjb3JkcygpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleCA9IHRoaXMuZ2V0VGFyZ2V0SWR4KHRhcmdldFJvdyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGFyZ2V0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSB0YXJnZXRJbmRleCArIChnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAqIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKSAtIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucm93c0FkZGVkLCB7IHRvSW5kZXg6IHRhcmdldEluZGV4LCByZWNvcmRzOiByZWNvcmRzIH0pO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jvd2RyYWdhbmRkcm9wJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSBzcmNDb250cm9sLmdldFNlbGVjdGVkUm93SW5kZXhlcygpO1xuICAgICAgICAgICAgICAgIHZhciBza2lwID0gc3JjQ29udHJvbC5hbGxvd1BhZ2luZyA/XG4gICAgICAgICAgICAgICAgICAgIChzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAqIHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLnBhZ2VTaXplKSAtIHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLnBhZ2VTaXplIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2goc2tpcCArIHNlbGVjdGVkUm93c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wubm90aWZ5KGV2ZW50cy5yb3dzUmVtb3ZlZCwgeyBpbmRleGVzOiB0aGlzLnNlbGVjdGVkUm93cywgcmVjb3JkczogcmVjb3JkcyB9KTtcbiAgICAgICAgICAgICAgICBzcmNDb250cm9sLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyb3dkcmFnYW5kZHJvcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEcmFnKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVEcmFnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncm93RHJhZ0FuZERyb3AnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93REQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd0REID0gUm93REQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yb3ctcmVvcmRlci5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXAgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBHcm91cChwYXJlbnQsIGdyb3VwU2V0dGluZ3MsIHNvcnRlZENvbHVtbnMsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy52aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnY2xvbmUgZS1nZGNsb25lJyxcbiAgICAgICAgICAgICAgICBzdHlsZXM6ICdsaW5lLWhlaWdodDoyM3B4JywgYXR0cnM6IHsgYWN0aW9uOiAnZ3JvdXBpbmcnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnNlbmRlci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyb3VwaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC50ZXh0Q29udGVudCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiArICdweCc7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcsIF90aGlzLmNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy52aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXVuZ3JvdXBkcmFnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnLCB7IHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogX3RoaXMuY29sdW1uIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICAgICAgaWYgKCEodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHwgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS11bmdyb3VwZHJhZycpO1xuICAgICAgICAgICAgICAgIGlmICghKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHwgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeVVpZChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ob3ZlcicpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuZHJvcHBlZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWEuc2V0RHJvcFRhcmdldChfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJyksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcmlhLnNldEdyYWJiZWQoX3RoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignW2FyaWEtZ3JhYmJlZD10cnVlXScpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpLCAnZS1ncmlkJykuZ2V0QXR0cmlidXRlKCdpZCcpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzID0gZ3JvdXBTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucyA9IHNvcnRlZENvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5EcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSAmJlxuICAgICAgICAgICAgICAgICEodGhpcy5wYXJlbnQuYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyb3VwZHJvcGFyZWEnKSA/IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhvdmVyJykgOiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ob3ZlcicpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGwnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcEFyZWEgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KGRyb3BBcmVhLCBlLmNvbHVtbi5hbGxvd0dyb3VwaW5nKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IGUudGFyZ2V0IDogdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgdGhpcy5hcmlhLnNldEdyYWJiZWQoZWxlbWVudCwgdHJ1ZSwgIWUuY29sdW1uLmFsbG93R3JvdXBpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSA9PT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpLCAnZS1ncmlkJykuZ2V0QXR0cmlidXRlKCdpZCcpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuY29sdW1uRHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUm93ID0gZ09iai5nZXREYXRhUm93cygpW3NlbGVjdGVkW3NlbGVjdGVkLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnBSb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YVJvdy5yb3dJbmRleDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncnBSb3cgPSByb3dzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhncnBSb3cucXVlcnlTZWxlY3RvcihlLmFjdGlvbiA9PT0gJ2FsdFVwQXJyb3cnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmUtcmVjb3JkcGx1c2V4cGFuZCcgOiAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxEb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmZvY3VzLmdldEZvY3VzZWRFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignW2NsYXNzXj1cImUtcmVjb3JkXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhyb3cpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U29ydEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy51bkdyb3VwRnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUdyb3VwRnJvbUhlYWRlcihlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bkdyb3VwRnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVuZ3JvdXBidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudG9vZ2xlR3JvdXBGcm9tSGVhZGVyID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hcHBseVNvcnRGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTb3J0aW5nICYmIGdIZWFkZXIgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpICYmXG4gICAgICAgICAgICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2Rlc2NlbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2FzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlUm93cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgIGlmICh0cmd0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0cmd0LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgcm93SWR4ID0gdHJndC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHJvd05vZGVzKS5zbGljZShyb3dJZHggKyAxLCByb3dOb2Rlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciBpc0hpZGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZEVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRvRXhwYW5kID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGVudCA9IHRyZ3QucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbdHJndF0sICdlLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdHJndF0sICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpc0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nbmV4dGZvcndhcmQgZS1pY29uLWdyaWdodGFycm93JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0cmd0LCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylbY2VsbElkeF0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGQnKVtjZWxsSWR4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5kZW50Y2VsbCcpICYmIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0hpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoID09PSBpbmRlbnQgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRFbGVtID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yKCcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZC5wdXNoKGV4cGFuZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaSAtIDFdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRvRXhwYW5kLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RvRXhwYW5kW2ldXSwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0b0V4cGFuZFtpXV0sICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyh0b0V4cGFuZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoaXNFeHBhbmQpIHtcbiAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgcm93O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlY29yZHBsdXNleHBhbmQsIC5lLXJlY29yZHBsdXNjb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKGlzRXhwYW5kID8gJy5lLXJlY29yZHBsdXNjb2xsYXBzZScgOiAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzZXhwYW5kJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmQgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERyYWdBbmREcm9wKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlckdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBFbGVtID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJyk7XG4gICAgICAgICAgICBpZiAoZ3JvdXBFbGVtKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZ3JvdXBFbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyb3VwZHJvcGFyZWEnLCBhdHRyczogeyAndGFiaW5kZXgnOiAnLTEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5wYXJlbnQuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlR3JvdXBEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhICYmICF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZ0xhYmVsID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcm91cERyb3BBcmVhJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGRyYWdMYWJlbDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ncm91cGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmlubmVySFRNTCA9PT0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcm91cERyb3BBcmVhJykgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZ3JvdXBlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdERyYWdBbmREcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0hlYWRlckRyb3AoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdIZWFkZXJEcmFnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsaXplR0hlYWRlckRyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZHJhZyA9IG5ldyBlajJfYmFzZV8xLkRyYWdnYWJsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtZ3JvdXBoZWFkZXJjZWxsJyxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxpemVHSGVhZGVyRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV8xLkRyb3BwYWJsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5ncm91cENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuY29udGVudFJlZnJlc2ggJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5ncm91cENvbHVtbiwgYXJnMTogY29sdW1uTmFtZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGdPYmouZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuY29sTmFtZSA9IGNvbHVtbk5hbWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29sVG9Hcm91cERyb3AoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGNvbHVtbk5hbWU7IH0pWzBdIDogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMudW5ncm91cENvbHVtbiwgYXJnMTogY29sdW1uTmFtZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNvbE5hbWUgPSBjb2x1bW4uZmllbGQ7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIGNvbHVtbnMuc3BsaWNlKGNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpLCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uTmFtZSA9PT0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICBjb2x1bW5zLnB1c2godGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgIHdoaWxlIChpIDwgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCA9PT0gdGhpcy5jb2xOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IGkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnB1c2goeyBmaWVsZDogdGhpcy5jb2xOYW1lLCBkaXJlY3Rpb246ICdhc2NlbmRpbmcnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWdPYmouYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5kaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSA9PT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29sVG9Hcm91cERyb3AodGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sRnJvbUdyb3VwRHJvcCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSkgPiAtMSA/IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbE5hbWUsIHJlcXVlc3RUeXBlOiAnZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAndW5ncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzMuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFkZENvbFRvR3JvdXBEcm9wID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdhc2NlbmRpbmcnO1xuICAgICAgICAgICAgdmFyIGdyb3VwZWRDb2x1bW4gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkLWljb24gZS1ncm91cGhlYWRlcmNlbGwnIH0pO1xuICAgICAgICAgICAgdmFyIGNoaWxkRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGF0dHJzOiB7ICdlai1tYXBwaW5nbmFtZSc6IGZpZWxkIH0gfSk7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ2VsbCA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaGVhZGVyVGVtcGxhdGUuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZERpdi5pbm5lckhUTUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkRGl2LmlubmVySFRNTCA9IGNvbHVtbi5oZWFkZXJUZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hpbGREaXYuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZCgnZS1ncm91cHRleHQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncm91cHRleHQnLCBpbm5lckhUTUw6IGNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnc29ydCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdG9nZ2xlZ3JvdXBidXR0b24gZS1pY29ucyBlLWljb24tdW5ncm91cCBlLXRvZ2dsZXVuZ3JvdXAnLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAndW5ncm91cCBidXR0b24nIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcsLmUtZGVzY2VuZGluZycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGhlYWRlckNlbGwucXVlcnlTZWxlY3RvcignLmUtYXNjZW5kaW5nJykgPyAnYXNjZW5kaW5nJyA6ICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdyb3Vwc29ydCBlLWljb25zICcgKyAoJ2UtJyArIGRpcmVjdGlvbiArICcgZS1pY29uLScgKyBkaXJlY3Rpb24pLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdzb3J0IHRoZSBncm91cGVkIGNvbHVtbicgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdW5ncm91cGJ1dHRvbiBlLWljb25zIGUtaWNvbi1oaWRlJywgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdVbkdyb3VwJyksIHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICd1bmdyb3VwIHRoZSBncm91cGVkIGNvbHVtbicgfSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VW5ncm91cEJ1dHRvbiA/ICcnIDogJ2Rpc3BsYXk6bm9uZSdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGdyb3VwZWRDb2x1bW4uYXBwZW5kQ2hpbGQoY2hpbGREaXYpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGdyb3VwZWRDb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVmcmVzaFRvZ2dsZUJ0biA9IGZ1bmN0aW9uIChpc1JlbW92ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsZGl2JykpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoZWFkZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGhlYWRlcnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWVtcHR5Y2VsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGhlYWRlcnNbaV0uZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51IHx8ICh0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSAmJiAhY29sdW1uLnNob3dDb2x1bW5NZW51KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdycHRvZ2dsZWJ0bicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShoZWFkZXJzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdycHRvZ2dsZWJ0bicpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2ldLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JwdG9nZ2xlYnRuIGUtaWNvbnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uLmZpZWxkKSA+IC0xID8gJ2UtdG9nZ2xldW5ncm91cCBlLWljb24tdW5ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnZS10b2dnbGVncm91cCBlLWljb24tZ3JvdXAnKSwgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dyb3VwIGJ1dHRvbicgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlQ29sRnJvbUdyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRHSGVhZGVyQ2VsbChmaWVsZCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSA+IC0xID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbE5hbWUsIHJlcXVlc3RUeXBlOiAnZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0Ryb3BBcmVhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSA/IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJycgOiB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93R3JvdXBlZENvbHVtbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwZWRDb2x1bW4odGhpcy5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1VuZ3JvdXBCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VW5ncm91cEJ1dHRvbiwgJ2UtdW5ncm91cGJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dUb2dnbGVCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uLCAnZS10b2dnbGVncm91cGJ1dHRvbiAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlZnJlc2hIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwZWRDb2x1bW4gPSBmdW5jdGlvbiAoaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZCh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1uc1tpXSkudmlzaWJsZSA9IGlzVmlzaWJsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkgPSBmdW5jdGlvbiAoaXNWaXNpYmxlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWUpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ0hlYWRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdIZWFkZXJbaV0uc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckdyb3VwaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bih0cnVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jbGVhckdyb3VwaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2xzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JvdXAnO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBnQ29scyA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5hbGxvd1NvcnRpbmcgJiYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgW10pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0bnVtYmVyJywgaW5uZXJIVE1MOiAoaSArIDEpLnRvU3RyaW5nKCkgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkgJiYgdGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHNvcnQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZGlyZWN0aW9uID09PSAnYXNjZW5kaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihnQ29sc1tpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZ0NvbHNbaV0pLnNldEF0dHJpYnV0ZSgnYXJpYS1ncm91cGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdldEdIZWFkZXJDZWxsID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZWotbWFwcGluZ25hbWU9JyArIGZpZWxkICsgJ10nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2VqLW1hcHBpbmduYW1lPScgKyBmaWVsZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXA7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkdyb3VwID0gR3JvdXA7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qc1xuLy8gbW9kdWxlIGlkID0gNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2dyaWRcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZ3JpZF8xLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEsIHJvd18xLCBjZWxsXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsUm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsUm93KHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RkJykpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLnRvb2dsZUV4cGFuZGNvbGxhcHNlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSAncGFyZW50RGV0YWlscyc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3dleHBhbmQnKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICB2YXIgdWlkXzEgPSB0ci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRSb3cgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuW3RyLnJvd0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ3JlY29yZHMnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YVtrZXldIDogZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VycmVudFZpZXdEYXRhW3RyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxjZWxsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhUm93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzOiBbbmV3IGNlbGxfMS5DZWxsKHsgY2VsbFR5cGU6IGVudW1fMS5DZWxsVHlwZS5JbmRlbnQgfSksIG5ldyBjZWxsXzEuQ2VsbCh7IGlzRGF0YUNlbGw6IHRydWUsIHZpc2libGU6IHRydWUgfSldXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMudW5zaGlmdChuZXcgY2VsbF8xLkNlbGwoeyBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLkluZGVudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxpbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZGV0YWlsQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkZXRhaWxSb3csIHRyLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKGRldGFpbENlbGwsIGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKShkYXRhLCBnT2JqLCAnZGV0YWlsVGVtcGxhdGUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmNoaWxkR3JpZFtwYXJlbnRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDogZ09iai5lbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQcmltYXJ5S2V5czogZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZDogZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleUZpZWxkVmFsdWU6IGRhdGFbZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSb3dEYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IG5ldyBncmlkXzEuR3JpZChnT2JqLmNoaWxkR3JpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBncmlkLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmplY3RlZE1vZHVlcyA9IGdPYmouZ2V0SW5qZWN0ZWRNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVzIHx8IG1vZHVsZXMubGVuZ3RoICE9PSBpbmplY3RlZE1vZHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZXRJbmplY3RlZE1vZHVsZXMoaW5qZWN0ZWRNb2R1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdjaGlsZCcgKyB1dGlsXzEucGFyZW50cyh0ciwgJ2UtZ3JpZCcpLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnX2dyaWQnICsgdHIucm93SW5kZXggKyB1dGlsXzEuZ2V0VWlkKCcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuYXBwZW5kQ2hpbGQoZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuYXBwZW5kVG8oZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsUm93LmFwcGVuZENoaWxkKGRldGFpbENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZGV0YWlsUm93LCB0ci5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4XzE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkuc29tZShmdW5jdGlvbiAociwgckluZGV4KSB7IGlkeF8xID0gckluZGV4OyByZXR1cm4gci51aWQgPT09IHVpZF8xOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Um93cygpLnNwbGljZSh0ci5yb3dJbmRleCArIDEsIDAsIGRldGFpbFJvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkuc3BsaWNlKGlkeF8xICsgMSwgMCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZGV0YWlsRGF0YUJvdW5kLCB7IGRldGFpbEVsZW1lbnQ6IGRldGFpbENlbGwsIGRhdGE6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuZGV0YWlsRGF0YUJvdW5kLCB7IHJvd3M6IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1kZXRhaWxyb3dleHBhbmQnXSwgWydlLWRldGFpbHJvd2NvbGxhcHNlJ10pO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQsIFsnZS1kdGRpYWdvbmFsZG93bicsICdlLWljb24tZ2Rvd25hcnJvdyddLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0YXJnZXQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddLCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10pO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQsIFsnZS1kdGRpYWdvbmFscmlnaHQnLCAnZS1pY29uLWdyaWdodGFycm93J10sIFsnZS1kdGRpYWdvbmFsZG93bicsICdlLWljb24tZ2Rvd25hcnJvdyddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0YXJnZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuaXNEZXRhaWxSb3cgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICByZXR1cm4gcm93ICYmIHJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldFREZnJvbUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRyICYmIHRyLnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2NvbGxhcHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vZ2xlRXhwYW5kY29sbGFwc2UodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZ2V0VERmcm9tSW5kZXgodGFyZ2V0LCAnLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jb2xsYXBzZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UoZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlID0gZnVuY3Rpb24gKGlzRXhwYW5kKSB7XG4gICAgICAgICAgICB2YXIgdGQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRkID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3djb2xsYXBzZSwgLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgaXNFeHBhbmQgPyB0aGlzLmV4cGFuZCh0ZCkgOiB0aGlzLmNvbGxhcHNlKHRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRG93bkFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdPYmouYWxsb3dTZWxlY3Rpb24gPyBnT2JqLmdldFNlbGVjdGVkUm93SW5kZXhlcygpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUm93ID0gZ09iai5nZXREYXRhUm93cygpW3NlbGVjdGVkW3NlbGVjdGVkLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IGRhdGFSb3cucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5hY3Rpb24gPT09ICdhbHREb3duQXJyb3cnID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmZvY3VzLmdldEZvY3VzZWRFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vZ2xlRXhwYW5kY29sbGFwc2UoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2RldGFpbFJvdyc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRldGFpbFJvdyA9IERldGFpbFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX25hdmlnYXRpb25zXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUb29sYmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVG9vbGJhcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IFsnYWRkJywgJ2VkaXQnLCAndXBkYXRlJywgJ2RlbGV0ZScsICdjYW5jZWwnLCAncHJpbnQnLCAnc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uY2hvb3NlcicsICdwZGZleHBvcnQnLCAnZXhjZWxleHBvcnQnLCAnY3N2ZXhwb3J0JywgJ3dvcmRleHBvcnQnXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkSUQgPSBwYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB2YXIgcHJlSXRlbXMgPSBbJ2FkZCcsICdlZGl0JywgJ3VwZGF0ZScsICdkZWxldGUnLCAnY2FuY2VsJywgJ3ByaW50JyxcbiAgICAgICAgICAgICAgICAncGRmZXhwb3J0JywgJ2V4Y2VsZXhwb3J0JywgJ3dvcmRleHBvcnQnLCAnY3N2ZXhwb3J0J107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByZUl0ZW1zXzEgPSBwcmVJdGVtczsgX2kgPCBwcmVJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcHJlSXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsZU5hbWUgPSBpdGVtWzBdLnRvVXBwZXJDYXNlKCkgKyBpdGVtLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyBpdGVtLCBwcmVmaXhJY29uOiAnZS0nICsgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpLCB0b29sdGlwVGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLnNlYXJjaCA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnX3NlYXJjaCcsIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImUtc2VhcmNoXCIgcm9sZT1cInNlYXJjaFwiID5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hidXR0b25cIiBjbGFzcz1cImUtc2VhcmNoZmluZCBlLWljb25zXCIgdGFiaW5kZXg9XCItMVwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD0gXCJzZWFyY2hcIj48L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhclwiIGFyaWEtbXVsdGlsaW5lPSBcImZhbHNlXCIgdHlwZT1cInNlYXJjaFwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nICsgdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSArICc+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8L2lucHV0PjwvZGl2PicsIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpLCBhbGlnbjogJ3JpZ2h0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLmNvbHVtbmNob29zZXIgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgJ2NvbHVtbmNob29zZXInLCBjc3NDbGFzczogJ2UtY2MgZS1jY2RpdiBlLWNjLXRvb2xiYXInLCBzdWZmaXhJY29uOiAnZS0nICsgJ2NvbHVtbmNob29zZXItYnRuJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQ29sdW1ucycsIHRvb2x0aXBUZXh0OiAnY29sdW1ucycsIGFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhci5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXIuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy50b29sYmFyID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLlRvb2xiYXIoe1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICAgICAgICAgICAgICBjbGlja2VkOiB0aGlzLnRvb2xiYXJDbGlja0hhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbmFibGVQZXJzaXN0ZW5jZTogdGhpcy5wYXJlbnQuZW5hYmxlUGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHZpZXdTdHIgPSAndmlld0NvbnRhaW5lclJlZic7XG4gICAgICAgICAgICB2YXIgcmVnaXN0ZXJUZW1wID0gJ3JlZ2lzdGVyZWRUZW1wbGF0ZSc7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRbdmlld1N0cl0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJbcmVnaXN0ZXJUZW1wXSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhclt2aWV3U3RyXSA9IHRoaXMucGFyZW50W3ZpZXdTdHJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLmdyaWRJRCArICdfdG9vbGJhckl0ZW1zJyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4odGhpcy5lbGVtZW50LCB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpKHt9LCB0aGlzLnBhcmVudCwgJ3Rvb2xiYXJUZW1wbGF0ZScpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hiYXInKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoQm94KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hUb29sYmFySXRlbXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbmFibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVkaXQgPSBnT2JqLmVkaXRTZXR0aW5ncztcbiAgICAgICAgICAgIGVkaXQuYWxsb3dBZGRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKSA6IGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dFZGl0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2VkaXQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dEZWxldGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCAmJiAoZWRpdC5hbGxvd0FkZGluZyB8fCBlZGl0LmFsbG93RWRpdGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfdXBkYXRlJywgdGhpcy5ncmlkSUQgKyAnX2NhbmNlbCddO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMgPSBbdGhpcy5ncmlkSUQgKyAnX2FkZCcsIHRoaXMuZ3JpZElEICsgJ19lZGl0JywgdGhpcy5ncmlkSUQgKyAnX2RlbGV0ZSddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmFibGVJdGVtcyhlbmFibGVJdGVtcywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGRpc2FibGVJdGVtcywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRvb2xiYXJJdGVtcyA9IHRoaXMucGFyZW50LnRvb2xiYXIgfHwgW107XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRvb2xiYXJJdGVtc18xID0gdG9vbGJhckl0ZW1zOyBfaSA8IHRvb2xiYXJJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdG9vbGJhckl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2godGhpcy5nZXRJdGVtT2JqZWN0KHRoaXMuaXRlbXNbaXRlbV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh0aGlzLmdldEl0ZW1PYmplY3QoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbShpdGVtKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGl0ZW1PYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU9iamVjdC50ZXh0XTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtID8gZWoyX2Jhc2VfMS5leHRlbmQoaXRlbSwgaXRlbSwgaXRlbU9iamVjdCkgOiBpdGVtT2JqZWN0O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW1OYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU5hbWVdIHx8IHsgdGV4dDogaXRlbU5hbWUsIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW1OYW1lIH07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVuYWJsZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc0VuYWJsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmVuYWJsZUl0ZW1zKGVsZW1lbnQucGFyZW50RWxlbWVudCwgaXNFbmFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudG9vbGJhckNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdJRCA9IHRoaXMuZ3JpZElEO1xuICAgICAgICAgICAgaWYgKCFhcmdzLml0ZW0pIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChhcmdzLml0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfcHJpbnQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnByaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19lZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX3VwZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2FkZCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWRkUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19kZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfc2VhcmNoJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQuaWQgPT09IGdJRCArICdfc2VhcmNoYnV0dG9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY29sdW1uY2hvb3Nlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRhckVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmNyZWF0ZUNvbHVtbmNob29zZXIoeCwgeSwgdGFyZ2V0RWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy50b29sYmFyQ2xpY2ssIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSB8fCAhdGhpcy5wYXJlbnQudG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VhcmNoKHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVwZGF0ZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEVsZW1lbnQudmFsdWUgPSB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLndpcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVuV2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMudXBkYXRlU2VhcmNoQm94LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy50b29sYmFyUmVmcmVzaCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndG9vbGJhcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUb29sYmFyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ub29sYmFyID0gVG9vbGJhcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvc3VtbWFyeS1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlbnVtXzEsIGNvbnN0YW50XzEsIGZvb3Rlcl9yZW5kZXJlcl8xLCBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhZ2dyZWdhdGUnO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmluaXRpYXRlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjZWxsRmFjID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMS5TdW1tYXJ5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgW2VudW1fMS5DZWxsVHlwZS5TdW1tYXJ5LCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnldLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VsbEZhYy5hZGRDZWxsUmVuZGVyZXIodHlwZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyID0gbmV3IGZvb3Rlcl9yZW5kZXJlcl8xLkZvb3RlclJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yLnJlZ2lzdGVyKCdmb290ZXJSZW5kZXJlcicsIHRoaXMuZm9vdGVyUmVuZGVyZXIpO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXBhcmVTdW1tYXJ5SW5mbygpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCwgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucHJlcGFyZVN1bW1hcnlJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHN1bW1hcnlJdGVyYXRvcih0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLCBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFDb2x1bW4gPSBfdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW4uZmllbGQpIHx8IHt9O1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZGF0YUNvbHVtbi50eXBlO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5mb3JtYXQgPSBfdGhpcy5nZXRGb3JtYXRGcm9tVHlwZShjb2x1bW4uZm9ybWF0LCB0eXBlKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNvbHVtbk5hbWUgPSBjb2x1bW4uY29sdW1uTmFtZSB8fCBjb2x1bW4uZmllbGQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRGb3JtYXRGcm9tVHlwZSA9IGZ1bmN0aW9uIChmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHR5cGUpIHx8IHR5cGVvZiBmb3JtYXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmo7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IGZvcm1hdDogZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6IHR5cGUsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlclJlbmRlcmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVSZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHZhciBjTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBnTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZ01vZGVsLmdldERhdGEoKS5sZW5ndGggIT09IDAgfHwgIWNNb2RlbC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5tb2RlbENoYW5nZWQsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5pbml0aWFsRW5kLCB0aGlzLmluaXRpYXRlUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZSA9IEFnZ3JlZ2F0ZTtcbiAgICBmdW5jdGlvbiBzdW1tYXJ5SXRlcmF0b3IoYWdncmVnYXRlcywgY2FsbGJhY2spIHtcbiAgICAgICAgYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNvbHVtbiwgcm93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5zdW1tYXJ5SXRlcmF0b3IgPSBzdW1tYXJ5SXRlcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBjb25zdGFudF8xLCBjb250ZW50X3JlbmRlcmVyXzEsIHJvd19yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGb290ZXJSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGb290ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRm9vdGVyUmVuZGVyZXIoZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGdyaWRNb2R1bGUsIHNlcnZpY2VMb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYWdncmVnYXRlcyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gZ3JpZE1vZHVsZTtcbiAgICAgICAgICAgIF90aGlzLmxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLm1vZGVsR2VuZXJhdG9yID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRmb290ZXInIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGlubmVyRGl2LnN0eWxlLm92ZXJmbG93WCA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRQYWdlcigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZShkaXYsIHRoaXMucGFyZW50LmdldFBhZ2VyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBpbm5lckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpO1xuICAgICAgICAgICAgdmFyIHRGb290ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Zm9vdCcpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodEZvb3QpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdW1tYXJ5Q29udGVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgQXJyYXkgPyB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogdGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgdmFyIHN1bW1hcmllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGR1bW1pZXMgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoaW5wdXQsIGUgfHwgdGhpcy5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciByb3dyZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLmxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHJvd3JlbmRlcmVyLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RSJywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnlyb3cnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JvdyA9IDAsIGxlbiA9IHN1bW1hcmllcy5sZW5ndGg7IHNyb3cgPCBsZW47IHNyb3crKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzW3Nyb3ddO1xuICAgICAgICAgICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdHIgPSByb3dyZW5kZXJlci5yZW5kZXIocm93LCBkdW1taWVzKTtcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkudEZvb3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgdGhpcy5hZ2dyZWdhdGVzID0gZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnRGb290LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdW1tYXJ5Q29udGVudChlKTtcbiAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hDb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkucmVwbGFjZUNoaWxkKGhlYWRlckNvbCwgdGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoaGVhZGVyQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLm9uV2lkdGhDaGFuZ2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkcmVuW2FyZ3MuaW5kZXhdLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KGFyZ3Mud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcgJiYgYXJncy5tb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGb290ZXJUYWJsZVdpZHRoKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSB7IGxlZnQ6IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnNjcm9sbExlZnQgfTsgfVxuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuc2Nyb2xsTGVmdCA9IGUubGVmdDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2xHcm91cFJlZnJlc2gsIHRoaXMucmVmcmVzaENvbCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuc2Nyb2xsLCB0aGlzLm9uU2Nyb2xsLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5yZWZyZXNoQ29sKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLnNjcm9sbCwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVGb290ZXJUYWJsZVdpZHRoID0gZnVuY3Rpb24gKHRGb290KSB7XG4gICAgICAgICAgICB2YXIgdEhlYWQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgaWYgKHRIZWFkICYmIHRGb290KSB7XG4gICAgICAgICAgICAgICAgdEZvb3Quc3R5bGUud2lkdGggPSB0SGVhZC5zdHlsZS53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZvb3RlclJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLkZvb3RlclJlbmRlcmVyID0gRm9vdGVyUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3VtbWFyeUNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdW1tYXJ5Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3VtbWFyeUNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIGtleSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50eXBlKSA/IGNvbHVtbi5maWVsZCArICcgLSAnICsgKGNvbHVtbi50eXBlKSA6IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdID8gZGF0YVtjb2x1bW4uY29sdW1uTmFtZV1ba2V5XSA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoIShjb2x1bW4uZm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRlbXBPYmogPSBjb2x1bW4uZ2V0VGVtcGxhdGUoY2VsbC5jZWxsVHlwZSk7XG4gICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZSwgdGVtcE9iai5mbihkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXSwgdGhpcy5wYXJlbnQsIHRlbXBPYmoucHJvcGVydHkpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5TdW1tYXJ5Q2VsbFJlbmRlcmVyID0gU3VtbWFyeUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL2lubGluZS1lZGl0XCIsIFwiLi9iYXRjaC1lZGl0XCIsIFwiLi9kaWFsb2ctZWRpdFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vcmVuZGVyZXIvZGF0ZXBpY2tlci1lZGl0LWNlbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBldmVudHMsIGVkaXRfcmVuZGVyZXJfMSwgYm9vbGVhbl9lZGl0X2NlbGxfMSwgZHJvcGRvd25fZWRpdF9jZWxsXzEsIG51bWVyaWNfZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGlubGluZV9lZGl0XzEsIGJhdGNoX2VkaXRfMSwgZGlhbG9nX2VkaXRfMSwgZWoyX3BvcHVwc18xLCB1dGlsXzEsIGVqMl9pbnB1dHNfMSwgZGF0ZXBpY2tlcl9lZGl0X2NlbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2Ryb3Bkb3duZWRpdCc6IGRyb3Bkb3duX2VkaXRfY2VsbF8xLkRyb3BEb3duRWRpdENlbGwsICdudW1lcmljZWRpdCc6IG51bWVyaWNfZWRpdF9jZWxsXzEuTnVtZXJpY0VkaXRDZWxsLFxuICAgICAgICAgICAgICAgICdkYXRlcGlja2VyZWRpdCc6IGRhdGVwaWNrZXJfZWRpdF9jZWxsXzEuRGF0ZVBpY2tlckVkaXRDZWxsLCAnYm9vbGVhbmVkaXQnOiBib29sZWFuX2VkaXRfY2VsbF8xLkJvb2xlYW5FZGl0Q2VsbCwgJ2RlZmF1bHRlZGl0JzogZGVmYXVsdF9lZGl0X2NlbGxfMS5EZWZhdWx0RWRpdENlbGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0geyAnaW5saW5lJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnbm9ybWFsJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnYmF0Y2gnOiBiYXRjaF9lZGl0XzEuQmF0Y2hFZGl0LCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfMS5EaWFsb2dFZGl0IH07XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRPYmooKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQWxlcnREbGcoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29uZmlybURsZygpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUNvbFR5cGVPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY29sLmVkaXQgPSBlajJfYmFzZV8yLmV4dGVuZChuZXcgdGhpcy5lZGl0Q2VsbFR5cGVbY29sLmVkaXRUeXBlICYmIHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZV0gP1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdFR5cGUgOiAnZGVmYXVsdGVkaXQnXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciksIGNvbC5lZGl0IHx8IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZWRpdCc7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dBZGRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0RlbGV0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dFZGl0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCBnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbEVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0T2JqKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUVkaXRPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgZWRpdF9yZW5kZXJlcl8xLkVkaXRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sVHlwZU9iaigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudGFwRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlckFnZW50KCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRvdWJsZVRhcCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIC9pcGhvbmV8aXBvZHxpcGFkLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCBnT2JqLmlzRWRpdCB8fCBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdFZGl0T3BlcmF0aW9uQWxlcnQnLCB0aGlzLmFsZXJ0RE9iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHIuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnN0YXJ0RWRpdCh0cik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSgnc3RhcnQtZWRpdCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZ1xuICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdDYW5jZWxFZGl0JywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSgnY2xvc2UtZWRpdCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoJ3N0YXJ0LWFkZCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgfHwgZ09iai5zZWxlY3RlZFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0RlbGV0ZU9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NvbmZpcm1EZWxldGUnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQobnVsbCwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKV0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlQ29uZmlybScsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlQ2VsbChyb3dJbmRleCwgZmllbGQsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlUm93KGluZGV4LCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdENlbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZWRpdENlbGwoaW5kZXgsIGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdEZvcm1WYWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRNb2R1bGUuZ2V0QmF0Y2hDaGFuZ2VzID8gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcygpIDoge307XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0Q2VsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5nZXRDdXJyZW50RWRpdGVkRGF0YSh0aGlzLmZvcm1PYmouZWxlbWVudCwge30pO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtPYmplY3Qua2V5cyhvYmopWzBdXTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc2F2ZUNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc2F2ZUNlbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAoY29udGVudCwgb2JqKSB7XG4gICAgICAgICAgICBvYmouY29udGVudCA9ICc8ZGl2PicgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoY29udGVudCkgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIG9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgb2JqLnNob3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0VmFsdWVGcm9tVHlwZSA9IGZ1bmN0aW9uIChjb2wsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gdmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSA/IHBhcnNlRmxvYXQodmFsdWUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1RydWUnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSAhPT0gJ2RhdGVwaWNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95VG9vbFRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JpZGVycm9yJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVDb25maXJtRGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5kbGdPay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnQ2FuY2VsLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0JywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNyZWF0ZUFsZXJ0RGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5hbGVydENsaWNrLmJpbmQodGhpcyksIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnT0tCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLWZsYXQnLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0QWxlcnQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWxlcnRDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnV2lkZ2V0ID0gZnVuY3Rpb24gKGJ0bk9wdGlvbnMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBuYW1lIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgc2hvd0Nsb3NlSWNvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNNb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzMyMHB4JyxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gYnRuT3B0aW9ucztcbiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyhvcHRpb25zKTtcbiAgICAgICAgICAgIG9iai5hcHBlbmRUbyhkaXYpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUob2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kbGdPayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGxnLWNvbnRlbnQnKS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ29uZmlybURlbGV0ZScpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxFZGl0Jyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0JhdGNoU2F2ZUNvbmZpcm0nKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVMb3N0Q2hhbmdlcycpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ0NhbmNlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmF1dG9Db2wsIHRoaXMudXBkYXRlQ29sVHlwZU9iaiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXAsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3lGb3JtLCB0aGlzLmRlc3Ryb3lGb3JtLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uQmVnaW5GdW5jdGlvbiA9IHRoaXMub25BY3Rpb25CZWdpbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uID0gdGhpcy5hY3Rpb25Db21wbGV0ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMuYWN0aW9uQmVnaW5GdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLndpcmVFdmVudHMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmopO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy50b29sdGlwRGVzdHJveSwgdGhpcy5kZXN0cm95VG9vbFRpcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLmFjdGlvbkJlZ2luRnVuY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnVud2lyZUV2ZW50cyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gWydhZGQnLCAnYmVnaW5FZGl0JywgJ3NhdmUnLCAnZGVsZXRlJywgJ2NhbmNlbCddO1xuICAgICAgICAgICAgaWYgKGFjdGlvbnMuaW5kZXhPZihlLnJlcXVlc3RUeXBlKSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0Q3VycmVudEVkaXRlZERhdGEgPSBmdW5jdGlvbiAoZm9ybSwgZWRpdGVkRGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbnB1dHMgPSBbXS5zbGljZS5jYWxsKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZmllbGQnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoaW5wdXRzW2ldLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoY29sICYmIGNvbC5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LnJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8yLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGdPYmouZWRpdE1vZHVsZS5nZXRWYWx1ZUZyb21UeXBlKGNvbCwgY29sLmVkaXQucmVhZChpbnB1dHNbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gaW5wdXRzW2ldLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRWYWx1ZShjb2wuZmllbGQsIHZhbHVlLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWRpdGVkRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgZS5yZXF1ZXN0VHlwZSAhPT0gJ3NhdmUnICYmIHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVdpZGdldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveVdpZGdldHMgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgY29scyA9IGNvbHMgPyBjb2xzIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzEgPSBjb2xzOyBfaSA8IGNvbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXQuZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95Rm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2xUaXAoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmogJiYgIXRoaXMuZm9ybU9iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybU9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lUb29sVGlwKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lGb3JtKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHZhciBlbGVtID0gdGhpcy5kaWFsb2dPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgZWxlbSA9IHRoaXMuYWxlcnRET2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJy5lLXVuYm91bmRjZWxsZGl2JykgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VzY2FwZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5wcmV2ZW50QmF0Y2ggPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50T2JqID0gYXJncztcbiAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlTG9zdENoYW5nZXMnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmV4ZWN1dGVBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRPYmouaGFuZGxlci5jYWxsKHRoaXMucHJldmVudE9iai5pbnN0YW5jZSwgdGhpcy5wcmV2ZW50T2JqLmFyZzEsIHRoaXMucHJldmVudE9iai5hcmcyLCB0aGlzLnByZXZlbnRPYmouYXJnMywgdGhpcy5wcmV2ZW50T2JqLmFyZzQsIHRoaXMucHJldmVudE9iai5hcmc1LCB0aGlzLnByZXZlbnRPYmouYXJnNiwgdGhpcy5wcmV2ZW50T2JqLmFyZzcpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hcHBseUZvcm1WYWxpZGF0aW9uID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKTtcbiAgICAgICAgICAgIHZhciBydWxlcyA9IHt9O1xuICAgICAgICAgICAgY29scyA9IGNvbHMgPyBjb2xzIDogZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzIgPSBjb2xzOyBfaSA8IGNvbHNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18yW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZhbGlkYXRpb25SdWxlcyAmJiBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJyMnICsgZ09iai5lbGVtZW50LmlkICsgY29sLmZpZWxkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZXNbY29sLmZpZWxkXSA9IGNvbC52YWxpZGF0aW9uUnVsZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqID0gbmV3IGVqMl9pbnB1dHNfMS5Gb3JtVmFsaWRhdG9yKGZvcm0sIHtcbiAgICAgICAgICAgICAgICBydWxlczogcnVsZXMsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkNvbXBsZXRlOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0aW9uQ29tcGxldGUoYXJncyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjdXN0b21QbGFjZW1lbnQ6IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbEVycm9yUGxhY2VtZW50KGlucHV0RWxlbWVudCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS52YWxFcnJvclBsYWNlbWVudCA9IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gZXJyb3IuZ2V0QXR0cmlidXRlKCdmb3InKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicpO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gcGFyZW50RWxlbS5xdWVyeVNlbGVjdG9yKCcjJyArIGlkICsgJ19FcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmICghZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRvb2x0aXAoaW5wdXRFbGVtZW50LCBlcnJvciwgaWQsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvcignLmUtdGlwLWNvbnRlbnQnKS5pbm5lckhUTUwgPSBlcnJvci5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS52YWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfZGlhbG9nRWRpdF93cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBwYXJlbnRFbGVtLnF1ZXJ5U2VsZWN0b3IoJyMnICsgYXJncy5pbnB1dE5hbWUgKyAnX0Vycm9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3RhdHVzID09PSAnZmFpbHVyZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVUb29sdGlwID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVycm9yLCBuYW1lLCBkaXNwbGF5KSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicpLnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZy1jb250ZW50Jyk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0gdGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgaW5wdXRDbGllbnQgPSB1dGlsXzEucGFyZW50c1VudGlsKGVsZW1lbnQsICdlLXJvd2NlbGwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXRvb2x0aXAtd3JhcCBlLXBvcHVwIGUtZ3JpZGVycm9yJyxcbiAgICAgICAgICAgICAgICBpZDogbmFtZSArICdfRXJyb3InLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ2Rpc3BsYXk6JyArIGRpc3BsYXkgKyAnO3RvcDonICtcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0Q2xpZW50LmJvdHRvbSAtIGNsaWVudC50b3AgKyB0YWJsZS5zY3JvbGxUb3AgKyA5KSArICdweDtsZWZ0OicgK1xuICAgICAgICAgICAgICAgICAgICAoaW5wdXRDbGllbnQubGVmdCAtIGNsaWVudC5sZWZ0ICsgdGFibGUuc2Nyb2xsTGVmdCArIGlucHV0Q2xpZW50LndpZHRoIC8gMikgKyAncHg7J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXRpcC1jb250ZW50JyB9KTtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZXJyb3IpO1xuICAgICAgICAgICAgdmFyIGFycm93ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtYXJyb3ctdGlwIGUtdGlwLXRvcCcgfSk7XG4gICAgICAgICAgICBhcnJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1hcnJvdy10aXAtb3V0ZXIgZS10aXAtdG9wJyB9KSk7XG4gICAgICAgICAgICBhcnJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1hcnJvdy10aXAtaW5uZXIgZS10aXAtdG9wJyB9KSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoYXJyb3cpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KGRpdi5zdHlsZS5sZWZ0LCAxMCkgLSBkaXYub2Zmc2V0V2lkdGggLyAyKSArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FZGl0ID0gRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2VkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIE51bWVyaWNFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmllbGQnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuY29sdW1uLmZpZWxkLCBuYW1lOiBhcmdzLmNvbHVtbi5maWVsZCwgJ2UtbWFwcGluZ3VpZCc6IGFyZ3MuY29sdW1uLnVpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLmZvY3VzT3V0KCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9pbnB1dHNfMS5OdW1lcmljVGV4dEJveChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoYXJncy5yb3dEYXRhW2NvbC5maWVsZF0pLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICdOZXZlcicgOiAnQWx3YXlzJyxcbiAgICAgICAgICAgIH0sIGNvbC5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBjb2wuZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmogJiYgIXRoaXMub2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0VkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljRWRpdENlbGwgPSBOdW1lcmljRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vYmF0Y2gtZWRpdC1yZW5kZXJlclwiLCBcIi4vZGlhbG9nLWVkaXQtcmVuZGVyZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBiYXRjaF9lZGl0X3JlbmRlcmVyXzEsIGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRWRpdFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0ge1xuICAgICAgICAgICAgICAgICdpbmxpbmUnOiBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLklubGluZUVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgJ25vcm1hbCc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlciwgJ2JhdGNoJzogYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLkJhdGNoRWRpdFJlbmRlciwgJ2RpYWxvZyc6IGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEuRGlhbG9nRWRpdFJlbmRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyB0aGlzLmVkaXRUeXBlW3RoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlXShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmNvbnZlcnRXaWRnZXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpc0ZvY3VzZWQ7XG4gICAgICAgICAgICB2YXIgY2VsbDtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgPyBnT2JqLmdldENvbHVtbnMoKSA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUgfHwgY29sLmNvbW1hbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIGNvbC51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQud3JpdGU7XG4gICAgICAgICAgICAgICAgY29sLmVkaXQud3JpdGUoe1xuICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiBhcmdzLnJvd0RhdGEsIGVsZW1lbnQ6IGNlbGwsIGNvbHVtbjogY29sLCByZXF1ZXN0VHlwZTogYXJncy5yZXF1ZXN0VHlwZSwgcm93OiBhcmdzLnJvd1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNGb2N1c2VkICYmICFjZWxsLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbWVudChjZWxsLCBhcmdzLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZm9jdXNFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW0sIHR5cGUpIHtcbiAgICAgICAgICAgIHZhciBjaGtCb3ggPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXQtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjaGtCb3gpKSB7XG4gICAgICAgICAgICAgICAgY2hrQm94Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWZvY3VzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLm9uQ2xpY2soeyB0YXJnZXQ6IGVqMl9iYXNlXzEuY2xvc2VzdChlbGVtLCAndGQnKSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnZS1kZWZhdWx0Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRTZWxlY3Rpb25SYW5nZShlbGVtLnZhbHVlLmxlbmd0aCwgZWxlbS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnID8gZ09iai5nZXRDb2x1bW5zKCkgOiBbZ09iai5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuY29sdW1uTmFtZSldO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sLmNvbW1hbmRzIHx8IGNvbC5jb21tYW5kc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXJGYWN0ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyID0gY2VsbFJlbmRlcmVyRmFjdC5nZXRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkNvbW1hbmRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBtb2RlbC5nZW5lcmF0ZVJvd3MoYXJncy5yb3dEYXRhKVswXS5jZWxscztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gY2VsbFJlbmRlcmVyLnJlbmRlcihjZWxsc1tpXSwgYXJncy5yb3dEYXRhLCB7ICdpbmRleCc6IGFyZ3Mucm93ID8gYXJncy5yb3cuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JykgOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gdGQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3RleHRBbGlnbicsIHRkLmdldEF0dHJpYnV0ZSgndGV4dEFsaWduJykpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2wudWlkXSA9IGRpdjtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIHZhciB0QXJncyA9IHsgY29sdW1uOiBjb2wsIHZhbHVlOiB2YWx1ZSwgdHlwZTogYXJncy5yZXF1ZXN0VHlwZSwgZGF0YTogYXJncy5yb3dEYXRhIH07XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZWRpdC5jcmVhdGU7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlucHV0ID0gY29sLmVkaXQuY3JlYXRlKHRBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlucHV0LnRhZ05hbWUgIT09ICdpbnB1dCcgJiYgaW5wdXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlzSW5wdXQgPyBpbnB1dC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIDogaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY29sLmZpZWxkLCAnZS1tYXBwaW5ndWlkJzogY29sLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGdPYmouZWxlbWVudC5pZCArIGNvbC5maWVsZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChpbnB1dCwgWydlLWlucHV0JywgJ2UtZmllbGQnXSwgW10pO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudGV4dEFsaWduID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2UtcmFsaWduJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoY29sLmlzUHJpbWFyeUtleSB8fCBjb2wuaXNJZGVudGl0eSkgJiYgYXJncy5yZXF1ZXN0VHlwZSA9PT0gJ2JlZ2luRWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2NvbC51aWRdID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FZGl0UmVuZGVyID0gRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIElubGluZUVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbmxpbmVFZGl0UmVuZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgYXJncy5yb3cgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLXJvdyBlLWFkZGVkcm93JyB9KTtcbiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZShhcmdzLnJvdywgdGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBhcmdzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0ZEVsZW1lbnQgPSBbXS5zbGljZS5jYWxsKGFyZ3Mucm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLmUtcm93Y2VsbCcpKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgYXJncy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgdHJ1ZSwgdGRFbGVtZW50KSk7XG4gICAgICAgICAgICBhcmdzLnJvdy5jbGFzc0xpc3QuYWRkKCdlLWVkaXRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgaXNFZGl0LCB0ZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICB2YXIgaXNEZXRhaWwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmNoaWxkR3JpZCkgPyAxIDogMDtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRkID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWVkaXRjZWxsIGUtbm9ybWFsZWRpdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgY29sc3BhbjogKGdPYmouZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggKyBnTGVuICsgaXNEZXRhaWwpLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZSBlLWlubGluZS1lZGl0JywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICcwLjI1JyB9IH0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBpZiAoaXNEZXRhaWwpIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3djb2xsYXBzZScgfSksIHRyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBnTGVuKSB7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG0gPSAwO1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoKGlzRWRpdCAmJiBtIDwgdGRFbGVtZW50Lmxlbmd0aCAmJiBpIDwgZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB8fCBpIDwgZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBpc0VkaXQgPyB0ZEVsZW1lbnRbbV0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbnMoKVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkXzEgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyAoY29sLnRleHRBbGlnbiA/IGNvbC50ZXh0QWxpZ24gOiAnJyksICdjb2xzcGFuJzogc3BhbiA/IHNwYW4gOiAnJyB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0ZF8xLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbC51aWRdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGRfMS5jbGFzc0xpc3QuYWRkKCdlLWJvb2xjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29sLmNvbW1hbmRzIHx8IGNvbC5jb21tYW5kc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFt0ZF8xXSwgJ2UtdW5ib3VuZGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSA9IHNwYW4gPyBpICsgcGFyc2VJbnQoc3BhbiwgMTApIDogaSArIDE7XG4gICAgICAgICAgICAgICAgbSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXRSZW5kZXIgPSBJbmxpbmVFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2lubGluZS1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEJhdGNoRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmNlbGwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhcmdzLmNlbGwuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgYXJncykpO1xuICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkYmF0Y2hjZWxsJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10sIFtdKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGVsZW1lbnRzW2FyZ3MuY29sdW1uT2JqZWN0LnVpZF0pO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uT2JqZWN0LmVkaXRUeXBlID09PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtYm9vbGNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYXJncy5jb2x1bW5PYmplY3QuZWRpdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1pbnB1dGJveCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdFJlbmRlciA9IEJhdGNoRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX3BvcHVwc18xLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGlhbG9nRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGlhbG9nRGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLnNldExvY2FsZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZyhlbGVtZW50cywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZURpYWxvZyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVPYmooKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2coe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdGhpcy5pc0VkaXQgPyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VkaXRGb3JtVGl0bGUnKSArIGFyZ3MucHJpbWFyeUtleVZhbHVlWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sMTBuLmdldENvbnN0YW50KCdBZGRGb3JtVGl0bGUnKSwgaXNNb2RhbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSwgY3NzQ2xhc3M6ICdlLWVkaXQtZGlhbG9nJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzKSwgc2hvd0Nsb3NlSWNvbjogdHJ1ZSwgYWxsb3dEcmFnZ2luZzogdHJ1ZSwgY2xvc2U6IHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IHRydWUsIHdpZHRoOiAnMzMwcHgnLCB0YXJnZXQ6IGdPYmouZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2F2ZUJ1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSwgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpIH0gfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouYXBwZW5kVG8odGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUodGhpcy5kaWFsb2dPYmouZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmJ0bkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpLnRvTG93ZXJDYXNlKCkgPT09IGUudGFyZ2V0LmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbmRFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kZXN0cm95Rm9ybSwge30pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogdGhpcy5pc0VkaXQgPyAnZS1lZGl0ZWRyb3cnIDogJ2UtaW5zZXJ0ZWRyb3cnIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzZweCcgfSB9KTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHNbaV0udmlzaWJsZSB8fCBjb2xzW2ldLmNvbW1hbmRzIHx8IGNvbHNbaV0uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhQ2VsbCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpsZWZ0O3dpZHRoOjE5MHB4JyB9IH0pO1xuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnbGFiZWwnLCB7IGlubmVySFRNTDogY29sc1tpXS5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2xzW2ldLnVpZF0uY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZGF0YUNlbGwpO1xuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXRSZW5kZXIgPSBEaWFsb2dFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYnV0dG9uc18xLCBlajJfYmFzZV8yLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJvb2xlYW5FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJvb2xlYW5FZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3NlcyA9IFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ107XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gYXJncy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lcyA9ICdlLWZpZWxkIGUtYm9vbGNlbGwnO1xuICAgICAgICAgICAgaWYgKGNvbC50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9ICdlLWZpZWxkIGUtYm9vbGNlbGwgZS1lZGl0LWNoZWNrc2VsZWN0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywgdmFsdWU6IGFyZ3MudmFsdWUsICdlLW1hcHBpbmd1aWQnOiBjb2wudWlkLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGNvbC5maWVsZCwgbmFtZTogY29sLmZpZWxkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RDaGtCb3g7XG4gICAgICAgICAgICB2YXIgY2hrU3RhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5yb3cpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q2hrQm94ID0gYXJncy5yb3cucXVlcnlTZWxlY3RvcignLmUtZWRpdC1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0pIHtcbiAgICAgICAgICAgICAgICBjaGtTdGF0ZSA9IEpTT04ucGFyc2UoYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNlbGVjdENoa0JveCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGU7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Um93ID0gYXJncy5yb3c7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MucmVxdWVzdFR5cGUgIT09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIGNoa1N0YXRlID0gcm93ID8gcm93LmlzU2VsZWN0ZWQgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFkZFJlbW92ZUFjdGl2ZUNsYXNzZXMuYXBwbHkodm9pZCAwLCBbW10uc2xpY2UuY2FsbChhcmdzLnJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpLCBjaGtTdGF0ZV0uY29uY2F0KHRoaXMuYWN0aXZlQ2xhc3NlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2J1dHRvbnNfMS5DaGVja0JveChlajJfYmFzZV8yLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGtTdGF0ZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogIXV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IHRoaXMuY2hlY2tCb3hDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSwgYXJncy5jb2x1bW4uZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUuY2hlY2tCb3hDaGFuZ2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFJvdyAmJiB0aGlzLmVkaXRUeXBlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHZhciBhZGQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFyZ3MuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgYWRkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlsXzEuYWRkUmVtb3ZlQWN0aXZlQ2xhc3Nlcy5hcHBseSh2b2lkIDAsIFtbXS5zbGljZS5jYWxsKHRoaXMuZWRpdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpLCBhZGRdLmNvbmNhdCh0aGlzLmFjdGl2ZUNsYXNzZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRWRpdENlbGwgPSBCb29sZWFuRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSwgdXRpbF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEcm9wRG93bkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRHJvcERvd25FZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmNvbHVtbi5maWVsZCwgbmFtZTogYXJncy5jb2x1bW4uZmllbGQsIHR5cGU6ICd0ZXh0JywgJ2UtbWFwcGluZ3VpZCc6IGFyZ3MuY29sdW1uLnVpZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkRyb3BEb3duTGlzdChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSksXG4gICAgICAgICAgICAgICAgcXVlcnk6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkuc2VsZWN0KGFyZ3MuY29sdW1uLmZpZWxkKSwgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmllbGRzOiB7IHZhbHVlOiBhcmdzLmNvbHVtbi5maWVsZCB9LCB2YWx1ZTogYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCwgYWN0aW9uQ29tcGxldGU6IHRoaXMuZGRBY3Rpb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsIHBvcHVwSGVpZ2h0OiAnMjAwcHgnLFxuICAgICAgICAgICAgICAgIGZsb2F0TGFiZWxUeXBlOiBpc0lubGluZSA/ICdOZXZlcicgOiAnQWx3YXlzJywgb3BlbjogdGhpcy5kcm9wRG93bk9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIH0sIGFyZ3MuY29sdW1uLmVkaXQucGFyYW1zKSk7XG4gICAgICAgICAgICB0aGlzLm9iai5hcHBlbmRUbyhhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIGFyZ3MuY29sdW1uLmZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZEFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucmVzdWx0ID0gZS5yZXN1bHQuZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGksIHZhbHVlcykgeyByZXR1cm4gdmFsdWVzLmluZGV4T2YodmFsKSA9PT0gaTsgfSk7XG4gICAgICAgICAgICBlLnJlc3VsdC5zb3J0KCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmRyb3BEb3duT3BlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZGxnRWxlbWVudCA9IHV0aWxfMi5wYXJlbnRzVW50aWwodGhpcy5vYmouZWxlbWVudCwgJ2UtZGlhbG9nJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGxnRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGxnT2JqID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGRsZ0VsZW1lbnQuaWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgYXJncy5wb3B1cC5lbGVtZW50LnN0eWxlLnpJbmRleCA9IChkbGdPYmouekluZGV4ICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERyb3BEb3duRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRyb3BEb3duRWRpdENlbGwgPSBEcm9wRG93bkVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERlZmF1bHRFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERlZmF1bHRFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCBlLWlucHV0IGUtZGVmYXVsdGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsIHZhbHVlOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnZhbHVlKSA/IGFyZ3MudmFsdWUgOiAnJywgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGQsIHN0eWxlOiAndGV4dC1hbGlnbjonICsgY29sLnRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogYXJncy5lbGVtZW50LCBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGVmYXVsdEVkaXRDZWxsID0gRGVmYXVsdEVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKElubGluZUVkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0ID0gSW5saW5lRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTm9ybWFsRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5vcm1hbEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgJiYgIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS11bmJvdW5kY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dJbmRleCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykgPyBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApIDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0T25EYmxDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuc3RhcnRFZGl0KHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvdycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdENvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgc3dpdGNoIChlLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tib3hzZWxlY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgIXRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBlcnNpc3RzZWxlY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcHJpbWFyeUtleXMgPSBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICB2YXIgcHJpbWFyeUtleVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dJbmRleCA9IHRoaXMuZWRpdFJvd0luZGV4ID0gcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLnJvd0luZGV4XTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJpbWFyeUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5VmFsdWVzLnB1c2godGhpcy5wcmV2aW91c0RhdGFbcHJpbWFyeUtleXNbaV1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJvdzogdHIsIHByaW1hcnlLZXk6IHByaW1hcnlLZXlzLCBwcmltYXJ5S2V5VmFsdWU6IHByaW1hcnlLZXlWYWx1ZXMsIHJlcXVlc3RUeXBlOiAnYmVnaW5FZGl0JyxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgcm93SW5kZXg6IHRoaXMucm93SW5kZXgsIHR5cGU6ICdlZGl0JywgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVnaW5FZGl0LCBhcmdzKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9ICdhY3Rpb25CZWdpbic7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIGFyZ3Mucm93LmNsYXNzTGlzdC5hZGQoJ2UtZGxnZWRpdHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5pc0VkaXQgfHwgIWdPYmouZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLnByZXZpb3VzRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIGRhdGE6IGVkaXRlZERhdGEsIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCwgZm9yZWlnbktleURhdGE6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGdPYmouZWRpdE1vZHVsZS5nZXRDdXJyZW50RWRpdGVkRGF0YShnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVkaXRlZHJvdycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudXBkYXRlRGF0YSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcmdzLmFjdGlvbiA9ICdhZGQnO1xuICAgICAgICAgICAgICAgIGFyZ3Muc2VsZWN0ZWRSb3cgPSAwO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lXaWRnZXRzKCk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5kaWFsb2dEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLnN0b3BFZGl0U3RhdHVzKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2RpYWxvZycgJiYgYXJncy5hY3Rpb24gIT09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZ2VkaXRyb3cnKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZ2VkaXRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3coYXJncy5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tib3hzZWxlY3Rpb24nKVxuICAgICAgICAgICAgICAgIHx8ICF0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1wZXJzaXN0c2VsZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5yZWZyZXNoUm93ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy51aWQpO1xuICAgICAgICAgICAgaWYgKHJvd09iaikge1xuICAgICAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzID0gZGF0YTtcbiAgICAgICAgICAgICAgICByb3cucmVmcmVzaChyb3dPYmosIHRoaXMucGFyZW50LmdldENvbHVtbnMoKSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnY2FuY2VsJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvdyhhcmdzLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5yb3dJbmRleCk7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzYXZlJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiBkYXRhLCBzZWxlY3RlZFJvdzogMCwgYWN0aW9uOiAnYWRkJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLnVpZCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGFbY29sLmZpZWxkXSA9IGRhdGEgJiYgZGF0YVtjb2wuZmllbGRdID8gZGF0YVtjb2wuZmllbGRdIDogY29sLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsIGZvcmVpZ25LZXlEYXRhOiB7fSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2FkZCcsIGRhdGE6IHRoaXMucHJldmlvdXNEYXRhLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkTmV3KHsgcm93RGF0YTogYXJncy5kYXRhLCByZXF1ZXN0VHlwZTogJ2FkZCcgfSk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuYXBwbHlGb3JtVmFsaWRhdGlvbigpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgYXJncy5yb3cgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRSb3dJbmRleCA9IHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXg7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZGVsZXRlJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSA/IFtkYXRhXSA6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUmVjb3JkcygpLCB0cjogdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dzKCksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5zdG9wRWRpdFN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1hZGRlZHJvdycpO1xuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZW0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZWRpdGVkcm93Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jcnVkQWN0aW9uLCB0aGlzLmVkaXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVsZXRlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zYXZlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY3J1ZEFjdGlvbiwgdGhpcy5lZGl0SGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZWxldGVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zYXZlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTm9ybWFsRWRpdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTm9ybWFsRWRpdCA9IE5vcm1hbEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9ub3JtYWwtZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlbnVtXzEsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgY2VsbF9yZW5kZXJlcl8xLCBjZWxsXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQmF0Y2hFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQmF0Y2hFZGl0KHBhcmVudCwgc2VydmljZUxvY2F0b3IsIHJlbmRlcmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzID0ge307XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5iZWZvcmVDZWxsRm9jdXNlZCwgdGhpcy5vbkJlZm9yZUNlbGxGb2N1c2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jZWxsRm9jdXNlZCwgdGhpcy5vbkNlbGxGb2N1c2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YUJvdW5kRnVuY3Rpb24gPSB0aGlzLmRhdGFCb3VuZC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZEZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5iZWZvcmVDZWxsRm9jdXNlZCwgdGhpcy5vbkJlZm9yZUNlbGxGb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jZWxsRm9jdXNlZCwgdGhpcy5vbkNlbGxGb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmRGdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRhdGFCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfYWRkJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJiAhdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkeChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Jyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRyICYmICFpc05hTihwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCksIHRoaXMucGFyZW50LmdldENvbHVtbnMoKVtwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLm9uQmVmb3JlQ2VsbEZvY3VzZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCAmJiB0aGlzLnZhbGlkYXRlRm9ybU9iaigpICYmXG4gICAgICAgICAgICAgICAgKGUuYnlDbGljayB8fCAoWyd0YWInLCAnc2hpZnRUYWInLCAnZW50ZXInLCAnc2hpZnRFbnRlciddLmluZGV4T2YoZS5rZXlBcmdzLmFjdGlvbikgPiAtMSkpKSB7XG4gICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChlLmJ5Q2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZS5jbGlja0FyZ3MucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUua2V5QXJncy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5vbkNlbGxGb2N1c2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9ICFlLmNvbnRhaW5lci5pc0NvbnRlbnQgfHwgIWUuY29udGFpbmVyLmlzRGF0YUNlbGw7XG4gICAgICAgICAgICBpZiAoIWUuYnlLZXkgfHwgY2xlYXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSBlLmNvbnRhaW5lci5pbmRleGVzLCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLnBhcmVudC5pc0VkaXQ7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpc0VkaXQgPSBpc0VkaXQgJiYgIXRoaXMudmFsaWRhdGVGb3JtT2JqKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleUFyZ3MuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRFbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmtleUFyZ3MucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5pc0FkZFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXRDZWxsRnJvbUluZGV4ID0gZnVuY3Rpb24gKHJvd0lkeCwgY2VsbElkeCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9IHJvd0lkeDtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gY2VsbElkeDtcbiAgICAgICAgICAgIHRoaXMuZWRpdENlbGwocm93SWR4LCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClbY2VsbElkeF0uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKTtcbiAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3dzW2ldLnVpZCArICddJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRChyb3dzW2ldLnVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvd3NbaV0uY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0ciwgW10sIFsnZS1oaWRkZW5yb3cnLCAnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIucmVmcmVzaChyb3dzW2ldLCBnT2JqLmdldENvbHVtbnMoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dJZHgoKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIHRoaXMuYnVsa0RlbGV0ZShmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmJ1bGtBZGRSb3coZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0ICYmIHRoaXMudmFsaWRhdGVGb3JtT2JqKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJhdGNoU2F2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnZhbGlkYXRlRm9ybU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmogJiYgIXRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iai52YWxpZGF0ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJhdGNoU2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hhbmdlcyA9IHRoaXMuZ2V0QmF0Y2hDaGFuZ2VzKCk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgYmF0Y2hDaGFuZ2VzOiBjaGFuZ2VzLCBjYW5jZWw6IGZhbHNlIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZUJhdGNoU2F2ZSwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuYnVsa1NhdmUsIHsgY2hhbmdlczogY2hhbmdlcyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRCYXRjaENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhbmdlcyA9IHtcbiAgICAgICAgICAgICAgICBhZGRlZFJlY29yZHM6IFtdLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRSZWNvcmRzOiBbXSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUmVjb3JkczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocm93LmVkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5hZGRlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuZGVsZXRlZFJlY29yZHMucHVzaChyb3cuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuY2hhbmdlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlcztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZW1vdmVSb3dPYmplY3RGcm9tVUlEID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUm93T2JqZWN0ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpLnVuc2hpZnQocm93KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5idWxrRGVsZXRlID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGRhdGEgPyB0aGlzLmdldEluZGV4RnJvbURhdGEoZGF0YSkgOiBnT2JqLnNlbGVjdGVkUm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgIHJvd0luZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiBkYXRhID8gZGF0YSA6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClbMF0sXG4gICAgICAgICAgICAgICAgcm93OiBkYXRhID8gZ09iai5nZXRSb3dzKClbaW5kZXhdIDogZ09iai5nZXRTZWxlY3RlZFJvd3MoKVswXSwgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghYXJncy5yb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZUJhdGNoRGVsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHZhciB1aWQgPSBhcmdzLnJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICBpZiAoYXJncy5yb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJvd09iamVjdEZyb21VSUQodWlkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShhcmdzLnJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gZ09iai5nZXRSb3dPYmplY3RGcm9tVUlEKHVpZCk7XG4gICAgICAgICAgICAgICAgcm93T2JqLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJvd09iai5lZGl0ID0gJ2RlbGV0ZSc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoYXJncy5yb3csIFsnZS1oaWRkZW5yb3cnLCAnZS11cGRhdGVkdGQnXSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyhpbmRleCk7XG4gICAgICAgICAgICBkZWxldGUgYXJncy5yb3c7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJhdGNoRGVsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5iYXRjaERlbGV0ZSwgeyByb3dzOiB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkgfSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoUm93SWR4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGRlbnJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4Jywgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0SW5kZXhGcm9tRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmluQXJyYXkoZGF0YSwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtBZGRSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSBkYXRhID8gZGF0YSA6IHRoaXMuZ2V0RGVmYXVsdERhdGEoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGRlZmF1bHREYXRhOiBkZWZhdWx0RGF0YSxcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hBZGQsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbERhdGEgPSBtb2RlbC5nZW5lcmF0ZVJvd3MoW2FyZ3MuZGVmYXVsdERhdGFdKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhWzBdLCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgY29sO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSwgdHIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgbW9kZWxEYXRhWzBdLmNlbGxzLnVuc2hpZnQobmV3IGNlbGxfMS5DZWxsKHsgY2VsbFR5cGU6IGVudW1fMS5DZWxsVHlwZS5JbmRlbnQgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRib2R5ID0gZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgdHIuY2xhc3NMaXN0LmFkZCgnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICAgICAgdGJvZHkuaW5zZXJ0QmVmb3JlKHRyLCB0Ym9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3ModHIucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpLCBbJ2UtdXBkYXRlZHRkJ10pO1xuICAgICAgICAgICAgbW9kZWxEYXRhWzBdLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgbW9kZWxEYXRhWzBdLmNoYW5nZXMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgbW9kZWxEYXRhWzBdLmRhdGEpO1xuICAgICAgICAgICAgbW9kZWxEYXRhWzBdLmVkaXQgPSAnYWRkJztcbiAgICAgICAgICAgIHRoaXMuYWRkUm93T2JqZWN0KG1vZGVsRGF0YVswXSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dJZHgoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMuZm9yZ2V0UHJldmlvdXMoKTtcbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmZpbmROZXh0RWRpdGFibGVDZWxsKDAsIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbCA9IGdPYmouZ2V0Q29sdW1ucygpW2luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKDAsIGNvbC5maWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGFyZ3MuZGVmYXVsdERhdGEsIHJvdzogdHIsXG4gICAgICAgICAgICAgICAgY29sdW1uT2JqZWN0OiBjb2wsIGNvbHVtbkluZGV4OiBpbmRleCwgcHJpbWFyeUtleTogYXJncy5wcmltYXJ5S2V5LCBjZWxsOiB0ci5jZWxsc1tpbmRleF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJhdGNoQWRkLCBhcmdzMSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuYmF0Y2hBZGQsIHsgcm93czogdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpIH0pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmZpbmROZXh0RWRpdGFibGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbkluZGV4LCBpc0FkZCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2hlY2tOUENlbGwgPSBmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgICByZXR1cm4gIWNvbC50ZW1wbGF0ZSAmJiBjb2wudmlzaWJsZSAmJiAhY29sLmlzUHJpbWFyeUtleSAmJiAhY29sLmlzSWRlbnRpdHkgJiYgY29sLmFsbG93RWRpdGluZztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREZWZhdWx0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGRWYWx1ZXMgPSB7ICdudW1iZXInOiAwLCAnc3RyaW5nJzogbnVsbCwgJ2Jvb2xlYW4nOiBmYWxzZSwgJ2RhdGUnOiBudWxsLCAnZGF0ZXRpbWUnOiBudWxsIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5nZXRDb2x1bW5zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBkYXRhW2NvbC5maWVsZF0gPSBjb2wuZGVmYXVsdFZhbHVlID8gY29sLmRlZmF1bHRWYWx1ZSA6IGRWYWx1ZXNbY29sLnR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuc2V0Q2VsbElkeCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnTGVuID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZ0xlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IHRhcmdldC5jZWxsSW5kZXggLSBnTGVuO1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdENlbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGZpZWxkLCBpc0FkZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nICYmIGNvbC5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQgJiYgISh0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbi5maWVsZCA9PT0gZmllbGQgJiYgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9PT0gaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKChrZXlzWzBdID09PSBjb2wuZmllbGQgJiYgIXJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkgfHwgY29sLnRlbXBsYXRlIHx8IGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJvd0RhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdGhpcy5nZXREYXRhQnlJbmRleChpbmRleCkpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdLnNsaWNlLmFwcGx5KHJvdy5jZWxscyk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGw6IGNlbGxzW3RoaXMuZ2V0Q29sSW5kZXgoY2VsbHMsIHRoaXMuZ2V0Q2VsbElkeChjb2wudWlkKSldLCByb3c6IHJvdyxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogY29sLmZpZWxkLCBjb2x1bW5PYmplY3Q6IGNvbCwgaXNGb3JlaWduS2V5OiAhZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2wuZm9yZWlnbktleVZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToga2V5cywgcm93RGF0YTogcm93RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblJ1bGVzOiBlajJfYmFzZV8xLmV4dGVuZCh7fSwgY29sLnZhbGlkYXRpb25SdWxlcyA/IGNvbC52YWxpZGF0aW9uUnVsZXMgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3dEYXRhW2NvbC5maWVsZF0sIHR5cGU6ICFpc0FkZCA/ICdlZGl0JyA6ICdhZGQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWFyZ3MuY2VsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbEVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsIGNvbHVtbjogY29sLCB2YWx1ZTogYXJncy52YWx1ZSwgaXNGb3JlaWduS2V5OiBhcmdzLmlzRm9yZWlnbktleSwgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXg6IHBhcnNlSW50KGFyZ3MuY2VsbC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS11cGRhdGVkdGQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sb3JlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja2JveHNlbGVjdGlvbicpIHx8ICFnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBlcnNpc3RzZWxlY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJyk7XG4gICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oW2NvbF0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVDZWxsID0gZnVuY3Rpb24gKHJvd0luZGV4LCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIGlmIChjb2wgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5jZWxsc1t0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoZmllbGQpXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0ZC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQodGQsIGNvbCwgcm93T2JqLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucXVlcnlDZWxsSW5mbywge1xuICAgICAgICAgICAgICAgICAgICBjZWxsOiB0ZCwgY29sdW1uOiBjb2wsIGRhdGE6IHJvd09iai5jaGFuZ2VzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuc2V0Q2hhbmdlcyA9IGZ1bmN0aW9uIChyb3dPYmosIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFyb3dPYmouY2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvd09iai5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAgICAgcm93T2JqLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnVwZGF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsKGluZGV4LCBjb2wsIGRhdGFbY29sXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0Q2VsbElkeCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBjSWR4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpICsgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSkgfHwgIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuY2hpbGRHcmlkKSkge1xuICAgICAgICAgICAgICAgIGNJZHgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjSWR4O1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hURCA9IGZ1bmN0aW9uICh0ZCwgY29sdW1uLCByb3dPYmosIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IG5ldyBjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hhbmdlcyhyb3dPYmosIGNvbHVtbi5maWVsZCwgdmFsdWUpO1xuICAgICAgICAgICAgY2VsbC5yZWZyZXNoVEQodGQsIHJvd09iai5jZWxsc1t0aGlzLmdldENlbGxJZHgoY29sdW1uLnVpZCldLCByb3dPYmouY2hhbmdlcyk7XG4gICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldENvbEluZGV4ID0gZnVuY3Rpb24gKGNlbGxzLCBpbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBjZWxscy5sZW5ndGg7IG0rKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2xJbmRleCA9IHBhcnNlSW50KGNlbGxzW21dLmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4ID09PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuc2F2ZUNlbGwgPSBmdW5jdGlvbiAoaXNGb3JjZVNhdmUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWlzRm9yY2VTYXZlICYmICghZ09iai5pc0VkaXQgfHwgdGhpcy52YWxpZGF0ZUZvcm1PYmooKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKHRoaXMuZm9ybSwgJ2Utcm93Jyk7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5jZWxsRGV0YWlscy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgZWRpdGVkRGF0YSA9IGdPYmouZWRpdE1vZHVsZS5nZXRDdXJyZW50RWRpdGVkRGF0YSh0aGlzLmZvcm0sIHt9KTtcbiAgICAgICAgICAgIGVkaXRlZERhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh0aGlzLmNlbGxEZXRhaWxzLnJvd0RhdGEsIGVkaXRlZERhdGEpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBlZGl0ZWREYXRhW2NvbHVtbi5maWVsZF0sXG4gICAgICAgICAgICAgICAgcm93RGF0YTogdGhpcy5jZWxsRGV0YWlscy5yb3dEYXRhLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuY2VsbERldGFpbHMudmFsdWUsXG4gICAgICAgICAgICAgICAgY29sdW1uT2JqZWN0OiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgY2VsbDogdGhpcy5mb3JtLnBhcmVudEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaXNGb3JlaWduS2V5OiB0aGlzLmNlbGxEZXRhaWxzLmlzRm9yZWlnbktleSwgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghaXNGb3JjZVNhdmUpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNlbGxTYXZlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lXaWRnZXRzKFtjb2x1bW5dKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFREKGFyZ3MuY2VsbCwgY29sdW1uLCBnT2JqLmdldFJvd09iamVjdEZyb21VSUQodHIuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKSwgYXJncy52YWx1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFt0cl0sIFsnZS1lZGl0ZWRyb3cnLCAnZS1iYXRjaHJvdyddKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2FyZ3MuY2VsbF0sIFsnZS1lZGl0ZWRiYXRjaGNlbGwnLCAnZS1ib29sY2VsbCddKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoYXJncy52YWx1ZSkgJiYgYXJncy52YWx1ZS50b1N0cmluZygpID09PVxuICAgICAgICAgICAgICAgICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxEZXRhaWxzLnZhbHVlKSA/IHRoaXMuY2VsbERldGFpbHMudmFsdWUgOiAnJykudG9TdHJpbmcoKSAmJiAhdGhpcy5pc0NvbG9yZWQpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy5pc0NvbG9yZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREYXRhQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgIHJldHVybiByb3cuY2hhbmdlcyA/IHJvdy5jaGFuZ2VzIDogcm93LmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdCA9IEJhdGNoRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2JhdGNoLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDk0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERpYWxvZ0VkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGlhbG9nRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXQgPSBEaWFsb2dFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2NhbGVuZGFyc18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGVQaWNrZXJFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERhdGVQaWNrZXJFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERhdGVQaWNrZXJFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmllbGQnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuY29sdW1uLmZpZWxkLCBuYW1lOiBhcmdzLmNvbHVtbi5maWVsZCwgdHlwZTogJ3RleHQnLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQaWNrZXJFZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlUGlja2VyRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9jYWxlbmRhcnNfMS5EYXRlUGlja2VyKGVqMl9iYXNlXzEuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogaXNJbmxpbmUgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0pLCBwbGFjZWhvbGRlcjogaXNJbmxpbmUgP1xuICAgICAgICAgICAgICAgICAgICAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICB9LCBhcmdzLmNvbHVtbi5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVBpY2tlckVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGF0ZVBpY2tlckVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EYXRlUGlja2VyRWRpdENlbGwgPSBEYXRlUGlja2VyRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGF0ZXBpY2tlci1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDk2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuL2V4cG9ydC1oZWxwZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZXZlbnRzLCBlajJfZXhjZWxfZXhwb3J0XzEsIGVqMl9iYXNlXzEsIGRhdGFfMSwgZXhwb3J0X2hlbHBlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLCBlbnVtXzEsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4Y2VsRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhjZWxFeHBvcnQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmJvb2sgPSB7fTtcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9ICdhcHBlbmR0b3NoZWV0JztcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0VsZW1lbnRJZENoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdFeGNlbEV4cG9ydCc7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGdPYmopIHtcbiAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQgIT09IG51bGwgJiYgZ09iai5lbGVtZW50LmlkID09PSAnJykge1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5pZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRWxlbWVudElkQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGdPYmo7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRXhwb3J0aW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5ib29rID0ge307XG4gICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmZvb3RlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9ICdhcHBlbmR0b3NoZWV0JztcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gbmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRIZWxwZXIoZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5NYXAgPSBmdW5jdGlvbiAoZ3JpZCwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGlzQ3N2KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IGdyaWQ7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZUV4Y2VsRXhwb3J0KTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShnT2JqKTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGlzQ3N2KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGlzQ3N2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1JlY29yZHMoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZHMgPSBmdW5jdGlvbiAoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IF90aGlzLmRhdGEuZ2V0RGF0YSh7fSwgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydEhlbHBlci5nZXRRdWVyeShnT2JqLCBfdGhpcy5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0lubmVyUmVjb3JkcyA9IGZ1bmN0aW9uIChnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgcikge1xuICAgICAgICAgICAgdmFyIGJsYW5rUm93cyA9IDU7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9IChleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LnR5cGUgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQudHlwZSA6ICdhcHBlbmR0b3NoZWV0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQuYmxhbmtSb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhbmtSb3dzID0gZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC5ibGFua1Jvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdvcmtib29rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IHdvcmtib29rLndvcmtzaGVldHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHdvcmtib29rLndvcmtzaGVldHNbMF0ucm93cztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB3b3JrYm9vay53b3Jrc2hlZXRzWzBdLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAodGhpcy5yb3dzW3RoaXMucm93cy5sZW5ndGggLSAxXS5pbmRleCArIGJsYW5rUm93cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZUV4cG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIChpc011bHRpcGxlRXhwb3J0IHx8IHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cFR5cGUgPT09ICdhcHBlbmR0b3NoZWV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uID0gKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3cgPSB0aGlzLmhlbHBlci5nZXRIZWFkZXJzKGdPYmouY29sdW1ucywgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKTtcbiAgICAgICAgICAgIHZhciBncm91cEluZGVudCA9IDA7XG4gICAgICAgICAgICBpZiAoKHIucmVzdWx0KS5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBJbmRlbnQgKz0gKHIucmVzdWx0KS5sZXZlbDtcbiAgICAgICAgICAgICAgICBncm91cEluZGVudCArPSAoci5yZXN1bHQpLmNoaWxkTGV2ZWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSGVhZGVyQ29udGVudChnT2JqLCBoZWFkZXJSb3csIGV4cG9ydFByb3BlcnRpZXMsIGdyb3VwSW5kZW50KTtcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgIShleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZXhwb3J0VHlwZSA9PT0gJ2N1cnJlbnRwYWdlJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZXhjZWxFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkQ29udGVudCA9IGZ1bmN0aW9uIChnT2JqLCByZXR1cm5UeXBlLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGN1cnJlbnRWaWV3UmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIHZhciByZWNvcmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSBjdXJyZW50Vmlld1JlY29yZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWNvcmQubGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCByZWNvcmQubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkUm93cyhnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCByZXR1cm5UeXBlLnJlc3VsdCwgY3VycmVudFZpZXdSZWNvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgcmV0dXJuVHlwZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZXhwVHlwZSA9PT0gJ2FwcGVuZHRvc2hlZXQnICYmICFpc011bHRpcGxlRXhwb3J0KSB8fCAodGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NFeGNlbEZvb3Rlcih0aGlzLmZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNoZWV0ID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaGVldC5jb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXQucm93cyA9IHRoaXMucm93cztcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0LnB1c2goc2hlZXQpO1xuICAgICAgICAgICAgdGhpcy5ib29rLndvcmtzaGVldHMgPSB0aGlzLndvcmtTaGVldDtcbiAgICAgICAgICAgIHRoaXMuYm9vay5zdHlsZXMgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ3N2RXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib29rID0gbmV3IGVqMl9leGNlbF9leHBvcnRfMS5Xb3JrYm9vayh0aGlzLmJvb2ssICdjc3YnKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zYXZlKCdFeHBvcnQuY3N2Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9vayA9IG5ldyBlajJfZXhjZWxfZXhwb3J0XzEuV29ya2Jvb2sodGhpcy5ib29rLCAneGxzeCcpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNhdmUoJ0V4cG9ydC54bHN4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudElkQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaWQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJvd3MgPSBmdW5jdGlvbiAoZ09iaiwgZGF0YVNvdXJjZSwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSBpbmRleCArIGxldmVsO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGl0ZW0uZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gaXRlbS5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlICs9IGl0ZW0uY291bnQgKyAnIGl0ZW1zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cENhcHRpb25TdW1tYXJ5Um93cyA9IGNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cENhcHRpb25TdW1tYXJ5Um93cywgZGF0YVNvdXJjZS5sZXZlbCArIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHRoaXMucm93TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsSW5kZXggPSBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscyArIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzWzBdLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSB0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0Q2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Q2VsbC5pbmRleCA8IGxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxJbmRleCA9IHRDZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4ID4gaEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0Q2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxJbmRleCAtIGNlbGwuaW5kZXgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gbEluZGV4IC0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaEluZGV4IDwgKGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aCArIGluZGV4ICsgbGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDZWxsLmluZGV4ID0gKGhJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChzQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gaGVhZGVyUm93LmNvbHVtbnM7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzID0gY2VsbHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgaXRlbS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgKGxldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgaXRlbSwgdW5kZWZpbmVkLCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciByTGVuID0gT2JqZWN0LmtleXMocmVjb3JkKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJMZW47IHIrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBoZWFkZXJSb3cuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZWNvcmRbcl1baGVhZGVyUm93LmNvbHVtbnNbY10uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhjZWxDZWxsQXJncyA9IHsgZGF0YTogcmVjb3JkW3JdLCBjb2x1bW46IGhlYWRlclJvdy5jb2x1bW5zW2NdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsUXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoZXhjZWxDZWxsQXJncywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogaGVhZGVyUm93LmNvbHVtbnNbY10sIGRhdGE6IHJlY29yZFtyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsIHN0eWxlOiB1bmRlZmluZWQsIGNvbFNwYW46IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gaW5kZXggKyBsZXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBleGNlbENlbGxBcmdzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VsQ2VsbEFyZ3MuY29sU3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbFNwYW4gPSBleGNlbENlbGxBcmdzLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjZWxDZWxsQXJncy5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlSW5kZXggPSB0aGlzLmdldENvbHVtblN0eWxlKGdPYmosIGluZGV4ICsgbGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLm1lcmdlT3B0aW9ucyh0aGlzLnN0eWxlc1tzdHlsZUluZGV4XSwgZXhjZWxDZWxsQXJncy5zdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0geyBuYW1lOiBnT2JqLmVsZW1lbnQuaWQgKyAnY29sdW1uJyArIChpbmRleCArIGxldmVsKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCByZWMsIGN1cnJlbnRWaWV3UmVjb3JkcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgc3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gY3VycmVudFZpZXdSZWNvcmRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHJlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGEsIHsgbGV2ZWw6IGRhdGEubGV2ZWwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwU3VtbWFyeVJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxBZ2dyZWdhdGVzKGdPYmosIGdyb3VwU3VtbWFyeVJvd3MsIGluZGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhLCByZWMuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICBpZiAoc1Jvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFnZ3JlZ2F0ZXMoZ09iaiwgc1Jvd3MsIGluZGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5maWxsQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCBjZWxscywgaW5kZW50LCBjdXN0b21JbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsc18xID0gY2VsbHM7IF9pIDwgY2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzXzIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSByb3cuY2VsbHM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZUNlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjZWxsLnZpc2libGUgfHwgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5pbmRleCA9IGluZGV4ICsgaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gdHh0WzBdLndob2xlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IE9iamVjdC5rZXlzKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gY2VsbC5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmF2ZXJhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uZmFsc2Vjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmZhbHNlY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnN0eWxlID0gdGhpcy5nZXRDYXB0aW9uVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuaW5kZXggPSBpbmRleCArIGluZGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiBjdXN0b21JbmRleCwgY2VsbHM6IGNlbGxzXzIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHNfMiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbiAoSlNPTjEsIEpTT04yKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgICAgICB2YXIgYXR0cm5hbWUgPSBPYmplY3Qua2V5cyhKU09OMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXR0cm5hbWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJuYW1lW2luZGV4XSAhPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFthdHRybmFtZVtpbmRleF1dID0gSlNPTjFbYXR0cm5hbWVbaW5kZXhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRybmFtZSA9IE9iamVjdC5rZXlzKEpTT04yKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRybmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cm5hbWVbaW5kZXhdICE9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJuYW1lW2luZGV4XV0gPSBKU09OMlthdHRybmFtZVtpbmRleF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDb2x1bW5TdHlsZSA9IGZ1bmN0aW9uIChnT2JqLCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN0eWxlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLm5hbWUgPT09IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKGdPYmosIGhlYWRlclJvdywgZXhwb3J0UHJvcGVydGllcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gMTtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGhlYWRlclJvdztcbiAgICAgICAgICAgIHZhciBncmlkUm93cyA9IHJldHVyblZhbHVlLnJvd3M7XG4gICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSByZXR1cm5WYWx1ZS5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKGluZGVudCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleCAhPT0gaW5kZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4ICsgMSwgd2lkdGg6IDMwIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGdyaWRSb3dzLmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENlbGxJbmRleCA9IDEgKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sdW1uXzEgPSAwOyBjb2x1bW5fMSA8IGdyaWRSb3dzW3Jvd10uY2VsbHMubGVuZ3RoOyBjb2x1bW5fMSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZENlbGwgPSBncmlkUm93c1tyb3ddLmNlbGxzW2NvbHVtbl8xXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHsgY29udGFpbnM6IHRydWUsIGluZGV4OiAxIH07XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0SW5kZXgoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY3VycmVudENlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5yb3dTcGFuICE9PSB1bmRlZmluZWQgJiYgZ3JpZENlbGwucm93U3BhbiAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dTcGFuID0gZ3JpZENlbGwucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSByb3dJbmRleDsgaSA8IGdyaWRDZWxsLnJvd1NwYW4gKyByb3dJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0geyByb3dJbmRleDogMCwgY29sdW1uSW5kZXg6IDAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbC5yb3dJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPSBjdXJyZW50Q2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxscy5wdXNoKHNwYW5uZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sU3BhbiAhPT0gdW5kZWZpbmVkICYmIGdyaWRDZWxsLmNvbFNwYW4gIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IGdyaWRDZWxsLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gY3VycmVudENlbGxJbmRleCArIGNlbGwuY29sU3BhbiAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVtZSA9IGV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLmNvbHVtbi50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaEFsaWduID0gZ3JpZENlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dEFsaWduO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGxJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBncmlkQ29sdW1ucy5sZW5ndGg7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVN0eWxlcyhnT2JqLCBncmlkQ29sdW1uc1tjb2xdLCB0aGlzLmdldFJlY29yZFRoZW1lU3R5bGUodGhpcy50aGVtZSksIGluZGVudCArIGNvbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEyO1xuICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHRoaXMudXBkYXRlVGhlbWVTdHlsZSh0aGVtZS5oZWFkZXIsIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnVwZGF0ZVRoZW1lU3R5bGUgPSBmdW5jdGlvbiAodGhlbWVzdHlsZSwgc3R5bGUpIHtcbiAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmZvbnRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gdGhlbWVzdHlsZS5mb250Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5mb250TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSB0aGVtZXN0eWxlLmZvbnROYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoZW1lc3R5bGUuZm9udFNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gdGhlbWVzdHlsZS5mb250U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmJvcmRlcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmJvcmRlcnMuY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzLmNvbG9yID0gdGhlbWVzdHlsZS5ib3JkZXJzLmNvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5ib3JkZXJzLmxpbmVTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMubGluZVN0eWxlID0gdGhlbWVzdHlsZS5ib3JkZXJzLmxpbmVTdHlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5ib2xkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0aGVtZXN0eWxlLmJvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgc3R5bGUuYmFja0NvbG9yID0gJyNGNkY2RjYnO1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUuY2FwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSB0aGlzLnVwZGF0ZVRoZW1lU3R5bGUodGhlbWUuY2FwdGlvbiwgc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUucmVjb3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHRoaXMudXBkYXRlVGhlbWVTdHlsZSh0aGVtZS5yZWNvcmQsIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeGNlbEhlYWRlciA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXIucm93cyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcgfHwgdGhpcy5yb3dMZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmhlYWRlclJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gaGVhZGVyLmhlYWRlclJvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd0xlbmd0aCA8IGhlYWRlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBub1Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gaGVhZGVyLnJvd3Nbcm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoanNvbi5pbmRleCAhPT0gbnVsbCAmJiBqc29uLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ID0gKHJvdyArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZENlbGxJbmRleChqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS51cGRhdGVkQ2VsbEluZGV4ID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgIHZhciBjZWxsc0xlbmd0aCA9IGpzb24uY2VsbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgY2VsbElkID0gMDsgY2VsbElkIDwgY2VsbHNMZW5ndGg7IGNlbGxJZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25DZWxsID0ganNvbi5jZWxsc1tjZWxsSWRdO1xuICAgICAgICAgICAgICAgIGlmICghKGpzb25DZWxsLmluZGV4ICE9PSBudWxsICYmIGpzb25DZWxsLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25DZWxsLmluZGV4ID0gKGNlbGxJZCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKGpzb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4Y2VsRm9vdGVyID0gZnVuY3Rpb24gKGZvb3Rlcikge1xuICAgICAgICAgICAgaWYgKGZvb3Rlci5yb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoICs9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA+IGZvb3Rlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggKz0gKGZvb3Rlci5mb290ZXJSb3dzIC0gZm9vdGVyLnJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5mb290ZXJSb3dzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5vUm93czsgcm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBmb290ZXIucm93c1tyb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5pbmRleCA9PT0gbnVsbCB8fCBqc29uLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggPSB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCArPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWRDZWxsSW5kZXgoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc3Bhbm5lZENlbGxzXzEgPSBzcGFubmVkQ2VsbHM7IF9pIDwgc3Bhbm5lZENlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0gc3Bhbm5lZENlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICgoc3Bhbm5lZENlbGwucm93SW5kZXggPT09IHJvd0luZGV4KSAmJiAoc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPT09IGNvbHVtbkluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5JbmRleCA9IGNvbHVtbkluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY29udGFpbnM6IHRydWUsIGluZGV4OiBjb2x1bW5JbmRleCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRhaW5zOiBmYWxzZSwgaW5kZXg6IGNvbHVtbkluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wYXJzZVN0eWxlcyA9IGZ1bmN0aW9uIChnT2JqLCBjb2wsIHN0eWxlLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0LnNrZWxldG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubnVtYmVyRm9ybWF0ID0gY29sLmZvcm1hdC5za2VsZXRvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLmZvcm1hdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5udW1iZXJGb3JtYXQgPSBjb2wuZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbC50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGNvbC50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5uYW1lID0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2wud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4LCB3aWR0aDogdHlwZW9mIGNvbC53aWR0aCA9PT0gJ251bWJlcicgPyBjb2wud2lkdGggOiB0aGlzLmhlbHBlci5nZXRDb252ZXJ0ZWRXaWR0aChjb2wud2lkdGgpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4Y2VsRXhwb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeGNlbEV4cG9ydCA9IEV4Y2VsRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOThfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIlxuLy8gbW9kdWxlIGlkID0gOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi8uLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4vLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVudW1fMSwgZWoyX2Jhc2VfMSwgY2VsbF8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwb3J0SGVscGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0SGVscGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0SGVscGVyLmdldFF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmVudCwgZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuaXNSZW1vdGUoKSA/XG4gICAgICAgICAgICAgICAgZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpLnJlcXVpcmVzQ291bnQoKS50YWtlKHBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQpIDpcbiAgICAgICAgICAgICAgICBkYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSkucmVxdWlyZXNDb3VudCgpO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdldEhlYWRlcnMgPSBmdW5jdGlvbiAoY29sdW1uLCBpc0hpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICBpZiAoaXNIaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHMgPSBjb2x1bW47XG4gICAgICAgICAgICB0aGlzLmNvbERlcHRoID0gdGhpcy5tZWFzdXJlQ29sdW1uRGVwdGgoY29scyk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGFjdHVhbENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xEZXB0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IG5ldyByb3dfMS5Sb3coe30pO1xuICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLnByb2Nlc3NDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMucHJvY2Vzc0hlYWRlckNlbGxzKHJvd3MpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dzXzEgPSByb3dzOyBfaSA8IHJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvdy5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudmlzaWJsZSA9PT0gdW5kZWZpbmVkICYmIGNlbGwuY2VsbFR5cGUgIT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMucmVtb3ZlQ2VsbEZyb21Sb3cocm93LmNlbGxzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKCFpc0hpZGVDb2x1bW5JbmNsdWRlKSAmJiBjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAoIWNlbGwudmlzaWJsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMucmVtb3ZlQ2VsbEZyb21Sb3cocm93LmNlbGxzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zKGNvbHNbaV0sIGFjdHVhbENvbHVtbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcm93czogcm93cywgY29sdW1uczogYWN0dWFsQ29sdW1ucyB9O1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdldENvbnZlcnRlZFdpZHRoID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUZsb2F0KGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiAoaW5wdXQuaW5kZXhPZignJScpICE9PSAtMSkgPyAodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAqIHZhbHVlIC8gMTAwKSA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyA9IGZ1bmN0aW9uIChjb2x1bW4sIGFjdHVhbENvbHVtbnMpIHtcbiAgICAgICAgICAgIGlmICghY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgfHwgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICBhY3R1YWxDb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgfHwgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHVtbiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUFjdHVhbENvbHVtbnMoY29sdW1uLmNvbHVtbnNbaV0sIGFjdHVhbENvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnJlbW92ZUNlbGxGcm9tUm93ID0gZnVuY3Rpb24gKGNlbGxzLCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRDZWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxsSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IChjZWxsSW5kZXggKyAxKTsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Q2VsbHMucHVzaChjZWxsc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0Q2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUucHJvY2Vzc0hlYWRlckNlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kR3JpZENlbGxzKGNvbHVtbnNbaV0sIHJvd3MsIDAsIGkgPT09IDAsIGZhbHNlLCBpID09PSAoY29sdW1ucy5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5hcHBlbmRHcmlkQ2VsbHMgPSBmdW5jdGlvbiAoY29scywgZ3JpZFJvd3MsIGluZGV4LCBpc0ZpcnN0T2JqLCBpc0ZpcnN0Q29sdW1uLCBpc0xhc3RDb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBsYXN0Q29sID0gaXNMYXN0Q29sdW1uID8gJ2UtbGFzdGNlbGwnIDogJyc7XG4gICAgICAgICAgICBpZiAoIWNvbHMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGdyaWRSb3dzW2luZGV4XS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGNvbHMsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIHRoaXMuY29sRGVwdGggLSBpbmRleCwgKGlzRmlyc3RPYmogPyAnJyA6IChpc0ZpcnN0Q29sdW1uID8gJ2UtZmlyc3RjZWxsJyA6ICcnKSkgKyBsYXN0Q29sLCBpbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZChjb2xzLnVpZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ291bnQoY29scywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3NbaW5kZXhdLmNlbGxzLnB1c2gobmV3IGNlbGxfMS5DZWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgY29sdW1uOiBjb2xzLCBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGlzRmlyc3RDZWxsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0lnbm9yZUZpcnN0Q2VsbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlyc3RDZWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzLmNvbHVtbnNbaV0udmlzaWJsZSAmJiAhaXNJZ25vcmVGaXJzdENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlyc3RDZWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSWdub3JlRmlyc3RDZWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncmlkUm93cyA9IHRoaXMuYXBwZW5kR3JpZENlbGxzKGNvbHMuY29sdW1uc1tpXSwgZ3JpZFJvd3MsIGluZGV4ICsgMSwgaXNGaXJzdE9iaiwgaSA9PT0gMCwgaSA9PT0gKGxlbiAtIDEpICYmIGlzTGFzdENvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdyaWRSb3dzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChncmlkQ29sdW1uLCBjZWxsVHlwZSwgcm93U3BhbiwgY2xhc3NOYW1lLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBncmlkQ29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdyaWRDb2x1bW4uaGVhZGVyVGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdyb3dJRCc6ICcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBncmlkQ29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlLFxuICAgICAgICAgICAgICAgICdyb3dTcGFuJzogcm93U3BhbixcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdpbmRleCc6IHJvd0luZGV4LFxuICAgICAgICAgICAgICAgICdjb2xJbmRleCc6IGNvbHVtbkluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb24ucm93U3BhbiB8fCBvcHRpb24ucm93U3BhbiA8IDIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9uLnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUucHJvY2Vzc0NvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdyaWRPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZE9iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5fMSA9IGdyaWRPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBjb2x1bW5JbmRleGVzLmluZGV4T2YoaikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ3JpZE9iai5kZXRhaWxUZW1wbGF0ZSB8fCBncmlkT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZXRDZWxsQ291bnQgPSBmdW5jdGlvbiAoY29sdW1uLCBjb3VudCkge1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4uY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHVtbi5jb2x1bW5zW2ldLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUubWVhc3VyZUNvbHVtbkRlcHRoID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIG1heCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXB0aCA9IHRoaXMuY2hlY2tEZXB0aChjb2x1bW5baV0sIDApO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPCBkZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBkZXB0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF4ICsgMTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5jaGVja0RlcHRoID0gZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2wuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuY2hlY2tEZXB0aChjb2wuY29sdW1uc1tpXSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICByZXR1cm4gRXhwb3J0SGVscGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHBvcnRIZWxwZXIgPSBFeHBvcnRIZWxwZXI7XG4gICAgdmFyIEV4cG9ydFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICB0aGlzLmludGVybmF0aW9uYWxpemF0aW9uID0gbmV3IGVqMl9iYXNlXzEuSW50ZXJuYXRpb25hbGl6YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBFeHBvcnRWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUucmV0dXJuRm9ybWF0dGVkVmFsdWUgPSBmdW5jdGlvbiAoYXJncywgY3VzdG9tRm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbihjdXN0b21Gb3JtYXQpKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZm9ybWF0Q2VsbFZhbHVlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnbnVtYmVyJyAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYXRpb25hbGl6YXRpb24uZ2V0TnVtYmVyRm9ybWF0KHsgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQgfSkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJncy52YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRldGltZScgfHwgYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJncy5jb2x1bW4uZm9ybWF0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAndGltZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVybkZvcm1hdHRlZFZhbHVlKGFyZ3MsIGZvcm1hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4uZm9ybWF0IGluc3RhbmNlb2YgT2JqZWN0ICYmIGFyZ3MuY29sdW1uLmZvcm1hdC50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYXJncy52YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21Gb3JtYXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiBhcmdzLmNvbHVtbi5mb3JtYXQudHlwZSwgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQuZm9ybWF0LCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0LnNrZWxldG9uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21Gb3JtYXQgPSB7IHR5cGU6ICd0aW1lJywgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQuZm9ybWF0LCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0LnNrZWxldG9uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21Gb3JtYXQgPSB7IHR5cGU6ICdkYXRlVGltZScsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuRm9ybWF0dGVkVmFsdWUoYXJncywgY3VzdG9tRm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSB1bmRlZmluZWQgfHwgYXJncy5jb2x1bW4udHlwZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFyZ3MudmFsdWUpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwb3J0VmFsdWVGb3JtYXR0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4cG9ydFZhbHVlRm9ybWF0dGVyID0gRXhwb3J0VmFsdWVGb3JtYXR0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9leHBvcnQtaGVscGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiLi9leHBvcnQtaGVscGVyXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZXZlbnRzLCBlajJfcGRmX2V4cG9ydF8xLCBlajJfcGRmX2V4cG9ydF8yLCBlajJfcGRmX2V4cG9ydF8zLCBlajJfcGRmX2V4cG9ydF80LCBlajJfcGRmX2V4cG9ydF81LCBlajJfcGRmX2V4cG9ydF82LCBleHBvcnRfaGVscGVyXzEsIGRhdGFfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSwgZWoyX2Jhc2VfMSwgZW51bV8xLCBlajJfZGF0YV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQZGZFeHBvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQZGZFeHBvcnQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGRmRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gbmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRIZWxwZXIoZ09iaik7XG4gICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVQZGZFeHBvcnQpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLk1hcCA9IGZ1bmN0aW9uIChwYXJlbnQsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YSh0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoeyB1cmw6IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5kYXRhU291cmNlLnVybCwgYWRhcHRvcjogcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmFkYXB0b3IgfSkuZXhlY3V0ZVF1ZXJ5KG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkpLnRoZW4oZnVuY3Rpb24gKHJldHVyblR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQocGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZGZEb2MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gcGRmRG9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZEb2N1bWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0V4cG9ydChwYXJlbnQsIHJldHVyblR5cGUsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC50cmlnZ2VyKGV2ZW50cy5wZGZFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLnBkZkRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gX3RoaXMuZGF0YS5nZXREYXRhKHt9LCBleHBvcnRfaGVscGVyXzEuRXhwb3J0SGVscGVyLmdldFF1ZXJ5KHBhcmVudCwgX3RoaXMuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChyZXR1cm5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGRmRG9jICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NFeHBvcnQocGFyZW50LCByZXR1cm5UeXBlLCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudHJpZ2dlcihldmVudHMucGRmRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wZGZEb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeHBvcnQgPSBmdW5jdGlvbiAoZ09iaiwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gcGRmRXhwb3J0UHJvcGVydGllcy50aGVtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5wZGZEb2N1bWVudC5zZWN0aW9ucy5hZGQoKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByb2Nlc3NFeHBvcnRQcm9wZXJ0aWVzKHBkZkV4cG9ydFByb3BlcnRpZXMsIGRhdGFTb3VyY2UsIHNlY3Rpb24pO1xuICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHJlc3VsdC5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuR3JvdXBHdWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VjdGlvbiA9IHJlc3VsdC5zZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHBkZlBhZ2UgPSBzZWN0aW9uLnBhZ2VzLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHBkZkdyaWQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZHcmlkKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGhlbWVTdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSgpO1xuICAgICAgICAgICAgdmFyIGJvcmRlciA9IGhlYWRlclRoZW1lU3R5bGUuYm9yZGVyO1xuICAgICAgICAgICAgdmFyIGhlYWRlckZvbnQgPSBoZWFkZXJUaGVtZVN0eWxlLmZvbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQnJ1c2ggPSBoZWFkZXJUaGVtZVN0eWxlLmJydXNoO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gdGhpcy5oZWxwZXIuZ2V0SGVhZGVycyhjb2x1bW5zLCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gcmV0dXJuVmFsdWUucm93cztcbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHJldHVyblZhbHVlLmNvbHVtbnM7XG4gICAgICAgICAgICBwZGZHcmlkID0gdGhpcy5wcm9jZXNzR3JpZEhlYWRlcnMoZGF0YVNvdXJjZS5jaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5Qcm9wZXJ0aWVzKGdyaWRDb2x1bW5zLCBwZGZHcmlkKTtcbiAgICAgICAgICAgIHZhciBjYXB0aW9uVGhlbWVTdHlsZSA9IHRoaXMuZ2V0U3VtbWFyeUNhcHRpb25UaGVtZVN0eWxlKCk7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UgIT09IG51bGwgJiYgZGF0YVNvdXJjZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCAwLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZChib3JkZXIsIGdyaWRDb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlLCBwZGZHcmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50Vmlld0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyh0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MocmV0dXJuVHlwZS5yZXN1bHQsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmRyYXcocGRmUGFnZSwgMjAsIDIwKTtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQuc2F2ZSgnRXhwb3J0LnBkZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFN1bW1hcnlDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRUaGVtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZ3JpZFRoZW1lLmNhcHRpb24gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5jYXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gdGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250U2l6ZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250U2l6ZSA6IDkuNzU7XG4gICAgICAgICAgICAgICAgdmFyIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250Q29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVuQnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBwZGZDb2xvciA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBlbkJydXNoQ29sb3IuciwgcGVuQnJ1c2hDb2xvci5nLCBwZW5CcnVzaENvbG9yLmIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBkZkNvbG9yKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyNDYsIDI0NiwgMjQ2KSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCA5Ljc1KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMCkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjQ2LCAyNDYsIDI0NikpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZCb3JkZXJzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmJvcmRlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIuYm9yZGVycy5jb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3JkZXJDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmJvcmRlcnMuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJvcmRlckNvbG9yLnIsIGJvcmRlckNvbG9yLmcsIGJvcmRlckNvbG9yLmIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gdGhpcy5ncmlkVGhlbWUuaGVhZGVyLmZvbnRTaXplICE9PSB1bmRlZmluZWQgPyB0aGlzLmdyaWRUaGVtZS5oZWFkZXIuZm9udFNpemUgOiAxMC41O1xuICAgICAgICAgICAgICAgIHZhciBwZGZDb2xvciA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFRoZW1lLmhlYWRlci5mb250Q29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVuQnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmZvbnRDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IocGVuQnJ1c2hDb2xvci5yLCBwZW5CcnVzaENvbG9yLmcsIHBlbkJydXNoQ29sb3IuYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgZm9udFNpemUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChwZGZDb2xvcikgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjM0LCAyMzQsIDIzNCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDEwMiwgMTAyLCAxMDIpKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcm91cGVkUmVjb3JkcyA9IGZ1bmN0aW9uIChwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCBsZXZlbCwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgcmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwSW5kZXggPSBsZXZlbDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZGF0YVNvdXJjZV8xID0gZGF0YVNvdXJjZTsgX2kgPCBkYXRhU291cmNlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2VJdGVtcyA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFTb3VyY2VJdGVtcy5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGRhdGFTb3VyY2VJdGVtcy5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFTb3VyY2VJdGVtcy5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnICsgZGF0YVNvdXJjZUl0ZW1zLmNvdW50ICsgKGRhdGFTb3VyY2UuY291bnQgPiAxID8gJyBpdGVtcycgOiAnIGl0ZW0nKTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4KS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJvdy5jZWxscy5nZXRDZWxsKGdyb3VwSW5kZXggKyAxKS5zdHlsZS5zdHJpbmdGb3JtYXQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Rm9udChmb250KTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKGJydXNoKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0QmFja2dyb3VuZEJydXNoKGJhY2tncm91bmRCcnVzaCk7XG4gICAgICAgICAgICAgICAgdmFyIHNSb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGNhcHRpb25TdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBjYXB0aW9uU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzUm93cyAhPT0gdW5kZWZpbmVkICYmIHNSb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4ICsgMSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZS5jaGlsZExldmVscyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlSXRlbXMuaXRlbXMsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIChncm91cEluZGV4ICsgMSksIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmQoYm9yZGVyLCBncmlkQ29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCBwZGZHcmlkLCAoZ3JvdXBJbmRleCArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcmlkSGVhZGVycyA9IGZ1bmN0aW9uIChjaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5Db3VudCA9IGdyaWRDb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Db3VudCArPSAoY2hpbGRMZXZlbHMgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5hZGQoY29sdW1uQ291bnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGNoaWxkTGV2ZWxzICsgMSk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwZGZHcmlkLmNvbHVtbnMuZ2V0Q29sdW1uKGkpLndpZHRoID0gMjA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmFkZChyb3dzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZEhlYWRlciA9IHBkZkdyaWQuaGVhZGVycy5nZXRIZWFkZXIoaSk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBncmlkSGVhZGVyLnN0eWxlLnNldEZvbnQoaGVhZGVyRm9udCk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRUZXh0QnJ1c2goaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyAoY2hpbGRMZXZlbHMgKyAxKSA6IDA7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JpZEhlYWRlci5jZWxscy5jb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjZWxsSW5kZXg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwucm93U3BhbiA9IHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KCdib3R0b20nLCBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCwgcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4udGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPCByb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW47IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmdldEhlYWRlcihpICsgaykuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2x1bW5TcGFuID0gcm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggKz0gY2VsbC5jb2x1bW5TcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCArPSBjZWxsLmNvbHVtblNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGogLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBkZkdyaWQuY29sdW1ucy5jb3VudCA+PSA2KSB7XG4gICAgICAgICAgICAgICAgcGRmR3JpZC5zdHlsZS5hbGxvd0hvcml6b250YWxPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGRmR3JpZDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhwb3J0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChwZGZFeHBvcnRQcm9wZXJ0aWVzLCBkYXRhU291cmNlLCBzZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRUaGVtZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHBkZkV4cG9ydFByb3BlcnRpZXMucGFnZVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGRmUGFnZVNldHRpbmdzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5vcmllbnRhdGlvbiA9IChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScpID8gZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlIDogZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uUG9ydHJhaXQ7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5zaXplID0gdGhpcy5nZXRQYWdlU2l6ZShwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5zZXRQYWdlU2V0dGluZ3MocGRmUGFnZVNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFNpemUgPSB0aGlzLnBkZkRvY3VtZW50LnBhZ2VTZXR0aW5ncy5zaXplO1xuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUG9pbnRGKDAsIGhlYWRlci5mcm9tVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGhlYWRlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl9leHBvcnRfNC5SZWN0YW5nbGVGKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC50ZW1wbGF0ZS50b3AgPSB0aGlzLmRyYXdQYWdlVGVtcGxhdGUobmV3IGVqMl9wZGZfZXhwb3J0XzQuUGRmUGFnZVRlbXBsYXRlRWxlbWVudChib3VuZHMpLCBoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9vdGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBvaW50RigwLCAoKGNsaWVudFNpemUud2lkdGggLSA4MCkgLSAoZm9vdGVyLmZyb21Cb3R0b20gKiAwLjc1KSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKChjbGllbnRTaXplLndpZHRoIC0gODApLCAoZm9vdGVyLmhlaWdodCAqIDAuNzUpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBlajJfcGRmX2V4cG9ydF80LlJlY3RhbmdsZUYocG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnRlbXBsYXRlLmJvdHRvbSA9IHRoaXMuZHJhd1BhZ2VUZW1wbGF0ZShuZXcgZWoyX3BkZl9leHBvcnRfNC5QZGZQYWdlVGVtcGxhdGVFbGVtZW50KGJvdW5kcyksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW4gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHBhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsIHNlY3Rpb246IHNlY3Rpb24gfTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3UGFnZVRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZWxlbWVudC5jb250ZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnZhbHVlID09PSAnJyB8fCBjb250ZW50LnZhbHVlID09PSB1bmRlZmluZWQgfHwgY29udGVudC52YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC52YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB0aGUgdmFsaWQgaW5wdXQgdmFsdWUgaW4gdGV4dCBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2VOdW1iZXIodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnNyYyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQuc3JjID09PSBudWxsIHx8IGNvbnRlbnQuc3JjID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHRoZSB2YWxpZCBiYXNlNjQgc3RyaW5nIGluIGltYWdlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSB1bmRlZmluZWQgfHwgY29udGVudC50eXBlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGNvbnRlbnQgdHlwZS4uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2xpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCBwb2ludHMgaW4gJyArIGNvbnRlbnQudHlwZSArICcgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHBvc2l0aW9uIGluICcgKyBjb250ZW50LnR5cGUgKyAnIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uLnggPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uLnggPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9zaXRpb24ueCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4IGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbi55ID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbi55ID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvc2l0aW9uLnkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb3NpdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gKHBhZ2VUZW1wbGF0ZSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0aGlzLmdldEZvbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLmdldEJydXNoRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgcGVuID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlbkNvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvcik7XG4gICAgICAgICAgICAgICAgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBlbkNvbG9yLnIsIHBlbkNvbG9yLmcsIHBlbkNvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicnVzaCA9PSBudWxsICYmIHBlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbnRlbnQudmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciBmb3JtYXQ7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZXRDb250ZW50Rm9ybWF0KGNvbnRlbnQsIGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIHJlc3VsdC5zaXplLndpZHRoLCByZXN1bHQuc2l6ZS5oZWlnaHQsIHJlc3VsdC5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd1BhZ2VOdW1iZXIgPSBmdW5jdGlvbiAoZG9jdW1lbnRIZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gdGhpcy5nZXRGb250KGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFnZU51bWJlciA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZlBhZ2VOdW1iZXJGaWVsZChmb250LCBicnVzaCk7XG4gICAgICAgICAgICBwYWdlTnVtYmVyLm51bWJlclN0eWxlID0gdGhpcy5nZXRQYWdlTnVtYmVyU3R5bGUoY29udGVudC5wYWdlTnVtYmVyVHlwZSk7XG4gICAgICAgICAgICB2YXIgY29tcG9zaXRlRmllbGQ7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQuaW5kZXhPZignJHRvdGFsJykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlQ291bnRGaWVsZChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID4gY29udGVudC5mb3JtYXQuaW5kZXhPZignJGN1cnJlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnJHRvdGFsJywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZU51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUNvdW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZUNvdW50RmllbGQoZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZUNvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSAnezB9JztcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBjb21wb3NpdGVGaWVsZC5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLnN0cmluZ0Zvcm1hdCA9IHJlc3VsdC5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuYm91bmRzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzQuUmVjdGFuZ2xlRih4LCB5LCByZXN1bHQuc2l6ZS53aWR0aCwgcmVzdWx0LnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLmRyYXcoZG9jdW1lbnRIZWFkZXIuZ3JhcGhpY3MsIHgsIHkpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdJbWFnZSA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnNpemUud2lkdGggKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpID8gKGNvbnRlbnQuc2l6ZS5oZWlnaHQgKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZkJpdG1hcChjb250ZW50LnNyYyk7XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgeDEgPSBjb250ZW50LnBvaW50cy54MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTEgPSBjb250ZW50LnBvaW50cy55MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeDIgPSBjb250ZW50LnBvaW50cy54MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTIgPSBjb250ZW50LnBvaW50cy55MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgcGVuID0gdGhpcy5nZXRQZW5Gcm9tQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnBlblNpemUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnBlblNpemUgIT09IG51bGwgJiYgdHlwZW9mIGNvbnRlbnQuc3R5bGUucGVuU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuLndpZHRoID0gY29udGVudC5zdHlsZS5wZW5TaXplICogMC43NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVuLmRhc2hTdHlsZSA9IHRoaXMuZ2V0RGFzaFN0eWxlKGNvbnRlbnQuc3R5bGUuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdMaW5lKHBlbiwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGlzQ2FwdGlvbiwgY2FwdGlvblJvdywgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzUm93c18xID0gc1Jvd3M7IF9pIDwgc1Jvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gc1Jvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAhY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQgfHwgY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0VGVtcGxhdGVGdW5jdGlvbih0ZW1wbGF0ZUZuLCBpLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNlbGwuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gcmVzdWx0LnRlbXBsYXRlRnVuY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gcmVzdWx0LmxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCh0eHRbMF0ud2hvbGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRTdW1tYXJ5V2l0aG91dFRlbXBsYXRlKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSAmJiB2YWx1ZVtpXSAhPT0gJycgJiYgdmFsdWVbaV0gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZVtpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRGb250KGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRUZXh0QnJ1c2goYnJ1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCYWNrZ3JvdW5kQnJ1c2goYmFja2dyb3VuZEJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSA9IHZhbHVlW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFRlbXBsYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodGVtcGxhdGVGbiwgaW5kZXgsIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBsYXRlRnVuY3Rpb246IHRlbXBsYXRlRm4sIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDogbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYXZlcmFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLnRydWVjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJ1ZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5mYWxzZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmN1c3RvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb2x1bW5Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGdyaWRDb2x1bW5zLCBwZGZHcmlkKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IChwZGZHcmlkLmNvbHVtbnMuY291bnQgLSBncmlkQ29sdW1ucy5sZW5ndGgpIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZENvbHVtbnNbaV0udGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkuZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZHcmlkLnN0eWxlLmFsbG93SG9yaXpvbnRhbE92ZXJmbG93ICYmIGdyaWRDb2x1bW5zW2ldLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkud2lkdGggPSB0eXBlb2YgZ3JpZENvbHVtbnNbaV0ud2lkdGggPT09ICdudW1iZXInID8gZ3JpZENvbHVtbnNbaV0ud2lkdGggKiAwLjc1IDogdGhpcy5oZWxwZXIuZ2V0Q29udmVydGVkV2lkdGgoZ3JpZENvbHVtbnNbaV0ud2lkdGgpICogMC43NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uIChyb3csIGJvcmRlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ncmlkVGhlbWUucmVjb3JkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ncmlkVGhlbWUucmVjb3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUucmVjb3JkLmZvbnRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZW5CcnVzaENvbG9yID0gdGhpcy5oZXhUb1JnYih0aGlzLmdyaWRUaGVtZS5yZWNvcmQuZm9udENvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgcGRmQ29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5CcnVzaENvbG9yLnIsIHBlbkJydXNoQ29sb3IuZywgcGVuQnJ1c2hDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKHBkZkNvbG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZCA9IGZ1bmN0aW9uIChib3JkZXIsIGNvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2UsIHBkZkdyaWQsIGdyb3VwSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5pc0dyb3VwaW5nID8gZ3JvdXBJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZGF0YVNvdXJjZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSB0aGlzLnNldFJlY29yZFRoZW1lU3R5bGUocGRmR3JpZC5yb3dzLmFkZFJvdygpLCBib3JkZXIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29sdW1ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpdGVtc1tjb2x1bW5zW2pdLmZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpdGVtcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5zW2pdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW46IDFcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5wZGZRdWVyeUNlbGxJbmZvLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkUm93LmNlbGxzLmdldENlbGwoaiArIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlci5mb3JtYXRDZWxsVmFsdWUoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0NlbGxTdHlsZShjZWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2xTcGFuID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChqICsgc3RhcnRJbmRleCArIDEgKyBhcmdzLmNvbFNwYW4pID4gZ3JpZFJvdy5jZWxscy5jb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY29sU3BhbiA9IGdyaWRSb3cuY2VsbHMuY291bnQgLSAoaiArIHN0YXJ0SW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uU3BhbiA9IGFyZ3MuY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY2VsbC5jb2x1bW5TcGFuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbkNlbGwgPSBncmlkUm93LmNlbGxzLmdldENlbGwoaiArIHN0YXJ0SW5kZXggKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuQ2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAoYXJncy5jb2xTcGFuIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0NlbGxTdHlsZSA9IGZ1bmN0aW9uIChjZWxsLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBiYWNrQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRCcnVzaCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoYmFja0NvbG9yLnIsIGJhY2tDb2xvci5nLCBiYWNrQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEFsaWdubWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQoYXJncy5zdHlsZS50ZXh0QWxpZ25tZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnZlcnRpY2FsQWxpZ25tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0VmVydGljYWxBbGlnbm1lbnQoYXJncy5zdHlsZS52ZXJ0aWNhbEFsaWdubWVudCwgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEJydXNoQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0QnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS50ZXh0QnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHRleHRCcnVzaENvbG9yLnIsIHRleHRCcnVzaENvbG9yLmcsIHRleHRCcnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRQZW5Db2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dFBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcih0ZXh0UGVuQ29sb3IuciwgdGV4dFBlbkNvbG9yLmcsIHRleHRQZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuYm9sZCAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuaXRhbGljICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250ID0gdGhpcy5nZXRGb250KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmQm9yZGVycygpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IGFyZ3Muc3R5bGUuYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IChib3JkZXJXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBib3JkZXJXaWR0aCA9PT0gJ251bWJlcicpID8gKGJvcmRlcldpZHRoICogMC43NSkgOiAodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigxOTYsIDE5NiwgMTk2KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5ib3JkZXIuY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9yZGVyQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUuYm9yZGVyLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihib3JkZXJDb2xvci5yLCBib3JkZXJDb2xvci5nLCBib3JkZXJDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihjb2xvciwgd2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlci5kYXNoU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwZW4uZGFzaFN0eWxlID0gdGhpcy5nZXREYXNoU3R5bGUoYXJncy5zdHlsZS5ib3JkZXIuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IHBlbjtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJvcmRlcnMgPSBib3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SG9yaXpvbnRhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh0ZXh0QWxpZ24sIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRWZXJ0aWNhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh2ZXJ0aWNhbEFsaWduLCBmb3JtYXQsIHRleHRBbGlnbikge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHRleHRBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodmVydGljYWxBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Cb3R0b207XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5NaWRkbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRGb250RmFtaWx5ID0gZnVuY3Rpb24gKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZm9udEZhbWlseSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1RpbWVzUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdDb3VyaWVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3ltYm9sJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnWmFwZkRpbmdiYXRzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0Rm9udCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAoY29udGVudC5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnN0eWxlLmZvbnRTaXplICogMC43NSkgOiA5Ljc1O1xuICAgICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSAoY29udGVudC5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQpID8gKHRoaXMuZ2V0Rm9udEZhbWlseShjb250ZW50LnN0eWxlLmZvbnRGYW1pbHkpKSA6IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2E7XG4gICAgICAgICAgICB2YXIgZm9udFN0eWxlID0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuUmVndWxhcjtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLmJvbGQpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuQm9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuaXRhbGljKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLkl0YWxpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnVuZGVybGluZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUudW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlVuZGVybGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuc3RyaWtlb3V0KSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlN0cmlrZW91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZm9udEZhbWlseSwgZm9udFNpemUsIGZvbnRTdHlsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGFnZU51bWJlclN0eWxlID0gZnVuY3Rpb24gKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbG93ZXJsYXRpbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvd2Vycm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICd1cHBlcmxhdGluJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBwZXJyb21hbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnNldENvbnRlbnRGb3JtYXQgPSBmdW5jdGlvbiAoY29udGVudCwgZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBjb250ZW50LnNpemUud2lkdGggKiAwLjc1O1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBjb250ZW50LnNpemUuaGVpZ2h0ICogMC43NTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQsIGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuTWlkZGxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5oQWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQuc3R5bGUuaEFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqdXN0aWZ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS52QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KGNvbnRlbnQuc3R5bGUudkFsaWduLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb3JtYXQ6IGZvcm1hdCwgc2l6ZTogbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYod2lkdGgsIGhlaWdodCkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VTaXplID0gZnVuY3Rpb24gKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgNzkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdub3RlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDU0MCwgNzIwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdsZWdhbCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2MTIsIDEwMDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDIzODAsIDMzNjgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ExJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDE2ODQsIDIzODApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDExOTAsIDE2ODQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDg0MiwgMTE5MCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYTUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNDIxLCA1OTUpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2E2JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDI5NywgNDIxKTtcbiAgICAgICAgICAgICAgICBjYXNlICdhNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMTAsIDI5Nyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYTgnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTQ4LCAyMTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2E5JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDEwNSwgMTQ4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyODM2LCA0MDA4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMDA0LCAyODM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNDE4LCAyMDA0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMDAyLCAxNDE4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiNCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3MDksIDEwMDIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2I1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDUwMSwgNzA5KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoYSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2NDgsIDg2NCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXJjaGInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoODY0LCAxMjk2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoYyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjk2LCAxNzI4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoZCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNzI4LCAyNTkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyNTkyLCAzNDU2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdmbHNhJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgOTM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdoYWxmbGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDM5NiwgNjEyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdsZXR0ZXIxMXgxNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3OTIsIDEyMjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZGdlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjI0LCA3OTIpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig1OTUsIDg0Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0RGFzaFN0eWxlID0gZnVuY3Rpb24gKGRhc2hTdHlsZSkge1xuICAgICAgICAgICAgc3dpdGNoIChkYXNoU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkYXNoJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnZG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGFzaGRvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Rhc2hkb3Rkb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRQZW5Gcm9tQ29udGVudCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCAmJiBjb250ZW50LnN0eWxlLnBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVuQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUucGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGVuO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEJydXNoRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBicnVzaDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5oZXhUb1JnYiA9IGZ1bmN0aW9uIChoZXgpIHtcbiAgICAgICAgICAgIGlmIChoZXggPT09IG51bGwgfHwgaGV4ID09PSAnJyB8fCBoZXgubGVuZ3RoICE9PSA3KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGhleCB2YWx1ZSBmb3IgY29sb3IuLi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhleCA9IGhleC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgYmlnaW50ID0gcGFyc2VJbnQoaGV4LCAxNik7XG4gICAgICAgICAgICB2YXIgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGcgPSAoYmlnaW50ID4+IDgpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGIgPSBiaWdpbnQgJiAyNTU7XG4gICAgICAgICAgICByZXR1cm4geyByOiByLCBnOiBnLCBiOiBiIH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBkZkV4cG9ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGRmRXhwb3J0ID0gUGRmRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcGRmLWV4cG9ydC5qc1xuLy8gbW9kdWxlIGlkID0gMTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMDFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCJcbi8vIG1vZHVsZSBpZCA9IDEwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgY29tbWFuZF9jb2x1bW5fcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29tbWFuZENvbHVtbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbW1hbmRDb2x1bW4ocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5pbml0aWF0ZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxsRmFjID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGNlbGxGYWMuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Db21tYW5kQ29sdW1uLCBuZXcgY29tbWFuZF9jb2x1bW5fcmVuZGVyZXJfMS5Db21tYW5kQ29sdW1uUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5jb21tYW5kQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0lEID0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICdidXR0b24nKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICFnT2JqLmVkaXRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldC5pZC5zcGxpdCgnXycpWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuc3RhcnRFZGl0KGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0cicpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVsZXRlUm93KGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0cicpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW4ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbW1hbmRDb2x1bW4nO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW4ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jbGljaywgdGhpcy5jb21tYW5kQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jbGljaywgdGhpcy5jb21tYW5kQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2VudGVyJyAmJiBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICdidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb21tYW5kQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db21tYW5kQ29sdW1uID0gQ29tbWFuZENvbHVtbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbW1hbmQtY29sdW1uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2J1dHRvbnNfMSwgY2VsbF9yZW5kZXJlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbW1hbmRDb2x1bW5SZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDb21tYW5kQ29sdW1uUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENvbW1hbmRDb2x1bW5SZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmJ1dHRvbkVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHt9KTtcbiAgICAgICAgICAgIF90aGlzLnVuYm91bkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVuYm91bmRjZWxsZGl2Jywgc3R5bGVzOiAnZGlzcGxheTogaW5saW5lLWJsb2NrJyB9KTtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utcm93Y2VsbCBlLXVuYm91bmRjZWxsJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDb21tYW5kQ29sdW1uUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy51bmJvdW5EaXYuY2xvbmVOb2RlKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnaXMgQ29tbWFuZCBjb2x1bW4gY29sdW1uIGhlYWRlciAnICsgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLmZpcnN0RWxlbWVudENoaWxkLCBjZWxsLmNvbHVtbi5nZXRDb2x1bW5UZW1wbGF0ZSgpKGRhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjZWxsLmNvbW1hbmRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoaXMucmVuZGVyQnV0dG9uKG5vZGUsIGNvbW1hbmQsIGF0dHJpYnV0ZXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdC1kZWxldGUnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3Mobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1zYXZlLWNhbmNlbCcpLCAnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtc2F2ZS1jYW5jZWwnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3Mobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1lZGl0LWRlbGV0ZScpLCAnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtblJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJCdXR0b24gPSBmdW5jdGlvbiAobm9kZSwgYnV0dG9uT3B0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMuYnV0dG9uRWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhidXR0b24sIHsgJ2lkJzogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIChidXR0b25PcHRpb24udHlwZSB8fCAnJykgKyAnXycgKyBpbmRleCwgJ3R5cGUnOiAnYnV0dG9uJyB9KTtcbiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYnV0dG9uT3B0aW9uLmJ1dHRvbk9wdGlvbi5jbGljaztcbiAgICAgICAgICAgIG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQobmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKGJ1dHRvbk9wdGlvbi5idXR0b25PcHRpb24sIGJ1dHRvbikuZWxlbWVudCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGJ1dHRvbk9wdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgWydlLWVkaXQtZGVsZXRlJywgJ2UtJyArIGJ1dHRvbk9wdGlvbi50eXBlICsgJ2J1dHRvbiddKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgWydlLXNhdmUtY2FuY2VsJywgJ2UtJyArIGJ1dHRvbk9wdGlvbi50eXBlICsgJ2J1dHRvbiddKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRDb2x1bW5SZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkNvbW1hbmRDb2x1bW5SZW5kZXJlciA9IENvbW1hbmRDb2x1bW5SZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYWN0aW9ucy9yZXNpemVcIiwgXCIuLi9hY3Rpb25zL3BhZ2VcIiwgXCIuLi9hY3Rpb25zL2dyb3VwXCIsIFwiLi4vYWN0aW9ucy9zb3J0XCIsIFwiLi4vYWN0aW9ucy9wZGYtZXhwb3J0XCIsIFwiLi4vYWN0aW9ucy9leGNlbC1leHBvcnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfbmF2aWdhdGlvbnNfMSwgZXZlbnRzLCByZXNpemVfMSwgcGFnZV8xLCBncm91cF8xLCBzb3J0XzEsIHBkZl9leHBvcnRfMSwgZXhjZWxfZXhwb3J0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5tZW51Q2xhc3MgPSB7XG4gICAgICAgIGhlYWRlcjogJy5lLWdyaWRoZWFkZXInLFxuICAgICAgICBjb250ZW50OiAnLmUtZ3JpZGNvbnRlbnQnLFxuICAgICAgICBlZGl0OiAnLmUtaW5saW5lLWVkaXQnLFxuICAgICAgICBlZGl0SWNvbjogJ2UtZWRpdCcsXG4gICAgICAgIHBhZ2VyOiAnLmUtZ3JpZHBhZ2VyJyxcbiAgICAgICAgZGVsZXRlOiAnZS1kZWxldGUnLFxuICAgICAgICBzYXZlOiAnZS1zYXZlJyxcbiAgICAgICAgY2FuY2VsOiAnZS1jYW5jZWwnLFxuICAgICAgICBjb3B5OiAnZS1jb3B5JyxcbiAgICAgICAgcGRmOiAnZS1wZGZleHBvcnQnLFxuICAgICAgICBncm91cDogJ2UtaWNvbi1ncm91cCcsXG4gICAgICAgIHVuZ3JvdXA6ICdlLWljb24tdW5ncm91cCcsXG4gICAgICAgIGNzdjogJ2UtY3N2ZXhwb3J0JyxcbiAgICAgICAgZXhjZWw6ICdlLWV4Y2VsZXhwb3J0JyxcbiAgICAgICAgZlBhZ2U6ICdlLWljb24tZmlyc3QnLFxuICAgICAgICBuUGFnZTogJ2UtaWNvbi1uZXh0JyxcbiAgICAgICAgbFBhZ2U6ICdlLWljb24tbGFzdCcsXG4gICAgICAgIHBQYWdlOiAnZS1pY29uLXByZXYnLFxuICAgICAgICBhc2NlbmRpbmc6ICdlLWljb24tYXNjZW5kaW5nJyxcbiAgICAgICAgZGVzY2VuZGluZzogJ2UtaWNvbi1kZXNjZW5kaW5nJyxcbiAgICAgICAgZ3JvdXBIZWFkZXI6ICdlLWdyb3VwZHJvcGFyZWEnLFxuICAgICAgICB0b3VjaFBvcDogJ2UtZ3JpZHBvcHVwJ1xuICAgIH07XG4gICAgdmFyIENvbnRleHRNZW51ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29udGV4dE1lbnUocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SXRlbXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmxvY2FsZVRleHQgPSB0aGlzLnNldExvY2FsZUtleSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd1bCcsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ19jbWVudScgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJyMnICsgdGhpcy5ncmlkSUQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KHtcbiAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5nZXRNZW51SXRlbXMoKSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBlbmFibGVQZXJzaXN0ZW5jZTogdGhpcy5wYXJlbnQuZW5hYmxlUGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiB0aGlzLmNvbnRleHRNZW51SXRlbUNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogdGhpcy5jb250ZXh0TWVudUJlZm9yZU9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvbk9wZW46IHRoaXMuY29udGV4dE1lbnVPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5jb250ZXh0TWVudU9uQ2xvc2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtZ3JpZC1tZW51J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWVudUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZXhwb3J0SXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5jb250ZXh0TWVudUl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgdGhpcy5nZXREZWZhdWx0SXRlbXMoKS5pbmRleE9mKGl0ZW0pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2V4cG9ydCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0SXRlbXMucHVzaCh0aGlzLmJ1aWxkRGVmYXVsdEl0ZW1zKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtcy5wdXNoKHRoaXMuYnVpbGREZWZhdWx0SXRlbXMoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhwb3J0SXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBleHBvcnRHcm91cCA9IHRoaXMuYnVpbGREZWZhdWx0SXRlbXMoJ2V4cG9ydCcpO1xuICAgICAgICAgICAgICAgIGV4cG9ydEdyb3VwLml0ZW1zID0gZXhwb3J0SXRlbXM7XG4gICAgICAgICAgICAgICAgbWVudUl0ZW1zLnB1c2goZXhwb3J0R3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lbnVJdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldExhc3RQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvdGFscGFnZSA9IE1hdGguZmxvb3IodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQgJSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUpIHtcbiAgICAgICAgICAgICAgICB0b3RhbHBhZ2UgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b3RhbHBhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudUl0ZW1DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0QWxsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnMoW10pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnModGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwQ29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnVuZ3JvdXBDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5kZWxldGVSb3codGhpcy5wYXJlbnQuZ2V0Um93QnlJbmRleCh0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY29weSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGRmRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucGRmRXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4Y2VsRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZXhjZWxFeHBvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3N2RXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY3N2RXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRBc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0Q29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkLCAnYXNjZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnREZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCwgJ2Rlc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UodGhpcy5nZXRMYXN0UGFnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbmV4dFBhZ2UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nb1RvUGFnZSh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jb250ZXh0TWVudUNsaWNrLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNvbnRleHRNZW51T25DbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudE9iaic7XG4gICAgICAgICAgICBpZiAoYXJncy5pdGVtcy5sZW5ndGggPiAwICYmIGFyZ3MuaXRlbXNbMF1bcGFyZW50XSBpbnN0YW5jZW9mIGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJdGVtU3RhdHVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMb2NhbGVUZXh0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQodGhpcy5sb2NhbGVUZXh0W2l0ZW1dKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnVwZGF0ZUl0ZW1TdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNob3dJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuZW5hYmxlSXRlbXModGhpcy5kaXNhYmxlSXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudUJlZm9yZU9wZW4gPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDb2x1bW4gPSB0aGlzLmdldENvbHVtbihhcmdzLmV2ZW50KTtcbiAgICAgICAgICAgIGlmIChhcmdzLmV2ZW50ICYmIChlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuJyArIGV4cG9ydHMubWVudUNsYXNzLmdyb3VwSGVhZGVyKVxuICAgICAgICAgICAgICAgIHx8IGVqMl9iYXNlXzEuY2xvc2VzdChhcmdzLmV2ZW50LnRhcmdldCwgJy4nICsgZXhwb3J0cy5tZW51Q2xhc3MudG91Y2hQb3ApKSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gYXJncy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXlGcm9tSWQoaXRlbS5pZCk7XG4gICAgICAgICAgICAgICAgdmFyIGRJdGVtID0gdGhpcy5kZWZhdWx0SXRlbXNba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXREZWZhdWx0SXRlbXMoKS5pbmRleE9mKGtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuc3VyZURpc2FibGVkU3RhdHVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5ldmVudCAmJiBlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsIGV4cG9ydHMubWVudUNsYXNzLmVkaXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnc2F2ZScgJiYga2V5ICE9PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuSXRlbXMucHVzaChpdGVtLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wYXJlbnRJdGVtKSAmJiBhcmdzLmV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MuZXZlbnQudGFyZ2V0LCBkSXRlbS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnRhcmdldCAmJiBhcmdzLmV2ZW50ICYmXG4gICAgICAgICAgICAgICAgICAgICFlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsIGl0ZW0udGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmhpZGVJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRBcmdzID0gYXJncy5ldmVudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbnRleHRNZW51T3BlbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAodGhpcy5oaWRkZW5JdGVtcy5sZW5ndGggPT09IGFyZ3MuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJdGVtU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgYXJncy5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5zdXJlRGlzYWJsZWRTdGF0dXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXRBbGwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXQnOlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocmVzaXplXzEuUmVzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgfHwgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApICYmIHRoaXMudGFyZ2V0Q29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnRhcmdldENvbHVtbi5maWVsZCkgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyB8fCAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cClcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSAmJiB0aGlzLnRhcmdldENvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKSA8IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvcHknOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoIXRoaXMucGFyZW50LmFsbG93RXhjZWxFeHBvcnQgJiYgIXRoaXMucGFyZW50LmV4Y2VsRXhwb3J0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBkZl9leHBvcnRfMS5QZGZFeHBvcnQpICYmICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChleGNlbF9leHBvcnRfMS5FeGNlbEV4cG9ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGRmRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dQZGZFeHBvcnQpIHx8ICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChwZGZfZXhwb3J0XzEuUGRmRXhwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3N2RXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dFeGNlbEV4cG9ydCkgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGV4Y2VsX2V4cG9ydF8xLkV4Y2VsRXhwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoIXRoaXMucGFyZW50LmFsbG93U29ydGluZykgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChzb3J0XzEuU29ydCkgJiYgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCAmJiB0aGlzLnRhcmdldENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmZpZWxkID09PSBfdGhpcy50YXJnZXRDb2x1bW4uZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZWxlbWVudC5kaXJlY3Rpb24gPT09IGl0ZW0ucmVwbGFjZSgnc29ydCcsICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdwcmV2UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSAmJiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICBjYXNlICduZXh0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSAmJiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPT09IHRoaXMuZ2V0TGFzdFBhZ2UoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0Q29udGV4dE1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY29udGV4dE1lbnUnO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkSUQgKyAnX2NtZW51XycgKyBpdGVtO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0S2V5RnJvbUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQucmVwbGFjZSh0aGlzLmdyaWRJRCArICdfY21lbnVfJywgJycpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuYnVpbGREZWZhdWx0SXRlbXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtO1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdEFsbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZ3JvdXAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MudW5ncm91cCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZWRpdEljb24gfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZGVsZXRlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5lZGl0LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5zYXZlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmVkaXQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmNhbmNlbCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb3B5JzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuY29weSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5jb250ZW50IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BkZkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLnBkZiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmV4Y2VsIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NzdkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmNzdiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuaGVhZGVyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5hc2NlbmRpbmcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5oZWFkZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmRlc2NlbmRpbmcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmZQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLnBQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmxQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25leHRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLm5QYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SXRlbXNbaXRlbV0gPSB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRMb2NhbGVUZXh0KGl0ZW0pLCBpZDogdGhpcy5nZW5lcmF0ZUlEKGl0ZW0pLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbWVudUl0ZW0udGFyZ2V0LCBpY29uQ3NzOiBtZW51SXRlbS5pY29uQ3NzID8gJ2UtaWNvbnMgJyArIG1lbnVJdGVtLmljb25Dc3MgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRJdGVtc1tpdGVtXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldERlZmF1bHRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ2F1dG9GaXRBbGwnLCAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJywgJ3VuZ3JvdXAnLCAnZWRpdCcsICdkZWxldGUnLCAnc2F2ZScsICdjYW5jZWwnLCAnY29weScsICdleHBvcnQnLFxuICAgICAgICAgICAgICAgICdwZGZFeHBvcnQnLCAnZXhjZWxFeHBvcnQnLCAnY3N2RXhwb3J0JywgJ3NvcnRBc2NlbmRpbmcnLCAnc29ydERlc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgICdmaXJzdFBhZ2UnLCAncHJldlBhZ2UnLCAnbGFzdFBhZ2UnLCAnbmV4dFBhZ2UnXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNldExvY2FsZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2F1dG9GaXRBbGwnOiAnYXV0b0ZpdEFsbCcsXG4gICAgICAgICAgICAgICAgJ2F1dG9GaXQnOiAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2NvcHknOiAnQ29weScsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJzogJ0dyb3VwJyxcbiAgICAgICAgICAgICAgICAndW5ncm91cCc6ICdVbmdyb3VwJyxcbiAgICAgICAgICAgICAgICAnZWRpdCc6ICdFZGl0UmVjb3JkJyxcbiAgICAgICAgICAgICAgICAnZGVsZXRlJzogJ0RlbGV0ZVJlY29yZCcsXG4gICAgICAgICAgICAgICAgJ3NhdmUnOiAnU2F2ZScsXG4gICAgICAgICAgICAgICAgJ2NhbmNlbCc6ICdDYW5jZWxCdXR0b24nLFxuICAgICAgICAgICAgICAgICdwZGZFeHBvcnQnOiAnUGRmZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnZXhjZWxFeHBvcnQnOiAnRXhjZWxleHBvcnQnLFxuICAgICAgICAgICAgICAgICdjc3ZFeHBvcnQnOiAnQ3N2ZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnZXhwb3J0JzogJ0V4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ3NvcnRBc2NlbmRpbmcnOiAnU29ydEFzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgJ3NvcnREZXNjZW5kaW5nJzogJ1NvcnREZXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnZmlyc3RQYWdlJzogJ0ZpcnN0UGFnZScsXG4gICAgICAgICAgICAgICAgJ2xhc3RQYWdlJzogJ0xhc3RQYWdlJyxcbiAgICAgICAgICAgICAgICAncHJldlBhZ2UnOiAnUHJldmlvdXNQYWdlJyxcbiAgICAgICAgICAgICAgICAnbmV4dFBhZ2UnOiAnTmV4dFBhZ2UnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0Q29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAndGguZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBjZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh1aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RyLmUtcm93Jyk7XG4gICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KHRoaXMucGFyZW50LmdldERhdGFSb3dzKCkuaW5kZXhPZihyb3cpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRleHRNZW51O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZXh0TWVudSA9IENvbnRleHRNZW51O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvY29udGV4dC1tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL2ZyZWV6ZS1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZW51bV8xLCBmcmVlemVfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnJlZXplID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRnJlZXplKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmcmVlemUnO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZS5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgZnJlZXplX3JlbmRlcmVyXzEuRnJlZXplUmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgZnJlZXplX3JlbmRlcmVyXzEuRnJlZXplQ29udGVudFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cyAmJiAhdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyBmcmVlemVfcmVuZGVyZXJfMS5GcmVlemVDb250ZW50UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGcmVlemU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZyZWV6ZSA9IEZyZWV6ZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2ZyZWV6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2hlYWRlci1yZW5kZXJlclwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2ZyZWV6ZS1yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGZyZWV6ZV9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnJlZXplQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGcmVlemVDb250ZW50UmVuZGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGcmVlemVDb250ZW50UmVuZGVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyUGFuZWwuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mcm96ZW5jb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1vdmFibGVjb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChmRGl2KTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChtRGl2KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZyb3plbkNvbnRlbnQoZkRpdik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNb3ZhYmxlQ29udGVudChtRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyRW1wdHkuY2FsbCh0aGlzLCB0Ym9keSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICc8dHI+PHRkPjwvdGQ+PC90cj4nO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5oZWFkZXInKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRGcm96ZW5Db250ZW50ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5mcm96ZW5Db250ZW50ID0gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRNb3ZhYmxlQ29udGVudCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMubW92YWJsZUNvbnRlbnQgPSBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZUNvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldEZyb3plbkNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm96ZW5Db250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb3ZhYmxlQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmFibGVDb250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZnJlZXplX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5GcmVlemVSb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZUNvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZyb3plbkNvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgICAgIHZhciBtVGJsID0gdGhpcy5nZXRUYWJsZSgpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdmFibGVDb250ZW50KCkuYXBwZW5kQ2hpbGQobVRibCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLmNsYXNzTGlzdC5hZGQoJ2UtZnJvemVuaGRyY29udCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRnJlZXplQ29udGVudFJlbmRlcjtcbiAgICB9KGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKSk7XG4gICAgZXhwb3J0cy5GcmVlemVDb250ZW50UmVuZGVyID0gRnJlZXplQ29udGVudFJlbmRlcjtcbiAgICB2YXIgRnJlZXplUmVuZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZyZWV6ZVJlbmRlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRnJlZXplUmVuZGVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5mcmVlemVSZW5kZXIsIHRoaXMucmVmcmVzaEZyZWV6ZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJmc2hNb3ZhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclBhbmVsLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgZkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZyb3plbmhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgbURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1vdmFibGVoZWFkZXInIH0pO1xuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoZkRpdik7XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChtRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0RnJvemVuSGVhZGVyKGZEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRNb3ZhYmxlSGVhZGVyKG1EaXYpO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUhlYWRlcigpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoVUkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmZzaE1vdmFibGUoKTtcbiAgICAgICAgICAgIHZhciBtVGFibGUgPSB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKSk7XG4gICAgICAgICAgICBtVGFibGUuaW5zZXJ0QmVmb3JlKHRoaXMucmVuZGVyTW92YWJsZSh0aGlzLmdldEZyb3plbkhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykpLCBtVGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQnKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmZzaE1vdmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdldEZyb3plbkhlYWRlcigpLmFwcGVuZENoaWxkKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRnJlZXplKHsgY2FzZTogJ2ZpbHRlcicgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZyZWV6ZVJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoRnJlZXplID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5jYXNlID09PSAnZmlsdGVyJykge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJSb3cgPSB0aGlzLmdldFRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZmlsdGVyYmFyJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93RmlsdGVyaW5nICYmIGZpbHRlclJvdyAmJiB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlck1vdmFibGUoZmlsdGVyUm93KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob2JqLmNhc2UgPT09ICd0ZXh0d3JhcCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZlJvd3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIG1Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwTW9kZSA9IHRoaXMucGFyZW50LnRleHRXcmFwU2V0dGluZ3Mud3JhcE1vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBNb2RlICE9PSAnaGVhZGVyJyB8fCBvYmouaXNNb2RlQ2hnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZSb3dzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmUtZnJvemVuY29udGVudCcpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgIG1Sb3dzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdyYXBIZWlnaHQoZlJvd3MsIG1Sb3dzLCBvYmouaXNNb2RlQ2hnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBNb2RlID09PSAnY29udGVudCcgJiYgdGhpcy5wYXJlbnQuYWxsb3dUZXh0V3JhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgnZS13cmFwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdlLXdyYXAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAod3JhcE1vZGUgPT09ICdib3RoJyB8fCBvYmouaXNNb2RlQ2hnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmUm93cyA9IHRoaXMuZ2V0RnJvemVuSGVhZGVyKCkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1Sb3dzID0gdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZSb3dzID0gdGhpcy5nZXRGcm96ZW5IZWFkZXIoKS5xdWVyeVNlbGVjdG9yKHdyYXBNb2RlID09PSAnY29udGVudCcgPyAndGJvZHknIDogJ3RoZWFkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1Sb3dzID0gdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3Rvcih3cmFwTW9kZSA9PT0gJ2NvbnRlbnQnID8gJ3Rib2R5JyA6ICd0aGVhZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXcmFwSGVpZ2h0KGZSb3dzLCBtUm93cywgb2JqLmlzTW9kZUNoZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnNldFdyYXBIZWlnaHQgPSBmdW5jdGlvbiAoZlJvd3MsIG1Sb3dzLCBpc01vZGVDaGcsIGlzQ29udFJlc2V0KSB7XG4gICAgICAgICAgICB2YXIgZlJvd0hndDtcbiAgICAgICAgICAgIHZhciBtUm93SGd0O1xuICAgICAgICAgICAgdmFyIGlzV3JhcCA9IHRoaXMucGFyZW50LmFsbG93VGV4dFdyYXA7XG4gICAgICAgICAgICB2YXIgd3JhcE1vZGUgPSB0aGlzLnBhcmVudC50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlO1xuICAgICAgICAgICAgdmFyIHRIZWFkID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJyk7XG4gICAgICAgICAgICB2YXIgdEJvZHkgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBmUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpc01vZGVDaGcgJiYgKCh3cmFwTW9kZSA9PT0gJ2hlYWRlcicgJiYgaXNDb250UmVzZXQpIHx8ICgod3JhcE1vZGUgPT09ICdjb250ZW50JyAmJiB0SGVhZC5jb250YWlucyhmUm93c1tpXSkpXG4gICAgICAgICAgICAgICAgICAgIHx8ICh3cmFwTW9kZSA9PT0gJ2hlYWRlcicgJiYgdEJvZHkuY29udGFpbnMoZlJvd3NbaV0pKSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZSb3dzW2ldLnN0eWxlLmhlaWdodCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG1Sb3dzW2ldLnN0eWxlLmhlaWdodCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZSb3dIZ3QgPSBmUm93c1tpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgbVJvd0hndCA9IG1Sb3dzW2ldLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoKGlzV3JhcCAmJiBmUm93SGd0IDwgbVJvd0hndCkgfHwgKCFpc1dyYXAgJiYgZlJvd0hndCA+IG1Sb3dIZ3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZSb3dzW2ldLnN0eWxlLmhlaWdodCA9IG1Sb3dIZ3QgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgoaXNXcmFwICYmIGZSb3dIZ3QgPiBtUm93SGd0KSB8fCAoIWlzV3JhcCAmJiBmUm93SGd0IDwgbVJvd0hndCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbVJvd3NbaV0uc3R5bGUuaGVpZ2h0ID0gZlJvd0hndCArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnNldEZyb3plbkhlYWRlciA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvemVuSGVhZGVyID0gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnNldE1vdmFibGVIZWFkZXIgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmFibGVIZWFkZXIgPSBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUuZ2V0RnJvemVuSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvemVuSGVhZGVyO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLmdldE1vdmFibGVIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3ZhYmxlSGVhZGVyO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnJlbmRlck1vdmFibGUgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgbUVsZSA9IGVsZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnM7IGkrKykge1xuICAgICAgICAgICAgICAgIG1FbGUucmVtb3ZlQ2hpbGQobUVsZS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucywgbGVuID0gZWxlLmNoaWxkRWxlbWVudENvdW50OyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2hpbGQoZWxlLmNoaWxkcmVuW2VsZS5jaGlsZEVsZW1lbnRDb3VudCAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtRWxlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRnJlZXplUmVuZGVyO1xuICAgIH0oaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKSk7XG4gICAgZXhwb3J0cy5GcmVlemVSZW5kZXIgPSBGcmVlemVSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZnJlZXplLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnJlZXplUm93TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGcmVlemVSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGcnpMb2FkID0gMTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5yb3dNb2RlbEdlbmVyYXRvciA9IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIEZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgbm90aWZ5QXJncykge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMucm93TW9kZWxHZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGEsIG5vdGlmeUFyZ3MpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRnJ6TG9hZCAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tpXS5jZWxscyA9IHJvd1tpXS5jZWxscy5zbGljZSh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zLCByb3dbaV0uY2VsbHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tpXS5jZWxscyA9IHJvd1tpXS5jZWxscy5zbGljZSgwLCB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNGcnpMb2FkKys7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRnJlZXplUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yID0gRnJlZXplUm93TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvZnJlZXplLXJvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDEwN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4uL2FjdGlvbnMvZ3JvdXBcIiwgXCIuLi9hY3Rpb25zL3NvcnRcIiwgXCIuLi9hY3Rpb25zL2ZpbHRlclwiLCBcIi4uL2FjdGlvbnMvcmVzaXplXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX25hdmlnYXRpb25zXzEsIHV0aWxfMSwgZXZlbnRzLCBlajJfcG9wdXBzXzEsIGVqMl9idXR0b25zXzEsIGdyb3VwXzEsIHNvcnRfMSwgZmlsdGVyXzEsIHJlc2l6ZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5NZW51ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uTWVudShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRJdGVtcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVUZXh0ID0gdGhpcy5zZXRMb2NhbGVLZXkoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5HUk9VUCA9ICdlLWljb24tZ3JvdXAnO1xuICAgICAgICAgICAgdGhpcy5VTkdST1VQID0gJ2UtaWNvbi11bmdyb3VwJztcbiAgICAgICAgICAgIHRoaXMuQVNDRU5ESU5HID0gJ2UtaWNvbi1hc2NlbmRpbmcnO1xuICAgICAgICAgICAgdGhpcy5ERVNDRU5ESU5HID0gJ2UtaWNvbi1kZXNjZW5kaW5nJztcbiAgICAgICAgICAgIHRoaXMuUk9PVCA9ICdlLWNvbHVtbm1lbnUnO1xuICAgICAgICAgICAgdGhpcy5GSUxURVIgPSAnZS1pY29uLWZpbHRlcic7XG4gICAgICAgICAgICB0aGlzLlBPUCA9ICdlLWZpbHRlci1wb3B1cCc7XG4gICAgICAgICAgICB0aGlzLldSQVAgPSAnZS1jb2wtbWVudSc7XG4gICAgICAgICAgICB0aGlzLkNIT09TRVIgPSAnX2Nob29zZXJfJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkSUQgPSBwYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5NZW51SGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZWxlLCAnbW91c2Vkb3duJywgX3RoaXMuY29sdW1uTWVudUhhbmRsZXJEb3duLCBfdGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1uTWVudUhhbmRsZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgJ21vdXNlZG93bicsIF90aGlzLmNvbHVtbk1lbnVIYW5kbGVyRG93bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRmlsdGVyRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuY29sdW1uTWVudUhhbmRsZXJDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbHVtbm1lbnUnKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuQ29sdW1uTWVudShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5oZWFkZXJDZWxsICE9PSB0aGlzLmdldEhlYWRlckNlbGwoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkNvbHVtbk1lbnUoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLm9wZW5Db2x1bW5NZW51ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpibG9jazt2aXNpYmlsaXR5OmhpZGRlbic7XG4gICAgICAgICAgICB2YXIgZWxlUG9zID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpub25lO3Zpc2liaWxpdHk6dmlzaWJsZSc7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckNlbGwgPSB0aGlzLmdldEhlYWRlckNlbGwoZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgcG9zLnRvcCA9ICgod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSAoZWxlUG9zLmhlaWdodCAvIDIpKTtcbiAgICAgICAgICAgICAgICBwb3MubGVmdCA9ICgod2luZG93LmlubmVyV2lkdGggLyAyKSAtIChlbGVQb3Mud2lkdGggLyAyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmhlYWRlckNlbGwsICdsZWZ0JywgJ2JvdHRvbScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVBvc2l0aW9uKHRoaXMuaGVhZGVyQ2VsbCwgJ3JpZ2h0JywgJ2JvdHRvbScpO1xuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSBlbGVQb3Mud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51Lm9wZW4ocG9zLnRvcCwgcG9zLmxlZnQpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51SGFuZGxlckRvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSAhKHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0Q29sdW1uTWVudUhhbmRsZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIHRoaXMuUk9PVCkpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZpbHRlckl0ZW1BZGRlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlckRpYWxvZ0NyZWF0ZWQsIHRoaXMuZmlsdGVyUG9zaXRpb24sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNvbHVtbk1lbnVIYW5kbGVyQ2xpY2ssIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMudW53aXJlRXZlbnRzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGaWx0ZXJJdGVtQWRkZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyRGlhbG9nQ3JlYXRlZCwgdGhpcy5maWx0ZXJQb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNvbHVtbk1lbnVIYW5kbGVyQ2xpY2spO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd1bCcsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ19jb2x1bW5tZW51JywgY2xhc3NOYW1lOiAnZS1jb2xtZW51JyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudSA9IG5ldyBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSh7XG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWdyaWQtbWVudScsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgZW5hYmxlUGVyc2lzdGVuY2U6IHRoaXMucGFyZW50LmVuYWJsZVBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldEl0ZW1zKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0OiB0aGlzLmNvbHVtbk1lbnVJdGVtQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiB0aGlzLmNvbHVtbk1lbnVCZWZvcmVPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5jb2x1bW5NZW51T25DbG9zZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGJlZm9yZUl0ZW1SZW5kZXI6IHRoaXMuYmVmb3JlTWVudUl0ZW1SZW5kZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogdGhpcy5jb2x1bW5NZW51QmVmb3JlQ2xvc2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2lyZUZpbHRlckV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS53aXJlRmlsdGVyRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgdGhpcy5pc0ZpbHRlckl0ZW1BZGRlZCgpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMuYXBwZW5kRmlsdGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUudW53aXJlRmlsdGVyRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgdGhpcy5pc0ZpbHRlckl0ZW1BZGRlZCgpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMuYXBwZW5kRmlsdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuYmVmb3JlTWVudUl0ZW1SZW5kZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaG9vc2VySXRlbShhcmdzLml0ZW0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5nZXRLZXlGcm9tSWQoYXJncy5pdGVtLmlkLCB0aGlzLkNIT09TRVIpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2sgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KGZhbHNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhcmdzLml0ZW0udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogY29sdW1uLnZpc2libGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrLmNsYXNzTGlzdC5hZGQoJ2UtcnRsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5pdGVtLmlkICYmIHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCkgPT09ICdmaWx0ZXInKSB7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWNhcmV0JyB9KSk7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmNsYXNzTmFtZSArPSAnZS1maWx0ZXItaXRlbSBlLW1lbnUtY2FyZXQtaWNvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVCZWZvcmVDbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wYXJlbnRJdGVtKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MucGFyZW50SXRlbS5pZCkgPT09ICdjb2x1bW5DaG9vc2VyJyAmJlxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xvc2VzdChhcmdzLmV2ZW50LnRhcmdldCwgJy5lLW1lbnUtcGFyZW50JykpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmdzLmV2ZW50ICYmIChlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuJyArIHRoaXMuUE9QKVxuICAgICAgICAgICAgICAgIHx8ICh1dGlsXzEucGFyZW50c1VudGlsKGFyZ3MuZXZlbnQudGFyZ2V0LCAnZS1wb3B1cCcpKSkpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmlzQ2hvb3Nlckl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgJiYgaXRlbS5pZC5pbmRleE9mKCdfY29sbWVudV8nKSA+PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRLZXlGcm9tSWQoaXRlbS5pZCwgdGhpcy5DSE9PU0VSKS5pbmRleE9mKCdfY29sbWVudV8nKSA9PT0gLTE7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVCZWZvcmVPcGVuID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuY29sdW1uID0gdGhpcy50YXJnZXRDb2x1bW4gPSB0aGlzLmdldENvbHVtbigpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29sdW1uTWVudU9wZW4sIGFyZ3MpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGFyZ3MuaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgIHZhciBkSXRlbSA9IHRoaXMuZGVmYXVsdEl0ZW1zW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RGVmYXVsdEl0ZW1zKCkuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbnN1cmVEaXNhYmxlZFN0YXR1cyhrZXkpICYmICFkSXRlbS5oaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVJdGVtcy5wdXNoKGl0ZW0udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5oaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5lbmFibGVJdGVtcyh0aGlzLmRpc2FibGVJdGVtcywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmhpZGVJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZW5zdXJlRGlzYWJsZWRTdGF0dXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyb3VwJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nIHx8ICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSAmJiB0aGlzLnRhcmdldENvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy50YXJnZXRDb2x1bW4uZmllbGQpID49IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXRBbGwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXQnOlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocmVzaXplXzEuUmVzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cCkgfHwgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApICYmIHRoaXMudGFyZ2V0Q29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnRhcmdldENvbHVtbi5maWVsZCkgPCAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1NvcnRpbmcgJiYgdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoc29ydF8xLlNvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMudGFyZ2V0Q29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0U2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLmZpZWxkID09PSBfdGhpcy50YXJnZXRDb2x1bW4uZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZWxlLmRpcmVjdGlvbiA9PT0gaXRlbS5yZXBsYWNlKCdzb3J0JywgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5wYXJlbnQuYWxsb3dTb3J0aW5nIHx8ICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChzb3J0XzEuU29ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlsdGVyJzpcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gISh0aGlzLnBhcmVudC5hbGxvd0ZpbHRlcmluZyAmJiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSAhPT0gJ2ZpbHRlcmJhcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChmaWx0ZXJfMS5GaWx0ZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVJdGVtQ2xpY2sgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmlzQ2hvb3Nlckl0ZW0oYXJncy5pdGVtKSA/ICdjb2x1bW5DaG9vc2VyJyA6IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnModGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0QWxsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnMoW10pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1bmdyb3VwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudW5ncm91cENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyb3VwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCwgJ2FzY2VuZGluZycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNvcnRDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQsICdkZXNjZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbkNob29zZXInOlxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXlGcm9tSWQoYXJncy5pdGVtLmlkLCB0aGlzLkNIT09TRVIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSBhcmdzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2hlY2tib3gtd3JhcHBlciAuZS1mcmFtZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tib3ggJiYgY2hlY2tib3guY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2hlY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVDb2x1bW4oa2V5LCAnZmllbGQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2hvd0NvbHVtbihrZXksICdmaWVsZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZCgnZS1jaGVjaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyKGFyZ3MuZWxlbWVudCwgYXJncy5pdGVtLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jb2x1bW5NZW51Q2xpY2ssIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51T25DbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudE9iaic7XG4gICAgICAgICAgICBpZiAoYXJncy5pdGVtcy5sZW5ndGggPiAwICYmIGFyZ3MuaXRlbXNbMF1bcGFyZW50XSBpbnN0YW5jZW9mIGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5zaG93SXRlbXModGhpcy5oaWRkZW5JdGVtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRmlsdGVyUG9wdXBPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGaWx0ZXIoYXJncy5lbGVtZW50LCBhcmdzLmVsZW1lbnQuaWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RGVmYXVsdEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnYXV0b0ZpdEFsbCcsICdhdXRvRml0JywgJ3NvcnRBc2NlbmRpbmcnLCAnc29ydERlc2NlbmRpbmcnLCAnZ3JvdXAnLCAndW5ncm91cCcsICdjb2x1bW5DaG9vc2VyJywgJ2ZpbHRlciddO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRlZnVsdEl0ZW1zID0gdGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zID8gdGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zIDogdGhpcy5nZXREZWZhdWx0KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRlZnVsdEl0ZW1zXzEgPSBkZWZ1bHRJdGVtczsgX2kgPCBkZWZ1bHRJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGVmdWx0SXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gJ2NvbHVtbkNob29zZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXREZWZhdWx0SXRlbShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5pdGVtcyA9IHRoaXMuY3JlYXRlQ2hvb3Nlckl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGNvbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXMuZ2V0RGVmYXVsdEl0ZW0oaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RGVmYXVsdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IGljb25Dc3M6IHRoaXMuQVNDRU5ESU5HIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnREZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IGljb25Dc3M6IHRoaXMuREVTQ0VORElORyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkdST1VQIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgaWNvbkNzczogdGhpcy5VTkdST1VQIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkZJTFRFUiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TG9jYWxlVGV4dChpdGVtKSwgaWQ6IHRoaXMuZ2VuZXJhdGVJRChpdGVtKSxcbiAgICAgICAgICAgICAgICBpY29uQ3NzOiBtZW51SXRlbS5pY29uQ3NzID8gJ2UtaWNvbnMgJyArIG1lbnVJdGVtLmljb25Dc3MgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRJdGVtc1tpdGVtXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0TG9jYWxlVGV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sMTBuLmdldENvbnN0YW50KHRoaXMubG9jYWxlVGV4dFtpdGVtXSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdlbmVyYXRlSUQgPSBmdW5jdGlvbiAoaXRlbSwgYXBwZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkSUQgKyAnX2NvbG1lbnVfJyArIChhcHBlbmQgPyBhcHBlbmQgKyBpdGVtIDogaXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEtleUZyb21JZCA9IGZ1bmN0aW9uIChpZCwgYXBwZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQucmVwbGFjZSh0aGlzLmdyaWRJRCArICdfY29sbWVudV8nICsgKGFwcGVuZCA/IGFwcGVuZCA6ICcnKSwgJycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRDb2x1bW5NZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY29sdW1uTWVudSc7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLnNldExvY2FsZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2F1dG9GaXRBbGwnOiAnYXV0b0ZpdEFsbCcsXG4gICAgICAgICAgICAgICAgJ2F1dG9GaXQnOiAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJzogJ0dyb3VwJyxcbiAgICAgICAgICAgICAgICAndW5ncm91cCc6ICdVbmdyb3VwJyxcbiAgICAgICAgICAgICAgICAnc29ydEFzY2VuZGluZyc6ICdTb3J0QXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnc29ydERlc2NlbmRpbmcnOiAnU29ydERlc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW5DaG9vc2VyJzogJ0NvbHVtbmNob29zZXInLFxuICAgICAgICAgICAgICAgICdmaWx0ZXInOiAnRmlsdGVyTWVudSdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEhlYWRlckNlbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RoLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRDb2x1bW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJDZWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVpZCA9IHRoaXMuaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jcmVhdGVDaG9vc2VySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnNob3dJbkNvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IGlkOiB0aGlzLmdlbmVyYXRlSUQoY29sLmZpZWxkLCB0aGlzLkNIT09TRVIpLCB0ZXh0OiBjb2wuaGVhZGVyVGV4dCA/IGNvbC5oZWFkZXJUZXh0IDogY29sLmZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuYXBwZW5kRmlsdGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAnZmlsdGVyJztcbiAgICAgICAgICAgIGlmICghdGhpcy5kZWZhdWx0SXRlbXNbZmlsdGVyXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmRlZmF1bHRJdGVtc1tmaWx0ZXJdLmlkO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICcjJyArIGtleSkgJiYgIXRoaXMuaXNGaWx0ZXJQb3B1cE9wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZpbHRlcihlLnRhcmdldCwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJyMnICsga2V5KSAmJiB0aGlzLmlzRmlsdGVyUG9wdXBPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGaWx0ZXIoZS50YXJnZXQsIGtleSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRGaWx0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBpZCwgaXNDbG9zZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlclBvcHVwID0gdGhpcy5nZXRGaWx0ZXJQb3AoKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJQb3B1cCkge1xuICAgICAgICAgICAgICAgIGZpbHRlclBvcHVwLnN0eWxlLmRpc3BsYXkgPSBpc0Nsb3NlID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZmlsdGVyT3Blbiwge1xuICAgICAgICAgICAgICAgICAgICBjb2w6IHRoaXMudGFyZ2V0Q29sdW1uLCB0YXJnZXQ6IHRhcmdldCwgaXNDbG9zZTogaXNDbG9zZSwgaWQ6IGlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gKGxpLCB1bCkge1xuICAgICAgICAgICAgdmFyIGdyaWRQb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGxpUG9zID0gbGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IGxpUG9zLmxlZnQgLSBncmlkUG9zLmxlZnQ7XG4gICAgICAgICAgICB2YXIgdG9wID0gbGlQb3MudG9wIC0gZ3JpZFBvcy50b3A7XG4gICAgICAgICAgICBpZiAoZ3JpZFBvcy5oZWlnaHQgPCB0b3ApIHtcbiAgICAgICAgICAgICAgICB0b3AgPSB0b3AgLSB1bC5vZmZzZXRIZWlnaHQgKyBsaVBvcy5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChncmlkUG9zLmhlaWdodCA8IHRvcCArIHVsLm9mZnNldEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IGdyaWRQb3MuaGVpZ2h0IC0gdWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IHVsLm9mZnNldEhlaWdodCArIHRvcCArIGdyaWRQb3MudG9wKSB7XG4gICAgICAgICAgICAgICAgdG9wID0gd2luZG93LmlubmVySGVpZ2h0IC0gdWwub2Zmc2V0SGVpZ2h0IC0gZ3JpZFBvcy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZWZ0ICs9ICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAtdWwub2Zmc2V0V2lkdGggOiBsaVBvcy53aWR0aCk7XG4gICAgICAgICAgICBpZiAoZ3JpZFBvcy53aWR0aCA8PSBsZWZ0ICsgdWwub2Zmc2V0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBsZWZ0IC09IGxpUG9zLndpZHRoICsgdWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgIGxlZnQgKz0gdWwub2Zmc2V0V2lkdGggKyBsaVBvcy53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVsLnN0eWxlLnRvcCA9IHRvcCArICdweCc7XG4gICAgICAgICAgICB1bC5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmZpbHRlclBvc2l0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJQb3B1cCA9IHRoaXMuZ2V0RmlsdGVyUG9wKCk7XG4gICAgICAgICAgICBmaWx0ZXJQb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuV1JBUCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHZhciBkaXNwID0gZmlsdGVyUG9wdXAuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgICAgICBmaWx0ZXJQb3B1cC5zdHlsZS5jc3NUZXh0ICs9ICdkaXNwbGF5OmJsb2NrO3Zpc2liaWxpdHk6aGlkZGVuJztcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLkZJTFRFUik7XG4gICAgICAgICAgICAgICAgaWYgKGxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24obGkucGFyZW50RWxlbWVudCwgZmlsdGVyUG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQb3B1cC5zdHlsZS5jc3NUZXh0ICs9ICdkaXNwbGF5OicgKyBkaXNwICsgJzt2aXNpYmlsaXR5OnZpc2libGUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHJlc2l6ZV8xLlJlc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdhdXRvRml0QWxsJyk7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnYXV0b0ZpdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgJiYgdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cCkpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdncm91cCcpO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ3VuZ3JvdXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1NvcnRpbmcgJiYgdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoc29ydF8xLlNvcnQpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnc29ydEFzY2VuZGluZycpO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ3NvcnREZXNjZW5kaW5nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5wdXNoKCdjb2x1bW5DaG9vc2VyJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgIT09ICdmaWx0ZXJiYXInKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGZpbHRlcl8xLkZpbHRlcikpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdmaWx0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuaXNGaWx0ZXJQb3B1cE9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyUG9wdXAgPSB0aGlzLmdldEZpbHRlclBvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlclBvcHVwICYmIGZpbHRlclBvcHVwLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RmlsdGVyUG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLlBPUCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmlzRmlsdGVySXRlbUFkZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBhcmVudC5jb2x1bW5NZW51SXRlbXMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5jb2x1bW5NZW51SXRlbXMuaW5kZXhPZignZmlsdGVyJykgPj0gMCkgfHwgIXRoaXMucGFyZW50LmNvbHVtbk1lbnVJdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbk1lbnU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbHVtbk1lbnUgPSBDb2x1bW5NZW51O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLW1lbnUuanNcbi8vIG1vZHVsZSBpZCA9IDEwOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29sdW1uXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy5qc1xuLy8gbW9kdWxlIGlkID0gMTA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9yb3ctcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9yZW5kZXJcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvZGF0ZXBpY2tlci1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2NvbW1hbmQtY29sdW1uLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3N0cmluZy1maWx0ZXItdWlcIiwgXCIuL3JlbmRlcmVyL251bWJlci1maWx0ZXItdWlcIiwgXCIuL3JlbmRlcmVyL2RhdGUtZmlsdGVyLXVpXCIsIFwiLi9yZW5kZXJlci9ib29sZWFuLWZpbHRlci11aVwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLW1lbnUtb3BlcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWFkZXJfcmVuZGVyZXJfMSwgY29udGVudF9yZW5kZXJlcl8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfY2VsbF9yZW5kZXJlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8xLCBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMSwgcmVuZGVyXzEsIGZpbHRlcl9jZWxsX3JlbmRlcmVyXzIsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEsIGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLCBiYXRjaF9lZGl0X3JlbmRlcmVyXzEsIGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEsIGlubGluZV9lZGl0X3JlbmRlcmVyXzEsIGVkaXRfcmVuZGVyZXJfMSwgYm9vbGVhbl9lZGl0X2NlbGxfMSwgZGVmYXVsdF9lZGl0X2NlbGxfMSwgZHJvcGRvd25fZWRpdF9jZWxsXzEsIG51bWVyaWNfZWRpdF9jZWxsXzEsIGRhdGVwaWNrZXJfZWRpdF9jZWxsXzEsIGNvbW1hbmRfY29sdW1uX3JlbmRlcmVyXzEsIGZyZWV6ZV9yZW5kZXJlcl8xLCBzdHJpbmdfZmlsdGVyX3VpXzEsIG51bWJlcl9maWx0ZXJfdWlfMSwgZGF0ZV9maWx0ZXJfdWlfMSwgYm9vbGVhbl9maWx0ZXJfdWlfMSwgZmlsdGVyX21lbnVfb3BlcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaGVhZGVyX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbnRlbnRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocm93X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHJlbmRlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yKTtcbiAgICBfX2V4cG9ydChpbmRlbnRfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChlZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGJvb2xlYW5fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRlZmF1bHRfZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRyb3Bkb3duX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChudW1lcmljX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChkYXRlcGlja2VyX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChjb21tYW5kX2NvbHVtbl9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChmcmVlemVfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoc3RyaW5nX2ZpbHRlcl91aV8xKTtcbiAgICBfX2V4cG9ydChudW1iZXJfZmlsdGVyX3VpXzEpO1xuICAgIF9fZXhwb3J0KGRhdGVfZmlsdGVyX3VpXzEpO1xuICAgIF9fZXhwb3J0KGJvb2xlYW5fZmlsdGVyX3VpXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl9tZW51X29wZXJhdG9yXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5XCIsIFwiLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiLCBcIi4vc2VydmljZXMvZnJlZXplLXJvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjZWxsX3JlbmRlcl9mYWN0b3J5XzEsIHNlcnZpY2VfbG9jYXRvcl8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLCBmcmVlemVfcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChjZWxsX3JlbmRlcl9mYWN0b3J5XzEpO1xuICAgIF9fZXhwb3J0KHNlcnZpY2VfbG9jYXRvcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfbW9kZWxfZ2VuZXJhdG9yXzEpO1xuICAgIF9fZXhwb3J0KGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xKTtcbiAgICBfX2V4cG9ydChmcmVlemVfcm93X21vZGVsX2dlbmVyYXRvcl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcGFnZXJcIiwgXCIuL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcGFnZXJfMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCBudW1lcmljX2NvbnRhaW5lcl8xLCBwYWdlcl9tZXNzYWdlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBhZ2VyXzEpO1xuICAgIF9fZXhwb3J0KGV4dGVybmFsX21lc3NhZ2VfMSk7XG4gICAgX19leHBvcnQobnVtZXJpY19jb250YWluZXJfMSk7XG4gICAgX19leHBvcnQocGFnZXJfbWVzc2FnZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDExMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9"]}