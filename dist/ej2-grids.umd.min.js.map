/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 15.4.18
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_23__","__WEBPACK_EXTERNAL_MODULE_24__","__WEBPACK_EXTERNAL_MODULE_61__","__WEBPACK_EXTERNAL_MODULE_71__","__WEBPACK_EXTERNAL_MODULE_73__","__WEBPACK_EXTERNAL_MODULE_98__","__WEBPACK_EXTERNAL_MODULE_101__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","focus_strategy_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","clipboard_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","freezeRefresh","Component","refresh","mergeCells","isEdit","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","Columnchooser","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","ctrlEnter","shiftEnter","tab","shiftTab","space","ctrlPlusC","ctrlShiftPlusH","setValue","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","pageSettings","filterSettings","groupSettings","searchSettings","sortSettings","columns","selectedRowIndex","ignoreOnColumn","forEach","currentObject","_i","_a","ignoreInArrays","addOnPersist","column","ignoreInColumn","val","requiredModules","allowFiltering","push","member","args","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","allowPaging","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","frozenColumns","frozenRows","editSettings","allowAdding","allowDeleting","allowEditing","extendRequiredModules","isCommandColumn","contextMenuItems","showColumnMenu","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","createSpinner","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","showSpinner","initialEnd","hideSpinner","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","focusModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateGridLines","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","getLocaleConstants","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getRowInfo","parentsUntil","cell","closest","cellIndex","parseInt","getAttribute","row_1","rowIndex","rowsObject","uid","rowData","data","cells","getDataRows","rows","children","dataRows","getCellFromIndex","getColumnHeaderByIndex","getRowObjectFromUID","getRowsObject","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","isToggle","selectRows","rowIndexes","clearSelection","selectCell","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","copy","withHeader","clipboardModule","recalcIndentWidth","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","FocusStrategy","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","Clipboard","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","refreshTooltip","headerTable","htable","createTable","ctable","all","allele","table","ele","getBoundingClientRect","Tooltip","document","body","removeChild","tag","type","myTableDiv","cssText","mySubDiv","myTable","myTr","mytd","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","updateData","event","headerRefreshed","dataBoundFunction","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","touches","checkEdit","preventDefault","click","mode","dblclick","display","filterClear","gridElement","localStorage","getItem","dataObj_1","JSON","parse","isProtectedOnChange","this_2","keys_1","isArray","extend","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","columns_1","commands","commandsTemplate","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","indexOf","showColumn","hideColumn","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","cultureName","intl","Internationalization","culture","getFormatFunction","format","getDateFormat","getNumberFormat","getParserFunction","getDateParser","getNumberParser","fromView","toView","result","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","pred","template","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","attributes","copied","first","second","exclude","moved","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","clientWidth","getRowHeight","rowHeight","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","changeButtonType","elements_1","button","setFormatter","fmtr","skeleton","setParser","addRemoveActiveClasses","removeAttribute","distinctStringValues","temp","res","toString","getFilterMenuPostion","dialogObj","elementVisible","dlgWidth","newpos","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","allowResizing","enableGroupByFormat","showInColumnChooser","merge","valueFormatter","textAlign","templateFn","itemTemplate","fltrTemplateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","checkBoxChange","beforeCopy","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","onEmpty","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","beforeCellFocused","cellFocused","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","accessPredicate","contextMenuClick","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","data_1","cell_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","renderEmpty","Row","isDataRow","Cell","isDataCell","updateColumnType","record","items","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","reject","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_merge_renderer_1","row_model_generator_1","group_model_generator_1","isLoaded","drop","droppedElement","rafCallback","generator","getModelGenerator","setVisible","innerDiv","contentDiv","createContentTable","multiselectable","initializeContentDrop","cellspacing","setColGroup","cloneNode","getColGroup","frag","createDocumentFragment","hdrfrag","RowRenderer","rowElements","modelData","generateRows","idx","fCont","mCont","cont","CellMergeRender","updateVirtualCells","isTR","nodeName","td","colcount","hdrTbody","overflowY","overflow","appendContent","contentPanel","panel","contentTable","colgroup","colGroup","testRow","some","clen","canSkip","displayVal","Droppable","accept","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","isSelected","cellType","refreshRow","isChanged","refreshMergeCells","cells_1","rowArgs","cellArgs","attrCopy","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","colSpan","cellSpan","isSpanned","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","rowSpan","class","ToolbarItem","spanText","aria-colSpan","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","split","getMergeCells","mCells","getIndexFromAllColumns","vColumnIndices","_b","rows_1","startIndex","generateRow","ensureColumns","generateCell","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","CommandColumn","rowId","oIndex","opt","isTemplate","rowID","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","cIndex_1","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","summaryRows","single","setTemplate","types","helper","disp","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","checkbox_filter_1","initDataManager","addRows","removeRows","crudActions","skipPage","clone","predicates","CheckBoxFilter","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","isGrpFmt","formatGroupColumn","getKey","foreignKeyData","executeQuery","date","update","url","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","ej2_buttons_1","util_2","ej2_inputs_1","ej2_popups_2","util_3","defaultConstants","OK","Filter","Clear","SelectAll","Blanks","NoResult","values","cBoxTrue","createCheckBox","checked","label","cBoxFalse","initLocale","insertBefore","constants","closeDialog","clickHandler","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","updateDataSource","updateModel","filteredColumns","allowCaseSensitive","isFiltered","localizedStrings","getAndSetChkElem","sBox","hideSearchbox","placeholder","searchBox","Input","createInput","floatLabelType","spinner","cBox","showDialog","filterModel","columnType","Dialog","close","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","isPrimary","dialogCreated","open","dialogOpen","appendTo","maxHeight","getAllData","X","Y","openDialog","text","innerText","fltrBtnHandler","handler","optr","caseSen","defaults","matchcase","isNotEqual","itemsCnt","fObj","setDateObject","initiateFilter","fColl","firstVal","ejpredicate","filterCollection","parsed","parseFloat","processDataSource","getPredicateFromCols","dataSuccess","fullData","select","getDistinct","filteredData","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes","cBoxes_1","createCheckbox","cnt","selected","btn","disabled","isColFiltered","getCheckedState","lookup","sort","fnAscending","generatePredicate","updateDateFilter","visualElement","sender","headercelldiv","headerTemplate","textContent","firstElementChild","lineHeight","dragStart","drag","cloneElement","dragStop","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","tHead","bodyCell","findHeaderRow","createHeaderContent","thead","rowBody","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","getCellCnt","colIndex","gCells","max","depth","checkDepth","Draggable","dragTarget","distance","abort","tabindex","rowChkBox","localizer","formatter","getGui","evaluate","invokeFormatter","refreshCell","refreshTD","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","checkBox","persistSelection","CheckBox","setAttributes","property","buildAttributeFromCell","clipMode","colindex","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","editType","checkAllBox","matchFlColumns","grabbed","extendPrepareHeader","headerTextAlign","alignment","matchFilteredColumns","setStateAndProperties","attribute","name","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","haspopup","toolTip","captionTemplate","aria-expanded","cellRenderMap","getEnumValue","services","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","mHdr","edit","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","freezeWidth","colGrp","mColGrp","currentInfo","oneTime","forget","skipFocus","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","onClick","force","isContent","beforeArgs","byKey","byClick","clickArgs","onKeyPress","skipOn","keyArgs","bValue","outline","swap","jump","isHeader","rowInitVal","activeElement","getFocusedElement","elementToFocus","active","setFocusedElement","setTimeout","removeFocus","addFocus","getFocusInfo","info","isFocused","isJump","container","getInfo","refreshMatrix","ContentFocus","HeaderFocus","cFocus","generate","actions","restoreFocus","evt","clearOutline","getPrevIndexes","forgetPrevious","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","_c","getFocusable","child","isDirty","isData","isSelectable","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","isBatchEdit","prevKey","isChkAll","isUnChkAll","chkAllCollec","isCheckedOnAdd","persistSelectedData","selectionRequest","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","updatePersistCollection","chkState","rowObj","pKey","primaryKey","updateCheckBoxes","chkBox","checkedTarget","setProperties","setCheckAllState","clearCellSelection","isCellType","selectedCell","getColIndex","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","onCellFocused","onDataBound","checkBoxSelectionChanged","isCheckColumn","isChkSelection","chkField","chkAllObj","proxy_1","refreshPersistSelection","checkState","editChkBox","checkSelectAllAction","editForm","checkSelectAll","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","checkedLen","indeterminate","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","applyUpDown","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","onContentScroll","scrollTarget","scrollLeft","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaY","onTouchScroll","pageY","getPointY","setPageY","scrollHeight","clientHeight","css","isPrinting","printWindow","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","fn","getTemplate","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","dlgObj","hideDialog","renderDlgContent","targetElement","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","beforeClose","customDialogClose","searchElement","columnChooserManualSearch","dlgDiv","tarElement","showCloseIcon","closeOnEscape","getElementById","confirmDlgBtnClick","clearActions","mainDiv","searchDiv","ccsearchele","ccsearchicon","conDiv","searchFocus","searchBlur","innerDivContent","refreshCheckboxList","targt","columnStateChange","params","dialogInstance","stateColumns","state","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","checkBoxClickHandler","checkstate","columnUid","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","copyContent","isSelect","keyDownHandler","clipBoardTextArea","readonly","setCopyData","getSelection","selectedIndexes","getCopyData","userAgent","match","setSelectionRange","isCell","queryCommandSupported","execCommand","blur","removeAllRanges","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","command_column_1","context_menu_1","freeze_1","column_menu_1","excel_filter_1","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","offset","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","callback","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","gLen","isVisible","n","currentFirst","iterateGroup","oRow","shift","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","pagerDestroy","pagerTemplate","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","keyPressHandler","canSkipAction","el","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","pageCount","getPagerTemplate","updateTotalPages","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","replace","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","change","onChange","filter_cell_renderer_1","filter_menu_renderer_1","nextFlMenuOpen","menu","FilterMenuRenderer","checkbox","excel","ExcelFilter","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","columnMenuFilter","filterIconClickHandler","isClose","filterDialogOpen","customOperators","displayName","filterHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","fltrElement","updateCrossIcon","processFilter","targetText","previousElementSibling","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","stringify","validateFilterValue","getOperator","substring","isNaN","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","filterIconElement","iconClass","filterBarTemplate","templateRead","read","templateWrite","write","filter_menu_operator_1","string_filter_ui_1","number_filter_ui_1","boolean_filter_ui_1","date_filter_ui_1","customFltrOperators","fltrObj","colTypes","string","StringFilterUI","number","NumberFilterUI","DateFilterUI","boolean","BooleanFilterUI","datetime","customFilterOperators","filterObj","flMuiObj","FlMenuOptrUI","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","dlgConetntEle","renderOperatorUI","renderFlValueUI","valueDiv","instanceofFilterUI","ui","getOptrInstance","localizeText","dlgContentEle","flValue","filteredValue","flOptrValue","targ","getFlOperator","flIcon","serLocator","actObj","AutoComplete","sortOrder","openPopup","filterType","autofill","arr","mapObj","filterOptr","actuiObj","optrData","customOptr","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","numericTxtObj","NumericTextBox","numberuiObj","dropInstance","ddActionComplete","drpuiObj","ej2_calendars_1","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","dateuiObj","popupElement","ej2_navigations_1","localeConstants","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","getCMenuDS","iconCss","separator","cmenu","createMenu","ul","icon","createMenuElem","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","isCMenuOpen","menuOptions","selectHandler","onClose","ContextMenu","client","resizeClassList","suppress","cursor","lines","Resize","tapped","isDblClk","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","offsetWidthValue","setHandlerHeight","getResizeHandlers","touchStartEvent","callAutoFit","getTargetColumn","refreshColumnWidth","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","scrollElem","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","dropArea","dataRow","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","isExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","injectedModues","gridElem","idx_1","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","viewStr","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","targetEle","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","tempObj","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","datepicker_edit_cell_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","datepickeredit","DatePickerEditCell","booleanedit","BooleanEditCell","defaultedit","DefaultEditCell","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","EditRender","tapEvent","alertDObj","refreshToolbar","showConfirmDialog","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","actionBeginFunction","actionCompleteFunction","form","editedData","inputs","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","parentElem","createTooltip","inputName","status","inputClient","arrow","isInline","enabled","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","tArgs","isInput","tagName","getEditElement","tdElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","dataCell","activeClasses","classNames","selectChkBox","editRow","popupHeight","dlgElement","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","cellDetails","onBeforeCellFocused","setCellIdx","validateFormObj","editCellFromIndex","isAddRow","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","addRowObject","getIndexFromData","defaultData","getDefaultData","findNextEditableCell","checkNPCell","dValues","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","cIdx","isForceSave","previousValue","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","ExportValueFormatter","isCsv","processRecords","adaptor","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","ExportHelper","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","_d","rLen","excelCellArgs","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","caption","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","hideColumnInclude","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","customFormat","ej2_pdf_export_1","ej2_pdf_export_2","ej2_pdf_export_3","ej2_pdf_export_4","ej2_pdf_export_5","ej2_pdf_export_6","PdfExport","customDataSource","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","pdfColor","PdfColor","penBrushColor","hexToRgb","g","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfBorders","borderColor","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","spanCell","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","command_column_renderer_1","CommandColumnRenderer","commandClickHandler","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","Button","menuClass","editIcon","pager","pdf","ungroup","csv","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","eventArgs","updateItemStatus","getLocaleText","showItems","dItem","ensureDisabledStatus","parentItem","hideItems","generateID","export","sortAscending","sortDescending","freeze_renderer_1","Freeze","FreezeRender","FreezeContentRender","freeze_row_model_generator_1","fDiv","mDiv","setFrozenContent","setMovableContent","getMovableContent","frozenContent","movableContent","getFrozenContent","FreezeRowModelGenerator","mTbl","rfshMovable","setFrozenHeader","setMovableHeader","getMovableHeader","mTable","renderMovable","getFrozenHeader","filterRow","frozenHeader","movableHeader","mEle","childElementCount","isFrzLoad","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","innerHeight","innerWidth","calculatePosition","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","getFilter","isFilterPopupOpen","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","columnChooser","filterPopup","getFilterPop","setPosition","gridPos","liPos","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-calendars\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf-export\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-calendars\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf-export\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_61__, __WEBPACK_EXTERNAL_MODULE_71__, __WEBPACK_EXTERNAL_MODULE_73__, __WEBPACK_EXTERNAL_MODULE_98__, __WEBPACK_EXTERNAL_MODULE_101__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(112)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(50), __webpack_require__(109), __webpack_require__(110), __webpack_require__(111)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(7), __webpack_require__(10), __webpack_require__(11), __webpack_require__(14), __webpack_require__(36), __webpack_require__(37), __webpack_require__(4), __webpack_require__(38), __webpack_require__(39), __webpack_require__(28), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43), __webpack_require__(44), __webpack_require__(45), __webpack_require__(46), __webpack_require__(47), __webpack_require__(48), __webpack_require__(49)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, focus_strategy_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1, clipboard_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SortSettings.prototype, \"allowUnsort\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"ejpredicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchcase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"ignoreCase\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"operators\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.freezeRefresh = ej2_base_1.Component.prototype.refresh;\n\t            _this.mergeCells = {};\n\t            _this.isEdit = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Save: 'Save',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found',\n\t                FilterButton: 'Filter',\n\t                ClearButton: 'Clear',\n\t                StartsWith: 'StartsWith',\n\t                EndsWith: 'EndsWith',\n\t                Contains: 'Contains',\n\t                Equal: 'Equal',\n\t                NotEqual: 'NotEqual',\n\t                LessThan: 'LessThan',\n\t                LessThanOrEqual: 'LessThanOrEqual',\n\t                GreaterThan: 'GreaterThan',\n\t                GreaterThanOrEqual: 'GreaterThanOrEqual',\n\t                ChooseDate: 'Choose a Date',\n\t                EnterValue: 'Enter the value',\n\t                Copy: 'Copy',\n\t                Group: 'Group by this column',\n\t                Ungroup: 'Ungroup by this column',\n\t                autoFitAll: 'Auto Fit all columns',\n\t                autoFit: 'Auto Fit this column',\n\t                Export: 'Export',\n\t                FirstPage: 'First Page',\n\t                LastPage: 'Last Page',\n\t                PreviousPage: 'Previous Page',\n\t                NextPage: 'Next Page',\n\t                SortAscending: 'Sort Ascending',\n\t                SortDescending: 'Sort Descending',\n\t                EditRecord: 'Edit Record',\n\t                DeleteRecord: 'Delete Record',\n\t                FilterMenu: 'Filter',\n\t                Columnchooser: 'Columns'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                ctrlEnter: 'ctrl+enter',\n\t                shiftEnter: 'shift+enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab',\n\t                space: 'space',\n\t                ctrlPlusC: 'ctrl+C',\n\t                ctrlShiftPlusH: 'ctrl+shift+H'\n\t            };\n\t            ej2_base_2.setValue('mergePersistData', _this.mergePersistGridData, _this);\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var _this = this;\n\t            var keyEntity = ['pageSettings', 'sortSettings',\n\t                'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n\t            var ignoreOnPersist = {\n\t                pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n\t                filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay'],\n\t                groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n\t                    'disablePageWiseAggregates', 'hideCaptionCount'],\n\t                searchSettings: ['fields', 'operator', 'ignoreCase'],\n\t                sortSettings: [], columns: [], selectedRowIndex: []\n\t            };\n\t            var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n\t                'commandTemplate', 'commands'];\n\t            keyEntity.forEach(function (value) {\n\t                var currentObject = _this[value];\n\t                for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n\t                    var val = _a[_i];\n\t                    delete currentObject[val];\n\t                }\n\t            });\n\t            this.ignoreInArrays(ignoreOnColumn, this.columns);\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n\t            var _this = this;\n\t            columns.forEach(function (column) {\n\t                if (column.columns) {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                    _this.ignoreInArrays(ignoreOnColumn, column.columns);\n\t                }\n\t                else {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                }\n\t            });\n\t        };\n\t        Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n\t            ignoreOnColumn.forEach(function (val) {\n\t                delete column[val];\n\t            });\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.frozenColumns || this.frozenRows) {\n\t                modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            this.extendRequiredModules(modules);\n\t            return modules;\n\t        };\n\t        Grid.prototype.extendRequiredModules = function (modules) {\n\t            if (this.isCommandColumn(this.columns)) {\n\t                modules.push({\n\t                    member: 'commandColumn',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.contextMenuItems) {\n\t                modules.push({\n\t                    member: 'contextMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.showColumnMenu) {\n\t                modules.push({\n\t                    member: 'columnMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            ej2_popups_1.createSpinner({ target: this.element });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.showSpinner();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.showSpinner = function () {\n\t            ej2_popups_1.showSpinner(this.element);\n\t        };\n\t        Grid.prototype.hideSpinner = function () {\n\t            ej2_popups_1.hideSpinner(this.element);\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t            this.focusModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    case 'frozenColumns':\n\t                    case 'frozenRows':\n\t                        this.freezeRefresh();\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.contextMenuItems) {\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.showColumnMenu) {\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.getLocaleConstants = function () {\n\t            return this.defaultLocale;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getRowInfo = function (target) {\n\t            var args = {};\n\t            if (!ej2_base_2.isNullOrUndefined(target) && ej2_base_2.isNullOrUndefined(util_1.parentsUntil(target, 'e-detailrowcollapse')\n\t                && ej2_base_2.isNullOrUndefined(util_1.parentsUntil(target, 'e-recordplusexpand')))) {\n\t                var cell = ej2_base_1.closest(target, '.e-rowcell');\n\t                if (!ej2_base_2.isNullOrUndefined(cell)) {\n\t                    var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n\t                    var row_1 = ej2_base_1.closest(cell, '.e-row');\n\t                    var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n\t                    var rowsObject = this.contentModule.getRows().filter(function (r) {\n\t                        return r.uid === row_1.getAttribute('data-uid');\n\t                    });\n\t                    var rowData = rowsObject[0].data;\n\t                    var column = rowsObject[0].cells[cellIndex].column;\n\t                    args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column };\n\t                }\n\t            }\n\t            return args;\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getRowsObject = function () {\n\t            return this.contentModule.getRows();\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.selectionModule.getSelectedRecords();\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index, isToggle) {\n\t            this.selectionModule.selectRow(index, isToggle);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex, isToggle) {\n\t            this.selectionModule.selectCell(cellIndex, isToggle);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.copy = function (withHeader) {\n\t            this.clipboardModule.copy(withHeader);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t            this.serviceLocator.register('focus', this.focusModule = new focus_strategy_1.FocusStrategy(this));\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.clipboardModule = new clipboard_1.Clipboard(this);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.refreshTooltip = function () {\n\t            var width;\n\t            var headerTable = this.getHeaderTable();\n\t            var contentTable = this.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var htable = this.createTable(headerTable, headerDivTag, 'header');\n\t            var ctable = this.createTable(headerTable, headerDivTag, 'content');\n\t            var all = this.element.querySelectorAll('.e-ellipsistooltip');\n\t            var allele = [];\n\t            for (var i = 0; i < all.length; i++) {\n\t                allele[i] = all[i];\n\t            }\n\t            allele.forEach(function (element) {\n\t                var td = element;\n\t                var table = headerTable.contains(element) ? htable : ctable;\n\t                var ele = headerTable.contains(element) ? 'th' : 'tr';\n\t                table.querySelector(ele).className = element.className;\n\t                table.querySelector(ele).innerHTML = element.innerHTML;\n\t                width = table.querySelector(ele).getBoundingClientRect().width;\n\t                if (width > element.getBoundingClientRect().width && !element.classList.contains('e-tooltip')) {\n\t                    var tooltip = new ej2_popups_1.Tooltip({ content: element.innerHTML }, element);\n\t                }\n\t                else if (width < element.getBoundingClientRect().width && element.classList.contains('e-tooltip')) {\n\t                    element.ej2_instances[0].destroy();\n\t                }\n\t            });\n\t            document.body.removeChild(htable);\n\t            document.body.removeChild(ctable);\n\t        };\n\t        Grid.prototype.createTable = function (table, tag, type) {\n\t            var myTableDiv = ej2_base_3.createElement('div');\n\t            myTableDiv.className = this.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_3.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_3.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var ele = (type === 'header') ? 'th' : 'td';\n\t            var myTr = ej2_base_3.createElement('tr');\n\t            var mytd = ej2_base_3.createElement(ele);\n\t            myTr.appendChild(mytd);\n\t            myTable.appendChild(myTr);\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            return myTableDiv;\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.on(event, _this.refreshTooltip, _this);\n\t            });\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.dataBoundFunction = this.refreshMediaCol.bind(this);\n\t            this.addEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.off(event, _this.refreshTooltip);\n\t            });\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return !util_1.parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id || ej2_base_1.closest(e.target, '.e-unboundcelldiv')) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.mergePersistGridData = function () {\n\t            var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n\t            if (!(ej2_base_2.isNullOrUndefined(data) || (data === ''))) {\n\t                var dataObj_1 = JSON.parse(data);\n\t                var keys = Object.keys(dataObj_1);\n\t                this.isProtectedOnChange = true;\n\t                var _loop_2 = function (key) {\n\t                    if ((typeof this_2[key] === 'object') && !ej2_base_2.isNullOrUndefined(this_2[key])) {\n\t                        if (Array.isArray(this_2[key])) {\n\t                            this_2[key].forEach(function (element, index) {\n\t                                ej2_base_1.extend(element, dataObj_1[key][index]);\n\t                            });\n\t                        }\n\t                        else {\n\t                            ej2_base_1.extend(this_2[key], dataObj_1[key]);\n\t                        }\n\t                    }\n\t                    else {\n\t                        this_2[key] = dataObj_1[key];\n\t                    }\n\t                };\n\t                var this_2 = this;\n\t                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                    var key = keys_1[_i];\n\t                    _loop_2(key);\n\t                }\n\t                this.isProtectedOnChange = false;\n\t            }\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n\t                    && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        Grid.prototype.isCommandColumn = function (columns) {\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (column.columns) {\n\t                    if (this.isCommandColumn(column.columns)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                else if (column.commands || column.commandsTemplate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.groupColumn = function (columnName) {\n\t            this.groupModule.groupColumn(columnName);\n\t        };\n\t        Grid.prototype.ungroupColumn = function (columnName) {\n\t            this.groupModule.ungroupColumn(columnName);\n\t        };\n\t        Grid.prototype.isContextMenuOpen = function () {\n\t            return this.contextMenuModule && this.contextMenuModule.isOpen;\n\t        };\n\t        Grid.prototype.ensureModuleInjected = function (module) {\n\t            return this.getInjectedModules().indexOf(module) >= 0;\n\t        };\n\t        Grid.prototype.showColumn = function (columnName, showBy) {\n\t            this.showHider.show(columnName, showBy);\n\t        };\n\t        Grid.prototype.hideColumn = function (columnName, hideBy) {\n\t            this.showHider.hide(columnName, hideBy);\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowMultiSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowExcelExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPdfExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnMenu\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"contextMenuItems\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"columnMenuItems\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"pagerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Grid.prototype, \"frozenRows\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Grid.prototype, \"frozenColumns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"contextMenuOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"contextMenuClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnMenuOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnMenuClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"checkBoxChange\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeCopy\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t    function changeButtonType(target) {\n\t        var elements = [].slice.call(target.querySelectorAll('button'));\n\t        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t            var button = elements_1[_i];\n\t            ej2_base_3.attributes(button, { type: 'button' });\n\t        }\n\t    }\n\t    exports.changeButtonType = changeButtonType;\n\t    function setFormatter(serviceLocator, column) {\n\t        var fmtr = serviceLocator.getService('valueFormatter');\n\t        switch (column.type) {\n\t            case 'date':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n\t                break;\n\t            case 'datetime':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n\t                break;\n\t            case 'number':\n\t                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ format: column.format }));\n\t                break;\n\t        }\n\t    }\n\t    exports.setFormatter = setFormatter;\n\t    function addRemoveActiveClasses(cells, add) {\n\t        var args = [];\n\t        for (var _i = 2; _i < arguments.length; _i++) {\n\t            args[_i - 2] = arguments[_i];\n\t        }\n\t        for (var i = 0, len = cells.length; i < len; i++) {\n\t            if (add) {\n\t                ej2_base_1.classList(cells[i], args.slice(), []);\n\t                cells[i].setAttribute('aria-selected', 'true');\n\t            }\n\t            else {\n\t                ej2_base_1.classList(cells[i], [], args.slice());\n\t                cells[i].removeAttribute('aria-selected');\n\t            }\n\t        }\n\t    }\n\t    exports.addRemoveActiveClasses = addRemoveActiveClasses;\n\t    function distinctStringValues(result) {\n\t        var temp = {};\n\t        var res = [];\n\t        for (var i = 0; i < result.length; i++) {\n\t            if (!(result[i] in temp)) {\n\t                res.push(result[i].toString());\n\t                temp[result[i]] = 1;\n\t            }\n\t        }\n\t        return res;\n\t    }\n\t    exports.distinctStringValues = distinctStringValues;\n\t    function getFilterMenuPostion(target, dialogObj) {\n\t        var elementVisible = dialogObj.element.style.display;\n\t        dialogObj.element.style.display = 'block';\n\t        var dlgWidth = dialogObj.width;\n\t        var newpos = ej2_popups_1.calculateRelativeBasedPosition(target, dialogObj.element);\n\t        dialogObj.element.style.display = elementVisible;\n\t        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n\t        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n\t        if (leftPos < 1) {\n\t            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px';\n\t        }\n\t        else {\n\t            dialogObj.element.style.left = leftPos + -4 + 'px';\n\t        }\n\t    }\n\t    exports.getFilterMenuPostion = getFilterMenuPostion;\n\t    function getZIndexCalcualtion(args, dialogObj) {\n\t        args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n\t    }\n\t    exports.getZIndexCalcualtion = getZIndexCalcualtion;\n\t    function toogleCheckbox(elem) {\n\t        var span = elem.querySelector('.e-frame');\n\t        span.classList.contains('e-check') ? ej2_base_1.classList(span, ['e-uncheck'], ['e-check']) :\n\t            ej2_base_1.classList(span, ['e-check'], ['e-uncheck']);\n\t    }\n\t    exports.toogleCheckbox = toogleCheckbox;\n\t    function createCboxWithWrap(uid, elem, className) {\n\t        var div = ej2_base_3.createElement('div', { className: className });\n\t        div.appendChild(elem);\n\t        div.setAttribute('uid', uid);\n\t        return div;\n\t    }\n\t    exports.createCboxWithWrap = createCboxWithWrap;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(4), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.showColumnMenu = true;\n\t            this.enableGroupByFormat = false;\n\t            this.allowEditing = true;\n\t            this.filter = {};\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.commands && !this.textAlign) {\n\t                this.textAlign = 'right';\n\t            }\n\t            if (this.template || this.commandsTemplate) {\n\t                this.templateFn = util_1.templateCompiler(this.template || this.commandsTemplate);\n\t            }\n\t            if (this.filter.itemTemplate) {\n\t                this.fltrTemplateFn = util_1.templateCompiler(this.filter.itemTemplate);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getFilterItemTemplate = function () {\n\t            return this.fltrTemplateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.checkBoxChange = 'checkBoxChange';\n\t    exports.beforeCopy = 'beforeCopy';\n\t    exports.filterChoiceRequest = 'filterchoicerequest';\n\t    exports.filterAfterOpen = 'filterafteropen';\n\t    exports.filterBeforeOpen = 'filterbeforeopen';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.onEmpty = 'on-empty';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.beforeCellFocused = 'beforecellfocused';\n\t    exports.cellFocused = 'cellfocused';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t    exports.accessPredicate = 'access-predicate';\n\t    exports.contextMenuClick = 'contextMenuClick';\n\t    exports.freezeRefresh = 'freezerefresh';\n\t    exports.contextMenuOpen = 'contextMenuOpen';\n\t    exports.columnMenuClick = 'contextMenuClick';\n\t    exports.columnMenuOpen = 'columnMenuOpen';\n\t    exports.filterOpen = 'filterOpen';\n\t    exports.filterDialogCreated = 'filterDialogCreated';\n\t    exports.filterMenuClose = 'filter-menu-close';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(14), __webpack_require__(21), __webpack_require__(17), __webpack_require__(18), __webpack_require__(10), __webpack_require__(7), __webpack_require__(12), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32), __webpack_require__(33), __webpack_require__(34), __webpack_require__(35)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, row_1, cell_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent, locator);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            if (args.requestType !== 'virtualscroll') {\n\t                this.parent.showSpinner();\n\t            }\n\t            this.parent.isEdit = false;\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t                this.parent.notify(events.onEmpty, { rows: [new row_1.Row({ isDataRow: true, cells: [new cell_1.Cell({ isDataCell: true, visible: true })] })] });\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t                if (typeof (columns[i].format) === 'string') {\n\t                    util_1.setFormatter(this.locator, columns[i]);\n\t                }\n\t                else if (!columns[i].format && columns[i].type === 'number') {\n\t                    columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t                this.parent.hideSpinner();\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t            this.parent.hideSpinner();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            }).catch(function (e) { return deferred.reject(e); });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15), __webpack_require__(16), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_merge_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.isLoaded = true;\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function (args) { return function () {\n\t                if (_this.isLoaded) {\n\t                    _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                    if (_this.parent.isDestroyed) {\n\t                        return;\n\t                    }\n\t                    _this.parent.notify(events.contentReady, { rows: _this.rows, args: args });\n\t                    _this.parent.trigger(events.dataBound, {});\n\t                    if (args) {\n\t                        var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                        _this.parent.notify(action, args);\n\t                    }\n\t                    _this.parent.hideSpinner();\n\t                }\n\t            }; };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            if (gObj.currentViewData.length === 0) {\n\t                return;\n\t            }\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var hdrfrag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var tbody;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            this.rows = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var idx = modelData[0].cells[0].index;\n\t            var fCont = this.getPanel().querySelector('.e-frozencontent');\n\t            var mCont = this.getPanel().querySelector('.e-movablecontent');\n\t            var cont = this.getPanel().querySelector('.e-content');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                cellMerge.updateVirtualCells(modelData);\n\t            }\n\t            if (this.parent.frozenColumns && idx >= this.parent.frozenColumns) {\n\t                tbody = mCont.querySelector('tbody');\n\t            }\n\t            else {\n\t                tbody = this.getTable().querySelector('tbody');\n\t            }\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                if (gObj.frozenRows && i < gObj.frozenRows) {\n\t                    hdrfrag.appendChild(tr);\n\t                }\n\t                else {\n\t                    frag.appendChild(tr);\n\t                }\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                var hdrTbody;\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                if (gObj.frozenColumns) {\n\t                    tbody.appendChild(frag);\n\t                    if (idx === 0) {\n\t                        _this.isLoaded = false;\n\t                        fCont.querySelector('table').appendChild(tbody);\n\t                        _this.getPanel().firstChild.style.overflowY = 'hidden';\n\t                    }\n\t                    else {\n\t                        _this.isLoaded = true;\n\t                        mCont.querySelector('table').appendChild(tbody);\n\t                    }\n\t                    if (gObj.frozenRows) {\n\t                        hdrTbody = gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n\t                            : '.e-movableheader').querySelector('tbody');\n\t                        hdrTbody.innerHTML = '';\n\t                        hdrTbody.appendChild(hdrfrag);\n\t                    }\n\t                    fCont.style.height\n\t                        = ((mCont.offsetHeight) - 17) + 'px';\n\t                    mCont.style.overflow = 'scroll';\n\t                }\n\t                else {\n\t                    _this.appendContent(tbody, frag, args);\n\t                }\n\t                if (gObj.frozenRows && !gObj.frozenColumns) {\n\t                    hdrTbody = gObj.getHeaderTable().querySelector('tbody');\n\t                    hdrTbody.innerHTML = '';\n\t                    hdrTbody.appendChild(hdrfrag);\n\t                }\n\t                if (gObj.frozenRows && idx === 0 && cont.offsetHeight === gObj.height) {\n\t                    cont.style.height =\n\t                        (cont.offsetHeight -\n\t                            gObj.getHeaderContent().querySelector('tbody').offsetHeight) + 'px';\n\t                }\n\t                if (gObj.frozenColumns && idx === 0) {\n\t                    _this.refreshContentRows(args);\n\t                }\n\t            }, this.rafCallback(args));\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7), __webpack_require__(14), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1, cell_merge_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t                this.refreshMergeCells(row);\n\t            }\n\t            var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column, colSpan: 1 }));\n\t                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n\t                        var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                        td = cellMerge.render(cellArgs, row, i, td);\n\t                    }\n\t                }\n\t                if (!row.cells[i].isSpanned) {\n\t                    tr.appendChild(td);\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.refreshMergeCells = function (row) {\n\t            for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n\t                var cell = _a[_i];\n\t                cell.isSpanned = false;\n\t            }\n\t            return row;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t        CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t    var ToolbarItem;\n\t    (function (ToolbarItem) {\n\t        ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n\t        ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n\t        ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n\t        ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n\t        ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n\t        ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n\t        ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n\t        ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n\t        ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n\t        ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n\t        ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n\t        ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n\t    })(ToolbarItem = exports.ToolbarItem || (exports.ToolbarItem = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellMergeRender = (function () {\n\t        function CellMergeRender(serviceLocator, parent) {\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t            var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n\t                (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n\t            var visible = 0;\n\t            for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n\t                if (row.cells[j].visible === false) {\n\t                    visible++;\n\t                }\n\t                else {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t            }\n\t            if (visible > 0) {\n\t                for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t                if (i + span + visible >= row.cells.length) {\n\t                    span -= (i + span + visible) - row.cells.length;\n\t                }\n\t            }\n\t            if (row.cells[i].cellSpan) {\n\t                row.data[cellArgs.column.field] = row.cells[i].spanText;\n\t                td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t            }\n\t            if (span > 1) {\n\t                ej2_base_1.attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n\t            }\n\t            if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n\t                !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n\t                this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n\t            }\n\t            return td;\n\t        };\n\t        CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n\t            this.setMergeCells(this.generteKey(fName, data), span);\n\t        };\n\t        CellMergeRender.prototype.generteKey = function (fname, data) {\n\t            return fname + '__' + data.toString();\n\t        };\n\t        CellMergeRender.prototype.splitKey = function (key) {\n\t            return key.split('__');\n\t        };\n\t        CellMergeRender.prototype.containsKey = function (fname, data) {\n\t            return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n\t        };\n\t        CellMergeRender.prototype.getMergeCells = function () {\n\t            return this.parent.mergeCells;\n\t        };\n\t        CellMergeRender.prototype.setMergeCells = function (key, span) {\n\t            this.parent.mergeCells[key] = span;\n\t        };\n\t        CellMergeRender.prototype.updateVirtualCells = function (rows) {\n\t            var mCells = this.getMergeCells();\n\t            for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var value = mCells[key];\n\t                var merge = this.splitKey(key);\n\t                var columnIndex = this.getIndexFromAllColumns(merge[0]);\n\t                var vColumnIndices = this.parent.getColumnIndexesInView();\n\t                var span = value - (vColumnIndices[0] - columnIndex);\n\t                if (columnIndex < vColumnIndices[0] && span > 1) {\n\t                    for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n\t                        var row = rows_1[_b];\n\t                        if (row.data[merge[0]].toString() === merge[1].toString()) {\n\t                            row.cells[0].cellSpan = span;\n\t                            row.cells[0].spanText = merge[1];\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return index;\n\t        };\n\t        return CellMergeRender;\n\t    }());\n\t    exports.CellMergeRender = CellMergeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(17), __webpack_require__(14), __webpack_require__(18), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, ej2_base_1.isNullOrUndefined(dummy.commands) ? undefined : enum_1.CellType.CommandColumn, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan,\n\t                'commands': column.commands\n\t            };\n\t            if (opt.isDataCell || opt.column.type === 'checkbox') {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            this.isSpanned = false;\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                var cIndex_1 = 0;\n\t                captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n\t                visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n\t                if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n\t                    visibles = visibles.slice(1);\n\t                }\n\t                if (this.parent.getVisibleColumns().length === 1) {\n\t                    visibles = [];\n\t                }\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(9), __webpack_require__(5), __webpack_require__(7), __webpack_require__(14), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && !ej2_base_1.isNullOrUndefined(group.aggregates[key]) ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(4), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events, value_formatter_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                var predicate = void 0;\n\t                if (gObj.filterSettings.type === 'checkbox') {\n\t                    var predicates = checkbox_filter_1.CheckBoxFilter.getPredicate(gObj.filterSettings.columns);\n\t                    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                        var prop = _a[_i];\n\t                        var and = 'and';\n\t                        var obj = predicates[prop];\n\t                        predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                            predicate[and](obj) :\n\t                            obj;\n\t                    }\n\t                    query.where(predicate);\n\t                }\n\t                else {\n\t                    for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                        var col = columns_1[_b];\n\t                        var sType = gObj.getColumnByField(col.field).type;\n\t                        if (sType !== 'date' && sType !== 'datetime') {\n\t                            query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                        }\n\t                        else {\n\t                            query.where(this.getDatePredicate(col));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    var isGrpFmt = gObj.getColumnByField(columns[i]).enableGroupByFormat;\n\t                    var format = gObj.getColumnByField(columns[i]).format;\n\t                    if (isGrpFmt) {\n\t                        query.group(columns[i], this.formatGroupColumn.bind(this), format);\n\t                    }\n\t                    else {\n\t                        query.group(columns[i], null);\n\t                    }\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.formatGroupColumn = function (value, field) {\n\t            var gObj = this.parent;\n\t            var serviceLocator = this.serviceLocator;\n\t            var column = gObj.getColumnByField(field);\n\t            var date = value;\n\t            if (!column.type) {\n\t                column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n\t                    date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t            }\n\t            if (ej2_base_1.isNullOrUndefined(column.getFormatter())) {\n\t                util_1.setFormatter(serviceLocator, column);\n\t            }\n\t            var formatVal = value_formatter_1.ValueFormatter.prototype.toView(value, column.getFormatter());\n\t            return formatVal;\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var datePredicate;\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n\t                prevDate = new Date(value.setDate(value.getDate() - 1));\n\t                nextDate = new Date(value.setDate(value.getDate() + 2));\n\t                prevObj.value = prevDate;\n\t                nextObj.value = nextDate;\n\t                if (filterObject.operator === 'equal') {\n\t                    prevObj.operator = 'greaterthan';\n\t                    nextObj.operator = 'lessthan';\n\t                }\n\t                else if (filterObject.operator === 'notequal') {\n\t                    prevObj.operator = 'lessthanorequal';\n\t                    nextObj.operator = 'greaterthanorequal';\n\t                }\n\t                var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t                datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t            }\n\t            else {\n\t                var predicates = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                datePredicate = predicates;\n\t            }\n\t            return datePredicate;\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(23), __webpack_require__(10), __webpack_require__(4), __webpack_require__(7), __webpack_require__(6), __webpack_require__(24), __webpack_require__(6), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, ej2_buttons_1, events, value_formatter_1, util_2, ej2_popups_1, ej2_inputs_1, ej2_popups_2, util_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CheckBoxFilter = (function () {\n\t        function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n\t            this.defaultConstants = {\n\t                Search: 'Search',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel',\n\t                Filter: 'Filter',\n\t                Clear: 'Clear',\n\t                SelectAll: 'Select All',\n\t                Blanks: 'Blanks',\n\t                True: 'True',\n\t                False: 'False',\n\t                NoResult: 'No Matches Found'\n\t            };\n\t            this.values = {};\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(false, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(false, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.id = this.parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter(this.parent.locale);\n\t            this.initLocale(this.defaultConstants);\n\t            this.cBoxTrue.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        CheckBoxFilter.prototype.initLocale = function (constants) {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.parent.locale || 'en-US');\n\t        };\n\t        CheckBoxFilter.prototype.destroy = function () {\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchBoxKeyUp, this);\n\t        };\n\t        CheckBoxFilter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickHandler);\n\t            var elem = this.dlg.querySelector('.e-searchinput');\n\t            if (elem) {\n\t                ej2_base_1.EventHandler.remove(elem, 'keyup', this.searchBoxKeyUp);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxClick = function (e) {\n\t            var target = e.target;\n\t            if (target.classList.contains('e-searchclear')) {\n\t                this.sInput.value = '';\n\t                this.refreshCheckboxes();\n\t                this.updateSearchIcon();\n\t                this.sInput.focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n\t            this.refreshCheckboxes();\n\t            this.updateSearchIcon();\n\t        };\n\t        CheckBoxFilter.prototype.updateSearchIcon = function () {\n\t            if (this.sInput.value.length) {\n\t                ej2_base_1.classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n\t            }\n\t            else {\n\t                ej2_base_1.classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        CheckBoxFilter.prototype.updateDataSource = function () {\n\t            var dataSource = this.options.dataSource;\n\t            if (!(dataSource instanceof ej2_data_1.DataManager)) {\n\t                for (var i = 0; i < dataSource.length; i++) {\n\t                    if (typeof dataSource !== 'object') {\n\t                        var obj = {};\n\t                        obj[this.options.field] = dataSource[i];\n\t                        dataSource[i] = obj;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateModel = function (options) {\n\t            this.options = options;\n\t            this.options.dataSource = options.dataSource;\n\t            this.updateDataSource();\n\t            this.options.type = options.type || 'string';\n\t            this.options.format = options.format || '';\n\t            this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n\t            this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n\t            this.options.query = options.query || new ej2_data_1.Query();\n\t            this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n\t            this.values = {};\n\t            this.isFiltered = options.filteredColumns.length;\n\t            ej2_base_1.extend(this.defaultConstants, options.localizedStrings);\n\t        };\n\t        CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n\t            this.dlg = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_excelDlg',\n\t                className: 'e-checkboxfilter e-filter-popup'\n\t            });\n\t            this.sBox = ej2_base_2.createElement('div', { className: 'e-searchcontainer' });\n\t            if (!options.hideSearchbox) {\n\t                this.sInput = ej2_base_2.createElement('input', {\n\t                    id: this.id + '_SearchBox',\n\t                    className: 'e-searchinput'\n\t                });\n\t                this.sIcon = ej2_base_2.createElement('span', {\n\t                    className: 'e-searchclear e-search-icon e-icons', attrs: {\n\t                        type: 'text', placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox = ej2_base_2.createElement('span', { className: 'e-searchbox e-fields' });\n\t                this.searchBox.appendChild(this.sInput);\n\t                this.sBox.appendChild(this.searchBox);\n\t                ej2_inputs_1.Input.createInput({\n\t                    element: this.sInput, floatLabelType: 'Never', properties: {\n\t                        placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n\t            }\n\t            this.spinner = ej2_base_2.createElement('div', { className: 'e-spinner' });\n\t            this.cBox = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_CheckBoxList',\n\t                className: 'e-checkboxlist e-fields'\n\t            });\n\t            this.spinner.appendChild(this.cBox);\n\t            this.sBox.appendChild(this.spinner);\n\t            return this.sBox;\n\t        };\n\t        CheckBoxFilter.prototype.showDialog = function (options) {\n\t            var args = {\n\t                requestType: events.filterBeforeOpen, filterModel: this,\n\t                columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                visible: false, content: this.sBox,\n\t                close: this.closeDialog.bind(this),\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(options.target, 'e-bigger')))\n\t                    || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                target: this.parent.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    {\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'Cancel' : 'Clear') }\n\t                    }],\n\t                created: this.dialogCreated.bind(this),\n\t                open: this.dialogOpen.bind(this)\n\t            });\n\t            this.dialogObj.appendTo(this.dlg);\n\t            this.dialogObj.element.style.maxHeight = '800px';\n\t            this.dialogObj.show();\n\t            this.wireEvents();\n\t            ej2_popups_2.createSpinner({ target: this.spinner });\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            this.getAllData();\n\t        };\n\t        CheckBoxFilter.prototype.dialogCreated = function (e) {\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                util_3.getFilterMenuPostion(this.options.target, this.dialogObj);\n\t            }\n\t            else {\n\t                this.dialogObj.position = { X: 'center', Y: 'center' };\n\t            }\n\t            this.parent.notify(events.filterDialogCreated, e);\n\t        };\n\t        CheckBoxFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t        };\n\t        CheckBoxFilter.prototype.closeDialog = function () {\n\t            if (this.dialogObj && !this.dialogObj.isDestroyed) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.options.field });\n\t                this.dialogObj.destroy();\n\t                this.unWireEvents();\n\t                ej2_base_2.remove(this.dlg);\n\t                this.dlg = null;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.btnClick = function (e) {\n\t            var text = e.target.innerText.toLowerCase();\n\t            if (this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter').toLowerCase() === text) {\n\t                this.fltrBtnHandler();\n\t            }\n\t            else if (this.getLocalizedLabel('Clear').toLowerCase() === text) {\n\t                this.options.handler({ action: 'clear-filter', field: this.options.field });\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.fltrBtnHandler = function () {\n\t            var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n\t            var optr = 'equal';\n\t            var caseSen = this.options.type === 'string' ?\n\t                this.options.allowCaseSensitive : true;\n\t            var defaults = {\n\t                field: this.options.field, predicate: 'or',\n\t                operator: optr, matchcase: caseSen\n\t            };\n\t            var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n\t            if (isNotEqual) {\n\t                optr = 'notequal';\n\t                checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n\t                defaults.predicate = 'and';\n\t                defaults.operator = 'notequal';\n\t            }\n\t            var value;\n\t            var fObj;\n\t            var coll = [];\n\t            for (var i = 0; i < checked.length; i++) {\n\t                value = this.values[util_1.parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n\t                fObj = ej2_base_1.extend({}, { value: value }, defaults);\n\t                if (value && !value.toString().length) {\n\t                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n\t                }\n\t                coll.push(this.options.type === 'date' ? CheckBoxFilter.setDateObject(fObj) : fObj);\n\t            }\n\t            this.initiateFilter(coll);\n\t        };\n\t        CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n\t            var firstVal = fColl[0];\n\t            var predicate;\n\t            if (!ej2_base_1.isNullOrUndefined(firstVal)) {\n\t                predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n\t                    new ej2_data_1.Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchcase);\n\t                for (var j = 1; j < fColl.length; j++) {\n\t                    predicate = fColl[j].ejpredicate !== undefined ?\n\t                        predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n\t                        predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchcase);\n\t                }\n\t                var args = {\n\t                    action: 'filtering', filterCollection: fColl, field: this.options.field,\n\t                    ejpredicate: ej2_data_1.Predicate.or(predicate)\n\t                };\n\t                this.options.handler(args);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.refreshCheckboxes = function () {\n\t            var val = this.sInput.value;\n\t            var query = this.options.query.clone();\n\t            var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n\t            var operator = 'contains';\n\t            var matchcase = true;\n\t            parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n\t            if (this.options.type === 'boolean') {\n\t                if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('True').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'true';\n\t                }\n\t                else if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('False').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'false';\n\t                }\n\t            }\n\t            if (this.options.type === 'date' || this.options.type === 'datetime') {\n\t                parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n\t                operator = 'equal';\n\t                if (ej2_base_1.isNullOrUndefined(parsed) && val.length) {\n\t                    return;\n\t                }\n\t            }\n\t            if (val.length) {\n\t                query.where(this.options.field, operator, parsed, matchcase);\n\t            }\n\t            this.processDataSource(query);\n\t        };\n\t        CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n\t            var predicate;\n\t            var predicates = CheckBoxFilter.getPredicate(columns);\n\t            for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                var and = 'and';\n\t                var obj = predicates[prop];\n\t                predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                    predicate[and](obj) :\n\t                    obj;\n\t            }\n\t            return predicate;\n\t        };\n\t        CheckBoxFilter.prototype.getAllData = function () {\n\t            var _this = this;\n\t            var query = new ej2_data_1.Query();\n\t            query.requiresCount();\n\t            this.options.dataSource = this.options.dataSource instanceof ej2_data_1.DataManager ?\n\t                this.options.dataSource : new ej2_data_1.DataManager(this.options.dataSource);\n\t            var promise = this.options.dataSource.executeQuery(query);\n\t            promise.then(function (e) { return _this.dataSuccess(e); });\n\t        };\n\t        CheckBoxFilter.prototype.dataSuccess = function (e) {\n\t            this.fullData = e.result;\n\t            var query = new ej2_data_1.Query();\n\t            if ((this.options.filteredColumns.length)) {\n\t                var cols = [];\n\t                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n\t                    if (this.options.filteredColumns[i].field !== this.options.field) {\n\t                        cols.push(this.options.filteredColumns[i]);\n\t                    }\n\t                }\n\t                var predicate = this.getPredicateFromCols(cols);\n\t                if (predicate) {\n\t                    query.where(predicate);\n\t                }\n\t            }\n\t            query.select(this.options.field);\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            var res = CheckBoxFilter.getDistinct(result, this.options.field);\n\t            this.filteredData = res.records;\n\t            this.processDataSource(null, true);\n\t            var args = {\n\t                requestType: events.filterAfterOpen,\n\t                filterModel: this, columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionComplete, args);\n\t        };\n\t        CheckBoxFilter.prototype.processDataSource = function (query, isInitial) {\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            query = query ? query : this.options.query.clone();\n\t            query.requiresCount();\n\t            var args = {\n\t                requestType: events.filterChoiceRequest, filterModel: this, query: query,\n\t                dataSource: this.filteredData\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            var result = new ej2_data_1.DataManager(args.dataSource).executeLocal(args.query);\n\t            var res = result;\n\t            this.updateResult();\n\t            this.createFilterItems(res.result, isInitial);\n\t        };\n\t        CheckBoxFilter.prototype.updateResult = function () {\n\t            this.result = {};\n\t            var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n\t            var query = new ej2_data_1.Query();\n\t            if (predicate) {\n\t                query.where(predicate);\n\t            }\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n\t                var res = result_1[_i];\n\t                this.result[res[this.options.field]] = true;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var elem = util_1.parentsUntil(target, 'e-checkbox-wrapper');\n\t            if (util_1.parentsUntil(target, 'e-searchbox')) {\n\t                this.searchBoxClick(e);\n\t            }\n\t            if (elem) {\n\t                var selectAll = elem.querySelector('.e-selectall');\n\t                if (selectAll) {\n\t                    this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n\t                }\n\t                else {\n\t                    util_3.toogleCheckbox(elem.parentElement);\n\t                }\n\t                this.updateIndeterminatenBtn();\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n\t            var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n\t            for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n\t                var cBox = cBoxes_1[_i];\n\t                ej2_base_1.removeClass([cBox], ['e-check', 'e-stop', 'e-uncheck']);\n\t                if (checked) {\n\t                    cBox.classList.add('e-check');\n\t                }\n\t                else {\n\t                    cBox.classList.add('e-uncheck');\n\t                }\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.dialogOpen = function () {\n\t            if (this.parent.element.classList.contains('e-device')) {\n\t                this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n\t                this.dialogObj.element.querySelector('.e-btn').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.createCheckbox = function (value, checked) {\n\t            var elem = checked ? this.cBoxTrue.cloneNode(true) :\n\t                this.cBoxFalse.cloneNode(true);\n\t            var label = elem.querySelector('.e-label');\n\t            label.innerHTML = !ej2_base_1.isNullOrUndefined(value) && value.toString().length ? value :\n\t                this.getLocalizedLabel('Blanks');\n\t            if (this.options.template) {\n\t                label.innerHTML = '';\n\t                var args = {};\n\t                args[this.options.field] = value;\n\t                util_1.appendChildren(label, this.options.template(args));\n\t            }\n\t            return elem;\n\t        };\n\t        CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n\t            var cnt = this.cBox.children.length - 1;\n\t            var className = [];\n\t            var elem = this.cBox.querySelector('.e-selectall');\n\t            var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n\t            var btn = this.dlg.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n\t            btn.disabled = false;\n\t            if (cnt === selected) {\n\t                className = ['e-check'];\n\t            }\n\t            else if (selected) {\n\t                className = ['e-stop'];\n\t            }\n\t            else {\n\t                btn.disabled = true;\n\t            }\n\t            ej2_base_1.removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n\t            ej2_base_1.addClass([elem], className);\n\t        };\n\t        CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n\t            var cBoxes = ej2_base_2.createElement('div');\n\t            this.itemsCnt = data.length;\n\t            if (data.length || isInitial) {\n\t                var selectAll = util_3.createCboxWithWrap(util_1.getUid('cbox'), this.createCheckbox(this.getLocalizedLabel('SelectAll'), false), 'e-ftrchk');\n\t                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n\t                cBoxes.appendChild(selectAll);\n\t                var isColFiltered = new ej2_data_1.DataManager(this.options.filteredColumns).executeLocal(new ej2_data_1.Query().where('field', 'equal', this.options.field)).length;\n\t                for (var i = 0; i < data.length; i++) {\n\t                    var uid = util_1.getUid('cbox');\n\t                    this.values[uid] = data[i][this.options.field];\n\t                    var value = this.valueFormatter.toView(data[i][this.options.field], this.options.formatFn);\n\t                    cBoxes.appendChild(util_3.createCboxWithWrap(uid, this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid])), 'e-ftrchk'));\n\t                }\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t                this.updateIndeterminatenBtn();\n\t            }\n\t            else {\n\t                cBoxes.appendChild(ej2_base_2.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t            }\n\t            var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n\t            this.parent.trigger(events.actionComplete, args);\n\t            ej2_popups_2.hideSpinner(this.spinner);\n\t        };\n\t        CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n\t            if (!this.isFiltered || !isColFiltered) {\n\t                return true;\n\t            }\n\t            else {\n\t                return this.result[value];\n\t            }\n\t        };\n\t        CheckBoxFilter.getDistinct = function (json, field) {\n\t            var len = json.length;\n\t            var result = [];\n\t            var value;\n\t            var ejValue = 'ejValue';\n\t            var lookup = {};\n\t            while (len--) {\n\t                value = json[len];\n\t                value = typeof value === 'object' && !(value instanceof Date) ?\n\t                    value[field] : value;\n\t                if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                    if (!(value in lookup)) {\n\t                        var obj = {};\n\t                        obj[ejValue] = value;\n\t                        obj[field] = value;\n\t                        result.push(obj);\n\t                    }\n\t                    lookup[value] = true;\n\t                }\n\t            }\n\t            return ej2_data_1.DataUtil.group(ej2_data_1.DataUtil.sort(result, field, ej2_data_1.DataUtil.fnAscending), 'ejValue');\n\t        };\n\t        CheckBoxFilter.setDateObject = function (filterObject) {\n\t            var prevObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            var prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            var nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                nextObj.operator = 'lessthan';\n\t                nextObj.predicate = 'and';\n\t                prevObj.operator = 'greaterthan';\n\t                prevObj.predicate = 'and';\n\t            }\n\t            else if (filterObject.operator === 'notequal') {\n\t                nextObj.operator = 'greaterthanorequal';\n\t                nextObj.predicate = 'or';\n\t                prevObj.operator = 'lessthanorequal';\n\t                prevObj.predicate = 'or';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            filterObject.ejpredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) :\n\t                predicateSt.or(predicateEnd);\n\t            filterObject.type = 'date';\n\t            return filterObject;\n\t        };\n\t        CheckBoxFilter.getPredicate = function (columns) {\n\t            var cols = CheckBoxFilter.getDistinct(columns, 'field').records;\n\t            var collection;\n\t            var pred = {};\n\t            for (var i = 0; i < cols.length; i++) {\n\t                collection = new ej2_data_1.DataManager(columns).executeLocal(new ej2_data_1.Query().where('field', 'equal', cols[i].field));\n\t                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n\t            }\n\t            return pred;\n\t        };\n\t        CheckBoxFilter.generatePredicate = function (cols) {\n\t            var len = cols ? cols.length : 0;\n\t            var predicate;\n\t            var first;\n\t            first = CheckBoxFilter.updateDateFilter(cols[0]);\n\t            if (first.type === 'date' || first.type === 'datetime') {\n\t                predicate = CheckBoxFilter.getDatePredicate(first);\n\t            }\n\t            else {\n\t                predicate = first.ejpredicate ? first.ejpredicate :\n\t                    new ej2_data_1.Predicate(first.field, first.operator, first.value, first.ignoreCase || !first.matchcase);\n\t            }\n\t            for (var p = 1; p < len; p++) {\n\t                cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n\t                if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate.predicates.push(CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate.predicates.push(new ej2_data_1.Predicate(cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase));\n\t                    }\n\t                }\n\t                else {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate = predicate[(cols[p].predicate)](CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate = cols[p].ejpredicate ?\n\t                            predicate[cols[p].predicate](cols[p].ejpredicate) :\n\t                            predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase);\n\t                    }\n\t                }\n\t            }\n\t            return predicate || null;\n\t        };\n\t        CheckBoxFilter.getDatePredicate = function (predicate) {\n\t            return new ej2_data_1.Predicate(predicate.field, predicate.operator, predicate.value, predicate.ignoreCase || !predicate.matchcase);\n\t        };\n\t        CheckBoxFilter.updateDateFilter = function (filter) {\n\t            if (filter.type !== 'date' && !(filter.value instanceof Date)) {\n\t                return filter;\n\t            }\n\t            return ['equal', 'notequal'].indexOf(filter.operator) === -1 ? filter :\n\t                CheckBoxFilter.setDateObject(filter);\n\t        };\n\t        CheckBoxFilter.prototype.getModuleName = function () {\n\t            return 'checkboxFilter';\n\t        };\n\t        return CheckBoxFilter;\n\t    }());\n\t    exports.CheckBoxFilter = CheckBoxFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(10), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                var col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n\t                if (!ej2_base_1.isNullOrUndefined(col.headerTemplate)) {\n\t                    if (col.headerTemplate.indexOf('#') !== -1) {\n\t                        visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n\t                    }\n\t                    else {\n\t                        visualElement.innerHTML = col.headerTemplate;\n\t                    }\n\t                }\n\t                else {\n\t                    visualElement.textContent = headercelldiv ?\n\t                        gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.firstElementChild.innerHTML;\n\t                }\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = this.rows = findHeaderRow.rows;\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header, gObj);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var column;\n\t            if (this.parent.frozenColumns) {\n\t                if (this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead')) {\n\t                    column = this.parent.columns.slice(this.parent.frozenColumns, this.parent.columns.length);\n\t                }\n\t                else {\n\t                    column = this.parent.columns.slice(0, this.parent.frozenColumns);\n\t                }\n\t            }\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns()\n\t                : (this.parent.frozenColumns ? column : this.parent.columns);\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            this.rows = findHeaderRow.rows;\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n\t                if (gCells.length) {\n\t                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                }\n\t            }\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.rowChkBox = ej2_base_2.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data), this.parent, 'template');\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes) && column.type !== 'checkbox') {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            else if (column.type === 'checkbox') {\n\t                node.classList.add('e-gridchkbox');\n\t                node.setAttribute('aria-label', 'column header ' + cell.column.headerText);\n\t                var checkBox = this.rowChkBox.cloneNode();\n\t                checkBox.id = 'checkselect_' + cell.rowID.split('grid-row')[1];\n\t                node.appendChild(checkBox);\n\t                if (this.parent.selectionSettings.persistSelection) {\n\t                    value = value === 'true';\n\t                }\n\t                else {\n\t                    value = false;\n\t                }\n\t                new ej2_buttons_1.CheckBox({ checked: value }).appendTo(checkBox);\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (column.type === 'boolean') {\n\t                var obj = new ej2_buttons_1.CheckBox({ disabled: true, checked: value === 'true' });\n\t                obj.appendTo(node.firstElementChild);\n\t            }\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26), __webpack_require__(28), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            _this.chkAllBox = ej2_base_2.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            if (column.type !== 'checkbox') {\n\t                var value = column.headerText;\n\t                var headerText = this.hTxtEle.cloneNode();\n\t                headerText[column.getDomSetter()] = value;\n\t                innerDIV.appendChild(headerText);\n\t            }\n\t            else {\n\t                column.editType = 'booleanedit';\n\t                var checkAllBox = this.chkAllBox.cloneNode();\n\t                innerDIV.appendChild(checkAllBox);\n\t                var checkAllBoxObj = new ej2_buttons_1.CheckBox();\n\t                checkAllBoxObj.appendTo(checkAllBox);\n\t                innerDIV.classList.add('e-headerchkcelldiv');\n\t            }\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'filterbar') &&\n\t                (column.allowFiltering && !ej2_base_1.isNullOrUndefined(column.field)) &&\n\t                !(this.parent.showColumnMenu && column.showColumnMenu)) {\n\t                ej2_base_2.attributes(fltrMenuEle, {\n\t                    'e-mappinguid': 'e-flmenu-' + column.uid,\n\t                });\n\t                node.classList.add('e-fltr-icon');\n\t                var matchFlColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n\t                    for (var index = 0; index < this.parent.columns.length; index++) {\n\t                        for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n\t                            if (this.parent.filterSettings.columns[count].field === column.field) {\n\t                                fltrMenuEle.classList.add('e-filtered');\n\t                                matchFlColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.appendChild(fltrMenuEle.cloneNode());\n\t            }\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            node = this.extendPrepareHeader(column, node);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    innerDIV.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    innerDIV.innerHTML = column.headerTemplate;\n\t                }\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n\t            if (this.parent.showColumnMenu && column.showColumnMenu) {\n\t                var element = (ej2_base_2.createElement('div', { className: 'e-icons e-columnmenu' }));\n\t                var matchFilteredColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n\t                    for (var i = 0; i < this.parent.columns.length; i++) {\n\t                        for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n\t                            if (this.parent.filterSettings.columns[j].field === column.field) {\n\t                                element.classList.add('e-filtered');\n\t                                matchFilteredColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.classList.add('e-fltr-icon');\n\t                node.appendChild(element);\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var gObj = this.parent;\n\t            var result;\n\t            var helper = {};\n\t            var value = cell.column.enableGroupByFormat ? data.key :\n\t                this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            if (!ej2_base_1.isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n\t                if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n\t                    result = util_1.templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n\t                }\n\t                else {\n\t                    result = util_1.templateCompiler(gObj.groupSettings.captionTemplate)(data);\n\t                }\n\t                util_1.appendChildren(node, result);\n\t            }\n\t            else {\n\t                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing && module === 'resize') {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol;\n\t            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns && mHdr && mHdr.querySelector('colgroup')) {\n\t                headerCol = mHdr.querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                headerCol = header.querySelector('colgroup').children[index];\n\t            }\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t            }\n\t            var contentCol;\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns) {\n\t                contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n\t                    .querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                contentCol = content.querySelector('colgroup').children[index];\n\t            }\n\t            if (contentCol) {\n\t                contentCol.style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = null;\n\t            if (this.parent.frozenColumns) {\n\t                var freezeWidth = 0;\n\t                var colGrp = this.parent.getContentTable().querySelector('colgroup');\n\t                var mColGrp = ej2_base_1.select('.e-movablecontent');\n\t                for (var i = 0; i < this.parent.getHeaderTable().querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(colGrp.children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t                freezeWidth = 0;\n\t                for (var i = 0; i < ej2_base_1.select('.e-movableheader').querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(mColGrp.children[0].querySelector('colgroup').children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                ej2_base_1.select('.e-movableheader').firstElementChild.style.width = tWidth;\n\t                ej2_base_1.select('.e-movablecontent').firstElementChild.style.width = tWidth;\n\t            }\n\t            else {\n\t                tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t            }\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1, event) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FocusStrategy = (function () {\n\t        function FocusStrategy(parent) {\n\t            this.currentInfo = {};\n\t            this.oneTime = true;\n\t            this.forget = true;\n\t            this.skipFocus = false;\n\t            this.prevIndexes = {};\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        FocusStrategy.prototype.focusCheck = function (e) {\n\t            var target = e.target;\n\t            this.skipFocus = ej2_base_1.closest(target, 'e-pager') !== null;\n\t        };\n\t        FocusStrategy.prototype.onFocus = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.setActive(true);\n\t            var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n\t            this.getContent().matrix.select(current[0], current[1]);\n\t            if (this.skipFocus) {\n\t                this.focus();\n\t                this.skipFocus = false;\n\t            }\n\t        };\n\t        FocusStrategy.prototype.onClick = function (e, force) {\n\t            var isContent = !ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridcontent'));\n\t            if (!isContent && ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridheader')) ||\n\t                e.target.classList.contains('e-filtermenudiv')) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: false, byClick: !ej2_base_1.isNullOrUndefined(e.target), clickArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            this.setActive(isContent);\n\t            var returnVal = this.getContent().onClick(e, force);\n\t            if (returnVal === false) {\n\t                return;\n\t            }\n\t            this.focus();\n\t        };\n\t        FocusStrategy.prototype.onKeyPress = function (e) {\n\t            if (this.skipOn(e)) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            var bValue = this.getContent().matrix.current;\n\t            this.currentInfo.outline = true;\n\t            this.swap = this.getContent().jump(e.action, bValue);\n\t            if (this.swap) {\n\t                var isHeader = this.header === this.getContent();\n\t                this.setActive(isHeader);\n\t                var rowInitVal = isHeader ? -1 : this.header.matrix.matrix.length;\n\t                var current = this.getContent().matrix.get(rowInitVal, bValue[1], [0, 0], e.action, this.getContent().validator());\n\t                this.getContent().matrix.current = [rowInitVal, current[1]];\n\t                this.prevIndexes = {};\n\t            }\n\t            e.preventDefault();\n\t            this.getContent().onKeyPress(e);\n\t            this.focus(e);\n\t        };\n\t        FocusStrategy.prototype.skipOn = function (e) {\n\t            var target = e.target;\n\t            if (!target) {\n\t                return false;\n\t            }\n\t            return (this.parent.editSettings.mode !== 'batch' && (this.parent.isEdit || ['insert', 'f2', 'delete'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(document.activeElement, '.e-filterbarcell') !== null && ['leftArrow', 'rightArrow'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(target, '.e-gridcontent') === null && ej2_base_1.closest(target, '.e-gridheader') === null)\n\t                || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && ej2_base_1.closest(target, '.e-gridchkbox') === null\n\t                    && ej2_base_1.closest(target, '.e-headerchkcelldiv') === null)));\n\t        };\n\t        FocusStrategy.prototype.getFocusedElement = function () {\n\t            return this.currentInfo.elementToFocus;\n\t        };\n\t        FocusStrategy.prototype.getContent = function () {\n\t            return this.active || this.content;\n\t        };\n\t        FocusStrategy.prototype.setActive = function (content) {\n\t            this.active = content ? this.content : this.header;\n\t        };\n\t        FocusStrategy.prototype.setFocusedElement = function (element) {\n\t            var _this = this;\n\t            this.currentInfo.elementToFocus = element;\n\t            setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n\t        };\n\t        FocusStrategy.prototype.focus = function (e) {\n\t            this.removeFocus();\n\t            this.addFocus(this.getContent().getFocusInfo(), e);\n\t        };\n\t        FocusStrategy.prototype.removeFocus = function () {\n\t            if (!this.currentInfo.element) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n\t            this.currentInfo.elementToFocus.tabIndex = -1;\n\t        };\n\t        FocusStrategy.prototype.addFocus = function (info, e) {\n\t            this.currentInfo = info;\n\t            this.currentInfo.outline = info.outline && !ej2_base_1.isNullOrUndefined(e);\n\t            if (!info.element) {\n\t                return;\n\t            }\n\t            var isFocused = info.elementToFocus.classList.contains('e-focus');\n\t            if (isFocused) {\n\t                return;\n\t            }\n\t            if (this.currentInfo.outline) {\n\t                ej2_base_1.addClass([info.element], ['e-focused']);\n\t            }\n\t            ej2_base_1.addClass([info.elementToFocus], ['e-focus']);\n\t            info.element.tabIndex = 0;\n\t            if (!isFocused) {\n\t                this.setFocusedElement(info.elementToFocus);\n\t            }\n\t            this.parent.notify(event.cellFocused, {\n\t                element: info.elementToFocus,\n\t                parent: info.element,\n\t                indexes: this.getContent().matrix.current,\n\t                byKey: !ej2_base_1.isNullOrUndefined(e),\n\t                byClick: ej2_base_1.isNullOrUndefined(e),\n\t                keyArgs: e,\n\t                isJump: this.swap,\n\t                container: this.getContent().getInfo(e),\n\t                outline: !ej2_base_1.isNullOrUndefined(e)\n\t            });\n\t            var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n\t            this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n\t        };\n\t        FocusStrategy.prototype.refreshMatrix = function (content) {\n\t            var _this = this;\n\t            return function (e) {\n\t                if (content && !_this.content) {\n\t                    _this.content = new ContentFocus(_this.parent);\n\t                }\n\t                if (!content && !_this.header) {\n\t                    _this.header = new HeaderFocus(_this.parent);\n\t                }\n\t                var cFocus = content ? _this.content : _this.header;\n\t                cFocus.matrix.generate(e.rows, cFocus.selector);\n\t                cFocus.generateRows(e.rows);\n\t                var actions = ['paging', 'grouping'];\n\t                if (e.args && actions.indexOf(e.args.requestType) > -1) {\n\t                    _this.skipFocus = true;\n\t                    _this.onFocus();\n\t                }\n\t            };\n\t        };\n\t        FocusStrategy.prototype.addEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed || this.parent.frozenColumns || this.parent.frozenRows) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n\t            this.parent.on(event.keyPressed, this.onKeyPress, this);\n\t            this.parent.on(event.click, this.onClick, this);\n\t            this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n\t            this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n\t            this.parent.on('close-edit', this.restoreFocus, this);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearOutline, _this); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n\t            this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n\t            this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n\t            this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n\t            this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n\t        };\n\t        FocusStrategy.prototype.removeEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n\t            this.parent.off(event.keyPressed, this.onKeyPress);\n\t            this.parent.off(event.click, this.onClick);\n\t            this.parent.off(event.contentReady, this.refreshMatrix(true));\n\t            this.parent.off(event.headerRefreshed, this.refreshMatrix());\n\t            this.parent.off('close-edit', this.restoreFocus);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n\t            this.parent.off(event.batchAdd, this.refreshMatrix(true));\n\t            this.parent.off(event.batchDelete, this.refreshMatrix(true));\n\t            this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n\t            this.parent.off(event.onEmpty, this.refreshMatrix(true));\n\t        };\n\t        FocusStrategy.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        FocusStrategy.prototype.restoreFocus = function () {\n\t            this.addFocus(this.getContent().getFocusInfo());\n\t        };\n\t        FocusStrategy.prototype.clearOutline = function () {\n\t            this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n\t            if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n\t        };\n\t        FocusStrategy.prototype.getPrevIndexes = function () {\n\t            var forget = this.forget;\n\t            this.forget = false;\n\t            return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n\t        };\n\t        FocusStrategy.prototype.forgetPrevious = function () {\n\t            this.forget = true;\n\t        };\n\t        return FocusStrategy;\n\t    }());\n\t    exports.FocusStrategy = FocusStrategy;\n\t    var Matrix = (function () {\n\t        function Matrix() {\n\t            this.matrix = [];\n\t            this.current = [];\n\t        }\n\t        Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n\t            this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n\t            this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n\t        };\n\t        Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n\t            var tmp = columnIndex;\n\t            if (rowIndex + navigator[0] < 0) {\n\t                return [rowIndex, columnIndex];\n\t            }\n\t            rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n\t            var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n\t            columnIndex = first === null ? tmp : first;\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + columnIndex, this.matrix);\n\t            return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n\t                this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n\t            if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n\t                && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n\t                return null;\n\t            }\n\t            return !this.inValid(vector[index]) ? index :\n\t                this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n\t        };\n\t        Matrix.prototype.select = function (rowIndex, columnIndex) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n\t            this.current = [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.generate = function (rows, selector) {\n\t            var _this = this;\n\t            this.rows = rows.length - 1;\n\t            this.matrix = [];\n\t            rows.forEach(function (row, rIndex) {\n\t                var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n\t                _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n\t                cells.forEach(function (cell, cIndex) {\n\t                    _this.set(rIndex, cIndex, selector(row, cell));\n\t                });\n\t            });\n\t            return this.matrix;\n\t        };\n\t        Matrix.prototype.inValid = function (value) {\n\t            return value === 0 || value === undefined;\n\t        };\n\t        return Matrix;\n\t    }());\n\t    exports.Matrix = Matrix;\n\t    var ContentFocus = (function () {\n\t        function ContentFocus(parent) {\n\t            var _this = this;\n\t            this.matrix = new Matrix();\n\t            this.parent = parent;\n\t            this.keyActions = {\n\t                'rightArrow': [0, 1],\n\t                'tab': [0, 1],\n\t                'leftArrow': [0, -1],\n\t                'shiftTab': [0, -1],\n\t                'upArrow': [-1, 0],\n\t                'downArrow': [1, 0],\n\t                'shiftUp': [-1, 0],\n\t                'shiftDown': [1, 0],\n\t                'shiftRight': [0, 1],\n\t                'shiftLeft': [0, -1],\n\t                'enter': [1, 0],\n\t                'shiftEnter': [-1, 0]\n\t            };\n\t            this.indexesByKey = function (action) {\n\t                var opt = {\n\t                    'home': [_this.matrix.current[0], -1, 0, 1],\n\t                    'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n\t                    'ctrlHome': [0, -1, 0, 1],\n\t                    'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n\t                };\n\t                return opt[action] || null;\n\t            };\n\t        }\n\t        ContentFocus.prototype.onKeyPress = function (e) {\n\t            var navigator = this.keyActions[e.action];\n\t            var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n\t            if (!current) {\n\t                return;\n\t            }\n\t            this.matrix.select(current[0], current[1]);\n\t        };\n\t        ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n\t            if (navigator === void 0) { navigator = [0, 0]; }\n\t            if (!isPresent && !this.indexesByKey(action)) {\n\t                return null;\n\t            }\n\t            if (!this.shouldFocusChange(e)) {\n\t                return this.matrix.current;\n\t            }\n\t            var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n\t            var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n\t            return current;\n\t        };\n\t        ContentFocus.prototype.onClick = function (e, force) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-rowcell') ? target : ej2_base_1.closest(target, 'td'));\n\t            if (!target) {\n\t                return;\n\t            }\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(rowIndex, cellIndex);\n\t        };\n\t        ContentFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            this.matrix.current = [rowIndex, cellIndex];\n\t            info.element = this.parent.getContentTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-detailcell');\n\t            return info;\n\t        };\n\t        ContentFocus.prototype.getFocusable = function (element) {\n\t            var child = [].slice\n\t                .call(element.querySelectorAll('button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])'));\n\t            return child.length ? child[0] : element;\n\t        };\n\t        ContentFocus.prototype.selector = function (row, cell) {\n\t            var types = [enum_1.CellType.Expand, enum_1.CellType.GroupCaption, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary];\n\t            return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n\t                || (row.isDataRow && cell.cellType === enum_1.CellType.DetailExpand)\n\t                || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n\t                || (cell.column && cell.column.type === 'checkbox'))\n\t                && !(row.edit === 'delete' && row.isDirty);\n\t        };\n\t        ContentFocus.prototype.jump = function (action, current) {\n\t            return action === 'upArrow' && current[0] === 0;\n\t        };\n\t        ContentFocus.prototype.generateRows = function (rows) {\n\t        };\n\t        ContentFocus.prototype.getInfo = function (e) {\n\t            var info = this.getFocusInfo();\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            var isData = info.element.classList.contains('e-rowcell');\n\t            var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n\t                || info.element.classList.contains('e-detailrowexpand')));\n\t            var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n\t                Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n\t            return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n\t        };\n\t        ContentFocus.prototype.validator = function () {\n\t            var table = this.parent.getContentTable();\n\t            return function (rowIndex, cellIndex, action) {\n\t                var cell = table.rows[rowIndex].cells[cellIndex];\n\t                if (action === 'enter' || action === 'shiftEnter') {\n\t                    return cell.classList.contains('e-rowcell');\n\t                }\n\t                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n\t                    return true;\n\t                }\n\t                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n\t                    return cell.getBoundingClientRect().width !== 0;\n\t                }\n\t                return false;\n\t            };\n\t        };\n\t        ContentFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getContentTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' || e.action === 'shiftEnter' ? cell.classList.contains('e-rowcell') : true;\n\t        };\n\t        return ContentFocus;\n\t    }());\n\t    exports.ContentFocus = ContentFocus;\n\t    var HeaderFocus = (function (_super) {\n\t        __extends(HeaderFocus, _super);\n\t        function HeaderFocus(parent) {\n\t            return _super.call(this, parent) || this;\n\t        }\n\t        HeaderFocus.prototype.onClick = function (e) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-headercell') ? target : ej2_base_1.closest(target, 'th'));\n\t            if (!target) {\n\t                return;\n\t            }\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n\t        };\n\t        HeaderFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            info.element = this.parent.getHeaderTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-filterbarcell');\n\t            return info;\n\t        };\n\t        HeaderFocus.prototype.selector = function (row, cell) {\n\t            return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox';\n\t        };\n\t        HeaderFocus.prototype.jump = function (action, current) {\n\t            return action === 'downArrow' && current[0] === this.matrix.matrix.length - 1;\n\t        };\n\t        HeaderFocus.prototype.generateRows = function (rows) {\n\t            var _this = this;\n\t            var length = this.matrix.matrix.length;\n\t            if (this.parent.allowFiltering && this.parent.filterSettings.type === 'filterbar') {\n\t                this.matrix.rows = ++this.matrix.rows;\n\t                rows[0].cells.forEach(function (cell, cIndex) {\n\t                    return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n\t                });\n\t            }\n\t        };\n\t        HeaderFocus.prototype.getInfo = function () {\n\t            return { isContent: false, isHeader: true };\n\t        };\n\t        HeaderFocus.prototype.validator = function () {\n\t            return function () { return true; };\n\t        };\n\t        HeaderFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getHeaderTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' ? !cell.classList.contains('e-headercell') : true;\n\t        };\n\t        return HeaderFocus;\n\t    }(ContentFocus));\n\t    exports.HeaderFocus = HeaderFocus;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], PageSettings.prototype, \"template\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.preventFocus = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.persistSelection = false;\n\t            this.selectedRowState = {};\n\t            this.isBatchEdit = false;\n\t            this.prevKey = 0;\n\t            this.totalRecordsCount = 0;\n\t            this.isChkAll = false;\n\t            this.isUnChkAll = false;\n\t            this.chkAllCollec = [];\n\t            this.isCheckedOnAdd = false;\n\t            this.persistSelectedData = [];\n\t            this.selectionRequest = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit && !this.persistSelection;\n\t        };\n\t        Selection.prototype.selectRow = function (index, isToggle) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n\t            if (!isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToggle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n\t            if (this.persistSelection && !ej2_base_2.isNullOrUndefined(selectedRow)) {\n\t                var rowObj = this.parent.getRowObjectFromUID(selectedRow.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (pKey === null) {\n\t                    return;\n\t                }\n\t                rowObj.isSelected = chkState;\n\t                if (chkState) {\n\t                    this.selectedRowState[pKey] = chkState;\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) < 0) {\n\t                        this.persistSelectedData.push(rowObj.data);\n\t                    }\n\t                }\n\t                else {\n\t                    delete (this.selectedRowState[pKey]);\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) >= 0) {\n\t                        this.persistSelectedData.splice(this.persistSelectedData.indexOf(rowObj.data), 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateCheckBoxes = function (row, chkState) {\n\t            if (!ej2_base_2.isNullOrUndefined(row)) {\n\t                var chkBox = row.querySelector('.e-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(chkBox) && this.checkedTarget !== chkBox) {\n\t                    chkBox.ej2_instances[0].setProperties({ checked: chkState });\n\t                    if (ej2_base_2.isNullOrUndefined(this.checkedTarget) || (!ej2_base_2.isNullOrUndefined(this.checkedTarget)\n\t                        && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.updatePersistCollection(selectedRow, true);\n\t            this.updateCheckBoxes(selectedRow, true);\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t            if (!this.preventFocus) {\n\t                var target = this.focus.getPrevIndexes().cellIndex ?\n\t                    selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n\t                    selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n\t                if (!target) {\n\t                    return;\n\t                }\n\t                this.focus.onClick({ target: target }, true);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            if (!this.persistSelection || (this.persistSelection && !this.parent.isEdit) ||\n\t                (!ej2_base_2.isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t                if (span.classList.contains('e-rowselect')) {\n\t                    span.classList.remove('e-spanclicked');\n\t                }\n\t                this.clearRowSelection();\n\t                this.clearCellSelection();\n\t                this.enableSelectMultiTouch = false;\n\t            }\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                    this.updatePersistCollection(row_1, false);\n\t                    this.updateCheckBoxes(row_1);\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.updatePersistCollection(row[0], false);\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t            this.updateCheckBoxes(row[0]);\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex, isToggle) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            isToggle = !isToggle ? isToggle : !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isToggle) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, this.getColIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex));\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getColIndex = function (rowIndex, index) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Selection.prototype.getLastColIndex = function (rowIndex) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(cells[0], 'tr'));\n\t            }\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            if (selectedCell.classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(selectedCell, 'tr'), true);\n\t            }\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            if (!this.preventFocus) {\n\t                this.focus.onClick({ target: cell }, true);\n\t            }\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.addEventListener(events.dataBound, this.onDataBound.bind(this));\n\t            this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.cellFocused, this.onCellFocused);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t            this.parent.removeEventListener(events.dataBound, this.onDataBound);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBegin);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.checkBoxSelectionChanged = function () {\n\t            var isCheckColumn = false;\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.type === 'checkbox') {\n\t                    this.isChkSelection = true;\n\t                    this.parent.selectionSettings.type = 'multiple';\n\t                    this.chkField = col.field;\n\t                    this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n\t                    if (ej2_base_2.isNullOrUndefined(this.totalRecordsCount)) {\n\t                        this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                    }\n\t                    this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t                    this.chkAllObj = this.chkAllBox;\n\t                    isCheckColumn = true;\n\t                    this.parent.element.classList.add('e-checkboxselection');\n\t                    break;\n\t                }\n\t            }\n\t            if (!isCheckColumn) {\n\t                this.isChkSelection = false;\n\t                this.chkField = '';\n\t                this.chkAllBox = this.chkAllObj = null;\n\t                this.parent.element.classList.remove('e-checkboxselection');\n\t            }\n\t            if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n\t                this.persistSelection = true;\n\t                this.parent.element.classList.add('e-persistselection');\n\t                this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n\t                if (!this.parent.enableVirtualization && this.chkField && Object.keys(this.selectedRowState).length === 0) {\n\t                    var data = this.parent.getDataModule();\n\t                    var query = new ej2_data_1.Query().where(this.chkField, 'equal', true);\n\t                    var dataManager = data.getData({}, query);\n\t                    var proxy_1 = this;\n\t                    this.parent.showSpinner();\n\t                    dataManager.then(function (e) {\n\t                        proxy_1.dataSuccess(e.result);\n\t                        proxy_1.refreshPersistSelection();\n\t                        proxy_1.parent.hideSpinner();\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                this.persistSelection = false;\n\t                this.parent.element.classList.remove('e-persistselection');\n\t                this.selectedRowState = {};\n\t            }\n\t        };\n\t        Selection.prototype.dataSuccess = function (res) {\n\t            for (var i = 0; i < res.length; i++) {\n\t                if (ej2_base_2.isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n\t                    this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n\t                }\n\t            }\n\t            this.persistSelectedData = res;\n\t        };\n\t        Selection.prototype.refreshPersistSelection = function () {\n\t            this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t            this.chkAllObj = this.chkAllBox;\n\t            var rows = this.parent.getRows();\n\t            if (rows.length > 0 && (this.persistSelection || this.chkField)) {\n\t                var indexes = [];\n\t                for (var j = 0; j < rows.length; j++) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(rows[j].getAttribute('data-uid'));\n\t                    var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                    if (pKey === null) {\n\t                        return;\n\t                    }\n\t                    var checkState = void 0;\n\t                    if (this.selectedRowState[pKey] || (this.isChkAll && this.chkAllCollec.indexOf(pKey) < 0)\n\t                        || (this.isUnChkAll && this.chkAllCollec.indexOf(pKey) > 0) || (this.chkField && rowObj.data[this.chkField])) {\n\t                        indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n\t                        checkState = true;\n\t                    }\n\t                    else {\n\t                        var chkBox = rows[j].querySelector('.e-checkselect');\n\t                        checkState = false;\n\t                        if (this.checkedTarget !== chkBox && this.isChkSelection) {\n\t                            chkBox.ej2_instances[0].setProperties({ checked: checkState });\n\t                        }\n\t                    }\n\t                    this.updatePersistCollection(rows[j], checkState);\n\t                }\n\t                if (this.selectionSettings.type === 'multiple') {\n\t                    this.selectRows(indexes);\n\t                }\n\t                else {\n\t                    this.clearSelection();\n\t                    if (indexes.length > 0) {\n\t                        this.selectRow(indexes[0], true);\n\t                    }\n\t                }\n\t            }\n\t            if (this.isChkSelection) {\n\t                this.setCheckAllState();\n\t            }\n\t        };\n\t        Selection.prototype.actionBegin = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(editChkBox)) {\n\t                    var row = ej2_base_3.closest(editChkBox, '.e-editedrow');\n\t                    if (row) {\n\t                        if (this.parent.editSettings.mode === 'dialog') {\n\t                            row = this.parent.element.querySelector('.e-dlgeditrow');\n\t                        }\n\t                        var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                        if (!rowObj) {\n\t                            return;\n\t                        }\n\t                        this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n\t                    }\n\t                    else {\n\t                        this.isCheckedOnAdd = editChkBox.checked;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.actionComplete = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                if (e.action === 'add' && this.isCheckedOnAdd) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n\t                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.onDataBound = function () {\n\t            if (this.persistSelection || this.chkField) {\n\t                if (this.parent.enableVirtualization) {\n\t                    var records = this.parent.getCurrentViewRecords();\n\t                    this.dataSuccess(records);\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAllAction = function (checkState) {\n\t            var editForm = this.parent.element.querySelector('.e-gridform');\n\t            this.checkedTarget = this.chkAllBox;\n\t            if (checkState) {\n\t                this.selectRowsByRange(0, this.parent.getCurrentViewRecords().length);\n\t                this.isChkAll = true;\n\t                this.isUnChkAll = false;\n\t            }\n\t            else {\n\t                this.clearSelection();\n\t                this.isUnChkAll = true;\n\t                this.isChkAll = false;\n\t            }\n\t            this.chkAllCollec = [];\n\t            if (this.persistSelection) {\n\t                var rows = this.parent.getRows();\n\t                for (var i = 0; i < rows.length; i++) {\n\t                    this.updatePersistCollection(rows[i], checkState);\n\t                }\n\t                if (this.isUnChkAll) {\n\t                    this.selectedRowState = {};\n\t                    this.persistSelectedData = [];\n\t                }\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(editForm)) {\n\t                var editChkBox = editForm.querySelector('.e-edit-checkselect');\n\t                editChkBox.ej2_instances[0].setProperties({ checked: checkState });\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAll = function (checkBox) {\n\t            var checkObj = checkBox;\n\t            this.checkSelectAllAction(checkBox.checked);\n\t            this.target = null;\n\t            this.triggerChkChangeEvent(checkBox, checkBox.checked);\n\t        };\n\t        Selection.prototype.checkSelect = function (checkBox) {\n\t            var target = ej2_base_3.closest(this.checkedTarget, '.e-rowcell');\n\t            var checkObj = checkBox;\n\t            this.isMultiCtrlRequest = true;\n\t            var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t            if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                ++rIndex;\n\t            }\n\t            this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t            this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t            this.setCheckAllState();\n\t            this.isMultiCtrlRequest = false;\n\t            this.triggerChkChangeEvent(checkBox, checkBox.checked);\n\t        };\n\t        Selection.prototype.moveIntoUncheckCollection = function (row) {\n\t            if (this.isChkAll || this.isUnChkAll) {\n\t                var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (!pKey) {\n\t                    return;\n\t                }\n\t                if (this.chkAllCollec.indexOf(pKey) < 0) {\n\t                    this.chkAllCollec.push(pKey);\n\t                }\n\t                else {\n\t                    this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n\t            this.parent.trigger(events.checkBoxChange, {\n\t                checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n\t                target: checkBox\n\t            });\n\t            if (!this.parent.isEdit) {\n\t                this.checkedTarget = null;\n\t            }\n\t        };\n\t        Selection.prototype.setCheckAllState = function () {\n\t            if (this.isChkSelection) {\n\t                var checkedLen = Object.keys(this.selectedRowState).length;\n\t                if (!this.persistSelection) {\n\t                    checkedLen = this.selectedRecords.length;\n\t                    this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                }\n\t                if (checkedLen === this.totalRecordsCount || (this.persistSelection && this.parent.allowPaging\n\t                    && this.isChkAll && this.chkAllCollec.length === 0)) {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ checked: true });\n\t                }\n\t                else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ indeterminate: false, checked: false });\n\t                }\n\t                else {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ indeterminate: true });\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            var chkSelect = false;\n\t            this.preventFocus = true;\n\t            var checkBox;\n\t            this.selectionRequest = true;\n\t            if (target.classList.contains('e-checkselect') || target.classList.contains('e-checkselectall')) {\n\t                checkBox = target;\n\t                chkSelect = true;\n\t            }\n\t            if (target && (target.classList.contains('e-rowcell') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n\t                if (this.isChkSelection) {\n\t                    this.isMultiCtrlRequest = true;\n\t                }\n\t                this.target = target;\n\t                if (!ej2_base_2.isNullOrUndefined(checkBox)) {\n\t                    this.checkedTarget = checkBox;\n\t                    if (checkBox.classList.contains('e-checkselectall')) {\n\t                        this.checkSelectAll(checkBox);\n\t                    }\n\t                    else {\n\t                        this.checkSelect(checkBox);\n\t                        this.target = ej2_base_3.closest(target, '.e-rowcell');\n\t                    }\n\t                }\n\t                else {\n\t                    var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t                    if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                        ++rIndex;\n\t                    }\n\t                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t                    if (this.isChkSelection) {\n\t                        this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t                if (!this.isChkSelection && ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.selectionRequest = false;\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex, true);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.onCellFocused = function (e) {\n\t            var clear = ((e.container.isHeader && e.isJump) || (e.container.isContent && !e.container.isSelectable)) &&\n\t                !(e.byKey && e.keyArgs.action === 'space');\n\t            var headerAction = e.container.isHeader && !(e.byKey && e.keyArgs.action === 'space');\n\t            if (!e.byKey || clear) {\n\t                if (clear) {\n\t                    this.clearSelection();\n\t                }\n\t                return;\n\t            }\n\t            var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var prev = this.focus.getPrevIndexes();\n\t            if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n\t                rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n\t                return;\n\t            }\n\t            this.preventFocus = true;\n\t            switch (e.keyArgs.action) {\n\t                case 'downArrow':\n\t                case 'upArrow':\n\t                case 'enter':\n\t                case 'shiftEnter':\n\t                    this.applyDownUpKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'rightArrow':\n\t                case 'leftArrow':\n\t                    this.applyRightLeftKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftDown':\n\t                case 'shiftUp':\n\t                    this.shiftDownKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftLeft':\n\t                case 'shiftRight':\n\t                    this.applyShiftLeftRightKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    this.applyHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'ctrlHome':\n\t                case 'ctrlEnd':\n\t                    this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'escape':\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    this.ctrlPlusA();\n\t                    break;\n\t                case 'space':\n\t                    this.selectionRequest = true;\n\t                    var target = e.element;\n\t                    if (target.classList.contains('e-checkselectall')) {\n\t                        this.checkedTarget = target;\n\t                        this.checkSelectAll(this.checkedTarget);\n\t                    }\n\t                    else {\n\t                        if (target.classList.contains('e-checkselect')) {\n\t                            this.checkedTarget = target;\n\t                            this.checkSelect(this.checkedTarget);\n\t                        }\n\t                    }\n\t                    this.selectionRequest = false;\n\t                    break;\n\t            }\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isChkSelection && this.isChkAll) {\n\t                this.checkSelectAllAction(false);\n\t                this.checkedTarget = null;\n\t            }\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            if (rowIndex < 0) {\n\t                return;\n\t            }\n\t            if (!this.target) {\n\t                this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n\t            }\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                this.addAttribute(this.target);\n\t            }\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    this.selectRowsByRange(this.prevRowIndex, rowIndex);\n\t                    this.applyUpDown(rowIndex);\n\t                }\n\t                else {\n\t                    this.selectRow(0, true);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        Selection.prototype.getSelectedRecords = function () {\n\t            var selectedData = [];\n\t            if (!this.selectionSettings.persistSelection) {\n\t                selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n\t                    .map(function (m) { return m.data; });\n\t            }\n\t            else {\n\t                selectedData = this.persistSelectedData;\n\t            }\n\t            return selectedData;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(39)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n\t                this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var mHdrHeight = 0;\n\t            var content = this.parent.getContent().firstChild;\n\t            if (this.parent.frozenRows) {\n\t                mHdrHeight =\n\t                    this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height - mHdrHeight);\n\t            }\n\t            else {\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            }\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var top = target.scrollTop;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t            };\n\t        };\n\t        Scroll.prototype.onWheelScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var top = element.scrollTop + e.deltaY;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                e.preventDefault();\n\t                _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t            };\n\t        };\n\t        Scroll.prototype.onTouchScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                var pageY = _this.getPointY(e);\n\t                var top = element.scrollTop + (_this.pageY - pageY);\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                e.preventDefault();\n\t                _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n\t                element.scrollTop = top;\n\t                _this.pageY = pageY;\n\t                _this.previousValues.top = top;\n\t            };\n\t        };\n\t        Scroll.prototype.setPageY = function () {\n\t            var _this = this;\n\t            return function (e) {\n\t                _this.pageY = _this.getPointY(e);\n\t            };\n\t        };\n\t        Scroll.prototype.getPointY = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageY;\n\t            }\n\t            else {\n\t                return e.pageY;\n\t            }\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                var mCont = this.content.querySelector('.e-movablecontent');\n\t                var fCont = this.content.querySelector('.e-frozencontent');\n\t                var mHdr = this.header.querySelector('.e-movableheader');\n\t                if (this.parent.frozenColumns) {\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchstart', this.setPageY(), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchmove', this.onTouchScroll(mCont), this);\n\t                }\n\t                else {\n\t                    ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                    ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            if (this.parent.frozenColumns) {\n\t                content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t            else {\n\t                content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = { fn: ej2_base_1.compile(this.footerTemplate, helper),\n\t                    property: 'footerTemplate' };\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = { fn: ej2_base_1.compile(this.groupFooterTemplate, helper),\n\t                    property: 'groupFooterTemplate' };\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = { fn: ej2_base_1.compile(this.groupCaptionTemplate, helper),\n\t                    property: 'groupCaptionTemplate' };\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(5), __webpack_require__(10), __webpack_require__(6), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, events, ej2_popups_1, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.isCustomizeOpenCC = false;\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(true, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(true, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.cBoxTrue.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.element) {\n\t                this.dlgObj.destroy();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!this.isCustomizeOpenCC) {\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                    if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                        if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                            this.isDlgOpen = true;\n\t                            return;\n\t                        }\n\t                    }\n\t                    else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                        targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                        this.columnChooserSearch('');\n\t                        this.removeCancelIcon();\n\t                    }\n\t                }\n\t                else {\n\t                    if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n\t                        this.dlgObj.hide();\n\t                        this.isDlgOpen = false;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(ej2_base_2.closest(target, '.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + ej2_base_2.closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + ej2_base_2.closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t            }\n\t            else {\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            this.isCustomizeOpenCC = true;\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n\t        };\n\t        ColumnChooser.prototype.customDialogOpen = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.customDialogClose = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t            util_1.changeButtonType(this.dlgObj.element);\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', this.searchFocus.bind(this, ccsearchele));\n\t            ccsearchele.addEventListener('blur', this.searchBlur.bind(this, ccsearchele));\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.searchFocus = function (targt) {\n\t            targt.parentElement.classList.add('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.searchBlur = function (targt) {\n\t            targt.parentElement.classList.remove('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index];\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n\t            if (isChecked) {\n\t                if (this.hideColumn.indexOf(coluid) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.showColumn.indexOf(coluid) === -1) {\n\t                    this.showColumn.push(coluid);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(coluid) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(coluid) === -1) {\n\t                    this.hideColumn.push(coluid);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            if (this.dlgObj.element) {\n\t                ej2_base_2.EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n\t            }\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n\t            var checkstate;\n\t            var elem = util_1.parentsUntil(e.target, 'e-checkbox-wrapper');\n\t            if (elem) {\n\t                util_1.toogleCheckbox(elem.parentElement);\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t                if (elem.querySelector('.e-check')) {\n\t                    checkstate = true;\n\t                }\n\t                else if (elem.querySelector('.e-uncheck')) {\n\t                    checkstate = false;\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                var columnUid = util_1.parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n\t                this.checkstatecolumn(checkstate, columnUid);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var columnUID = util_1.parentsUntil(element, 'e-ccheck').getAttribute('uid');\n\t                var column = this.parent.getColumnByUid(columnUID);\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n\t            var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n\t            cbox.querySelector('.e-label').innerHTML = label;\n\t            return util_1.createCboxWithWrap(uid, cbox, 'e-ccheck');\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n\t                var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n\t                cclist.appendChild(cccheckboxlist);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t                this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Clipboard = (function () {\n\t        function Clipboard(parent) {\n\t            this.copyContent = '';\n\t            this.isSelect = false;\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Clipboard.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyDownHandler, this);\n\t        };\n\t        Clipboard.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.keyPressed, this.keyDownHandler);\n\t        };\n\t        Clipboard.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.clipBoardTextArea = ej2_base_1.createElement('textarea', {\n\t                className: 'e-clipboard',\n\t                styles: 'opacity: 0',\n\t                attrs: { readonly: 'true' }\n\t            });\n\t            this.parent.element.appendChild(this.clipBoardTextArea);\n\t        };\n\t        Clipboard.prototype.keyDownHandler = function (e) {\n\t            if (e.action === 'ctrlPlusC') {\n\t                this.copy();\n\t            }\n\t            else if (e.action === 'ctrlShiftPlusH') {\n\t                this.copy(true);\n\t            }\n\t        };\n\t        Clipboard.prototype.setCopyData = function (withHeader) {\n\t            if (window.getSelection().toString() === '') {\n\t                this.clipBoardTextArea.value = this.copyContent = '';\n\t                if (this.parent.selectionSettings.mode !== 'cell') {\n\t                    var rows = this.parent.getRows();\n\t                    var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n\t                    if (withHeader) {\n\t                        this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-headercell')), false, '\\t', withHeader);\n\t                        this.copyContent += '\\n';\n\t                    }\n\t                    for (var i = 0; i < selectedIndexes.length; i++) {\n\t                        if (i > 0) {\n\t                            this.copyContent += '\\n';\n\t                        }\n\t                        this.getCopyData([].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell')), false, '\\t', withHeader);\n\t                    }\n\t                }\n\t                else {\n\t                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n\t                }\n\t                var args = {\n\t                    data: this.copyContent,\n\t                    cancel: false,\n\t                };\n\t                this.parent.trigger(events.beforeCopy, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.clipBoardTextArea.value = this.copyContent = args.data;\n\t                if (!ej2_base_1.Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n\t                    this.clipBoardTextArea.select();\n\t                }\n\t                else {\n\t                    this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n\t                }\n\t                this.isSelect = true;\n\t            }\n\t        };\n\t        Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n\t            for (var j = 0; j < cells.length; j++) {\n\t                if (withHeader && isCell) {\n\t                    this.copyContent += this.parent.getVisibleColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n\t                }\n\t                this.copyContent += cells[j].textContent;\n\t                if (j < cells.length - 1) {\n\t                    this.copyContent += splitKey;\n\t                }\n\t            }\n\t        };\n\t        Clipboard.prototype.copy = function (withHeader) {\n\t            if (document.queryCommandSupported('copy')) {\n\t                this.setCopyData(withHeader);\n\t                document.execCommand('copy');\n\t                this.clipBoardTextArea.blur();\n\t            }\n\t            if (this.isSelect) {\n\t                window.getSelection().removeAllRanges();\n\t                this.isSelect = false;\n\t            }\n\t        };\n\t        Clipboard.prototype.getModuleName = function () {\n\t            return 'clipboard';\n\t        };\n\t        Clipboard.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.clipBoardTextArea);\n\t        };\n\t        return Clipboard;\n\t    }());\n\t    exports.Clipboard = Clipboard;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(21), __webpack_require__(55), __webpack_require__(56), __webpack_require__(42), __webpack_require__(63), __webpack_require__(43), __webpack_require__(45), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(77), __webpack_require__(46), __webpack_require__(78), __webpack_require__(79), __webpack_require__(80), __webpack_require__(51), __webpack_require__(83), __webpack_require__(94), __webpack_require__(92), __webpack_require__(93), __webpack_require__(95), __webpack_require__(48), __webpack_require__(97), __webpack_require__(100), __webpack_require__(99), __webpack_require__(49), __webpack_require__(102), __webpack_require__(22), __webpack_require__(104), __webpack_require__(105), __webpack_require__(108), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1, clipboard_1, command_column_1, checkbox_filter_1, context_menu_1, freeze_1, column_menu_1, excel_filter_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t    __export(clipboard_1);\n\t    __export(command_column_1);\n\t    __export(checkbox_filter_1);\n\t    __export(context_menu_1);\n\t    __export(freeze_1);\n\t    __export(column_menu_1);\n\t    __export(excel_filter_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(52), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(12), __webpack_require__(25), __webpack_require__(53), __webpack_require__(54)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(16), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst && currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns, locator) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            var gObj = this.parent;\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n\t                return;\n\t            }\n\t            if (!gObj.allowMultiSorting) {\n\t                isMultiSort = gObj.allowMultiSorting;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = gObj.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressed, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressed);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler') &&\n\t                !e.target.classList.contains('e-columnmenu') &&\n\t                !e.target.classList.contains('e-filtermenudiv')) {\n\t                var gObj = this.parent;\n\t                var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (colObj.type !== 'checkbox') {\n\t                    this.initiateSort(target, e, colObj);\n\t                    if (ej2_base_1.Browser.isDevice) {\n\t                        this.showPopUp(e);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.keyPressed = function (e) {\n\t            if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')) {\n\t                var target = this.focus.getFocusedElement();\n\t                if (!target || !target.classList.contains('e-headercell') || (this.parent.frozenColumns || this.parent.frozenRows)) {\n\t                    return;\n\t                }\n\t                var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                this.initiateSort(target, e, col);\n\t            }\n\t        };\n\t        Sort.prototype.initiateSort = function (target, e, column) {\n\t            var gObj = this.parent;\n\t            var field = column.field;\n\t            var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                'descending';\n\t            if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n\t                && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n\t                this.removeSortColumn(field);\n\t            }\n\t            else {\n\t                this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(57), __webpack_require__(60), __webpack_require__(62), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            this.pagerDestroy();\n\t            if (!ej2_base_2.isNullOrUndefined(this.parent.pagerTemplate)) {\n\t                this.pageSettings.template = this.parent.pagerTemplate;\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            if (!(this.pageSettings.template)) {\n\t                var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t                var links = numericContainer.querySelectorAll('a');\n\t                for (var i = 0; i < links.length; i++) {\n\t                    if (this.parent.getContentTable()) {\n\t                        links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                    }\n\t                }\n\t                var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    if (_this.parent.getContentTable()) {\n\t                        element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.isForceCancel = true;\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.pagerObj.dataBind();\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerDestroy();\n\t        };\n\t        Page.prototype.pagerDestroy = function () {\n\t            if (this.pagerObj && !this.pagerObj.isDestroyed) {\n\t                this.pagerObj.destroy();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(58), __webpack_require__(59), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            if (this.template) {\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.initLocalization();\n\t                this.updateRTL();\n\t                this.totalRecordsCount = this.totalRecordsCount || 0;\n\t                this.renderFirstPrevDivForDevice();\n\t                this.containerModule.render();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.render();\n\t                }\n\t                this.renderNextLastDivForDevice();\n\t                if (this.checkpagesizes()) {\n\t                    this.pagerdropdownModule.render();\n\t                }\n\t                this.addAriaLabel();\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.render();\n\t                }\n\t                this.refresh();\n\t                this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t            }\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['currentPage', 'pageSize'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'template':\n\t                        this.templateFn = this.compile(this.template);\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.pagerTemplate = function () {\n\t            var result;\n\t            this.element.classList.add('e-pagertemplate');\n\t            this.compile(this.template);\n\t            var data = {\n\t                currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n\t                totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n\t            };\n\t            result = this.getPagerTemplate()(data);\n\t            util_1.appendChildren(this.element, result);\n\t        };\n\t        Pager.prototype.updateTotalPages = function () {\n\t            this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n\t                (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n\t        };\n\t        Pager.prototype.getPagerTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Pager.prototype.compile = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        this.templateFn = ej2_base_2.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    this.templateFn = ej2_base_2.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            if (this.template) {\n\t                this.element.innerHTML = '';\n\t                this.updateTotalPages();\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.updateRTL();\n\t                this.containerModule.refresh();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.refresh();\n\t                }\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.refresh();\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"dropDownChanged\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            this.pagerModule.updateTotalPages();\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(61)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_61__;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(10), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(64), __webpack_require__(7), __webpack_require__(65), __webpack_require__(22), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1, util_2, filter_menu_renderer_1, checkbox_filter_1, excel_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.nextFlMenuOpen = '';\n\t            this.type = { 'menu': filter_menu_renderer_1.FilterMenuRenderer, 'checkbox': checkbox_filter_1.CheckBoxFilter, 'excel': excel_filter_1.ExcelFilter };\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.fltrDlgDetails = { field: '', isOpen: false };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.getLocalizedCustomOperators();\n\t            if (this.parent.filterSettings.type === 'filterbar') {\n\t                if (gObj.columns.length) {\n\t                    var fltrElem = gObj.element.querySelector('.e-filterbar');\n\t                    if (fltrElem) {\n\t                        ej2_base_2.remove(fltrElem);\n\t                    }\n\t                    var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter, gObj);\n\t                    var row = void 0;\n\t                    var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                    cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                    this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                    rowRenderer.element = ej2_base_2.createElement('tr', { className: 'e-filterbar' });\n\t                    row = this.generateRow();\n\t                    row.data = this.values;\n\t                    this.element = rowRenderer.render(row, gObj.getColumns());\n\t                    this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                    var detail = this.element.querySelector('.e-detailheadercell');\n\t                    if (detail) {\n\t                        detail.className = 'e-filterbarcell e-mastercell';\n\t                    }\n\t                    var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n\t                    if (gCells.length) {\n\t                        gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                    }\n\t                    this.wireEvents();\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            if (this.filterModule) {\n\t                this.filterModule.destroy();\n\t            }\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n\t            ej2_base_1.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n\t            this.parent.on(events.click, this.filterIconClickHandler, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.clickHandler);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t            this.parent.off(events.filterOpen, this.columnMenuFilter);\n\t            this.parent.off(events.filterMenuClose, this.filterMenuClose);\n\t            this.parent.off(events.click, this.filterIconClickHandler);\n\t        };\n\t        Filter.prototype.filterMenuClose = function (args) {\n\t            this.fltrDlgDetails.isOpen = false;\n\t        };\n\t        Filter.prototype.columnMenuFilter = function (args) {\n\t            this.column = args.col;\n\t            var ele = ej2_base_1.closest(args.target, '#' + args.id);\n\t            if (args.isClose && !ele) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            else if (ele) {\n\t                this.filterDialogOpen(this.column, args.target);\n\t            }\n\t        };\n\t        Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n\t            var gObj = this.parent;\n\t            if (this.filterModule) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n\t            this.filterModule.openDialog({\n\t                type: col.type, field: col.field, displayName: col.headerText,\n\t                dataSource: col.filter.dataSource || gObj.dataSource, format: col.format,\n\t                filteredColumns: gObj.filterSettings.columns, target: target,\n\t                sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n\t                parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n\t                hideSearchbox: ej2_base_1.isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n\t                handler: this.filterHandler.bind(this), localizedStrings: {},\n\t                position: { X: left, Y: top }\n\t            });\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                filterCell = gObj.getHeaderContent().querySelector('#' + this.column.field + '_filterBarcell');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = !ej2_base_1.isNullOrUndefined(filterValue) && filterValue.toString();\n\t            if (this.column.type === 'number' || this.column.type === 'date') {\n\t                this.matchCase = true;\n\t            }\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (this.filterSettings.type === 'filterbar' && filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                    case 'type':\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var fCell;\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (this.filterSettings.type === 'filterbar' && !isClearFilterBar) {\n\t                        fCell = this.parent.getHeaderContent().querySelector('#' + cols[i].field + '_filterBarcell');\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    var fltrElement = this.parent.getColumnHeaderByField(field);\n\t                    fltrElement.removeAttribute('aria-filtered');\n\t                    if (this.filterSettings.type !== 'filterbar') {\n\t                        fltrElement.querySelector('.e-icon-filter').classList.remove('e-filtered');\n\t                    }\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (target && ej2_base_2.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                var gObj = this.parent;\n\t                var columns = this.filterSettings.columns;\n\t                var formater = this.serviceLocator.getService('valueFormatter');\n\t                var column = void 0;\n\t                var value = void 0;\n\t                if (!this.filterSettings.showFilterBarStatus) {\n\t                    return;\n\t                }\n\t                if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                    this.filterStatusMsg = '';\n\t                    for (var index = 0; index < columns.length; index++) {\n\t                        column = gObj.getColumnByField(columns[index].field);\n\t                        if (index) {\n\t                            this.filterStatusMsg += ' && ';\n\t                        }\n\t                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                    }\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    gObj.updateExternalMessage(this.filterStatusMsg);\n\t                }\n\t                this.filterStatusMsg = '';\n\t            }\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.parent.getHeaderContent()\n\t                .querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_1.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_1.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        Filter.prototype.getLocalizedCustomOperators = function () {\n\t            var numOptr = [\n\t                { value: 'equal', text: this.l10n.getConstant('Equal') },\n\t                { value: 'greaterThan', text: this.l10n.getConstant('GreaterThan') },\n\t                { value: 'greaterThanOrEqual', text: this.l10n.getConstant('GreaterThanOrEqual') },\n\t                { value: 'lessThan', text: this.l10n.getConstant('LessThan') },\n\t                { value: 'lessThanOrEqual', text: this.l10n.getConstant('LessThanOrEqual') },\n\t                { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t            ];\n\t            this.customOperators = {\n\t                stringOperator: [\n\t                    { value: 'startsWith', text: this.l10n.getConstant('StartsWith') },\n\t                    { value: 'endsWith', text: this.l10n.getConstant('EndsWith') },\n\t                    { value: 'contains', text: this.l10n.getConstant('Contains') },\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ],\n\t                numberOperator: numOptr,\n\t                dateOperator: numOptr,\n\t                datetimeOperator: numOptr,\n\t                booleanOperator: [\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ]\n\t            };\n\t        };\n\t        ;\n\t        Filter.prototype.filterIconClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'menu' ||\n\t                this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel')) {\n\t                var gObj = this.parent;\n\t                var col = gObj.getColumnByUid(util_2.parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n\t                var gClient = gObj.element.getBoundingClientRect();\n\t                var fClient = target.getBoundingClientRect();\n\t                this.column = col;\n\t                if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n\t                    return;\n\t                }\n\t                if (this.filterModule) {\n\t                    this.filterModule.closeDialog();\n\t                }\n\t                this.fltrDlgDetails = { field: col.field, isOpen: true };\n\t                this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n\t            }\n\t        };\n\t        Filter.prototype.clickHandler = function (e) {\n\t            if (this.parent.filterSettings.type === 'menu' ||\n\t                this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel') {\n\t                var gObj = this.parent;\n\t                var target = e.target;\n\t                var datepickerEle = target.classList.contains('e-day');\n\t                if (util_2.parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n\t                    return;\n\t                }\n\t                else if (this.filterModule &&\n\t                    (!util_2.parentsUntil(target, 'e-popup-wrapper')\n\t                        && (!ej2_base_1.closest(target, '.e-filter-item.e-menu-item'))\n\t                        && (!util_2.parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n\t                    this.filterModule.closeDialog(target);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.filterHandler = function (args) {\n\t            var filterIconElement;\n\t            var dataManager = new ej2_data_1.DataManager(this.filterSettings.columns);\n\t            var query = new ej2_data_1.Query().where('field', this.filterOperators.equal, args.field);\n\t            var result = dataManager.executeLocal(query);\n\t            for (var i = 0; i < result.length; i++) {\n\t                var index = -1;\n\t                for (var j = 0; j < this.filterSettings.columns.length; j++) {\n\t                    if (result[i].field === this.filterSettings.columns[j].field) {\n\t                        index = j;\n\t                        break;\n\t                    }\n\t                }\n\t                if (index !== -1) {\n\t                    this.filterSettings.columns.splice(index, 1);\n\t                }\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n\t            if (args.action === 'filtering') {\n\t                this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n\t                if (this.filterSettings.columns.length && filterIconElement) {\n\t                    filterIconElement.classList.add('e-filtered');\n\t                }\n\t            }\n\t            else {\n\t                if (filterIconElement) {\n\t                    filterIconElement.classList.remove('e-filtered');\n\t                }\n\t                this.parent.refresh();\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if (column.type !== 'checkbox') {\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    node.classList.add('e-fltrtemp');\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-fltrtempdiv'\n\t                    });\n\t                    if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                        input = ej2_base_2.createElement('input', {\n\t                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            attrs: { type: 'search', title: column.headerText }\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                    else {\n\t                        var args = { column: column };\n\t                        var temp = column.filterBarTemplate.create;\n\t                        if (typeof temp === 'string') {\n\t                            temp = ej2_base_1.getValue(temp, window);\n\t                        }\n\t                        input = temp(args);\n\t                        if (typeof input === 'string') {\n\t                            var div = ej2_base_2.createElement('div');\n\t                            div.innerHTML = input;\n\t                            input = div.firstChild;\n\t                        }\n\t                        ej2_base_2.attributes(innerDIV, {\n\t                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            title: column.headerText,\n\t                            id: column.field + '_filterBarcell',\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-filterdiv e-fltrinputdiv'\n\t                    });\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                        attrs: {\n\t                            type: 'search', title: column.headerText + cell.attributes.title,\n\t                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                        }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                    innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                        className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                        attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                    }));\n\t                }\n\t                if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                    input.setAttribute('disabled', 'true');\n\t                    input.classList.add('e-disable');\n\t                }\n\t                if (!column.visible) {\n\t                    node.classList.add('e-hide');\n\t                }\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    var templateRead = column.filterBarTemplate.read;\n\t                    var templateWrite = column.filterBarTemplate.write;\n\t                    var args = { element: input, column: column };\n\t                    if (typeof templateRead === 'string') {\n\t                        templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                    }\n\t                    if (typeof templateWrite === 'string') {\n\t                        templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                    }\n\t                    templateWrite.call(this, args);\n\t                }\n\t                this.appendHtml(node, innerDIV);\n\t            }\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(67), __webpack_require__(66), __webpack_require__(68), __webpack_require__(69), __webpack_require__(70), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_popups_1, filter_menu_operator_1, string_filter_ui_1, number_filter_ui_1, boolean_filter_ui_1, date_filter_ui_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterMenuRenderer = (function () {\n\t        function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n\t            this.colTypes = {\n\t                'string': string_filter_ui_1.StringFilterUI, 'number': number_filter_ui_1.NumberFilterUI, 'date': date_filter_ui_1.DateFilterUI, 'boolean': boolean_filter_ui_1.BooleanFilterUI, 'datetime': date_filter_ui_1.DateFilterUI\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.customFilterOperators = customFltrOperators;\n\t            this.filterObj = fltrObj;\n\t            this.flMuiObj = new filter_menu_operator_1.FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        }\n\t        FilterMenuRenderer.prototype.openDialog = function (args) {\n\t            this.col = this.parent.getColumnByField(args.field);\n\t            if (ej2_base_1.isNullOrUndefined(this.col.filter) || (ej2_base_1.isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'menu')) {\n\t                this.renderDlgContent(args.target, this.col);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.closeDialog = function () {\n\t            var elem = document.getElementById(this.dlgObj.element.id);\n\t            if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.col.field });\n\t                this.dlgObj.destroy();\n\t                ej2_base_1.remove(elem);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n\t            var mainDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n\t            this.dlgDiv = ej2_base_2.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                created: this.dialogCreated.bind(this, target, column),\n\t                position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n\t                target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n\t                buttons: [{\n\t                        click: this.filterBtnClick.bind(this, column),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearBtnClick.bind(this, column),\n\t                        buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n\t                    }],\n\t                content: mainDiv,\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                animationSettings: { effect: 'None' },\n\t                cssClass: 'e-filter-popup'\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t        };\n\t        FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n\t            if (!ej2_base_2.Browser.isDevice) {\n\t                util_1.getFilterMenuPostion(target, this.dlgObj);\n\t            }\n\t            this.renderFilterUI(target, column);\n\t            this.parent.notify(events.filterDialogCreated, {});\n\t            this.dlgObj.element.style.maxHeight = '350px';\n\t            this.dlgObj.show();\n\t            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n\t        };\n\t        FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n\t            var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n\t            this.renderOperatorUI(dlgConetntEle, target, col);\n\t            this.renderFlValueUI(dlgConetntEle, target, col);\n\t        };\n\t        FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n\t            this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n\t        };\n\t        FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n\t            var valueDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-valuediv' });\n\t            dlgConetntEle.appendChild(valueDiv);\n\t            var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n\t            var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(column.filter) && !ej2_base_1.isNullOrUndefined(column.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(column.filter.ui.create)) {\n\t                var temp = column.filter.ui.create;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                column.filter.ui.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t            else {\n\t                instanceofFilterUI.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n\t            var flValue;\n\t            var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    flValue = column.value;\n\t                }\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) && !ej2_base_1.isNullOrUndefined(col.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(col.filter.ui.write)) {\n\t                var temp = col.filter.ui.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.filter.ui.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t            else {\n\t                instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n\t            var flValue;\n\t            var flOptrValue;\n\t            var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n\t            flOptrValue = this.flMuiObj.getFlOperator();\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) &&\n\t                !ej2_base_1.isNullOrUndefined(col.filter.ui) && !ej2_base_1.isNullOrUndefined(col.filter.ui.read)) {\n\t                var temp = col.filter.ui.read;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                flValue = col.filter.ui.read({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n\t            }\n\t            else {\n\t                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n\t            var flIcon = column.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.add('e-filtered');\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n\t            this.filterObj.removeFilteredColsByField(column.field);\n\t            this.closeDialog();\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n\t            var flIcon = col.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.remove('e-filtered');\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.destroy = function () {\n\t        };\n\t        return FilterMenuRenderer;\n\t    }());\n\t    exports.FilterMenuRenderer = FilterMenuRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(8), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_data_1, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StringFilterUI = (function () {\n\t        function StringFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        StringFilterUI.prototype.create = function (args) {\n\t            var _this = this;\n\t            var data;\n\t            var floptr;\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.dialogObj = args.dialogObj;\n\t            this.actObj = new ej2_dropdowns_1.AutoComplete({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                fields: { value: args.column.field },\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                sortOrder: 'Ascending',\n\t                open: this.openPopup.bind(this),\n\t                cssClass: 'e-popup-flmenu',\n\t                focus: function () {\n\t                    _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n\t                },\n\t                autofill: true,\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                actionComplete: function (e) {\n\t                    e.result = e.result.filter(function (obj, index, arr) {\n\t                        return arr.map(function (mapObj) {\n\t                            return mapObj[_this.actObj.fields.value];\n\t                        }).indexOf(obj[_this.actObj.fields.value]) === index;\n\t                    });\n\t                }\n\t            });\n\t            this.actObj.appendTo(this.instance);\n\t        };\n\t        StringFilterUI.prototype.write = function (args) {\n\t            var columns = this.filterSettings.columns;\n\t            if (args.filteredValue !== '') {\n\t                var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n\t                struiObj.value = args.filteredValue;\n\t            }\n\t        };\n\t        StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n\t            var filterValue = actuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        StringFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return StringFilterUI;\n\t    }());\n\t    exports.StringFilterUI = StringFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_base_1, ej2_base_2, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FlMenuOptrUI = (function () {\n\t        function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t            this.customFilterOperators = customFltrOperators;\n\t        }\n\t        FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n\t            this.dialogObj = dlgObj;\n\t            var optr = column.type + 'Operator';\n\t            this.optrData = this.customOptr = (!ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators) &&\n\t                !ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n\t                this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n\t            var dropDatasource = this.customOptr;\n\t            var selectedValue = this.dropSelectedVal(column, optr);\n\t            var optrDiv = ej2_base_2.createElement('div', { className: 'e-flm_optrdiv' });\n\t            dlgConetntEle.appendChild(optrDiv);\n\t            var optrInput = ej2_base_2.createElement('input', { id: column.uid + '-floptr' });\n\t            optrDiv.appendChild(optrInput);\n\t            this.dropOptr = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: dropDatasource,\n\t                fields: { text: 'text', value: 'value' },\n\t                open: this.dropDownOpen.bind(this),\n\t                text: selectedValue\n\t            });\n\t            this.dropOptr.appendTo('#' + column.uid + '-floptr');\n\t        };\n\t        FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n\t            args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n\t            var selValue = '';\n\t            var columns = this.parent.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    var selectedField = new ej2_data_1.DataManager(this.optrData).executeLocal(new ej2_data_1.Query().where('value', 'equal', column.operator));\n\t                    selValue = !ej2_base_1.isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n\t                }\n\t            }\n\t            if (selValue === '') {\n\t                selValue = this.optrData[0].text;\n\t            }\n\t            return selValue;\n\t        };\n\t        FlMenuOptrUI.prototype.getFlOperator = function () {\n\t            return this.dropOptr.value;\n\t        };\n\t        return FlMenuOptrUI;\n\t    }());\n\t    exports.FlMenuOptrUI = FlMenuOptrUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(24), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_inputs_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumberFilterUI = (function () {\n\t        function NumberFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.filterSettings = filterSettings;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t        }\n\t        NumberFilterUI.prototype.create = function (args) {\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.numericTxtObj = new ej2_inputs_1.NumericTextBox({\n\t                format: args.column.format,\n\t                locale: this.parent.locale,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                enableRtl: this.parent.enableRtl,\n\t            });\n\t            this.numericTxtObj.appendTo(this.instance);\n\t        };\n\t        NumberFilterUI.prototype.write = function (args) {\n\t            var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n\t            numberuiObj.value = args.filteredValue;\n\t        };\n\t        NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n\t            var filterValue = numberuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        return NumberFilterUI;\n\t    }());\n\t    exports.NumberFilterUI = NumberFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(8), __webpack_require__(61), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, ej2_data_1, ej2_dropdowns_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanFilterUI = (function () {\n\t        function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        BooleanFilterUI.prototype.create = function (args) {\n\t            var data;\n\t            this.elem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n\t            args.target.appendChild(this.elem);\n\t            this.dialogObj = args.dialogObj;\n\t            this.dropInstance = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field),\n\t                fields: { text: args.column.field, value: args.column.field },\n\t                placeholder: args.localizeText.getConstant('SelectValue'),\n\t                cssClass: 'e-popup-flmenu',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t                actionComplete: this.ddActionComplete\n\t            });\n\t            this.dropInstance.appendTo(this.elem);\n\t        };\n\t        BooleanFilterUI.prototype.write = function (args) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n\t            drpuiObj.text = !ej2_base_1.isNullOrUndefined(args.filteredValue) ? args.filteredValue : '';\n\t        };\n\t        BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n\t            var filterValue = drpuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        BooleanFilterUI.prototype.ddActionComplete = function (e) {\n\t            e.result = util_1.distinctStringValues(e.result);\n\t        };\n\t        BooleanFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return BooleanFilterUI;\n\t    }());\n\t    exports.BooleanFilterUI = BooleanFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(71), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_calendars_1, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DateFilterUI = (function () {\n\t        function DateFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.locator = serviceLocator;\n\t            this.fltrSettings = filterSettings;\n\t        }\n\t        DateFilterUI.prototype.create = function (args) {\n\t            var intl = new ej2_base_2.Internationalization();\n\t            var colFormat = args.column.format;\n\t            var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n\t            this.dialogObj = args.dialogObj;\n\t            this.inputElem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n\t            args.target.appendChild(this.inputElem);\n\t            this.datePickerObj = new ej2_calendars_1.DatePicker({\n\t                format: format,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('ChooseDate'),\n\t                width: '100%',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t            });\n\t            this.datePickerObj.appendTo(this.inputElem);\n\t        };\n\t        DateFilterUI.prototype.write = function (args) {\n\t            var columns = this.fltrSettings.columns;\n\t            var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n\t            dateuiObj.value = args.filteredValue;\n\t        };\n\t        DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n\t            var filterValue = dateuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        DateFilterUI.prototype.openPopup = function (args) {\n\t            args.popupElement.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        return DateFilterUI;\n\t    }());\n\t    exports.DateFilterUI = DateFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_71__;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(73), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_navigations_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelFilter = (function (_super) {\n\t        __extends(ExcelFilter, _super);\n\t        function ExcelFilter(parent, filterSettings, serviceLocator) {\n\t            var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n\t            _this.localeConstants = {\n\t                ClearFilter: 'Clear Filter',\n\t                NumberFilter: 'Number Filters',\n\t                TextFilter: 'Text Filters',\n\t                DateFilter: 'Date Filters',\n\t                MatchCase: 'Match Case',\n\t                Equal: 'Equal',\n\t                NotEqual: 'Not Equal',\n\t                LessThan: 'Less Than',\n\t                LessThanOrEqual: 'Less Than Or Equal',\n\t                GreaterThan: 'Greater Than',\n\t                GreaterThanOrEqual: 'Greater Than Or Equal',\n\t                Between: 'Between',\n\t                CustomFilter: 'Custom Filter',\n\t                StartsWith: 'Starts With',\n\t                EndsWith: 'Ends With',\n\t                Contains: 'Contains',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel'\n\t            };\n\t            ej2_base_1.extend(_this.defaultConstants, _this.localeConstants);\n\t            _this.isExcel = true;\n\t            _this.initLocale(_this.defaultConstants);\n\t            return _this;\n\t        }\n\t        ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n\t            var options = {\n\t                number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n\t                    'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n\t                string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n\t            };\n\t            options.date = options.number;\n\t            options.datetime = options.number;\n\t            var model = [];\n\t            for (var i = 0; i < options[type].length; i++) {\n\t                if (options[type][i].length) {\n\t                    if (operator) {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...',\n\t                            iconCss: 'e-icons e-icon-check ' + (operator === options[type][i] ? '' : 'e-emptyicon')\n\t                        });\n\t                    }\n\t                    else {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...'\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    model.push({ separator: true });\n\t                }\n\t            }\n\t            return model;\n\t        };\n\t        ExcelFilter.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            ej2_base_1.remove(this.cmenu);\n\t        };\n\t        ExcelFilter.prototype.createMenu = function (type, isFiltered) {\n\t            var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n\t            this.menu = ej2_base_1.createElement('div', { className: 'e-contextmenu-wrapper' });\n\t            var ul = ej2_base_1.createElement('ul');\n\t            var icon = isFiltered ? 'e-icon-filter e-filtered' : 'e-icon-filter';\n\t            ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n\t            if (type !== 'boolean') {\n\t                ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isFiltered ? 'e-icon-check' : icon + ' e-emptyicon', true));\n\t            }\n\t            this.menu.appendChild(ul);\n\t        };\n\t        ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n\t            var li = ej2_base_1.createElement('li', { className: className + ' e-menu-item' });\n\t            li.innerHTML = val;\n\t            li.insertBefore(ej2_base_1.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n\t            if (isSubMenu) {\n\t                li.appendChild(ej2_base_1.createElement('span', { className: 'e-icons e-caret' }));\n\t            }\n\t            return li;\n\t        };\n\t        ExcelFilter.prototype.wireExEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n\t        };\n\t        ExcelFilter.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n\t        };\n\t        ExcelFilter.prototype.clickExHandler = function (e) {\n\t            var menuItem = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText) {\n\t            }\n\t        };\n\t        ExcelFilter.prototype.destroyCMenu = function () {\n\t            if (this.menuObj && !this.menuObj.isDestroyed) {\n\t                this.menuObj.destroy();\n\t            }\n\t        };\n\t        ExcelFilter.prototype.hoverHandler = function (e) {\n\t            var target = e.target.querySelector('.e-contextmenu');\n\t            var li = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            var focused = this.menu.querySelector('.e-focused');\n\t            var isSubMenu;\n\t            if (focused) {\n\t                focused.classList.remove('e-focused');\n\t            }\n\t            if (li) {\n\t                li.classList.add('e-focused');\n\t                isSubMenu = li.classList.contains('e-submenu');\n\t            }\n\t            if (target) {\n\t                return;\n\t            }\n\t            if (!isSubMenu) {\n\t                var submenu = this.menu.querySelector('.e-submenu');\n\t                submenu.classList.remove('e-selected');\n\t                this.isCMenuOpen = false;\n\t                this.destroyCMenu();\n\t            }\n\t            if (!this.isCMenuOpen && isSubMenu) {\n\t                li.classList.add('e-selected');\n\t                this.isCMenuOpen = true;\n\t                var menuOptions = {\n\t                    items: this.getCMenuDS(this.options.type),\n\t                    select: this.selectHandler.bind(this),\n\t                    onClose: this.destroyCMenu.bind(this),\n\t                };\n\t                this.parent.element.appendChild(this.cmenu);\n\t                this.menuObj = new ej2_navigations_1.ContextMenu(menuOptions, this.cmenu);\n\t                var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n\t                this.menuObj.open(client.top, this.dlg.getBoundingClientRect().right + 1);\n\t            }\n\t        };\n\t        ExcelFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t            this.dialogObj.height = '345px';\n\t            this.dialogObj.dataBind();\n\t            this.createMenu(options.type, false);\n\t            this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n\t            this.dlg.classList.add('e-excelfilter');\n\t            this.cmenu = ej2_base_1.createElement('ul', { className: 'e-excel-menu' });\n\t            this.wireExEvents();\n\t        };\n\t        ExcelFilter.prototype.closeDialog = function () {\n\t            _super.prototype.closeDialog.call(this);\n\t            this.unwireEvents();\n\t        };\n\t        ExcelFilter.prototype.selectHandler = function (e) {\n\t        };\n\t        ExcelFilter.prototype.getModuleName = function () {\n\t            return 'excelFilter';\n\t        };\n\t        return ExcelFilter;\n\t    }(checkbox_filter_1.CheckBoxFilter));\n\t    exports.ExcelFilter = ExcelFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_73__;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(39), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            if (this.parent.frozenColumns) {\n\t                this.parent.on(events.freezeRefresh, this.render, this);\n\t            }\n\t            else {\n\t                this.parent.on(events.headerRefreshed, this.render, this);\n\t            }\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (this.parent.allowResizing &&\n\t                !(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return this.parent.frozenColumns ?\n\t                [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + exports.resizeClassList.root))\n\t                : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                if (this.getScrollBarWidth() === 0) {\n\t                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n\t                        var col = _a[_i];\n\t                        this.widthService.setColumnWidth(col);\n\t                    }\n\t                    this.widthService.setWidthToTable();\n\t                }\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper || this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.refreshColumnWidth = function () {\n\t            var columns = this.parent.getColumns();\n\t            for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n\t                var ele = _a[_i];\n\t                for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                    var column = columns_1[_b];\n\t                    if (ele.querySelector('[e-mappinguid]') &&\n\t                        ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n\t                        column.width = ele.getBoundingClientRect().width;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return columns;\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n\t            if (this.parent.frozenColumns) {\n\t                if (rect.parentElement.children.length !== this.parent.frozenColumns) {\n\t                    tr.splice(0, tr.length / 2);\n\t                }\n\t                else {\n\t                    tr.splice(tr.length / 2, tr.length / 2);\n\t                }\n\t            }\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function (height) {\n\t            var ele = this.parent.frozenColumns ? this.parent.getContent().querySelector('.e-movablecontent')\n\t                : this.parent.getContent().firstChild;\n\t            return (ele.scrollHeight > ele.clientHeight && height) ||\n\t                ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'single')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                if (gObj.selectionSettings.mode === 'row' && gObj.selectionSettings.type === 'single') {\n\t                    var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n\t                    gObj.selectRow(index);\n\t                }\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    var row = element.parentElement.querySelector('[class^=\"e-record\"]');\n\t                    if (!row) {\n\t                        break;\n\t                    }\n\t                    this.expandCollapseRows(row);\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    ej2_base_2.addClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.removeClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    ej2_base_2.removeClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    ej2_base_2.removeClass([toExpand[i]], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([toExpand[i]], 'e-recordpluscollapse');\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n\t            if (groupElem) {\n\t                ej2_base_2.remove(groupElem);\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            if (!ej2_base_3.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    childDiv.innerHTML = column.headerTemplate;\n\t                }\n\t                childDiv.firstElementChild.classList.add('e-grouptext');\n\t            }\n\t            else {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-grouptext', innerHTML: column.headerText,\n\t                    attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t                }));\n\t            }\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n\t                            if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                                ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                            }\n\t                            if (!isRemove) {\n\t                                headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                    className: 'e-grptogglebtn e-icons ' +\n\t                                        (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                            : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                                }));\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28), __webpack_require__(17), __webpack_require__(18), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1, row_1, cell_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent, locator) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.focus = locator.getService('focus');\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var uid_1 = tr.getAttribute('data-uid');\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        var row = new row_1.Row({\n\t                            isDataRow: true,\n\t                            cells: [new cell_1.Cell({ cellType: enum_1.CellType.Indent }), new cell_1.Cell({ isDataCell: true, visible: true })]\n\t                        });\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                            row.cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            detailCell.appendChild(gridElem);\n\t                            grid.appendTo(gridElem);\n\t                        }\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        var idx_1;\n\t                        this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                        gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    if (!element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n\t                        break;\n\t                    }\n\t                    this.toogleExpandcollapse(element);\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.items = ['add', 'edit', 'update', 'delete', 'cancel', 'print', 'search',\n\t                'columnchooser', 'pdfexport', 'excelexport', 'csvexport', 'wordexport'];\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            var viewStr = 'viewContainerRef';\n\t            var registerTemp = 'registeredTemplate';\n\t            if (this.parent[viewStr]) {\n\t                this.toolbar[registerTemp] = {};\n\t                this.toolbar[viewStr] = this.parent[viewStr];\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    util_1.appendChildren(this.element, util_1.templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                switch (typeof item) {\n\t                    case 'number':\n\t                        items.push(this.getItemObject(this.items[item]));\n\t                        break;\n\t                    case 'string':\n\t                        items.push(this.getItemObject(item));\n\t                        break;\n\t                    default:\n\t                        items.push(this.getItem(item));\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            return item ? ej2_base_1.extend(item, item, itemObject) : itemObject;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(10), __webpack_require__(81), __webpack_require__(82), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(12), __webpack_require__(13), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator, null, this.parent);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing && args.module === 'resize') {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var tempObj = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(85), __webpack_require__(89), __webpack_require__(90), __webpack_require__(84), __webpack_require__(91), __webpack_require__(92), __webpack_require__(94), __webpack_require__(95), __webpack_require__(6), __webpack_require__(7), __webpack_require__(24), __webpack_require__(96)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_inputs_1, datepicker_edit_cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell, 'numericedit': numeric_edit_cell_1.NumericEditCell,\n\t                'datepickeredit': datepicker_edit_cell_1.DatePickerEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'defaultedit': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            this.parent.notify('start-edit', {});\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t            this.parent.notify('close-edit', {});\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t            this.parent.notify('start-add', {});\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.dataBind();\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-griderror'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                ej2_base_3.remove(elem);\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            util_1.changeButtonType(obj.element);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.actionBeginFunction = this.onActionBegin.bind(this);\n\t            this.actionCompleteFunction = this.actionComplete.bind(this);\n\t            this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n\t            if (actions.indexOf(e.requestType) < 0) {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col && col.field) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    if (col.type !== 'checkbox') {\n\t                        value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    }\n\t                    else {\n\t                        value = inputs[i].checked;\n\t                    }\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && e.requestType !== 'save' && this.formObj && !this.formObj.isDestroyed) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.destroyToolTip();\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.destroyToolTip();\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.destroyForm();\n\t            this.removeEventListener();\n\t            var elem = this.dialogObj.element;\n\t            this.dialogObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            elem = this.alertDObj.element;\n\t            this.alertDObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (!util_1.parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var id = error.getAttribute('for');\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + id + '_Error');\n\t                if (!elem) {\n\t                    this.createTooltip(inputElement, error, id, '');\n\t                }\n\t                else {\n\t                    elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + args.inputName + '_Error');\n\t                if (elem) {\n\t                    if (args.status === 'failure') {\n\t                        elem.style.display = '';\n\t                    }\n\t                    else {\n\t                        elem.style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.createTooltip = function (element, error, name, display) {\n\t            var table = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n\t            var client = table.getBoundingClientRect();\n\t            var inputClient = util_1.parentsUntil(element, 'e-rowcell').getBoundingClientRect();\n\t            var div = ej2_base_3.createElement('div', {\n\t                className: 'e-tooltip-wrap e-popup e-griderror',\n\t                id: name + '_Error',\n\t                styles: 'display:' + display + ';top:' +\n\t                    (inputClient.bottom - client.top + table.scrollTop + 9) + 'px;left:' +\n\t                    (inputClient.left - client.left + table.scrollLeft + inputClient.width / 2) + 'px;'\n\t            });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-tip-content' });\n\t            content.appendChild(error);\n\t            var arrow = ej2_base_3.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n\t            div.appendChild(content);\n\t            div.appendChild(arrow);\n\t            table.appendChild(div);\n\t            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(86), __webpack_require__(87), __webpack_require__(88), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2, enum_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t            this.focus = serviceLocator.getService('focus');\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible || col.commands) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                col.edit.write({\n\t                    rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row\n\t                });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell, args.type);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem, type) {\n\t            var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t            if (!ej2_base_1.isNullOrUndefined(chkBox)) {\n\t                chkBox.nextElementSibling.classList.add('e-focus');\n\t            }\n\t            if (this.parent.editSettings.mode === 'batch') {\n\t                this.focus.onClick({ target: ej2_base_1.closest(elem, 'td') }, true);\n\t            }\n\t            else {\n\t                elem.focus();\n\t            }\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var col = cols[i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                if (col.commands || col.commandsTemplate) {\n\t                    var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t                    var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t                    var cellRenderer = cellRendererFact.getCellRenderer(enum_1.CellType.CommandColumn);\n\t                    var cells = model.generateRows(args.rowData)[0].cells;\n\t                    var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n\t                    var div = td.firstElementChild;\n\t                    div.setAttribute('textAlign', td.getAttribute('textAlign'));\n\t                    elements[col.uid] = div;\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if (col.textAlign === 'right') {\n\t                    input.classList.add('e-ralign');\n\t                }\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true, tdElement));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            var m = 0;\n\t            i = 0;\n\t            while ((isEdit && m < tdElement.length && i < gObj.columns.length) || i < gObj.columns.length) {\n\t                var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n\t                var col = gObj.columns[i];\n\t                if (col.visible) {\n\t                    var td_1 = ej2_base_1.createElement('td', {\n\t                        className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n\t                    });\n\t                    td_1.appendChild(elements[col.uid]);\n\t                    if (col.editType === 'booleanedit') {\n\t                        td_1.classList.add('e-boolcell');\n\t                    }\n\t                    else if (col.commands || col.commandsTemplate) {\n\t                        ej2_base_1.addClass([td_1], 'e-unboundcell');\n\t                    }\n\t                    tr.appendChild(td_1);\n\t                }\n\t                i = span ? i + parseInt(span, 10) : i + 1;\n\t                m++;\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t            util_1.changeButtonType(this.dialogObj.element);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                dataCell.appendChild(elements[cols[i].uid]);\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.activeClasses = ['e-selectionbackground', 'e-active'];\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var classNames = 'e-field e-boolcell';\n\t            if (col.type === 'checkbox') {\n\t                classNames = 'e-field e-boolcell e-edit-checkselect';\n\t            }\n\t            return ej2_base_1.createElement('input', {\n\t                className: classNames, attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            var selectChkBox;\n\t            var chkState;\n\t            if (!ej2_base_1.isNullOrUndefined(args.row)) {\n\t                selectChkBox = args.row.querySelector('.e-edit-checkselect');\n\t            }\n\t            if (args.rowData[args.column.field]) {\n\t                chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(selectChkBox)) {\n\t                this.editType = this.parent.editSettings.mode;\n\t                this.editRow = args.row;\n\t                if (args.requestType !== 'add') {\n\t                    var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n\t                    chkState = row ? row.isSelected : false;\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n\t            }\n\t            this.obj = new ej2_buttons_1.CheckBox(ej2_base_2.extend({\n\t                label: this.parent.editSettings.mode !== 'dialog' ? '' : args.column.headerText,\n\t                checked: chkState,\n\t                disabled: !util_1.isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n\t                change: this.checkBoxChange.bind(this)\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        BooleanEditCell.prototype.checkBoxChange = function (args) {\n\t            if (this.editRow && this.editType !== 'dialog') {\n\t                var add = false;\n\t                if (!args.checked) {\n\t                    this.editRow.removeAttribute('aria-selected');\n\t                }\n\t                else {\n\t                    add = true;\n\t                    this.editRow.setAttribute('aria-selected', add.toString());\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n\t            }\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(61), __webpack_require__(8), __webpack_require__(7), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1, util_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.dropDownOpen = function (args) {\n\t            var dlgElement = util_2.parentsUntil(this.obj.element, 'e-dialog');\n\t            if (!ej2_base_1.isNullOrUndefined(dlgElement)) {\n\t                var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n\t                args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n\t            }\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent') && !util_1.parentsUntil(target, 'e-unboundcelldiv')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            this.parent.isEdit = false;\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                        || !this.parent.element.classList.contains('e-persistselection')) {\n\t                        this.parent.selectRow(0);\n\t                    }\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            if (gObj.editSettings.mode === 'dialog') {\n\t                args.row.classList.add('e-dlgeditrow');\n\t            }\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.showSpinner();\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            gObj.editModule.destroyWidgets();\n\t            gObj.editModule.destroyForm();\n\t            gObj.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t            if (gObj.editSettings.mode === 'dialog' && args.action !== 'add') {\n\t                gObj.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.parent.isEdit = false;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                || !this.parent.element.classList.contains('e-persistselection')) {\n\t                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            }\n\t            this.parent.element.focus();\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            if (!this.parent.isEdit) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            gObj.isEdit = false;\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add'\n\t                });\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(26), __webpack_require__(18), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, util_1, events, row_renderer_1, cell_renderer_1, cell_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.dataBoundFunction = this.dataBound.bind(this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n\t            this.parent.on(events.cellFocused, this.onCellFocused);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = util_1.parentsUntil(e.target, 'e-rowcell');\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(target.getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.onBeforeCellFocused = function (e) {\n\t            if (this.parent.isEdit && this.validateFormObj() &&\n\t                (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n\t                e.cancel = true;\n\t                if (e.byClick) {\n\t                    e.clickArgs.preventDefault();\n\t                }\n\t                else {\n\t                    e.keyArgs.preventDefault();\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.onCellFocused = function (e) {\n\t            var clear = !e.container.isContent || !e.container.isDataCell;\n\t            if (!e.byKey || clear) {\n\t                return;\n\t            }\n\t            var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.keyArgs.action) {\n\t                    case 'tab':\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editCellFromIndex(rowIndex, cellIndex);\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                    case 'shiftEnter':\n\t                        e.keyArgs.preventDefault();\n\t                        if (isEdit) {\n\t                            this.editCell(rowIndex, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(rowIndex, cellIndex);\n\t                        this.focus.focus();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = this.parent.getRowsObject();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.showSpinner();\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.getRowsObject();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.getRowsObject();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.getRowsObject().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n\t            gObj.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t                modelData[0].cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            this.focus.forgetPrevious();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t            gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var cells = [].slice.apply(row.cells);\n\t                var args = {\n\t                    cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                if (!args.cell) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n\t                    cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10)\n\t                };\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.isEdit = true;\n\t                gObj.clearSelection();\n\t                if (!gObj.element.classList.contains('e-checkboxselection') || !gObj.element.classList.contains('e-persistselection')) {\n\t                    gObj.selectRow(this.cellDetails.rowIndex, true);\n\t                }\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.getColIndex = function (cells, index) {\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_1.removeClass([tr], ['e-editedrow', 'e-batchrow']);\n\t            ej2_base_1.removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(71), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_calendars_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DatePickerEditCell = (function () {\n\t        function DatePickerEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DatePickerEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        DatePickerEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DatePickerEditCell.prototype.write = function (args) {\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_calendars_1.DatePicker(ej2_base_1.extend({\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t                value: new Date(args.rowData[args.column.field]), placeholder: isInline ?\n\t                    '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n\t                enabled: util_1.isEditable(args.column, args.type, args.element),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        DatePickerEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DatePickerEditCell;\n\t    }());\n\t    exports.DatePickerEditCell = DatePickerEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(98), __webpack_require__(5), __webpack_require__(21), __webpack_require__(99), __webpack_require__(20), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.isElementIdChanged = false;\n\t            this.parent = parent;\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            if (gObj.element !== null && gObj.element.id === '') {\n\t                gObj.element.id = new Date().toISOString();\n\t                this.isElementIdChanged = true;\n\t            }\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            this.data = new data_1.Data(gObj);\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            gObj.trigger(events.beforeExcelExport);\n\t            return this.processRecords(grid, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = new export_helper_1.ExportHelper(gObj).getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentpage') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t                if (this.isElementIdChanged) {\n\t                    gObj.element.id = '';\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var excelCellArgs = { data: record[r], column: headerRow.columns[c] };\n\t                        gObj.trigger(events.excelQueryCellInfo, ej2_base_1.extend(excelCellArgs, {\n\t                            column: headerRow.columns[c], data: record[r],\n\t                            value: value, style: undefined, colSpan: 1\n\t                        }));\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = excelCellArgs.value;\n\t                        if (excelCellArgs.colSpan > 1) {\n\t                            cell.colSpan = excelCellArgs.colSpan;\n\t                        }\n\t                        if (excelCellArgs.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 12;\n\t            style.borders = { color: '#E0E0E0' };\n\t            if (theme !== undefined && theme.header !== undefined) {\n\t                style = this.updateThemeStyle(theme.header, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n\t            if (themestyle.fontColor !== undefined) {\n\t                style.fontColor = themestyle.fontColor;\n\t            }\n\t            if (themestyle.fontName !== undefined) {\n\t                style.fontName = themestyle.fontName;\n\t            }\n\t            if (themestyle.fontSize !== undefined) {\n\t                style.fontSize = themestyle.fontSize;\n\t            }\n\t            if (themestyle.borders !== undefined) {\n\t                if (themestyle.borders.color !== undefined) {\n\t                    style.borders.color = themestyle.borders.color;\n\t                }\n\t                if (themestyle.borders.lineStyle !== undefined) {\n\t                    style.borders.lineStyle = themestyle.borders.lineStyle;\n\t                }\n\t            }\n\t            if (themestyle.bold !== false) {\n\t                style.bold = themestyle.bold;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 13;\n\t            style.backColor = '#F6F6F6';\n\t            if (theme !== undefined && theme.caption !== undefined) {\n\t                style = this.updateThemeStyle(theme.caption, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            style.fontSize = 13;\n\t            style.borders = { color: '#E0E0E0' };\n\t            if (theme !== undefined && theme.record !== undefined) {\n\t                style = this.updateThemeStyle(theme.record, style);\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: col.width });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_98__;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(14), __webpack_require__(5), __webpack_require__(18), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.valueFormatter.getFormatFunction(format)(args.value);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(99), __webpack_require__(21), __webpack_require__(20), __webpack_require__(5), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_export_1, ej2_pdf_export_2, ej2_pdf_export_3, ej2_pdf_export_4, ej2_pdf_export_5, ej2_pdf_export_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            this.data = new data_1.Data(parent);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            if (pdfExportProperties !== undefined) {\n\t                this.gridTheme = pdfExportProperties.theme;\n\t            }\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_export_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = (new export_helper_1.ExportHelper(this.parent)).getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            if (this.gridTheme !== undefined && this.gridTheme.caption !== undefined && this.gridTheme.caption !== null) {\n\t                var fontSize = this.gridTheme.caption.fontSize !== undefined ? this.gridTheme.caption.fontSize : 9.75;\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.caption.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(pdfColor)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t            else {\n\t                return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_export_1.PdfBorders();\n\t            if (this.gridTheme !== undefined && this.gridTheme.header !== undefined && this.gridTheme.header !== null) {\n\t                if (this.gridTheme.header.borders !== undefined && this.gridTheme.header.borders.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b));\n\t                }\n\t                var fontSize = this.gridTheme.header.fontSize !== undefined ? this.gridTheme.header.fontSize : 10.5;\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.header.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, fontSize), brush: new ej2_pdf_export_3.PdfSolidBrush(pdfColor) };\n\t            }\n\t            else {\n\t                border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(234, 234, 234));\n\t                return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.cells.getCell(groupIndex + 1).style.stringFormat = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left);\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_export_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'landscape') ? ej2_pdf_export_6.PdfPageOrientation.Landscape : ej2_pdf_export_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_export_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_export_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentpage') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pagenumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_export_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_export_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_export_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = (gridColumns[i].width * 0.75);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            if (this.gridTheme !== undefined && this.gridTheme.record !== undefined && this.gridTheme.record !== null) {\n\t                var pdfColor = new ej2_pdf_export_3.PdfColor();\n\t                if (this.gridTheme.record.fontColor !== undefined) {\n\t                    var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n\t                    pdfColor = new ej2_pdf_export_3.PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n\t                }\n\t                row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(pdfColor));\n\t            }\n\t            else {\n\t                row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var data = items;\n\t                    var args = {\n\t                        data: data,\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined,\n\t                        colSpan: 1\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                    if (args.colSpan > 1) {\n\t                        if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n\t                            args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n\t                        }\n\t                        cell.columnSpan = args.colSpan;\n\t                        for (var i = 1; i < cell.columnSpan; i++) {\n\t                            var spanCell = gridRow.cells.getCell(j + startIndex + i);\n\t                            spanCell.value = '';\n\t                        }\n\t                        j += (args.colSpan - 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                var textPenColor = this.hexToRgb(args.style.textPenColor);\n\t                cell.style.textPen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_export_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_export_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_export_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_export_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_export_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_export_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'lowerlatin':\n\t                    return 2;\n\t                case 'lowerroman':\n\t                    return 3;\n\t                case 'upperlatin':\n\t                    return 4;\n\t                case 'upperroman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left, ej2_pdf_export_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_export_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'letter':\n\t                    return new ej2_pdf_export_6.SizeF(612, 792);\n\t                case 'note':\n\t                    return new ej2_pdf_export_6.SizeF(540, 720);\n\t                case 'legal':\n\t                    return new ej2_pdf_export_6.SizeF(612, 1008);\n\t                case 'a0':\n\t                    return new ej2_pdf_export_6.SizeF(2380, 3368);\n\t                case 'a1':\n\t                    return new ej2_pdf_export_6.SizeF(1684, 2380);\n\t                case 'a2':\n\t                    return new ej2_pdf_export_6.SizeF(1190, 1684);\n\t                case 'a3':\n\t                    return new ej2_pdf_export_6.SizeF(842, 1190);\n\t                case 'a5':\n\t                    return new ej2_pdf_export_6.SizeF(421, 595);\n\t                case 'a6':\n\t                    return new ej2_pdf_export_6.SizeF(297, 421);\n\t                case 'a7':\n\t                    return new ej2_pdf_export_6.SizeF(210, 297);\n\t                case 'a8':\n\t                    return new ej2_pdf_export_6.SizeF(148, 210);\n\t                case 'a9':\n\t                    return new ej2_pdf_export_6.SizeF(105, 148);\n\t                case 'b0':\n\t                    return new ej2_pdf_export_6.SizeF(2836, 4008);\n\t                case 'b1':\n\t                    return new ej2_pdf_export_6.SizeF(2004, 2836);\n\t                case 'b2':\n\t                    return new ej2_pdf_export_6.SizeF(1418, 2004);\n\t                case 'b3':\n\t                    return new ej2_pdf_export_6.SizeF(1002, 1418);\n\t                case 'b4':\n\t                    return new ej2_pdf_export_6.SizeF(709, 1002);\n\t                case 'b5':\n\t                    return new ej2_pdf_export_6.SizeF(501, 709);\n\t                case 'archa':\n\t                    return new ej2_pdf_export_6.SizeF(648, 864);\n\t                case 'archb':\n\t                    return new ej2_pdf_export_6.SizeF(864, 1296);\n\t                case 'archc':\n\t                    return new ej2_pdf_export_6.SizeF(1296, 1728);\n\t                case 'archd':\n\t                    return new ej2_pdf_export_6.SizeF(1728, 2592);\n\t                case 'arche':\n\t                    return new ej2_pdf_export_6.SizeF(2592, 3456);\n\t                case 'flsa':\n\t                    return new ej2_pdf_export_6.SizeF(612, 936);\n\t                case 'halfletter':\n\t                    return new ej2_pdf_export_6.SizeF(396, 612);\n\t                case 'letter11x17':\n\t                    return new ej2_pdf_export_6.SizeF(792, 1224);\n\t                case 'ledger':\n\t                    return new ej2_pdf_export_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_export_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'dash':\n\t                    return 1;\n\t                case 'dot':\n\t                    return 2;\n\t                case 'dashdot':\n\t                    return 3;\n\t                case 'dashdotdot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_101__;\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(14), __webpack_require__(103)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, constant_1, enum_1, command_column_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumn = (function () {\n\t        function CommandColumn(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        CommandColumn.prototype.initiateRender = function () {\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            cellFac.addCellRenderer(enum_1.CellType.CommandColumn, new command_column_renderer_1.CommandColumnRenderer(this.parent, this.locator));\n\t        };\n\t        CommandColumn.prototype.commandClickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var gID = this.parent.element.id;\n\t            var target = ej2_base_1.closest(e.target, 'button');\n\t            if (!target || !gObj.editModule) {\n\t                return;\n\t            }\n\t            switch (target.id.split('_')[0]) {\n\t                case gID + 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.startEdit(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t                case gID + 'cancel':\n\t                    gObj.editModule.closeEdit();\n\t                    break;\n\t                case gID + 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case gID + 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.deleteRow(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t            }\n\t        };\n\t        CommandColumn.prototype.getModuleName = function () {\n\t            return 'commandColumn';\n\t        };\n\t        CommandColumn.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.removeEventListener();\n\t        };\n\t        CommandColumn.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.click, this.commandClickHandler);\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.keyPressed, this.keyPressHandler);\n\t        };\n\t        CommandColumn.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.click, this.commandClickHandler, this);\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.keyPressed, this.keyPressHandler, this);\n\t        };\n\t        CommandColumn.prototype.keyPressHandler = function (e) {\n\t            if (e.action === 'enter' && ej2_base_1.closest(e.target, 'button')) {\n\t                this.commandClickHandler(e);\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        return CommandColumn;\n\t    }());\n\t    exports.CommandColumn = CommandColumn;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumnRenderer = (function (_super) {\n\t        __extends(CommandColumnRenderer, _super);\n\t        function CommandColumnRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.buttonElement = ej2_base_1.createElement('button', {});\n\t            _this.unbounDiv = ej2_base_1.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-rowcell e-unboundcell', attrs: {\n\t                    role: 'gridcell', tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(this.unbounDiv.cloneNode());\n\t            node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n\t            if (cell.column.commandsTemplate) {\n\t                util_1.appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n\t            }\n\t            else {\n\t                for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n\t                    var command = _a[_i];\n\t                    node = this.renderButton(node, command, attributes.index);\n\t                }\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (this.parent.isEdit) {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t            }\n\t            else {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t            }\n\t            return node;\n\t        };\n\t        CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n\t            var button = this.buttonElement.cloneNode();\n\t            ej2_base_1.attributes(button, { 'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button' });\n\t            button.onclick = buttonOption.buttonOption.click;\n\t            node.firstElementChild.appendChild(new ej2_buttons_1.Button(buttonOption.buttonOption, button).element);\n\t            switch (buttonOption.type) {\n\t                case 'edit':\n\t                case 'delete':\n\t                    ej2_base_1.addClass([button], ['e-edit-delete', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t                case 'cancel':\n\t                case 'save':\n\t                    ej2_base_1.addClass([button], ['e-save-cancel', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t            }\n\t            return node;\n\t        };\n\t        return CommandColumnRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.CommandColumnRenderer = CommandColumnRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(74), __webpack_require__(56), __webpack_require__(77), __webpack_require__(55), __webpack_require__(100), __webpack_require__(97)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, resize_1, page_1, group_1, sort_1, pdf_export_1, excel_export_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.menuClass = {\n\t        header: '.e-gridheader',\n\t        content: '.e-gridcontent',\n\t        edit: '.e-inline-edit',\n\t        editIcon: 'e-edit',\n\t        pager: '.e-gridpager',\n\t        delete: 'e-delete',\n\t        save: 'e-save',\n\t        cancel: 'e-cancel',\n\t        copy: 'e-copy',\n\t        pdf: 'e-pdfexport',\n\t        group: 'e-icon-group',\n\t        ungroup: 'e-icon-ungroup',\n\t        csv: 'e-csvexport',\n\t        excel: 'e-excelexport',\n\t        fPage: 'e-icon-first',\n\t        nPage: 'e-icon-next',\n\t        lPage: 'e-icon-last',\n\t        pPage: 'e-icon-prev',\n\t        ascending: 'e-icon-ascending',\n\t        descending: 'e-icon-descending',\n\t        groupHeader: 'e-groupdroparea',\n\t        touchPop: 'e-gridpopup'\n\t    };\n\t    var ContextMenu = (function () {\n\t        function ContextMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.disableItems = [];\n\t            this.hiddenItems = [];\n\t            this.localeText = this.setLocaleKey();\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ContextMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.render, this);\n\t        };\n\t        ContextMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.render);\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_cmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            var target = '#' + this.gridID;\n\t            this.contextMenu = new ej2_navigations_1.ContextMenu({\n\t                items: this.getMenuItems(),\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                target: target,\n\t                select: this.contextMenuItemClick.bind(this),\n\t                beforeOpen: this.contextMenuBeforeOpen.bind(this),\n\t                onOpen: this.contextMenuOpen.bind(this),\n\t                onClose: this.contextMenuOnClose.bind(this),\n\t                cssClass: 'e-grid-menu'\n\t            });\n\t            this.contextMenu.appendTo(this.element);\n\t        };\n\t        ContextMenu.prototype.getMenuItems = function () {\n\t            var menuItems = [];\n\t            var exportItems = [];\n\t            for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n\t                    if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n\t                        exportItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                    else {\n\t                        menuItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                }\n\t                else if (typeof item !== 'string') {\n\t                    menuItems.push(item);\n\t                }\n\t            }\n\t            if (exportItems.length > 0) {\n\t                var exportGroup = this.buildDefaultItems('export');\n\t                exportGroup.items = exportItems;\n\t                menuItems.push(exportGroup);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.getLastPage = function () {\n\t            var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n\t            if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n\t                totalpage += 1;\n\t            }\n\t            return totalpage;\n\t        };\n\t        ContextMenu.prototype.contextMenuOpen = function () {\n\t            this.isOpen = true;\n\t        };\n\t        ContextMenu.prototype.contextMenuItemClick = function (args) {\n\t            var item = this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.startEdit();\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.deleteRow(this.parent.getRowByIndex(this.parent.selectedRowIndex));\n\t                    break;\n\t                case 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case 'cancel':\n\t                    this.parent.editModule.closeEdit();\n\t                    break;\n\t                case 'copy':\n\t                    this.parent.copy();\n\t                    break;\n\t                case 'pdfExport':\n\t                    this.parent.pdfExport();\n\t                    break;\n\t                case 'excelExport':\n\t                    this.parent.excelExport();\n\t                    break;\n\t                case 'csvExport':\n\t                    this.parent.csvExport();\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'firstPage':\n\t                    this.parent.goToPage(1);\n\t                    break;\n\t                case 'prevPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n\t                    break;\n\t                case 'lastPage':\n\t                    this.parent.goToPage(this.getLastPage());\n\t                    break;\n\t                case 'nextPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.contextMenuClick, args);\n\t        };\n\t        ContextMenu.prototype.contextMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.updateItemStatus();\n\t            }\n\t        };\n\t        ContextMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ContextMenu.prototype.updateItemStatus = function () {\n\t            this.contextMenu.showItems(this.hiddenItems);\n\t            this.contextMenu.enableItems(this.disableItems);\n\t            this.hiddenItems = [];\n\t            this.disableItems = [];\n\t            this.isOpen = false;\n\t        };\n\t        ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n\t            this.targetColumn = this.getColumn(args.event);\n\t            if (args.event && (ej2_base_1.closest(args.event.target, '.' + exports.menuClass.groupHeader)\n\t                || ej2_base_1.closest(args.event.target, '.' + exports.menuClass.touchPop))) {\n\t                args.cancel = true;\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key)) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                    if (args.event && ej2_base_1.closest(args.event.target, exports.menuClass.edit)) {\n\t                        if (key !== 'save' && key !== 'cancel') {\n\t                            this.hiddenItems.push(item.text);\n\t                        }\n\t                    }\n\t                    else if (ej2_base_1.isNullOrUndefined(args.parentItem) && args.event\n\t                        && !ej2_base_1.closest(args.event.target, dItem.target)) {\n\t                        this.hiddenItems.push(item.text);\n\t                    }\n\t                }\n\t                else if (item.target && args.event &&\n\t                    !ej2_base_1.closest(args.event.target, item.target)) {\n\t                    this.hiddenItems.push(item.text);\n\t                }\n\t            }\n\t            this.contextMenu.enableItems(this.disableItems, false);\n\t            this.contextMenu.hideItems(this.hiddenItems);\n\t            this.eventArgs = args.event;\n\t            this.parent.trigger(events.contextMenuOpen, args);\n\t            if (this.hiddenItems.length === args.items.length) {\n\t                this.updateItemStatus();\n\t                args.cancel = true;\n\t            }\n\t        };\n\t        ContextMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(group_1.Group)\n\t                        || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                            && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'edit':\n\t                case 'delete':\n\t                case 'save':\n\t                case 'cancel':\n\t                    if (!this.parent.editModule) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'copy':\n\t                    if (this.parent.getSelectedRowIndexes().length === 0) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'export':\n\t                    if ((!this.parent.allowExcelExport && !this.parent.excelExport) ||\n\t                        !this.parent.ensureModuleInjected(pdf_export_1.PdfExport) && !this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'pdfExport':\n\t                    if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(pdf_export_1.PdfExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'excelExport':\n\t                case 'csvExport':\n\t                    if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortAscending':\n\t                case 'sortDescending':\n\t                    if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    else if (this.parent.ensureModuleInjected(sort_1.Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (element) {\n\t                            if (element.field === _this.targetColumn.field\n\t                                && element.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    break;\n\t                case 'firstPage':\n\t                case 'prevPage':\n\t                    if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === 1)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'lastPage':\n\t                case 'nextPage':\n\t                    if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t            }\n\t            return status;\n\t        };\n\t        ContextMenu.prototype.getContextMenu = function () {\n\t            return this.element;\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            this.contextMenu.destroy();\n\t            ej2_base_2.remove(this.element);\n\t            this.removeEventListener();\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextMenu';\n\t        };\n\t        ContextMenu.prototype.generateID = function (item) {\n\t            return this.gridID + '_cmenu_' + item;\n\t        };\n\t        ContextMenu.prototype.getKeyFromId = function (id) {\n\t            return id.replace(this.gridID + '_cmenu_', '');\n\t        };\n\t        ContextMenu.prototype.buildDefaultItems = function (item) {\n\t            var menuItem;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    menuItem = { target: exports.menuClass.header };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.group };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ungroup };\n\t                    break;\n\t                case 'edit':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.editIcon };\n\t                    break;\n\t                case 'delete':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.delete };\n\t                    break;\n\t                case 'save':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.save };\n\t                    break;\n\t                case 'cancel':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.cancel };\n\t                    break;\n\t                case 'copy':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.copy };\n\t                    break;\n\t                case 'export':\n\t                    menuItem = { target: exports.menuClass.content };\n\t                    break;\n\t                case 'pdfExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.pdf };\n\t                    break;\n\t                case 'excelExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.excel };\n\t                    break;\n\t                case 'csvExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.csv };\n\t                    break;\n\t                case 'sortAscending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ascending };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.descending };\n\t                    break;\n\t                case 'firstPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.fPage };\n\t                    break;\n\t                case 'prevPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.pPage };\n\t                    break;\n\t                case 'lastPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.lPage };\n\t                    break;\n\t                case 'nextPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.nPage };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ContextMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit',\n\t                'group', 'ungroup', 'edit', 'delete', 'save', 'cancel', 'copy', 'export',\n\t                'pdfExport', 'excelExport', 'csvExport', 'sortAscending', 'sortDescending',\n\t                'firstPage', 'prevPage', 'lastPage', 'nextPage'];\n\t        };\n\t        ContextMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'copy': 'Copy',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'edit': 'EditRecord',\n\t                'delete': 'DeleteRecord',\n\t                'save': 'Save',\n\t                'cancel': 'CancelButton',\n\t                'pdfExport': 'Pdfexport',\n\t                'excelExport': 'Excelexport',\n\t                'csvExport': 'Csvexport',\n\t                'export': 'Export',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'firstPage': 'FirstPage',\n\t                'lastPage': 'LastPage',\n\t                'prevPage': 'PreviousPage',\n\t                'nextPage': 'NextPage'\n\t            };\n\t        };\n\t        ContextMenu.prototype.getColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, 'th.e-headercell');\n\t            if (cell) {\n\t                var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.selectRow = function (e) {\n\t            var row = ej2_base_1.closest(e.target, 'tr.e-row');\n\t            if (row) {\n\t                this.parent.selectRow(this.parent.getDataRows().indexOf(row));\n\t            }\n\t        };\n\t        return ContextMenu;\n\t    }());\n\t    exports.ContextMenu = ContextMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(14), __webpack_require__(106)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, enum_1, freeze_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Freeze = (function () {\n\t        function Freeze(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Freeze.prototype.getModuleName = function () {\n\t            return 'freeze';\n\t        };\n\t        Freeze.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t        };\n\t        Freeze.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new freeze_renderer_1.FreezeRender(this.parent, this.locator));\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t            if (this.parent.frozenRows && !this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t        };\n\t        Freeze.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.instantiateRenderer);\n\t        };\n\t        Freeze.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return Freeze;\n\t    }());\n\t    exports.Freeze = Freeze;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(25), __webpack_require__(12), __webpack_require__(107), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, header_renderer_1, content_renderer_1, freeze_row_model_generator_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeContentRender = (function (_super) {\n\t        __extends(FreezeContentRender, _super);\n\t        function FreezeContentRender(parent, locator) {\n\t            return _super.call(this, parent, locator) || this;\n\t        }\n\t        FreezeContentRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                var fDiv = ej2_base_1.createElement('div', { className: 'e-frozencontent' });\n\t                var mDiv = ej2_base_1.createElement('div', { className: 'e-movablecontent' });\n\t                this.getPanel().firstChild.appendChild(fDiv);\n\t                this.getPanel().firstChild.appendChild(mDiv);\n\t                this.setFrozenContent(fDiv);\n\t                this.setMovableContent(mDiv);\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.renderEmpty = function (tbody) {\n\t            _super.prototype.renderEmpty.call(this, tbody);\n\t            if (this.parent.frozenColumns) {\n\t                this.getMovableContent().querySelector('tbody').innerHTML = '';\n\t                this.getMovableContent().style.overflow = 'hidden';\n\t                if (this.parent.frozenRows) {\n\t                    this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n\t                    this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n\t                }\n\t            }\n\t            else if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.setFrozenContent = function (ele) {\n\t            this.frozenContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.setMovableContent = function (ele) {\n\t            this.movableContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.getFrozenContent = function () {\n\t            return this.frozenContent;\n\t        };\n\t        FreezeContentRender.prototype.getMovableContent = function () {\n\t            return this.movableContent;\n\t        };\n\t        FreezeContentRender.prototype.getModelGenerator = function () {\n\t            return new freeze_row_model_generator_1.FreezeRowModelGenerator(this.parent);\n\t        };\n\t        FreezeContentRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                this.getFrozenContent().appendChild(this.getTable());\n\t                var mTbl = this.getTable().cloneNode(true);\n\t                this.getMovableContent().appendChild(mTbl);\n\t            }\n\t            if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().firstChild.classList.add('e-frozenhdrcont');\n\t                this.parent.getHeaderTable().querySelector('tbody').classList.remove('e-hide');\n\t            }\n\t        };\n\t        return FreezeContentRender;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FreezeContentRender = FreezeContentRender;\n\t    var FreezeRender = (function (_super) {\n\t        __extends(FreezeRender, _super);\n\t        function FreezeRender(parent, locator) {\n\t            return _super.call(this, parent, locator) || this;\n\t        }\n\t        FreezeRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            this.rfshMovable();\n\t        };\n\t        FreezeRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            var fDiv = ej2_base_1.createElement('div', { className: 'e-frozenheader' });\n\t            var mDiv = ej2_base_1.createElement('div', { className: 'e-movableheader' });\n\t            this.getPanel().firstChild.appendChild(fDiv);\n\t            this.getPanel().firstChild.appendChild(mDiv);\n\t            this.setFrozenHeader(fDiv);\n\t            this.setMovableHeader(mDiv);\n\t        };\n\t        FreezeRender.prototype.refreshUI = function () {\n\t            this.getMovableHeader().innerHTML = '';\n\t            _super.prototype.refreshUI.call(this);\n\t            this.rfshMovable();\n\t            var mTable = this.getMovableHeader().querySelector('table');\n\t            ej2_base_1.remove(this.getMovableHeader().querySelector('colgroup'));\n\t            mTable.insertBefore(this.renderMovable(this.getFrozenHeader().querySelector('colgroup')), mTable.querySelector('thead'));\n\t        };\n\t        FreezeRender.prototype.rfshMovable = function () {\n\t            var filterRow;\n\t            this.getFrozenHeader().appendChild(this.getTable());\n\t            this.getMovableHeader().appendChild(this.createTable());\n\t            if (this.parent.frozenRows) {\n\t                this.getFrozenHeader().querySelector('tbody').classList.remove('e-hide');\n\t                this.getMovableHeader().querySelector('tbody').classList.remove('e-hide');\n\t            }\n\t            filterRow = this.getTable().querySelector('.e-filterbar');\n\t            if (this.parent.allowFiltering && filterRow) {\n\t                this.getMovableHeader().querySelector('thead')\n\t                    .appendChild(this.renderMovable(filterRow));\n\t            }\n\t            this.parent.notify(events.freezeRefresh, {});\n\t        };\n\t        FreezeRender.prototype.setFrozenHeader = function (ele) {\n\t            this.frozenHeader = ele;\n\t        };\n\t        FreezeRender.prototype.setMovableHeader = function (ele) {\n\t            this.movableHeader = ele;\n\t        };\n\t        FreezeRender.prototype.getFrozenHeader = function () {\n\t            return this.frozenHeader;\n\t        };\n\t        FreezeRender.prototype.getMovableHeader = function () {\n\t            return this.movableHeader;\n\t        };\n\t        FreezeRender.prototype.renderMovable = function (ele) {\n\t            var mEle = ele.cloneNode(true);\n\t            for (var i = 0; i < this.parent.frozenColumns; i++) {\n\t                mEle.removeChild(mEle.children[0]);\n\t            }\n\t            for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n\t                ele.removeChild(ele.children[ele.childElementCount - 1]);\n\t            }\n\t            return mEle;\n\t        };\n\t        return FreezeRender;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.FreezeRender = FreezeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeRowModelGenerator = (function () {\n\t        function FreezeRowModelGenerator(parent) {\n\t            this.isFrzLoad = 1;\n\t            this.parent = parent;\n\t            this.rowModelGenerator = new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n\t            if (this.parent.frozenColumns) {\n\t                for (var i = 0, len = row.length; i < len; i++) {\n\t                    if (this.isFrzLoad % 2 === 0) {\n\t                        row[i].cells = row[i].cells.slice(this.parent.frozenColumns, row[i].cells.length);\n\t                    }\n\t                    else {\n\t                        row[i].cells = row[i].cells.slice(0, this.parent.frozenColumns);\n\t                    }\n\t                }\n\t            }\n\t            this.isFrzLoad++;\n\t            return row;\n\t        };\n\t        return FreezeRowModelGenerator;\n\t    }());\n\t    exports.FreezeRowModelGenerator = FreezeRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(7), __webpack_require__(10), __webpack_require__(6), __webpack_require__(23), __webpack_require__(77), __webpack_require__(55), __webpack_require__(63), __webpack_require__(74)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, util_1, events, ej2_popups_1, ej2_buttons_1, group_1, sort_1, filter_1, resize_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnMenu = (function () {\n\t        function ColumnMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.localeText = this.setLocaleKey();\n\t            this.disableItems = [];\n\t            this.hiddenItems = [];\n\t            this.isOpen = false;\n\t            this.GROUP = 'e-icon-group';\n\t            this.UNGROUP = 'e-icon-ungroup';\n\t            this.ASCENDING = 'e-icon-ascending';\n\t            this.DESCENDING = 'e-icon-descending';\n\t            this.ROOT = 'e-columnmenu';\n\t            this.FILTER = 'e-icon-filter';\n\t            this.POP = 'e-filter-popup';\n\t            this.WRAP = 'e-col-menu';\n\t            this.CHOOSER = '_chooser_';\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnMenu.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.destroy = function () {\n\t            this.columnMenu.destroy();\n\t            this.removeEventListener();\n\t            this.unwireFilterEvents();\n\t            this.unwireEvents();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n\t            if (e.target.classList.contains('e-columnmenu')) {\n\t                if (!this.isOpen) {\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else if (this.isOpen && this.headerCell !== this.getHeaderCell(e)) {\n\t                    this.columnMenu.close();\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else {\n\t                    this.columnMenu.close();\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.openColumnMenu = function (e) {\n\t            var pos = { top: 0, left: 0 };\n\t            this.element.style.cssText = 'display:block;visibility:hidden';\n\t            var elePos = this.element.getBoundingClientRect();\n\t            this.element.style.cssText = 'display:none;visibility:visible';\n\t            this.headerCell = this.getHeaderCell(e);\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n\t                pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n\t            }\n\t            else {\n\t                if (this.parent.enableRtl) {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'left', 'bottom');\n\t                }\n\t                else {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'right', 'bottom');\n\t                    pos.left -= elePos.width;\n\t                }\n\t            }\n\t            this.columnMenu.open(pos.top, pos.left);\n\t            e.preventDefault();\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n\t            this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenuHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n\t        };\n\t        ColumnMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.wireEvents, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            if (this.isFilterItemAdded()) {\n\t                this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n\t            }\n\t            this.parent.on(events.click, this.columnMenuHandlerClick, this);\n\t        };\n\t        ColumnMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.unwireEvents);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            if (this.isFilterItemAdded()) {\n\t                this.parent.off(events.filterDialogCreated, this.filterPosition);\n\t            }\n\t            this.parent.off(events.click, this.columnMenuHandlerClick);\n\t        };\n\t        ColumnMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            this.columnMenu = new ej2_navigations_1.ContextMenu({\n\t                cssClass: 'e-grid-menu',\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                items: this.getItems(),\n\t                select: this.columnMenuItemClick.bind(this),\n\t                beforeOpen: this.columnMenuBeforeOpen.bind(this),\n\t                onClose: this.columnMenuOnClose.bind(this),\n\t                beforeItemRender: this.beforeMenuItemRender.bind(this),\n\t                beforeClose: this.columnMenuBeforeClose.bind(this)\n\t            });\n\t            this.columnMenu.appendTo(this.element);\n\t            this.wireFilterEvents();\n\t        };\n\t        ColumnMenu.prototype.wireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice && this.isFilterItemAdded()) {\n\t                ej2_base_1.EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.unwireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice && this.isFilterItemAdded()) {\n\t                ej2_base_1.EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n\t            if (this.isChooserItem(args.item)) {\n\t                var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                var column = this.parent.getColumnByField(field);\n\t                var check = ej2_buttons_1.createCheckBox(false, {\n\t                    label: args.item.text,\n\t                    checked: column.visible\n\t                });\n\t                if (this.parent.enableRtl) {\n\t                    check.classList.add('e-rtl');\n\t                }\n\t                args.element.innerHTML = '';\n\t                args.element.appendChild(check);\n\t            }\n\t            else if (args.item.id && this.getKeyFromId(args.item.id) === 'filter') {\n\t                args.element.appendChild(ej2_base_2.createElement('span', { className: 'e-icons e-caret' }));\n\t                args.element.className += 'e-filter-item e-menu-caret-icon';\n\t            }\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.parentItem) &&\n\t                this.getKeyFromId(args.parentItem.id) === 'columnChooser' &&\n\t                ej2_base_1.closest(args.event.target, '.e-menu-parent')) {\n\t                args.cancel = true;\n\t            }\n\t            else if (args.event && (ej2_base_1.closest(args.event.target, '.' + this.POP)\n\t                || (util_1.parentsUntil(args.event.target, 'e-popup')))) {\n\t                args.cancel = true;\n\t            }\n\t        };\n\t        ColumnMenu.prototype.isChooserItem = function (item) {\n\t            return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n\t                this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n\t            args.column = this.targetColumn = this.getColumn();\n\t            this.parent.trigger(events.columnMenuOpen, args);\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key) && !dItem.hide) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                    else if (item.hide) {\n\t                        this.hiddenItems.push(item.text);\n\t                    }\n\t                }\n\t            }\n\t            this.columnMenu.enableItems(this.disableItems, false);\n\t            this.columnMenu.hideItems(this.hiddenItems);\n\t        };\n\t        ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.ensureModuleInjected(group_1.Group) || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortDescending':\n\t                case 'sortAscending':\n\t                    if (this.parent.allowSorting && this.parent.ensureModuleInjected(sort_1.Sort)\n\t                        && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (ele) {\n\t                            if (ele.field === _this.targetColumn.field\n\t                                && ele.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'filter':\n\t                    status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar')\n\t                        && this.parent.ensureModuleInjected(filter_1.Filter));\n\t            }\n\t            return status;\n\t        };\n\t        ColumnMenu.prototype.columnMenuItemClick = function (args) {\n\t            var item = this.isChooserItem(args.item) ? 'columnChooser' : this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'columnChooser':\n\t                    var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                    var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\t                    if (checkbox && checkbox.classList.contains('e-check')) {\n\t                        checkbox.classList.remove('e-check');\n\t                        this.parent.hideColumn(key, 'field');\n\t                    }\n\t                    else if (checkbox) {\n\t                        this.parent.showColumn(key, 'field');\n\t                        checkbox.classList.add('e-check');\n\t                    }\n\t                    break;\n\t                case 'filter':\n\t                    this.getFilter(args.element, args.item.id);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.columnMenuClick, args);\n\t        };\n\t        ColumnMenu.prototype.columnMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.columnMenu.enableItems(this.disableItems);\n\t                this.disableItems = [];\n\t                this.columnMenu.showItems(this.hiddenItems);\n\t                this.hiddenItems = [];\n\t                if (this.isFilterPopupOpen()) {\n\t                    this.getFilter(args.element, args.element.id, true);\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit', 'sortAscending', 'sortDescending', 'group', 'ungroup', 'columnChooser', 'filter'];\n\t        };\n\t        ColumnMenu.prototype.getItems = function () {\n\t            var items = [];\n\t            var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\t            for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n\t                var item = defultItems_1[_i];\n\t                if (typeof item === 'string') {\n\t                    if (item === 'columnChooser') {\n\t                        var col = this.getDefaultItem(item);\n\t                        col.items = this.createChooserItems();\n\t                        items.push(col);\n\t                    }\n\t                    else {\n\t                        items.push(this.getDefaultItem(item));\n\t                    }\n\t                }\n\t                else {\n\t                    items.push(item);\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.getDefaultItem = function (item) {\n\t            var menuItem = {};\n\t            switch (item) {\n\t                case 'sortAscending':\n\t                    menuItem = { iconCss: this.ASCENDING };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { iconCss: this.DESCENDING };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { iconCss: this.GROUP };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { iconCss: this.UNGROUP };\n\t                    break;\n\t                case 'filter':\n\t                    menuItem = { iconCss: this.FILTER };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ColumnMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ColumnMenu.prototype.generateID = function (item, append) {\n\t            return this.gridID + '_colmenu_' + (append ? append + item : item);\n\t        };\n\t        ColumnMenu.prototype.getKeyFromId = function (id, append) {\n\t            return id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenu = function () {\n\t            return this.element;\n\t        };\n\t        ColumnMenu.prototype.getModuleName = function () {\n\t            return 'columnMenu';\n\t        };\n\t        ColumnMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'columnChooser': 'Columnchooser',\n\t                'filter': 'FilterMenu'\n\t            };\n\t        };\n\t        ColumnMenu.prototype.getHeaderCell = function (e) {\n\t            return ej2_base_1.closest(e.target, 'th.e-headercell');\n\t        };\n\t        ColumnMenu.prototype.getColumn = function () {\n\t            if (this.headerCell) {\n\t                var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ColumnMenu.prototype.createChooserItems = function () {\n\t            var items = [];\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.showInColumnChooser) {\n\t                    items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.appendFilter = function (e) {\n\t            var filter = 'filter';\n\t            if (!this.defaultItems[filter]) {\n\t                return;\n\t            }\n\t            else {\n\t                var key = this.defaultItems[filter].id;\n\t                if (ej2_base_1.closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n\t                    this.getFilter(e.target, key);\n\t                }\n\t                else if (!ej2_base_1.closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n\t                    this.getFilter(e.target, key, true);\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n\t            var filterPopup = this.getFilterPop();\n\t            if (filterPopup) {\n\t                filterPopup.style.display = isClose ? 'none' : 'block';\n\t            }\n\t            else {\n\t                this.parent.notify(events.filterOpen, {\n\t                    col: this.targetColumn, target: target, isClose: isClose, id: id\n\t                });\n\t            }\n\t        };\n\t        ColumnMenu.prototype.setPosition = function (li, ul) {\n\t            var gridPos = this.parent.element.getBoundingClientRect();\n\t            var liPos = li.getBoundingClientRect();\n\t            var left = liPos.left - gridPos.left;\n\t            var top = liPos.top - gridPos.top;\n\t            if (gridPos.height < top) {\n\t                top = top - ul.offsetHeight + liPos.height;\n\t            }\n\t            else if (gridPos.height < top + ul.offsetHeight) {\n\t                top = gridPos.height - ul.offsetHeight;\n\t            }\n\t            if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n\t                top = window.innerHeight - ul.offsetHeight - gridPos.top;\n\t            }\n\t            left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n\t            if (gridPos.width <= left + ul.offsetWidth) {\n\t                left -= liPos.width + ul.offsetWidth;\n\t            }\n\t            else if (left < 0) {\n\t                left += ul.offsetWidth + liPos.width;\n\t            }\n\t            ul.style.top = top + 'px';\n\t            ul.style.left = left + 'px';\n\t        };\n\t        ColumnMenu.prototype.filterPosition = function (e) {\n\t            var filterPopup = this.getFilterPop();\n\t            filterPopup.classList.add(this.WRAP);\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                var disp = filterPopup.style.display;\n\t                filterPopup.style.cssText += 'display:block;visibility:hidden';\n\t                var li = this.element.querySelector('.' + this.FILTER);\n\t                if (li) {\n\t                    this.setPosition(li.parentElement, filterPopup);\n\t                    filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefault = function () {\n\t            var items = [];\n\t            if (this.parent.ensureModuleInjected(resize_1.Resize)) {\n\t                items.push('autoFitAll');\n\t                items.push('autoFit');\n\t            }\n\t            if (this.parent.allowGrouping && this.parent.ensureModuleInjected(group_1.Group)) {\n\t                items.push('group');\n\t                items.push('ungroup');\n\t            }\n\t            if (this.parent.allowSorting && this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                items.push('sortAscending');\n\t                items.push('sortDescending');\n\t            }\n\t            items.push('columnChooser');\n\t            if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar') &&\n\t                this.parent.ensureModuleInjected(filter_1.Filter)) {\n\t                items.push('filter');\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.isFilterPopupOpen = function () {\n\t            var filterPopup = this.getFilterPop();\n\t            return filterPopup && filterPopup.style.display !== 'none';\n\t        };\n\t        ColumnMenu.prototype.getFilterPop = function () {\n\t            return this.parent.element.querySelector('.' + this.POP);\n\t        };\n\t        ColumnMenu.prototype.isFilterItemAdded = function () {\n\t            return (this.parent.columnMenuItems &&\n\t                this.parent.columnMenuItems.indexOf('filter') >= 0) || !this.parent.columnMenuItems;\n\t        };\n\t        return ColumnMenu;\n\t    }());\n\t    exports.ColumnMenu = ColumnMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(25), __webpack_require__(12), __webpack_require__(13), __webpack_require__(26), __webpack_require__(27), __webpack_require__(64), __webpack_require__(29), __webpack_require__(11), __webpack_require__(64), __webpack_require__(30), __webpack_require__(31), __webpack_require__(87), __webpack_require__(88), __webpack_require__(86), __webpack_require__(85), __webpack_require__(89), __webpack_require__(91), __webpack_require__(90), __webpack_require__(84), __webpack_require__(96), __webpack_require__(103), __webpack_require__(106), __webpack_require__(66), __webpack_require__(68), __webpack_require__(70), __webpack_require__(69), __webpack_require__(67)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, datepicker_edit_cell_1, command_column_renderer_1, freeze_renderer_1, string_filter_ui_1, number_filter_ui_1, date_filter_ui_1, boolean_filter_ui_1, filter_menu_operator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t    __export(datepicker_edit_cell_1);\n\t    __export(command_column_renderer_1);\n\t    __export(freeze_renderer_1);\n\t    __export(string_filter_ui_1);\n\t    __export(number_filter_ui_1);\n\t    __export(date_filter_ui_1);\n\t    __export(boolean_filter_ui_1);\n\t    __export(filter_menu_operator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(36), __webpack_require__(37), __webpack_require__(16), __webpack_require__(19), __webpack_require__(107)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1, freeze_row_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t    __export(freeze_row_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(57), __webpack_require__(62), __webpack_require__(58), __webpack_require__(59)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwZmRkMzRkNDAxY2VmNTdmYWI0NCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS91dGlsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2VudW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1tZXJnZS1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NoZWNrYm94LWZpbHRlci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZm9jdXMtc3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLWNob29zZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jbGlwYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL3BhZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9udW1lcmljLWNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9leHRlcm5hbC1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1tZW51LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N0cmluZy1maWx0ZXItdWkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLW1lbnUtb3BlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtYmVyLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kYXRlLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy90b29sYmFyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9pbmxpbmUtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYmF0Y2gtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2V4cG9ydC1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wZGYtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb21tYW5kLWNvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbnRleHQtbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2ZyZWV6ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZnJlZXplLXJvdy1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDVkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsU0FBUztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsWUFBWTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ2h5REQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDakRELGdEOzs7Ozs7QUNBQSxnRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBLHdCQUF1QixtQkFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFtRCx1QkFBdUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUN2WUQsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzVERDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEM7QUFDOUMsK0NBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLFNBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3RqQkQsaUQ7Ozs7OztBQ0FBLGlEOzs7Ozs7aUVDQUE7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBcUUsMkRBQTJEO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFELHlE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QTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxvQkFBb0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFp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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFELFNBQVM7QUFDOUQ7QUFDQSwyREFBMEQsVUFBVTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCxTQUFTO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWdFLDhCQUE4QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDcEREO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0QsYUFBYTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ3hQRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLHdCQUF3QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQscUJBQXFCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBeUQscUJBQXFCLEVBQUU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsa0JBQWtCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFvRSxnQkFBZ0I7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0hBQW1ILGdCQUFnQjtBQUNuSTtBQUNBLHNEQUFxRCx1QkFBdUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFpRSxnQkFBZ0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCxRQUFRO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxTQUFTO0FBQzNEO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCxvQ0FBb0M7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0hBQStHO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsNEJBQTRCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNEO0FBQ3REO0FBQ0E7QUFDQSw4Q0FBNkMscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN2UUQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQSw0QkFBMkI7QUFDM0I7QUFDQTtBQUNBLDRCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRDtBQUNqRCx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMEMsbUJBQW1CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxvQ0FBb0M7QUFDakYsa0RBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFELFNBQVM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsOENBQThDO0FBQ3pFLGlFQUFnRSw0QkFBNEI7QUFDNUYsNkRBQTRELG1DQUFtQztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTBDLG9DQUFvQztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFxQyxjQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQjtBQUMzQixnREFBK0MsZ0JBQWdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBeUQsZ0RBQWdEO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdEO0FBQ3hEO0FBQ0E7QUFDQSw0QkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBK0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDemVEO0FBQ0E7QUFDQSxXQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYsMEJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0Esd0JBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDeENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNuQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFrRSxnR0FBZ0c7QUFDbEs7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckIsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQThFLGdCQUFnQjtB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RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLGVBQWU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLDBCQUEwQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsOEJBQThCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBLG9EQUFtRCxnQkFBZ0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsRUFBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQiwyQkFBMkI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLDJCQUEyQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBLGdDQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3o2QkQsa0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3ZFRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBdUU7QUFDdkUsZ0VBQStELGlFQUFpRTtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxnQkFBZ0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywyRkFBMkY7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN0RUQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELDZCQUE2QjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQStELGdCQUFnQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLGdCQUFnQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2xiRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQSw2REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0Esd0VBQXVFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDM2REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBLEVBQUM7Ozs7Ozs7aUVDUEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDakNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDIiwiZmlsZSI6ImVqMi1ncmlkcy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIikpIDogZmFjdG9yeShyb290W1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIzX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMjRfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82MV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzcxX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85OF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEwMV9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDBmZGQzNGQ0MDFjZWY1N2ZhYjQ0IiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ncmlkL2luZGV4XCIsIFwiLi9wYWdlci9pbmRleFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGluZGV4XzEsIGluZGV4XzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGluZGV4XzEpO1xuICAgIF9fZXhwb3J0KGluZGV4XzIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbW1vblwiLCBcIi4vYWN0aW9uc1wiLCBcIi4vbW9kZWxzXCIsIFwiLi9yZW5kZXJlclwiLCBcIi4vc2VydmljZXNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb21tb25fMSwgYWN0aW9uc18xLCBtb2RlbHNfMSwgcmVuZGVyZXJfMSwgc2VydmljZXNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29tbW9uXzEpO1xuICAgIF9fZXhwb3J0KGFjdGlvbnNfMSk7XG4gICAgX19leHBvcnQobW9kZWxzXzEpO1xuICAgIF9fZXhwb3J0KHJlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHNlcnZpY2VzXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYmFzZS9ncmlkXCIsIFwiLi9iYXNlL2VudW1cIiwgXCIuL2Jhc2UvdXRpbFwiLCBcIi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGdyaWRfMSwgZW51bV8xLCB1dGlsXzEsIGNvbnN0YW50XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGdyaWRfMSk7XG4gICAgX19leHBvcnQoZW51bV8xKTtcbiAgICBfX2V4cG9ydCh1dGlsXzEpO1xuICAgIF9fZXhwb3J0KGNvbnN0YW50XzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2NvbW1vbi5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vZW51bVwiLCBcIi4uL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIi4uL3NlcnZpY2VzL2ZvY3VzLXN0cmF0ZWd5XCIsIFwiLi4vbW9kZWxzL3BhZ2Utc2V0dGluZ3NcIiwgXCIuLi9hY3Rpb25zL3NlbGVjdGlvblwiLCBcIi4uL2FjdGlvbnMvc2VhcmNoXCIsIFwiLi4vYWN0aW9ucy9zaG93LWhpZGVcIiwgXCIuLi9hY3Rpb25zL3Njcm9sbFwiLCBcIi4uL2FjdGlvbnMvcHJpbnRcIiwgXCIuLi9tb2RlbHMvYWdncmVnYXRlXCIsIFwiLi4vYWN0aW9ucy9jb2x1bW4tY2hvb3NlclwiLCBcIi4uL2FjdGlvbnMvY2xpcGJvYXJkXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZWoyX2Jhc2VfNSwgZWoyX3BvcHVwc18xLCB1dGlsXzEsIGV2ZW50cywgcmVuZGVyXzEsIGVudW1fMSwgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgdmFsdWVfZm9ybWF0dGVyXzEsIHJlbmRlcmVyX2ZhY3RvcnlfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBhcmlhX3NlcnZpY2VfMSwgZm9jdXNfc3RyYXRlZ3lfMSwgcGFnZV9zZXR0aW5nc18xLCBzZWxlY3Rpb25fMSwgc2VhcmNoXzEsIHNob3dfaGlkZV8xLCBzY3JvbGxfMSwgcHJpbnRfMSwgYWdncmVnYXRlXzEsIGNvbHVtbl9jaG9vc2VyXzEsIGNsaXBib2FyZF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTb3J0RGVzY3JpcHRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTb3J0RGVzY3JpcHRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU29ydERlc2NyaXB0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNvcnREZXNjcmlwdG9yO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFNvcnREZXNjcmlwdG9yLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBTb3J0RGVzY3JpcHRvci5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Tb3J0RGVzY3JpcHRvciA9IFNvcnREZXNjcmlwdG9yO1xuICAgIHZhciBTb3J0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU29ydFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTb3J0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNvcnRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIFNvcnREZXNjcmlwdG9yKVxuICAgIF0sIFNvcnRTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgU29ydFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd1Vuc29ydFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU29ydFNldHRpbmdzID0gU29ydFNldHRpbmdzO1xuICAgIHZhciBQcmVkaWNhdGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUHJlZGljYXRlLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQcmVkaWNhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByZWRpY2F0ZTtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcIm1hdGNoQ2FzZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInByZWRpY2F0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHt9KVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiYWN0dWFsRmlsdGVyVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7fSlcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImFjdHVhbE9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImVqcHJlZGljYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwibWF0Y2hjYXNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiaWdub3JlQ2FzZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUHJlZGljYXRlID0gUHJlZGljYXRlO1xuICAgIHZhciBGaWx0ZXJTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWx0ZXJTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEZpbHRlclNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgUHJlZGljYXRlKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2ZpbHRlcmJhcicpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RmlsdGVyQmFyU3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTUwMClcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaW1tZWRpYXRlTW9kZURlbGF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGVyYXRvcnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkZpbHRlclNldHRpbmdzID0gRmlsdGVyU2V0dGluZ3M7XG4gICAgdmFyIFNlbGVjdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNlbGVjdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZWxlY3Rpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgncm93JylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdmbG93JylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGlvbk1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnc2luZ2xlJylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjaGVja2JveE9ubHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwicGVyc2lzdFNlbGVjdGlvblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU2VsZWN0aW9uU2V0dGluZ3MgPSBTZWxlY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgU2VhcmNoU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU2VhcmNoU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTZWFyY2hTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJmaWVsZHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnJylcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwia2V5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2NvbnRhaW5zJylcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJpZ25vcmVDYXNlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5TZWFyY2hTZXR0aW5ncyA9IFNlYXJjaFNldHRpbmdzO1xuICAgIHZhciBSb3dEcm9wU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUm93RHJvcFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSb3dEcm9wU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJvd0Ryb3BTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBSb3dEcm9wU2V0dGluZ3MucHJvdG90eXBlLCBcInRhcmdldElEXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Sb3dEcm9wU2V0dGluZ3MgPSBSb3dEcm9wU2V0dGluZ3M7XG4gICAgdmFyIFRleHRXcmFwU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGV4dFdyYXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGV4dFdyYXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVGV4dFdyYXBTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdib3RoJylcbiAgICBdLCBUZXh0V3JhcFNldHRpbmdzLnByb3RvdHlwZSwgXCJ3cmFwTW9kZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuVGV4dFdyYXBTZXR0aW5ncyA9IFRleHRXcmFwU2V0dGluZ3M7XG4gICAgdmFyIEdyb3VwU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR3JvdXBTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0Ryb3BBcmVhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd1RvZ2dsZUJ1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dHcm91cGVkQ29sdW1uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93VW5ncm91cEJ1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcImRpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcImNhcHRpb25UZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuR3JvdXBTZXR0aW5ncyA9IEdyb3VwU2V0dGluZ3M7XG4gICAgdmFyIEVkaXRTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFZGl0U2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRWRpdFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0FkZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dFZGl0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0RlbGV0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ25vcm1hbCcpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RWRpdE9uRGJsQ2xpY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0NvbmZpcm1EaWFsb2dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dEZWxldGVDb25maXJtRGlhbG9nXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5FZGl0U2V0dGluZ3MgPSBFZGl0U2V0dGluZ3M7XG4gICAgdmFyIEdyaWQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JpZCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JpZChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuaXNJbml0aWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLnNvcnRlZENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmluVmlld0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLm1lZGlhQ29sID0gW107XG4gICAgICAgICAgICBfdGhpcy5pc01lZGlhUXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbExvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmZyZWV6ZVJlZnJlc2ggPSBlajJfYmFzZV8xLkNvbXBvbmVudC5wcm90b3R5cGUucmVmcmVzaDtcbiAgICAgICAgICAgIF90aGlzLm1lcmdlQ2VsbHMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZmlsdGVyT3BlcmF0b3JzID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAnY29udGFpbnMnLCBlbmRzV2l0aDogJ2VuZHN3aXRoJywgZXF1YWw6ICdlcXVhbCcsIGdyZWF0ZXJUaGFuOiAnZ3JlYXRlcnRoYW4nLCBncmVhdGVyVGhhbk9yRXF1YWw6ICdncmVhdGVydGhhbm9yZXF1YWwnLFxuICAgICAgICAgICAgICAgIGxlc3NUaGFuOiAnbGVzc3RoYW4nLCBsZXNzVGhhbk9yRXF1YWw6ICdsZXNzdGhhbm9yZXF1YWwnLCBub3RFcXVhbDogJ25vdGVxdWFsJywgc3RhcnRzV2l0aDogJ3N0YXJ0c3dpdGgnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuZGVmYXVsdExvY2FsZSA9IHtcbiAgICAgICAgICAgICAgICBFbXB0eVJlY29yZDogJ05vIHJlY29yZHMgdG8gZGlzcGxheScsXG4gICAgICAgICAgICAgICAgVHJ1ZTogJ3RydWUnLFxuICAgICAgICAgICAgICAgIEZhbHNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgICAgIEludmFsaWRGaWx0ZXJNZXNzYWdlOiAnSW52YWxpZCBGaWx0ZXIgRGF0YScsXG4gICAgICAgICAgICAgICAgR3JvdXBEcm9wQXJlYTogJ0RyYWcgYSBjb2x1bW4gaGVhZGVyIGhlcmUgdG8gZ3JvdXAgaXRzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgVW5Hcm91cDogJ0NsaWNrIGhlcmUgdG8gdW5ncm91cCcsXG4gICAgICAgICAgICAgICAgR3JvdXBEaXNhYmxlOiAnR3JvdXBpbmcgaXMgZGlzYWJsZWQgZm9yIHRoaXMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBGaWx0ZXJiYXJUaXRsZTogJ1xcJ3MgZmlsdGVyIGJhciBjZWxsJyxcbiAgICAgICAgICAgICAgICBFbXB0eURhdGFTb3VyY2VFcnJvcjogJ0RhdGFTb3VyY2UgbXVzdCBub3QgYmUgZW1wdHkgYXQgaW5pdGlhbCBsb2FkIHNpbmNlIGNvbHVtbnMgYXJlIGdlbmVyYXRlZCBmcm9tIGRhdGFTb3VyY2UgaW4gQXV0b0dlbmVyYXRlIENvbHVtbiBHcmlkJyxcbiAgICAgICAgICAgICAgICBBZGQ6ICdBZGQnLFxuICAgICAgICAgICAgICAgIEVkaXQ6ICdFZGl0JyxcbiAgICAgICAgICAgICAgICBDYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIFVwZGF0ZTogJ1VwZGF0ZScsXG4gICAgICAgICAgICAgICAgRGVsZXRlOiAnRGVsZXRlJyxcbiAgICAgICAgICAgICAgICBQcmludDogJ1ByaW50JyxcbiAgICAgICAgICAgICAgICBQZGZleHBvcnQ6ICdQREYgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBFeGNlbGV4cG9ydDogJ0V4Y2VsIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgV29yZGV4cG9ydDogJ1dvcmQgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBDc3ZleHBvcnQ6ICdDU1YgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBTZWFyY2g6ICdTZWFyY2gnLFxuICAgICAgICAgICAgICAgIFNhdmU6ICdTYXZlJyxcbiAgICAgICAgICAgICAgICBJdGVtOiAnaXRlbScsXG4gICAgICAgICAgICAgICAgSXRlbXM6ICdpdGVtcycsXG4gICAgICAgICAgICAgICAgRWRpdE9wZXJhdGlvbkFsZXJ0OiAnTm8gcmVjb3JkcyBzZWxlY3RlZCBmb3IgZWRpdCBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIERlbGV0ZU9wZXJhdGlvbkFsZXJ0OiAnTm8gcmVjb3JkcyBzZWxlY3RlZCBmb3IgZGVsZXRlIG9wZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgU2F2ZUJ1dHRvbjogJ1NhdmUnLFxuICAgICAgICAgICAgICAgIE9LQnV0dG9uOiAnT0snLFxuICAgICAgICAgICAgICAgIENhbmNlbEJ1dHRvbjogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgRWRpdEZvcm1UaXRsZTogJ0RldGFpbHMgb2YgJyxcbiAgICAgICAgICAgICAgICBBZGRGb3JtVGl0bGU6ICdBZGQgTmV3IFJlY29yZCcsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlQ29uZmlybTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzYXZlIGNoYW5nZXM/JyxcbiAgICAgICAgICAgICAgICBCYXRjaFNhdmVMb3N0Q2hhbmdlczogJ1Vuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLFxuICAgICAgICAgICAgICAgIENvbmZpcm1EZWxldGU6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gRGVsZXRlIFJlY29yZD8nLFxuICAgICAgICAgICAgICAgIENhbmNlbEVkaXQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gQ2FuY2VsIHRoZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQ2hvb3NlQ29sdW1uczogJ0Nob29zZSBDb2x1bW4nLFxuICAgICAgICAgICAgICAgIFNlYXJjaENvbHVtbnM6ICdzZWFyY2ggY29sdW1ucycsXG4gICAgICAgICAgICAgICAgTWF0Y2hzOiAnTm8gTWF0Y2hlcyBGb3VuZCcsXG4gICAgICAgICAgICAgICAgRmlsdGVyQnV0dG9uOiAnRmlsdGVyJyxcbiAgICAgICAgICAgICAgICBDbGVhckJ1dHRvbjogJ0NsZWFyJyxcbiAgICAgICAgICAgICAgICBTdGFydHNXaXRoOiAnU3RhcnRzV2l0aCcsXG4gICAgICAgICAgICAgICAgRW5kc1dpdGg6ICdFbmRzV2l0aCcsXG4gICAgICAgICAgICAgICAgQ29udGFpbnM6ICdDb250YWlucycsXG4gICAgICAgICAgICAgICAgRXF1YWw6ICdFcXVhbCcsXG4gICAgICAgICAgICAgICAgTm90RXF1YWw6ICdOb3RFcXVhbCcsXG4gICAgICAgICAgICAgICAgTGVzc1RoYW46ICdMZXNzVGhhbicsXG4gICAgICAgICAgICAgICAgTGVzc1RoYW5PckVxdWFsOiAnTGVzc1RoYW5PckVxdWFsJyxcbiAgICAgICAgICAgICAgICBHcmVhdGVyVGhhbjogJ0dyZWF0ZXJUaGFuJyxcbiAgICAgICAgICAgICAgICBHcmVhdGVyVGhhbk9yRXF1YWw6ICdHcmVhdGVyVGhhbk9yRXF1YWwnLFxuICAgICAgICAgICAgICAgIENob29zZURhdGU6ICdDaG9vc2UgYSBEYXRlJyxcbiAgICAgICAgICAgICAgICBFbnRlclZhbHVlOiAnRW50ZXIgdGhlIHZhbHVlJyxcbiAgICAgICAgICAgICAgICBDb3B5OiAnQ29weScsXG4gICAgICAgICAgICAgICAgR3JvdXA6ICdHcm91cCBieSB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgVW5ncm91cDogJ1VuZ3JvdXAgYnkgdGhpcyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIGF1dG9GaXRBbGw6ICdBdXRvIEZpdCBhbGwgY29sdW1ucycsXG4gICAgICAgICAgICAgICAgYXV0b0ZpdDogJ0F1dG8gRml0IHRoaXMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBFeHBvcnQ6ICdFeHBvcnQnLFxuICAgICAgICAgICAgICAgIEZpcnN0UGFnZTogJ0ZpcnN0IFBhZ2UnLFxuICAgICAgICAgICAgICAgIExhc3RQYWdlOiAnTGFzdCBQYWdlJyxcbiAgICAgICAgICAgICAgICBQcmV2aW91c1BhZ2U6ICdQcmV2aW91cyBQYWdlJyxcbiAgICAgICAgICAgICAgICBOZXh0UGFnZTogJ05leHQgUGFnZScsXG4gICAgICAgICAgICAgICAgU29ydEFzY2VuZGluZzogJ1NvcnQgQXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICBTb3J0RGVzY2VuZGluZzogJ1NvcnQgRGVzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgRWRpdFJlY29yZDogJ0VkaXQgUmVjb3JkJyxcbiAgICAgICAgICAgICAgICBEZWxldGVSZWNvcmQ6ICdEZWxldGUgUmVjb3JkJyxcbiAgICAgICAgICAgICAgICBGaWx0ZXJNZW51OiAnRmlsdGVyJyxcbiAgICAgICAgICAgICAgICBDb2x1bW5jaG9vc2VyOiAnQ29sdW1ucydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIGRvd25BcnJvdzogJ2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgdXBBcnJvdzogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIHJpZ2h0QXJyb3c6ICdyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBsZWZ0QXJyb3c6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0RG93bjogJ3NoaWZ0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRVcDogJ3NoaWZ0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0UmlnaHQ6ICdzaGlmdCtyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdExlZnQ6ICdzaGlmdCtsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgICAgIGVzY2FwZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgY3RybEhvbWU6ICdjdHJsK2hvbWUnLFxuICAgICAgICAgICAgICAgIGN0cmxFbmQ6ICdjdHJsK2VuZCcsXG4gICAgICAgICAgICAgICAgcGFnZVVwOiAncGFnZXVwJyxcbiAgICAgICAgICAgICAgICBwYWdlRG93bjogJ3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBjdHJsQWx0UGFnZVVwOiAnY3RybCthbHQrcGFnZXVwJyxcbiAgICAgICAgICAgICAgICBjdHJsQWx0UGFnZURvd246ICdjdHJsK2FsdCtwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgYWx0UGFnZVVwOiAnYWx0K3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgYWx0UGFnZURvd246ICdhbHQrcGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGFsdERvd25BcnJvdzogJ2FsdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIGFsdFVwQXJyb3c6ICdhbHQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybERvd25BcnJvdzogJ2N0cmwrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsVXBBcnJvdzogJ2N0cmwrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNBOiAnY3RybCtBJyxcbiAgICAgICAgICAgICAgICBjdHJsUGx1c1A6ICdjdHJsK1AnLFxuICAgICAgICAgICAgICAgIGluc2VydDogJ2luc2VydCcsXG4gICAgICAgICAgICAgICAgZGVsZXRlOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICBmMjogJ2YyJyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBjdHJsRW50ZXI6ICdjdHJsK2VudGVyJyxcbiAgICAgICAgICAgICAgICBzaGlmdEVudGVyOiAnc2hpZnQrZW50ZXInLFxuICAgICAgICAgICAgICAgIHRhYjogJ3RhYicsXG4gICAgICAgICAgICAgICAgc2hpZnRUYWI6ICdzaGlmdCt0YWInLFxuICAgICAgICAgICAgICAgIHNwYWNlOiAnc3BhY2UnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzQzogJ2N0cmwrQycsXG4gICAgICAgICAgICAgICAgY3RybFNoaWZ0UGx1c0g6ICdjdHJsK3NoaWZ0K0gnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRWYWx1ZSgnbWVyZ2VQZXJzaXN0RGF0YScsIF90aGlzLm1lcmdlUGVyc2lzdEdyaWREYXRhLCBfdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsncGFnZVNldHRpbmdzJywgJ3NvcnRTZXR0aW5ncycsXG4gICAgICAgICAgICAgICAgJ2ZpbHRlclNldHRpbmdzJywgJ2dyb3VwU2V0dGluZ3MnLCAnY29sdW1ucycsICdzZWFyY2hTZXR0aW5ncycsICdzZWxlY3RlZFJvd0luZGV4J107XG4gICAgICAgICAgICB2YXIgaWdub3JlT25QZXJzaXN0ID0ge1xuICAgICAgICAgICAgICAgIHBhZ2VTZXR0aW5nczogWyd0ZW1wbGF0ZScsICdwYWdlU2l6ZXMnLCAnZW5hYmxlUXVlcnlTdHJpbmcnLCAndG90YWxSZWNvcmRzQ291bnQnLCAncGFnZUNvdW50J10sXG4gICAgICAgICAgICAgICAgZmlsdGVyU2V0dGluZ3M6IFsndHlwZScsICdtb2RlJywgJ3Nob3dGaWx0ZXJCYXJTdGF0dXMnLCAnaW1tZWRpYXRlTW9kZURlbGF5J10sXG4gICAgICAgICAgICAgICAgZ3JvdXBTZXR0aW5nczogWydzaG93RHJvcEFyZWEnLCAnc2hvd1RvZ2dsZUJ1dHRvbicsICdzaG93R3JvdXBlZENvbHVtbicsICdzaG93VW5ncm91cEJ1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICdkaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzJywgJ2hpZGVDYXB0aW9uQ291bnQnXSxcbiAgICAgICAgICAgICAgICBzZWFyY2hTZXR0aW5nczogWydmaWVsZHMnLCAnb3BlcmF0b3InLCAnaWdub3JlQ2FzZSddLFxuICAgICAgICAgICAgICAgIHNvcnRTZXR0aW5nczogW10sIGNvbHVtbnM6IFtdLCBzZWxlY3RlZFJvd0luZGV4OiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVPbkNvbHVtbiA9IFsnZmlsdGVyJywgJ2VkaXQnLCAnZmlsdGVyQmFyVGVtcGxhdGUnLCAnaGVhZGVyVGVtcGxhdGUnLCAndGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgICdjb21tYW5kVGVtcGxhdGUnLCAnY29tbWFuZHMnXTtcbiAgICAgICAgICAgIGtleUVudGl0eS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50T2JqZWN0ID0gX3RoaXNbdmFsdWVdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBpZ25vcmVPblBlcnNpc3RbdmFsdWVdOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY3VycmVudE9iamVjdFt2YWxdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVJbkFycmF5cyhpZ25vcmVPbkNvbHVtbiwgdGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pZ25vcmVJbkFycmF5cyA9IGZ1bmN0aW9uIChpZ25vcmVPbkNvbHVtbiwgY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlnbm9yZUluQ29sdW1uKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZ25vcmVJbkFycmF5cyhpZ25vcmVPbkNvbHVtbiwgY29sdW1uLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWdub3JlSW5Db2x1bW4oaWdub3JlT25Db2x1bW4sIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlnbm9yZUluQ29sdW1uID0gZnVuY3Rpb24gKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW4pIHtcbiAgICAgICAgICAgIGlnbm9yZU9uQ29sdW1uLmZvckVhY2goZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb2x1bW5bdmFsXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dGaWx0ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5maWx0ZXJTZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RXhjZWxFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdFeGNlbEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dQZGZFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdQZGZFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3NvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zb3J0U2V0dGluZ3MsIHRoaXMuc29ydGVkQ29sdW1ucywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncGFnZXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5wYWdlU2V0dGluZ3NdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3NlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZW1iZXI6ICdyZXNpemUnLFxuICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdyZW9yZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncm93RHJhZ0FuZERyb3AnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdncm91cCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLmdyb3VwU2V0dGluZ3MsIHRoaXMuc29ydGVkQ29sdW1ucywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHsgbWVtYmVyOiAnYWdncmVnYXRlJywgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWwoKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2RldGFpbFJvdycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhciB8fCB0aGlzLnRvb2xiYXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Rvb2xiYXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVZpcnR1YWxpemF0aW9uIHx8IHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd2aXJ0dWFsc2Nyb2xsJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mcm96ZW5Db2x1bW5zIHx8IHRoaXMuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7IG1lbWJlcjogJ2ZyZWV6ZScsIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2VkaXQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXh0ZW5kUmVxdWlyZWRNb2R1bGVzKG1vZHVsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4dGVuZFJlcXVpcmVkTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NvbW1hbmRDb2x1bW4odGhpcy5jb2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2NvbW1hbmRDb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51SXRlbXMpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdjb250ZXh0TWVudScsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbk1lbnUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdjb2x1bW5NZW51JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBuZXcgc2VydmljZV9sb2NhdG9yXzEuU2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5lbGVtZW50LCB7IHJvbGU6ICdncmlkJyB9KTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5jcmVhdGVTcGlubmVyKHsgdGFyZ2V0OiB0aGlzLmVsZW1lbnQgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZSA9IG5ldyByZW5kZXJfMS5SZW5kZXIodGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmdldE1lZGlhQ29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUgPSBuZXcgc2VhcmNoXzEuU2VhcmNoKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBuZXcgc2Nyb2xsXzEuU2Nyb2xsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJNb2R1bGUgPSBuZXcgY29sdW1uX2Nob29zZXJfMS5Db2x1bW5DaG9vc2VyKHRoaXMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluaXRpYWxMb2FkLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoZXZlbnRzLmxvYWQpO1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMuY29sdW1ucywgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbik7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc01vZGVsKCk7XG4gICAgICAgICAgICB0aGlzLmdyaWRSZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0Q3Vyc29yKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5pdGlhbEVuZCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93U3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5zaG93U3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlU3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5oaWRlU3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRNZWRpYUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2NvbCA9IHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdzaG93SGlkZVNlcnZpY2UnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGdjb2wubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbFtpbmRleF0uaGlkZUF0TWVkaWEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYUNvbC5wdXNoKGdjb2xbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShnY29sW2luZGV4XS5oaWRlQXRNZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYVF1ZXJ5VXBkYXRlKGluZGV4LCBtZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuYWRkTGlzdGVuZXIodGhpcy5tZWRpYVF1ZXJ5VXBkYXRlLmJpbmQodGhpcywgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubWVkaWFRdWVyeVVwZGF0ZSA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgZSkge1xuICAgICAgICAgICAgdGhpcy5pc01lZGlhUXVlcnkgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XTtcbiAgICAgICAgICAgIGNvbC52aXNpYmxlID0gZS5tYXRjaGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsTG9hZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGNvbC5oZWFkZXJUZXh0LCAnaGVhZGVyVGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShjb2wuaGVhZGVyVGV4dCwgJ2hlYWRlclRleHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hNZWRpYUNvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTWVkaWFRdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbExvYWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ldmVudEluaXRpYWxpemVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lEZXBlbmRlbnRNb2R1bGVzKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS1ydGwnLCAnZS1ncmlkaG92ZXInLCAnZS1yZXNwb25zaXZlJywgJ2UtZGVmYXVsdCcsICdlLWRldmljZSddKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVzdHJveURlcGVuZGVudE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdncmlkJztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcmVxdWlyZUdyaWRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY2hlY2tDdXJzb3I7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UGFnaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdwYWdlcicsIGVuYWJsZTogdGhpcy5hbGxvd1BhZ2luZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAncGFnZXInLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnBhZ2VTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlKSAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGVPYmouc2V0TG9jYWxlKG5ld1Byb3AubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLnNldEN1bHR1cmUobmV3UHJvcC5sb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICd0b29sYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1NvcnRpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3NvcnQnLCBlbmFibGU6IHRoaXMuYWxsb3dTb3J0aW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RmlsdGVyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdmaWx0ZXInLCBlbmFibGU6IHRoaXMuYWxsb3dGaWx0ZXJpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Njcm9sbCcsIHByb3BlcnRpZXM6IHsgd2lkdGg6IG5ld1Byb3Aud2lkdGgsIGhlaWdodDogbmV3UHJvcC5oZWlnaHQgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlb3JkZXJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jlb3JkZXInLCBlbmFibGU6IHRoaXMuYWxsb3dSZW9yZGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93Um93RHJhZ0FuZERyb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jvd0RyYWdBbmREcm9wJywgZW5hYmxlOiB0aGlzLmFsbG93Um93RHJhZ0FuZERyb3AgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm93VGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5yb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGV0YWlsVGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dHcm91cGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZ3JvdXAnLCBlbmFibGU6IHRoaXMuYWxsb3dHcm91cGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoaWxkR3JpZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9vbGJhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXBTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdncm91cCcsIHByb3BlcnRpZXM6IG5ld1Byb3AuZ3JvdXBTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZ2dyZWdhdGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdhZ2dyZWdhdGUnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5PYmplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVHcmlkUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZnJvemVuQ29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zyb3plblJvd3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmVlemVSZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZShwcm9wLCBuZXdQcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHRDdXJzb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1aXJlR3JpZFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVpcmVSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wLCBuZXdQcm9wKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5yZW1vdmVQYWRkaW5nKCFuZXdQcm9wLmVuYWJsZVJ0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudU1vZHVsZS5nZXRDb250ZXh0TWVudSgpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51TW9kdWxlLmdldENvbnRleHRNZW51KCkuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW5NZW51KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnVNb2R1bGUuZ2V0Q29sdW1uTWVudSgpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnVNb2R1bGUuZ2V0Q29sdW1uTWVudSgpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVBbHRSb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UmVzaXppbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JpZExpbmVzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcmlkTGluZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlsdGVyU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdmaWx0ZXInLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmZpbHRlclNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzZWFyY2hTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NlYXJjaCcsIHByb3BlcnRpZXM6IG5ld1Byb3Auc2VhcmNoU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NvcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3Rpb25TZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NlbGVjdGlvbicsIHByb3BlcnRpZXM6IG5ld1Byb3Auc2VsZWN0aW9uU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2VkaXQnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmVkaXRTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dUZXh0V3JhcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndGV4dFdyYXBTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUZXh0V3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUZXh0V3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGFTb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlSG92ZXInOlxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gbmV3UHJvcC5lbmFibGVIb3ZlciA/IGVqMl9iYXNlXzMuYWRkQ2xhc3MgOiBlajJfYmFzZV8zLnJlbW92ZUNsYXNzO1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb24oW3RoaXMuZWxlbWVudF0sICdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRGVmYXVsdEN1cnNvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcgfHwgdGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk1vZGVsID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk1vZGVsKGNvbHVtbnNbaV0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsLnB1c2goY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbnZpZXcgPSB0aGlzLmluVmlld0luZGV4ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2IC0gX3RoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgfSkuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2ID4gLTE7IH0pO1xuICAgICAgICAgICAgdmFyIHZMZW4gPSBpbnZpZXcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW5Nb2RlbCkgfHwgdGhpcy5jb2x1bW5Nb2RlbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5Nb2RlbCh0aGlzLmNvbHVtbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB2TGVuID09PSAwID8gdGhpcy5jb2x1bW5Nb2RlbCA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbC5zbGljZShpbnZpZXdbMF0sIGludmlld1t2TGVuIC0gMV0gKyAxKTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzSW5WaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5WaWV3SW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TG9jYWxlQ29uc3RhbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdExvY2FsZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0Q29sdW1uSW5kZXhlc0luVmlldyA9IGZ1bmN0aW9uIChpbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluVmlld0luZGV4ZXMgPSBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb2x1bW5Nb2RlbDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnB1c2goY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0SGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5zZXRQYW5lbChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZS5zZXRUYWJsZShlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZENvbnRlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlLnNldFBhbmVsKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUuc2V0VGFibGUoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEZvb3RlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGZvb3RlcicpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVyRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRmb290ZXInKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3RlckVsZW1lbnQuZmlyc3RDaGlsZC5maXJzdENoaWxkO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdyaWRQYWdlcjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZFBhZ2VyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFBhZ2VyID0gZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dCeUluZGV4KGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93RWxlbWVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93SW5mbyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge307XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0KSAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1kZXRhaWxyb3djb2xsYXBzZScpXG4gICAgICAgICAgICAgICAgJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICcuZS1yb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSBwYXJzZUludChjZWxsLmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dfMSA9IGVqMl9iYXNlXzEuY2xvc2VzdChjZWxsLCAnLmUtcm93Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHBhcnNlSW50KHJvd18xLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dzT2JqZWN0ID0gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKS5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnVpZCA9PT0gcm93XzEuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0RhdGEgPSByb3dzT2JqZWN0WzBdLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSByb3dzT2JqZWN0WzBdLmNlbGxzW2NlbGxJbmRleF0uY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0geyBjZWxsOiBjZWxsLCBjZWxsSW5kZXg6IGNlbGxJbmRleCwgcm93OiByb3dfMSwgcm93SW5kZXg6IHJvd0luZGV4LCByb3dEYXRhOiByb3dEYXRhLCBjb2x1bW46IGNvbHVtbiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREYXRhUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVJvd3MucHVzaChyb3dzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YVJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY29sdW1uSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWhlYWRlcmNlbGwnKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd09iamVjdEZyb21VSUQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cudWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93c09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93cygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5IZWFkZXJCeVVpZCh0aGlzLmdldENvbHVtbkJ5RmllbGQoZmllbGQpLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIHVpZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyBpbmRleCA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRVaWRCeUNvbHVtbkZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5GaWVsZE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5nZXRDb2x1bW5zKClbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTmFtZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd1RlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93VGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGV0YWlsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQcmltYXJ5S2V5RmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgPSAwLCBjb2wgPSB0aGlzLmNvbHVtbnMsIGNMZW4gPSBjb2wubGVuZ3RoOyBrZXkgPCBjTGVuOyBrZXkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xba2V5XS5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGNvbFtrZXldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZSA/IHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUmVjb3JkcyA6IFtdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd0luZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0luZGV4ZXMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJlY29yZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuZ2V0U2VsZWN0ZWRSZWNvcmRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERhdGFNb2R1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNb2R1bGUuZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2hvd0NvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgc2hvd0J5KSB7XG4gICAgICAgICAgICBzaG93QnkgPSBzaG93QnkgPyBzaG93QnkgOiAnaGVhZGVyVGV4dCc7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGtleXMsIHNob3dCeSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmhpZGVDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIGhpZGVCeSkge1xuICAgICAgICAgICAgaGlkZUJ5ID0gaGlkZUJ5ID8gaGlkZUJ5IDogJ2hlYWRlclRleHQnO1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShrZXlzLCBoaWRlQnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zb3J0Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5zb3J0Q29sdW1uKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZVNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZmlsdGVyQnlDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGROYW1lLCBmaWx0ZXJPcGVyYXRvciwgZmlsdGVyVmFsdWUsIHByZWRpY2F0ZSwgbWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZSwgYWN0dWFsT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmZpbHRlckJ5Q29sdW1uKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbGVhckZpbHRlcmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Um93KGluZGV4LCBpc1RvZ2dsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Um93cyhyb3dJbmRleGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdENlbGwoY2VsbEluZGV4LCBpc1RvZ2dsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoTW9kdWxlLnNlYXJjaChzZWFyY2hTdHJpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpbnRNb2R1bGUucHJpbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZChmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc3RhcnRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuYWRkUmVjb3JkKGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSb3cgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSb3codHIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkTW9kdWxlLmNvcHkod2l0aEhlYWRlcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlY2FsY0luZGVudFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXRoaXMuaXNEZXRhaWwoKSkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuZ2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgcGVyUGl4ZWwgPSBpbmRlbnRXaWR0aCAvIDMwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKHBlclBpeGVsID49IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCA9ICgzMCAvIHBlclBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAzMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgY29udGVudENvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBpLCB3aWR0aDogaW5kZW50V2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuc2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnLCAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlck1vZHVsZS5yZW9yZGVyQ29sdW1ucyhmcm9tRk5hbWUsIHRvRk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmaWVsZE5hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU1vZHVsZS5hdXRvRml0Q29sdW1ucyhmaWVsZE5hbWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uY2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZS5yZW5kZXJDb2x1bW5DaG9vc2VyKHgsIHksIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmluaXRpYWxpemVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3dpZHRoU2VydmljZScsIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignY2VsbFJlbmRlcmVyRmFjdG9yeScsIG5ldyBjZWxsX3JlbmRlcl9mYWN0b3J5XzEuQ2VsbFJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdyZW5kZXJlckZhY3RvcnknLCBuZXcgcmVuZGVyZXJfZmFjdG9yeV8xLlJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdsb2NhbGl6YXRpb24nLCB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV80LkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3ZhbHVlRm9ybWF0dGVyJywgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIodGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3Nob3dIaWRlU2VydmljZScsIHRoaXMuc2hvd0hpZGVyID0gbmV3IHNob3dfaGlkZV8xLlNob3dIaWRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2FyaWFTZXJ2aWNlJywgdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2ZvY3VzJywgdGhpcy5mb2N1c01vZHVsZSA9IG5ldyBmb2N1c19zdHJhdGVneV8xLkZvY3VzU3RyYXRlZ3kodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcm9jZXNzTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzQ29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhZztcbiAgICAgICAgICAgIHZhciBqO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGksIGxlbikge1xuICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc0xlbiA9IHNDb2xzLmxlbmd0aDsgaiA8IHNMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNDb2xzW2pdLmZpZWxkID09PSBnQ29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHMucHVzaCh7IGZpZWxkOiBnQ29sc1tpXSwgZGlyZWN0aW9uOiAnYXNjZW5kaW5nJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzXzEuYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLnNvcnRlZENvbHVtbnMucHVzaChzQ29sc1tqXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzQ29sc1tqXS5kaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNfMS5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpc18xLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGdDb2xzW2ldOyB9KVswXSA6IHRoaXNfMS5nZXRDb2x1bW5CeUZpZWxkKGdDb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKGksIGxlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5yb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICB0aGlzLmRldGFpbFRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmRldGFpbFRlbXBsYXRlKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudERldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZSkgPyAndW5kZWZpbmVkJyA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RGV0YWlscy5wYXJlbnRLZXlGaWVsZFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnkud2hlcmUodGhpcy5xdWVyeVN0cmluZywgJ2VxdWFsJywgdmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ncmlkUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUhvdmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGhvdmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZGV2aWNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmVsZW1lbnQsIFsnZS1yZXNwb25zaXZlJywgJ2UtZGVmYXVsdCddLCBbXSk7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXJGYWN0b3J5ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUgPSByZW5kZXJlckZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB0aGlzLnByaW50TW9kdWxlID0gbmV3IHByaW50XzEuUHJpbnQodGhpcywgdGhpcy5zY3JvbGxNb2R1bGUpO1xuICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRNb2R1bGUgPSBuZXcgY2xpcGJvYXJkXzEuQ2xpcGJvYXJkKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50SW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlR3JpZFBvcFVwRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb0NvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JpZExpbmVzKCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGV4dFdyYXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0V2lkdGgoKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldEhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcG9wdXAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcG9wdXAnLCBzdHlsZXM6ICdkaXNwbGF5Om5vbmU7JyB9KTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY29udGVudCcsIGF0dHJzOiB7IHRhYkluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdXB0YWlsIGUtdGFpbCcgfSldLCBwb3B1cCk7XG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnc3BhbicpKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFtjb250ZW50LCBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1kb3dudGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlR3JpZExpbmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbXSwgWydlLXZlcnRpY2FsbGluZXMnLCAnZS1ob3Jpem9udGFsbGluZXMnLCAnZS1oaWRlbGluZXMnLCAnZS1ib3RobGluZXMnXSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZ3JpZExpbmVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhvcml6b250YWxsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0aWNhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXZlcnRpY2FsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhpZGVsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib3RoJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtYm90aGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hcHBseVRleHRXcmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dUZXh0V3JhcCkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250ZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5nZXRDb250ZW50KCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZVRleHRXcmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRhYmxlID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2VGFnID0gJ2UtZ3JpZGhlYWRlcic7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdlRhZyA9ICdlLWdyaWRjb250ZW50JztcbiAgICAgICAgICAgIHZhciBodGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJEaXZUYWcsICdoZWFkZXInKTtcbiAgICAgICAgICAgIHZhciBjdGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJEaXZUYWcsICdjb250ZW50Jyk7XG4gICAgICAgICAgICB2YXIgYWxsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgdmFyIGFsbGVsZSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhbGxlbGVbaV0gPSBhbGxbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGxlbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gaGVhZGVyVGFibGUuY29udGFpbnMoZWxlbWVudCkgPyBodGFibGUgOiBjdGFibGU7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IGhlYWRlclRhYmxlLmNvbnRhaW5zKGVsZW1lbnQpID8gJ3RoJyA6ICd0cic7XG4gICAgICAgICAgICAgICAgdGFibGUucXVlcnlTZWxlY3RvcihlbGUpLmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5pbm5lckhUTUwgPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgICAgICBpZiAod2lkdGggPiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS10b29sdGlwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2x0aXAgPSBuZXcgZWoyX3BvcHVwc18xLlRvb2x0aXAoeyBjb250ZW50OiBlbGVtZW50LmlubmVySFRNTCB9LCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPCBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvb2x0aXAnKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChodGFibGUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjdGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGFnLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMuZWxlbWVudC5jbGFzc05hbWU7XG4gICAgICAgICAgICBteVRhYmxlRGl2LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogaW5saW5lLWJsb2NrO3Zpc2liaWxpdHk6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlJztcbiAgICAgICAgICAgIHZhciBteVN1YkRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVN1YkRpdi5jbGFzc05hbWUgPSB0YWc7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgICAgIG15VGFibGUuY2xhc3NOYW1lID0gdGFibGUuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZS5zdHlsZS5jc3NUZXh0ID0gJ3RhYmxlLWxheW91dDogYXV0bzt3aWR0aDogYXV0byc7XG4gICAgICAgICAgICB2YXIgZWxlID0gKHR5cGUgPT09ICdoZWFkZXInKSA/ICd0aCcgOiAndGQnO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgbXl0ZCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudChlbGUpO1xuICAgICAgICAgICAgbXlUci5hcHBlbmRDaGlsZChteXRkKTtcbiAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQobXlUcik7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHJldHVybiBteVRhYmxlRGl2O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmdldENvbnRlbnQoKSwgJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IHRoaXMuZWxlbWVudC50YWJJbmRleCA9PT0gLTEgPyAwIDogdGhpcy5lbGVtZW50LnRhYkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2tleWRvd24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCwgdGhpcyk7XG4gICAgICAgICAgICBbZXZlbnRzLnVwZGF0ZURhdGEsIGV2ZW50cy5tb2RlbENoYW5nZWQsIGV2ZW50cy5jb250ZW50UmVhZHksIGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWRdLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uKGV2ZW50LCBfdGhpcy5yZWZyZXNoVG9vbHRpcCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kYXRhQm91bmRGdW5jdGlvbiA9IHRoaXMucmVmcmVzaE1lZGlhQ29sLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmRGdW5jdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCk7XG4gICAgICAgICAgICBbZXZlbnRzLnVwZGF0ZURhdGEsIGV2ZW50cy5tb2RlbENoYW5nZWQsIGV2ZW50cy5jb250ZW50UmVhZHksIGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWRdLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9mZihldmVudCwgX3RoaXMucmVmcmVzaFRvb2x0aXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZEZ1bmN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q3VycmVudFZpZXdSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbG93R3JvdXBpbmcgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEucmVjb3JkcyA6IHRoaXMuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tb3VzZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZHBvcHVwJykgJiYgZS50b3VjaGVzKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jbG9uZXByb3BlcnRpZXMnKS5sZW5ndGggfHwgdGhpcy5jaGVja0VkaXQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCghdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHx8XG4gICAgICAgICAgICAgICAgKCEodGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpICYmIHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNoZWNrRWRpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgJiYgdHIgJiYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRyb3cnKSB8fCB0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtYWRkZWRyb3cnKSk7XG4gICAgICAgICAgICByZXR1cm4gIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXVuYm91bmRjZWxsZGl2JykgJiYgKGlzRWRpdCB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmXG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRiYXRjaGNlbGwnKSkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKS5pZCAhPT0gdGhpcy5lbGVtZW50LmlkIHx8IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJy5lLXVuYm91bmRjZWxsZGl2JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGJsY2xpY2ssIGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5mb2N1c091dEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbHRlckNsZWFyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNhbmNlbDpub3QoLmUtaGlkZSknKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJDbGVhcikge1xuICAgICAgICAgICAgICAgIGZpbHRlckNsZWFyLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0NoaWxkR3JpZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJyk7XG4gICAgICAgICAgICBpZiAoZ3JpZEVsZW1lbnQgJiYgZ3JpZEVsZW1lbnQuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tZXJnZVBlcnNpc3RHcmlkRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0TW9kdWxlTmFtZSgpICsgdGhpcy5lbGVtZW50LmlkKTtcbiAgICAgICAgICAgIGlmICghKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZGF0YSkgfHwgKGRhdGEgPT09ICcnKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YU9ial8xID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGFPYmpfMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YgdGhpc18yW2tleV0gPT09ICdvYmplY3QnKSAmJiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzXzJba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXNfMltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMltrZXldLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGVsZW1lbnQsIGRhdGFPYmpfMVtrZXldW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZCh0aGlzXzJba2V5XSwgZGF0YU9ial8xW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18yW2tleV0gPSBkYXRhT2JqXzFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRoaXNfMiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzIoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzRGV0YWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hpbGRHcmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRWRpdCAmJiBlLmFjdGlvbiAhPT0gJ2VzY2FwZScgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgZS5hY3Rpb24gIT09ICdzaGlmdEVudGVyJ1xuICAgICAgICAgICAgICAgICAgICAmJiBlLmFjdGlvbiAhPT0gJ3RhYicgJiYgZS5hY3Rpb24gIT09ICdzaGlmdFRhYicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2N0cmxQbHVzUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5rZXlQcmVzc2VkLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0SW5qZWN0ZWRNb2R1bGVzID0gZnVuY3Rpb24gKG1vZHVsZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0ZWRNb2R1bGVzID0gbW9kdWxlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlQ29sdW1uT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMuY29sdW1ucywgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuYXV0b0NvbCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uT2JqZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXhjZWxFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4Y2VsRXhwb3J0TW9kdWxlLk1hcCh0aGlzLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jc3ZFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4Y2VsRXhwb3J0TW9kdWxlLk1hcCh0aGlzLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnBkZkV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCBwZGZEb2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBkZkV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaXNDb21tYW5kQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tbWFuZENvbHVtbihjb2x1bW4uY29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jb21tYW5kcyB8fCBjb2x1bW4uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBNb2R1bGUuZ3JvdXBDb2x1bW4oY29sdW1uTmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5ncm91cE1vZHVsZS51bmdyb3VwQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0NvbnRleHRNZW51T3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRNZW51TW9kdWxlICYmIHRoaXMuY29udGV4dE1lbnVNb2R1bGUuaXNPcGVuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5lbnN1cmVNb2R1bGVJbmplY3RlZCA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluamVjdGVkTW9kdWxlcygpLmluZGV4T2YobW9kdWxlKSA+PSAwO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIHNob3dCeSkge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhjb2x1bW5OYW1lLCBzaG93QnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGhpZGVCeSkge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShjb2x1bW5OYW1lLCBoaWRlQnkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JpZDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlQWx0Um93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVIb3ZlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dLZXlib2FyZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93VGV4dFdyYXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBUZXh0V3JhcFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRleHRXcmFwU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1BhZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIHBhZ2Vfc2V0dGluZ3NfMS5QYWdlU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGFnZVNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlVmlydHVhbGl6YXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNlYXJjaFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlYXJjaFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dTb3J0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd011bHRpU29ydGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93RXhjZWxFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1BkZkV4cG9ydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNvcnRTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzb3J0U2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93U2VsZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoLTEpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VsZWN0ZWRSb3dJbmRleFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNlbGVjdGlvblNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlbGVjdGlvblNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dGaWx0ZXJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jlb3JkZXJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jlc2l6aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSb3dEcmFnQW5kRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFJvd0Ryb3BTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBGaWx0ZXJTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJmaWx0ZXJTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93R3JvdXBpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzaG93Q29sdW1uTWVudVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEdyb3VwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZ3JvdXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEVkaXRTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlZGl0U2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVSb3cpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWdncmVnYXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNob3dDb2x1bW5DaG9vc2VyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdkZWZhdWx0JylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncmlkTGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93VGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGV0YWlsVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2hpbGRHcmlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2FsbHBhZ2VzJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkYXRhU291cmNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29udGV4dE1lbnVJdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5NZW51SXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInBhZ2VyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgwKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZyb3plblJvd3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgwKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZyb3plbkNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwibG9hZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25CZWdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25GYWlsdXJlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93U2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbERlc2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1N0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludENvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZVByaW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInBkZlF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZXhjZWxRdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRldGFpbERhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaFNhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVnaW5FZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxFZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTYXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIm9uUmVzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0b3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbnRleHRNZW51T3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb250ZXh0TWVudUNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbk1lbnVPcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbk1lbnVDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGVja0JveENoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVDb3B5XCIsIHZvaWQgMCk7XG4gICAgR3JpZCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEdyaWQpO1xuICAgIGV4cG9ydHMuR3JpZCA9IEdyaWQ7XG4gICAgR3JpZC5JbmplY3Qoc2VsZWN0aW9uXzEuU2VsZWN0aW9uKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2dyaWQuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmFsdWVGb3JtYXR0ZXIoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VsdHVyZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRsLmN1bHR1cmUgPSBjdWx0dXJlTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0Rm9ybWF0RnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5nZXRQYXJzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0RGF0ZVBhcnNlcihmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXROdW1iZXJQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZyb21WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScgfHwgdHlwZSA9PT0gJ2RhdGV0aW1lJyB8fCB0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUudG9WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmb3JtYXQpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuc2V0Q3VsdHVyZSA9IGZ1bmN0aW9uIChjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0Q3VsdHVyZShjdWx0dXJlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWYWx1ZUZvcm1hdHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmFsdWVGb3JtYXR0ZXIgPSBWYWx1ZUZvcm1hdHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL21vZGVscy9jb2x1bW5cIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgY29sdW1uXzEsIGVqMl9wb3B1cHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBmdW5jdGlvbiBkb2VzSW1wbGVtZW50SW50ZXJmYWNlKHRhcmdldCwgY2hlY2tGb3IpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5wcm90b3R5cGUgJiYgY2hlY2tGb3IgaW4gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICB9XG4gICAgZXhwb3J0cy5kb2VzSW1wbGVtZW50SW50ZXJmYWNlID0gZG9lc0ltcGxlbWVudEludGVyZmFjZTtcbiAgICBmdW5jdGlvbiB2YWx1ZUFjY2Vzc29yKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgZmllbGQgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGZpZWxkKSA/ICcnIDogZmllbGQ7XG4gICAgICAgIHJldHVybiBlajJfYmFzZV8yLmdldFZhbHVlKGZpZWxkLCBkYXRhKTtcbiAgICB9XG4gICAgZXhwb3J0cy52YWx1ZUFjY2Vzc29yID0gdmFsdWVBY2Nlc3NvcjtcbiAgICBmdW5jdGlvbiBnZXRVcGRhdGVVc2luZ1JhZih1cGRhdGVGdW5jdGlvbiwgY2FsbEJhY2spIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2sobnVsbCwgdXBkYXRlRnVuY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVcGRhdGVVc2luZ1JhZiA9IGdldFVwZGF0ZVVzaW5nUmFmO1xuICAgIGZ1bmN0aW9uIGl0ZXJhdGVBcnJheU9yT2JqZWN0KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJlZCA9IHByZWRpY2F0ZShjb2xsZWN0aW9uW2ldLCBpKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwcmVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuaXRlcmF0ZUFycmF5T3JPYmplY3QgPSBpdGVyYXRlQXJyYXlPck9iamVjdDtcbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZUNvbXBpbGVyKHRlbXBsYXRlKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUodGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMudGVtcGxhdGVDb21waWxlciA9IHRlbXBsYXRlQ29tcGlsZXI7XG4gICAgZnVuY3Rpb24gc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGNvcHlBdHRyID0ge307XG4gICAgICAgIHZhciBsaXRlcmFscyA9IFsnc3R5bGUnLCAnY2xhc3MnXTtcbiAgICAgICAgZWoyX2Jhc2VfMi5leHRlbmQoY29weUF0dHIsIGN1c3RvbUF0dHJpYnV0ZXMsIHt9KTtcbiAgICAgICAgaWYgKCdzdHlsZScgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUobm9kZSwgY29weUF0dHJbbGl0ZXJhbHNbMF1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1swXV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjbGFzcycgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYWRkQ2xhc3MoW25vZGVdLCBjb3B5QXR0cltsaXRlcmFsc1sxXV0pO1xuICAgICAgICAgICAgZGVsZXRlIGNvcHlBdHRyW2xpdGVyYWxzWzFdXTtcbiAgICAgICAgfVxuICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMobm9kZSwgY29weUF0dHIpO1xuICAgIH1cbiAgICBleHBvcnRzLnNldFN0eWxlQW5kQXR0cmlidXRlcyA9IHNldFN0eWxlQW5kQXR0cmlidXRlcztcbiAgICBmdW5jdGlvbiBleHRlbmQoY29waWVkLCBmaXJzdCwgc2Vjb25kLCBleGNsdWRlKSB7XG4gICAgICAgIHZhciBtb3ZlZCA9IGVqMl9iYXNlXzIuZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCk7XG4gICAgICAgIE9iamVjdC5rZXlzKG1vdmVkKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBtb3ZlZFt2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW92ZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuICAgIGZ1bmN0aW9uIHByZXBhcmVDb2x1bW5zKGNvbHVtbnMsIGF1dG9XaWR0aCkge1xuICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sdW1uc1tjXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKHsgZmllbGQ6IGNvbHVtbnNbY10gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghKGNvbHVtbnNbY10gaW5zdGFuY2VvZiBjb2x1bW5fMS5Db2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2NdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbihjb2x1bW5zW2NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbY10uY29sdW1ucyA9IHByZXBhcmVDb2x1bW5zKGNvbHVtbnNbY10uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi5oZWFkZXJUZXh0ID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dCkgPyBjb2x1bW4uZmllbGQgfHwgJycgOiBjb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGNvbHVtbi52YWx1ZUFjY2Vzc29yID0gY29sdW1uLnZhbHVlQWNjZXNzb3IgfHwgdmFsdWVBY2Nlc3NvcjtcbiAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IGF1dG9XaWR0aCAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgPyAyMDAgOiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW5zW2NdID0gY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cbiAgICBleHBvcnRzLnByZXBhcmVDb2x1bW5zID0gcHJlcGFyZUNvbHVtbnM7XG4gICAgZnVuY3Rpb24gc2V0Q3NzSW5HcmlkUG9wVXAocG9wVXAsIGUsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgcG9wVXBTcGFuID0gcG9wVXAucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBwb3BVcC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0UG9zaXRpb24gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGlzQm90dG9tVGFpbDtcbiAgICAgICAgcG9wVXBTcGFuLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBpc0JvdHRvbVRhaWwgPSAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLmNsaWVudFkpID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDpcbiAgICAgICAgICAgIGUuY2xpZW50WSkgPiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMDtcbiAgICAgICAgcG9wVXAuc3R5bGUudG9wID0gdGFyZ2V0UG9zaXRpb24udG9wIC0gcG9zaXRpb24udG9wICtcbiAgICAgICAgICAgIChpc0JvdHRvbVRhaWwgPyAtKHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSA6IHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSArICdweCc7XG4gICAgICAgIHBvcFVwLnN0eWxlLmxlZnQgPSBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3BVcCwgZSwgdGFyZ2V0UG9zaXRpb24sIHBvc2l0aW9uLmxlZnQpICsgJ3B4JztcbiAgICAgICAgaWYgKGlzQm90dG9tVGFpbCkge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS11cHRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0Q3NzSW5HcmlkUG9wVXAgPSBzZXRDc3NJbkdyaWRQb3BVcDtcbiAgICBmdW5jdGlvbiBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3B1cCwgZSwgdGFyZ2V0UG9zaXRpb24sIGxlZnQpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gcG9wdXAub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICB2YXIgeCA9IGdldFBvc2l0aW9uKGUpLng7XG4gICAgICAgIGlmICh4IC0gdGFyZ2V0UG9zaXRpb24ubGVmdCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ubGVmdCAtIGxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0UG9zaXRpb24ucmlnaHQgLSB4IDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRQb3NpdGlvbi5yaWdodCAtIGxlZnQgLSB3aWR0aCAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geCAtIGxlZnQgLSB3aWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wZXJ0aWVzKG9iaikge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZSgncHJvcGVydGllcycsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0QWN0dWFsUHJvcGVydGllcyA9IGdldEFjdHVhbFByb3BlcnRpZXM7XG4gICAgZnVuY3Rpb24gcGFyZW50c1VudGlsKGVsZW0sIHNlbGVjdG9yLCBpc0lEKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBlbGVtO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoaXNJRCA/IHBhcmVudC5pZCA9PT0gc2VsZWN0b3IgOiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzVW50aWwgPSBwYXJlbnRzVW50aWw7XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudEluZGV4KGVsZW1lbnQsIGVsZW1lbnRzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5pc0VxdWFsTm9kZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0RWxlbWVudEluZGV4ID0gZ2V0RWxlbWVudEluZGV4O1xuICAgIGZ1bmN0aW9uIGluQXJyYXkodmFsdWUsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgZXhwb3J0cy5pbkFycmF5ID0gaW5BcnJheTtcbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wRnJvbUNvbGwoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgY29sbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25baV0uaGFzT3duUHJvcGVydHkoJ3Byb3BlcnRpZXMnKSkge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sbC5wdXNoKGNvbGxlY3Rpb25baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BGcm9tQ29sbCA9IGdldEFjdHVhbFByb3BGcm9tQ29sbDtcbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KHRhcmdldCwgc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0YXJnZXQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmVFbGVtZW50ID0gcmVtb3ZlRWxlbWVudDtcbiAgICBmdW5jdGlvbiBnZXRQb3NpdGlvbihlKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHt9O1xuICAgICAgICBwb3NpdGlvbi54ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRYKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6XG4gICAgICAgICAgICBlLmNsaWVudFgpO1xuICAgICAgICBwb3NpdGlvbi55ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpO1xuICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0UG9zaXRpb24gPSBnZXRQb3NpdGlvbjtcbiAgICB2YXIgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBnZXRVaWQocHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwcmVmaXggKyB1aWQrKztcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVaWQgPSBnZXRVaWQ7XG4gICAgZnVuY3Rpb24gYXBwZW5kQ2hpbGRyZW4oZWxlbSwgY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGVuID09PSBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cbiAgICBleHBvcnRzLmFwcGVuZENoaWxkcmVuID0gYXBwZW5kQ2hpbGRyZW47XG4gICAgZnVuY3Rpb24gcGFyZW50cyhlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICBleHBvcnRzLnBhcmVudHMgPSBwYXJlbnRzO1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBkYXRhLCBjb2x1bW4sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmN1c3RvbUFnZ3JlZ2F0ZSA/IGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUuY2FsbChjb250ZXh0LCBkYXRhLCBjb2x1bW4pIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVqMl9kYXRhXzEuRGF0YVV0aWwuYWdncmVnYXRlc1t0eXBlXShkYXRhLCBjb2x1bW4uZmllbGQpO1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSA9IGNhbGN1bGF0ZUFnZ3JlZ2F0ZTtcbiAgICB2YXIgc2Nyb2xsV2lkdGggPSBudWxsO1xuICAgIGZ1bmN0aW9uIGdldFNjcm9sbEJhcldpZHRoKCkge1xuICAgICAgICBpZiAoc2Nyb2xsV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGl2Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICBkaXZOb2RlLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MTAwcHg7aGVpZ2h0OiAxMDBweDtvdmVyZmxvdzogc2Nyb2xsO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IC05OTk5cHg7JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgdmFsdWUgPSAoZGl2Tm9kZS5vZmZzZXRXaWR0aCAtIGRpdk5vZGUuY2xpZW50V2lkdGgpIHwgMDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbFdpZHRoID0gdmFsdWU7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0U2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICB2YXIgcm93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGdldFJvd0hlaWdodChlbGVtZW50KSB7XG4gICAgICAgIGlmIChyb3dIZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgc3R5bGVzOiAndmlzaWJpbGl0eTogaGlkZGVuJyB9KTtcbiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gJzx0cj48dGQgY2xhc3M9XCJlLXJvd2NlbGxcIj5BPHRkPjwvdHI+JztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIHZhciByZWN0ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZCh0YWJsZSk7XG4gICAgICAgIHJvd0hlaWdodCA9IE1hdGguY2VpbChyZWN0LmhlaWdodCk7XG4gICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0Um93SGVpZ2h0ID0gZ2V0Um93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGlzRWRpdGFibGUoY29sLCB0eXBlLCBlbGVtKSB7XG4gICAgICAgIHZhciByb3cgPSBwYXJlbnRzVW50aWwoZWxlbSwgJ2Utcm93Jyk7XG4gICAgICAgIHZhciBpc09sZFJvdyA9ICFyb3cgPyB0cnVlIDogcm93ICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgIGlmICh0eXBlID09PSAnYmVnaW5FZGl0JyAmJiBpc09sZFJvdykge1xuICAgICAgICAgICAgaWYgKGNvbC5pc0lkZW50aXR5IHx8IGNvbC5pc1ByaW1hcnlLZXkgfHwgIWNvbC5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc09sZFJvdyAmJiAhY29sLmFsbG93RWRpdGluZyAmJiAhY29sLmlzSWRlbnRpdHkgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmlzRWRpdGFibGUgPSBpc0VkaXRhYmxlO1xuICAgIGZ1bmN0aW9uIGlzQWN0aW9uUHJldmVudChpbnN0KSB7XG4gICAgICAgIHZhciBkbGcgPSBpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpbnN0LmVsZW1lbnQuaWQgKyAnRWRpdENvbmZpcm0nKTtcbiAgICAgICAgcmV0dXJuIGluc3QuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiZcbiAgICAgICAgICAgIChpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSAmJlxuICAgICAgICAgICAgKGRsZyA/IGRsZy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcG9wdXAtY2xvc2UnKSA6IHRydWUpO1xuICAgIH1cbiAgICBleHBvcnRzLmlzQWN0aW9uUHJldmVudCA9IGlzQWN0aW9uUHJldmVudDtcbiAgICBmdW5jdGlvbiB3cmFwKGVsZW0sIGFjdGlvbikge1xuICAgICAgICB2YXIgY2xOYW1lID0gJ2Utd3JhcCc7XG4gICAgICAgIGVsZW0gPSBlbGVtIGluc3RhbmNlb2YgQXJyYXkgPyBlbGVtIDogW2VsZW1dO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFjdGlvbiA/IGVsZW1baV0uY2xhc3NMaXN0LmFkZChjbE5hbWUpIDogZWxlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKGNsTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy53cmFwID0gd3JhcDtcbiAgICBmdW5jdGlvbiBjaGFuZ2VCdXR0b25UeXBlKHRhcmdldCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoYnV0dG9uLCB7IHR5cGU6ICdidXR0b24nIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuY2hhbmdlQnV0dG9uVHlwZSA9IGNoYW5nZUJ1dHRvblR5cGU7XG4gICAgZnVuY3Rpb24gc2V0Rm9ybWF0dGVyKHNlcnZpY2VMb2NhdG9yLCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIGZtdHIgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICBzd2l0Y2ggKGNvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5zZXRGb3JtYXR0ZXIgPSBzZXRGb3JtYXR0ZXI7XG4gICAgZnVuY3Rpb24gYWRkUmVtb3ZlQWN0aXZlQ2xhc3NlcyhjZWxscywgYWRkKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KGNlbGxzW2ldLCBhcmdzLnNsaWNlKCksIFtdKTtcbiAgICAgICAgICAgICAgICBjZWxsc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QoY2VsbHNbaV0sIFtdLCBhcmdzLnNsaWNlKCkpO1xuICAgICAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuYWRkUmVtb3ZlQWN0aXZlQ2xhc3NlcyA9IGFkZFJlbW92ZUFjdGl2ZUNsYXNzZXM7XG4gICAgZnVuY3Rpb24gZGlzdGluY3RTdHJpbmdWYWx1ZXMocmVzdWx0KSB7XG4gICAgICAgIHZhciB0ZW1wID0ge307XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghKHJlc3VsdFtpXSBpbiB0ZW1wKSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHJlc3VsdFtpXS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZW1wW3Jlc3VsdFtpXV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGV4cG9ydHMuZGlzdGluY3RTdHJpbmdWYWx1ZXMgPSBkaXN0aW5jdFN0cmluZ1ZhbHVlcztcbiAgICBmdW5jdGlvbiBnZXRGaWx0ZXJNZW51UG9zdGlvbih0YXJnZXQsIGRpYWxvZ09iaikge1xuICAgICAgICB2YXIgZWxlbWVudFZpc2libGUgPSBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdmFyIGRsZ1dpZHRoID0gZGlhbG9nT2JqLndpZHRoO1xuICAgICAgICB2YXIgbmV3cG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbih0YXJnZXQsIGRpYWxvZ09iai5lbGVtZW50KTtcbiAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRWaXNpYmxlO1xuICAgICAgICBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS50b3AgPSAobmV3cG9zLnRvcCArIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQpIC0gNSArICdweCc7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gKChuZXdwb3MubGVmdCAtIGRsZ1dpZHRoKSArIHRhcmdldC5jbGllbnRXaWR0aCk7XG4gICAgICAgIGlmIChsZWZ0UG9zIDwgMSkge1xuICAgICAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IChkbGdXaWR0aCArIGxlZnRQb3MpIC0gMTYgKyAncHgnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IGxlZnRQb3MgKyAtNCArICdweCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5nZXRGaWx0ZXJNZW51UG9zdGlvbiA9IGdldEZpbHRlck1lbnVQb3N0aW9uO1xuICAgIGZ1bmN0aW9uIGdldFpJbmRleENhbGN1YWx0aW9uKGFyZ3MsIGRpYWxvZ09iaikge1xuICAgICAgICBhcmdzLnBvcHVwLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gKGRpYWxvZ09iai56SW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFpJbmRleENhbGN1YWx0aW9uID0gZ2V0WkluZGV4Q2FsY3VhbHRpb247XG4gICAgZnVuY3Rpb24gdG9vZ2xlQ2hlY2tib3goZWxlbSkge1xuICAgICAgICB2YXIgc3BhbiA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmUtZnJhbWUnKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2snKSA/IGVqMl9iYXNlXzEuY2xhc3NMaXN0KHNwYW4sIFsnZS11bmNoZWNrJ10sIFsnZS1jaGVjayddKSA6XG4gICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChzcGFuLCBbJ2UtY2hlY2snXSwgWydlLXVuY2hlY2snXSk7XG4gICAgfVxuICAgIGV4cG9ydHMudG9vZ2xlQ2hlY2tib3ggPSB0b29nbGVDaGVja2JveDtcbiAgICBmdW5jdGlvbiBjcmVhdGVDYm94V2l0aFdyYXAodWlkLCBlbGVtLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCd1aWQnLCB1aWQpO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cbiAgICBleHBvcnRzLmNyZWF0ZUNib3hXaXRoV3JhcCA9IGNyZWF0ZUNib3hXaXRoV3JhcDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW4gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW4ob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1NvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0dyb3VwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbk1lbnUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVHcm91cEJ5Rm9ybWF0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFsbG93RWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZpbHRlciA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zaG93SW5Db2x1bW5DaG9vc2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtY29sdW1uJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZvcm1hdCAmJiAob3B0aW9ucy5mb3JtYXQuc2tlbGV0b24gfHwgb3B0aW9ucy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9ybWF0dGVyKHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKG9wdGlvbnMuZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJzZXIodmFsdWVGb3JtYXR0ZXIuZ2V0UGFyc2VyRnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29tbWFuZHMgJiYgIXRoaXMudGV4dEFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUgfHwgdGhpcy5jb21tYW5kc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy50ZW1wbGF0ZSB8fCB0aGlzLmNvbW1hbmRzVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyLml0ZW1UZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx0clRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmZpbHRlci5pdGVtVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0UGFyc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0UGFyc2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlckZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Q29sdW1uVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldEZpbHRlckl0ZW1UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZsdHJUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldERvbVNldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVIdG1sRW5jb2RlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW4gPSBDb2x1bW47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuY3JlYXRlZCA9ICdjcmVhdGUnO1xuICAgIGV4cG9ydHMuZGVzdHJveWVkID0gJ2Rlc3Ryb3knO1xuICAgIGV4cG9ydHMubG9hZCA9ICdsb2FkJztcbiAgICBleHBvcnRzLnJvd0RhdGFCb3VuZCA9ICdyb3dEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMucXVlcnlDZWxsSW5mbyA9ICdxdWVyeUNlbGxJbmZvJztcbiAgICBleHBvcnRzLmFjdGlvbkJlZ2luID0gJ2FjdGlvbkJlZ2luJztcbiAgICBleHBvcnRzLmFjdGlvbkNvbXBsZXRlID0gJ2FjdGlvbkNvbXBsZXRlJztcbiAgICBleHBvcnRzLmFjdGlvbkZhaWx1cmUgPSAnYWN0aW9uRmFpbHVyZSc7XG4gICAgZXhwb3J0cy5kYXRhQm91bmQgPSAnZGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGluZyA9ICdyb3dTZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0ZWQgPSAncm93U2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RpbmcgPSAncm93RGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RlZCA9ICdyb3dEZXNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3RpbmcgPSAnY2VsbFNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0ZWQgPSAnY2VsbFNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxEZXNlbGVjdGluZyA9ICdjZWxsRGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbERlc2VsZWN0ZWQgPSAnY2VsbERlc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0YXJ0ID0gJ2NvbHVtbkRyYWdTdGFydCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnID0gJ2NvbHVtbkRyYWcnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJvcCA9ICdjb2x1bW5Ecm9wJztcbiAgICBleHBvcnRzLnJvd0RyYWdTdGFydCA9ICdyb3dEcmFnU3RhcnQnO1xuICAgIGV4cG9ydHMucm93RHJhZyA9ICdyb3dEcmFnJztcbiAgICBleHBvcnRzLnJvd0Ryb3AgPSAncm93RHJvcCc7XG4gICAgZXhwb3J0cy5iZWZvcmVQcmludCA9ICdiZWZvcmVQcmludCc7XG4gICAgZXhwb3J0cy5wcmludENvbXBsZXRlID0gJ3ByaW50Q29tcGxldGUnO1xuICAgIGV4cG9ydHMuZGV0YWlsRGF0YUJvdW5kID0gJ2RldGFpbERhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy50b29sYmFyQ2xpY2sgPSAndG9vbGJhckNsaWNrJztcbiAgICBleHBvcnRzLmJhdGNoQWRkID0gJ2JhdGNoQWRkJztcbiAgICBleHBvcnRzLmJhdGNoRGVsZXRlID0gJ2JhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoQWRkID0gJ2JlZm9yZUJhdGNoQWRkJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoRGVsZXRlID0gJ2JlZm9yZUJhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoU2F2ZSA9ICdiZWZvcmVCYXRjaFNhdmUnO1xuICAgIGV4cG9ydHMuYmVnaW5FZGl0ID0gJ2JlZ2luRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsRWRpdCA9ICdjZWxsRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsU2F2ZSA9ICdjZWxsU2F2ZSc7XG4gICAgZXhwb3J0cy5lbmRBZGQgPSAnZW5kQWRkJztcbiAgICBleHBvcnRzLmVuZERlbGV0ZSA9ICdlbmREZWxldGUnO1xuICAgIGV4cG9ydHMuZW5kRWRpdCA9ICdlbmRFZGl0JztcbiAgICBleHBvcnRzLnJlY29yZERvdWJsZUNsaWNrID0gJ3JlY29yZERvdWJsZUNsaWNrJztcbiAgICBleHBvcnRzLnJlY29yZENsaWNrID0gJ3JlY29yZENsaWNrJztcbiAgICBleHBvcnRzLmJlZm9yZURhdGFCb3VuZCA9ICdiZWZvcmVEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMuYmVmb3JlT3BlbkNvbHVtbkNob29zZXIgPSAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInO1xuICAgIGV4cG9ydHMucmVzaXplU3RhcnQgPSAncmVzaXplU3RhcnQnO1xuICAgIGV4cG9ydHMub25SZXNpemUgPSAnb25SZXNpemUnO1xuICAgIGV4cG9ydHMucmVzaXplU3RvcCA9ICdyZXNpemVTdG9wJztcbiAgICBleHBvcnRzLmNoZWNrQm94Q2hhbmdlID0gJ2NoZWNrQm94Q2hhbmdlJztcbiAgICBleHBvcnRzLmJlZm9yZUNvcHkgPSAnYmVmb3JlQ29weSc7XG4gICAgZXhwb3J0cy5maWx0ZXJDaG9pY2VSZXF1ZXN0ID0gJ2ZpbHRlcmNob2ljZXJlcXVlc3QnO1xuICAgIGV4cG9ydHMuZmlsdGVyQWZ0ZXJPcGVuID0gJ2ZpbHRlcmFmdGVyb3Blbic7XG4gICAgZXhwb3J0cy5maWx0ZXJCZWZvcmVPcGVuID0gJ2ZpbHRlcmJlZm9yZW9wZW4nO1xuICAgIGV4cG9ydHMuaW5pdGlhbExvYWQgPSAnaW5pdGlhbC1sb2FkJztcbiAgICBleHBvcnRzLmluaXRpYWxFbmQgPSAnaW5pdGlhbC1lbmQnO1xuICAgIGV4cG9ydHMuZGF0YVJlYWR5ID0gJ2RhdGEtcmVhZHknO1xuICAgIGV4cG9ydHMuY29udGVudFJlYWR5ID0gJ2NvbnRlbnQtcmVhZHknO1xuICAgIGV4cG9ydHMudWlVcGRhdGUgPSAndWktdXBkYXRlJztcbiAgICBleHBvcnRzLm9uRW1wdHkgPSAnb24tZW1wdHknO1xuICAgIGV4cG9ydHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCA9ICdpbmJvdW5kLW1vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMubW9kZWxDaGFuZ2VkID0gJ21vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sR3JvdXBSZWZyZXNoID0gJ2NvbGdyb3VwLXJlZnJlc2gnO1xuICAgIGV4cG9ydHMuaGVhZGVyUmVmcmVzaGVkID0gJ2hlYWRlci1yZWZyZXNoZWQnO1xuICAgIGV4cG9ydHMucGFnZUJlZ2luID0gJ3BhZ2luZy1iZWdpbic7XG4gICAgZXhwb3J0cy5wYWdlQ29tcGxldGUgPSAncGFnaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNvcnRCZWdpbiA9ICdzb3J0aW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNvcnRDb21wbGV0ZSA9ICdzb3J0aW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmZpbHRlckJlZ2luID0gJ2ZpbHRlcmluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5maWx0ZXJDb21wbGV0ZSA9ICdmaWx0ZXJpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2VhcmNoQmVnaW4gPSAnc2VhcmNoaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNlYXJjaENvbXBsZXRlID0gJ3NlYXJjaGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZW9yZGVyQmVnaW4gPSAncmVvcmRlci1iZWdpbic7XG4gICAgZXhwb3J0cy5yZW9yZGVyQ29tcGxldGUgPSAncmVvcmRlci1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcEJlZ2luID0gJ3Jvd2RyYWdhbmRkcm9wLWJlZ2luJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUgPSAncm93ZHJhZ2FuZGRyb3AtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZ3JvdXBCZWdpbiA9ICdncm91cGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5ncm91cENvbXBsZXRlID0gJ2dyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnVuZ3JvdXBCZWdpbiA9ICd1bmdyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnVuZ3JvdXBDb21wbGV0ZSA9ICd1bmdyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkJlZ2luID0gJ3Jvd3NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSA9ICdyb3dzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25CZWdpbiA9ICdjb2x1bW5zZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY29sdW1uU2VsZWN0aW9uQ29tcGxldGUgPSAnY29sdW1uc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkJlZ2luID0gJ2NlbGxzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlID0gJ2NlbGxzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVDZWxsRm9jdXNlZCA9ICdiZWZvcmVjZWxsZm9jdXNlZCc7XG4gICAgZXhwb3J0cy5jZWxsRm9jdXNlZCA9ICdjZWxsZm9jdXNlZCc7XG4gICAgZXhwb3J0cy5rZXlQcmVzc2VkID0gJ2tleS1wcmVzc2VkJztcbiAgICBleHBvcnRzLmNsaWNrID0gJ2NsaWNrJztcbiAgICBleHBvcnRzLmRlc3Ryb3kgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9ICdjb2x1bW4tdmlzaWJsZS1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnNjcm9sbCA9ICdzY3JvbGwnO1xuICAgIGV4cG9ydHMuY29sdW1uV2lkdGhDaGFuZ2VkID0gJ2NvbHVtbi13aWR0aC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9ICdjb2x1bW4tcG9zaXRpb24tY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcCA9ICdyb3ctZHJhZy1hbmQtZHJvcCc7XG4gICAgZXhwb3J0cy5yb3dzQWRkZWQgPSAncm93cy1hZGRlZCc7XG4gICAgZXhwb3J0cy5yb3dzUmVtb3ZlZCA9ICdyb3dzLXJlbW92ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0b3AgPSAnY29sdW1uLWRyYWctc3RvcCc7XG4gICAgZXhwb3J0cy5oZWFkZXJEcm9wID0gJ2hlYWRlci1kcm9wJztcbiAgICBleHBvcnRzLmRhdGFTb3VyY2VNb2RpZmllZCA9ICdkYXRhc291cmNlLW1vZGlmaWVkJztcbiAgICBleHBvcnRzLnJlZnJlc2hDb21wbGV0ZSA9ICdyZWZyZXNoLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlZnJlc2hWaXJ0dWFsQmxvY2sgPSAncmVmcmVzaC12aXJ0dWFsLWJsb2NrJztcbiAgICBleHBvcnRzLmRibGNsaWNrID0gJ2RibGNsaWNrJztcbiAgICBleHBvcnRzLnRvb2xiYXJSZWZyZXNoID0gJ3Rvb2xiYXItcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5idWxrU2F2ZSA9ICdidWxrLXNhdmUnO1xuICAgIGV4cG9ydHMuYXV0b0NvbCA9ICdhdXRvLWNvbCc7XG4gICAgZXhwb3J0cy50b29sdGlwRGVzdHJveSA9ICd0b29sdGlwLWRlc3Ryb3knO1xuICAgIGV4cG9ydHMudXBkYXRlRGF0YSA9ICd1cGRhdGUtZGF0YSc7XG4gICAgZXhwb3J0cy5lZGl0QmVnaW4gPSAnZWRpdC1iZWdpbic7XG4gICAgZXhwb3J0cy5lZGl0Q29tcGxldGUgPSAnZWRpdC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hZGRCZWdpbiA9ICdhZGQtYmVnaW4nO1xuICAgIGV4cG9ydHMuYWRkQ29tcGxldGUgPSAnYWRkLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNhdmVDb21wbGV0ZSA9ICdzYXZlLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmRlbGV0ZUJlZ2luID0gJ2RlbGV0ZS1iZWdpbic7XG4gICAgZXhwb3J0cy5kZWxldGVDb21wbGV0ZSA9ICdkZWxldGUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucHJldmVudEJhdGNoID0gJ3ByZXZlbnQtYmF0Y2gnO1xuICAgIGV4cG9ydHMuZGlhbG9nRGVzdHJveSA9ICdkaWFsb2ctZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jcnVkQWN0aW9uID0gJ2NydWQtQWN0aW9uJztcbiAgICBleHBvcnRzLmFkZERlbGV0ZUFjdGlvbiA9ICdhZGQtZGVsZXRlLUFjdGlvbic7XG4gICAgZXhwb3J0cy5kZXN0cm95Rm9ybSA9ICdkZXN0cm95LWZvcm0nO1xuICAgIGV4cG9ydHMuZG91YmxlVGFwID0gJ2RvdWJsZS10YXAnO1xuICAgIGV4cG9ydHMuYmVmb3JlRXhjZWxFeHBvcnQgPSAnYmVmb3JlRXhjZWxFeHBvcnQnO1xuICAgIGV4cG9ydHMuZXhjZWxFeHBvcnRDb21wbGV0ZSA9ICdleGNlbEV4cG9ydENvbXBsZXRlJztcbiAgICBleHBvcnRzLmV4Y2VsUXVlcnlDZWxsSW5mbyA9ICdleGNlbFF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYmVmb3JlUGRmRXhwb3J0ID0gJ2JlZm9yZVBkZkV4cG9ydCc7XG4gICAgZXhwb3J0cy5wZGZFeHBvcnRDb21wbGV0ZSA9ICdwZGZFeHBvcnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wZGZRdWVyeUNlbGxJbmZvID0gJ3BkZlF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYWNjZXNzUHJlZGljYXRlID0gJ2FjY2Vzcy1wcmVkaWNhdGUnO1xuICAgIGV4cG9ydHMuY29udGV4dE1lbnVDbGljayA9ICdjb250ZXh0TWVudUNsaWNrJztcbiAgICBleHBvcnRzLmZyZWV6ZVJlZnJlc2ggPSAnZnJlZXplcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5jb250ZXh0TWVudU9wZW4gPSAnY29udGV4dE1lbnVPcGVuJztcbiAgICBleHBvcnRzLmNvbHVtbk1lbnVDbGljayA9ICdjb250ZXh0TWVudUNsaWNrJztcbiAgICBleHBvcnRzLmNvbHVtbk1lbnVPcGVuID0gJ2NvbHVtbk1lbnVPcGVuJztcbiAgICBleHBvcnRzLmZpbHRlck9wZW4gPSAnZmlsdGVyT3Blbic7XG4gICAgZXhwb3J0cy5maWx0ZXJEaWFsb2dDcmVhdGVkID0gJ2ZpbHRlckRpYWxvZ0NyZWF0ZWQnO1xuICAgIGV4cG9ydHMuZmlsdGVyTWVudUNsb3NlID0gJ2ZpbHRlci1tZW51LWNsb3NlJztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlbnVtXzEsIGRhdGFfMSwgcm93XzEsIGNlbGxfMSwgZXZlbnRzLCB1dGlsXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEsIGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLCBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEocGFyZW50LCBsb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5yZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07IH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShlLnJlcXVlc3RUeXBlICsgXCItYmVnaW5cIiwgZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgZSk7XG4gICAgICAgICAgICBpZiAoZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hEYXRhTWFuYWdlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0ge307IH1cbiAgICAgICAgICAgIGlmIChhcmdzLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcmVhZHkgPSB0aGlzLmRhdGEuZGF0YU1hbmFnZXIucmVhZHk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldEJ1c3kodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gdGhpcy5kYXRhLmdldERhdGEoYXJncywgdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgaWYgKCFyZWFkeSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmRpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXMgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlciA9IGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLnZhbGlkYXRlR3JvdXBSZWNvcmRzKGUpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFNYW5hZ2VyRmFpbHVyZShlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuc2VuZEJ1bGtSZXF1ZXN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZGF0YS5zYXZlQ2hhbmdlcyhhcmdzLmNoYW5nZXMsIHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKClbMF0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhTWFuYWdlci5kYXRhU291cmNlLm9mZmxpbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcih7IHJlcXVlc3RUeXBlOiAnYmF0Y2hzYXZlJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRtU3VjY2VzcyhlLCBhcmdzKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kbUZhaWx1cmUoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRtU3VjY2VzcyA9IGZ1bmN0aW9uIChlLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyU3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kbUZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlckZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHlSb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVtcHR5Um93KHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmVtcHR5Um93ID0gZnVuY3Rpb24gKGlzVHJpZ2dlcikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IHRoaXMuY29udGVudFJlbmRlcmVyLmdldFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIHZhciB0cjtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRib2R5KTtcbiAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWVtcHR5cm93JyB9KTtcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VtcHR5UmVjb3JkJyksXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgY29sc3BhbjogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyRW1wdHkodGJvZHkpO1xuICAgICAgICAgICAgaWYgKGlzVHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmRhdGFCb3VuZCwge30pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMub25FbXB0eSwgeyByb3dzOiBbbmV3IHJvd18xLlJvdyh7IGlzRGF0YVJvdzogdHJ1ZSwgY2VsbHM6IFtuZXcgY2VsbF8xLkNlbGwoeyBpc0RhdGFDZWxsOiB0cnVlLCB2aXNpYmxlOiB0cnVlIH0pXSB9KV0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlQ29sdW1uVHlwZSA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSByZWNvcmQgJiYgcmVjb3JkLml0ZW1zID8gcmVjb3JkLml0ZW1zWzBdIDogcmVjb3JkO1xuICAgICAgICAgICAgdmFyIGZtdHIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBlajJfYmFzZV8yLmdldFZhbHVlKGNvbHVtbnNbaV0uZmllbGQgfHwgJycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbFR5cGVEZWYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbHVtbnNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS50eXBlID0gdmFsdWUuZ2V0RGF5ID8gKHZhbHVlLmdldEhvdXJzKCkgPiAwIHx8IHZhbHVlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5nZXRTZWNvbmRzKCkgPiAwIHx8IHZhbHVlLmdldE1pbGxpc2Vjb25kcygpID4gMCA/ICdkYXRldGltZScgOiAnZGF0ZScpIDogdHlwZW9mICh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0udHlwZSA9IGNvbHVtbnNbaV0udHlwZSB8fCBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChjb2x1bW5zW2ldLmZvcm1hdCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRGb3JtYXR0ZXIodGhpcy5sb2NhdG9yLCBjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNvbHVtbnNbaV0uZm9ybWF0ICYmIGNvbHVtbnNbaV0udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogJ24yJyB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRhdGFNYW5hZ2VyU3VjY2VzcyA9IGZ1bmN0aW9uIChlLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGUpO1xuICAgICAgICAgICAgdmFyIGxlbiA9IE9iamVjdC5rZXlzKGUucmVzdWx0KS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgaWYgKCFsZW4gJiYgZS5jb3VudCAmJiBnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSBNYXRoLmNlaWwoZS5jb3VudCAvIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggJiYgbGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVzT25Jbml0aWFsUmVuZGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ29sVHlwZURlZikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uVHlwZShnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZGF0YVJlYWR5LCBlajJfYmFzZV8yLmV4dGVuZCh7IGNvdW50OiBlLmNvdW50LCByZXN1bHQ6IGUucmVzdWx0LCBhZ2dyZWdhdGVzOiBlLmFnZ3JlZ2F0ZXMgfSwgYXJncykpO1xuICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCB8fCAoYXJncyAmJiBhcmdzLnJlcXVlc3RUeXBlID09PSAndW5ncm91cGluZycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZWZyZXNoQ29udGVudFJvd3MoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW1wdHlEYXRhU291cmNlRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIuc2V0Um93RWxlbWVudHMoW10pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlSb3coKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGFyZ3MucmVxdWVzdFR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgKyAnLWNvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGFjdGlvbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZGF0YU1hbmFnZXJGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgeyBidXN5OiBmYWxzZSwgaW52YWxpZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlSb3coKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlc09uSW5pdGlhbFJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQ29sdW1ucyhlLnJlc3VsdFswXSk7XG4gICAgICAgICAgICB1dGlsXzEucHJlcGFyZUNvbHVtbnModGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5hdXRvQ29sLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuYnVpbGRDb2x1bW5zID0gZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBPYmplY3Qua2V5cyhyZWNvcmQpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sc1tpXSA9IHsgJ2ZpZWxkJzogY29sdW1uc1tpXSB9O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb2xzW2ldLndpZHRoID0gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sc1tpXS53aWR0aCkgPyBjb2xzW2ldLndpZHRoIDogMjAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmNvbHVtbnMgPSBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlciwgbmV3IGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyBjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB2YXIgY2VsbHJlbmRlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCBuZXcgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMS5IZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRhdGEsIG5ldyBjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBuZXcgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSW5kZW50LCBuZXcgaW5kZW50X2NlbGxfcmVuZGVyZXJfMS5JbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiwgbmV3IGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLkdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uRW1wdHksIG5ldyBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMS5Hcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kLCBuZXcgZXhwYW5kX2NlbGxfcmVuZGVyZXJfMS5FeHBhbmRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCwgbmV3IGhlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMS5IZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIG5ldyBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMS5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIsIG5ldyBkZXRhaWxfaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLkRldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsRXhwYW5kLCBuZXcgZGV0YWlsX2V4cGFuZF9jZWxsX3JlbmRlcmVyXzEuRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yZWZyZXNoQ29tcGxldGUsIHRoaXMucmVmcmVzaENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5idWxrU2F2ZSwgdGhpcy5zZW5kQnVsa1JlcXVlc3QsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnZhbGlkYXRlR3JvdXBSZWNvcmRzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBlLnJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JvdXAwID0gZS5yZXN1bHRbMF07XG4gICAgICAgICAgICB2YXIgZ3JvdXBOID0gZS5yZXN1bHRbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGFkZFdoZXJlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgW2dyb3VwMCwgZ3JvdXBOXS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlLnB1c2gobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKCdmaWVsZCcsICc9PScsIGdyb3VwLmZpZWxkKS5hbmQoX3RoaXMuZ2V0UHJlZGljYXRlKCdrZXknLCAnZXF1YWwnLCBncm91cC5rZXkpKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5wdXQud2hlcmUoZWoyX2RhdGFfMS5QcmVkaWNhdGUub3IocHJlZGljYXRlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGFkZFdoZXJlKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciBjdXJEbSA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGUucmVzdWx0KTtcbiAgICAgICAgICAgIHZhciBjdXJGaWx0ZXIgPSBjdXJEbS5leGVjdXRlTG9jYWwocXVlcnkpO1xuICAgICAgICAgICAgdmFyIG5ld1F1ZXJ5ID0gdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgclByZWRpY2F0ZSA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5pc1JlbW90ZSgpKSB7XG4gICAgICAgICAgICAgICAgW2dyb3VwMCwgZ3JvdXBOXS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gclByZWRpY2F0ZS5wdXNoKF90aGlzLmdldFByZWRpY2F0ZShncm91cC5maWVsZCwgJ2VxdWFsJywgZ3JvdXAua2V5KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbmV3UXVlcnkud2hlcmUoZWoyX2RhdGFfMS5QcmVkaWNhdGUub3IoclByZWRpY2F0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkV2hlcmUobmV3UXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IGVqMl9kYXRhXzEuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5nZXREYXRhKHt9LCBuZXdRdWVyeSkudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZUdyb3VwSW5mbyhjdXJGaWx0ZXIsIHIucmVzdWx0KTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGRlZmVycmVkLnJlamVjdChlKTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5nZXRQcmVkaWNhdGUgPSBmdW5jdGlvbiAoa2V5LCBvcGVyYXRvciwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdldERhdGVQcmVkaWNhdGUoeyBmaWVsZDoga2V5LCBvcGVyYXRvcjogb3BlcmF0b3IsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoa2V5LCBvcGVyYXRvciwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUdyb3VwSW5mbyA9IGZ1bmN0aW9uIChjdXJyZW50LCB1bnRvdWNoZWQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZG0gPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih1bnRvdWNoZWQpO1xuICAgICAgICAgICAgY3VycmVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdUdyb3VwID0gZG0uZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZSgnZmllbGQnLCAnPT0nLCBlbGVtZW50LmZpZWxkKS5hbmQoX3RoaXMuZ2V0UHJlZGljYXRlKCdrZXknLCAnZXF1YWwnLCBlbGVtZW50LmtleSkpKSlbMF07XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jb3VudCA9IHVHcm91cC5jb3VudDtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUdyb3VwID0gZWxlbWVudC5pdGVtcztcbiAgICAgICAgICAgICAgICB2YXIgdUdyb3VwSXRlbSA9IHVHcm91cC5pdGVtcztcbiAgICAgICAgICAgICAgICBpZiAoaXRlbUdyb3VwLkdyb3VwR3VpZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lml0ZW1zID0gX3RoaXMudXBkYXRlR3JvdXBJbmZvKGVsZW1lbnQuaXRlbXMsIHVHcm91cC5pdGVtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZSBpbnN0YW5jZW9mIEFycmF5ID8gY29sdW1uLnR5cGUgOiBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjb2x1bW4uZmllbGQgKyAnIC0gJyArIHR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZ2dyZWdhdGVzW2tleV0gPSB1dGlsXzEuY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGl0ZW1Hcm91cC5sZXZlbCA/IHVHcm91cEl0ZW0ucmVjb3JkcyA6IHVHcm91cC5pdGVtcywgY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlbmRlciA9IFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9yZW5kZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuL3Jvdy1yZW5kZXJlclwiLCBcIi4vY2VsbC1tZXJnZS1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgcm93X3JlbmRlcmVyXzEsIGNlbGxfbWVyZ2VfcmVuZGVyZXJfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRlbnRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZHJvcHBlZEVsZW1lbnQ6IGUuZHJvcHBlZEVsZW1lbnQgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yYWZDYWxsYmFjayA9IGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFyaWFTZXJ2aWNlLnNldEJ1c3koX3RoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb250ZW50UmVhZHksIHsgcm93czogX3RoaXMucm93cywgYXJnczogYXJncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmRhdGFCb3VuZCwge30pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChhcmdzLnJlcXVlc3RUeXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpICsgJy1jb21wbGV0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGFjdGlvbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTsgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnYXJpYVNlcnZpY2UnKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5nZXRNb2RlbEdlbmVyYXRvcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5jb2xHcm91cFJlZnJlc2gsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkY29udGVudCcgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNvbnRlbnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnMoaW5uZXJEaXYsIHsgYnVzeTogZmFsc2UgfSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZShjb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwge1xuICAgICAgICAgICAgICAgIG11bHRpc2VsZWN0YWJsZTogdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb250ZW50RHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jcmVhdGVDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzcGFjaW5nOiAnMC4yNXB4Jywgcm9sZTogJ2dyaWQnLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfY29udGVudF90YWJsZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKSk7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hDb250ZW50Um93cyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0ge307IH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZ09iai5jdXJyZW50Vmlld0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBnT2JqLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIGhkcmZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgdmFyIHRib2R5O1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBtb2RlbERhdGEgPSB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZSwgYXJncyk7XG4gICAgICAgICAgICB2YXIgaWR4ID0gbW9kZWxEYXRhWzBdLmNlbGxzWzBdLmluZGV4O1xuICAgICAgICAgICAgdmFyIGZDb250ID0gdGhpcy5nZXRQYW5lbCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyb3plbmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBtQ29udCA9IHRoaXMuZ2V0UGFuZWwoKS5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlY29udGVudCcpO1xuICAgICAgICAgICAgdmFyIGNvbnQgPSB0aGlzLmdldFBhbmVsKCkucXVlcnlTZWxlY3RvcignLmUtY29udGVudCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxNZXJnZSA9IG5ldyBjZWxsX21lcmdlX3JlbmRlcmVyXzEuQ2VsbE1lcmdlUmVuZGVyKHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICBjZWxsTWVyZ2UudXBkYXRlVmlydHVhbENlbGxzKG1vZGVsRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyAmJiBpZHggPj0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRib2R5ID0gbUNvbnQucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRib2R5ID0gdGhpcy5nZXRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW9kZWxEYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLnJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZ09iai5nZXRSb3dUZW1wbGF0ZSgpKGVqMl9iYXNlXzIuZXh0ZW5kKHsgaW5kZXg6IGkgfSwgZGF0YVNvdXJjZVtpXSksIGdPYmosICdyb3dUZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNUUiA9IGVsZW1lbnRzW2pdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0cic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUUiB8fCAoZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCAmJiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ciA9IGlzVFIgPyBlbGVtZW50c1tqXSA6IGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZnJvemVuUm93cyAmJiBpIDwgZ09iai5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkcmZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKG1vZGVsRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsRGF0YVtpXS5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gdHIucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbDpub3QoLmUtaGlkZSknKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdlLWRldGFpbHJvd3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzLnB1c2godHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5nZXRUYWJsZSgpLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgICAgICB1dGlsXzEuZ2V0VXBkYXRlVXNpbmdSYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBoZHJUYm9keTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0Ym9keSk7XG4gICAgICAgICAgICAgICAgdGJvZHkgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZDb250LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbUNvbnQucXVlcnlTZWxlY3RvcigndGFibGUnKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGRyVGJvZHkgPSBnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKGlkeCA9PT0gMCA/ICcuZS1mcm96ZW5oZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnLmUtbW92YWJsZWhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZHJUYm9keS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGhkclRib2R5LmFwcGVuZENoaWxkKGhkcmZyYWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZDb250LnN0eWxlLmhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgPSAoKG1Db250Lm9mZnNldEhlaWdodCkgLSAxNykgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICBtQ29udC5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXBwZW5kQ29udGVudCh0Ym9keSwgZnJhZywgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plblJvd3MgJiYgIWdPYmouZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBoZHJUYm9keSA9IGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgICAgICAgICBoZHJUYm9keS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaGRyVGJvZHkuYXBwZW5kQ2hpbGQoaGRyZnJhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plblJvd3MgJiYgaWR4ID09PSAwICYmIGNvbnQub2Zmc2V0SGVpZ2h0ID09PSBnT2JqLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBjb250LnN0eWxlLmhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoY29udC5vZmZzZXRIZWlnaHQgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jykub2Zmc2V0SGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plbkNvbHVtbnMgJiYgaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlZnJlc2hDb250ZW50Um93cyhhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aGlzLnJhZkNhbGxiYWNrKGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0Ym9keSwgZnJhZywgYXJncykge1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRQYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0UGFuZWwgPSBmdW5jdGlvbiAocGFuZWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50VGFibGUgPSB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd0VsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93RWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFJvd0VsZW1lbnRzID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldENvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cCA9IGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgICAgIHZhciB0ZXN0Um93O1xuICAgICAgICAgICAgcm93cy5zb21lKGZ1bmN0aW9uIChyKSB7IGlmIChyLmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHRlc3RSb3cgPSByO1xuICAgICAgICAgICAgfSByZXR1cm4gci5pc0RhdGFSb3c7IH0pO1xuICAgICAgICAgICAgdmFyIHRhc2tzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgY2xlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgY2xlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5Ta2lwKGNvbHVtbiwgdGVzdFJvdywgaWR4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlWYWwgPSBjb2x1bW4udmlzaWJsZSA9PT0gdHJ1ZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkTm9kZXNbaWR4XSwgeyAnZGlzcGxheSc6IGRpc3BsYXlWYWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDb250ZW50Um93cyh7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNvbEdyb3VwUmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENvbEdyb3VwKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sR3JvdXAgPSB0aGlzLmdldENvbEdyb3VwKCk7XG4gICAgICAgICAgICAgICAgY29sR3JvdXAuaW5uZXJIVE1MID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVDb250ZW50RHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV8xLkRyb3BwYWJsZShnT2JqLmdldENvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY2FuU2tpcCA9IGZ1bmN0aW9uIChjb2x1bW4sIHJvdywgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJvdykgfHxcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi52aXNpYmxlKSB8fFxuICAgICAgICAgICAgICAgIHJvdy5jZWxsc1tpbmRleF0udmlzaWJsZSA9PT0gY29sdW1uLnZpc2libGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldE1vZGVsR2VuZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyA/IG5ldyBncm91cF9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cE1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KSA6IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eSA9IGZ1bmN0aW9uICh0Ym9keSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24gKHVpZCwgc2V0LCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdGhpcy5nZXRSb3dzKCkuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIGNsZWFyQWxsIHx8IHVpZCA9PT0gcm93LnVpZDsgfSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cuaXNTZWxlY3RlZCA9IHNldDsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbnRlbnRSZW5kZXIgPSBDb250ZW50UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9jZWxsLW1lcmdlLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY29uc3RhbnRfMSwgdXRpbF8xLCBlbnVtXzEsIGNlbGxfbWVyZ2VfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93UmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dSZW5kZXJlcihzZXJ2aWNlTG9jYXRvciwgY2VsbFR5cGUsIHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgYXR0cnM6IHsgcm9sZTogJ3JvdycgfSB9KTtcbiAgICAgICAgICAgIHRoaXMuY2VsbFR5cGUgPSBjZWxsVHlwZTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaFJvdyhyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBpc0NoYW5nZWQsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgcm93LmRhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgcm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lcmdlQ2VsbHMocm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS11aWQ9JyArIHJvdy51aWQgKyAnXScpO1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5yZWZyZXNoUm93KHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW10uc2xpY2UuY2FsbCh0ci5jZWxscyk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsc18xID0gY2VsbHM7IF9pIDwgY2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoUm93ID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciByb3dBcmdzID0geyBkYXRhOiByb3cuZGF0YSB9O1xuICAgICAgICAgICAgdmFyIGNlbGxBcmdzID0geyBkYXRhOiByb3cuZGF0YSB9O1xuICAgICAgICAgICAgdmFyIGF0dHJDb3B5ID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIHt9KTtcbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKHJvdy5pbmRleCkgPiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVGcm9tUm93KHRyLCByb3cpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKHRyLCBhdHRyQ29weSk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKHRyLCByb3cuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyRmFjdCA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvdy5jZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2ldO1xuICAgICAgICAgICAgICAgIGNlbGwuaXNTZWxlY3RlZCA9IHJvdy5pc1NlbGVjdGVkO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXIgPSBjZWxsUmVuZGVyZXJGYWN0LmdldENlbGxSZW5kZXJlcihyb3cuY2VsbHNbaV0uY2VsbFR5cGUgfHwgZW51bV8xLkNlbGxUeXBlLkRhdGEpO1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGNlbGxSZW5kZXJlci5yZW5kZXIocm93LmNlbGxzW2ldLCByb3cuZGF0YSwgeyAnaW5kZXgnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpID8gcm93LmluZGV4LnRvU3RyaW5nKCkgOiAnJyB9KTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmNlbGxzW2ldLmNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGNvbnN0YW50XzEucXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoY2VsbEFyZ3MsIHsgY2VsbDogdGQsIGNvbHVtbjogY2VsbC5jb2x1bW4sIGNvbFNwYW46IDEgfSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbEFyZ3MuY29sU3BhbiA+IDEgfHwgcm93LmNlbGxzW2ldLmNlbGxTcGFuID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxNZXJnZSA9IG5ldyBjZWxsX21lcmdlX3JlbmRlcmVyXzEuQ2VsbE1lcmdlUmVuZGVyKHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkID0gY2VsbE1lcmdlLnJlbmRlcihjZWxsQXJncywgcm93LCBpLCB0ZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFyb3cuY2VsbHNbaV0uaXNTcGFubmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoY29uc3RhbnRfMS5yb3dEYXRhQm91bmQsIGVqMl9iYXNlXzEuZXh0ZW5kKHJvd0FyZ3MsIHsgcm93OiB0ciB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgdHIuY2xhc3NMaXN0LmFkZChyb3cuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaE1lcmdlQ2VsbHMgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcm93LmNlbGxzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNlbGwuaXNTcGFubmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUuYnVpbGRBdHRyaWJ1dGVGcm9tUm93ID0gZnVuY3Rpb24gKHRyLCByb3cpIHtcbiAgICAgICAgICAgIHZhciBhdHRyID0ge307XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHsgJ3Jvd2luZGV4JzogJ2FyaWEtcm93aW5kZXgnLCAnZGF0YVVJRCc6ICdkYXRhLXVpZCcsICdhcmlhU2VsZWN0ZWQnOiAnYXJpYS1zZWxlY3RlZCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1yb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNBbHRSb3cpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtYWx0cm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocm93LmluZGV4KSkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5yb3dpbmRleF0gPSByb3cuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnJvd1NwYW4pIHtcbiAgICAgICAgICAgICAgICBhdHRyLnJvd1NwYW4gPSByb3cucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cudWlkKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmRhdGFVSURdID0gcm93LnVpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5hcmlhU2VsZWN0ZWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0ci5jbGFzcyA9IGNsYXNzZXM7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKHRyLCBhdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd1JlbmRlcmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dSZW5kZXJlciA9IFJvd1JlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFR5cGU7XG4gICAgKGZ1bmN0aW9uIChDZWxsVHlwZSkge1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRhdGFcIl0gPSAwXSA9IFwiRGF0YVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkhlYWRlclwiXSA9IDFdID0gXCJIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJTdW1tYXJ5XCJdID0gMl0gPSBcIlN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cFN1bW1hcnlcIl0gPSAzXSA9IFwiR3JvdXBTdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiQ2FwdGlvblN1bW1hcnlcIl0gPSA0XSA9IFwiQ2FwdGlvblN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJGaWx0ZXJcIl0gPSA1XSA9IFwiRmlsdGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSW5kZW50XCJdID0gNl0gPSBcIkluZGVudFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwQ2FwdGlvblwiXSA9IDddID0gXCJHcm91cENhcHRpb25cIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cENhcHRpb25FbXB0eVwiXSA9IDhdID0gXCJHcm91cENhcHRpb25FbXB0eVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkV4cGFuZFwiXSA9IDldID0gXCJFeHBhbmRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJIZWFkZXJJbmRlbnRcIl0gPSAxMF0gPSBcIkhlYWRlckluZGVudFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIlN0YWNrZWRIZWFkZXJcIl0gPSAxMV0gPSBcIlN0YWNrZWRIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEZXRhaWxIZWFkZXJcIl0gPSAxMl0gPSBcIkRldGFpbEhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRldGFpbEV4cGFuZFwiXSA9IDEzXSA9IFwiRGV0YWlsRXhwYW5kXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiQ29tbWFuZENvbHVtblwiXSA9IDE0XSA9IFwiQ29tbWFuZENvbHVtblwiO1xuICAgIH0pKENlbGxUeXBlID0gZXhwb3J0cy5DZWxsVHlwZSB8fCAoZXhwb3J0cy5DZWxsVHlwZSA9IHt9KSk7XG4gICAgdmFyIFJlbmRlclR5cGU7XG4gICAgKGZ1bmN0aW9uIChSZW5kZXJUeXBlKSB7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIkhlYWRlclwiXSA9IDBdID0gXCJIZWFkZXJcIjtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiQ29udGVudFwiXSA9IDFdID0gXCJDb250ZW50XCI7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIlN1bW1hcnlcIl0gPSAyXSA9IFwiU3VtbWFyeVwiO1xuICAgIH0pKFJlbmRlclR5cGUgPSBleHBvcnRzLlJlbmRlclR5cGUgfHwgKGV4cG9ydHMuUmVuZGVyVHlwZSA9IHt9KSk7XG4gICAgdmFyIFRvb2xiYXJJdGVtO1xuICAgIChmdW5jdGlvbiAoVG9vbGJhckl0ZW0pIHtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJBZGRcIl0gPSAwXSA9IFwiQWRkXCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiRWRpdFwiXSA9IDFdID0gXCJFZGl0XCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiVXBkYXRlXCJdID0gMl0gPSBcIlVwZGF0ZVwiO1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIkRlbGV0ZVwiXSA9IDNdID0gXCJEZWxldGVcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJDYW5jZWxcIl0gPSA0XSA9IFwiQ2FuY2VsXCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiUHJpbnRcIl0gPSA1XSA9IFwiUHJpbnRcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJTZWFyY2hcIl0gPSA2XSA9IFwiU2VhcmNoXCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiQ29sdW1uQ2hvb3NlclwiXSA9IDddID0gXCJDb2x1bW5DaG9vc2VyXCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiUGRmRXhwb3J0XCJdID0gOF0gPSBcIlBkZkV4cG9ydFwiO1xuICAgICAgICBUb29sYmFySXRlbVtUb29sYmFySXRlbVtcIkV4Y2VsRXhwb3J0XCJdID0gOV0gPSBcIkV4Y2VsRXhwb3J0XCI7XG4gICAgICAgIFRvb2xiYXJJdGVtW1Rvb2xiYXJJdGVtW1wiQ3N2RXhwb3J0XCJdID0gMTBdID0gXCJDc3ZFeHBvcnRcIjtcbiAgICAgICAgVG9vbGJhckl0ZW1bVG9vbGJhckl0ZW1bXCJXb3JkRXhwb3J0XCJdID0gMTFdID0gXCJXb3JkRXhwb3J0XCI7XG4gICAgfSkoVG9vbGJhckl0ZW0gPSBleHBvcnRzLlRvb2xiYXJJdGVtIHx8IChleHBvcnRzLlRvb2xiYXJJdGVtID0ge30pKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2VudW0uanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxNZXJnZVJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxNZXJnZVJlbmRlcihzZXJ2aWNlTG9jYXRvciwgcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsQXJncywgcm93LCBpLCB0ZCkge1xuICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlckZhY3QgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXIgPSBjZWxsUmVuZGVyZXJGYWN0LmdldENlbGxSZW5kZXJlcihyb3cuY2VsbHNbaV0uY2VsbFR5cGUgfHwgZW51bV8xLkNlbGxUeXBlLkRhdGEpO1xuICAgICAgICAgICAgdmFyIHNwYW4gPSByb3cuY2VsbHNbaV0uY2VsbFNwYW4gPyByb3cuY2VsbHNbaV0uY2VsbFNwYW4gOlxuICAgICAgICAgICAgICAgIChjZWxsQXJncy5jb2xTcGFuICsgaSkgPD0gcm93LmNlbGxzLmxlbmd0aCA/IGNlbGxBcmdzLmNvbFNwYW4gOiByb3cuY2VsbHMubGVuZ3RoIC0gaTtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IGkgKyBzcGFuICYmIGogPCByb3cuY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmNlbGxzW2pdLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxsc1tqXS5pc1NwYW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aXNpYmxlID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpICsgc3BhbjsgaiA8IGkgKyBzcGFuICsgdmlzaWJsZSAmJiBqIDwgcm93LmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxsc1tqXS5pc1NwYW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaSArIHNwYW4gKyB2aXNpYmxlID49IHJvdy5jZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3BhbiAtPSAoaSArIHNwYW4gKyB2aXNpYmxlKSAtIHJvdy5jZWxscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5jZWxsc1tpXS5jZWxsU3Bhbikge1xuICAgICAgICAgICAgICAgIHJvdy5kYXRhW2NlbGxBcmdzLmNvbHVtbi5maWVsZF0gPSByb3cuY2VsbHNbaV0uc3BhblRleHQ7XG4gICAgICAgICAgICAgICAgdGQgPSBjZWxsUmVuZGVyZXIucmVuZGVyKHJvdy5jZWxsc1tpXSwgcm93LmRhdGEsIHsgJ2luZGV4JzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocm93LmluZGV4KSA/IHJvdy5pbmRleC50b1N0cmluZygpIDogJycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGQsIHsgJ2NvbFNwYW4nOiBzcGFuLnRvU3RyaW5nKCksICdhcmlhLWNvbFNwYW4nOiBzcGFuLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgIXJvdy5jZWxsc1tpXS5jZWxsU3BhbiAmJlxuICAgICAgICAgICAgICAgICF0aGlzLmNvbnRhaW5zS2V5KGNlbGxBcmdzLmNvbHVtbi5maWVsZCwgY2VsbEFyZ3MuZGF0YVtjZWxsQXJncy5jb2x1bW4uZmllbGRdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja3VwTWVyZ2VDZWxscyhjZWxsQXJncy5jb2x1bW4uZmllbGQsIGNlbGxBcmdzLmRhdGFbY2VsbEFyZ3MuY29sdW1uLmZpZWxkXSwgY2VsbEFyZ3MuY29sU3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGQ7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuYmFja3VwTWVyZ2VDZWxscyA9IGZ1bmN0aW9uIChmTmFtZSwgZGF0YSwgc3Bhbikge1xuICAgICAgICAgICAgdGhpcy5zZXRNZXJnZUNlbGxzKHRoaXMuZ2VuZXJ0ZUtleShmTmFtZSwgZGF0YSksIHNwYW4pO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLmdlbmVydGVLZXkgPSBmdW5jdGlvbiAoZm5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBmbmFtZSArICdfXycgKyBkYXRhLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuc3BsaXRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5LnNwbGl0KCdfXycpO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKGZuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXJnZUNlbGxzKCkuaGFzT3duUHJvcGVydHkodGhpcy5nZW5lcnRlS2V5KGZuYW1lLCBkYXRhKSk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuZ2V0TWVyZ2VDZWxscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5tZXJnZUNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLnNldE1lcmdlQ2VsbHMgPSBmdW5jdGlvbiAoa2V5LCBzcGFuKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5tZXJnZUNlbGxzW2tleV0gPSBzcGFuO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLnVwZGF0ZVZpcnR1YWxDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgbUNlbGxzID0gdGhpcy5nZXRNZXJnZUNlbGxzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobUNlbGxzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG1DZWxsc1trZXldO1xuICAgICAgICAgICAgICAgIHZhciBtZXJnZSA9IHRoaXMuc3BsaXRLZXkoa2V5KTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSB0aGlzLmdldEluZGV4RnJvbUFsbENvbHVtbnMobWVyZ2VbMF0pO1xuICAgICAgICAgICAgICAgIHZhciB2Q29sdW1uSW5kaWNlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IHZhbHVlIC0gKHZDb2x1bW5JbmRpY2VzWzBdIC0gY29sdW1uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5JbmRleCA8IHZDb2x1bW5JbmRpY2VzWzBdICYmIHNwYW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgcm93c18xID0gcm93czsgX2IgPCByb3dzXzEubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19iXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZGF0YVttZXJnZVswXV0udG9TdHJpbmcoKSA9PT0gbWVyZ2VbMV0udG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxsc1swXS5jZWxsU3BhbiA9IHNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzWzBdLnNwYW5UZXh0ID0gbWVyZ2VbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5nZXRJbmRleEZyb21BbGxDb2x1bW5zID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2VsbE1lcmdlUmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsTWVyZ2VSZW5kZXIgPSBDZWxsTWVyZ2VSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1tZXJnZS1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCByb3dfMSwgZW51bV8xLCBjZWxsXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24gPyBhcmdzLnN0YXJ0SW5kZXggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aDsgaSA8IGxlbjsgaSsrLCBzdGFydEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhkYXRhW2ldLCBzdGFydEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZW5zdXJlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29scy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsRXhwYW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGRhdGEsIGluZGV4LCBjc3NDbGFzcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgb3B0aW9ucy51aWQgPSB1dGlsXzEuZ2V0VWlkKCdncmlkLXJvdycpO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgb3B0aW9ucy5pc0RhdGFSb3cgPSB0cnVlO1xuICAgICAgICAgICAgb3B0aW9ucy5jc3NDbGFzcyA9IGNzc0NsYXNzO1xuICAgICAgICAgICAgb3B0aW9ucy5pc0FsdFJvdyA9IHRoaXMucGFyZW50LmVuYWJsZUFsdFJvdyA/IGluZGV4ICUgMiAhPT0gMCA6IGZhbHNlO1xuICAgICAgICAgICAgb3B0aW9ucy5pc1NlbGVjdGVkID0gdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkuaW5kZXhPZihpbmRleCkgPiAtMTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IHRoaXMuZW5zdXJlQ29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSBjZWxscy5jb25jYXQodGhpcy5nZW5lcmF0ZUNlbGxzKG9wdGlvbnMpKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGxzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHVtbWllcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIGR1bW1pZXMuZm9yRWFjaChmdW5jdGlvbiAoZHVtbXksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRtcC5wdXNoKF90aGlzLmdlbmVyYXRlQ2VsbChkdW1teSwgb3B0aW9ucy51aWQsIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZHVtbXkuY29tbWFuZHMpID8gdW5kZWZpbmVkIDogZW51bV8xLkNlbGxUeXBlLkNvbW1hbmRDb2x1bW4sIG51bGwsIGluZGV4KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCByb3dJZCwgY2VsbFR5cGUsIGNvbFNwYW4sIG9JbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpZWxkIHx8IGNvbHVtbi50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdyb3dJRCc6IHJvd0lkLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbFR5cGUpID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRGF0YSxcbiAgICAgICAgICAgICAgICAnY29sU3Bhbic6IGNvbFNwYW4sXG4gICAgICAgICAgICAgICAgJ2NvbW1hbmRzJzogY29sdW1uLmNvbW1hbmRzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdC5pc0RhdGFDZWxsIHx8IG9wdC5jb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIG9wdC5pbmRleCA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaFJvd3MgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5jZWxscyA9IF90aGlzLmdlbmVyYXRlQ2VsbHMocm93KTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93TW9kZWxHZW5lcmF0b3IgPSBSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvdyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvdyhvcHRpb25zKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvdyA9IFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvcm93LmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTcGFubmVkID0gZmFsc2U7XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsID0gQ2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfMSwgZWoyX2Jhc2VfMSwgZW51bV8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwTW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnN1bW1hcnlNb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5jYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzLmNhbGwodGhpcywgZGF0YSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/ICh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqIGRhdGEucmVjb3Jkcy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKDAsIGRhdGFbaV0sIGRhdGEubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHcm91cGVkUmVjb3JkcyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSwgcmF3KSB7XG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSByYXc7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkYXRhLml0ZW1zKSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEuR3JvdXBHdWlkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KHRoaXMuZ2VuZXJhdGVEYXRhUm93cyhkYXRhLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoaW5kZXgsIGRhdGFbal0sIGRhdGEubGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2FwdGlvblJvdyhkYXRhLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLml0ZW1zICYmIGRhdGEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoaW5kZXggKyAxLCBkYXRhLml0ZW1zLCBkYXRhLml0ZW1zLmxldmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMucm93cykucHVzaC5hcHBseShfYSwgdGhpcy5zdW1tYXJ5TW9kZWxHZW4uZ2VuZXJhdGVSb3dzKGRhdGEsIHsgbGV2ZWw6IGxldmVsIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENhcHRpb25Sb3dDZWxscyA9IGZ1bmN0aW9uIChmaWVsZCwgaW5kZW50LCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaWJsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5wYXJlbnQuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGZpZWxkOyB9KVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBncm91cGVkTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgbnVsbCwgZW51bV8xLkNlbGxUeXBlLkV4cGFuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZW50ID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyAxIDpcbiAgICAgICAgICAgICAgICAodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggKyBncm91cGVkTGVuICsgKGdPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ09iai5jaGlsZEdyaWQgPyAxIDogMCkgLVxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKyAodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggPyAtMSA6IDApKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmxlbmd0aCAmJiAhdGhpcy5jYXB0aW9uTW9kZWxHZW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcHRpb25DZWxscyA9IHRoaXMuY2FwdGlvbk1vZGVsR2VuLmdlbmVyYXRlUm93cyhkYXRhKVswXTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChkYXRhLCBjYXB0aW9uQ2VsbHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIGNJbmRleF8xID0gMDtcbiAgICAgICAgICAgICAgICBjYXB0aW9uQ2VsbHMuY2VsbHMuc29tZShmdW5jdGlvbiAoY2VsbCwgaW5kZXgpIHsgY0luZGV4XzEgPSBpbmRleDsgcmV0dXJuIGNlbGwudmlzaWJsZSAmJiBjZWxsLmlzRGF0YUNlbGw7IH0pO1xuICAgICAgICAgICAgICAgIHZpc2libGVzID0gY2FwdGlvbkNlbGxzLmNlbGxzLnNsaWNlKGNJbmRleF8xKS5maWx0ZXIoZnVuY3Rpb24gKGNlbGwpIHsgcmV0dXJuIGNlbGwudmlzaWJsZTsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhcHRpb25DZWxscy52aXNpYmxlICYmIHZpc2libGVzWzBdLmNvbHVtbi5maWVsZCA9PT0gdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKVswXS5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IHZpc2libGVzLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50IC0gdmlzaWJsZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHMgPSAoIXRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gW2NvbHVtbl0gOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdmFyIHdGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbHMuZm9yRWFjaChmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciB0bXBGbGFnID0gd0ZsYWcgJiYgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgIT09IC0xO1xuICAgICAgICAgICAgICAgIGlmICh0bXBGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjZWxsVHlwZSA9ICFfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgdG1wRmxhZyA/XG4gICAgICAgICAgICAgICAgICAgIGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24gOiBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uRW1wdHk7XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uID8gaW5kZW50ICsgZ3JvdXBlZExlbiA6IGluZGVudDtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKF90aGlzLmdlbmVyYXRlQ2VsbChjb2x1bW4sIG51bGwsIGNlbGxUeXBlLCBpbmRlbnQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2VsbHMucHVzaC5hcHBseShjZWxscywgdmlzaWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNhcHRpb25Sb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZGF0YS5maWVsZCk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGF0YSk7XG4gICAgICAgICAgICBpZiAoY29sKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmZpZWxkID0gZGF0YS5maWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuaXNEYXRhUm93ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdldENhcHRpb25Sb3dDZWxscyhkYXRhLmZpZWxkLCBpbmRlbnQsIHJvdy5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlRGF0YVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHRoaXMuaW5kZXgsIGkgPyB1bmRlZmluZWQgOiAnZS1maXJzdGNoaWxkcm93JywgaW5kZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGluZGVudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaW5kZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMudW5zaGlmdCh0aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlSW5kZW50Q2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgbnVsbCwgZW51bV8xLkNlbGxUeXBlLkluZGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnJlZnJlc2hSb3dzID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSBfdGhpcy5nZW5lcmF0ZUNlbGxzKHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93LmluZGVudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihyb3cuaW5kZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscy51bnNoaWZ0KF90aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNSb3cgPSBfdGhpcy5nZW5lcmF0ZUNhcHRpb25Sb3cocm93LmRhdGEsIHJvdy5pbmRlbnQpO1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSBjUm93LmNlbGxzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBNb2RlbEdlbmVyYXRvcjtcbiAgICB9KHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuR3JvdXBNb2RlbEdlbmVyYXRvciA9IEdyb3VwTW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBjb2x1bW5fMSwgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlbnVtXzEsIGNlbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSByb3cuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShjb2x1bW4uZm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgX3RoaXMuY29sdW1uU2VsZWN0b3IoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHsgY29sdW1uczogY29sdW1ucyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGNvbHVtbnMucHVzaChuZXcgY29sdW1uXzEuQ29sdW1uKHt9KSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKG5ldyBjb2x1bW5fMS5Db2x1bW4oe30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbnMucHVzaC5hcHBseShjb2x1bW5zLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGlucHV0LCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuYnVpbGRTdW1tYXJ5RGF0YShpbnB1dCwgYXJncyk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXREYXRhKCkuZm9yRWFjaChmdW5jdGlvbiAocm93LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJvd3MucHVzaChfdGhpcy5nZXRHZW5lcmF0ZWRSb3cocm93LCBkYXRhW2luZGV4XSwgYXJncyA/IGFyZ3MubGV2ZWwgOiB1bmRlZmluZWQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R2VuZXJhdGVkUm93ID0gZnVuY3Rpb24gKHN1bW1hcnlSb3csIGRhdGEsIHJhdykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRzID0gdGhpcy5nZXRJbmRlbnRCeUxldmVsKHJhdyk7XG4gICAgICAgICAgICB2YXIgaW5kZW50TGVuZ3RoID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCArICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSA/IDEgOiAwKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2V0R2VuZXJhdGVkQ2VsbCh2YWx1ZSwgc3VtbWFyeVJvdywgaW5kZXggPj0gaW5kZW50TGVuZ3RoID8gX3RoaXMuZ2V0Q2VsbFR5cGUoKSA6IGVudW1fMS5DZWxsVHlwZS5JbmRlbnQsIGluZGVudHNbaW5kZXhdKSk7IH0pO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3coeyBkYXRhOiBkYXRhLCBhdHRyaWJ1dGVzOiB7IGNsYXNzOiAnZS1zdW1tYXJ5cm93JyB9IH0pO1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdG1wO1xuICAgICAgICAgICAgcm93LnZpc2libGUgPSB0bXAuc29tZShmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC5pc0RhdGFDZWxsICYmIGNlbGwudmlzaWJsZTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdlbmVyYXRlZENlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBzdW1tYXJ5Um93LCBjZWxsVHlwZSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgc0NvbHVtbiA9IHN1bW1hcnlSb3cuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKHNjb2x1bW4pIHsgcmV0dXJuIHNjb2x1bW4uY29sdW1uTmFtZSA9PT0gY29sdW1uLmZpZWxkOyB9KVswXTtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IHsgJ3N0eWxlJzogeyAndGV4dEFsaWduJzogY29sdW1uLnRleHRBbGlnbiB9IH07XG4gICAgICAgICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgICAgICAgICAgYXR0cnMuY2xhc3MgPSBpbmRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzQ29sdW1uKSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6IHNDb2x1bW4gJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc0NvbHVtbi5mb290ZXJUZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICB8fCBzQ29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgc0NvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IHNDb2x1bW4gfHwge30sXG4gICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZXMnOiBhdHRycyxcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5idWlsZFN1bW1hcnlEYXRhID0gZnVuY3Rpb24gKGRhdGEsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHVtbXkgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdW1tYXJ5Um93cyA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIHNpbmdsZSA9IHt9O1xuICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuICAgICAgICAgICAgc3VtbWFyeVJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgc2luZ2xlID0ge307XG4gICAgICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZSA9IF90aGlzLnNldFRlbXBsYXRlKGNvbHVtbiwgKGFyZ3MgJiYgYXJncy5hZ2dyZWdhdGVzKSA/IGFyZ3MgOiBkYXRhLCBzaW5nbGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGR1bW15LnB1c2goc2luZ2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGR1bW15O1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEluZGVudEJ5TGV2ZWwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gJ2UtaW5kZW50Y2VsbHRvcCc7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnNldFRlbXBsYXRlID0gZnVuY3Rpb24gKGNvbHVtbiwgZGF0YSwgc2luZ2xlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGU7XG4gICAgICAgICAgICB2YXIgaGVscGVyID0ge307XG4gICAgICAgICAgICB2YXIgZm9ybWF0Rm4gPSBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhOyB9OyB9KSgpO1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gZGF0YTtcbiAgICAgICAgICAgIGlmICghKHR5cGVzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgdHlwZXMgPSBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjb2x1bW4uZmllbGQgKyAnIC0gJyArIHR5cGU7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3AgPSBjb2x1bW4uY29sdW1uTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gZ3JvdXAuYWdncmVnYXRlcyAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChncm91cC5hZ2dyZWdhdGVzW2tleV0pID8gZ3JvdXAuYWdncmVnYXRlc1trZXldIDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBncm91cC5hZ2dyZWdhdGVzID8gZ3JvdXAucmVzdWx0IDogZGF0YSwgY29sdW1uLCBfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXSA9IHNpbmdsZVtkaXNwXSB8fCB7fTtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1ba2V5XSA9IHZhbDtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1bdHlwZV0gPSBmb3JtYXRGbih2YWwpO1xuICAgICAgICAgICAgICAgIGlmIChncm91cC5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0uZmllbGQgPSBncm91cC5maWVsZDtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdLmtleSA9IGdyb3VwLmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlbHBlci5mb3JtYXQgPSBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICBjb2x1bW4uc2V0VGVtcGxhdGUoaGVscGVyKTtcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGU7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLlN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAodiwgaW5keCkgeyByZXR1cm4gaW5keCA8PSBsZXZlbCAtIDEgPyAnJyA6ICdlLWluZGVudGNlbGx0b3AnOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluaXRWYWwgPSB7IGNvbHVtbnM6IFtdIH07XG4gICAgICAgICAgICByZXR1cm4gW19zdXBlci5wcm90b3R5cGUuZ2V0RGF0YS5jYWxsKHRoaXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXYuY29sdW1ucyA9IHByZXYuY29sdW1ucy5jb25jYXQoY3VyLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICB9LCBpbml0VmFsKV07XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZ2V0RGF0YSgpWzBdLmNvbHVtbnMgfHwgW10pLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vYWN0aW9ucy9jaGVja2JveC1maWx0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCB1dGlsXzEsIGV2ZW50cywgdmFsdWVfZm9ybWF0dGVyXzEsIGNoZWNrYm94X2ZpbHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEYXRhID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGF0YShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuaW5pdERhdGFNYW5hZ2VyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd3NSZW1vdmVkLCB0aGlzLnJlbW92ZVJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5pbml0RGF0YU1hbmFnZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYWRkRGVsZXRlQWN0aW9uLCB0aGlzLmdldERhdGEsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERhdGEucHJvdG90eXBlLmluaXREYXRhTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyID0gZ09iai5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/IGdPYmouZGF0YVNvdXJjZSA6XG4gICAgICAgICAgICAgICAgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5kYXRhU291cmNlKSA/IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKCkgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihnT2JqLmRhdGFTb3VyY2UpKTtcbiAgICAgICAgICAgIGdPYmoucXVlcnkgPSBnT2JqLnF1ZXJ5IGluc3RhbmNlb2YgZWoyX2RhdGFfMS5RdWVyeSA/IGdPYmoucXVlcnkgOiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKHNraXBQYWdlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gZ09iai5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgJiYgZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJlZGljYXRlcyA9IGNoZWNrYm94X2ZpbHRlcl8xLkNoZWNrQm94RmlsdGVyLmdldFByZWRpY2F0ZShnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJlZGljYXRlcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmQgPSAnYW5kJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBwcmVkaWNhdGVzW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocHJlZGljYXRlKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlW2FuZF0ob2JqKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHByZWRpY2F0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9iIDwgY29sdW1uc18xLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHVtbnNfMVtfYl07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc1R5cGUgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sLmZpZWxkKS50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNUeXBlICE9PSAnZGF0ZScgJiYgc1R5cGUgIT09ICdkYXRldGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS53aGVyZShjb2wuZmllbGQsIGNvbC5vcGVyYXRvciwgY29sLnZhbHVlLCAhY29sLm1hdGNoQ2FzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS53aGVyZSh0aGlzLmdldERhdGVQcmVkaWNhdGUoY29sKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNTZXR0aW5ncyA9IGdPYmouc2VhcmNoU2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgc1NldHRpbmdzLmZpZWxkcyA9IHNTZXR0aW5ncy5maWVsZHMubGVuZ3RoID8gc1NldHRpbmdzLmZpZWxkcyA6IGdPYmouZ2V0Q29sdW1uRmllbGROYW1lcygpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnNlYXJjaChzU2V0dGluZ3Mua2V5LCBzU2V0dGluZ3MuZmllbGRzLCBzU2V0dGluZ3Mub3BlcmF0b3IsIHNTZXR0aW5ncy5pZ25vcmVDYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGUgaW5zdGFuY2VvZiBBcnJheSA/IGNvbHVtbi50eXBlIDogW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gcXVlcnkuYWdncmVnYXRlKHR5cGUsIGNvbHVtbi5maWVsZCk7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKGdPYmouYWxsb3dTb3J0aW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykgJiYgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdmFyIHNvcnRHcnAgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1ucy5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5zW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnNvcnRCeShjb2x1bW5zW2ldLmZpZWxkLCBjb2x1bW5zW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0R3JwLnB1c2goY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvcnRHcnAubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuc29ydEJ5KHNvcnRHcnBbaV0uZmllbGQsIHNvcnRHcnBbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGdPYmouYWxsb3dQYWdpbmcgfHwgZ09iai5lbmFibGVWaXJ0dWFsaXphdGlvbikgJiYgc2tpcFBhZ2UgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wYWdlKGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlLCBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzR3JwRm10ID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbnNbaV0pLmVuYWJsZUdyb3VwQnlGb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpXSkuZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNHcnBGbXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lmdyb3VwKGNvbHVtbnNbaV0sIHRoaXMuZm9ybWF0R3JvdXBDb2x1bW4uYmluZCh0aGlzKSwgZm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lmdyb3VwKGNvbHVtbnNbaV0sIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKGFyZ3MsIHF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0geyByZXF1ZXN0VHlwZTogJycgfTsgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KGFyZ3MuZm9yZWlnbktleURhdGEgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhcmdzLmZvcmVpZ25LZXlEYXRhKS5sZW5ndGggP1xuICAgICAgICAgICAgICAgIGFyZ3MuZm9yZWlnbktleURhdGEgOiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5yZXF1ZXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgPyBxdWVyeSA6IHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLnJlbW92ZShrZXksIGFyZ3MuZGF0YVswXSwgbnVsbCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuaW5zZXJ0KGFyZ3MuZGF0YSwgbnVsbCwgcXVlcnksIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFNYW5hZ2VyLnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlYWR5ID0gdGhpcy5kYXRhTWFuYWdlci5yZWFkeTtcbiAgICAgICAgICAgICAgICByZWFkeS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGFNYW5hZ2VyID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25GYWlsdXJlLCB7IGVycm9yOiBlIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YU1hbmFnZXIuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZm9ybWF0R3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAodmFsdWUsIGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlcnZpY2VMb2NhdG9yID0gdGhpcy5zZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGRhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghY29sdW1uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4udHlwZSA9IGRhdGUuZ2V0RGF5ID8gKGRhdGUuZ2V0SG91cnMoKSA+IDAgfHwgZGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuZ2V0U2Vjb25kcygpID4gMCB8fCBkYXRlLmdldE1pbGxpc2Vjb25kcygpID4gMCA/ICdkYXRldGltZScgOiAnZGF0ZScpIDogdHlwZW9mICh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkpKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldEZvcm1hdHRlcihzZXJ2aWNlTG9jYXRvciwgY29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmb3JtYXRWYWwgPSB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUudG9WaWV3KHZhbHVlLCBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuY3J1ZEFjdGlvbnMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcHIgPSAncHJvbWlzZSc7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoYXJncy5mb3JlaWduS2V5RGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFyZ3MuZm9yZWlnbktleURhdGEpLmxlbmd0aCA/IGFyZ3MuZm9yZWlnbktleURhdGEgOlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCkpO1xuICAgICAgICAgICAgc3dpdGNoIChhcmdzLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLmRhdGFNYW5hZ2VyLnVwZGF0ZShrZXksIGFyZ3MuZGF0YSwgbnVsbCwgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3NbcHJdID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY3J1ZEFjdGlvbiwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMsIGtleSkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDaGFuZ2VzKGNoYW5nZXMsIGtleSwgbnVsbCwgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgaWYgKGtleXMgJiYga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5c1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmlzUmVtb3RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5vZmZsaW5lICE9PSB0cnVlICYmIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS51cmwgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0RGF0ZVByZWRpY2F0ZSA9IGZ1bmN0aW9uIChmaWx0ZXJPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBkYXRlUHJlZGljYXRlO1xuICAgICAgICAgICAgdmFyIHByZXZEYXRlO1xuICAgICAgICAgICAgdmFyIG5leHREYXRlO1xuICAgICAgICAgICAgdmFyIHByZXZPYmogPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXMoZmlsdGVyT2JqZWN0KSk7XG4gICAgICAgICAgICB2YXIgbmV4dE9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG5ldyBEYXRlKGZpbHRlck9iamVjdC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnIHx8IGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ25vdGVxdWFsJykge1xuICAgICAgICAgICAgICAgIHByZXZEYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgLSAxKSk7XG4gICAgICAgICAgICAgICAgbmV4dERhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSArIDIpKTtcbiAgICAgICAgICAgICAgICBwcmV2T2JqLnZhbHVlID0gcHJldkRhdGU7XG4gICAgICAgICAgICAgICAgbmV4dE9iai52YWx1ZSA9IG5leHREYXRlO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdncmVhdGVydGhhbic7XG4gICAgICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdub3RlcXVhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdsZXNzdGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgICAgICAgICBuZXh0T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGVTdCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShwcmV2T2JqLmZpZWxkLCBwcmV2T2JqLm9wZXJhdG9yLCBwcmV2T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZUVuZCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShuZXh0T2JqLmZpZWxkLCBuZXh0T2JqLm9wZXJhdG9yLCBuZXh0T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgZGF0ZVByZWRpY2F0ZSA9IGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJyA/IHByZWRpY2F0ZVN0LmFuZChwcmVkaWNhdGVFbmQpIDogcHJlZGljYXRlU3Qub3IocHJlZGljYXRlRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGVzID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZXZPYmouZmllbGQsIHByZXZPYmoub3BlcmF0b3IsIHByZXZPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkYXRlUHJlZGljYXRlID0gcHJlZGljYXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRlUHJlZGljYXRlO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5hZGRSb3dzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBlLnJlY29yZHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24uc3BsaWNlKGUudG9JbmRleCwgMCwgZS5yZWNvcmRzW2kgLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLnJlbW92ZVJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbjtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uID0ganNvbi5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gZS5yZWNvcmRzLmluZGV4T2YodmFsdWUpID09PSAtMTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd3NBZGRlZCwgdGhpcy5hZGRSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucmVtb3ZlUm93cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5pbml0RGF0YU1hbmFnZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVwZGF0ZURhdGEsIHRoaXMuY3J1ZEFjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5hZGREZWxldGVBY3Rpb24sIHRoaXMuZ2V0RGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEYXRhO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EYXRhID0gRGF0YTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZWoyX2Jhc2VfMiwgZWoyX2RhdGFfMSwgZWoyX2J1dHRvbnNfMSwgZXZlbnRzLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgdXRpbF8yLCBlajJfcG9wdXBzXzEsIGVqMl9pbnB1dHNfMSwgZWoyX3BvcHVwc18yLCB1dGlsXzMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENoZWNrQm94RmlsdGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2hlY2tCb3hGaWx0ZXIocGFyZW50LCBmaWx0ZXJTZXR0aW5ncywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdENvbnN0YW50cyA9IHtcbiAgICAgICAgICAgICAgICBTZWFyY2g6ICdTZWFyY2gnLFxuICAgICAgICAgICAgICAgIE9LOiAnT0snLFxuICAgICAgICAgICAgICAgIENhbmNlbDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgRmlsdGVyOiAnRmlsdGVyJyxcbiAgICAgICAgICAgICAgICBDbGVhcjogJ0NsZWFyJyxcbiAgICAgICAgICAgICAgICBTZWxlY3RBbGw6ICdTZWxlY3QgQWxsJyxcbiAgICAgICAgICAgICAgICBCbGFua3M6ICdCbGFua3MnLFxuICAgICAgICAgICAgICAgIFRydWU6ICdUcnVlJyxcbiAgICAgICAgICAgICAgICBGYWxzZTogJ0ZhbHNlJyxcbiAgICAgICAgICAgICAgICBOb1Jlc3VsdDogJ05vIE1hdGNoZXMgRm91bmQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY0JveFRydWUgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KGZhbHNlLCB7IGNoZWNrZWQ6IHRydWUsIGxhYmVsOiAnICcgfSk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZSA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3goZmFsc2UsIHsgY2hlY2tlZDogZmFsc2UsIGxhYmVsOiAnICcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcih0aGlzLnBhcmVudC5sb2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxlKHRoaXMuZGVmYXVsdENvbnN0YW50cyk7XG4gICAgICAgICAgICB0aGlzLmNCb3hUcnVlLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hrLWhpZGRlbicsIGF0dHJzOiB7IHR5cGU6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgfSksIHRoaXMuY0JveFRydWUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNoay1oaWRkZW4nLCBhdHRyczogeyAndHlwZSc6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgfSksIHRoaXMuY0JveEZhbHNlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5jQm94RmFsc2UucXVlcnlTZWxlY3RvcignLmUtZnJhbWUnKS5jbGFzc0xpc3QuYWRkKCdlLXVuY2hlY2snKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFt0aGlzLmNCb3hUcnVlLCB0aGlzLmNCb3hGYWxzZV0sIFsnZS1ydGwnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmluaXRMb2NhbGUgPSBmdW5jdGlvbiAoY29uc3RhbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV8xLkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdENvbnN0YW50cywgdGhpcy5wYXJlbnQubG9jYWxlIHx8ICdlbi1VUycpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5kbGcsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZy5xdWVyeVNlbGVjdG9yKCcuZS1zZWFyY2hpbnB1dCcpLCAna2V5dXAnLCB0aGlzLnNlYXJjaEJveEtleVVwLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmRsZywgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLmRsZy5xdWVyeVNlbGVjdG9yKCcuZS1zZWFyY2hpbnB1dCcpO1xuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlbSwgJ2tleXVwJywgdGhpcy5zZWFyY2hCb3hLZXlVcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5zZWFyY2hCb3hDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zZWFyY2hjbGVhcicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDaGVja2JveGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hJY29uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnNlYXJjaEJveEtleVVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94ZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoSWNvbigpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlU2VhcmNoSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNJbnB1dC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0aGlzLnNJY29uLCBbJ2UtY2hrY2FuY2VsLWljb24nXSwgWydlLXNlYXJjaC1pY29uJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGhpcy5zSWNvbiwgWydlLXNlYXJjaC1pY29uJ10sIFsnZS1jaGtjYW5jZWwtaWNvbiddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmdldExvY2FsaXplZExhYmVsID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlT2JqLmdldENvbnN0YW50KGtleSk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVEYXRhU291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgIGlmICghKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFTb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbdGhpcy5vcHRpb25zLmZpZWxkXSA9IGRhdGFTb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlW2ldID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kYXRhU291cmNlID0gb3B0aW9ucy5kYXRhU291cmNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhU291cmNlKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAnc3RyaW5nJztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCAnJztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMgPSBvcHRpb25zLmZpbHRlcmVkQ29sdW1ucyB8fCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNvcnRlZENvbHVtbnMgPSBvcHRpb25zLnNvcnRlZENvbHVtbnMgfHwgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucXVlcnkgPSBvcHRpb25zLnF1ZXJ5IHx8IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWxsb3dDYXNlU2Vuc2l0aXZlID0gb3B0aW9ucy5hbGxvd0Nhc2VTZW5zaXRpdmUgfHwgZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5pc0ZpbHRlcmVkID0gb3B0aW9ucy5maWx0ZXJlZENvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQodGhpcy5kZWZhdWx0Q29uc3RhbnRzLCBvcHRpb25zLmxvY2FsaXplZFN0cmluZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0QW5kU2V0Q2hrRWxlbSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmRsZyA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkICsgdGhpcy5vcHRpb25zLnR5cGUgKyAnX2V4Y2VsRGxnJyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNoZWNrYm94ZmlsdGVyIGUtZmlsdGVyLXBvcHVwJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNCb3ggPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zZWFyY2hjb250YWluZXInIH0pO1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmhpZGVTZWFyY2hib3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNJbnB1dCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkICsgJ19TZWFyY2hCb3gnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXNlYXJjaGlucHV0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc0ljb24gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utc2VhcmNoY2xlYXIgZS1zZWFyY2gtaWNvbiBlLWljb25zJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ1NlYXJjaCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zZWFyY2hib3ggZS1maWVsZHMnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94LmFwcGVuZENoaWxkKHRoaXMuc0lucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNCb3guYXBwZW5kQ2hpbGQodGhpcy5zZWFyY2hCb3gpO1xuICAgICAgICAgICAgICAgIGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuc0lucHV0LCBmbG9hdExhYmVsVHlwZTogJ05ldmVyJywgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ1NlYXJjaCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJveC5xdWVyeVNlbGVjdG9yKCcuZS1pbnB1dC1ncm91cCcpLmFwcGVuZENoaWxkKHRoaXMuc0ljb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zcGlubmVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3Bpbm5lcicgfSk7XG4gICAgICAgICAgICB0aGlzLmNCb3ggPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCArIHRoaXMub3B0aW9ucy50eXBlICsgJ19DaGVja0JveExpc3QnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hlY2tib3hsaXN0IGUtZmllbGRzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNwaW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5jQm94KTtcbiAgICAgICAgICAgIHRoaXMuc0JveC5hcHBlbmRDaGlsZCh0aGlzLnNwaW5uZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc0JveDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6IGV2ZW50cy5maWx0ZXJCZWZvcmVPcGVuLCBmaWx0ZXJNb2RlbDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLm9wdGlvbnMuZmllbGQsIGNvbHVtblR5cGU6IHRoaXMub3B0aW9ucy50eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsIGNvbnRlbnQ6IHRoaXMuc0JveCxcbiAgICAgICAgICAgICAgICBjbG9zZTogdGhpcy5jbG9zZURpYWxvZy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodXRpbF8xLnBhcmVudHNVbnRpbChvcHRpb25zLnRhcmdldCwgJ2UtYmlnZ2VyJykpKVxuICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXZpY2UnKSA/IDI2MCA6IDI1MCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMucGFyZW50LmVsZW1lbnQsIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmJ0bkNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmdldExvY2FsaXplZExhYmVsKHRoaXMuaXNFeGNlbCA/ICdPSycgOiAnRmlsdGVyJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0JywgY29udGVudDogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCh0aGlzLmlzRXhjZWwgPyAnQ2FuY2VsJyA6ICdDbGVhcicpIH1cbiAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5kaWFsb2dDcmVhdGVkLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5kaWFsb2dPcGVuLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouYXBwZW5kVG8odGhpcy5kbGcpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnODAwcHgnO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouc2hvdygpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzIuY3JlYXRlU3Bpbm5lcih7IHRhcmdldDogdGhpcy5zcGlubmVyIH0pO1xuICAgICAgICAgICAgZWoyX3BvcHVwc18yLnNob3dTcGlubmVyKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgICAgICB0aGlzLmdldEFsbERhdGEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmRpYWxvZ0NyZWF0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzMuZ2V0RmlsdGVyTWVudVBvc3Rpb24odGhpcy5vcHRpb25zLnRhcmdldCwgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5maWx0ZXJEaWFsb2dDcmVhdGVkLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLm9wZW5EaWFsb2cgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QW5kU2V0Q2hrRWxlbShvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZyhvcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmNsb3NlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nT2JqICYmICF0aGlzLmRpYWxvZ09iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZmlsdGVyTWVudUNsb3NlLCB7IGZpZWxkOiB0aGlzLm9wdGlvbnMuZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5kbGcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmJ0bkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZS50YXJnZXQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCh0aGlzLmlzRXhjZWwgPyAnT0snIDogJ0ZpbHRlcicpLnRvTG93ZXJDYXNlKCkgPT09IHRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdHJCdG5IYW5kbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmdldExvY2FsaXplZExhYmVsKCdDbGVhcicpLnRvTG93ZXJDYXNlKCkgPT09IHRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaGFuZGxlcih7IGFjdGlvbjogJ2NsZWFyLWZpbHRlcicsIGZpZWxkOiB0aGlzLm9wdGlvbnMuZmllbGQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5mbHRyQnRuSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gW10uc2xpY2UuY2FsbCh0aGlzLmNCb3gucXVlcnlTZWxlY3RvckFsbCgnLmUtY2hlY2s6bm90KC5lLXNlbGVjdGFsbCknKSk7XG4gICAgICAgICAgICB2YXIgb3B0ciA9ICdlcXVhbCc7XG4gICAgICAgICAgICB2YXIgY2FzZVNlbiA9IHRoaXMub3B0aW9ucy50eXBlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFsbG93Q2FzZVNlbnNpdGl2ZSA6IHRydWU7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMub3B0aW9ucy5maWVsZCwgcHJlZGljYXRlOiAnb3InLFxuICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBvcHRyLCBtYXRjaGNhc2U6IGNhc2VTZW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaXNOb3RFcXVhbCA9IHRoaXMuaXRlbXNDbnQgIT09IGNoZWNrZWQubGVuZ3RoICYmIHRoaXMuaXRlbXNDbnQgLSBjaGVja2VkLmxlbmd0aCA8IGNoZWNrZWQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGlzTm90RXF1YWwpIHtcbiAgICAgICAgICAgICAgICBvcHRyID0gJ25vdGVxdWFsJztcbiAgICAgICAgICAgICAgICBjaGVja2VkID0gW10uc2xpY2UuY2FsbCh0aGlzLmNCb3gucXVlcnlTZWxlY3RvckFsbCgnLmUtdW5jaGVjazpub3QoLmUtc2VsZWN0YWxsKScpKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0cy5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgICAgICBkZWZhdWx0cy5vcGVyYXRvciA9ICdub3RlcXVhbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgZk9iajtcbiAgICAgICAgICAgIHZhciBjb2xsID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzW3V0aWxfMS5wYXJlbnRzVW50aWwoY2hlY2tlZFtpXSwgJ2UtZnRyY2hrJykuZ2V0QXR0cmlidXRlKCd1aWQnKV07XG4gICAgICAgICAgICAgICAgZk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB7IHZhbHVlOiB2YWx1ZSB9LCBkZWZhdWx0cyk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICF2YWx1ZS50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBmT2JqLm9wZXJhdG9yID0gaXNOb3RFcXVhbCA/ICdub3RlcXVhbCcgOiAnZXF1YWwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xsLnB1c2godGhpcy5vcHRpb25zLnR5cGUgPT09ICdkYXRlJyA/IENoZWNrQm94RmlsdGVyLnNldERhdGVPYmplY3QoZk9iaikgOiBmT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVGaWx0ZXIoY29sbCk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5pbml0aWF0ZUZpbHRlciA9IGZ1bmN0aW9uIChmQ29sbCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0VmFsID0gZkNvbGxbMF07XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZpcnN0VmFsKSkge1xuICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IGZpcnN0VmFsLmVqcHJlZGljYXRlID8gZmlyc3RWYWwuZWpwcmVkaWNhdGUgOlxuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoZmlyc3RWYWwuZmllbGQsIGZpcnN0VmFsLm9wZXJhdG9yLCBmaXJzdFZhbC52YWx1ZSwgIWZpcnN0VmFsLm1hdGNoY2FzZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBmQ29sbC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBmQ29sbFtqXS5lanByZWRpY2F0ZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZVtmQ29sbFtqXS5wcmVkaWNhdGVdKGZDb2xsW2pdLmVqcHJlZGljYXRlKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbZkNvbGxbal0ucHJlZGljYXRlXShmQ29sbFtqXS5maWVsZCwgZkNvbGxbal0ub3BlcmF0b3IsIGZDb2xsW2pdLnZhbHVlLCAhZkNvbGxbal0ubWF0Y2hjYXNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2ZpbHRlcmluZycsIGZpbHRlckNvbGxlY3Rpb246IGZDb2xsLCBmaWVsZDogdGhpcy5vcHRpb25zLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBlanByZWRpY2F0ZTogZWoyX2RhdGFfMS5QcmVkaWNhdGUub3IocHJlZGljYXRlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmhhbmRsZXIoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5yZWZyZXNoQ2hlY2tib3hlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnNJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMub3B0aW9ucy5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9ICh0aGlzLm9wdGlvbnMudHlwZSAhPT0gJ3N0cmluZycgJiYgcGFyc2VGbG9hdCh2YWwpKSA/IHBhcnNlRmxvYXQodmFsKSA6IHZhbDtcbiAgICAgICAgICAgIHZhciBvcGVyYXRvciA9ICdjb250YWlucyc7XG4gICAgICAgICAgICB2YXIgbWF0Y2hjYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHBhcnNlZCA9IChwYXJzZWQgPT09ICcnIHx8IHBhcnNlZCA9PT0gdW5kZWZpbmVkKSA/IHVuZGVmaW5lZCA6IHBhcnNlZDtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ1RydWUnKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocGFyc2VkLnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0ZhbHNlJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKHBhcnNlZC50b0xvd2VyQ2FzZSgpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gJ2ZhbHNlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR5cGUgPT09ICdkYXRlJyB8fCB0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgIHBhcnNlZCA9IHRoaXMudmFsdWVGb3JtYXR0ZXIuZnJvbVZpZXcodmFsLCB0aGlzLm9wdGlvbnMucGFyc2VyRm4sIHRoaXMub3B0aW9ucy50eXBlKTtcbiAgICAgICAgICAgICAgICBvcGVyYXRvciA9ICdlcXVhbCc7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocGFyc2VkKSAmJiB2YWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHRoaXMub3B0aW9ucy5maWVsZCwgb3BlcmF0b3IsIHBhcnNlZCwgbWF0Y2hjYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RhdGFTb3VyY2UocXVlcnkpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0UHJlZGljYXRlRnJvbUNvbHMgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVzID0gQ2hlY2tCb3hGaWx0ZXIuZ2V0UHJlZGljYXRlKGNvbHVtbnMpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKHByZWRpY2F0ZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBhbmQgPSAnYW5kJztcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gcHJlZGljYXRlc1twcm9wXTtcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwcmVkaWNhdGUpID9cbiAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlW2FuZF0ob2JqKSA6XG4gICAgICAgICAgICAgICAgICAgIG9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGU7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRBbGxEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICBxdWVyeS5yZXF1aXJlc0NvdW50KCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlLmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFTdWNjZXNzKGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmRhdGFTdWNjZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZnVsbERhdGEgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICBpZiAoKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9wdGlvbnMuZmlsdGVyZWRDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsdGVyZWRDb2x1bW5zW2ldLmZpZWxkICE9PSB0aGlzLm9wdGlvbnMuZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHMucHVzaCh0aGlzLm9wdGlvbnMuZmlsdGVyZWRDb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gdGhpcy5nZXRQcmVkaWNhdGVGcm9tQ29scyhjb2xzKTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHByZWRpY2F0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVlcnkuc2VsZWN0KHRoaXMub3B0aW9ucy5maWVsZCk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5mdWxsRGF0YSkuZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciByZXMgPSBDaGVja0JveEZpbHRlci5nZXREaXN0aW5jdChyZXN1bHQsIHRoaXMub3B0aW9ucy5maWVsZCk7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IHJlcy5yZWNvcmRzO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YVNvdXJjZShudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQWZ0ZXJPcGVuLFxuICAgICAgICAgICAgICAgIGZpbHRlck1vZGVsOiB0aGlzLCBjb2x1bW5OYW1lOiB0aGlzLm9wdGlvbnMuZmllbGQsIGNvbHVtblR5cGU6IHRoaXMub3B0aW9ucy50eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0RhdGFTb3VyY2UgPSBmdW5jdGlvbiAocXVlcnksIGlzSW5pdGlhbCkge1xuICAgICAgICAgICAgZWoyX3BvcHVwc18yLnNob3dTcGlubmVyKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLm9wdGlvbnMucXVlcnkuY2xvbmUoKTtcbiAgICAgICAgICAgIHF1ZXJ5LnJlcXVpcmVzQ291bnQoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQ2hvaWNlUmVxdWVzdCwgZmlsdGVyTW9kZWw6IHRoaXMsIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLmZpbHRlcmVkRGF0YVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihhcmdzLmRhdGFTb3VyY2UpLmV4ZWN1dGVMb2NhbChhcmdzLnF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGaWx0ZXJJdGVtcyhyZXMucmVzdWx0LCBpc0luaXRpYWwpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlUmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLmdldFByZWRpY2F0ZUZyb21Db2xzKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS53aGVyZShwcmVkaWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMuZnVsbERhdGEpLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJlc3VsdF8xID0gcmVzdWx0OyBfaSA8IHJlc3VsdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHRfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRbcmVzW3RoaXMub3B0aW9ucy5maWVsZF1dID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1jaGVja2JveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXNlYXJjaGJveCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3hDbGljayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdEFsbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmUtc2VsZWN0YWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdEFsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENCb3hlcyghc2VsZWN0QWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVjaycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMy50b29nbGVDaGVja2JveChlbGVtLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGVuQnRuKCk7XG4gICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1jaGstaGlkZGVuJykuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUFsbENCb3hlcyA9IGZ1bmN0aW9uIChjaGVja2VkKSB7XG4gICAgICAgICAgICB2YXIgY0JveGVzID0gW10uc2xpY2UuY2FsbCh0aGlzLmNCb3gucXVlcnlTZWxlY3RvckFsbCgnLmUtZnJhbWUnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNCb3hlc18xID0gY0JveGVzOyBfaSA8IGNCb3hlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjQm94ID0gY0JveGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2NCb3hdLCBbJ2UtY2hlY2snLCAnZS1zdG9wJywgJ2UtdW5jaGVjayddKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBjQm94LmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2snKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNCb3guY2xhc3NMaXN0LmFkZCgnZS11bmNoZWNrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGlhbG9nT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXZpY2UnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaW5wdXQtZ3JvdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1idG4nKS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuY3JlYXRlQ2hlY2tib3ggPSBmdW5jdGlvbiAodmFsdWUsIGNoZWNrZWQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gY2hlY2tlZCA/IHRoaXMuY0JveFRydWUuY2xvbmVOb2RlKHRydWUpIDpcbiAgICAgICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLWxhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPyB2YWx1ZSA6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnQmxhbmtzJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICBhcmdzW3RoaXMub3B0aW9ucy5maWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obGFiZWwsIHRoaXMub3B0aW9ucy50ZW1wbGF0ZShhcmdzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUluZGV0ZXJtaW5hdGVuQnRuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNudCA9IHRoaXMuY0JveC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLmNCb3gucXVlcnlTZWxlY3RvcignLmUtc2VsZWN0YWxsJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLmNCb3gucXVlcnlTZWxlY3RvckFsbCgnLmUtY2hlY2s6bm90KC5lLXNlbGVjdGFsbCknKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgYnRuID0gdGhpcy5kbGcucXVlcnlTZWxlY3RvcignLmUtZm9vdGVyLWNvbnRlbnQnKS5xdWVyeVNlbGVjdG9yKCcuZS1idG4nKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY250ID09PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFsnZS1jaGVjayddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBbJ2Utc3RvcCddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2VsZW1dLCBbJ2UtY2hlY2snLCAnZS1zdG9wJywgJ2UtdW5jaGVjayddKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2VsZW1dLCBjbGFzc05hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuY3JlYXRlRmlsdGVySXRlbXMgPSBmdW5jdGlvbiAoZGF0YSwgaXNJbml0aWFsKSB7XG4gICAgICAgICAgICB2YXIgY0JveGVzID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNDbnQgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCB8fCBpc0luaXRpYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0QWxsID0gdXRpbF8zLmNyZWF0ZUNib3hXaXRoV3JhcCh1dGlsXzEuZ2V0VWlkKCdjYm94JyksIHRoaXMuY3JlYXRlQ2hlY2tib3godGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VsZWN0QWxsJyksIGZhbHNlKSwgJ2UtZnRyY2hrJyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0QWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyYW1lJykuY2xhc3NMaXN0LmFkZCgnZS1zZWxlY3RhbGwnKTtcbiAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQoc2VsZWN0QWxsKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNDb2xGaWx0ZXJlZCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKCdmaWVsZCcsICdlcXVhbCcsIHRoaXMub3B0aW9ucy5maWVsZCkpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IHV0aWxfMS5nZXRVaWQoJ2Nib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNbdWlkXSA9IGRhdGFbaV1bdGhpcy5vcHRpb25zLmZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZUZvcm1hdHRlci50b1ZpZXcoZGF0YVtpXVt0aGlzLm9wdGlvbnMuZmllbGRdLCB0aGlzLm9wdGlvbnMuZm9ybWF0Rm4pO1xuICAgICAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQodXRpbF8zLmNyZWF0ZUNib3hXaXRoV3JhcCh1aWQsIHRoaXMuY3JlYXRlQ2hlY2tib3godmFsdWUsIHRoaXMuZ2V0Q2hlY2tlZFN0YXRlKGlzQ29sRmlsdGVyZWQsIHRoaXMudmFsdWVzW3VpZF0pKSwgJ2UtZnRyY2hrJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNCb3guaW5uZXJIVE1MID0gY0JveGVzLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGVuQnRuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjQm94ZXMuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBpbm5lckhUTUw6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ05vUmVzdWx0JykgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY0JveC5pbm5lckhUTUwgPSBjQm94ZXMuaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiBldmVudHMuZmlsdGVyQ2hvaWNlUmVxdWVzdCwgZmlsdGVyTW9kZWw6IHRoaXMsIGRhdGFTb3VyY2U6IGRhdGEgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMi5oaWRlU3Bpbm5lcih0aGlzLnNwaW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0Q2hlY2tlZFN0YXRlID0gZnVuY3Rpb24gKGlzQ29sRmlsdGVyZWQsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNGaWx0ZXJlZCB8fCAhaXNDb2xGaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0W3ZhbHVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuZ2V0RGlzdGluY3QgPSBmdW5jdGlvbiAoanNvbiwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBqc29uLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBlalZhbHVlID0gJ2VqVmFsdWUnO1xuICAgICAgICAgICAgdmFyIGxvb2t1cCA9IHt9O1xuICAgICAgICAgICAgd2hpbGUgKGxlbi0tKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBqc29uW2xlbl07XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSA/XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlW2ZpZWxkXSA6IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodmFsdWUgaW4gbG9va3VwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2VqVmFsdWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFt2YWx1ZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfZGF0YV8xLkRhdGFVdGlsLmdyb3VwKGVqMl9kYXRhXzEuRGF0YVV0aWwuc29ydChyZXN1bHQsIGZpZWxkLCBlajJfZGF0YV8xLkRhdGFVdGlsLmZuQXNjZW5kaW5nKSwgJ2VqVmFsdWUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuc2V0RGF0ZU9iamVjdCA9IGZ1bmN0aW9uIChmaWx0ZXJPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBwcmV2T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMi5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIG5leHRPYmogPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8yLmdldEFjdHVhbFByb3BlcnRpZXMoZmlsdGVyT2JqZWN0KSk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBuZXcgRGF0ZShmaWx0ZXJPYmplY3QudmFsdWUpO1xuICAgICAgICAgICAgdmFyIHByZXZEYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgLSAxKSk7XG4gICAgICAgICAgICB2YXIgbmV4dERhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSArIDIpKTtcbiAgICAgICAgICAgIHByZXZPYmoudmFsdWUgPSBwcmV2RGF0ZTtcbiAgICAgICAgICAgIG5leHRPYmoudmFsdWUgPSBuZXh0RGF0ZTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcpIHtcbiAgICAgICAgICAgICAgICBuZXh0T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFuJztcbiAgICAgICAgICAgICAgICBuZXh0T2JqLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgICAgIHByZXZPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW4nO1xuICAgICAgICAgICAgICAgIHByZXZPYmoucHJlZGljYXRlID0gJ2FuZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdub3RlcXVhbCcpIHtcbiAgICAgICAgICAgICAgICBuZXh0T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5wcmVkaWNhdGUgPSAnb3InO1xuICAgICAgICAgICAgICAgIHByZXZPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW5vcmVxdWFsJztcbiAgICAgICAgICAgICAgICBwcmV2T2JqLnByZWRpY2F0ZSA9ICdvcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlU3QgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUocHJldk9iai5maWVsZCwgcHJldk9iai5vcGVyYXRvciwgcHJldk9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZUVuZCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShuZXh0T2JqLmZpZWxkLCBuZXh0T2JqLm9wZXJhdG9yLCBuZXh0T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICBmaWx0ZXJPYmplY3QuZWpwcmVkaWNhdGUgPSBmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcgPyBwcmVkaWNhdGVTdC5hbmQocHJlZGljYXRlRW5kKSA6XG4gICAgICAgICAgICAgICAgcHJlZGljYXRlU3Qub3IocHJlZGljYXRlRW5kKTtcbiAgICAgICAgICAgIGZpbHRlck9iamVjdC50eXBlID0gJ2RhdGUnO1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlck9iamVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuZ2V0UHJlZGljYXRlID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gQ2hlY2tCb3hGaWx0ZXIuZ2V0RGlzdGluY3QoY29sdW1ucywgJ2ZpZWxkJykucmVjb3JkcztcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHByZWQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihjb2x1bW5zKS5leGVjdXRlTG9jYWwobmV3IGVqMl9kYXRhXzEuUXVlcnkoKS53aGVyZSgnZmllbGQnLCAnZXF1YWwnLCBjb2xzW2ldLmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgcHJlZFtjb2xzW2ldLmZpZWxkXSA9IENoZWNrQm94RmlsdGVyLmdlbmVyYXRlUHJlZGljYXRlKGNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLmdlbmVyYXRlUHJlZGljYXRlID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBjb2xzID8gY29scy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZTtcbiAgICAgICAgICAgIHZhciBmaXJzdDtcbiAgICAgICAgICAgIGZpcnN0ID0gQ2hlY2tCb3hGaWx0ZXIudXBkYXRlRGF0ZUZpbHRlcihjb2xzWzBdKTtcbiAgICAgICAgICAgIGlmIChmaXJzdC50eXBlID09PSAnZGF0ZScgfHwgZmlyc3QudHlwZSA9PT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IENoZWNrQm94RmlsdGVyLmdldERhdGVQcmVkaWNhdGUoZmlyc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlZGljYXRlID0gZmlyc3QuZWpwcmVkaWNhdGUgPyBmaXJzdC5lanByZWRpY2F0ZSA6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShmaXJzdC5maWVsZCwgZmlyc3Qub3BlcmF0b3IsIGZpcnN0LnZhbHVlLCBmaXJzdC5pZ25vcmVDYXNlIHx8ICFmaXJzdC5tYXRjaGNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgcCA9IDE7IHAgPCBsZW47IHArKykge1xuICAgICAgICAgICAgICAgIGNvbHNbcF0gPSBDaGVja0JveEZpbHRlci51cGRhdGVEYXRlRmlsdGVyKGNvbHNbcF0pO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAyICYmIHAgPiAxICYmIGNvbHNbcF0ucHJlZGljYXRlID09PSAnb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzW3BdLnR5cGUgPT09ICdkYXRlJyB8fCBjb2xzW3BdLnR5cGUgPT09ICdkYXRldGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZS5wcmVkaWNhdGVzLnB1c2goQ2hlY2tCb3hGaWx0ZXIuZ2V0RGF0ZVByZWRpY2F0ZShjb2xzW3BdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUucHJlZGljYXRlcy5wdXNoKG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShjb2xzW3BdLmZpZWxkLCBjb2xzW3BdLm9wZXJhdG9yLCBjb2xzW3BdLnZhbHVlLCBjb2xzW3BdLmlnbm9yZUNhc2UgfHwgIWNvbHNbcF0ubWF0Y2hjYXNlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzW3BdLnR5cGUgPT09ICdkYXRlJyB8fCBjb2xzW3BdLnR5cGUgPT09ICdkYXRldGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IHByZWRpY2F0ZVsoY29sc1twXS5wcmVkaWNhdGUpXShDaGVja0JveEZpbHRlci5nZXREYXRlUHJlZGljYXRlKGNvbHNbcF0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IGNvbHNbcF0uZWpwcmVkaWNhdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZVtjb2xzW3BdLnByZWRpY2F0ZV0oY29sc1twXS5lanByZWRpY2F0ZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZVsoY29sc1twXS5wcmVkaWNhdGUpXShjb2xzW3BdLmZpZWxkLCBjb2xzW3BdLm9wZXJhdG9yLCBjb2xzW3BdLnZhbHVlLCBjb2xzW3BdLmlnbm9yZUNhc2UgfHwgIWNvbHNbcF0ubWF0Y2hjYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUgfHwgbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuZ2V0RGF0ZVByZWRpY2F0ZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUocHJlZGljYXRlLmZpZWxkLCBwcmVkaWNhdGUub3BlcmF0b3IsIHByZWRpY2F0ZS52YWx1ZSwgcHJlZGljYXRlLmlnbm9yZUNhc2UgfHwgIXByZWRpY2F0ZS5tYXRjaGNhc2UpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci51cGRhdGVEYXRlRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xuICAgICAgICAgICAgaWYgKGZpbHRlci50eXBlICE9PSAnZGF0ZScgJiYgIShmaWx0ZXIudmFsdWUgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWydlcXVhbCcsICdub3RlcXVhbCddLmluZGV4T2YoZmlsdGVyLm9wZXJhdG9yKSA9PT0gLTEgPyBmaWx0ZXIgOlxuICAgICAgICAgICAgICAgIENoZWNrQm94RmlsdGVyLnNldERhdGVPYmplY3QoZmlsdGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NoZWNrYm94RmlsdGVyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENoZWNrQm94RmlsdGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DaGVja0JveEZpbHRlciA9IENoZWNrQm94RmlsdGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMjNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuL3Jvdy1yZW5kZXJlclwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVudW1fMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfMSwgcm93XzEsIGV2ZW50cywgZWoyX2Jhc2VfNCwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnY2xvbmUgZS1oZWFkZXJjbG9uZScgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcmNlbGxkaXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeVVpZChoZWFkZXJjZWxsZGl2LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuaGVhZGVyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuaGVhZGVyVGVtcGxhdGUuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5pbm5lckhUTUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbC5oZWFkZXJUZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuaW5uZXJIVE1MID0gY29sLmhlYWRlclRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gaGVhZGVyY2VsbGRpdiA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkJ5VWlkKGhlYWRlcmNlbGxkaXYuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuaGVhZGVyVGV4dCA6IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gKGhlaWdodCAtIDYpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh2aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZXN0IHx8IGNsb3Nlc3QuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXJlb3JkZXJ1cGFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcmRvd25hcnJvdycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiBlLnRhcmdldCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGV2ZW50OiBlLmV2ZW50IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGlmICgoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSAmJiAhdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWdPYmouYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCFlLmhlbHBlci5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0b3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZXZlbnQ6IGUuZXZlbnQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBjYW5jZWw6IGNhbmNlbCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgfHxcbiAgICAgICAgICAgICAgICAgICAgIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmhlYWRlckRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgdWlkOiB1aWQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3dpZHRoU2VydmljZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVUksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjb250ZW50JyB9KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyVGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKGhlYWRlckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyb3AoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7IHJvd3M6IHRoaXMucm93cyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS50SGVhZC5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyB9IH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHRoZWFkID0gZmluZEhlYWRlclJvdy50aGVhZDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7IGNsYXNzTmFtZTogJ2UtaGlkZScgfSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgcm93Qm9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBib2R5Q2VsbDtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5yb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3dzW2ldLmNlbGxzW2pdO1xuICAgICAgICAgICAgICAgICAgICBib2R5Q2VsbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgcm93Qm9keS5hcHBlbmRDaGlsZChib2R5Q2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgfHwgZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgnZS1zb3J0ZmlsdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvd0JvZHkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRhYmxlLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgICAgICB2YXIgY29sSGVhZGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1jb2x1bW5oZWFkZXInIH0pO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIGdPYmopO1xuICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGNvbEhlYWRlcjtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93O1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMuZ2V0T2JqRGVwdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhpKTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5lbnN1cmVDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMuZ2V0SGVhZGVyQ2VsbHMocm93cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb2xEZXB0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93ID0gcm93UmVuZGVyZXIucmVuZGVyKHJvd3NbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHtcbiAgICAgICAgICAgICAgICB0aGVhZDogdGhlYWQsXG4gICAgICAgICAgICAgICAgcm93czogcm93c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmaW5kSGVhZGVyUm93O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUoY29sLCB7ICdkaXNwbGF5JzogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmVuc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW5fMiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbl8yOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoYykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKSAmJiB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5wYXJlbnQuY29sdW1ucy5zbGljZSh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zLCB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLnNsaWNlKDAsIHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICA6ICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zID8gY29sdW1uIDogdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZENlbGxzKGNvbHNbaV0sIHJvd3MsIDAsIGkgPT09IDAsIGZhbHNlLCBpID09PSAobGVuIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ2VsbHMgPSBmdW5jdGlvbiAoY29scywgcm93cywgaW5kZXgsIGlzRmlyc3RPYmosIGlzRmlyc3RDb2wsIGlzTGFzdENvbCkge1xuICAgICAgICAgICAgdmFyIGxhc3RDb2wgPSBpc0xhc3RDb2wgPyAnZS1sYXN0Y2VsbCcgOiAnJztcbiAgICAgICAgICAgIGlmICghY29scy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbCA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENudChjb2xzLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sU3Bhbikge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29scy5jb2x1bW5zW2ldLCByb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHJvd18xLlJvdyh7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2xJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0LnJvd1NwYW4gfHwgb3B0LnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZ2V0Um93cygpKTtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gJyc7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIGlkeCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYWwgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkTm9kZXNbaWR4XSwgeyAnZGlzcGxheSc6IGRpc3BsYXlWYWwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNoaWxkKHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgdGFibGUuaW5zZXJ0QmVmb3JlKGZpbmRIZWFkZXJSb3cudGhlYWQsIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCksIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZENvbnRlbnQodGFibGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2xHcm91cFJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVIZWFkZXJEcmFnKCk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dzXzEgPSByb3dzOyBfaSA8IHJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZ0NlbGxzID0gW10uc2xpY2UuY2FsbChyb3cucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXB0b3BsZWZ0Y2VsbCcpKTtcbiAgICAgICAgICAgICAgICBpZiAoZ0NlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnQ2VsbHNbZ0NlbGxzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2UtbGFzdGdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgeyByb3dzOiB0aGlzLnJvd3MgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dUZXh0V3JhcCAmJiB0aGlzLnBhcmVudC50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlID09PSAnaGVhZGVyJykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHJvd3MsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRPYmpEZXB0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sc1tpXSwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA8IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRlcHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXggKyAxO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNoZWNrRGVwdGggPSBmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Q2VsbENudCA9IGZ1bmN0aW9uIChjb2wsIGNudCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNudCA9IHRoaXMuZ2V0Q2VsbENudChjb2wuY29sdW1uc1tpXSwgY250KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY250Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNudDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5hbGxvd1Jlb3JkZXJpbmcgfHwgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbChnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaGVhZGVyUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnID0gbmV3IGVqMl9iYXNlXzQuRHJhZ2dhYmxlKGhlYWRlclJvd3NbaV0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWhlYWRlcmNlbGwnLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6ICcuZS1yaGFuZGxlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV80LkRyb3BwYWJsZShnT2JqLmdldEhlYWRlckNvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlclJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSGVhZGVyUmVuZGVyID0gSGVhZGVyUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5yb3dDaGtCb3ggPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWNoZWNrc2VsZWN0JywgYXR0cnM6IHsgJ3R5cGUnOiAnY2hlY2tib3gnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXplciA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlciA9IGxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0dGVyLnRvVmlldyh2YWx1ZSwgY29sdW1uLmdldEZvcm1hdHRlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpdGVyYWxzID0gWydpbmRleCddO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNlbGwuY29sdW1uLmdldENvbHVtblRlbXBsYXRlKCkoZWoyX2Jhc2VfMS5leHRlbmQoeyAnaW5kZXgnOiBhdHRyaWJ1dGVzW2xpdGVyYWxzWzBdXSB9LCBkYXRhKSwgdGhpcy5wYXJlbnQsICd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lclRleHQgKyAnIGlzIHRlbXBsYXRlIGNlbGwnICsgJyBjb2x1bW4gaGVhZGVyICcgK1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5pbnZva2VGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5kb2VzSW1wbGVtZW50SW50ZXJmYWNlKGNvbHVtbi5mb3JtYXR0ZXIsICdnZXRWYWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBjb2x1bW4uZm9ybWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBmb3JtYXR0ZXIoKS5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29sdW1uLmZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbHVtbi5mb3JtYXR0ZXIoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlci5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFREID0gZnVuY3Rpb24gKHRkLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbm5lckh0bWwgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShjb2x1bW4uZmllbGQsIGRhdGEsIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmZvcm1hdChjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHZhciBpc051bGwgPSAodmFsdWUgIT09ICd0cnVlJyAmJiB2YWx1ZSAhPT0gJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5kaXNwbGF5QXNDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2tib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sID0gaXNOdWxsID8gbnVsbCA6ICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZGlzYWJsZWQgJyArICcvPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxlU3RyID0gaXNOdWxsID8gbnVsbCA6IHZhbHVlID09PSAndHJ1ZScgPyAnVHJ1ZScgOiAnRmFsc2UnO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckh0bWwgPSBsb2NhbGVTdHIgPyB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudChsb2NhbGVTdHIpIDogaW5uZXJIdG1sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmcm9tRm9ybWF0dGVyID0gdGhpcy5pbnZva2VGb3JtYXR0ZXIoY29sdW1uLCB2YWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICBpbm5lckh0bWwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZm9ybWF0dGVyKSA/IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZnJvbUZvcm1hdHRlcikgPyAnJyA6IGZyb21Gb3JtYXR0ZXIudG9TdHJpbmcoKSA6IGlubmVySHRtbDtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaW5uZXJIdG1sICsgJyBjb2x1bW4gaGVhZGVyICcgKyBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV2YWx1YXRlKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpICYmIGNvbHVtbi50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVySHRtbCwgY29sdW1uLmdldERvbVNldHRlciA/IGNvbHVtbi5nZXREb21TZXR0ZXIoKSA6ICdpbm5lckhUTUwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWdyaWRjaGtib3gnKTtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdjb2x1bW4gaGVhZGVyICcgKyBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3ggPSB0aGlzLnJvd0Noa0JveC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICBjaGVja0JveC5pZCA9ICdjaGVja3NlbGVjdF8nICsgY2VsbC5yb3dJRC5zcGxpdCgnZ3JpZC1yb3cnKVsxXTtcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNoZWNrQm94KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgZWoyX2J1dHRvbnNfMS5DaGVja0JveCh7IGNoZWNrZWQ6IHZhbHVlIH0pLmFwcGVuZFRvKGNoZWNrQm94KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgZGlzYWJsZWQ6IHRydWUsIGNoZWNrZWQ6IHZhbHVlID09PSAndHJ1ZScgfSk7XG4gICAgICAgICAgICAgICAgb2JqLmFwcGVuZFRvKG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwsIHByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IHZvaWQgMCkgeyBwcm9wZXJ0eSA9ICdpbm5lckhUTUwnOyB9XG4gICAgICAgICAgICBub2RlW3Byb3BlcnR5XSA9IGlubmVySHRtbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnRleHRBbGlnbiA9IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnY2xpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGNsaXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2VsbGlwc2lzd2l0aHRvb2x0aXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCkge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAnY29saW5kZXgnOiAnYXJpYS1jb2xpbmRleCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5jb2xTcGFuID0gY2VsbC5jb2xTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IGNlbGwucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtdGVtcGxhdGVjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoLmFwcGx5KGNsYXNzZXMsIFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmNvbGluZGV4XSA9IGNlbGwuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi52YWx1ZUFjY2Vzc29yKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyID0gQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEsIGFyaWFfc2VydmljZV8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwnLCBhdHRyczogeyByb2xlOiAnY29sdW1uaGVhZGVyJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIF90aGlzLmFyaWFTZXJ2aWNlID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICBfdGhpcy5oVHh0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcnRleHQnIH0pO1xuICAgICAgICAgICAgX3RoaXMuc29ydEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXNvcnRmaWx0ZXJkaXYgZS1pY29ucycgfSk7XG4gICAgICAgICAgICBfdGhpcy5ndWkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgX3RoaXMuY2hrQWxsQm94ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1jaGVja3NlbGVjdGFsbCcsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3VpLmNsb25lTm9kZSgpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBmbHRyTWVudUVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcm1lbnVkaXYgZS1pY29ucyBlLWljb24tZmlsdGVyJyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSwgZmx0ck1lbnVFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoY2VsbCwgbm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhbihub2RlKTtcbiAgICAgICAgICAgIHZhciBmbHRyTWVudUVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcm1lbnVkaXYgZS1pY29ucyBlLWljb24tZmlsdGVyJyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSwgZmx0ck1lbnVFbGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUhlYWRlciA9IGZ1bmN0aW9uIChjZWxsLCBub2RlLCBmbHRyTWVudUVsZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyID0ge307XG4gICAgICAgICAgICB2YXIgaW5uZXJESVYgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgJ2UtbWFwcGluZ3VpZCc6IGNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtaGVhZGVyY2VsbGRpdidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlclRleHQgPSB0aGlzLmhUeHRFbGUuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGV4dFtjb2x1bW4uZ2V0RG9tU2V0dGVyKCldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4uZWRpdFR5cGUgPSAnYm9vbGVhbmVkaXQnO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0FsbEJveCA9IHRoaXMuY2hrQWxsQm94LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGNoZWNrQWxsQm94KTtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tBbGxCb3hPYmogPSBuZXcgZWoyX2J1dHRvbnNfMS5DaGVja0JveCgpO1xuICAgICAgICAgICAgICAgIGNoZWNrQWxsQm94T2JqLmFwcGVuZFRvKGNoZWNrQWxsQm94KTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5jbGFzc0xpc3QuYWRkKCdlLWhlYWRlcmNoa2NlbGxkaXYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVGcm9tQ2VsbChub2RlLCBjZWxsKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kSHRtbChub2RlLCBpbm5lckRJVik7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMuc29ydEVsZS5jbG9uZU5vZGUoKSk7XG4gICAgICAgICAgICBpZiAoKHRoaXMucGFyZW50LmFsbG93RmlsdGVyaW5nICYmIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgIT09ICdmaWx0ZXJiYXInKSAmJlxuICAgICAgICAgICAgICAgIChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpZWxkKSkgJiZcbiAgICAgICAgICAgICAgICAhKHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ICYmIGNvbHVtbi5zaG93Q29sdW1uTWVudSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoZmx0ck1lbnVFbGUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2UtbWFwcGluZ3VpZCc6ICdlLWZsbWVudS0nICsgY29sdW1uLnVpZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0ci1pY29uJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoRmxDb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICE9PSBtYXRjaEZsQ29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGNvdW50KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tjb3VudF0uZmllbGQgPT09IGNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbHRyTWVudUVsZS5jbGFzc0xpc3QuYWRkKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRmxDb2x1bW5zLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZmx0ck1lbnVFbGUuY2xvbmVOb2RlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNlbGwuY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBhcmlhQXR0ci5zb3J0ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgYXJpYUF0dHIuZ3JhYmJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZSA9IHRoaXMuZXh0ZW5kUHJlcGFyZUhlYWRlcihjb2x1bW4sIG5vZGUpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmhlYWRlclRlbXBsYXRlLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuaW5uZXJIVE1MID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb2x1bW4uaGVhZGVyVGVtcGxhdGUpLmlubmVySFRNTC50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5pbm5lckhUTUwgPSBjb2x1bW4uaGVhZGVyVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKG5vZGUsIGFyaWFBdHRyKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dEFsaWduKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udGV4dEFsaWduKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbm1lbnQgPSBjb2x1bW4uaGVhZGVyVGV4dEFsaWduIHx8IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuc3R5bGUudGV4dEFsaWduID0gYWxpZ25tZW50O1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbm1lbnQgPT09ICdyaWdodCcgfHwgYWxpZ25tZW50ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdlLXJpZ2h0YWxpZ24nIDogJ2UtbGVmdGFsaWduJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2NsaXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWdyaWRjbGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4uY2xpcE1vZGUgPT09ICdlbGxpcHNpc3dpdGh0b29sdGlwJykge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1lbGxpcHNpc3Rvb2x0aXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5yb3dTcGFuKSA/IGNlbGwucm93U3BhbiA6IDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsICcxJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5leHRlbmRQcmVwYXJlSGVhZGVyID0gZnVuY3Rpb24gKGNvbHVtbiwgbm9kZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ICYmIGNvbHVtbi5zaG93Q29sdW1uTWVudSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtY29sdW1ubWVudScgfSkpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaEZpbHRlcmVkQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAmJiB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAhPT0gbWF0Y2hGaWx0ZXJlZENvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnNbal0uZmllbGQgPT09IGNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGaWx0ZXJlZENvbHVtbnMucHVzaChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWZsdHItaWNvbicpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNsYXNzTmFtZSA9IGNvbHVtbi5hbGxvd1Jlc2l6aW5nID8gJ2UtcmhhbmRsZXIgZS1yY3Vyc29yJyA6ICdlLXJzdXBwcmVzcyc7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZEh0bWwgPSBmdW5jdGlvbiAobm9kZSwgaW5uZXJIdG1sKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGlubmVySHRtbCk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkhlYWRlckNlbGxSZW5kZXJlciA9IEhlYWRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQXJpYVNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBcmlhU2VydmljZSgpIHtcbiAgICAgICAgfVxuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICAgICAgICAgICAgcHJvcHMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnW25hbWVdLCBvcHRpb25zW25hbWVdKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRFeHBhbmQgPSBmdW5jdGlvbiAodGFyZ2V0LCBleHBhbmQpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5leHBhbmQsIGV4cGFuZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRTb3J0ID0gZnVuY3Rpb24gKHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuc29ydCwgZGlyZWN0aW9uLCB0eXBlb2YgZGlyZWN0aW9uID09PSAnYm9vbGVhbicpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0QnVzeSA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzQnVzeSkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmJ1c3ksIGlzQnVzeSk7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuaW52YWxpZCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRHcmFiYmVkID0gZnVuY3Rpb24gKHRhcmdldCwgaXNHcmFiYmVkLCByZW1vdmUpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5ncmFiYmVkLCBpc0dyYWJiZWQsIHJlbW92ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXREcm9wVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgaXNUYXJnZXQpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5kcm9wZWZmZWN0LCAnY29weScsICFpc1RhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBcmlhU2VydmljZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQXJpYVNlcnZpY2UgPSBBcmlhU2VydmljZTtcbiAgICBmdW5jdGlvbiBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBhdHRyaWJ1dGUsIHZhbHVlLCByZW1vdmUpIHtcbiAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgZXhwYW5kOiAnYXJpYS1leHBhbmRlZCcsXG4gICAgICAgIHJvbGU6ICdyb2xlJyxcbiAgICAgICAgc2VsZWN0ZWQ6ICdhcmlhLXNlbGVjdGVkJyxcbiAgICAgICAgbXVsdGlzZWxlY3RhYmxlOiAnYXJpYS1tdWx0aXNlbGVjdGFibGUnLFxuICAgICAgICBzb3J0OiAnYXJpYS1zb3J0JyxcbiAgICAgICAgYnVzeTogJ2FyaWEtYnVzeScsXG4gICAgICAgIGludmFsaWQ6ICdhcmlhLWludmFsaWQnLFxuICAgICAgICBncmFiYmVkOiAnYXJpYS1ncmFiYmVkJyxcbiAgICAgICAgZHJvcGVmZmVjdDogJ2FyaWEtZHJvcGVmZmVjdCcsXG4gICAgICAgIGhhc3BvcHVwOiAnYXJpYS1oYXNwb3B1cCcsXG4gICAgICAgIGxldmVsOiAnYXJpYS1sZXZlbCcsXG4gICAgICAgIGNvbGNvdW50OiAnYXJpYS1jb2xjb3VudCdcbiAgICB9O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2FyaWEtc2VydmljZS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbCBlLXN0YWNrZWRoZWFkZXJjZWxsJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2NvbHVtbmhlYWRlcicsXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXN0YWNrZWRoZWFkZXJjZWxsZGl2JyB9KTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRvb2xUaXApIHtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBjZWxsLmNvbHVtbi50b29sVGlwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuY29sdW1uLnRleHRBbGlnbikpIHtcbiAgICAgICAgICAgICAgICBkaXYuc3R5bGUudGV4dEFsaWduID0gY2VsbC5jb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1jb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93c3BhbicsICcxJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyID0gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSW5kZW50Q2VsbFJlbmRlcmVyID0gSW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cENhcHRpb25DZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBjYXB0aW9uJywgYXR0cnM6IHsgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIGhlbHBlciA9IHt9O1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gY2VsbC5jb2x1bW4uZW5hYmxlR3JvdXBCeUZvcm1hdCA/IGRhdGEua2V5IDpcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdChjZWxsLmNvbHVtbiwgY2VsbC5jb2x1bW4udmFsdWVBY2Nlc3Nvcigna2V5JywgZGF0YSwgY2VsbC5jb2x1bW4pKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmdyb3VwU2V0dGluZ3MuY2FwdGlvblRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY2FwdGlvblRlbXBsYXRlLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnT2JqLmdyb3VwU2V0dGluZ3MuY2FwdGlvblRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKGdPYmouZ3JvdXBTZXR0aW5ncy5jYXB0aW9uVGVtcGxhdGUpKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB2YWx1ZSArICcgLSAnICsgZGF0YS5jb3VudCArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIChkYXRhLmNvdW50IDwgMiA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KCdJdGVtJykgOiB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudCgnSXRlbXMnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lckhUTUwgKyAnIGlzIGdyb3VwY2FwdGlvbiBjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciA9IEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB2YXIgR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2luZGVudC1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaW5kZW50X2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzZXhwYW5kJztcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScsIGRhdGEuZmllbGQpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmd2YWx1ZScsIGRhdGEua2V5KTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwYW5kQ2VsbFJlbmRlcmVyO1xuICAgIH0oaW5kZW50X2NlbGxfcmVuZGVyZXJfMS5JbmRlbnRDZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkV4cGFuZENlbGxSZW5kZXJlciA9IEV4cGFuZENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cHRvcGxlZnRjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbGRpdiBlLWVtcHR5Y2VsbCcsIGlubmVySFRNTDogJyZuYnNwOycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHljZWxsJyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkRldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kZXRhaWwtaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWRldGFpbHJvd2NvbGxhcHNlJyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScsIHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtZHRkaWFnb25hbHJpZ2h0IGUtaWNvbi1ncmlnaHRhcnJvdycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIgPSBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFJlbmRlcmVyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxSZW5kZXJNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBDZWxsUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5hZGRDZWxsUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgbmFtZSA9IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldENlbGxSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZSA6IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgY2VsbFJlbmRlcmVyIFwiICsgbmFtZSArIFwiIGlzIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlckZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxSZW5kZXJlckZhY3RvcnkgPSBDZWxsUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VydmljZUxvY2F0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTZXJ2aWNlTG9jYXRvcigpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBTZXJ2aWNlTG9jYXRvci5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZXJ2aWNlc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VzW25hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VydmljZUxvY2F0b3IucHJvdG90eXBlLmdldFNlcnZpY2UgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZXJ2aWNlc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSBzZXJ2aWNlIFwiICsgbmFtZSArIFwiIGlzIG5vdCByZWdpc3RlcmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlc1tuYW1lXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlcnZpY2VMb2NhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZXJ2aWNlTG9jYXRvciA9IFNlcnZpY2VMb2NhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJlbmRlcmVyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlbmRlcmVyRmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmFkZFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIHZhciByTmFtZSA9IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5SZW5kZXJUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVuZGVyZXJNYXBbck5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJNYXBbck5hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgck5hbWUgPSBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuUmVuZGVyVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSByZW5kZXJlciBcIiArIHJOYW1lICsgXCIgaXMgbm90IGZvdW5kXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlck1hcFtyTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW5kZXJlckZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlbmRlcmVyRmFjdG9yeSA9IFJlbmRlcmVyRmFjdG9yeTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjb25zdGFudF8xLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uV2lkdGhTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aFRvQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIHZhciB3RmxhZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uV2lkdGgobmV3IGNvbHVtbl8xLkNvbHVtbih7IHdpZHRoOiAnMzBweCcgfSksIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbldpZHRoKG5ldyBjb2x1bW5fMS5Db2x1bW4oeyB3aWR0aDogJzMwcHgnIH0pLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Q29sdW1uV2lkdGgoY29sdW1uLCB3RmxhZyA/IHVuZGVmaW5lZCA6IGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldENvbHVtbldpZHRoID0gZnVuY3Rpb24gKGNvbHVtbiwgaW5kZXgsIG1vZHVsZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCkgOiBpbmRleDtcbiAgICAgICAgICAgIHZhciBjV2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY1dpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRXaWR0aChjV2lkdGgsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZyAmJiBtb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGhUb1RhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogY29sdW1uSW5kZXgsIHdpZHRoOiBjV2lkdGgsIGNvbHVtbjogY29sdW1uLCBtb2R1bGU6IG1vZHVsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciBmV2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbDtcbiAgICAgICAgICAgIHZhciBtSGRyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVoZWFkZXInKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zICYmIGluZGV4ID49IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgJiYgbUhkciAmJiBtSGRyLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2wgPSBtSGRyLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXggLSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbCA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoZWFkZXJDb2wpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2wuc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29udGVudENvbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zICYmIGluZGV4ID49IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50Q29sID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXggLSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2wgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRlbnRDb2wpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50Q29sLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVkaXQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlLmUtaW5saW5lLWVkaXQnKTtcbiAgICAgICAgICAgIGlmIChlZGl0KSB7XG4gICAgICAgICAgICAgICAgZWRpdC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XS5zdHlsZS53aWR0aCA9IGZXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRTaWJsaW5nc0hlaWdodCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLmdldEhlaWdodEZyb21EaXJlY3Rpb24oZWxlbWVudCwgJ3ByZXZpb3VzJyk7XG4gICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbihlbGVtZW50LCAnbmV4dCcpO1xuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzICsgbmV4dDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIHNpYmxpbmcgPSBlbGVtZW50W2RpcmVjdGlvbiArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoc2libGluZykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzaWJsaW5nLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBzaWJsaW5nID0gc2libGluZ1tkaXJlY3Rpb24gKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4ud2lkdGgpICYmIHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4ud2lkdGggPSAyMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbHVtbi53aWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdpZHRoID0gcGFyc2VJbnQoY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4ubWluV2lkdGggJiYgd2lkdGggPCBwYXJzZUludChjb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5taW5XaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChjb2x1bW4ubWF4V2lkdGggJiYgd2lkdGggPiBwYXJzZUludChjb2x1bW4ubWF4V2lkdGgudG9TdHJpbmcoKSwgMTApKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubWF4V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFRhYmxlV2lkdGggPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBjV2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlICE9PSBmYWxzZSAmJiBjV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdFdpZHRoICs9IHBhcnNlSW50KGNXaWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRXaWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aFRvVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdFdpZHRoID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZyZWV6ZVdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgY29sR3JwID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICB2YXIgbUNvbEdycCA9IGVqMl9iYXNlXzEuc2VsZWN0KCcuZS1tb3ZhYmxlY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCcuZS1jb2x1bW5oZWFkZXInKS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmcmVlemVXaWR0aCArPSBwYXJzZUludChjb2xHcnAuY2hpbGRyZW5baV0uc3R5bGUud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdFdpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KGZyZWV6ZVdpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgICAgIGZyZWV6ZVdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVqMl9iYXNlXzEuc2VsZWN0KCcuZS1tb3ZhYmxlaGVhZGVyJykucXVlcnlTZWxlY3RvcignLmUtY29sdW1uaGVhZGVyJykuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnJlZXplV2lkdGggKz0gcGFyc2VJbnQobUNvbEdycC5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2ldLnN0eWxlLndpZHRoLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChmcmVlemVXaWR0aCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5zZWxlY3QoJy5lLW1vdmFibGVoZWFkZXInKS5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnNlbGVjdCgnLmUtbW92YWJsZWNvbnRlbnQnKS5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdCh0aGlzLmdldFRhYmxlV2lkdGgodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZS5lLWlubGluZS1lZGl0Jyk7XG4gICAgICAgICAgICBpZiAoZWRpdCkge1xuICAgICAgICAgICAgICAgIGVkaXQuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5XaWR0aFNlcnZpY2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbHVtbldpZHRoU2VydmljZSA9IENvbHVtbldpZHRoU2VydmljZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSwgZXZlbnQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZvY3VzU3RyYXRlZ3kgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGb2N1c1N0cmF0ZWd5KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mbyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZm9yZ2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2tpcEZvY3VzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByZXZJbmRleGVzID0ge307XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmZvY3VzQ2hlY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5za2lwRm9jdXMgPSBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnZS1wYWdlcicpICE9PSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5vbkZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5nZXQoMCwgLTEsIFswLCAxXSwgbnVsbCwgdGhpcy5nZXRDb250ZW50KCkudmFsaWRhdG9yKCkpO1xuICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KCkubWF0cml4LnNlbGVjdChjdXJyZW50WzBdLCBjdXJyZW50WzFdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNraXBGb2N1cykge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24gKGUsIGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgaXNDb250ZW50ID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtZ3JpZGNvbnRlbnQnKSk7XG4gICAgICAgICAgICBpZiAoIWlzQ29udGVudCAmJiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJy5lLWdyaWRoZWFkZXInKSkgfHxcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVybWVudWRpdicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJlZm9yZUFyZ3MgPSB7IGNhbmNlbDogZmFsc2UsIGJ5S2V5OiBmYWxzZSwgYnlDbGljazogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZS50YXJnZXQpLCBjbGlja0FyZ3M6IGUgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudC5iZWZvcmVDZWxsRm9jdXNlZCwgYmVmb3JlQXJncyk7XG4gICAgICAgICAgICBpZiAoYmVmb3JlQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZShpc0NvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbCA9IHRoaXMuZ2V0Q29udGVudCgpLm9uQ2xpY2soZSwgZm9yY2UpO1xuICAgICAgICAgICAgaWYgKHJldHVyblZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2tpcE9uKGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJlZm9yZUFyZ3MgPSB7IGNhbmNlbDogZmFsc2UsIGJ5S2V5OiB0cnVlLCBieUNsaWNrOiBmYWxzZSwga2V5QXJnczogZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50LmJlZm9yZUNlbGxGb2N1c2VkLCBiZWZvcmVBcmdzKTtcbiAgICAgICAgICAgIGlmIChiZWZvcmVBcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiVmFsdWUgPSB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguY3VycmVudDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8ub3V0bGluZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN3YXAgPSB0aGlzLmdldENvbnRlbnQoKS5qdW1wKGUuYWN0aW9uLCBiVmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3dhcCkge1xuICAgICAgICAgICAgICAgIHZhciBpc0hlYWRlciA9IHRoaXMuaGVhZGVyID09PSB0aGlzLmdldENvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZShpc0hlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luaXRWYWwgPSBpc0hlYWRlciA/IC0xIDogdGhpcy5oZWFkZXIubWF0cml4Lm1hdHJpeC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguZ2V0KHJvd0luaXRWYWwsIGJWYWx1ZVsxXSwgWzAsIDBdLCBlLmFjdGlvbiwgdGhpcy5nZXRDb250ZW50KCkudmFsaWRhdG9yKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5jdXJyZW50ID0gW3Jvd0luaXRWYWwsIGN1cnJlbnRbMV1dO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkluZGV4ZXMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudCgpLm9uS2V5UHJlc3MoZSk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKGUpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5za2lwT24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmICh0aGlzLnBhcmVudC5pc0VkaXQgfHwgWydpbnNlcnQnLCAnZjInLCAnZGVsZXRlJ10uaW5kZXhPZihlLmFjdGlvbikgPiAtMSlcbiAgICAgICAgICAgICAgICB8fCAoZWoyX2Jhc2VfMS5jbG9zZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICcuZS1maWx0ZXJiYXJjZWxsJykgIT09IG51bGwgJiYgWydsZWZ0QXJyb3cnLCAncmlnaHRBcnJvdyddLmluZGV4T2YoZS5hY3Rpb24pID4gLTEpXG4gICAgICAgICAgICAgICAgfHwgKGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkY29udGVudCcpID09PSBudWxsICYmIGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkaGVhZGVyJykgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgfHwgKGUuYWN0aW9uID09PSAnc3BhY2UnICYmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncmlkY2hrYm94JykgJiYgZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRjaGtib3gnKSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAmJiBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnLmUtaGVhZGVyY2hrY2VsbGRpdicpID09PSBudWxsKSkpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5nZXRGb2N1c2VkRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlIHx8IHRoaXMuY29udGVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gY29udGVudCA/IHRoaXMuY29udGVudCA6IHRoaXMuaGVhZGVyO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5zZXRGb2N1c2VkRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1cyA9IGVsZW1lbnQ7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzLmZvY3VzKCk7IH0sIDApO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZEZvY3VzKHRoaXMuZ2V0Q29udGVudCgpLmdldEZvY3VzSW5mbygpLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUucmVtb3ZlRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudEluZm8uZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW3RoaXMuY3VycmVudEluZm8uZWxlbWVudCwgdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1c10sIFsnZS1mb2N1c2VkJywgJ2UtZm9jdXMnXSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnRUb0ZvY3VzLnRhYkluZGV4ID0gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmFkZEZvY3VzID0gZnVuY3Rpb24gKGluZm8sIGUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8gPSBpbmZvO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mby5vdXRsaW5lID0gaW5mby5vdXRsaW5lICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUpO1xuICAgICAgICAgICAgaWYgKCFpbmZvLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNGb2N1c2VkID0gaW5mby5lbGVtZW50VG9Gb2N1cy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZm9jdXMnKTtcbiAgICAgICAgICAgIGlmIChpc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5mby5vdXRsaW5lKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbaW5mby5lbGVtZW50XSwgWydlLWZvY3VzZWQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtpbmZvLmVsZW1lbnRUb0ZvY3VzXSwgWydlLWZvY3VzJ10pO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50LnRhYkluZGV4ID0gMDtcbiAgICAgICAgICAgIGlmICghaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1c2VkRWxlbWVudChpbmZvLmVsZW1lbnRUb0ZvY3VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudC5jZWxsRm9jdXNlZCwge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGluZm8uZWxlbWVudFRvRm9jdXMsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbmZvLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaW5kZXhlczogdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgYnlLZXk6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUpLFxuICAgICAgICAgICAgICAgIGJ5Q2xpY2s6IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZSksXG4gICAgICAgICAgICAgICAga2V5QXJnczogZSxcbiAgICAgICAgICAgICAgICBpc0p1bXA6IHRoaXMuc3dhcCxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuZ2V0Q29udGVudCgpLmdldEluZm8oZSksXG4gICAgICAgICAgICAgICAgb3V0bGluZTogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmN1cnJlbnQsIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdGhpcy5wcmV2SW5kZXhlcyA9IHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9O1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5yZWZyZXNoTWF0cml4ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudCAmJiAhX3RoaXMuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb250ZW50ID0gbmV3IENvbnRlbnRGb2N1cyhfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQgJiYgIV90aGlzLmhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oZWFkZXIgPSBuZXcgSGVhZGVyRm9jdXMoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNGb2N1cyA9IGNvbnRlbnQgPyBfdGhpcy5jb250ZW50IDogX3RoaXMuaGVhZGVyO1xuICAgICAgICAgICAgICAgIGNGb2N1cy5tYXRyaXguZ2VuZXJhdGUoZS5yb3dzLCBjRm9jdXMuc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIGNGb2N1cy5nZW5lcmF0ZVJvd3MoZS5yb3dzKTtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9ucyA9IFsncGFnaW5nJywgJ2dyb3VwaW5nJ107XG4gICAgICAgICAgICAgICAgaWYgKGUuYXJncyAmJiBhY3Rpb25zLmluZGV4T2YoZS5hcmdzLnJlcXVlc3RUeXBlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNraXBGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCB8fCB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zIHx8IHRoaXMucGFyZW50LmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMuZm9jdXNDaGVjaywgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5vbkZvY3VzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmtleVByZXNzZWQsIHRoaXMub25LZXlQcmVzcywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5jbGljaywgdGhpcy5vbkNsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmNvbnRlbnRSZWFkeSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoTWF0cml4KCksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oJ2Nsb3NlLWVkaXQnLCB0aGlzLnJlc3RvcmVGb2N1cywgdGhpcyk7XG4gICAgICAgICAgICBbJ3N0YXJ0LWVkaXQnLCAnc3RhcnQtYWRkJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5wYXJlbnQub24oZXZ0LCBfdGhpcy5jbGVhck91dGxpbmUsIF90aGlzKTsgfSk7XG4gICAgICAgICAgICBbJ3NvcnRpbmcnXS5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIF90aGlzLnBhcmVudC5vbihhY3Rpb24gKyBcIi1jb21wbGV0ZVwiLCBfdGhpcy5yZXN0b3JlRm9jdXMsIF90aGlzKTsgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5iYXRjaEFkZCwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmJhdGNoRGVsZXRlLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuZGV0YWlsRGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQub25FbXB0eSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMuZm9jdXNDaGVjayk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5vbkZvY3VzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5rZXlQcmVzc2VkLCB0aGlzLm9uS2V5UHJlc3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmNsaWNrLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50LmNvbnRlbnRSZWFkeSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaE1hdHJpeCgpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZignY2xvc2UtZWRpdCcsIHRoaXMucmVzdG9yZUZvY3VzKTtcbiAgICAgICAgICAgIFsnc3RhcnQtZWRpdCcsICdzdGFydC1hZGQnXS5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHsgcmV0dXJuIF90aGlzLnBhcmVudC5vZmYoZXZ0LCBfdGhpcy5jbGVhck91dGxpbmUpOyB9KTtcbiAgICAgICAgICAgIFsnc29ydGluZyddLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gX3RoaXMucGFyZW50Lm9mZihhY3Rpb24gKyBcIi1jb21wbGV0ZVwiLCBfdGhpcy5yZXN0b3JlRm9jdXMpOyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5iYXRjaEFkZCwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5iYXRjaERlbGV0ZSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5kZXRhaWxEYXRhQm91bmQsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQub25FbXB0eSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5yZXN0b3JlRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEZvY3VzKHRoaXMuZ2V0Q29udGVudCgpLmdldEZvY3VzSW5mbygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuY2xlYXJPdXRsaW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmN1cnJlbnQgPSB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguZ2V0KDAsIC0xLCBbMCwgMV0sICdkb3duQXJyb3cnLCB0aGlzLmdldENvbnRlbnQoKS52YWxpZGF0b3IoKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudEluZm8uZWxlbWVudCB8fCAhdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW3RoaXMuY3VycmVudEluZm8uZWxlbWVudCwgdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1c10sIFsnZS1mb2N1cycsICdlLWZvY3VzZWQnXSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmdldFByZXZJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZvcmdldCA9IHRoaXMuZm9yZ2V0O1xuICAgICAgICAgICAgdGhpcy5mb3JnZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBmb3JnZXQgPyB7IHJvd0luZGV4OiBudWxsLCBjZWxsSW5kZXg6IG51bGwgfSA6IHRoaXMucHJldkluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmZvcmdldFByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5mb3JnZXQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRm9jdXNTdHJhdGVneTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRm9jdXNTdHJhdGVneSA9IEZvY3VzU3RyYXRlZ3k7XG4gICAgdmFyIE1hdHJpeCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE1hdHJpeCgpIHtcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gW107XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBNYXRyaXgucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgsIGFsbG93KSB7XG4gICAgICAgICAgICByb3dJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0luZGV4LCB0aGlzLnJvd3MpKTtcbiAgICAgICAgICAgIGNvbHVtbkluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uSW5kZXgsIHRoaXMuY29sdW1ucykpO1xuICAgICAgICAgICAgdGhpcy5tYXRyaXhbcm93SW5kZXhdID0gdGhpcy5tYXRyaXhbcm93SW5kZXhdIHx8IFtdO1xuICAgICAgICAgICAgdGhpcy5tYXRyaXhbcm93SW5kZXhdW2NvbHVtbkluZGV4XSA9IGFsbG93ID8gMSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCwgbmF2aWdhdG9yLCBhY3Rpb24sIHZhbGlkYXRvcikge1xuICAgICAgICAgICAgdmFyIHRtcCA9IGNvbHVtbkluZGV4O1xuICAgICAgICAgICAgaWYgKHJvd0luZGV4ICsgbmF2aWdhdG9yWzBdIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbcm93SW5kZXgsIGNvbHVtbkluZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93SW5kZXggKyBuYXZpZ2F0b3JbMF0sIHRoaXMucm93cykpO1xuICAgICAgICAgICAgY29sdW1uSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5JbmRleCArIG5hdmlnYXRvclsxXSwgdGhpcy5tYXRyaXhbcm93SW5kZXhdLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRoaXMuZmlyc3QodGhpcy5tYXRyaXhbcm93SW5kZXhdLCBjb2x1bW5JbmRleCwgbmF2aWdhdG9yLCB0cnVlLCBhY3Rpb24pO1xuICAgICAgICAgICAgY29sdW1uSW5kZXggPSBmaXJzdCA9PT0gbnVsbCA/IHRtcCA6IGZpcnN0O1xuICAgICAgICAgICAgdmFyIHZhbCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUocm93SW5kZXggKyBcIi5cIiArIGNvbHVtbkluZGV4LCB0aGlzLm1hdHJpeCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pblZhbGlkKHZhbCkgfHwgIXZhbGlkYXRvcihyb3dJbmRleCwgY29sdW1uSW5kZXgsIGFjdGlvbikgP1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0KHJvd0luZGV4LCB0bXAsIG5hdmlnYXRvciwgYWN0aW9uLCB2YWxpZGF0b3IpIDogW3Jvd0luZGV4LCBjb2x1bW5JbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAodmVjdG9yLCBpbmRleCwgbmF2aWdhdG9yLCBtb3ZlVG8sIGFjdGlvbikge1xuICAgICAgICAgICAgaWYgKCgoaW5kZXggPCAwIHx8IGluZGV4ID09PSB2ZWN0b3IubGVuZ3RoKSAmJiB0aGlzLmluVmFsaWQodmVjdG9yW2luZGV4XSlcbiAgICAgICAgICAgICAgICAmJiAoYWN0aW9uICE9PSAndXBBcnJvdycgJiYgYWN0aW9uICE9PSAnZG93bkFycm93JykpIHx8ICF2ZWN0b3Iuc29tZShmdW5jdGlvbiAodikgeyByZXR1cm4gdiA9PT0gMTsgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5pblZhbGlkKHZlY3RvcltpbmRleF0pID8gaW5kZXggOlxuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3QodmVjdG9yLCAoWyd1cEFycm93JywgJ2Rvd25BcnJvdycsICdzaGlmdFVwJywgJ3NoaWZ0RG93biddLmluZGV4T2YoYWN0aW9uKSAhPT0gLTEpID8gbW92ZVRvID8gMCA6ICsraW5kZXggOiBpbmRleCArIG5hdmlnYXRvclsxXSwgbmF2aWdhdG9yLCBmYWxzZSwgYWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICByb3dJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0luZGV4LCB0aGlzLnJvd3MpKTtcbiAgICAgICAgICAgIGNvbHVtbkluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uSW5kZXgsIHRoaXMubWF0cml4W3Jvd0luZGV4XS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBbcm93SW5kZXgsIGNvbHVtbkluZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIChyb3dzLCBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucm93cyA9IHJvd3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gW107XG4gICAgICAgICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdywgckluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gcm93LmNlbGxzLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5pc1NwYW5uZWQgIT09IHRydWU7IH0pO1xuICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbnMgPSBNYXRoLm1heChjZWxscy5sZW5ndGggLSAxLCBfdGhpcy5jb2x1bW5zIHwgMCk7XG4gICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2VsbCwgY0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldChySW5kZXgsIGNJbmRleCwgc2VsZWN0b3Iocm93LCBjZWxsKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgICAgICAgfTtcbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5pblZhbGlkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IDAgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE1hdHJpeDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTWF0cml4ID0gTWF0cml4O1xuICAgIHZhciBDb250ZW50Rm9jdXMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb250ZW50Rm9jdXMocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBuZXcgTWF0cml4KCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMua2V5QWN0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAncmlnaHRBcnJvdyc6IFswLCAxXSxcbiAgICAgICAgICAgICAgICAndGFiJzogWzAsIDFdLFxuICAgICAgICAgICAgICAgICdsZWZ0QXJyb3cnOiBbMCwgLTFdLFxuICAgICAgICAgICAgICAgICdzaGlmdFRhYic6IFswLCAtMV0sXG4gICAgICAgICAgICAgICAgJ3VwQXJyb3cnOiBbLTEsIDBdLFxuICAgICAgICAgICAgICAgICdkb3duQXJyb3cnOiBbMSwgMF0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0VXAnOiBbLTEsIDBdLFxuICAgICAgICAgICAgICAgICdzaGlmdERvd24nOiBbMSwgMF0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0UmlnaHQnOiBbMCwgMV0sXG4gICAgICAgICAgICAgICAgJ3NoaWZ0TGVmdCc6IFswLCAtMV0sXG4gICAgICAgICAgICAgICAgJ2VudGVyJzogWzEsIDBdLFxuICAgICAgICAgICAgICAgICdzaGlmdEVudGVyJzogWy0xLCAwXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhlc0J5S2V5ID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICdob21lJzogW190aGlzLm1hdHJpeC5jdXJyZW50WzBdLCAtMSwgMCwgMV0sXG4gICAgICAgICAgICAgICAgICAgICdlbmQnOiBbX3RoaXMubWF0cml4LmN1cnJlbnRbMF0sIF90aGlzLm1hdHJpeC5jb2x1bW5zICsgMSwgMCwgLTFdLFxuICAgICAgICAgICAgICAgICAgICAnY3RybEhvbWUnOiBbMCwgLTEsIDAsIDFdLFxuICAgICAgICAgICAgICAgICAgICAnY3RybEVuZCc6IFtfdGhpcy5tYXRyaXgucm93cywgX3RoaXMubWF0cml4LmNvbHVtbnMgKyAxLCAwLCAtMV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRbYWN0aW9uXSB8fCBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5hdmlnYXRvciA9IHRoaXMua2V5QWN0aW9uc1tlLmFjdGlvbl07XG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0Q3VycmVudEZyb21BY3Rpb24oZS5hY3Rpb24sIG5hdmlnYXRvciwgZS5hY3Rpb24gaW4gdGhpcy5rZXlBY3Rpb25zLCBlKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF0cml4LnNlbGVjdChjdXJyZW50WzBdLCBjdXJyZW50WzFdKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5nZXRDdXJyZW50RnJvbUFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIG5hdmlnYXRvciwgaXNQcmVzZW50LCBlKSB7XG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yID09PSB2b2lkIDApIHsgbmF2aWdhdG9yID0gWzAsIDBdOyB9XG4gICAgICAgICAgICBpZiAoIWlzUHJlc2VudCAmJiAhdGhpcy5pbmRleGVzQnlLZXkoYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3VsZEZvY3VzQ2hhbmdlKGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4LmN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmluZGV4ZXNCeUtleShhY3Rpb24pIHx8IHRoaXMubWF0cml4LmN1cnJlbnQuY29uY2F0KG5hdmlnYXRvciksIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdLCByTiA9IF9hWzJdLCBjTiA9IF9hWzNdO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLm1hdHJpeC5nZXQocm93SW5kZXgsIGNlbGxJbmRleCwgW3JOLCBjTl0sIGFjdGlvbiwgdGhpcy52YWxpZGF0b3IoKSk7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24gKGUsIGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykgPyB0YXJnZXQgOiBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAndGQnKSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IFt0YXJnZXQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgdGFyZ2V0LmNlbGxJbmRleF0sIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIF9iID0gdGhpcy5tYXRyaXguY3VycmVudCwgb1Jvd0luZGV4ID0gX2JbMF0sIG9DZWxsSW5kZXggPSBfYlsxXTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBlajJfYmFzZV8xLmdldFZhbHVlKHJvd0luZGV4ICsgXCIuXCIgKyBjZWxsSW5kZXgsIHRoaXMubWF0cml4Lm1hdHJpeCk7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXguaW5WYWxpZCh2YWwpIHx8ICghZm9yY2UgJiYgb1Jvd0luZGV4ID09PSByb3dJbmRleCAmJiBvQ2VsbEluZGV4ID09PSBjZWxsSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXRyaXguc2VsZWN0KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmdldEZvY3VzSW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0ge307XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBfYiA9IF9hWzBdLCByb3dJbmRleCA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsIF9jID0gX2FbMV0sIGNlbGxJbmRleCA9IF9jID09PSB2b2lkIDAgPyAwIDogX2M7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5jdXJyZW50ID0gW3Jvd0luZGV4LCBjZWxsSW5kZXhdO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKClcbiAgICAgICAgICAgICAgICAucm93c1tyb3dJbmRleF0uY2VsbHNbY2VsbEluZGV4XTtcbiAgICAgICAgICAgIGluZm8uZWxlbWVudFRvRm9jdXMgPSB0aGlzLmdldEZvY3VzYWJsZShpbmZvLmVsZW1lbnQpO1xuICAgICAgICAgICAgaW5mby5vdXRsaW5lID0gIWluZm8uZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlsY2VsbCcpO1xuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuZ2V0Rm9jdXNhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IFtdLnNsaWNlXG4gICAgICAgICAgICAgICAgLmNhbGwoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24sIFtocmVmXSwgaW5wdXQ6bm90KFt0eXBlPVwiaGlkZGVuXCJdKSwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJykpO1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmxlbmd0aCA/IGNoaWxkWzBdIDogZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5zZWxlY3RvciA9IGZ1bmN0aW9uIChyb3csIGNlbGwpIHtcbiAgICAgICAgICAgIHZhciB0eXBlcyA9IFtlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnldO1xuICAgICAgICAgICAgcmV0dXJuICgocm93LmlzRGF0YVJvdyAmJiBjZWxsLnZpc2libGUgJiYgKGNlbGwuaXNEYXRhQ2VsbCB8fCBjZWxsLmlzVGVtcGxhdGUpKVxuICAgICAgICAgICAgICAgIHx8IChyb3cuaXNEYXRhUm93ICYmIGNlbGwuY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQpXG4gICAgICAgICAgICAgICAgfHwgKCFyb3cuaXNEYXRhUm93ICYmIHR5cGVzLmluZGV4T2YoY2VsbC5jZWxsVHlwZSkgPiAtMSlcbiAgICAgICAgICAgICAgICB8fCAoY2VsbC5jb2x1bW4gJiYgY2VsbC5jb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94JykpXG4gICAgICAgICAgICAgICAgJiYgIShyb3cuZWRpdCA9PT0gJ2RlbGV0ZScgJiYgcm93LmlzRGlydHkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmp1bXAgPSBmdW5jdGlvbiAoYWN0aW9uLCBjdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uID09PSAndXBBcnJvdycgJiYgY3VycmVudFswXSA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmdldEluZm8gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmdldEZvY3VzSW5mbygpO1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgckluZGV4ID0gX2FbMF0sIGNJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIGlzRGF0YSA9IGluZm8uZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGlzRGF0YSB8fCAoZSAmJiBlLmFjdGlvbiAhPT0gJ2VudGVyJyAmJiAoaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpXG4gICAgICAgICAgICAgICAgfHwgaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3dleHBhbmQnKSkpO1xuICAgICAgICAgICAgdmFyIF9iID0gW01hdGgubWluKHBhcnNlSW50KGluZm8uZWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCksIHJJbmRleCksXG4gICAgICAgICAgICAgICAgTWF0aC5taW4ocGFyc2VJbnQoaW5mby5lbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCksIGNJbmRleCldLCByb3dJbmRleCA9IF9iWzBdLCBjZWxsSW5kZXggPSBfYlsxXTtcbiAgICAgICAgICAgIHJldHVybiB7IGlzQ29udGVudDogdHJ1ZSwgaXNEYXRhQ2VsbDogaXNEYXRhLCBpbmRleGVzOiBbcm93SW5kZXgsIGNlbGxJbmRleF0sIGlzU2VsZWN0YWJsZTogaXNTZWxlY3RhYmxlIH07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUudmFsaWRhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgsIGFjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gdGFibGUucm93c1tyb3dJbmRleF0uY2VsbHNbY2VsbEluZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnZW50ZXInIHx8IGFjdGlvbiA9PT0gJ3NoaWZ0RW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoYWN0aW9uID09PSAnc2hpZnRVcCcgfHwgYWN0aW9uID09PSAnc2hpZnREb3duJykgJiYgY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24gIT09ICdzaGlmdFVwJyAmJiBhY3Rpb24gIT09ICdzaGlmdERvd24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICE9PSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLnNob3VsZEZvY3VzQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWF0cml4LmN1cnJlbnQsIF9iID0gX2FbMF0sIHJJbmRleCA9IF9iID09PSB2b2lkIDAgPyAtMSA6IF9iLCBfYyA9IF9hWzFdLCBjSW5kZXggPSBfYyA9PT0gdm9pZCAwID8gLTEgOiBfYztcbiAgICAgICAgICAgIGlmIChySW5kZXggPCAwIHx8IGNJbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjZWxsID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucm93c1tySW5kZXhdLmNlbGxzW2NJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gZS5hY3Rpb24gPT09ICdlbnRlcicgfHwgZS5hY3Rpb24gPT09ICdzaGlmdEVudGVyJyA/IGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSA6IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZW50Rm9jdXM7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbnRlbnRGb2N1cyA9IENvbnRlbnRGb2N1cztcbiAgICB2YXIgSGVhZGVyRm9jdXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyRm9jdXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlckZvY3VzKHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCkgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJGb2N1cy5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyB0YXJnZXQgOiBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAndGgnKSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IFt0YXJnZXQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgdGFyZ2V0LmNlbGxJbmRleF0sIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUocm93SW5kZXggKyBcIi5cIiArIGNlbGxJbmRleCwgdGhpcy5tYXRyaXgubWF0cml4KTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdHJpeC5pblZhbGlkKHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5zZWxlY3QodGFyZ2V0LnBhcmVudEVsZW1lbnQucm93SW5kZXgsIHRhcmdldC5jZWxsSW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJGb2N1cy5wcm90b3R5cGUuZ2V0Rm9jdXNJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWF0cml4LmN1cnJlbnQsIF9iID0gX2FbMF0sIHJvd0luZGV4ID0gX2IgPT09IHZvaWQgMCA/IDAgOiBfYiwgX2MgPSBfYVsxXSwgY2VsbEluZGV4ID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYztcbiAgICAgICAgICAgIGluZm8uZWxlbWVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKClcbiAgICAgICAgICAgICAgICAucm93c1tyb3dJbmRleF0uY2VsbHNbY2VsbEluZGV4XTtcbiAgICAgICAgICAgIGluZm8uZWxlbWVudFRvRm9jdXMgPSB0aGlzLmdldEZvY3VzYWJsZShpbmZvLmVsZW1lbnQpO1xuICAgICAgICAgICAgaW5mby5vdXRsaW5lID0gIWluZm8uZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVyYmFyY2VsbCcpO1xuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5zZWxlY3RvciA9IGZ1bmN0aW9uIChyb3csIGNlbGwpIHtcbiAgICAgICAgICAgIHJldHVybiAoY2VsbC52aXNpYmxlICYmIChjZWxsLmNvbHVtbi5maWVsZCAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuaXNUZW1wbGF0ZSkpIHx8IGNlbGwuY29sdW1uLnR5cGUgPT09ICdjaGVja2JveCc7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5qdW1wID0gZnVuY3Rpb24gKGFjdGlvbiwgY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbiA9PT0gJ2Rvd25BcnJvdycgJiYgY3VycmVudFswXSA9PT0gdGhpcy5tYXRyaXgubWF0cml4Lmxlbmd0aCAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLm1hdHJpeC5tYXRyaXgubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93RmlsdGVyaW5nICYmIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRyaXgucm93cyA9ICsrdGhpcy5tYXRyaXgucm93cztcbiAgICAgICAgICAgICAgICByb3dzWzBdLmNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGwsIGNJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubWF0cml4LnNldChsZW5ndGgsIGNJbmRleCwgY2VsbC52aXNpYmxlICYmIGNlbGwuY29sdW1uLmFsbG93RmlsdGVyaW5nICE9PSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5nZXRJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaXNDb250ZW50OiBmYWxzZSwgaXNIZWFkZXI6IHRydWUgfTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLnZhbGlkYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJGb2N1cy5wcm90b3R5cGUuc2hvdWxkRm9jdXNDaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgckluZGV4ID0gX2FbMF0sIGNJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgaWYgKHJJbmRleCA8IDAgfHwgY0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNlbGwgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnJvd3NbckluZGV4XS5jZWxsc1tjSW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGUuYWN0aW9uID09PSAnZW50ZXInID8gIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA6IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJGb2N1cztcbiAgICB9KENvbnRlbnRGb2N1cykpO1xuICAgIGV4cG9ydHMuSGVhZGVyRm9jdXMgPSBIZWFkZXJGb2N1cztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9mb2N1cy1zdHJhdGVneS5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFnZVNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTIpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VTaXplc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUGFnZVNldHRpbmdzID0gUGFnZVNldHRpbmdzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9wYWdlLXNldHRpbmdzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfZGF0YV8xLCB1dGlsXzEsIGV2ZW50cywgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZWxlY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTZWxlY3Rpb24ocGFyZW50LCBzZWxlY3Rpb25TZXR0aW5ncywgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucHJldmVudEZvY3VzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlID0ge307XG4gICAgICAgICAgICB0aGlzLmlzQmF0Y2hFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByZXZLZXkgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLmlzQ2hrQWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzVW5DaGtBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2hrQWxsQ29sbGVjID0gW107XG4gICAgICAgICAgICB0aGlzLmlzQ2hlY2tlZE9uQWRkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNldHRpbmdzID0gc2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IGxvY2F0b3IuZ2V0U2VydmljZSgnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MsIHR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VsZWN0aW9uJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNFZGl0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmlzRWRpdCAmJiAhdGhpcy5wZXJzaXN0U2VsZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvdyA9IGZ1bmN0aW9uIChpbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvd1R5cGUoKSB8fCAhc2VsZWN0ZWRSb3cgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc1Jvd1NlbGVjdGVkID0gc2VsZWN0ZWRSb3cuaGFzQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICBpc1RvZ2dsZSA9ICFpc1RvZ2dsZSA/IGlzVG9nZ2xlIDogaW5kZXggPT09IHRoaXMucHJldlJvd0luZGV4ICYmIGlzUm93U2VsZWN0ZWQ7XG4gICAgICAgICAgICBpZiAoIWlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0RGF0YSwgcm93SW5kZXg6IGluZGV4LCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcm93OiBzZWxlY3RlZFJvdywgcHJldmlvdXNSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsIHRhcmdldDogdGhpcy50YXJnZXRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJSb3coKTtcbiAgICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1NlbGVjdGlvbihzZWxlY3RlZFJvdywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm93UHJvcHMoaW5kZXgpO1xuICAgICAgICAgICAgaWYgKCFpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdERhdGEsIHJvd0luZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcm93OiBzZWxlY3RlZFJvdywgcHJldmlvdXNSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsIHRhcmdldDogdGhpcy50YXJnZXRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvd3NCeVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3ModGhpcy5nZXRDb2xsZWN0aW9uRnJvbUluZGV4ZXMoc3RhcnRJbmRleCwgZW5kSW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSBlbmRJbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RSb3dzID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVtyb3dJbmRleGVzWzBdXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgcm93SW5kZXhlczogcm93SW5kZXhlcywgcm93OiBzZWxlY3RlZFJvdywgcm93SW5kZXg6IHJvd0luZGV4ZXNbMF0sIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGFcbiAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclJvdygpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dJbmRleGVzXzEgPSByb3dJbmRleGVzOyBfaSA8IHJvd0luZGV4ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSByb3dJbmRleGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleCksIHJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm93UHJvcHMocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIHJvd0luZGV4ZXM6IHJvd0luZGV4ZXMsIHJvdzogc2VsZWN0ZWRSb3csIHJvd0luZGV4OiByb3dJbmRleGVzWzBdLCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhXG4gICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJvd3NUb1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dJbmRleGVzXzIgPSByb3dJbmRleGVzOyBfaSA8IHJvd0luZGV4ZXNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSByb3dJbmRleGVzXzJbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVtyb3dJbmRleF07XG4gICAgICAgICAgICAgICAgdmFyIGlzVW5TZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmluZGV4T2Yocm93SW5kZXgpID4gLTE7XG4gICAgICAgICAgICAgICAgZ09iai5zZWxlY3RlZFJvd0luZGV4ID0gcm93SW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgW3Jvd0luZGV4XSwgZGF0YSwgW3NlbGVjdGVkUm93XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLnNwbGljZSh0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5pbmRleE9mKHJvd0luZGV4KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzLnNwbGljZSh0aGlzLnNlbGVjdGVkUmVjb3Jkcy5pbmRleE9mKHNlbGVjdGVkUm93KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlbW92ZUNsYXNzZXNGb3JSb3coc2VsZWN0ZWRSb3csIGZhbHNlLCBudWxsLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCBbcm93SW5kZXhdLCBkYXRhLCBbc2VsZWN0ZWRSb3ddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLCByb3dJbmRleDogcm93SW5kZXgsIHJvdzogc2VsZWN0ZWRSb3csIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKHNlbGVjdGVkUm93LCByb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93UHJvcHMocm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLCByb3dJbmRleDogcm93SW5kZXgsIHJvdzogc2VsZWN0ZWRSb3csIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4XG4gICAgICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldENvbGxlY3Rpb25Gcm9tSW5kZXhlcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBfYSA9IChzdGFydEluZGV4IDwgZW5kSW5kZXgpID9cbiAgICAgICAgICAgICAgICB7IGk6IHN0YXJ0SW5kZXgsIG1heDogZW5kSW5kZXggfSA6IHsgaTogZW5kSW5kZXgsIG1heDogc3RhcnRJbmRleCB9LCBpID0gX2EuaSwgbWF4ID0gX2EubWF4O1xuICAgICAgICAgICAgZm9yICg7IGkgPD0gbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+IGVuZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5yZXZlcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IC0xO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVJvd1Byb3BzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMucHJldlJvd0luZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHRoaXMuaXNSb3dTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aCAmJiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVBlcnNpc3RDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkUm93LCBjaGtTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChzZWxlY3RlZFJvdykpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRChzZWxlY3RlZFJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciBwS2V5ID0gcm93T2JqID8gcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHBLZXkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb3dPYmouaXNTZWxlY3RlZCA9IGNoa1N0YXRlO1xuICAgICAgICAgICAgICAgIGlmIChjaGtTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGVbcEtleV0gPSBjaGtTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uUmVxdWVzdCAmJiB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEuaW5kZXhPZihyb3dPYmouZGF0YSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEucHVzaChyb3dPYmouZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAodGhpcy5zZWxlY3RlZFJvd1N0YXRlW3BLZXldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uUmVxdWVzdCAmJiB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEuaW5kZXhPZihyb3dPYmouZGF0YSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhLnNwbGljZSh0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEuaW5kZXhPZihyb3dPYmouZGF0YSksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNoZWNrQm94ZXMgPSBmdW5jdGlvbiAocm93LCBjaGtTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJvdykpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hrQm94ID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNoa0JveCkgJiYgdGhpcy5jaGVja2VkVGFyZ2V0ICE9PSBjaGtCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hrQm94LmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGNoZWNrZWQ6IGNoa1N0YXRlIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNoZWNrZWRUYXJnZXQpIHx8ICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNoZWNrZWRUYXJnZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhdGhpcy5jaGVja2VkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdGFsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja0FsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkUm93LCBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMucHVzaChzdGFydEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzLnB1c2goc2VsZWN0ZWRSb3cpO1xuICAgICAgICAgICAgc2VsZWN0ZWRSb3cuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdENvbGxlY3Rpb24oc2VsZWN0ZWRSb3csIHRydWUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja0JveGVzKHNlbGVjdGVkUm93LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgdHJ1ZSwgbnVsbCwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnRGb2N1cykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmZvY3VzLmdldFByZXZJbmRleGVzKCkuY2VsbEluZGV4ID9cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cuY2VsbHNbdGhpcy5mb2N1cy5nZXRQcmV2SW5kZXhlcygpLmNlbGxJbmRleF0gOlxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdy5xdWVyeVNlbGVjdG9yKCcuZS1zZWxlY3Rpb25iYWNrZ3JvdW5kOm5vdCguZS1oaWRlKScpO1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5vbkNsaWNrKHsgdGFyZ2V0OiB0YXJnZXQgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdFNlbGVjdGlvbiB8fCAodGhpcy5wZXJzaXN0U2VsZWN0aW9uICYmICF0aGlzLnBhcmVudC5pc0VkaXQpIHx8XG4gICAgICAgICAgICAgICAgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZFRhcmdldCkgJiYgdGhpcy5jaGVja2VkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdGFsbCcpKSkge1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgaWYgKHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclJvd1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goY3VycmVudFZpZXdEYXRhW3RoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5wdXNoKHRoaXMucGFyZW50LmdldFJvd3MoKVt0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXV0pO1xuICAgICAgICAgICAgICAgICAgICByb3dJbmRleC5wdXNoKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIHJvd0luZGV4LCBkYXRhLCByb3cpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93XzEgPSB0aGlzLnBhcmVudC5nZXRSb3dCeUluZGV4KHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dfMS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlbW92ZUNsYXNzZXNGb3JSb3cocm93XzEsIGZhbHNlLCB0cnVlLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdENvbGxlY3Rpb24ocm93XzEsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja0JveGVzKHJvd18xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNSb3dTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RlZCwgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93RGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgcm93SW5kZXgsIGRhdGEsIHJvdykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihyb3dbMF0sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwge1xuICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dJbmRleCwgZGF0YTogZGF0YSwgcm93OiByb3dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja0JveGVzKHJvd1swXSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbCA9IGZ1bmN0aW9uIChjZWxsSW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoY2VsbEluZGV4LnJvd0luZGV4LCB0aGlzLmdldENvbEluZGV4KGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4LmNlbGxJbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBjZWxsSW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpIHx8ICFzZWxlY3RlZENlbGwgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0NlbGxTZWxlY3RlZCA9IHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIGlzVG9nZ2xlID0gIWlzVG9nZ2xlID8gaXNUb2dnbGUgOiAhKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJlxuICAgICAgICAgICAgICAgIGNlbGxJbmRleC5yb3dJbmRleCA9PT0gdGhpcy5wcmV2Q0lkeHMucm93SW5kZXggJiYgY2VsbEluZGV4LmNlbGxJbmRleCA9PT0gdGhpcy5wcmV2Q0lkeHMuY2VsbEluZGV4ICYmXG4gICAgICAgICAgICAgICAgaXNDZWxsU2VsZWN0ZWQpO1xuICAgICAgICAgICAgaWYgKGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGwoKTtcbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwsIGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdENlbGxzQnlSYW5nZSA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHN0YXJ0SW5kZXgucm93SW5kZXgsIHN0YXJ0SW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIHZhciBtaW47XG4gICAgICAgICAgICB2YXIgbWF4O1xuICAgICAgICAgICAgdmFyIHN0SW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdmFyIGVkSW5kZXggPSBlbmRJbmRleCA9IGVuZEluZGV4ID8gZW5kSW5kZXggOiBzdGFydEluZGV4O1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBzdGFydEluZGV4LnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHN0YXJ0SW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGwoKTtcbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4LnJvd0luZGV4ID4gZW5kSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICAgICAgICAgIGVuZEluZGV4ID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4LnJvd0luZGV4OyBpIDw9IGVuZEluZGV4LnJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5jZWxsU2VsZWN0aW9uTW9kZSAhPT0gJ2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluID0gaSA9PT0gc3RhcnRJbmRleC5yb3dJbmRleCA/IChzdGFydEluZGV4LmNlbGxJbmRleCkgOiAwO1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBpID09PSBlbmRJbmRleC5yb3dJbmRleCA/IChlbmRJbmRleC5jZWxsSW5kZXgpIDogdGhpcy5nZXRMYXN0Q29sSW5kZXgoaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBzdGFydEluZGV4LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZW5kSW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBtaW4gPCBtYXggPyBtaW4gOiBtYXgsIGxlbiA9IG1pbiA+IG1heCA/IG1pbiA6IG1heDsgaiA8PSBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoaSwgaik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcy5wdXNoKGopO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLnB1c2goeyByb3dJbmRleDogaSwgY2VsbEluZGV4ZXM6IGNlbGxJbmRleGVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoc3RJbmRleCwgZWRJbmRleCk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBzdGFydEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHMgPSBmdW5jdGlvbiAocm93Q2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSByb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjZWxsTGVuID0gcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXMubGVuZ3RoOyBqIDwgY2VsbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLmNlbGxJbmRleGVzW2pdIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0sIHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0pO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZENlbGxzVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgdGhpcy5nZXRDb2xJbmRleChjZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgY2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGNlbGxJbmRleGVzWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY2VsbEluZGV4ZXNfMSA9IGNlbGxJbmRleGVzOyBfaSA8IGNlbGxJbmRleGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJbmRleCA9IGNlbGxJbmRleGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCA9PT0gY2VsbEluZGV4LnJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBpc1VuU2VsZWN0ZWQgPSBpbmRleCA+IC0xO1xuICAgICAgICAgICAgICAgIGlmIChpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbElkeCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXNlbGVjdChldmVudHMuY2VsbERlc2VsZWN0aW5nLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbElkeC5zcGxpY2Uoc2VsZWN0ZWRDZWxsSWR4LmluZGV4T2YoY2VsbEluZGV4LmNlbGxJbmRleCksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RlZCwgW3sgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4ZXM6IFtjZWxsSW5kZXguY2VsbEluZGV4XSB9XSwgc2VsZWN0ZWREYXRhLCBbc2VsZWN0ZWRDZWxsXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1VuU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbihhcmdzLCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd0NlbGxJbmRleCh7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4LmNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCwgY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoY2VsbEluZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldENvbEluZGV4ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgndGQuZS1yb3djZWxsJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IGNlbGxzLmxlbmd0aDsgbSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbHNbbV0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRMYXN0Q29sSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbcm93SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLmUtcm93Y2VsbCcpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGNlbGxzW2NlbGxzLmxlbmd0aCAtIDFdLmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jZWxsRGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgY2VsbEluZGV4ZXMsIGRhdGEsIGNlbGxzKSB7XG4gICAgICAgICAgICBpZiAoY2VsbHNbMF0gJiYgY2VsbHNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyaWRjaGtib3gnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tCb3hlcyhlajJfYmFzZV8zLmNsb3Nlc3QoY2VsbHNbMF0sICd0cicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwge1xuICAgICAgICAgICAgICAgIGNlbGxzOiBjZWxscywgZGF0YTogZGF0YSwgY2VsbEluZGV4ZXM6IGNlbGxJbmRleGVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkQ2VsbCwgcm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJvd0luZGV4KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QuYWRkKCdlLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1ncmlkY2hrYm94JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMoZWoyX2Jhc2VfMy5jbG9zZXN0KHNlbGVjdGVkQ2VsbCwgJ3RyJyksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoY2VsbCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBjZWxsO1xuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnRGb2N1cykge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMub25DbGljayh7IHRhcmdldDogY2VsbCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVDZWxsUHJvcHMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMucHJldkNJZHhzID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cyA9IGVuZEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc0NlbGxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggJiYgdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRSb3dDZWxsSW5kZXggPSBmdW5jdGlvbiAocm93Q2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaXNSb3dBdmFpbDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSByb3dDZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSb3dBdmFpbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUm93QXZhaWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcy5pbmRleE9mKHJvd0NlbGxJbmRleC5jZWxsSW5kZXgpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLnB1c2gocm93Q2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLnB1c2goeyByb3dJbmRleDogcm93Q2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW3Jvd0NlbGxJbmRleC5jZWxsSW5kZXhdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyQ2VsbFNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxscyA9IHRoaXMuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93Q2VsbCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dDZWxsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbcm93Q2VsbFtpXS5yb3dJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgY0xlbiA9IHJvd0NlbGwubGVuZ3RoOyBqIDwgY0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgocm93Q2VsbFtpXS5yb3dJbmRleCwgcm93Q2VsbFtpXS5jZWxsSW5kZXhlc1tqXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIHJvd0NlbGwsIGRhdGEsIGNlbGxzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZWN0ZWRDZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NlbGxTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RlZCwgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFNlbGVjdGVkQ2VsbHNFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gY2VsbHMuY29uY2F0KFtdLnNsaWNlLmNhbGwocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZ0JSZWN0ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciB4MSA9IHRoaXMueDtcbiAgICAgICAgICAgIHZhciB5MSA9IHRoaXMueTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgICAgIHZhciB4MiA9IHBvc2l0aW9uLnggLSBnQlJlY3QubGVmdDtcbiAgICAgICAgICAgIHZhciB5MiA9IHBvc2l0aW9uLnkgLSBnQlJlY3QudG9wO1xuICAgICAgICAgICAgdmFyIHRtcDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0aGlzLnBhcmVudC5lbGVtZW50Lm9mZnNldExlZnQgKyAyLCBlLmNsaWVudFkpLCAndHInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4MSA+IHgyKSB7XG4gICAgICAgICAgICAgICAgdG1wID0geDI7XG4gICAgICAgICAgICAgICAgeDIgPSB4MTtcbiAgICAgICAgICAgICAgICB4MSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh5MSA+IHkyKSB7XG4gICAgICAgICAgICAgICAgdG1wID0geTI7XG4gICAgICAgICAgICAgICAgeTIgPSB5MTtcbiAgICAgICAgICAgICAgICB5MSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0geDEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IHkxICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHgyIC0geDEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9IHkyIC0geTEgKyAncHgnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAhZS5jdHJsS2V5ICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnN0YXJ0SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkJyk7XG4gICAgICAgICAgICBpZiAoZ3JpZEVsZW1lbnQgJiYgZ3JpZEVsZW1lbnQuaWQgIT09IHRoaXMucGFyZW50LmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSb3dEcmFnQW5kRHJvcCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSAmJiAhZS5zaGlmdEtleSAmJiAhZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNTaW5nbGVTZWwoKSB8fCBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAndGQnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGV1c2Vyc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgZ0JSZWN0ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSBwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMueCA9IHBvc3Rpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMueSA9IHBvc3Rpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGRyYWdhcmVhJyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQuYm9keSwgJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclNlbEFmdGVyUmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnICYmICF0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxGb2N1c2VkLCB0aGlzLm9uQ2VsbEZvY3VzZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5jbGVhclNlbEFmdGVyUmVmcmVzaCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNsZWFyU2VsZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMub25EYXRhQm91bmQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5hY3Rpb25CZWdpbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCB0aGlzLmFjdGlvbkNvbXBsZXRlLmJpbmQodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsRm9jdXNlZCwgdGhpcy5vbkNlbGxGb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5jbGVhclNlbEFmdGVyUmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jbGVhclNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMub25EYXRhQm91bmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMuYWN0aW9uQmVnaW4pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnICYmICF0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMudHlwZSkgJiYgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVBvcFVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLm1vZGUpIHx8XG4gICAgICAgICAgICAgICAgIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLmNlbGxTZWxlY3Rpb25Nb2RlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tCb3hTZWxlY3Rpb25DaGFuZ2VkKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaGlkZVBvcFVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93c2VsZWN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5jaGVja0JveFNlbGVjdGlvbkNoYW5nZWQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja0JveFNlbGVjdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXNDaGVja0NvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Noa1NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPSAnbXVsdGlwbGUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0ZpZWxkID0gY29sLmZpZWxkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRvdGFsUmVjb3Jkc0NvdW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbEJveCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2hlY2tzZWxlY3RhbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxPYmogPSB0aGlzLmNoa0FsbEJveDtcbiAgICAgICAgICAgICAgICAgICAgaXNDaGVja0NvbHVtbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1jaGVja2JveHNlbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzQ2hlY2tDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hrU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGtGaWVsZCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsQm94ID0gdGhpcy5jaGtBbGxPYmogPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1jaGVja2JveHNlbGVjdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnBlcnNpc3RTZWxlY3Rpb24gJiYgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcGVyc2lzdHNlbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpbWFyeUtleSA9IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKClbMF07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiAmJiB0aGlzLmNoa0ZpZWxkICYmIE9iamVjdC5rZXlzKHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5wYXJlbnQuZ2V0RGF0YU1vZHVsZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKHRoaXMuY2hrRmllbGQsICdlcXVhbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBkYXRhLmdldERhdGEoe30sIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3h5XzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eV8xLmRhdGFTdWNjZXNzKGUucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzEucmVmcmVzaFBlcnNpc3RTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzEucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1wZXJzaXN0c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGF0YVN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtyZXNbaV1bdGhpcy5wcmltYXJ5S2V5XV0pICYmIHJlc1tpXVt0aGlzLmNoa0ZpZWxkXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGVbcmVzW2ldW3RoaXMucHJpbWFyeUtleV1dID0gcmVzW2ldW3RoaXMuY2hrRmllbGRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YSA9IHJlcztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZWZyZXNoUGVyc2lzdFNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hrQWxsQm94ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jaGVja3NlbGVjdGFsbCcpO1xuICAgICAgICAgICAgdGhpcy5jaGtBbGxPYmogPSB0aGlzLmNoa0FsbEJveDtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0Um93cygpO1xuICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCAmJiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uIHx8IHRoaXMuY2hrRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJvd3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQocm93c1tqXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcEtleSA9IHJvd09iaiA/IHJvd09iai5kYXRhW3RoaXMucHJpbWFyeUtleV0gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAocEtleSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja1N0YXRlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd1N0YXRlW3BLZXldIHx8ICh0aGlzLmlzQ2hrQWxsICYmIHRoaXMuY2hrQWxsQ29sbGVjLmluZGV4T2YocEtleSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHRoaXMuaXNVbkNoa0FsbCAmJiB0aGlzLmNoa0FsbENvbGxlYy5pbmRleE9mKHBLZXkpID4gMCkgfHwgKHRoaXMuY2hrRmllbGQgJiYgcm93T2JqLmRhdGFbdGhpcy5jaGtGaWVsZF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2gocGFyc2VJbnQocm93c1tqXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoa0JveCA9IHJvd3Nbal0ucXVlcnlTZWxlY3RvcignLmUtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRUYXJnZXQgIT09IGNoa0JveCAmJiB0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrQm94LmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGNoZWNrZWQ6IGNoZWNrU3RhdGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihyb3dzW2pdLCBjaGVja1N0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3MoaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KGluZGV4ZXNbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSA9PT0gJ3NhdmUnICYmIHRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBlZGl0Q2hrQm94ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0LWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGVkaXRDaGtCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZWRpdENoa0JveCwgJy5lLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdkaWFsb2cnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1kbGdlZGl0cm93Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRChyb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm93T2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlW3Jvd09iai5kYXRhW3RoaXMucHJpbWFyeUtleV1dID0gcm93T2JqLmlzU2VsZWN0ZWQgPSBlZGl0Q2hrQm94LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2hlY2tlZE9uQWRkID0gZWRpdENoa0JveC5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlID09PSAnc2F2ZScgJiYgdGhpcy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnYWRkJyAmJiB0aGlzLmlzQ2hlY2tlZE9uQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMucGFyZW50LmdldFJvd3MoKVtlLnNlbGVjdGVkUm93XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGVbcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XV0gPSByb3dPYmouaXNTZWxlY3RlZCA9IHRoaXMuaXNDaGVja2VkT25BZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBlcnNpc3RTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkRhdGFCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gfHwgdGhpcy5jaGtGaWVsZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVjb3JkcyA9IHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTdWNjZXNzKHJlY29yZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQZXJzaXN0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tTZWxlY3RBbGxBY3Rpb24gPSBmdW5jdGlvbiAoY2hlY2tTdGF0ZSkge1xuICAgICAgICAgICAgdmFyIGVkaXRGb3JtID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpO1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkVGFyZ2V0ID0gdGhpcy5jaGtBbGxCb3g7XG4gICAgICAgICAgICBpZiAoY2hlY2tTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UoMCwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hrQWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW5DaGtBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW5DaGtBbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGtBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hrQWxsQ29sbGVjID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdENvbGxlY3Rpb24ocm93c1tpXSwgY2hlY2tTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVW5DaGtBbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1N0YXRlID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlZGl0Rm9ybSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWRpdENoa0JveCA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXQtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICBlZGl0Q2hrQm94LmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGNoZWNrZWQ6IGNoZWNrU3RhdGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tTZWxlY3RBbGwgPSBmdW5jdGlvbiAoY2hlY2tCb3gpIHtcbiAgICAgICAgICAgIHZhciBjaGVja09iaiA9IGNoZWNrQm94O1xuICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdEFsbEFjdGlvbihjaGVja0JveC5jaGVja2VkKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckNoa0NoYW5nZUV2ZW50KGNoZWNrQm94LCBjaGVja0JveC5jaGVja2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1NlbGVjdCA9IGZ1bmN0aW9uIChjaGVja0JveCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0aGlzLmNoZWNrZWRUYXJnZXQsICcuZS1yb3djZWxsJyk7XG4gICAgICAgICAgICB2YXIgY2hlY2tPYmogPSBjaGVja0JveDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBySW5kZXggPSBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFkZGVkcm93JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICsrckluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dDZWxsU2VsZWN0aW9uSGFuZGxlcihySW5kZXgsIHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApKTtcbiAgICAgICAgICAgIHRoaXMubW92ZUludG9VbmNoZWNrQ29sbGVjdGlvbihlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtcm93JykpO1xuICAgICAgICAgICAgdGhpcy5zZXRDaGVja0FsbFN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2hrQ2hhbmdlRXZlbnQoY2hlY2tCb3gsIGNoZWNrQm94LmNoZWNrZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVJbnRvVW5jaGVja0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Noa0FsbCB8fCB0aGlzLmlzVW5DaGtBbGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRChyb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgcEtleSA9IHJvd09iaiA/IHJvd09iai5kYXRhW3RoaXMucHJpbWFyeUtleV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghcEtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoa0FsbENvbGxlYy5pbmRleE9mKHBLZXkpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbENvbGxlYy5wdXNoKHBLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxDb2xsZWMuc3BsaWNlKHRoaXMuY2hrQWxsQ29sbGVjLmluZGV4T2YocEtleSksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS50cmlnZ2VyQ2hrQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAoY2hlY2tCb3gsIGNoZWNrU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNoZWNrQm94Q2hhbmdlLCB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZDogY2hlY2tTdGF0ZSwgc2VsZWN0ZWRSb3dJbmRleGVzOiB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGNoZWNrQm94XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZXRDaGVja0FsbFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZExlbiA9IE9iamVjdC5rZXlzKHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRMZW4gPSB0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzQ291bnQgPSB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkTGVuID09PSB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IHx8ICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gJiYgdGhpcy5wYXJlbnQuYWxsb3dQYWdpbmdcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5pc0Noa0FsbCAmJiB0aGlzLmNoa0FsbENvbGxlYy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsT2JqLmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGNoZWNrZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrZWRMZW4gPT09IDAgfHwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsT2JqLmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGluZGV0ZXJtaW5hdGU6IGZhbHNlLCBjaGVja2VkOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsT2JqLmVqMl9pbnN0YW5jZXNbMF0uc2V0UHJvcGVydGllcyh7IGluZGV0ZXJtaW5hdGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGUuY3RybEtleSB8fCB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2g7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBlLnNoaWZ0S2V5O1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHZhciBjaGtTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJldmVudEZvY3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBjaGVja0JveDtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdCcpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3RhbGwnKSkge1xuICAgICAgICAgICAgICAgIGNoZWNrQm94ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGNoa1NlbGVjdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSAmJiAhdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MuY2hlY2tib3hPbmx5KSB8fCBjaGtTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Noa1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjaGVja0JveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkVGFyZ2V0ID0gY2hlY2tCb3g7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0JveC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3RhbGwnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdEFsbChjaGVja0JveCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0KGNoZWNrQm94KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLXJvd2NlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJJbmRleCA9IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gJiYgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hZGRlZHJvdycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrckluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIockluZGV4LCBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVJbnRvVW5jaGVja0NvbGxlY3Rpb24oZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLXJvdycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tBbGxTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0Noa1NlbGVjdGlvbiAmJiBlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3B1cChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJldmVudEZvY3VzID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucG9wVXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaG93UG9wdXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdXRpbF8xLnNldENzc0luR3JpZFBvcFVwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJyksIGUsICdlLXJvd3NlbGVjdCBlLWljb25zIGUtaWNvbi1yb3dzZWxlY3QnICtcbiAgICAgICAgICAgICAgICAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAxIHx8IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgJiYgIXRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93SW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSA/IHJvd0luZGV4IDogdGhpcy5wcmV2Um93SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSA/IHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9IDogdGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93c1RvU2VsZWN0aW9uKFtyb3dJbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2VsbHNUb1NlbGVjdGlvbihbeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25DZWxsRm9jdXNlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXIgPSAoKGUuY29udGFpbmVyLmlzSGVhZGVyICYmIGUuaXNKdW1wKSB8fCAoZS5jb250YWluZXIuaXNDb250ZW50ICYmICFlLmNvbnRhaW5lci5pc1NlbGVjdGFibGUpKSAmJlxuICAgICAgICAgICAgICAgICEoZS5ieUtleSAmJiBlLmtleUFyZ3MuYWN0aW9uID09PSAnc3BhY2UnKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJBY3Rpb24gPSBlLmNvbnRhaW5lci5pc0hlYWRlciAmJiAhKGUuYnlLZXkgJiYgZS5rZXlBcmdzLmFjdGlvbiA9PT0gJ3NwYWNlJyk7XG4gICAgICAgICAgICBpZiAoIWUuYnlLZXkgfHwgY2xlYXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSBlLmNvbnRhaW5lci5pc0NvbnRlbnQgPyBlLmNvbnRhaW5lci5pbmRleGVzIDogZS5pbmRleGVzLCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5mb2N1cy5nZXRQcmV2SW5kZXhlcygpO1xuICAgICAgICAgICAgaWYgKGhlYWRlckFjdGlvbiB8fCAoWydjdHJsUGx1c0EnLCAnZXNjYXBlJ10uaW5kZXhPZihlLmtleUFyZ3MuYWN0aW9uKSA9PT0gLTEgJiYgZS5rZXlBcmdzLmFjdGlvbiAhPT0gJ3NwYWNlJyAmJlxuICAgICAgICAgICAgICAgIHJvd0luZGV4ID09PSBwcmV2LnJvd0luZGV4ICYmIGNlbGxJbmRleCA9PT0gcHJldi5jZWxsSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSB0cnVlO1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleUFyZ3MuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZG93bkFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICd1cEFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRFbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlEb3duVXBLZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0QXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnRBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0RG93bic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnREb3duS2V5KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdExlZnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0UmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIb21lRW5kS2V5KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsSG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVuZCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDdHJsSG9tZUVuZEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsUGx1c0EnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxQbHVzQSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0YWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3RBbGwodGhpcy5jaGVja2VkVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdCh0aGlzLmNoZWNrZWRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmVudEZvY3VzID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY3RybFBsdXNBID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UoMCwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh7IHJvd0luZGV4OiAwLCBjZWxsSW5kZXg6IDAgfSwgeyByb3dJbmRleDogdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEsIGNlbGxJbmRleDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlEb3duVXBLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uICYmIHRoaXMuaXNDaGtBbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0QWxsQWN0aW9uKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihnT2JqLnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVVwRG93biA9IGZ1bmN0aW9uIChyb3dJbmRleCkge1xuICAgICAgICAgICAgaWYgKHJvd0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMucGFyZW50LmdldFJvd3MoKVswXS5jaGlsZHJlblt0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIHx8IDBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNJbmRleCA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMuY29udGVudFJlbmRlcmVyLmdldFJvd0J5SW5kZXgocm93SW5kZXgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjSW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5UmlnaHRMZWZ0S2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseUhvbWVFbmRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgocm93SW5kZXgsIGNlbGxJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNoaWZ0RG93bktleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UodGhpcy5wcmV2Um93SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdygwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzIHx8IHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5Q3RybEhvbWVFbmRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJlbW92ZUNsYXNzZXNGb3JSb3cgPSBmdW5jdGlvbiAocm93LCBpc0FkZCwgY2xlYXJBbGwpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW10uc2xpY2UuY2FsbChyb3cucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHJvdy5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlsXzEuYWRkUmVtb3ZlQWN0aXZlQ2xhc3Nlcy5hcHBseSh2b2lkIDAsIFtjZWxscywgaXNBZGRdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFJlbmRlcmVyKCkuc2V0U2VsZWN0aW9uKHJvdyA/IHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykgOiBudWxsLCBpc0FkZCwgY2xlYXJBbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzUm93VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdyb3cnIHx8IHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ2JvdGgnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzQ2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnY2VsbCcgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNTaW5nbGVTZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudFJlbmRlcmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5mYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFJlbmRlcmVyO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFNlbGVjdGVkUmVjb3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBbXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhID0gdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpLmZpbHRlcihmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cuaXNTZWxlY3RlZDsgfSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5kYXRhOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0YSA9IHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZERhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvbiA9IFNlbGVjdGlvbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3NlbGVjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlYXJjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNlYXJjaCwgYXJnMTogc2VhcmNoU3RyaW5nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFN0cmluZyAhPT0gZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSA9IHNlYXJjaFN0cmluZztcbiAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMua2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nOiB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXksIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlYXJjaDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VhcmNoID0gU2VhcmNoO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VhcmNoLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2hvd0hpZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTaG93SGlkZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIHNob3dCeSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFRvZ2dsZUZpZWxkcyhjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKGtleXMsIHNob3dCeSk7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgaGlkZUJ5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgaGlkZUJ5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldFRvZ2dsZUZpZWxkcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBmaW5hbGl6ZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplZCA9IFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplZDtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgZ2V0S2V5QnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChrZXlzLCBmdW5jdGlvbiAoa2V5LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QoX3RoaXMucGFyZW50LmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2dldEtleUJ5XSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgY29sdW1ucyA9IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1ucykgPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiBjb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgY29sdW1ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTaG93SGlkZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2hvd0hpZGUgPSBTaG93SGlkZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Nob3ctaGlkZS5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGNvbnN0YW50XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2Nyb2xsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2Nyb2xsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZXMgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Njcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LndpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlICYmIHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUudG9vbGJhciAmJlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUudG9vbGJhci5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLnJlZnJlc2hPdmVyZmxvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtSGRySGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIG1IZHJIZWlnaHQgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSBlajJfYmFzZV8zLmZvcm1hdFVuaXQodGhpcy5wYXJlbnQuaGVpZ2h0IC0gbUhkckhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbnN1cmVPdmVyZmxvdyhjb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGgoKSAtIHRoaXMuZ2V0VGhyZXNob2xkKCk7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIGNvbnRlbnQuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gc2Nyb2xsV2lkdGggPiAwID8gJzFweCcgOiAnMHB4JztcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSBzY3JvbGxXaWR0aCA+IDAgPyBzY3JvbGxXaWR0aCArICdweCcgOiAnMHB4JztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVQYWRkaW5nID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5nZXRDc3NQcm9wZXJ0aWVzKHJ0bCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5wYXJlbnRFbGVtZW50LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgIT09ICcxMDAlJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy53aWR0aFNlcnZpY2UuZ2V0U2libGluZ3NIZWlnaHQoY29udGVudCk7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9ICdjYWxjKDEwMCUgLSAnICsgaGVpZ2h0ICsgJ3B4KSc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0VGhyZXNob2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFwcE5hbWUgPSBlajJfYmFzZV8xLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgaWYgKGFwcE5hbWUgPT09ICdtb3ppbGxhJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCB0aGlzLndpcmVFdmVudHMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHZhciBpc0hlYWRlciA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgc0xpbWl0ID0gdGFyZ2V0LnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBpc0Zvb3RlciA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3VtbWFyeWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9PT0gbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSAhaXNIZWFkZXIgPyBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgOiB0YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzRm9vdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlci5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLnNjcm9sbCwgeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5vbkZyZWV6ZUNvbnRlbnRTY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzY3JvbGxUYXJnZXQ7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSB0YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPT09IHRvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uV2hlZWxTY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzY3JvbGxUYXJnZXQ7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wICsgZS5kZWx0YVk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9PT0gdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtZnJvemVuY29udGVudCcpLnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSB0b3A7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uVG91Y2hTY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzY3JvbGxUYXJnZXQ7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVkgPSBfdGhpcy5nZXRQb2ludFkoZSk7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wICsgKF90aGlzLnBhZ2VZIC0gcGFnZVkpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPT09IHRvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyb3plbmNvbnRlbnQnKS5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFnZVkgPSBwYWdlWTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSB0b3A7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldFBhZ2VZID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhZ2VZID0gX3RoaXMuZ2V0UG9pbnRZKGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRQb2ludFkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnBhZ2VZO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vbmVUaW1lUmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHZhciBtQ29udCA9IHRoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlY29udGVudCcpO1xuICAgICAgICAgICAgICAgIHZhciBmQ29udCA9IHRoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIG1IZHIgPSB0aGlzLmhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKG1Db250LCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwobUhkciksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQobUNvbnQsICdzY3JvbGwnLCB0aGlzLm9uRnJlZXplQ29udGVudFNjcm9sbChmQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZkNvbnQsICdzY3JvbGwnLCB0aGlzLm9uRnJlZXplQ29udGVudFNjcm9sbChtQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQobUhkciwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKG1Db250KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChmQ29udCwgJ3doZWVsJywgdGhpcy5vbldoZWVsU2Nyb2xsKG1Db250KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChmQ29udCwgJ3RvdWNoc3RhcnQnLCB0aGlzLnNldFBhZ2VZKCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZkNvbnQsICd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hTY3JvbGwobUNvbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmNvbnRlbnQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmhlYWRlciksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWFkZXIsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmNvbnRlbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRGb290ZXJDb250ZW50KCkuZmlyc3RDaGlsZCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuY29udGVudCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICBpZiAodGFibGUuc2Nyb2xsSGVpZ2h0IDwgdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3ModGFibGUucXVlcnlTZWxlY3RvckFsbCgndHI6bGFzdC1jaGlsZCB0ZCcpLCAnZS1sYXN0cm93Y2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSB0aGlzLnByZXZpb3VzVmFsdWVzLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHRoaXMucHJldmlvdXNWYWx1ZXMubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRDc3NQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGVuYWJsZVJ0bCA9IGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQocnRsKSA/IHRoaXMucGFyZW50LmVuYWJsZVJ0bCA6IHJ0bDtcbiAgICAgICAgICAgIGNzcy5ib3JkZXIgPSBlbmFibGVSdGwgPyAnYm9yZGVyTGVmdFdpZHRoJyA6ICdib3JkZXJSaWdodFdpZHRoJztcbiAgICAgICAgICAgIGNzcy5wYWRkaW5nID0gZW5hYmxlUnRsID8gJ3BhZGRpbmdMZWZ0JyA6ICdwYWRkaW5nUmlnaHQnO1xuICAgICAgICAgICAgcmV0dXJuIGNzcztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVPdmVyZmxvdyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKS5zdHlsZS5vdmVyZmxvd1kgPSB0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5vdmVyZmxvd1kgPSB0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGRdLCAnZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZF0sICdlLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmdldFNjcm9sbEJhcldpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTY3JvbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNjcm9sbCA9IFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Njcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUHJpbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQcmludChwYXJlbnQsIHNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmNvbnRlbnRSZWFkeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gc2Nyb2xsTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZ09iai5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJ3ByaW50JywgJ2hlaWdodD0nICsgd2luZG93Lm91dGVySGVpZ2h0ICsgJyx3aWR0aD0nICsgd2luZG93Lm91dGVyV2lkdGggKyAnLHRhYmJhcj1ubycpO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93LnJlc2l6ZVRvKHNjcmVlbi5hdmFpbFdpZHRoLCBzY3JlZW4uYXZhaWxIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5wcmludE1vZGUgPT09ICdjdXJyZW50cGFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGFnZXJEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWxsb3dQYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5jb250ZW50UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbnRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhZ2VyRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBnT2JqLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdlckRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZ09iai5hbGxvd1BhZ2luZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuc2Nyb2xsTW9kdWxlLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckRpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEdyb3VwKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdG9vbGJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZpbHRlcmJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFjdGl2ZScpLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uMWJhY2tncm91bmQnKSwgJ2UtY2VsbHNlbGVjdGlvbjFiYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ByaW50JywgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93czogZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0clthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXScpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVQcmludCwgYXJncyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnByaW50KHRoaXMuZWxlbWVudCwgdGhpcy5wcmludFdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucHJpbnRDb21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5yZW1vdmVDb2xHcm91cCA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgICAgICAgICAgdmFyIGdyb3VwQ2FwdGlvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cGNhcHRpb24nKTtcbiAgICAgICAgICAgIHZhciBjb2xTcGFuID0gZ3JvdXBDYXB0aW9uW2RlcHRoIC0gMV0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwQ2FwdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdyb3VwQ2FwdGlvbltpXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xHcm91cHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sR3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZXB0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbEdyb3Vwc1tpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ByaW50JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByaW50O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QcmludCA9IFByaW50O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcHJpbnQuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZW51bV8xLCBlajJfYmFzZV8zLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlQ29sdW1uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFnZ3JlZ2F0ZUNvbHVtbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlQ29sdW1uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy50ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdCAmJiAodGhpcy5mb3JtYXQuc2tlbGV0b24gfHwgdGhpcy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0Rm4gPSB2YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbih0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoaGVscGVyKSB7XG4gICAgICAgICAgICBpZiAoaGVscGVyID09PSB2b2lkIDApIHsgaGVscGVyID0ge307IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeSldID0geyBmbjogZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZm9vdGVyVGVtcGxhdGUsIGhlbHBlciksXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZm9vdGVyVGVtcGxhdGUnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSB7IGZuOiBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlLCBoZWxwZXIpLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ2dyb3VwRm9vdGVyVGVtcGxhdGUnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5KV0gPSB7IGZuOiBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSwgaGVscGVyKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdncm91cENhcHRpb25UZW1wbGF0ZScgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgdHlwZSldO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQWdncmVnYXRlQ29sdW1uO1xuICAgIH0oZWoyX2Jhc2VfMy5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiY29sdW1uTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZ3JvdXBGb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImdyb3VwQ2FwdGlvblRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiY3VzdG9tQWdncmVnYXRlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGVDb2x1bW4gPSBBZ2dyZWdhdGVDb2x1bW47XG4gICAgdmFyIEFnZ3JlZ2F0ZVJvdyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBZ2dyZWdhdGVSb3csIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZVJvdygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWdncmVnYXRlUm93O1xuICAgIH0oZWoyX2Jhc2VfMy5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuQ29sbGVjdGlvbihbXSwgQWdncmVnYXRlQ29sdW1uKVxuICAgIF0sIEFnZ3JlZ2F0ZVJvdy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlUm93ID0gQWdncmVnYXRlUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCBlajJfYmFzZV8yLCBldmVudHMsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBlajJfYnV0dG9uc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5DaG9vc2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uQ2hvb3NlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGxnaGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsT3BlbkRsZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzQ3VzdG9taXplT3BlbkNDID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNCb3hUcnVlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveCh0cnVlLCB7IGNoZWNrZWQ6IHRydWUsIGxhYmVsOiAnICcgfSk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZSA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3godHJ1ZSwgeyBjaGVja2VkOiBmYWxzZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hUcnVlLmluc2VydEJlZm9yZShlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hrLWhpZGRlbiBlLWNjIGUtY2MtY2hib3gnLCBhdHRyczogeyB0eXBlOiAnY2hlY2tib3gnIH1cbiAgICAgICAgICAgIH0pLCB0aGlzLmNCb3hUcnVlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5jQm94RmFsc2UuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGstaGlkZGVuIGUtY2MgZS1jYy1jaGJveCcsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94RmFsc2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5xdWVyeVNlbGVjdG9yKCcuZS1mcmFtZScpLmNsYXNzTGlzdC5hZGQoJ2UtdW5jaGVjaycpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RoaXMuY0JveFRydWUsIHRoaXMuY0JveEZhbHNlXSwgWydlLXJ0bCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmhpZGVEaWFsb2cuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJEbGdDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLmdldFNob3dIaWRlU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnc2hvd0hpZGVTZXJ2aWNlJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ3VzdG9taXplT3BlbkNDKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MnKSkgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldEVsZW1lbnQsICcuZS1jYy10b29sYmFyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5jaG9vc2VyLWJ0bicpIHx8IHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNjLXRvb2xiYXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLmluaXRpYWxPcGVuRGxnICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHx8ICF0aGlzLmlzRGxnT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY3NlYXJjaCcpLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJTZWFyY2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmRsZ09iaikgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSAmJiAhdGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9vbGJhci1pdGVtcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5oaWRlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNvbHVtbkNob29zZXIgPSBmdW5jdGlvbiAoeCwgeSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zID0geyBYOiBudWxsLCBZOiBudWxsIH07XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MxID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVPcGVuQ29sdW1uQ2hvb3NlciwgYXJnczEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94U3RhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzQzMHB4JztcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFZpc2libGUgPSB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB2YXIgbmV3cG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbihlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtdG9vbGJhci1pdGVtJyksIHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRWaXNpYmxlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gbmV3cG9zLnRvcCArIGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1jYy10b29sYmFyJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2YXIgZGxnV2lkdGggPSAyNTA7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1iaWdnZXInKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoud2lkdGggPSAyNTM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoub3BlbiA9IHRoaXMubU9wZW5EbGcuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IHRhcmdldC5vZmZzZXRMZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9ICgobmV3cG9zLmxlZnQgLSBkbGdXaWR0aCkgKyBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtY2MtdG9vbGJhcicpLmNsaWVudFdpZHRoKSArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5vcGVuQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uIChYLCBZKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ3VzdG9taXplT3BlbkNDID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbE9wZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5jb250ZW50ID0gdGhpcy5yZW5kZXJDaG9vc2VyTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKFgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLnRvcCA9IFkgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IFggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouYmVmb3JlT3BlbiA9IHRoaXMuY3VzdG9tRGlhbG9nT3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmJlZm9yZUNsb3NlID0gdGhpcy5jdXN0b21EaWFsb2dDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jdXN0b21EaWFsb2dPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jdXN0b21EaWFsb2dDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jY2RsZyBlLWNjJywgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NjZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdmFyIHhwb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjUwO1xuICAgICAgICAgICAgdmFyIGRpYWxvUG9zID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0Nob29zZUNvbHVtbnMnKSxcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jb25maXJtRGxnQnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWNjIGUtY2Nfb2tidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckFjdGlvbnMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0IGUtY2MgZS1jYy1jbmJ0bicsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlbmRlckNob29zZXJMaXN0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI1MCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNob29zZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbWFpbi1kaXYgZS1jYycgfSk7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2Mtc2VhcmNoZGl2IGUtY2MgZS1pbnB1dC1ncm91cCcgfSk7XG4gICAgICAgICAgICB2YXIgY2NzZWFyY2hlbGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2NzZWFyY2ggZS1jYyBlLWlucHV0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBwbGFjZWhvbGRlcjogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjY3NlYXJjaGljb24gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtY2NzZWFyY2gtaWNvbiBlLWljb25zIGUtY2MgZS1pbnB1dC1ncm91cC1pY29uJyB9KTtcbiAgICAgICAgICAgIHZhciBjb25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jYy1jb250ZW50ZGl2JyB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pbm5lcmRpdiBlLWNjJyB9KTtcbiAgICAgICAgICAgIHNlYXJjaERpdi5hcHBlbmRDaGlsZChjY3NlYXJjaGVsZSk7XG4gICAgICAgICAgICBzZWFyY2hEaXYuYXBwZW5kQ2hpbGQoY2NzZWFyY2hpY29uKTtcbiAgICAgICAgICAgIGNjc2VhcmNoZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5zZWFyY2hGb2N1cy5iaW5kKHRoaXMsIGNjc2VhcmNoZWxlKSk7XG4gICAgICAgICAgICBjY3NlYXJjaGVsZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5zZWFyY2hCbHVyLmJpbmQodGhpcywgY2NzZWFyY2hlbGUpKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdkNvbnRlbnQgPSB0aGlzLnJlZnJlc2hDaGVja2JveExpc3QodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXZDb250ZW50KTtcbiAgICAgICAgICAgIGNvbkRpdi5hcHBlbmRDaGlsZCh0aGlzLmlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdi5hcHBlbmRDaGlsZChzZWFyY2hEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKGNvbkRpdik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWluRGl2O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zZWFyY2hGb2N1cyA9IGZ1bmN0aW9uICh0YXJndCkge1xuICAgICAgICAgICAgdGFyZ3QucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnNlYXJjaEJsdXIgPSBmdW5jdGlvbiAodGFyZ3QpIHtcbiAgICAgICAgICAgIHRhcmd0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jb25maXJtRGxnQnRuQ2xpY2sgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGVDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5oaWRlQ29sdW1uLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5zaG93Q29sdW1uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdjb2x1bW5zdGF0ZScsIGVsZW1lbnQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zLCBkaWFsb2dJbnN0YW5jZTogdGhpcy5kbGdPYmpcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlLnNldFZpc2libGUodGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJBY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtblN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKHN0YXRlQ29sdW1ucywgc3RhdGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZUNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbFVpZCA9IHN0YXRlQ29sdW1uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChjb2xVaWQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb2wudmlzaWJsZSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zLnB1c2goY3VycmVudENvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNsZWFyQWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jaGVja3N0YXRlY29sdW1uID0gZnVuY3Rpb24gKGlzQ2hlY2tlZCwgY29sdWlkKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKGNvbHVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbi5zcGxpY2UodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdWlkKSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4uaW5kZXhPZihjb2x1aWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4ucHVzaChjb2x1aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4uaW5kZXhPZihjb2x1aWQpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4uc3BsaWNlKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVpZCksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uLnB1c2goY29sdWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoVmFsKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXJTZWFyY2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBmbHRyQ29sO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFZhbCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICBmbHRyQ29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIGNsZWFyU2VhcmNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZSgnaGVhZGVyVGV4dCcsICdzdGFydHN3aXRoJywgc2VhcmNoVmFsLCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmx0ckNvbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2NubWRpdicpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5yZWZyZXNoQ2hlY2tib3hMaXN0KGZsdHJDb2wsIHNlYXJjaFZhbCkpO1xuICAgICAgICAgICAgICAgIGlmICghY2xlYXJTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG5NYXRjaGVsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jYyBlLW5tYXRjaCcgfSk7XG4gICAgICAgICAgICAgICAgbk1hdGNoZWxlLmlubmVySFRNTCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTWF0Y2hzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5pbm5lckhUTUwgPSAnICc7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChuTWF0Y2hlbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZ09iai5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNoZWNrQm94Q2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGxnT2JqLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5kbGdPYmouZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jaGVja0JveENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrQm94Q2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjaGVja3N0YXRlO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1jaGVja2JveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS50b29nbGVDaGVja2JveChlbGVtLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvcignLmUtY2hrLWhpZGRlbicpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0ucXVlcnlTZWxlY3RvcignLmUtY2hlY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS11bmNoZWNrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tzdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uVWlkID0gdXRpbF8xLnBhcmVudHNVbnRpbChlbGVtLCAnZS1jY2hlY2snKS5nZXRBdHRyaWJ1dGUoJ3VpZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tzdGF0ZWNvbHVtbihjaGVja3N0YXRlLCBjb2x1bW5VaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZWZyZXNoQ2hlY2tib3hMaXN0ID0gZnVuY3Rpb24gKGdkQ29sLCBzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHRoaXMudWxFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd1bCcsIHsgY2xhc3NOYW1lOiAnZS1jY3VsLWVsZSBlLWNjJyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2RDb2wubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdkQ29sW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hlY2tib3goY29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWlucHV0JykudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3NlclNlYXJjaCgnJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2MtY2hib3gnKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5VSUQgPSB1dGlsXzEucGFyZW50c1VudGlsKGVsZW1lbnQsICdlLWNjaGVjaycpLmdldEF0dHJpYnV0ZSgndWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGNvbHVtblVJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNyZWF0ZUNoZWNrQm94ID0gZnVuY3Rpb24gKGxhYmVsLCBjaGVja2VkLCB1aWQpIHtcbiAgICAgICAgICAgIHZhciBjYm94ID0gY2hlY2tlZCA/IHRoaXMuY0JveFRydWUuY2xvbmVOb2RlKHRydWUpIDogdGhpcy5jQm94RmFsc2UuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgY2JveC5xdWVyeVNlbGVjdG9yKCcuZS1sYWJlbCcpLmlubmVySFRNTCA9IGxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5jcmVhdGVDYm94V2l0aFdyYXAodWlkLCBjYm94LCAnZS1jY2hlY2snKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ2hlY2tib3ggPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgY2NsaXN0O1xuICAgICAgICAgICAgdmFyIGhpZGVDb2xTdGF0ZTtcbiAgICAgICAgICAgIHZhciBzaG93Q29sU3RhdGU7XG4gICAgICAgICAgICB2YXIgY2hlY2tCb3hPYmo7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnNob3dJbkNvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICBjY2xpc3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xpJywgeyBjbGFzc05hbWU6ICdlLWNjbGlzdCBlLWNjJywgc3R5bGVzOiAnbGlzdC1zdHlsZTpOb25lJywgaWQ6ICdlLWNjbGlfJyArIGNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICAgICAgaGlkZUNvbFN0YXRlID0gdGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHNob3dDb2xTdGF0ZSA9IHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgY2NjaGVja2JveGxpc3QgPSB0aGlzLmNyZWF0ZUNoZWNrQm94KGNvbHVtbi5oZWFkZXJUZXh0LCAoY29sdW1uLnZpc2libGUgJiYgIWhpZGVDb2xTdGF0ZSkgfHwgc2hvd0NvbFN0YXRlLCBjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBjY2xpc3QuYXBwZW5kQ2hpbGQoY2NjaGVja2JveGxpc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMudWxFbGVtZW50LmFwcGVuZENoaWxkKGNjbGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RhcnRUaW1lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gIXByb3h5LmZsYWcgJiYgZS5rZXlDb2RlICE9PSAxMyA/IDUwMCA6IDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcHJveHkuY29sdW1uQ2hvb3NlclNlYXJjaChwcm94eS5zZWFyY2hWYWx1ZSk7IH0sIGludGVydmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmFkZGNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QuYWRkKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW1vdmVDYW5jZWxJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYucXVlcnlTZWxlY3RvcignLmUtY2MuZS1jY3NlYXJjaC1pY29uJykuY2xhc3NMaXN0LnJlbW92ZSgnZS1jYy1jYW5jZWwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUubU9wZW5EbGcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYy1zZWFyY2hkaXYnKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0NvbHVtbkNob29zZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uQ2hvb3NlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uQ2hvb3NlciA9IENvbHVtbkNob29zZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tY2hvb3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDbGlwYm9hcmQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDbGlwYm9hcmQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ID0gJyc7XG4gICAgICAgICAgICB0aGlzLmlzU2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlEb3duSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jbGlwYm9hcmQnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ29wYWNpdHk6IDAnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJlYWRvbmx5OiAndHJ1ZScgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEpO1xuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmtleURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2N0cmxQbHVzQycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUuYWN0aW9uID09PSAnY3RybFNoaWZ0UGx1c0gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLnNldENvcHlEYXRhID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnZhbHVlID0gdGhpcy5jb3B5Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlICE9PSAnY2VsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aXRoSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvcHlEYXRhKFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1oZWFkZXJjZWxsJykpLCBmYWxzZSwgJ1xcdCcsIHdpdGhIZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5Q29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkSW5kZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5Q29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29weURhdGEoW10uc2xpY2UuY2FsbChyb3dzW3NlbGVjdGVkSW5kZXhlc1tpXV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpKSwgZmFsc2UsICdcXHQnLCB3aXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb3B5RGF0YShbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKSksIHRydWUsICdcXG4nLCB3aXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY29weUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVDb3B5LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnZhbHVlID0gdGhpcy5jb3B5Q29udGVudCA9IGFyZ3MuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci51c2VyQWdlbnQubWF0Y2goL2lwYWR8aXBvZHxpcGhvbmUvaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYS5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5nZXRDb3B5RGF0YSA9IGZ1bmN0aW9uIChjZWxscywgaXNDZWxsLCBzcGxpdEtleSwgd2l0aEhlYWRlcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh3aXRoSGVhZGVyICYmIGlzQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKClbcGFyc2VJbnQoY2VsbHNbal0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uaGVhZGVyVGV4dCArICdcXG4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IGNlbGxzW2pdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIGlmIChqIDwgY2VsbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9IHNwbGl0S2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2NvcHknKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29weURhdGEod2l0aEhlYWRlcik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdjbGlwYm9hcmQnO1xuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2xpcGJvYXJkO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DbGlwYm9hcmQgPSBDbGlwYm9hcmQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jbGlwYm9hcmQuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9hY3Rpb25zL3NvcnRcIiwgXCIuL2FjdGlvbnMvcGFnZVwiLCBcIi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuL2FjdGlvbnMvZmlsdGVyXCIsIFwiLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuL2FjdGlvbnMvcmVzaXplXCIsIFwiLi9hY3Rpb25zL3Jlb3JkZXJcIiwgXCIuL2FjdGlvbnMvcm93LXJlb3JkZXJcIiwgXCIuL2FjdGlvbnMvZ3JvdXBcIiwgXCIuL2FjdGlvbnMvcHJpbnRcIiwgXCIuL2FjdGlvbnMvZGV0YWlsLXJvd1wiLCBcIi4vYWN0aW9ucy90b29sYmFyXCIsIFwiLi9hY3Rpb25zL2FnZ3JlZ2F0ZVwiLCBcIi4vYWN0aW9ucy92aXJ0dWFsLXNjcm9sbFwiLCBcIi4vYWN0aW9ucy9lZGl0XCIsIFwiLi9hY3Rpb25zL2JhdGNoLWVkaXRcIiwgXCIuL2FjdGlvbnMvaW5saW5lLWVkaXRcIiwgXCIuL2FjdGlvbnMvbm9ybWFsLWVkaXRcIiwgXCIuL2FjdGlvbnMvZGlhbG9nLWVkaXRcIiwgXCIuL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZXhwb3J0XCIsIFwiLi9hY3Rpb25zL3BkZi1leHBvcnRcIiwgXCIuL2FjdGlvbnMvZXhwb3J0LWhlbHBlclwiLCBcIi4vYWN0aW9ucy9jbGlwYm9hcmRcIiwgXCIuL2FjdGlvbnMvY29tbWFuZC1jb2x1bW5cIiwgXCIuL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyXCIsIFwiLi9hY3Rpb25zL2NvbnRleHQtbWVudVwiLCBcIi4vYWN0aW9ucy9mcmVlemVcIiwgXCIuL2FjdGlvbnMvY29sdW1uLW1lbnVcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZmlsdGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGF0YV8xLCBzb3J0XzEsIHBhZ2VfMSwgc2VsZWN0aW9uXzEsIGZpbHRlcl8xLCBzZWFyY2hfMSwgc2Nyb2xsXzEsIHJlc2l6ZV8xLCByZW9yZGVyXzEsIHJvd19yZW9yZGVyXzEsIGdyb3VwXzEsIHByaW50XzEsIGRldGFpbF9yb3dfMSwgdG9vbGJhcl8xLCBhZ2dyZWdhdGVfMSwgdmlydHVhbF9zY3JvbGxfMSwgZWRpdF8xLCBiYXRjaF9lZGl0XzEsIGlubGluZV9lZGl0XzEsIG5vcm1hbF9lZGl0XzEsIGRpYWxvZ19lZGl0XzEsIGNvbHVtbl9jaG9vc2VyXzEsIGV4Y2VsX2V4cG9ydF8xLCBwZGZfZXhwb3J0XzEsIGV4cG9ydF9oZWxwZXJfMSwgY2xpcGJvYXJkXzEsIGNvbW1hbmRfY29sdW1uXzEsIGNoZWNrYm94X2ZpbHRlcl8xLCBjb250ZXh0X21lbnVfMSwgZnJlZXplXzEsIGNvbHVtbl9tZW51XzEsIGV4Y2VsX2ZpbHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChkYXRhXzEpO1xuICAgIF9fZXhwb3J0KHNvcnRfMSk7XG4gICAgX19leHBvcnQocGFnZV8xKTtcbiAgICBfX2V4cG9ydChzZWxlY3Rpb25fMSk7XG4gICAgX19leHBvcnQoZmlsdGVyXzEpO1xuICAgIF9fZXhwb3J0KHNlYXJjaF8xKTtcbiAgICBfX2V4cG9ydChzY3JvbGxfMSk7XG4gICAgX19leHBvcnQocmVzaXplXzEpO1xuICAgIF9fZXhwb3J0KHJlb3JkZXJfMSk7XG4gICAgX19leHBvcnQocm93X3Jlb3JkZXJfMSk7XG4gICAgX19leHBvcnQoZ3JvdXBfMSk7XG4gICAgX19leHBvcnQocHJpbnRfMSk7XG4gICAgX19leHBvcnQoZGV0YWlsX3Jvd18xKTtcbiAgICBfX2V4cG9ydCh0b29sYmFyXzEpO1xuICAgIF9fZXhwb3J0KGFnZ3JlZ2F0ZV8xKTtcbiAgICBfX2V4cG9ydCh2aXJ0dWFsX3Njcm9sbF8xKTtcbiAgICBfX2V4cG9ydChlZGl0XzEpO1xuICAgIF9fZXhwb3J0KGJhdGNoX2VkaXRfMSk7XG4gICAgX19leHBvcnQoaW5saW5lX2VkaXRfMSk7XG4gICAgX19leHBvcnQobm9ybWFsX2VkaXRfMSk7XG4gICAgX19leHBvcnQoZGlhbG9nX2VkaXRfMSk7XG4gICAgX19leHBvcnQoY29sdW1uX2Nob29zZXJfMSk7XG4gICAgX19leHBvcnQoZXhjZWxfZXhwb3J0XzEpO1xuICAgIF9fZXhwb3J0KHBkZl9leHBvcnRfMSk7XG4gICAgX19leHBvcnQoZXhwb3J0X2hlbHBlcl8xKTtcbiAgICBfX2V4cG9ydChjbGlwYm9hcmRfMSk7XG4gICAgX19leHBvcnQoY29tbWFuZF9jb2x1bW5fMSk7XG4gICAgX19leHBvcnQoY2hlY2tib3hfZmlsdGVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbnRleHRfbWVudV8xKTtcbiAgICBfX2V4cG9ydChmcmVlemVfMSk7XG4gICAgX19leHBvcnQoY29sdW1uX21lbnVfMSk7XG4gICAgX19leHBvcnQoZXhjZWxfZmlsdGVyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsU2Nyb2xsKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndmlydHVhbHNjcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIsIG5ldyB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMS5WaXJ0dWFsSGVhZGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLlZpcnR1YWxDb250ZW50UmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVQYWdlU2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVQYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dIZWlnaHQgPSB1dGlsXzEuZ2V0Um93SGVpZ2h0KHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSB+fih0aGlzLnBhcmVudC5oZWlnaHQgLyByb3dIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuYmxvY2tTaXplICogMjtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0UHJvcGVydGllcyh7IHBhZ2VTZXR0aW5nczogeyBwYWdlU2l6ZTogc2l6ZSA8IGhlaWdodCA/IGhlaWdodCA6IHNpemUgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgYXJncy5tb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsU2Nyb2xsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsU2Nyb2xsID0gVmlydHVhbFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyXCIsIFwiLi4vc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLCB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbENvbnRlbnRSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhWaXJ0dWFsQ29udGVudFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucHJldkhlaWdodCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmFjdGlvbnMgPSBbJ2ZpbHRlcmluZycsICdzZWFyY2hpbmcnLCAnZ3JvdXBpbmcnLCAndW5ncm91cGluZyddO1xuICAgICAgICAgICAgX3RoaXMub2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZSA9IG5ldyBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgIF90aGlzLm9mZnNldEtleXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5ldmVudExpc3RlbmVyKCdvbicpO1xuICAgICAgICAgICAgX3RoaXMudmdlbmVyYXRvciA9IF90aGlzLmdlbmVyYXRvcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLndyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlRXZlbnQgPSAodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgJiYgIXRoaXMucGFyZW50LmRhdGFTb3VyY2UuZGF0YVNvdXJjZS5vZmZsaW5lKTtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRlbnQsIHBhZ2VIZWlnaHQ6IHRoaXMuZ2V0QmxvY2tIZWlnaHQoKSAqIDIsIGRlYm91bmNlRXZlbnQ6IGRlYm91bmNlRXZlbnQsXG4gICAgICAgICAgICAgICAgYXhlczogdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbJ1gnLCAnWSddIDogWydZJ11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLkludGVyU2VjdGlvbk9ic2VydmVyKHRoaXMudmlydHVhbEVsZS53cmFwcGVyLCBvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eSA9IGZ1bmN0aW9uICh0Ym9keSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZSgwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuc2Nyb2xsTGlzdGVuZXIgPSBmdW5jdGlvbiAoc2Nyb2xsQXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldmVudEV2ZW50IHx8IHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRoaXMuY29udGVudCA9PT0gZWoyX2Jhc2VfMS5jbG9zZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICcuZS1jb250ZW50JykgfHwgdGhpcy5jb250ZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGluZm8gPSBzY3JvbGxBcmdzLnNlbnRpbmVsO1xuICAgICAgICAgICAgdmFyIHZpZXdJbmZvID0gdGhpcy5nZXRJbmZvRnJvbVZpZXcoc2Nyb2xsQXJncy5kaXJlY3Rpb24sIGluZm8sIHNjcm9sbEFyZ3Mub2Zmc2V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvICYmICgoaW5mby5heGlzID09PSAnWScgJiYgdGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSA9PT0gdmlld0luZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgfHwgKGluZm8uYXhpcyA9PT0gJ1gnICYmIHRoaXMucHJldkluZm8uY29sdW1uSW5kZXhlcy50b1N0cmluZygpID09PSB2aWV3SW5mby5jb2x1bW5JbmRleGVzLnRvU3RyaW5nKCkpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB2aWV3SW5mby5jb2x1bW5JbmRleGVzIDogW10pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gdmlld0luZm8ubG9hZE5leHQgJiYgIXZpZXdJbmZvLmxvYWRTZWxmID8gdmlld0luZm8ubmV4dEluZm8ucGFnZSA6IHZpZXdJbmZvLnBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkodmlld0luZm8uZXZlbnQsIHsgcmVxdWVzdFR5cGU6ICd2aXJ0dWFsc2Nyb2xsJywgdmlydHVhbEluZm86IHZpZXdJbmZvIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ibG9jayA9IGZ1bmN0aW9uIChibGspIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZShibGspO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbmZvRnJvbVZpZXcgPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBpbmZvLCBlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcEJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZm9UeXBlID0geyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgc2VudGluZWxJbmZvOiBpbmZvLCBvZmZzZXRzOiBlIH07XG4gICAgICAgICAgICBpbmZvVHlwZS5wYWdlID0gdGhpcy5nZXRQYWdlRnJvbVRvcChlLnRvcCwgaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gdGVtcEJsb2NrcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mb1R5cGUucGFnZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5sb2FkU2VsZiA9ICF0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZSh0ZW1wQmxvY2tzW2luZm9UeXBlLmJsb2NrXSk7XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gdGhpcy5lbnN1cmVCbG9ja3MoaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gYmxvY2tzO1xuICAgICAgICAgICAgaW5mb1R5cGUubG9hZE5leHQgPSAhYmxvY2tzLmZpbHRlcihmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0ZW1wQmxvY2tzLmluZGV4T2YodmFsKSA9PT0gLTE7IH0pXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KHRoaXMuYmxvY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ldmVudCA9IChpbmZvVHlwZS5sb2FkTmV4dCB8fCBpbmZvVHlwZS5sb2FkU2VsZikgPyBjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCA6IGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaztcbiAgICAgICAgICAgIGluZm9UeXBlLm5leHRJbmZvID0gaW5mb1R5cGUubG9hZE5leHQgPyB7IHBhZ2U6IE1hdGgubWF4KDEsIGluZm9UeXBlLnBhZ2UgKyAoZGlyZWN0aW9uID09PSAnZG93bicgPyAxIDogLTEpKSB9IDoge307XG4gICAgICAgICAgICBpbmZvVHlwZS5jb2x1bW5JbmRleGVzID0gaW5mby5heGlzID09PSAnWCcgPyB0aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZm8uYXhpcyA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgaW5mb1R5cGUuZXZlbnQgPSBjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb1R5cGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmVuc3VyZUJsb2NrcyA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5mby5ibG9ja0luZGV4ZXNbaW5mby5ibG9ja107XG4gICAgICAgICAgICB2YXIgbUlkeDtcbiAgICAgICAgICAgIHZhciBvbGQgPSBpbmRleDtcbiAgICAgICAgICAgIHZhciBtYXggPSBNYXRoLm1heDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gaW5mby5kaXJlY3Rpb24gPT09ICdkb3duJyA/IFttYXgoaW5kZXgsIDEpLCArK2luZGV4LCArK2luZGV4XSA6IFttYXgoaW5kZXggLSAxLCAxKSwgaW5kZXgsIGluZGV4ICsgMV07XG4gICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaW5kKSB7IHJldHVybiBpbmRleGVzLmluZGV4T2YodmFsKSA9PT0gaW5kOyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpID09PSBpbmRleGVzLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmZvLmxvYWRTZWxmIHx8IChpbmZvLmRpcmVjdGlvbiA9PT0gJ2Rvd24nICYmIHRoaXMuaXNFbmRCbG9jayhvbGQpKSkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleGVzLnNvbWUoZnVuY3Rpb24gKHZhbCwgaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbCA9PT0gX3RoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1JZHggPSBpbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChtSWR4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5zbGljZSgwLCBtSWR4ICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2sgPT09IDAgJiYgaW5kZXhlcy5sZW5ndGggPT09IDEgJiYgdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1swXSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBbaW5kZXhlc1swXSAtIDEsIGluZGV4ZXNbMF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhcmdldCwgbmV3Q2hpbGQsIGUpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gZS52aXJ0dWFsSW5mbztcbiAgICAgICAgICAgIHRoaXMucHJldkluZm8gPSB0aGlzLnByZXZJbmZvIHx8IGUudmlydHVhbEluZm87XG4gICAgICAgICAgICB2YXIgY0Jsb2NrID0gKGluZm8uY29sdW1uSW5kZXhlc1swXSkgLSAxO1xuICAgICAgICAgICAgdmFyIGNPZmZzZXQgPSB0aGlzLmdldENvbHVtbk9mZnNldChjQmxvY2spO1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5nZXRUcmFuc2xhdGVZKHRoaXMuY29udGVudC5zY3JvbGxUb3AsIHRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsIGluZm8pO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNJbmRleCA9IGluZm8uY29sdW1uSW5kZXhlcztcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNJbmRleFtjSW5kZXgubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0luZGV4WzBdIC0gMSkgKyAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLnNldFdyYXBwZXJXaWR0aCh3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuc2V0V3JhcHBlcldpZHRoKHdpZHRoLCB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBlajJfYmFzZV8yLkJyb3dzZXIuaXNJRSk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxrID0gdGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0gLSB0aGlzLnByZXZIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNUb3AgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gc1RvcCArIGJsaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRQYWdlSGVpZ2h0KHRoaXMuZ2V0T2Zmc2V0KGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRPZmZzZXQoYmxvY2tzWzBdIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2SW5mbyA9IGluZm87XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25EYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGUuY291bnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsUG9zaXRpb24oZS5yZXF1ZXN0VHlwZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnNldFZpcnR1YWxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5PZmZzZXQodGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGggKyB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIC0gMSkgKyAncHgnIDogJzEwMCUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnNldFZpcnR1YWxIZWlnaHQodGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0sIHdpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuc2V0VmlydHVhbEhlaWdodCgxLCB3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFBhZ2VGcm9tVG9wID0gZnVuY3Rpb24gKHNUb3AsIGluZm8pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IDA7XG4gICAgICAgICAgICB2YXIgZXh0cmEgPSB0aGlzLm9mZnNldHNbdG90YWxdIC0gdGhpcy5wcmV2SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRLZXlzLnNvbWUoZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNUb3AgPCBfdGhpcy5vZmZzZXRzW29mZnNldF0gfHwgKGlPZmZzZXQgPT09IHRvdGFsICYmIHNUb3AgPiBfdGhpcy5vZmZzZXRzW29mZnNldF0pO1xuICAgICAgICAgICAgICAgIGlmIChib3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9jayA9IGlPZmZzZXQgJSAyID09PSAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBNYXRoLm1pbihfdGhpcy52Z2VuZXJhdG9yLmdldFBhZ2UoaU9mZnNldCksIF90aGlzLm1heFBhZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRyYW5zbGF0ZVkgPSBmdW5jdGlvbiAoc1RvcCwgY0hlaWdodCwgaW5mbykge1xuICAgICAgICAgICAgaWYgKGluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZm8gPSB7IHBhZ2U6IHRoaXMuZ2V0UGFnZUZyb21Ub3Aoc1RvcCwge30pIH07XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmxvY2sgPSAoaW5mby5ibG9ja0luZGV4ZXNbMF0gfHwgMSkgLSAxO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrKTtcbiAgICAgICAgICAgIHZhciBlbmRUcmFuc2xhdGUgPSB0aGlzLmdldE9mZnNldChpbmZvLmJsb2NrSW5kZXhlc1tpbmZvLmJsb2NrSW5kZXhlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlID4gc1RvcCA/IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrIC0gMSkgOiBlbmRUcmFuc2xhdGUgPCAoc1RvcCArIGNIZWlnaHQpID8gdGhpcy5nZXRPZmZzZXQoYmxvY2sgKyAxKSA6IHRyYW5zbGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0T2Zmc2V0ID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odGhpcy5vZmZzZXRzW2Jsb2NrXSB8IDAsIHRoaXMub2Zmc2V0c1t0aGlzLm1heEJsb2NrXSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uRW50ZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIGN1cnJlbnQsIGRpcmVjdGlvbiwgZSkge1xuICAgICAgICAgICAgICAgIHZhciB4QXhpcyA9IGN1cnJlbnQuYXhpcyA9PT0gJ1gnO1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBfdGhpcy5wcmV2SW5mby5vZmZzZXRzID8gX3RoaXMucHJldkluZm8ub2Zmc2V0cy50b3AgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IF90aGlzLmdldENvbHVtbk9mZnNldCh4QXhpcyA/IF90aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpWzBdIC0gMSA6IF90aGlzLnByZXZJbmZvLmNvbHVtbkluZGV4ZXNbMF0gLSAxKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IF90aGlzLmdldFRyYW5zbGF0ZVkoZS50b3AsIGhlaWdodCwgeEF4aXMgJiYgdG9wID09PSBlLnRvcCA/IF90aGlzLnByZXZJbmZvIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKHgsIE1hdGgubWluKHksIF90aGlzLm9mZnNldHNbX3RoaXMubWF4QmxvY2tdKSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oZWFkZXIudmlydHVhbEVsZS5hZGp1c3RUYWJsZSh4LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ldmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50W2FjdGlvbl0oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMub25EYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRbYWN0aW9uXShjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2ssIHRoaXMucmVmcmVzaENvbnRlbnRSb3dzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMucGFyZW50W2FjdGlvbl0oZXZlbnQgKyBcIi1iZWdpblwiLCBfdGhpcy5vbkFjdGlvbkJlZ2luLCBfdGhpcyk7IH0pO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9ic2VydmVyLm9ic2VydmUoZnVuY3Rpb24gKHNjcm9sbEFyZ3MpIHsgcmV0dXJuIF90aGlzLnNjcm9sbExpc3RlbmVyKHNjcm9sbEFyZ3MpOyB9LCBfdGhpcy5vbkVudGVyZWQoKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEJsb2NrU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUgPj4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmxvY2tIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCbG9ja1NpemUoKSAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuaXNFbmRCbG9jayA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IHRvdGFsQmxvY2tzIHx8IGluZGV4ID09PSB0b3RhbEJsb2NrcyAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRvdGFsQmxvY2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmNvdW50IC8gdGhpcy5nZXRCbG9ja1NpemUoKSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldENvbHVtbk9mZnNldCA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5jT2Zmc2V0c1tibG9ja10gfCAwO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVzZXRTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnMuc29tZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBhY3Rpb247IH0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wICE9PSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldFByb3BlcnRpZXMoeyBwYWdlU2V0dGluZ3M6IHsgY3VycmVudFBhZ2U6IDEgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuZ2V0Um93cygpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SWR4ID0gKHByZXZbMF0gLSAxKSAqIHRoaXMuZ2V0QmxvY2tTaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleCAtIHN0YXJ0SWR4XTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaE9mZnNldHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvdyA9IDA7XG4gICAgICAgICAgICB2YXIgYlNpemUgPSB0aGlzLmdldEJsb2NrU2l6ZSgpO1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5vZmZzZXRzW3RvdGFsXTtcbiAgICAgICAgICAgIHRoaXMubWF4QmxvY2sgPSB0b3RhbCAlIDIgPT09IDAgPyB0b3RhbCAtIDIgOiB0b3RhbCAtIDE7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KHRvdGFsKSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuICsrcm93OyB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSAoX3RoaXMudmdlbmVyYXRvci5jYWNoZVtibG9ja10gfHwgW10pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgcmVtID0gX3RoaXMuY291bnQgJSBiU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGJsb2NrIGluIF90aGlzLnZnZW5lcmF0b3IuY2FjaGUgP1xuICAgICAgICAgICAgICAgICAgICB0bXAgKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCkgOiByZW0gJiYgYmxvY2sgPT09IHRvdGFsID8gcmVtICogdXRpbF8xLmdldFJvd0hlaWdodCgpIDogX3RoaXMuZ2V0QmxvY2tIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRzW2Jsb2NrXSA9IChfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwKSArIHNpemU7XG4gICAgICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0c1tibG9ja10gPSBfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9mZnNldEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9mZnNldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52Z2VuZXJhdG9yLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudmdlbmVyYXRvci5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxDb250ZW50UmVuZGVyZXIgPSBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVmlydHVhbEhlYWRlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlID0gbmV3IFZpcnR1YWxFbGVtZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgX3RoaXMuZ2VuID0gbmV3IHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaywgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUudmlydHVhbEluZm8uc2VudGluZWxJbmZvLmF4aXMgPT09ICdYJyA/IF90aGlzLnJlZnJlc2hVSSgpIDogbnVsbDsgfSwgX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdlbi5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLmdlbi5nZXRDb2x1bW5JbmRleGVzKHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkKSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcignYWJzb2x1dGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUud3JhcHBlci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFVJID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZW4ucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5nZW4uZ2V0Q29sdW1uSW5kZXhlcyh0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCkpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoVUkuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxIZWFkZXJSZW5kZXJlcjtcbiAgICB9KGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcikpO1xuICAgIGV4cG9ydHMuVmlydHVhbEhlYWRlclJlbmRlcmVyID0gVmlydHVhbEhlYWRlclJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5yZW5kZXJXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdmlydHVhbHRhYmxlJyB9KTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnJlbmRlclBsYWNlSG9sZGVyID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IHZvaWQgMCkgeyBwb3NpdGlvbiA9ICdyZWxhdGl2ZSc7IH1cbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS12aXJ0dWFsdHJhY2snLCBzdHlsZXM6IFwicG9zaXRpb246XCIgKyBwb3NpdGlvbiB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5hZGp1c3RUYWJsZSA9IGZ1bmN0aW9uICh4VmFsdWUsIHlWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKFwiICsgeFZhbHVlICsgXCJweCwgXCIgKyB5VmFsdWUgKyBcInB4KVwiO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnNldFdyYXBwZXJXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgZnVsbCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLndpZHRoID0gd2lkdGggPyB3aWR0aCArIFwicHhcIiA6IGZ1bGwgPyAnMTAwJScgOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5zZXRWaXJ0dWFsSGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCwgd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbEVsZW1lbnRIYW5kbGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSBWaXJ0dWFsRWxlbWVudEhhbmRsZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvdmlydHVhbC1jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbnRlclNlY3Rpb25PYnNlcnZlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5mcm9tV2hlZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuc2VudGluZWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICd1cCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gcmVjdC50b3AgLSBfdGhpcy5jb250YWluZXJSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHRvcCA+PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvcCArIChfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyKSA+PSAwO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBheGlzOiAnWSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdkb3duJzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjSGVpZ2h0ID0gX3RoaXMub3B0aW9ucy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IHJlY3QuYm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gcmVjdC5ib3R0b20gPD0gX3RoaXMuY29udGFpbmVyUmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9wIC0gKF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDIpIDw9IF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdZJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ3JpZ2h0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IHJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSByaWdodCA8IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHQgLSBfdGhpcy5jb250YWluZXJSZWN0LndpZHRoIDw9IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSByZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSBsZWZ0ID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgX3RoaXMuY29udGFpbmVyUmVjdC53aWR0aCA+PSBfdGhpcy5jb250YWluZXJSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZWN0ID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnd2hlZWwnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mcm9tV2hlZWwgPSB0cnVlOyB9LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy52aXJ0dWFsU2Nyb2xsSGFuZGxlcihjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5zZW50aW5lbEluZm9bZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHJldHVybiBpbmZvLmNoZWNrKHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgaW5mbyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS52aXJ0dWFsU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHByZXZUb3AgPSAwO1xuICAgICAgICAgICAgdmFyIHByZXZMZWZ0ID0gMDtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZWQxMDAgPSBlajJfYmFzZV8yLmRlYm91bmNlKGNhbGxiYWNrLCAxMDApO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlZDUwID0gZWoyX2Jhc2VfMi5kZWJvdW5jZShjYWxsYmFjaywgNTApO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGUudGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGUudGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHByZXZUb3AgPCB0b3AgPyAnZG93bicgOiAndXAnO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHByZXZMZWZ0ID09PSBsZWZ0ID8gZGlyZWN0aW9uIDogcHJldkxlZnQgPCBsZWZ0ID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICAgICAgICBwcmV2VG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIHByZXZMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IF90aGlzLnNlbnRpbmVsSW5mb1tkaXJlY3Rpb25dO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmF4ZXMuaW5kZXhPZihjdXJyZW50LmF4aXMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IF90aGlzLmNoZWNrKGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuZW50ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkVudGVyQ2FsbGJhY2soX3RoaXMuZWxlbWVudCwgY3VycmVudCwgZGlyZWN0aW9uLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX3RoaXMuZnJvbVdoZWVsID8gX3RoaXMub3B0aW9ucy5kZWJvdW5jZUV2ZW50ID8gZGVib3VuY2VkMTAwIDogY2FsbGJhY2sgOiBkZWJvdW5jZWQxMDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4gPSBkZWJvdW5jZWQ1MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmbih7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBzZW50aW5lbDogY3VycmVudCwgb2Zmc2V0OiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmZyb21XaGVlbCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnNldFBhZ2VIZWlnaHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wYWdlSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMucm93TW9kZWxHZW5lcmF0b3IgPSB0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nID8gbmV3IGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwTW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpIDogbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgbm90aWZ5QXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmZvID0gbm90aWZ5QXJncy52aXJ0dWFsSW5mbyA9IG5vdGlmeUFyZ3MudmlydHVhbEluZm8gfHwgdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgeEF4aXMgPSBpbmZvLnNlbnRpbmVsSW5mbyAmJiBpbmZvLnNlbnRpbmVsSW5mby5heGlzID09PSAnWCc7XG4gICAgICAgICAgICB2YXIgcGFnZSA9ICF4QXhpcyAmJiBpbmZvLmxvYWROZXh0ICYmICFpbmZvLmxvYWRTZWxmID8gaW5mby5uZXh0SW5mby5wYWdlIDogaW5mby5wYWdlO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5nZXRCbG9ja0luZGV4ZXMocGFnZSk7XG4gICAgICAgICAgICB2YXIgbG9hZGVkQmxvY2tzID0gW107XG4gICAgICAgICAgICB0aGlzLmNoZWNrQW5kUmVzZXRDYWNoZShub3RpZnlBcmdzLnJlcXVlc3RUeXBlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbdmFsdWVdID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IucmVmcmVzaFJvd3MoX3RoaXMuY2FjaGVbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpcnR1YWxJbmZvOiBpbmZvLCBzdGFydEluZGV4OiBfdGhpcy5nZXRTdGFydEluZGV4KHZhbHVlLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhbiA9IH5+TWF0aC5tYXgocm93cy5sZW5ndGgsIF90aGlzLm1vZGVsLnBhZ2VTaXplKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbaW5kZXhlc1swXV0gPSByb3dzLnNsaWNlKDAsIG1lZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVtpbmRleGVzWzFdXSA9IHJvd3Muc2xpY2UobWVkaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXhBeGlzICYmIF90aGlzLmNhY2hlW3ZhbHVlXSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVt2YWx1ZV0gPSBfdGhpcy51cGRhdGVHcm91cFJvdyhfdGhpcy5jYWNoZVt2YWx1ZV0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LCBfdGhpcy5jYWNoZVt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWRCbG9ja3MucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcyA9IGxvYWRlZEJsb2NrcztcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0QmxvY2tJbmRleGVzID0gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBbcGFnZSArIChwYWdlIC0gMSksIHBhZ2UgKiAyXTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRQYWdlID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gYmxvY2sgJSAyID09PSAwID8gYmxvY2sgLyAyIDogKGJsb2NrICsgMSkgLyAyO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzQmxvY2tBdmFpbGFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbiB0aGlzLmNhY2hlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMubW9kZWwuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgYmxvY2tJbmRleGVzOiB0aGlzLmdldEJsb2NrSW5kZXhlcyh0aGlzLm1vZGVsLmN1cnJlbnRQYWdlKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdkb3duJyxcbiAgICAgICAgICAgICAgICBjb2x1bW5JbmRleGVzOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0U3RhcnRJbmRleCA9IGZ1bmN0aW9uIChibGssIGRhdGEsIGZ1bGwpIHtcbiAgICAgICAgICAgIGlmIChmdWxsID09PSB2b2lkIDApIHsgZnVsbCA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciBwYWdlID0gdGhpcy5nZXRQYWdlKGJsayk7XG4gICAgICAgICAgICB2YXIgZXZlbiA9IGJsayAlIDIgPT09IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAocGFnZSAtIDEpICogdGhpcy5tb2RlbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBmdWxsIHx8ICFldmVuID8gaW5kZXggOiBpbmRleCArIH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoY29udGVudCA9PT0gdm9pZCAwKSB7IGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZDsgfVxuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzTGVmdCA9IGNvbnRlbnQuc2Nyb2xsTGVmdCB8IDA7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuY09mZnNldHMpO1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IGNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBzTGVmdCA9IE1hdGgubWluKHRoaXMuY09mZnNldHNba2V5cy5sZW5ndGggLSAxXSAtIGNXaWR0aCwgc0xlZnQpO1xuICAgICAgICAgICAgdmFyIGNhbFdpZHRoID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gMiAqIGNXaWR0aCA6IGNXaWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IHNMZWZ0ICsgY1dpZHRoICsgKHNMZWZ0ID09PSAwID8gY2FsV2lkdGggOiAwKTtcbiAgICAgICAgICAgIGtleXMuc29tZShmdW5jdGlvbiAob2Zmc2V0LCBpbmR4LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFZhbCA9IF90aGlzLmNPZmZzZXRzW29mZnNldF07XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNMZWZ0IC0gY2FsV2lkdGggPD0gb2Zmc2V0VmFsICYmIGxlZnQgKyBjYWxXaWR0aCA+PSBvZmZzZXRWYWw7XG4gICAgICAgICAgICAgICAgaWYgKGJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaU9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgY2FsV2lkdGggPCBvZmZzZXRWYWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNoZWNrQW5kUmVzZXRDYWNoZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9IFsncGFnaW5nJywgJ3JlZnJlc2gnLCAnc29ydGluZycsICdmaWx0ZXJpbmcnLCAnc2VhcmNoaW5nJywgJ2dyb3VwaW5nJywgJ3VuZ3JvdXBpbmcnXVxuICAgICAgICAgICAgICAgIC5zb21lKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gYWN0aW9uID09PSB2YWx1ZTsgfSk7XG4gICAgICAgICAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbGVhcjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoQ29sT2Zmc2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gMDtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBjTGVuID0gY29scy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZpc2libGUgJiZcbiAgICAgICAgICAgICAgICAoIV90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uID8gX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbi5maWVsZCkgPCAwIDogY29sdW1uLnZpc2libGUpOyB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGMsIG4pIHsgcmV0dXJuIF90aGlzLmNPZmZzZXRzW25dID0gKF90aGlzLmNPZmZzZXRzW24gLSAxXSB8IDApICsgMzA7IH0pO1xuICAgICAgICAgICAgQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoY0xlbikpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBjb2wrKzsgfSkuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2ssIGkpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IGJsb2NrICsgZ0xlbjtcbiAgICAgICAgICAgICAgICBfdGhpcy5jT2Zmc2V0c1tibG9ja10gPSAoX3RoaXMuY09mZnNldHNbYmxvY2sgLSAxXSB8IDApICsgKGlzVmlzaWJsZShjb2xzW2ldKSA/IHBhcnNlSW50KGNvbHNbaV0ud2lkdGgsIDEwKSA6IDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUudXBkYXRlR3JvdXBSb3cgPSBmdW5jdGlvbiAoY3VycmVudCwgYmxvY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpcnN0ID0gY3VycmVudFswXTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKGtleSkgPCBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKGN1cnJlbnRGaXJzdCAmJiBjdXJyZW50Rmlyc3QuaXNEYXRhUm93KSB8fCBibG9jayAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pdGVyYXRlR3JvdXAgPSBmdW5jdGlvbiAoY3VycmVudCwgcm93cykge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaXJzdCA9IGN1cnJlbnRbMF07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rmlyc3QgJiYgY3VycmVudEZpcnN0LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUHJlc2VudCA9IGN1cnJlbnQuc29tZShmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd3Muc29tZShmdW5jdGlvbiAob1JvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9Sb3cgJiYgb1Jvdy5kYXRhLmZpZWxkICE9PSB1bmRlZmluZWQgJiYgb1Jvdy5kYXRhLmZpZWxkID09PSByb3cuZGF0YS5maWVsZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgb1Jvdy5kYXRhLmtleSA9PT0gcm93LmRhdGEua2V5O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzLnNsaWNlKG9mZnNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTb3J0KHBhcmVudCwgc29ydFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zLCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzID0gc29ydFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzb3J0ZWRDb2x1bW4gPSB7IGZpZWxkOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24gfTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBnQ29scyA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdDb2xzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gW3NvcnRlZENvbHVtbl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVkQ29scyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkKGdDb2xzW2ldLCBzb3J0ZWRDb2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbk5hbWUgPT09IGdDb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NvbCA9IHRoaXMuZ2V0U29ydENvbHVtbkZyb21GaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHsgZmllbGQ6IHNDb2wuZmllbGQsIGRpcmVjdGlvbjogc0NvbC5kaXJlY3Rpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gc29ydGVkQ29scztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnNbaW5kZXhdID0gc29ydGVkQ29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFNvcnRlZENvbCA9IHRoaXMuY29sdW1uTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9ICF0aGlzLmlzUmVtb3ZlID8ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfTtcbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8yLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpLmFsbG93U29ydGluZyA9PT0gZmFsc2UgfHwgdGhpcy5wYXJlbnQuaXNDb250ZXh0TWVudU9wZW4oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5hbGxvd011bHRpU29ydGluZykge1xuICAgICAgICAgICAgICAgIGlzTXVsdGlTb3J0ID0gZ09iai5hbGxvd011bHRpU29ydGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudCgpKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBhcmcxOiBjb2x1bW5OYW1lLCBhcmcyOiBkaXJlY3Rpb24sIGFyZzM6IGlzTXVsdGlTb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGlzTXVsdGlTb3J0O1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvcnRlZENvbHMoY29sdW1uTmFtZSwgaXNNdWx0aVNvcnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVTb3J0ZWRDb2xzID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuc29ydGVkQ29sdW1uc1tpXSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoMCwgdGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5wdXNoKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHV0aWxfMS5nZXRBY3R1YWxQcm9wRnJvbUNvbGwodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmNsZWFyU29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5yZW1vdmVTb3J0Q29sdW1uLCBhcmcxOiBmaWVsZCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kZWxDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgc29ydGVkQ29sdW1ucykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBzb3J0ZWRDb2x1bW5zID8gc29ydGVkQ29sdW1ucyA6IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2wuZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbihjb2wuZmllbGQsIGNvbC5kaXJlY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXNvcnRkaXJlY3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyU29ydGluZygpO1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucG9wVXBDbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdycHRvZ2dsZWJ0bicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbCcpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbGRpdicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yaGFuZGxlcicpICYmXG4gICAgICAgICAgICAgICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5tZW51JykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcm1lbnVkaXYnKSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbE9iaiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gIXRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGggPyAnYXNjZW5kaW5nJyA6XG4gICAgICAgICAgICAgICAgICAgICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICBpZiAoY29sT2JqLnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWF0ZVNvcnQodGFyZ2V0LCBlLCBjb2xPYmopO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3BVcChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUua2V5UHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCAmJiAoZS5hY3Rpb24gPT09ICdlbnRlcicgfHwgZS5hY3Rpb24gPT09ICdjdHJsRW50ZXInIHx8IGUuYWN0aW9uID09PSAnc2hpZnRFbnRlcicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZm9jdXMuZ2V0Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldCB8fCAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgfHwgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgfHwgdGhpcy5wYXJlbnQuZnJvemVuUm93cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYXRlU29ydCh0YXJnZXQsIGUsIGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmluaXRpYXRlU29ydCA9IGZ1bmN0aW9uICh0YXJnZXQsIGUsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAhdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCA/ICdhc2NlbmRpbmcnIDpcbiAgICAgICAgICAgICAgICAnZGVzY2VuZGluZyc7XG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSB8fCAodGhpcy5zb3J0U2V0dGluZ3MuYWxsb3dVbnNvcnQgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRlc2NlbmRpbmcnKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgJiYgIShnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGZpZWxkKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oZmllbGQsIGRpcmVjdGlvbiwgZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zaG93UG9wVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpIHx8IHRoaXMucGFyZW50LmlzQ29udGV4dE1lbnVPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utc29ydGRpcmVjdCBlLWljb25zIGUtaWNvbi1zb3J0ZGlyZWN0JyArICh0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoID4gMSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc29ydGRpcmVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5hZGRTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIGNvbHNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpU29ydCAmJiBjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSwgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcnRleHQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoZmlsdGVyRWxlbWVudCwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZVNvcnRJY29ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBvc2l0aW9uID8gcG9zaXRpb24gOiAwLCBsZW4gPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb3NpdGlvbikgPyBwb3NpdGlvbiArIDEgOiBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFtdLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZycsICdlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydG51bWJlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykucmVtb3ZlQ2hpbGQoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZUFyaWFBdHRyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnNvcnRlZENvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGNvbCkuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBcmlhQXR0cigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU29ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU29ydCA9IFNvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXJcIiwgXCIuLi8uLi9wYWdlci9wYWdlci1kcm9wZG93blwiLCBcIi4uLy4uL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgcGFnZXJfMSwgcGFnZXJfZHJvcGRvd25fMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBwYWdlcl8xLlBhZ2VyLkluamVjdChleHRlcm5hbF9tZXNzYWdlXzEuRXh0ZXJuYWxNZXNzYWdlLCBwYWdlcl9kcm9wZG93bl8xLlBhZ2VyRHJvcERvd24pO1xuICAgIHZhciBQYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZShwYXJlbnQsIHBhZ2VTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncyA9IHBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwYWdlck9iajtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEZXN0cm95KCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQucGFnZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy50ZW1wbGF0ZSA9IHRoaXMucGFyZW50LnBhZ2VyVGVtcGxhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcGFnZXInIH0pO1xuICAgICAgICAgICAgcGFnZXJPYmogPSB1dGlsXzEuZXh0ZW5kKHt9LCBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXModGhpcy5wYWdlU2V0dGluZ3MpKSwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyb3BEb3duQ2hhbmdlZDogdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogZ09iai5lbmFibGVSdGwsIGxvY2FsZTogZ09iai5sb2NhbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5hZGRBcmlhQXR0ci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LCBbJ3BhcmVudE9iaicsICdwcm9wTmFtZSddKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmogPSBuZXcgcGFnZXJfMS5QYWdlcihwYWdlck9iaik7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLnBhZ2VTaXplID0gZS5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkQXJpYUF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYWdlU2V0dGluZ3MudGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWVyaWNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbnVtZXJpY2NvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IG51bWVyaWNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ducycsIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtZmlyc3QnLCAnLmUtcHJldicsICcuZS1uZXh0JywgJy5lLWxhc3QnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5kYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmoucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50ID0gZS5jb3VudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlLCByZXF1ZXN0VHlwZTogJ3BhZ2luZycsXG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3UHJvcCA9IGUucHJvcGVydGllcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqW3Byb3BdID0gbmV3UHJvcFtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvcmNlQ2FuY2VsIHx8IHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb3JjZUNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmdvVG9QYWdlLCBhcmcxOiBlLmN1cnJlbnRQYWdlIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb3JjZUNhbmNlbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZQYWdlID0gdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IGUuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAncGFnaW5nJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2U6IHByZXZQYWdlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBlLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Ta2lwQWN0aW9uKGUuYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiBpbiBrZXlBY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGtleUFjdGlvbnNbZS5hY3Rpb25dKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5jYW5Ta2lwQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSB7XG4gICAgICAgICAgICAgICAgcGFnZVVwOiBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnNjcm9sbFRvcCAhPT0gMDsgfSxcbiAgICAgICAgICAgICAgICBwYWdlRG93bjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiAhKGVsLnNjcm9sbFRvcCA+PSBlbC5zY3JvbGxIZWlnaHQgLSBlbC5jbGllbnRIZWlnaHQpOyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRlbnQnKSAmJlxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuaXNFcXVhbE5vZGUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkKSAmJiBbJ3BhZ2VVcCcsICdwYWdlRG93biddLmluZGV4T2YoYWN0aW9uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZVthY3Rpb25dKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYWdlck9iai5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmVuYWJsZUV4dGVybmFsTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5leHRlcm5hbE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hcHBlbmRUb0VsZW1lbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0R3JpZFBhZ2VyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVG9FbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHRoaXMucmVuZGVyLFxuICAgICAgICAgICAgICAgIGVuZDogdGhpcy5hcHBlbmRUb0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgcmVhZHk6IHRoaXMuZGF0YVJlYWR5LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLm9uQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgdXBkYXRlTGF5b3V0OiB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLFxuICAgICAgICAgICAgICAgIGluYm91bmRDaGFuZ2U6IHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsXG4gICAgICAgICAgICAgICAga2V5UHJlc3M6IHRoaXMua2V5UHJlc3NIYW5kbGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmhhbmRsZXJzLmxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaGFuZGxlcnMuZW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnBhZ2VDb21wbGV0ZSwgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuaGFuZGxlcnMudXBkYXRlTGF5b3V0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMuaGFuZGxlcnMua2V5UHJlc3MsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5oYW5kbGVycy5sb2FkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5oYW5kbGVycy5lbmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wYWdlQ29tcGxldGUsIHRoaXMuaGFuZGxlcnMuY29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5oYW5kbGVycy51cGRhdGVMYXlvdXQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmhhbmRsZXJzLmtleVByZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucGFnZXJEZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJPYmogJiYgIXRoaXMucGFnZXJPYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZSA9IFBhZ2U7XG4gICAgdmFyIGtleUFjdGlvbnMgPSB7XG4gICAgICAgIHBhZ2VVcDogJy5lLXByZXYnLFxuICAgICAgICBwYWdlRG93bjogJy5lLW5leHQnLFxuICAgICAgICBjdHJsQWx0UGFnZURvd246ICcuZS1sYXN0JyxcbiAgICAgICAgY3RybEFsdFBhZ2VVcDogJy5lLWZpcnN0JyxcbiAgICAgICAgYWx0UGFnZVVwOiAnLmUtcHAnLFxuICAgICAgICBhbHRQYWdlRG93bjogJy5lLW5wJ1xuICAgIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9udW1lcmljLWNvbnRhaW5lclwiLCBcIi4vcGFnZXItbWVzc2FnZVwiLCBcIi4uL2dyaWQvYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFBhZ2VyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQYWdlcihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZGVmYXVsdENvbnN0YW50cyA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZUluZm86ICd7MH0gb2YgezF9IHBhZ2VzJyxcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zSW5mbzogJyh7MH0gaXRlbXMpJyxcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2VUb29sdGlwOiAnR28gdG8gZmlyc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2VUb29sdGlwOiAnR28gdG8gbGFzdCBwYWdlJyxcbiAgICAgICAgICAgICAgICBuZXh0UGFnZVRvb2x0aXA6ICdHbyB0byBuZXh0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZVRvb2x0aXA6ICdHbyB0byBwcmV2aW91cyBwYWdlJyxcbiAgICAgICAgICAgICAgICBuZXh0UGFnZXJUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlcicsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQYWdlclRvb2x0aXA6ICdHbyB0byBwcmV2aW91cyBwYWdlcicsXG4gICAgICAgICAgICAgICAgcGFnZXJEcm9wRG93bjogJ0l0ZW1zIHBlciBwYWdlJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lck1vZHVsZSA9IG5ldyBudW1lcmljX2NvbnRhaW5lcl8xLk51bWVyaWNDb250YWluZXIoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMucGFnZXJNZXNzYWdlTW9kdWxlID0gbmV3IHBhZ2VyX21lc3NhZ2VfMS5QYWdlck1lc3NhZ2UoX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZXh0ZXJuYWxNZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja3BhZ2VzaXplcygpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncGFnZXJkcm9wZG93bicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy50b3RhbFJlY29yZHNDb3VudCB8fCAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5leHRMYXN0RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXJpYUxhYmVsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NyZWF0ZWQnLCB7ICdjdXJyZW50UGFnZSc6IHRoaXMuY3VycmVudFBhZ2UsICd0b3RhbFJlY29yZHNDb3VudCc6IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ2N1cnJlbnRQYWdlJywgJ3BhZ2VTaXplJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlQ291bnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaE51bWVyaWNMaW5rcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbnRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrR29Ub1BhZ2UobmV3UHJvcC5jdXJyZW50UGFnZSwgb2xkUHJvcC5jdXJyZW50UGFnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTaXplJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG90YWxSZWNvcmRzQ291bnQnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXN0b21UZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTaXplcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja3BhZ2VzaXplcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSB0aGlzLmNvbXBpbGUodGhpcy50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVFeHRlcm5hbE1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVQYWdlck1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRMb2NhbGl6ZWRMYWJlbCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZU9iai5nZXRDb25zdGFudChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKHBhZ2VObykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU5vO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrcGFnZXNpemVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZVNpemVzID09PSB0cnVlIHx8IHRoaXMucGFnZVNpemVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuY2hlY2tHb1RvUGFnZSA9IGZ1bmN0aW9uIChuZXdQYWdlTm8sIG9sZFBhZ2VObykge1xuICAgICAgICAgICAgaWYgKG5ld1BhZ2VObyAhPT0gdGhpcy5jdXJyZW50UGFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlTm8gPSB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKG9sZFBhZ2VObykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gb2xkUGFnZU5vO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNQYWdlTm8gIT09IG5ld1BhZ2VObyAmJiAobmV3UGFnZU5vID49IDEgJiYgbmV3UGFnZU5vIDw9IHRoaXMudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmN1cnJlbnRQYWdlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVRdWVyeVN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0geyBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSwgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGljaycsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKCFhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucGFnZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1wYWdlcnRlbXBsYXRlJyk7XG4gICAgICAgICAgICB0aGlzLmNvbXBpbGUodGhpcy50ZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSwgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsIHBhZ2VDb3VudDogdGhpcy5wYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgdG90YWxSZWNvcmRzQ291bnQ6IHRoaXMudG90YWxSZWNvcmRzQ291bnQsIHRvdGFsUGFnZXM6IHRoaXMudG90YWxQYWdlc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0UGFnZXJUZW1wbGF0ZSgpKGRhdGEpO1xuICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKHRoaXMuZWxlbWVudCwgcmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVRvdGFsUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSAodGhpcy50b3RhbFJlY29yZHNDb3VudCAlIHRoaXMucGFnZVNpemUgPT09IDApID8gKHRoaXMudG90YWxSZWNvcmRzQ291bnQgLyB0aGlzLnBhZ2VTaXplKSA6XG4gICAgICAgICAgICAgICAgKHBhcnNlSW50KCh0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYWdlU2l6ZSkudG9TdHJpbmcoKSwgMTApICsgMSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRQYWdlclRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IGVqMl9iYXNlXzIuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUodGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb3RhbFBhZ2VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UgJiYgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5pbml0TG9jYWxpemF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVPYmogPSBuZXcgZWoyX2Jhc2VfMS5MMTBuKHRoaXMuZ2V0TW9kdWxlTmFtZSgpLCB0aGlzLmRlZmF1bHRDb25zdGFudHMsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9IHRoaXMuZ2V0VXBkYXRlZFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZiwgJ3BhZ2UnLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IHBhdGg6IHVwZGF0ZWRVcmwgfSwgJycsIHVwZGF0ZWRVcmwpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0VXBkYXRlZFVSTCA9IGZ1bmN0aW9uICh1cmksIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZWd4ID0gbmV3IFJlZ0V4cCgnKFs/fCZdKScgKyBrZXkgKyAnPS4qPygmfCN8JCknLCAnaScpO1xuICAgICAgICAgICAgaWYgKHVyaS5tYXRjaChyZWd4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmkucmVwbGFjZShyZWd4LCAnJDEnICsga2V5ICsgJz0nICsgdmFsdWUgKyAnJDInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHVyaS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSB1cmkucmVwbGFjZSgvLiojLywgJyMnKTtcbiAgICAgICAgICAgICAgICAgICAgdXJpID0gdXJpLnJlcGxhY2UoLyMuKi8sICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVyaSArICh1cmkuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JykgKyBrZXkgKyAnPScgKyB2YWx1ZSArIGhhc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXJGaXJzdFByZXZEaXZGb3JEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlck5leHRMYXN0RGl2Rm9yRGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tbGFzdCBlLWljb25zIGUtaWNvbi1sYXN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnbGFzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmFkZEFyaWFMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlcjtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZUV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVBhZ2VyTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEyKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEwKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXJyZW50UGFnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwidG90YWxSZWNvcmRzQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJycpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImN1c3RvbVRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJkcm9wRG93bkNoYW5nZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBQYWdlciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIFBhZ2VyKTtcbiAgICBleHBvcnRzLlBhZ2VyID0gUGFnZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL3BhZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOdW1lcmljQ29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtZXJpY0NvbnRhaW5lcihwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50ID0gdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOdW1lcmljQ29udGFpbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS51cGRhdGVUb3RhbFBhZ2VzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmtzSHRtbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaE51bWVyaWNMaW5rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsaW5rO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBwYWdlck9iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW51bWVyaWNjb250YWluZXInKTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1udW1lcmljaXRlbSBlLXNwYWNpbmcgZS1wYWdlci1kZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgcm9sZTogJ2xpbmsnLCB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnR290byBQYWdlICcgKyBpIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QobGluaywgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10sIFsnZS1wYWdlci1kZWZhdWx0J10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICAgICAgdGhpcy5saW5rcyA9IFtdLnNsaWNlLmNhbGwoZGl2LmNoaWxkTm9kZXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFnZXJFbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTnVtZXJpY0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtcGFnZXJjb250YWluZXInLCBhdHRyczogeyAncm9sZSc6ICduYXZpZ2F0aW9uJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3ROUHJldih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcmV2UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1udW1lcmljY29udGFpbmVyJyB9KSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck5leHRQYWdlclNldCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0Tkxhc3QodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJGaXJzdE5QcmV2ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maXJzdCBlLWljb25zIGUtaWNvbi1maXJzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2ZpcnN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByZXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXByZXYgZS1pY29ucyBlLWljb24tcHJldicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbdGhpcy5maXJzdCwgdGhpcy5wcmV2XSwgcGFnZXJDb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJQcmV2UGFnZXJTZXQgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuUFAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtcHAgZS1zcGFjaW5nJywgaW5uZXJIVE1MOiAnLi4uJyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlclRvb2x0aXAnKSwgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLlBQKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dFBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLk5QID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLW5wIGUtc3BhY2luZycsXG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiAnLi4uJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlclRvb2x0aXAnKSwgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlclRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBhZ2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuTlApO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJOZXh0Tkxhc3QgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbmV4dCBlLWljb25zIGUtaWNvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxhc3QgZS1pY29ucyBlLWljb24tbGFzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMubmV4dCwgdGhpcy5sYXN0XSwgcGFnZXJDb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnByZXZpb3VzUGFnZU5vID0gcGFnZXJPYmouY3VycmVudFBhZ2U7XG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGlzYWJsZScpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2luZGV4JykpKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTGlua3NIdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVNldDtcbiAgICAgICAgICAgIHZhciBwYWdlTm87XG4gICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSA9IHBhZ2VyT2JqLnRvdGFsUGFnZXMgPT09IDEgPyAxIDogcGFnZXJPYmouY3VycmVudFBhZ2U7XG4gICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgPiBwYWdlck9iai50b3RhbFBhZ2VzICYmIHBhZ2VyT2JqLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSA9IHBhZ2VyT2JqLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IHBhcnNlSW50KChwYWdlck9iai5jdXJyZW50UGFnZSAvIHBhZ2VyT2JqLnBhZ2VDb3VudCkudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICUgcGFnZXJPYmoucGFnZUNvdW50ID09PSAwICYmIGN1cnJlbnRQYWdlU2V0ID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlU2V0ID0gY3VycmVudFBhZ2VTZXQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlck9iai5wYWdlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhZ2VObyA9IChjdXJyZW50UGFnZVNldCAqIHBhZ2VyT2JqLnBhZ2VDb3VudCkgKyAxICsgaTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZU5vIDw9IHBhZ2VyT2JqLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc2V0QXR0cmlidXRlKCdpbmRleCcsIHBhZ2VOby50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5pbm5lckhUTUwgPSAhcGFnZXJPYmouY3VzdG9tVGV4dCA/IHBhZ2VOby50b1N0cmluZygpIDogcGFnZXJPYmouY3VzdG9tVGV4dCArIHBhZ2VObztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICE9PSBwYWdlTm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uY2xhc3NMaXN0LmFkZCgnZS1wYWdlci1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGlua3NbaV0sIFtdLCBbJ2UtY3VycmVudGl0ZW0nLCAnZS1hY3RpdmUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpcnN0LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAnMScpO1xuICAgICAgICAgICAgdGhpcy5sYXN0LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wcmV2LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgLSAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMubmV4dC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsIHBhZ2VyT2JqLnRvdGFsUGFnZXMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgLSAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1uZXh0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5QUC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhcnNlSW50KHRoaXMubGlua3NbMF0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgLSBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5OUC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhcnNlSW50KHRoaXMubGlua3NbdGhpcy5saW5rcy5sZW5ndGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2luZGV4JyksIDEwKSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU5leHRQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0Tkxhc3RTdHlsZXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGlua3NbKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgLSAxKSAlIHRoaXMucGFnZXJNb2R1bGUucGFnZUNvdW50XSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlRmlyc3ROUHJldlN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSBbJ2UtZmlyc3RwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZURpc2FibGVkID0gWydlLWZpcnN0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHByZXZQYWdlID0gWydlLXByZXZwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIHByZXZQYWdlRGlzYWJsZWQgPSBbJ2UtcHJldnBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucHJldiwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZmlyc3QsIGZpcnN0UGFnZSwgZmlyc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLCBwcmV2UGFnZSwgcHJldlBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlRGlzYWJsZWQsIHByZXZQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tcHJldicpLCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0JyksIGZpcnN0UGFnZURpc2FibGVkLCBmaXJzdFBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVQcmV2UGFnZXJTZXRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IHRoaXMucGFnZXJNb2R1bGUucGFnZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5QUCwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5QUCwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZSA9IHRoaXMubGlua3NbMF0uaW5uZXJIVE1MLnJlcGxhY2UocGFnZXJPYmouY3VzdG9tVGV4dCwgJycpO1xuICAgICAgICAgICAgaWYgKCFmaXJzdFBhZ2UubGVuZ3RoIHx8ICF0aGlzLmxpbmtzLmxlbmd0aCB8fCAocGFyc2VJbnQoZmlyc3RQYWdlLCAxMCkgKyBwYWdlck9iai5wYWdlQ291bnQgPiBwYWdlck9iai50b3RhbFBhZ2VzKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuTlAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuTlAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dE5MYXN0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxhc3RQYWdlID0gWydlLWxhc3RwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIGxhc3RQYWdlRGlzYWJsZWQgPSBbJ2UtbGFzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBuZXh0UGFnZSA9IFsnZS1uZXh0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBuZXh0UGFnZURpc2FibGVkID0gWydlLW5leHRwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBwYWdlck9iai50b3RhbFBhZ2VzIHx8IHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5sYXN0LCBsYXN0UGFnZURpc2FibGVkLCBsYXN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5uZXh0LCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWxhc3QnKSwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1uZXh0JyksIG5leHRQYWdlRGlzYWJsZWQsIG5leHRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2UsIGxhc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZSwgbmV4dFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1lcmljQ29udGFpbmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljQ29udGFpbmVyID0gTnVtZXJpY0NvbnRhaW5lcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvbnVtZXJpYy1jb250YWluZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZXJNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXJNZXNzYWdlKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFyZW50bXNnYmFyJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgSW5mb3JtYXRpb24nIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZW5vbXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlY291bnRtc2cnLCBzdHlsZXM6ICd0ZXh0YWxpZ246cmlnaHQnIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hcHBlbmQoW3RoaXMucGFnZU5vTXNnRWxlbSwgdGhpcy5wYWdlQ291bnRNc2dFbGVtXSwgZGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdChwYWdlck9iai5nZXRMb2NhbGl6ZWRMYWJlbCgnY3VycmVudFBhZ2VJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCA/IDAgOlxuICAgICAgICAgICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSwgcGFnZXJPYmoudG90YWxQYWdlcyB8fCAwXSkgKyAnICc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdChwYWdlck9iai5nZXRMb2NhbGl6ZWRMYWJlbCgndG90YWxJdGVtc0luZm8nKSwgW3BhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IHx8IDBdKTtcbiAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMucGFnZU5vTXNnRWxlbS50ZXh0Q29udGVudCArIHRoaXMucGFnZUNvdW50TXNnRWxlbS50ZXh0Q29udGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlTm9Nc2dFbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlQ291bnRNc2dFbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuc2hvd01lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChzdHIsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByZWd4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVneCA9IG5ldyBSZWdFeHAoJ1xcXFx7JyArIChpKSArICdcXFxcfScsICdnbScpO1xuICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKHJlZ3gsIGFyZ3NbaV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZXJNZXNzYWdlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlck1lc3NhZ2UgPSBQYWdlck1lc3NhZ2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL3BhZ2VyLW1lc3NhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kcm9wZG93bnNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZXJEcm9wRG93biA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyRHJvcERvd24ocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcmRyb3Bkb3duJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VzaXplcycgfSk7XG4gICAgICAgICAgICB2YXIgZHJvcERvd25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmRyb3Bkb3duJyB9KTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VGV4dERpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VyY29uc3RhbnQnIH0pO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgYXR0cnM6IHsgdHlwZTogJ3RleHQnLCB0YWJpbmRleDogJzEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyQ29ucyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jb25zdGFudCcsIGlubmVySFRNTDogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncGFnZXJEcm9wRG93bicpIH0pO1xuICAgICAgICAgICAgZHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgZGVmYXVsdFRleHREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYWdlckNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdi5hcHBlbmRDaGlsZChkZWZhdWx0VGV4dERpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5wYWdlckRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIHZhciBwYWdlU2l6ZXNNb2R1bGUgPSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplcztcbiAgICAgICAgICAgIHZhciBwYWdlU2l6ZXNBcnJheSA9IChwYWdlU2l6ZXNNb2R1bGUubGVuZ3RoID8gcGFnZVNpemVzTW9kdWxlIDogWzUsIDEwLCAxMiwgMjBdKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSAocGFnZVNpemVzQXJyYXkpLmluZGV4T2YodGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSkgPiAtMSA/IHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUgOiBwYWdlU2l6ZXNBcnJheVswXTtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0ID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3Qoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHBhZ2VTaXplc0FycmF5LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgY2hhbmdlOiB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuYXBwZW5kVG8oaW5wdXQpO1xuICAgICAgICAgICAgcGFnZXJPYmoucGFnZVNpemUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICBwYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgcGFnZXJPYmoudHJpZ2dlcignZHJvcERvd25DaGFuZ2VkJywgeyBwYWdlU2l6ZTogZGVmYXVsdFZhbHVlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplID0gdGhpcy5kcm9wRG93bkxpc3RPYmplY3QudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnRyaWdnZXIoJ2Ryb3BEb3duQ2hhbmdlZCcsIHsgcGFnZVNpemU6IHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LnZhbHVlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyb3BEb3duTGlzdE9iamVjdCAmJiAhdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5wYWdlckRyb3BEb3duRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyRHJvcERvd247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBhZ2VyRHJvcERvd24gPSBQYWdlckRyb3BEb3duO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1kcm9wZG93bi5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzYxX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXh0ZXJuYWxNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXh0ZXJuYWxNZXNzYWdlKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdleHRlcm5hbE1lc3NhZ2UnO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VyZXh0ZXJuYWxtc2cnLCBhdHRyczogeyAnYXJpYS1sYWJlbCc6ICdQYWdlciBleHRlcm5hbCBtZXNzYWdlJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuZXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMucGFnZXJNb2R1bGUuZXh0ZXJuYWxNZXNzYWdlLnRvU3RyaW5nKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5oaWRlTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4dGVybmFsTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXh0ZXJuYWxNZXNzYWdlID0gRXh0ZXJuYWxNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9leHRlcm5hbC1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9yZW5kZXJlci9maWx0ZXItbWVudS1yZW5kZXJlclwiLCBcIi4uL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyXCIsIFwiLi4vYWN0aW9ucy9leGNlbC1maWx0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVqMl9iYXNlXzIsIGVqMl9kYXRhXzEsIGV2ZW50cywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgdXRpbF8yLCBmaWx0ZXJfbWVudV9yZW5kZXJlcl8xLCBjaGVja2JveF9maWx0ZXJfMSwgZXhjZWxfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMubmV4dEZsTWVudU9wZW4gPSAnJztcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHsgJ21lbnUnOiBmaWx0ZXJfbWVudV9yZW5kZXJlcl8xLkZpbHRlck1lbnVSZW5kZXJlciwgJ2NoZWNrYm94JzogY2hlY2tib3hfZmlsdGVyXzEuQ2hlY2tCb3hGaWx0ZXIsICdleGNlbCc6IGV4Y2VsX2ZpbHRlcl8xLkV4Y2VsRmlsdGVyIH07XG4gICAgICAgICAgICB0aGlzLmZpbHRlck9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ2NvbnRhaW5zJywgZW5kc1dpdGg6ICdlbmRzd2l0aCcsIGVxdWFsOiAnZXF1YWwnLCBncmVhdGVyVGhhbjogJ2dyZWF0ZXJ0aGFuJywgZ3JlYXRlclRoYW5PckVxdWFsOiAnZ3JlYXRlcnRoYW5vcmVxdWFsJyxcbiAgICAgICAgICAgICAgICBsZXNzVGhhbjogJ2xlc3N0aGFuJywgbGVzc1RoYW5PckVxdWFsOiAnbGVzc3RoYW5vcmVxdWFsJywgbm90RXF1YWw6ICdub3RlcXVhbCcsIHN0YXJ0c1dpdGg6ICdzdGFydHN3aXRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmx0ckRsZ0RldGFpbHMgPSB7IGZpZWxkOiAnJywgaXNPcGVuOiBmYWxzZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRDdXN0b21PcGVyYXRvcnMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbHRyRWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1maWx0ZXJiYXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsdHJFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShmbHRyRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIsIGdPYmopO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHJlbmRlciA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLCBuZXcgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMS5GaWx0ZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gdGhpcy5nZW5lcmF0ZVJvdygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuZGF0YSA9IHRoaXMudmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb3dSZW5kZXJlci5yZW5kZXIocm93LCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGV0YWlsaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuY2xhc3NOYW1lID0gJ2UtZmlsdGVyYmFyY2VsbCBlLW1hc3RlcmNlbGwnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBnQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHRvcGxlZnRjZWxsJykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ0NlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ0NlbGxzW2dDZWxscy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKCdlLWxhc3Rncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5nZW5lcmF0ZUNlbGxzKCk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1bW15ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoZHVtbXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBjZWxsVHlwZSkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ3Jvd0lkJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSA/IGNlbGxUeXBlIDogZW51bV8xLkNlbGxUeXBlLkZpbHRlcixcbiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcyc6IHsgdGl0bGU6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRmlsdGVyYmFyVGl0bGUnKSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkTmFtZSwgb3BlcmF0b3I6IHRoaXMub3BlcmF0b3IsIHZhbHVlOiB0aGlzLnZhbHVlLCBwcmVkaWNhdGU6IHRoaXMucHJlZGljYXRlLFxuICAgICAgICAgICAgICAgIG1hdGNoQ2FzZTogdGhpcy5tYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlOiB7fSwgYWN0dWFsT3BlcmF0b3I6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQodGhpcy5maWVsZE5hbWUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnNbaW5kZXhdID0gdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLnB1c2godGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2V0RmlsdGVyZWRDb2xzSW5kZXhCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gIXRoaXMuaXNSZW1vdmUgPyB7XG4gICAgICAgICAgICAgICAgY3VycmVudEZpbHRlck9iamVjdDogdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0LCBjdXJyZW50RmlsdGVyaW5nQ29sdW1uOiB0aGlzLmNvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMudXBkYXRlU3BhbkNsYXNzLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgJ2ZvY3VzaW4nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ5Q29sdW1uKGNvbC5maWVsZCwgY29sLm9wZXJhdG9yLCBjb2wudmFsdWUsIGNvbC5wcmVkaWNhdGUsIGNvbC5tYXRjaENhc2UsIGNvbC5hY3R1YWxGaWx0ZXJWYWx1ZSwgY29sLmFjdHVhbE9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlck1lbnVDbG9zZSwgdGhpcy5maWx0ZXJNZW51Q2xvc2UsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZmlsdGVyT3BlbiwgdGhpcy5jb2x1bW5NZW51RmlsdGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5maWx0ZXJJY29uQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyT3BlbiwgdGhpcy5jb2x1bW5NZW51RmlsdGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyTWVudUNsb3NlLCB0aGlzLmZpbHRlck1lbnVDbG9zZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmZpbHRlckljb25DbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlck1lbnVDbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmZsdHJEbGdEZXRhaWxzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNvbHVtbk1lbnVGaWx0ZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBhcmdzLmNvbDtcbiAgICAgICAgICAgIHZhciBlbGUgPSBlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy50YXJnZXQsICcjJyArIGFyZ3MuaWQpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuaXNDbG9zZSAmJiAhZWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyRGlhbG9nT3Blbih0aGlzLmNvbHVtbiwgYXJncy50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckRpYWxvZ09wZW4gPSBmdW5jdGlvbiAoY29sLCB0YXJnZXQsIGxlZnQsIHRvcCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlck1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZSA9IG5ldyB0aGlzLnR5cGVbY29sLmZpbHRlci50eXBlIHx8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGVdKHRoaXMucGFyZW50LCBnT2JqLmZpbHRlclNldHRpbmdzLCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLmN1c3RvbU9wZXJhdG9ycywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5vcGVuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBjb2wudHlwZSwgZmllbGQ6IGNvbC5maWVsZCwgZGlzcGxheU5hbWU6IGNvbC5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IGNvbC5maWx0ZXIuZGF0YVNvdXJjZSB8fCBnT2JqLmRhdGFTb3VyY2UsIGZvcm1hdDogY29sLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbHVtbnM6IGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgc29ydGVkQ29sdW1uczogZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucywgZm9ybWF0Rm46IGNvbC5nZXRGb3JtYXR0ZXIoKSxcbiAgICAgICAgICAgICAgICBwYXJzZXJGbjogY29sLmdldFBhcnNlcigpLCBxdWVyeTogZ09iai5xdWVyeSwgdGVtcGxhdGU6IGNvbC5nZXRGaWx0ZXJJdGVtVGVtcGxhdGUoKSxcbiAgICAgICAgICAgICAgICBoaWRlU2VhcmNoYm94OiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIuaGlkZVNlYXJjaGJveCkgPyBmYWxzZSA6IGNvbC5maWx0ZXIuaGlkZVNlYXJjaGJveCxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLmZpbHRlckhhbmRsZXIuYmluZCh0aGlzKSwgbG9jYWxpemVkU3RyaW5nczoge30sXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHsgWDogbGVmdCwgWTogdG9wIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGw7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJDZWxsID0gZ09iai5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLmNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhdGhpcy5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZmlsdGVyQnlDb2x1bW4sIGFyZzE6IGZpZWxkTmFtZSwgYXJnMjogZmlsdGVyT3BlcmF0b3IsIGFyZzM6IGZpbHRlclZhbHVlLCBhcmc0OiBwcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgICAgIGFyZzU6IG1hdGNoQ2FzZSwgYXJnNjogYWN0dWFsRmlsdGVyVmFsdWUsIGFyZzc6IGFjdHVhbE9wZXJhdG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBtYXRjaENhc2UgfHwgZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlIHx8ICdhbmQnO1xuICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IGZpbHRlck9wZXJhdG9yO1xuICAgICAgICAgICAgZmlsdGVyVmFsdWUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmaWx0ZXJWYWx1ZSkgJiYgZmlsdGVyVmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbi50eXBlID09PSAnbnVtYmVyJyB8fCB0aGlzLmNvbHVtbi50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZE5hbWUpLnNldEF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyVmFsdWUubGVuZ3RoIDwgMSB8fCB0aGlzLmNoZWNrRm9yU2tpcElucHV0KHRoaXMuY29sdW1uLCBmaWx0ZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgPyAnJyA6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInICYmIGZpbHRlckNlbGwudmFsdWUgIT09IGZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2VsbC52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQodGhpcy5jb2x1bW4uZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGaWx0ZXJPYmplY3Q6IHRoaXMuY3VycmVudEZpbHRlck9iamVjdCwgY3VycmVudEZpbHRlcmluZ0NvbHVtbjogdGhpcy5jb2x1bW4gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4uZmllbGQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dGaWx0ZXJCYXJTdGF0dXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUucHJvcGVydGllc1twcm9wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudC5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnVwZGF0ZUV4dGVybmFsTWVzc2FnZSgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWZyZXNoSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2xlYXJGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHV0aWxfMS5nZXRBY3R1YWxQcm9wRnJvbUNvbGwodGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zKTtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmNsZWFyRmlsdGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkKGNvbHNbaV0uZmllbGQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9ICcnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jaGVja0FscmVhZHlDb2xGaWx0ZXJlZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZmllbGQgPT09IGZpZWxkICYmIGNvbC52YWx1ZSA9PT0gdGhpcy52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICBjb2wub3BlcmF0b3IgPT09IHRoaXMub3BlcmF0b3IgJiYgY29sLnByZWRpY2F0ZSA9PT0gdGhpcy5wcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGlzQ2xlYXJGaWx0ZXJCYXIpIHtcbiAgICAgICAgICAgIHZhciBmQ2VsbDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgYXJnMTogZmllbGQsIGFyZzI6IGlzQ2xlYXJGaWx0ZXJCYXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJyAmJiAhaXNDbGVhckZpbHRlckJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZkNlbGwgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignIycgKyBjb2xzW2ldLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZXNbZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmx0ckVsZW1lbnQgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgZmx0ckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgIT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbHRyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1pY29uLWZpbHRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIGVqMl9iYXNlXzIubWF0Y2hlcyh0YXJnZXQsICcuZS1maWx0ZXJiYXIgaW5wdXQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKHRhcmdldC5pZC5zcGxpdCgnXycpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDcm9zc0ljb24odGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZmlsdGVyU2V0dGluZ3MubW9kZSA9PT0gJ2ltbWVkaWF0ZScgfHwgZS5rZXlDb2RlID09PSAxMykgJiYgZS5rZXlDb2RlICE9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0YXJnZXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGaWx0ZXIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZVNwYW5DbGFzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNhbmNlbCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRleHQgPSB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICB0YXJnZXRUZXh0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIHRhcmdldFRleHQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnZm9jdXNpbicgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJ0ZXh0JykgJiYgIXRhcmdldC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RGaWx0ZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNyb3NzSWNvbih0YXJnZXQpO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnZm9jdXNpbicgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVydGV4dCcpICYmIHRoaXMubGFzdEZpbHRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVDcm9zc0ljb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZSgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlRmlsdGVyTXNnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIHZhciBmb3JtYXRlciA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyU2V0dGluZ3Muc2hvd0ZpbHRlckJhclN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+IDAgJiYgdGhpcy5maWx0ZXJTdGF0dXNNc2cgIT09IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5zW2luZGV4XS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSAnICYmICc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSBjb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB0aGlzLnZhbHVlc1tjb2x1bW4uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmoudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKHRoaXMuZmlsdGVyU3RhdHVzTXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jaGVja0ZvclNraXBJbnB1dCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaXNTa2lwO1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz0nLCAnICcsICchJ107XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9kYXRhXzEuRGF0YVV0aWwub3BlcmF0b3JTeW1ib2xzW3ZhbHVlXSB8fCBza2lwSW5wdXQuaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpc1NraXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVfMSA9IHZhbHVlOyBfaSA8IHZhbHVlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2YWx1ZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBJbnB1dC5pbmRleE9mKHZhbCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc1NraXA7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0ZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5vblRpbWVyVGljaygpOyB9LCBlLmtleUNvZGUgPT09IDEzID8gMCA6IHRoaXMuZmlsdGVyU2V0dGluZ3MuaW1tZWRpYXRlTW9kZURlbGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblRpbWVyVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpXG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsdGVyRWxlbWVudC52YWx1ZSkpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZpbHRlclZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCeUNvbHVtbih0aGlzLmNvbHVtbi5maWVsZCwgdGhpcy5vcGVyYXRvciwgdGhpcy52YWx1ZSwgdGhpcy5wcmVkaWNhdGUsIHRoaXMubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuY29sdW1uLmZpZWxkXSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyRWxlbWVudC52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS52YWxpZGF0ZUZpbHRlclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc+JywgJzwnLCAnPScsICchJ107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWx1ZVtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlLnN1YnN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSAnJyAmJiB2YWx1ZS5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWVGb3JtYXR0ZXIuZnJvbVZpZXcodGhpcy52YWx1ZSwgdGhpcy5jb2x1bW4uZ2V0UGFyc2VyKCksIHRoaXMuY29sdW1uLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3BlcmF0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5zdGFydHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLmNoYXJBdCh2YWx1ZS5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZW5kc1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE9wZXJhdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlT3AgPSB2YWx1ZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICB2YXIgbXVsdGlwbGVPcCA9IHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9ycyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHsgJz0nOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbCwgJyEnOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5ub3RFcXVhbCB9LCBlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9scyk7XG4gICAgICAgICAgICBpZiAob3BlcmF0b3JzLmhhc093blByb3BlcnR5KHNpbmdsZU9wKSB8fCBvcGVyYXRvcnMuaGFzT3duUHJvcGVydHkobXVsdGlwbGVPcCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW3NpbmdsZU9wXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW211bHRpcGxlT3BdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5sZXNzVGhhbiB8fCB0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5ncmVhdGVyVGhhbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmNoYXJBdCgwKSA9PT0gJz0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yICsgJ29yZXF1YWwnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1maWx0ZXJiYXJjZWxsJykpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbHMuc3BsaWNlKGUudG9JbmRleCwgMCwgZmlsdGVyQ2VsbHMuc3BsaWNlKGUuZnJvbUluZGV4LCAxKVswXSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpbHRlckNlbGxzXzEgPSBmaWx0ZXJDZWxsczsgX2kgPCBmaWx0ZXJDZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZmlsdGVyQ2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldExvY2FsaXplZEN1c3RvbU9wZXJhdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBudW1PcHRyID0gW1xuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdlcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRXF1YWwnKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdncmVhdGVyVGhhbicsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JlYXRlclRoYW4nKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdncmVhdGVyVGhhbk9yRXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyZWF0ZXJUaGFuT3JFcXVhbCcpIH0sXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2xlc3NUaGFuJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdMZXNzVGhhbicpIH0sXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2xlc3NUaGFuT3JFcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTGVzc1RoYW5PckVxdWFsJykgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnbm90RXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ05vdEVxdWFsJykgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tT3BlcmF0b3JzID0ge1xuICAgICAgICAgICAgICAgIHN0cmluZ09wZXJhdG9yOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdzdGFydHNXaXRoJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTdGFydHNXaXRoJykgfSxcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2VuZHNXaXRoJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFbmRzV2l0aCcpIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdjb250YWlucycsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ29udGFpbnMnKSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VxdWFsJykgfSwgeyB2YWx1ZTogJ25vdEVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdOb3RFcXVhbCcpIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG51bWJlck9wZXJhdG9yOiBudW1PcHRyLFxuICAgICAgICAgICAgICAgIGRhdGVPcGVyYXRvcjogbnVtT3B0cixcbiAgICAgICAgICAgICAgICBkYXRldGltZU9wZXJhdG9yOiBudW1PcHRyLFxuICAgICAgICAgICAgICAgIGJvb2xlYW5PcGVyYXRvcjogW1xuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VxdWFsJykgfSwgeyB2YWx1ZTogJ25vdEVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdOb3RFcXVhbCcpIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZmlsdGVySWNvbkNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJtZW51ZGl2JykgJiYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdtZW51JyB8fFxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdjaGVja2JveCcgfHwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2V4Y2VsJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5VWlkKHV0aWxfMi5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgdmFyIGdDbGllbnQgPSBnT2JqLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGZDbGllbnQgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2w7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmx0ckRsZ0RldGFpbHMuZmllbGQgPT09IGNvbC5maWVsZCAmJiB0aGlzLmZsdHJEbGdEZXRhaWxzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlck1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZsdHJEbGdEZXRhaWxzID0geyBmaWVsZDogY29sLmZpZWxkLCBpc09wZW46IHRydWUgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckRpYWxvZ09wZW4odGhpcy5jb2x1bW4sIHRhcmdldCwgZkNsaWVudC5yaWdodCAtIGdDbGllbnQubGVmdCwgZkNsaWVudC5ib3R0b20gLSBnQ2xpZW50LnRvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnbWVudScgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnY2hlY2tib3gnIHx8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdleGNlbCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZXBpY2tlckVsZSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGF5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMi5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1maWx0ZXItcG9wdXAnKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcm1lbnVkaXYnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZmlsdGVyTW9kdWxlICYmXG4gICAgICAgICAgICAgICAgICAgICghdXRpbF8yLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXBvcHVwLXdyYXBwZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCFlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZmlsdGVyLWl0ZW0uZS1tZW51LWl0ZW0nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICghdXRpbF8yLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXBvcHVwJykpKSAmJiAhZGF0ZXBpY2tlckVsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbG9zZURpYWxvZyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJJY29uRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKCdmaWVsZCcsIHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsLCBhcmdzLmZpZWxkKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBkYXRhTWFuYWdlci5leGVjdXRlTG9jYWwocXVlcnkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W2ldLmZpZWxkID09PSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnNbal0uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ID8gJy5lLWNvbHVtbm1lbnUnIDogJy5lLWljb24tZmlsdGVyJztcbiAgICAgICAgICAgIGZpbHRlckljb25FbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChhcmdzLmZpZWxkKS5xdWVyeVNlbGVjdG9yKGljb25DbGFzcyk7XG4gICAgICAgICAgICBpZiAoYXJncy5hY3Rpb24gPT09ICdmaWx0ZXJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmNvbmNhdChhcmdzLmZpbHRlckNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmIGZpbHRlckljb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVySWNvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVySWNvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXIgPSBGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpbHRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1maWx0ZXJiYXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmFsbG93RmlsdGVyaW5nKSB8fCBjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWZsdHJ0ZW1wJyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpbm5lckRJViwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmx0cnRlbXBkaXYnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUuY3JlYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnLCBjbGFzc05hbWU6ICdlLWZpbHRlclVpX2lucHV0IGUtZmlsdGVydGV4dCBlLWZsdHJUZW1wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAnc2VhcmNoJywgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGNvbHVtbjogY29sdW1uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5jcmVhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGVtcChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdlLWZpbHRlcmRpdiBlLWZsdHJpbnB1dGRpdidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnLCBjbGFzc05hbWU6ICdlLWZpbHRlcnRleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VhcmNoJywgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0ICsgY2VsbC5hdHRyaWJ1dGVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2NlbGwuY29sdW1uLmZpZWxkXSA/IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdIDogJycsIHJvbGU6ICdzZWFyY2gnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2FuY2VsIGUtaGlkZSBlLWljb25zIGUtaWNvbi1oaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ2NsZWFyIGZpbHRlciBjZWxsJywgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcgPT09IGZhbHNlIHx8IGNvbHVtbi5maWVsZCA9PT0gJycgfHwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmFsbG93RmlsdGVyaW5nKSB8fCBjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlUmVhZCA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5yZWFkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVXcml0ZSA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS53cml0ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGVsZW1lbnQ6IGlucHV0LCBjb2x1bW46IGNvbHVtbiB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlUmVhZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVhZCA9IGFyZ3MuY29sdW1uID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVJlYWQsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVdyaXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVXcml0ZSA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcGxhdGVXcml0ZSwgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlLmNhbGwodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSHRtbChub2RlLCBpbm5lckRJVik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChpbm5lckh0bWwpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGaWx0ZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXJDZWxsUmVuZGVyZXIgPSBGaWx0ZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi9maWx0ZXItbWVudS1vcGVyYXRvclwiLCBcIi4vc3RyaW5nLWZpbHRlci11aVwiLCBcIi4vbnVtYmVyLWZpbHRlci11aVwiLCBcIi4vYm9vbGVhbi1maWx0ZXItdWlcIiwgXCIuL2RhdGUtZmlsdGVyLXVpXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9wb3B1cHNfMSwgZmlsdGVyX21lbnVfb3BlcmF0b3JfMSwgc3RyaW5nX2ZpbHRlcl91aV8xLCBudW1iZXJfZmlsdGVyX3VpXzEsIGJvb2xlYW5fZmlsdGVyX3VpXzEsIGRhdGVfZmlsdGVyX3VpXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGaWx0ZXJNZW51UmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGaWx0ZXJNZW51UmVuZGVyZXIocGFyZW50LCBmaWx0ZXJTZXR0aW5ncywgc2VydmljZUxvY2F0b3IsIGN1c3RvbUZsdHJPcGVyYXRvcnMsIGZsdHJPYmopIHtcbiAgICAgICAgICAgIHRoaXMuY29sVHlwZXMgPSB7XG4gICAgICAgICAgICAgICAgJ3N0cmluZyc6IHN0cmluZ19maWx0ZXJfdWlfMS5TdHJpbmdGaWx0ZXJVSSwgJ251bWJlcic6IG51bWJlcl9maWx0ZXJfdWlfMS5OdW1iZXJGaWx0ZXJVSSwgJ2RhdGUnOiBkYXRlX2ZpbHRlcl91aV8xLkRhdGVGaWx0ZXJVSSwgJ2Jvb2xlYW4nOiBib29sZWFuX2ZpbHRlcl91aV8xLkJvb2xlYW5GaWx0ZXJVSSwgJ2RhdGV0aW1lJzogZGF0ZV9maWx0ZXJfdWlfMS5EYXRlRmlsdGVyVUlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRmlsdGVyT3BlcmF0b3JzID0gY3VzdG9tRmx0ck9wZXJhdG9ycztcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT2JqID0gZmx0ck9iajtcbiAgICAgICAgICAgIHRoaXMuZmxNdWlPYmogPSBuZXcgZmlsdGVyX21lbnVfb3BlcmF0b3JfMS5GbE1lbnVPcHRyVUkodGhpcy5wYXJlbnQsIHRoaXMuY3VzdG9tRmlsdGVyT3BlcmF0b3JzLCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5vcGVuRGlhbG9nID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChhcmdzLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sLmZpbHRlcikgfHwgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2wuZmlsdGVyLnR5cGUpIHx8IHRoaXMuY29sLmZpbHRlci50eXBlID09PSAnbWVudScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEbGdDb250ZW50KGFyZ3MudGFyZ2V0LCB0aGlzLmNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGxnT2JqLmVsZW1lbnQuaWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGxnT2JqICYmICF0aGlzLmRsZ09iai5pc0Rlc3Ryb3llZCAmJiBlbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5maWx0ZXJNZW51Q2xvc2UsIHsgZmllbGQ6IHRoaXMuY29sLmZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZShlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJEbGdDb250ZW50ID0gZnVuY3Rpb24gKHRhcmdldCwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbWFpbkRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS1tYWluZGl2JywgaWQ6IGNvbHVtbi51aWQgKyAnLWZsbWVudScgfSk7XG4gICAgICAgICAgICB0aGlzLmRsZ0RpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudScsIGlkOiBjb2x1bW4udWlkICsgJy1mbG1kbGcnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRsZ0Rpdik7XG4gICAgICAgICAgICB0aGlzLmRsZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiB0aGlzLmRpYWxvZ0NyZWF0ZWQuYmluZCh0aGlzLCB0YXJnZXQsIGNvbHVtbiksXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpID8geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfSA6IHsgWDogJycsIFk6ICcnIH0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXZpY2UnKSA/IGRvY3VtZW50LmJvZHkgOiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5maWx0ZXJCdG5DbGljay5iaW5kKHRoaXMsIGNvbHVtbiksXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRmlsdGVyQnV0dG9uJyksIGlzUHJpbWFyeTogdHJ1ZSwgY3NzQ2xhc3M6ICdlLWZsbWVudS1va2J0bidcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuY2xlYXJCdG5DbGljay5iaW5kKHRoaXMsIGNvbHVtbiksXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NsZWFyQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1mbG1lbnUtY2FuY2VsYnRuJyB9XG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1haW5EaXYsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtYmlnZ2VyJykpKSB8fCB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXZpY2UnKSA/IDI2MCA6IDI1MCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9LFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1maWx0ZXItcG9wdXAnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5kaWFsb2dDcmVhdGVkID0gZnVuY3Rpb24gKHRhcmdldCwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5nZXRGaWx0ZXJNZW51UG9zdGlvbih0YXJnZXQsIHRoaXMuZGxnT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlsdGVyVUkodGFyZ2V0LCBjb2x1bW4pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5maWx0ZXJEaWFsb2dDcmVhdGVkLCB7fSk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICczNTBweCc7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlTWV0aG9kKGNvbHVtbiwgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGNvbHVtbi51aWQgKyAnLWZsbWVudScpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGaWx0ZXJVSSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNvbCkge1xuICAgICAgICAgICAgdmFyIGRsZ0NvbmV0bnRFbGUgPSB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZsbWVudS1tYWluZGl2Jyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck9wZXJhdG9yVUkoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2wpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGbFZhbHVlVUkoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2wpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlck9wZXJhdG9yVUkgPSBmdW5jdGlvbiAoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHRoaXMuZmxNdWlPYmoucmVuZGVyT3BlcmF0b3JVSShkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbHVtbiwgdGhpcy5kbGdPYmopO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZsVmFsdWVVSSA9IGZ1bmN0aW9uIChkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LXZhbHVlZGl2JyB9KTtcbiAgICAgICAgICAgIGRsZ0NvbmV0bnRFbGUuYXBwZW5kQ2hpbGQodmFsdWVEaXYpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHRhcmdldDogdmFsdWVEaXYsIGNvbHVtbjogY29sdW1uLCBnZXRPcHRySW5zdGFuY2U6IHRoaXMuZmxNdWlPYmosIGRpYWxvZ09iajogdGhpcy5kbGdPYmogfTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZW9mRmlsdGVyVUkgPSBuZXcgdGhpcy5jb2xUeXBlc1tjb2x1bW4udHlwZV0odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyLnVpKVxuICAgICAgICAgICAgICAgICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXIudWkuY3JlYXRlKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sdW1uLmZpbHRlci51aS5jcmVhdGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2x1bW4uZmlsdGVyLnVpLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLCB0YXJnZXQ6IHZhbHVlRGl2LFxuICAgICAgICAgICAgICAgICAgICBnZXRPcHRySW5zdGFuY2U6IHRoaXMuZmxNdWlPYmosIGRpYWxvZ09iajogdGhpcy5kbGdPYmpcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlb2ZGaWx0ZXJVSS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwgdGFyZ2V0OiB2YWx1ZURpdixcbiAgICAgICAgICAgICAgICAgICAgZ2V0T3B0ckluc3RhbmNlOiB0aGlzLmZsTXVpT2JqLCBsb2NhbGl6ZVRleHQ6IHRoaXMubDEwbiwgZGlhbG9nT2JqOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLndyaXRlTWV0aG9kID0gZnVuY3Rpb24gKGNvbCwgZGxnQ29udGVudEVsZSkge1xuICAgICAgICAgICAgdmFyIGZsVmFsdWU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZGxnQ29udGVudEVsZS5xdWVyeVNlbGVjdG9yKCcuZS1mbG1lbnUtdmFsaW5wdXQnKTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZW9mRmlsdGVyVUkgPSBuZXcgdGhpcy5jb2xUeXBlc1tjb2wudHlwZV0odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBjb2x1bW4uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxWYWx1ZSA9IGNvbHVtbi52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlcikgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlci51aSlcbiAgICAgICAgICAgICAgICAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLnVpLndyaXRlKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmZpbHRlci51aS53cml0ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbC5maWx0ZXIudWkud3JpdGUoeyBjb2x1bW46IGNvbCwgdGFyZ2V0OiB0YXJnZXQsIHBhcmVudDogdGhpcy5wYXJlbnQsIGZpbHRlcmVkVmFsdWU6IGZsVmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZW9mRmlsdGVyVUkud3JpdGUoeyBjb2x1bW46IGNvbCwgdGFyZ2V0OiB0YXJnZXQsIHBhcmVudDogdGhpcy5wYXJlbnQsIGZpbHRlcmVkVmFsdWU6IGZsVmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUuZmlsdGVyQnRuQ2xpY2sgPSBmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgICB2YXIgZmxWYWx1ZTtcbiAgICAgICAgICAgIHZhciBmbE9wdHJWYWx1ZTtcbiAgICAgICAgICAgIHZhciB0YXJnID0gdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1mbG1lbnUtdmFsdWVkaXYgaW5wdXQnKTtcbiAgICAgICAgICAgIGZsT3B0clZhbHVlID0gdGhpcy5mbE11aU9iai5nZXRGbE9wZXJhdG9yKCk7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VvZkZpbHRlclVJID0gbmV3IHRoaXMuY29sVHlwZXNbY29sLnR5cGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZpbHRlcikgJiZcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLnVpKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLnVpLnJlYWQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZmlsdGVyLnVpLnJlYWQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmbFZhbHVlID0gY29sLmZpbHRlci51aS5yZWFkKHsgZWxlbWVudDogdGFyZywgY29sdW1uOiBjb2wsIG9wZXJhdG9yOiBmbE9wdHJWYWx1ZSwgZmx0ck9iajogdGhpcy5maWx0ZXJPYmogfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZW9mRmlsdGVyVUkucmVhZCh0YXJnLCBjb2wsIGZsT3B0clZhbHVlLCB0aGlzLmZpbHRlck9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gdGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgPyAnLmUtY29sdW1ubWVudScgOiAnLmUtaWNvbi1maWx0ZXInO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZD1cIicgKyBjb2wudWlkICsgJ1wiXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgZmxJY29uID0gY29sdW1uLnF1ZXJ5U2VsZWN0b3IoaWNvbkNsYXNzKTtcbiAgICAgICAgICAgIGlmIChmbEljb24pIHtcbiAgICAgICAgICAgICAgICBmbEljb24uY2xhc3NMaXN0LmFkZCgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLmNsZWFyQnRuQ2xpY2sgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck9iai5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gdGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgPyAnLmUtY29sdW1ubWVudScgOiAnLmUtaWNvbi1maWx0ZXInO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZD1cIicgKyBjb2x1bW4udWlkICsgJ1wiXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgZmxJY29uID0gY29sLnF1ZXJ5U2VsZWN0b3IoaWNvbkNsYXNzKTtcbiAgICAgICAgICAgIGlmIChmbEljb24pIHtcbiAgICAgICAgICAgICAgICBmbEljb24uY2xhc3NMaXN0LnJlbW92ZSgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGaWx0ZXJNZW51UmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZpbHRlck1lbnVSZW5kZXJlciA9IEZpbHRlck1lbnVSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9maWx0ZXItbWVudS1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIGVqMl9iYXNlXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RyaW5nRmlsdGVyVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdHJpbmdGaWx0ZXJVSShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCBmaWx0ZXJTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlckxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBTdHJpbmdGaWx0ZXJVSS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgIHZhciBmbG9wdHI7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtaW5wdXQnLCBpZDogJ3N0cnVpLScgKyBhcmdzLmNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICBhcmdzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gYXJncy5kaWFsb2dPYmo7XG4gICAgICAgICAgICB0aGlzLmFjdE9iaiA9IG5ldyBlajJfZHJvcGRvd25zXzEuQXV0b0NvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5kYXRhU291cmNlKSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgdmFsdWU6IGFyZ3MuY29sdW1uLmZpZWxkIH0sXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgc29ydE9yZGVyOiAnQXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1wb3B1cC1mbG1lbnUnLFxuICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdE9iai5maWx0ZXJUeXBlID0gYXJncy5nZXRPcHRySW5zdGFuY2UuZ2V0RmxPcGVyYXRvcigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXV0b2ZpbGw6IHRydWUsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGFyZ3MubG9jYWxpemVUZXh0LmdldENvbnN0YW50KCdFbnRlclZhbHVlJyksXG4gICAgICAgICAgICAgICAgYWN0aW9uQ29tcGxldGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucmVzdWx0ID0gZS5yZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChvYmosIGluZGV4LCBhcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uIChtYXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwT2JqW190aGlzLmFjdE9iai5maWVsZHMudmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuaW5kZXhPZihvYmpbX3RoaXMuYWN0T2JqLmZpZWxkcy52YWx1ZV0pID09PSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmFjdE9iai5hcHBlbmRUbyh0aGlzLmluc3RhbmNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaW5nRmlsdGVyVUkucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKGFyZ3MuZmlsdGVyZWRWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RydWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RydWktJyArIGFyZ3MuY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICBzdHJ1aU9iai52YWx1ZSA9IGFyZ3MuZmlsdGVyZWRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU3RyaW5nRmlsdGVyVUkucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29sdW1uLCBmaWx0ZXJPcHRyLCBmaWx0ZXJPYmopIHtcbiAgICAgICAgICAgIHZhciBhY3R1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdHJ1aS0nICsgY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGFjdHVpT2JqLnZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyT2JqLmZpbHRlckJ5Q29sdW1uKGNvbHVtbi5maWVsZCwgZmlsdGVyT3B0ciwgZmlsdGVyVmFsdWUsICdhbmQnLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIFN0cmluZ0ZpbHRlclVJLnByb3RvdHlwZS5vcGVuUG9wdXAgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdXRpbF8xLmdldFpJbmRleENhbGN1YWx0aW9uKGFyZ3MsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0cmluZ0ZpbHRlclVJO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TdHJpbmdGaWx0ZXJVSSA9IFN0cmluZ0ZpbHRlclVJO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3N0cmluZy1maWx0ZXItdWkuanNcbi8vIG1vZHVsZSBpZCA9IDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfZHJvcGRvd25zXzEsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZsTWVudU9wdHJVSSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZsTWVudU9wdHJVSShwYXJlbnQsIGN1c3RvbUZsdHJPcGVyYXRvcnMsIHNlcnZpY2VMb2NhdG9yLCBmaWx0ZXJTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbUZpbHRlck9wZXJhdG9ycyA9IGN1c3RvbUZsdHJPcGVyYXRvcnM7XG4gICAgICAgIH1cbiAgICAgICAgRmxNZW51T3B0clVJLnByb3RvdHlwZS5yZW5kZXJPcGVyYXRvclVJID0gZnVuY3Rpb24gKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sdW1uLCBkbGdPYmopIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gZGxnT2JqO1xuICAgICAgICAgICAgdmFyIG9wdHIgPSBjb2x1bW4udHlwZSArICdPcGVyYXRvcic7XG4gICAgICAgICAgICB0aGlzLm9wdHJEYXRhID0gdGhpcy5jdXN0b21PcHRyID0gKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLm9wZXJhdG9ycykgJiZcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5vcGVyYXRvcnNbb3B0cl0pKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3Mub3BlcmF0b3JzW29wdHJdIDogdGhpcy5jdXN0b21GaWx0ZXJPcGVyYXRvcnNbb3B0cl07XG4gICAgICAgICAgICB2YXIgZHJvcERhdGFzb3VyY2UgPSB0aGlzLmN1c3RvbU9wdHI7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZSA9IHRoaXMuZHJvcFNlbGVjdGVkVmFsKGNvbHVtbiwgb3B0cik7XG4gICAgICAgICAgICB2YXIgb3B0ckRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZsbV9vcHRyZGl2JyB9KTtcbiAgICAgICAgICAgIGRsZ0NvbmV0bnRFbGUuYXBwZW5kQ2hpbGQob3B0ckRpdik7XG4gICAgICAgICAgICB2YXIgb3B0cklucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgaWQ6IGNvbHVtbi51aWQgKyAnLWZsb3B0cicgfSk7XG4gICAgICAgICAgICBvcHRyRGl2LmFwcGVuZENoaWxkKG9wdHJJbnB1dCk7XG4gICAgICAgICAgICB0aGlzLmRyb3BPcHRyID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3Qoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRyb3BEYXRhc291cmNlLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB0ZXh0OiAndGV4dCcsIHZhbHVlOiAndmFsdWUnIH0sXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5kcm9wRG93bk9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzZWxlY3RlZFZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcE9wdHIuYXBwZW5kVG8oJyMnICsgY29sdW1uLnVpZCArICctZmxvcHRyJyk7XG4gICAgICAgIH07XG4gICAgICAgIEZsTWVudU9wdHJVSS5wcm90b3R5cGUuZHJvcERvd25PcGVuID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MucG9wdXAuZWxlbWVudC5zdHlsZS56SW5kZXggPSAodGhpcy5kaWFsb2dPYmouekluZGV4ICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmxNZW51T3B0clVJLnByb3RvdHlwZS5kcm9wU2VsZWN0ZWRWYWwgPSBmdW5jdGlvbiAoY29sLCBvcHRyKSB7XG4gICAgICAgICAgICB2YXIgc2VsVmFsdWUgPSAnJztcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5maWVsZCA9PT0gY29sdW1uLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEZpZWxkID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5vcHRyRGF0YSkuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUoJ3ZhbHVlJywgJ2VxdWFsJywgY29sdW1uLm9wZXJhdG9yKSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbFZhbHVlID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc2VsZWN0ZWRGaWVsZFswXSkgPyBzZWxlY3RlZEZpZWxkWzBdLnRleHQgOiAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsVmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgc2VsVmFsdWUgPSB0aGlzLm9wdHJEYXRhWzBdLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsVmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIEZsTWVudU9wdHJVSS5wcm90b3R5cGUuZ2V0RmxPcGVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRyb3BPcHRyLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmxNZW51T3B0clVJO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GbE1lbnVPcHRyVUkgPSBGbE1lbnVPcHRyVUk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLW1lbnUtb3BlcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9pbnB1dHNfMSwgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtYmVyRmlsdGVyVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBOdW1iZXJGaWx0ZXJVSShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCBmaWx0ZXJTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgIH1cbiAgICAgICAgTnVtYmVyRmlsdGVyVUkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtaW5wdXQnLCBpZDogJ251bWJlcnVpLScgKyBhcmdzLmNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICBhcmdzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMubnVtZXJpY1R4dE9iaiA9IG5ldyBlajJfaW5wdXRzXzEuTnVtZXJpY1RleHRCb3goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1wb3B1cC1mbG1lbnUnLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBhcmdzLmxvY2FsaXplVGV4dC5nZXRDb25zdGFudCgnRW50ZXJWYWx1ZScpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm51bWVyaWNUeHRPYmouYXBwZW5kVG8odGhpcy5pbnN0YW5jZSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZpbHRlclVJLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVydWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbnVtYmVydWktJyArIGFyZ3MuY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIG51bWJlcnVpT2JqLnZhbHVlID0gYXJncy5maWx0ZXJlZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJGaWx0ZXJVSS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb2x1bW4sIGZpbHRlck9wdHIsIGZpbHRlck9iaikge1xuICAgICAgICAgICAgdmFyIG51bWJlcnVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI251bWJlcnVpLScgKyBjb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gbnVtYmVydWlPYmoudmFsdWU7XG4gICAgICAgICAgICBmaWx0ZXJPYmouZmlsdGVyQnlDb2x1bW4oY29sdW1uLmZpZWxkLCBmaWx0ZXJPcHRyLCBmaWx0ZXJWYWx1ZSwgJ2FuZCcsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtYmVyRmlsdGVyVUk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk51bWJlckZpbHRlclVJID0gTnVtYmVyRmlsdGVyVUk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtYmVyLWZpbHRlci11aS5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEsIGVqMl9kYXRhXzEsIGVqMl9kcm9wZG93bnNfMSwgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9vbGVhbkZpbHRlclVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQm9vbGVhbkZpbHRlclVJKHBhcmVudCwgc2VydmljZUxvY2F0b3IsIGZpbHRlclNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBCb29sZWFuRmlsdGVyVUkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgIHRoaXMuZWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LWlucHV0JywgaWQ6ICdib29sLXVpLScgKyBhcmdzLmNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICBhcmdzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsZW0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBhcmdzLmRpYWxvZ09iajtcbiAgICAgICAgICAgIHRoaXMuZHJvcEluc3RhbmNlID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3Qoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmRhdGFTb3VyY2UpLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLnNlbGVjdChhcmdzLmNvbHVtbi5maWVsZCksXG4gICAgICAgICAgICAgICAgZmllbGRzOiB7IHRleHQ6IGFyZ3MuY29sdW1uLmZpZWxkLCB2YWx1ZTogYXJncy5jb2x1bW4uZmllbGQgfSxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYXJncy5sb2NhbGl6ZVRleHQuZ2V0Q29uc3RhbnQoJ1NlbGVjdFZhbHVlJyksXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLXBvcHVwLWZsbWVudScsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5vcGVuUG9wdXAuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBhY3Rpb25Db21wbGV0ZTogdGhpcy5kZEFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcEluc3RhbmNlLmFwcGVuZFRvKHRoaXMuZWxlbSk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5GaWx0ZXJVSS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGRycHVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Jvb2wtdWktJyArIGFyZ3MuY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIGRycHVpT2JqLnRleHQgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmZpbHRlcmVkVmFsdWUpID8gYXJncy5maWx0ZXJlZFZhbHVlIDogJyc7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5GaWx0ZXJVSS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb2x1bW4sIGZpbHRlck9wdHIsIGZpbHRlck9iaikge1xuICAgICAgICAgICAgdmFyIGRycHVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Jvb2wtdWktJyArIGNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBkcnB1aU9iai52YWx1ZTtcbiAgICAgICAgICAgIGZpbHRlck9iai5maWx0ZXJCeUNvbHVtbihjb2x1bW4uZmllbGQsIGZpbHRlck9wdHIsIGZpbHRlclZhbHVlLCAnYW5kJywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRmlsdGVyVUkucHJvdG90eXBlLmRkQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5yZXN1bHQgPSB1dGlsXzEuZGlzdGluY3RTdHJpbmdWYWx1ZXMoZS5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRmlsdGVyVUkucHJvdG90eXBlLm9wZW5Qb3B1cCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB1dGlsXzEuZ2V0WkluZGV4Q2FsY3VhbHRpb24oYXJncywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkZpbHRlclVJO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRmlsdGVyVUkgPSBCb29sZWFuRmlsdGVyVUk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1maWx0ZXItdWkuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2NhbGVuZGFyc18xLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEYXRlRmlsdGVyVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRlRmlsdGVyVUkocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgZmlsdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmZsdHJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICB9XG4gICAgICAgIERhdGVGaWx0ZXJVSS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBpbnRsID0gbmV3IGVqMl9iYXNlXzIuSW50ZXJuYXRpb25hbGl6YXRpb24oKTtcbiAgICAgICAgICAgIHZhciBjb2xGb3JtYXQgPSBhcmdzLmNvbHVtbi5mb3JtYXQ7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gaW50bC5nZXREYXRlUGF0dGVybih7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGNvbEZvcm1hdCB9LCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IGFyZ3MuZGlhbG9nT2JqO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS1pbnB1dCcsIGlkOiAnZGF0ZXVpLScgKyBhcmdzLmNvbHVtbi51aWQgfSk7XG4gICAgICAgICAgICBhcmdzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmlucHV0RWxlbSk7XG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXJPYmogPSBuZXcgZWoyX2NhbGVuZGFyc18xLkRhdGVQaWNrZXIoe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1wb3B1cC1mbG1lbnUnLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBhcmdzLmxvY2FsaXplVGV4dC5nZXRDb25zdGFudCgnQ2hvb3NlRGF0ZScpLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5vcGVuUG9wdXAuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kYXRlUGlja2VyT2JqLmFwcGVuZFRvKHRoaXMuaW5wdXRFbGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZpbHRlclVJLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmx0clNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZGF0ZXVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGV1aS0nICsgYXJncy5jb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgZGF0ZXVpT2JqLnZhbHVlID0gYXJncy5maWx0ZXJlZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlRmlsdGVyVUkucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29sdW1uLCBmaWx0ZXJPcHRyLCBmaWx0ZXJPYmopIHtcbiAgICAgICAgICAgIHZhciBkYXRldWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZXVpLScgKyBjb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gZGF0ZXVpT2JqLnZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyT2JqLmZpbHRlckJ5Q29sdW1uKGNvbHVtbi5maWVsZCwgZmlsdGVyT3B0ciwgZmlsdGVyVmFsdWUsICdhbmQnLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZpbHRlclVJLnByb3RvdHlwZS5vcGVuUG9wdXAgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgYXJncy5wb3B1cEVsZW1lbnQuZWxlbWVudC5zdHlsZS56SW5kZXggPSAodGhpcy5kaWFsb2dPYmouekluZGV4ICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGVGaWx0ZXJVSTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0ZUZpbHRlclVJID0gRGF0ZUZpbHRlclVJO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RhdGUtZmlsdGVyLXVpLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIlxuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiLCBcIi4uL2FjdGlvbnMvY2hlY2tib3gtZmlsdGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlajJfbmF2aWdhdGlvbnNfMSwgY2hlY2tib3hfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4Y2VsRmlsdGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEV4Y2VsRmlsdGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFeGNlbEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBmaWx0ZXJTZXR0aW5ncywgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5sb2NhbGVDb25zdGFudHMgPSB7XG4gICAgICAgICAgICAgICAgQ2xlYXJGaWx0ZXI6ICdDbGVhciBGaWx0ZXInLFxuICAgICAgICAgICAgICAgIE51bWJlckZpbHRlcjogJ051bWJlciBGaWx0ZXJzJyxcbiAgICAgICAgICAgICAgICBUZXh0RmlsdGVyOiAnVGV4dCBGaWx0ZXJzJyxcbiAgICAgICAgICAgICAgICBEYXRlRmlsdGVyOiAnRGF0ZSBGaWx0ZXJzJyxcbiAgICAgICAgICAgICAgICBNYXRjaENhc2U6ICdNYXRjaCBDYXNlJyxcbiAgICAgICAgICAgICAgICBFcXVhbDogJ0VxdWFsJyxcbiAgICAgICAgICAgICAgICBOb3RFcXVhbDogJ05vdCBFcXVhbCcsXG4gICAgICAgICAgICAgICAgTGVzc1RoYW46ICdMZXNzIFRoYW4nLFxuICAgICAgICAgICAgICAgIExlc3NUaGFuT3JFcXVhbDogJ0xlc3MgVGhhbiBPciBFcXVhbCcsXG4gICAgICAgICAgICAgICAgR3JlYXRlclRoYW46ICdHcmVhdGVyIFRoYW4nLFxuICAgICAgICAgICAgICAgIEdyZWF0ZXJUaGFuT3JFcXVhbDogJ0dyZWF0ZXIgVGhhbiBPciBFcXVhbCcsXG4gICAgICAgICAgICAgICAgQmV0d2VlbjogJ0JldHdlZW4nLFxuICAgICAgICAgICAgICAgIEN1c3RvbUZpbHRlcjogJ0N1c3RvbSBGaWx0ZXInLFxuICAgICAgICAgICAgICAgIFN0YXJ0c1dpdGg6ICdTdGFydHMgV2l0aCcsXG4gICAgICAgICAgICAgICAgRW5kc1dpdGg6ICdFbmRzIFdpdGgnLFxuICAgICAgICAgICAgICAgIENvbnRhaW5zOiAnQ29udGFpbnMnLFxuICAgICAgICAgICAgICAgIE9LOiAnT0snLFxuICAgICAgICAgICAgICAgIENhbmNlbDogJ0NhbmNlbCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChfdGhpcy5kZWZhdWx0Q29uc3RhbnRzLCBfdGhpcy5sb2NhbGVDb25zdGFudHMpO1xuICAgICAgICAgICAgX3RoaXMuaXNFeGNlbCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5pbml0TG9jYWxlKF90aGlzLmRlZmF1bHRDb25zdGFudHMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5nZXRDTWVudURTID0gZnVuY3Rpb24gKHR5cGUsIG9wZXJhdG9yKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IFsnRXF1YWwnLCAnTm90RXF1YWwnLCAnJywgJ0xlc3NUaGFuJywgJ0xlc3NUaGFuT3JFcXVhbCcsICdHcmVhdGVyVGhhbicsXG4gICAgICAgICAgICAgICAgICAgICdHcmVhdGVyVGhhbk9yRXF1YWwnLCAnQmV0d2VlbicsICcnLCAnQ3VzdG9tRmlsdGVyJ10sXG4gICAgICAgICAgICAgICAgc3RyaW5nOiBbJ0VxdWFsJywgJ05vdEVxdWFsJywgJycsICdTdGFydHNXaXRoJywgJ0VuZHNXaXRoJywgJycsICdDb250YWlucycsICcnLCAnQ3VzdG9tRmlsdGVyJ10sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRlID0gb3B0aW9ucy5udW1iZXI7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGV0aW1lID0gb3B0aW9ucy5udW1iZXI7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9uc1t0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zW3R5cGVdW2ldLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwob3B0aW9uc1t0eXBlXVtpXSkgKyAnLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uQ3NzOiAnZS1pY29ucyBlLWljb24tY2hlY2sgJyArIChvcGVyYXRvciA9PT0gb3B0aW9uc1t0eXBlXVtpXSA/ICcnIDogJ2UtZW1wdHlpY29uJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbChvcHRpb25zW3R5cGVdW2ldKSArICcuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwucHVzaCh7IHNlcGFyYXRvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLmNtZW51KTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbiAodHlwZSwgaXNGaWx0ZXJlZCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7IHN0cmluZzogJ1RleHRGaWx0ZXInLCBkYXRlOiAnRGF0ZUZpbHRlcicsIGRhdGV0aW1lOiAnRGF0ZUZpbHRlcicsIG51bWJlcjogJ051bWJlckZpbHRlcicgfTtcbiAgICAgICAgICAgIHRoaXMubWVudSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNvbnRleHRtZW51LXdyYXBwZXInIH0pO1xuICAgICAgICAgICAgdmFyIHVsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgdmFyIGljb24gPSBpc0ZpbHRlcmVkID8gJ2UtaWNvbi1maWx0ZXIgZS1maWx0ZXJlZCcgOiAnZS1pY29uLWZpbHRlcic7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZU1lbnVFbGVtKHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0NsZWFyRmlsdGVyJyksIGlzRmlsdGVyZWQgPyAnJyA6ICdlLWRpc2FibGVkJywgaWNvbikpO1xuICAgICAgICAgICAgaWYgKHR5cGUgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlTWVudUVsZW0odGhpcy5nZXRMb2NhbGl6ZWRMYWJlbChvcHRpb25zW3R5cGVdKSwgJ2Utc3VibWVudScsIGlzRmlsdGVyZWQgPyAnZS1pY29uLWNoZWNrJyA6IGljb24gKyAnIGUtZW1wdHlpY29uJywgdHJ1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW51LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmNyZWF0ZU1lbnVFbGVtID0gZnVuY3Rpb24gKHZhbCwgY2xhc3NOYW1lLCBpY29uTmFtZSwgaXNTdWJNZW51KSB7XG4gICAgICAgICAgICB2YXIgbGkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xpJywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSArICcgZS1tZW51LWl0ZW0nIH0pO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gdmFsO1xuICAgICAgICAgICAgbGkuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1tZW51LWljb24gZS1pY29ucyAnICsgaWNvbk5hbWUgfSksIGxpLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgaWYgKGlzU3ViTWVudSkge1xuICAgICAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWNhcmV0JyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS53aXJlRXhFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5kbGcsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5kbGcsICdjbGljaycsIHRoaXMuY2xpY2tFeEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZGxnLCAnbW91c2VvdmVyJywgdGhpcy5ob3ZlckhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZGxnLCAnY2xpY2snLCB0aGlzLmNsaWNrRXhIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmNsaWNrRXhIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBtZW51SXRlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLW1lbnUtaXRlbScpO1xuICAgICAgICAgICAgaWYgKG1lbnVJdGVtICYmIHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0NsZWFyRmlsdGVyJykgPT09IG1lbnVJdGVtLmlubmVyVGV4dCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuZGVzdHJveUNNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVudU9iaiAmJiAhdGhpcy5tZW51T2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51T2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmhvdmVySGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignLmUtY29udGV4dG1lbnUnKTtcbiAgICAgICAgICAgIHZhciBsaSA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLW1lbnUtaXRlbScpO1xuICAgICAgICAgICAgdmFyIGZvY3VzZWQgPSB0aGlzLm1lbnUucXVlcnlTZWxlY3RvcignLmUtZm9jdXNlZCcpO1xuICAgICAgICAgICAgdmFyIGlzU3ViTWVudTtcbiAgICAgICAgICAgIGlmIChmb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgZm9jdXNlZC5jbGFzc0xpc3QucmVtb3ZlKCdlLWZvY3VzZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaSkge1xuICAgICAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ2UtZm9jdXNlZCcpO1xuICAgICAgICAgICAgICAgIGlzU3ViTWVudSA9IGxpLmNsYXNzTGlzdC5jb250YWlucygnZS1zdWJtZW51Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1N1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VibWVudSA9IHRoaXMubWVudS5xdWVyeVNlbGVjdG9yKCcuZS1zdWJtZW51Jyk7XG4gICAgICAgICAgICAgICAgc3VibWVudS5jbGFzc0xpc3QucmVtb3ZlKCdlLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NNZW51T3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUNNZW51KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDTWVudU9wZW4gJiYgaXNTdWJNZW51KSB7XG4gICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnZS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDTWVudU9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBtZW51T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMuZ2V0Q01lbnVEUyh0aGlzLm9wdGlvbnMudHlwZSksXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDogdGhpcy5zZWxlY3RIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMuZGVzdHJveUNNZW51LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY21lbnUpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudU9iaiA9IG5ldyBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudShtZW51T3B0aW9ucywgdGhpcy5jbWVudSk7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHRoaXMubWVudS5xdWVyeVNlbGVjdG9yKCcuZS1zdWJtZW51JykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51T2JqLm9wZW4oY2xpZW50LnRvcCwgdGhpcy5kbGcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLm9wZW5EaWFsb2cgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QW5kU2V0Q2hrRWxlbShvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZyhvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmhlaWdodCA9ICczNDVweCc7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVNZW51KG9wdGlvbnMudHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kbGcuaW5zZXJ0QmVmb3JlKHRoaXMubWVudSwgdGhpcy5kbGcuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmRsZy5jbGFzc0xpc3QuYWRkKCdlLWV4Y2VsZmlsdGVyJyk7XG4gICAgICAgICAgICB0aGlzLmNtZW51ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd1bCcsIHsgY2xhc3NOYW1lOiAnZS1leGNlbC1tZW51JyB9KTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV4RXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5jbG9zZURpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VEaWFsb2cuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5zZWxlY3RIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2V4Y2VsRmlsdGVyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4Y2VsRmlsdGVyO1xuICAgIH0oY2hlY2tib3hfZmlsdGVyXzEuQ2hlY2tCb3hGaWx0ZXIpKTtcbiAgICBleHBvcnRzLkV4Y2VsRmlsdGVyID0gRXhjZWxGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83M19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCJcbi8vIG1vZHVsZSBpZCA9IDczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB3aWR0aF9jb250cm9sbGVyXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0ID0ge1xuICAgICAgICByb290OiAnZS1yaGFuZGxlcicsXG4gICAgICAgIHN1cHByZXNzOiAnZS1yc3VwcHJlc3MnLFxuICAgICAgICBpY29uOiAnZS1yaWNvbicsXG4gICAgICAgIGhlbHBlcjogJ2UtcmhlbHBlcicsXG4gICAgICAgIGhlYWRlcjogJ3RoLmUtaGVhZGVyY2VsbCcsXG4gICAgICAgIGN1cnNvcjogJ2UtcmN1cnNvcicsXG4gICAgICAgIGxpbmVzOiAnZS1ybGluZXMnXG4gICAgfTtcbiAgICB2YXIgUmVzaXplID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVzaXplKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBSZXNpemUucHJvdG90eXBlLmF1dG9GaXRDb2x1bW5zID0gZnVuY3Rpb24gKGZOYW1lKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uTmFtZSA9IChmTmFtZSA9PT0gdW5kZWZpbmVkIHx8IGZOYW1lID09PSBudWxsIHx8IGZOYW1lLmxlbmd0aCA8PSAwKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5maWVsZDsgfSkgOiAodHlwZW9mIGZOYW1lID09PSAnc3RyaW5nJykgPyBbZk5hbWVdIDogZk5hbWU7XG4gICAgICAgICAgICB0aGlzLmZpbmRDb2x1bW4oY29sdW1uTmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplQ29sdW1uID0gZnVuY3Rpb24gKGZOYW1lLCBpbmRleCwgaWQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdFdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUYWJsZSA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgY29udGVudFRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2VGFnID0gJ2UtZ3JpZGhlYWRlcic7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdlRhZyA9ICdlLWdyaWRjb250ZW50JztcbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aENsb25lID0gZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3RyJykucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXB0b3BsZWZ0Y2VsbCcpO1xuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gMDtcbiAgICAgICAgICAgIGlmIChpbmRlbnRXaWR0aENsb25lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGVudFdpZHRoQ2xvbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50V2lkdGggKz0gaW5kZW50V2lkdGhDbG9uZVtpXS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdWlkID0gaWQgPyBpZCA6IHRoaXMucGFyZW50LmdldFVpZEJ5Q29sdW1uRmllbGQoZk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KHVpZCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGV4dENsb25lID0gaGVhZGVyVGFibGUucXVlcnlTZWxlY3RvckFsbCgndGgnKVtjb2x1bW5JbmRleF0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHQgPSBbaGVhZGVyVGV4dENsb25lXTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGV4dENsb25lID0gY29udGVudFRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZDpudGgtY2hpbGQoXCIgKyAoY29sdW1uSW5kZXggKyAxKSArIFwiKVwiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGV4dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250ZW50VGV4dENsb25lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29udGVudFRleHRbaV0gPSBjb250ZW50VGV4dENsb25lW2ldLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3SGVhZGVyID0gdGhpcy5jcmVhdGVUYWJsZShoZWFkZXJUYWJsZSwgaGVhZGVyVGV4dCwgaGVhZGVyRGl2VGFnKTtcbiAgICAgICAgICAgIHZhciB3Q29udGVudCA9IHRoaXMuY3JlYXRlVGFibGUoY29udGVudFRhYmxlLCBjb250ZW50VGV4dCwgY29udGVudERpdlRhZyk7XG4gICAgICAgICAgICB2YXIgY29sdW1uYnlpbmRleCA9IGdPYmouZ2V0Q29sdW1ucygpW2luZGV4XTtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAod0hlYWRlciA+IHdDb250ZW50KSA/IGNvbHVtbmJ5aW5kZXgud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod0hlYWRlcikgOiBjb2x1bW5ieWluZGV4LndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdDb250ZW50KTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldENvbHVtbldpZHRoKGdPYmouZ2V0Q29sdW1ucygpW2luZGV4XSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmFsbG93UmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBnT2JqLmdldENvbHVtbnMoKS5zb21lKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LndpZHRoID09PSBudWxsIHx8IHgud2lkdGggPT09IHVuZGVmaW5lZCB8fCB4LndpZHRoLmxlbmd0aCA8PSAwOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdFdpZHRoID0gdFdpZHRoICsgcGFyc2VJbnQoZWxlbWVudC53aWR0aCwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlV2lkdGhfMSA9IHRXaWR0aCArIGluZGVudFdpZHRoO1xuICAgICAgICAgICAgICAgIGlmICh0V2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHRhYmxlV2lkdGhfMSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0YWJsZVdpZHRoXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YWJsZVdpZHRoID0gaGVhZGVyVGFibGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgY29udGVudHdpZHRoID0gKGdPYmouZ2V0Q29udGVudCgpLnNjcm9sbFdpZHRoKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50d2lkdGggPiB0YWJsZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuY2xhc3NMaXN0LmFkZCgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5jbGFzc0xpc3QuYWRkKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudFRhYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jlc2l6ZSc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZmluZENvbHVtbiA9IGZ1bmN0aW9uIChmTmFtZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGZOYW1lLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSBfdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5nZXRDb2x1bW5zKClbY29sdW1uSW5kZXhdLnZpc2libGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzaXplQ29sdW1uKGZpZWxkTmFtZSwgY29sdW1uSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNyZWF0ZVRhYmxlID0gZnVuY3Rpb24gKHRhYmxlLCB0ZXh0LCB0YWcpIHtcbiAgICAgICAgICAgIHZhciBteVRhYmxlRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuY2xhc3NOYW1lID0gdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc05hbWU7XG4gICAgICAgICAgICBteVRhYmxlRGl2LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogaW5saW5lLWJsb2NrO3Zpc2liaWxpdHk6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlJztcbiAgICAgICAgICAgIHZhciBteVN1YkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVN1YkRpdi5jbGFzc05hbWUgPSB0YWc7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgICAgIG15VGFibGUuY2xhc3NOYW1lID0gdGFibGUuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZS5zdHlsZS5jc3NUZXh0ID0gJ3RhYmxlLWxheW91dDogYXV0bzt3aWR0aDogYXV0byc7XG4gICAgICAgICAgICB2YXIgbXlUciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHRleHQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0ciA9IG15VHIuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgdHIuY2xhc3NOYW1lID0gdGFibGUucXVlcnlTZWxlY3RvcigndHInKS5jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgbXlUYWJsZS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG15U3ViRGl2LmFwcGVuZENoaWxkKG15VGFibGUpO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5hcHBlbmRDaGlsZChteVN1YkRpdik7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG15VGFibGVEaXYpO1xuICAgICAgICAgICAgdmFyIG9mZnNldFdpZHRoVmFsdWUgPSBteVRhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwob2Zmc2V0V2lkdGhWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZyZWV6ZVJlZnJlc2gsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nICYmXG4gICAgICAgICAgICAgICAgISh0aGlzLnBhcmVudC5ncmlkTGluZXMgPT09ICd2ZXJ0aWNhbCcgfHwgdGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAnYm90aCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmxpbmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0SGFuZGxlckhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRSZXNpemVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIF90aGlzLnJlc2l6ZVN0YXJ0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRSZXNpemVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zID9cbiAgICAgICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnJvb3QpKVxuICAgICAgICAgICAgICAgIDogW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Qucm9vdCkpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnNldEhhbmRsZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5zdXBwcmVzcykpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FsbEF1dG9GaXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0VGFyZ2V0Q29sdW1uKGUpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4oY29sLmZpZWxkLCB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sLnVpZCksIGNvbC51aWQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZVN0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRTY3JvbGxCYXJXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnJlZnJlc2hDb2x1bW5XaWR0aCgpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldENvbHVtbldpZHRoKGNvbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb1RhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSGVscGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSB0aGlzLmdldFRhcmdldENvbHVtbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSAodGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWluTW92ZSArPSB0aGlzLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiAhdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnJlc2l6ZVN0YXJ0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ2FkZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbmNlbFJlc2l6ZUFjdGlvbiA9IGZ1bmN0aW9uIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnJlc2l6aW5nKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoKSB7XG4gICAgICAgICAgICBpZiAobWluV2lkdGggJiYgd2lkdGggPCBtaW5XaWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW5XaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXhXaWR0aCAmJiB3aWR0aCA+IG1heFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemluZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVggPSB0aGlzLmdldFBvaW50WChlKTtcbiAgICAgICAgICAgIHZhciBtb3VzZW1vdmUgPSB0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAtKHBhZ2VYIC0gdGhpcy5wYWdlWCkgOiAocGFnZVggLSB0aGlzLnBhZ2VYKTtcbiAgICAgICAgICAgIHZhciBjb2xEYXRhID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludCh0aGlzLndpZHRoU2VydmljZS5nZXRXaWR0aCh0aGlzLmNvbHVtbikudG9TdHJpbmcoKSwgMTApICsgbW91c2Vtb3ZlLFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IHRoaXMuY29sdW1uLm1heFdpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWF4V2lkdGgudG9TdHJpbmcoKSwgMTApIDogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sRGF0YS53aWR0aCwgY29sRGF0YS5taW5XaWR0aCwgY29sRGF0YS5tYXhXaWR0aCk7XG4gICAgICAgICAgICBpZiAoKCF0aGlzLnBhcmVudC5lbmFibGVSdGwgJiYgdGhpcy5taW5Nb3ZlID49IHBhZ2VYKSB8fCAodGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA8PSBwYWdlWCkpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVggPSB0aGlzLm1pbk1vdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHBhcnNlSW50KHRoaXMuY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSBwYWdlWDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbi53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3aWR0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLm9uUmVzaXplLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgodGhpcy5jb2x1bW4sIG51bGwsICdyZXNpemUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUhlbHBlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVscGVyIHx8IHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcigncmVtb3ZlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdG9wLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgdGhpcy5kb3VibGVUYXBFdmVudChlKTtcbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFBvaW50WCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucGFnZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVmcmVzaENvbHVtbldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gW10uc2xpY2UuYXBwbHkodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0aC5lLWhlYWRlcmNlbGwnKSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9iIDwgY29sdW1uc18xLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19iXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkXScpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZF0nKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpID09PSBjb2x1bW4udWlkICYmIGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4ud2lkdGggPSBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFRhcmdldENvbHVtbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHZhciB1aWQgPSBjZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlQ3Vyc29yID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpKTtcbiAgICAgICAgICAgIGhlYWRlclJvd3MucHVzaCh0aGlzLnBhcmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaGVhZGVyUm93c18xID0gaGVhZGVyUm93czsgX2kgPCBoZWFkZXJSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGhlYWRlclJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdFthY3Rpb25dKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmN1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucGFnZVggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hcHBlbmRIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVscGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5vZmZzZXRIZWlnaHQgLSB0aGlzLmdldFNjcm9sbEJhcldpZHRoKCk7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0aGlzLmVsZW1lbnQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB2YXIgdHIgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3QucGFyZW50RWxlbWVudC5jaGlsZHJlbi5sZW5ndGggIT09IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIuc3BsaWNlKDAsIHRyLmxlbmd0aCAvIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHIuc3BsaWNlKHRyLmxlbmd0aCAvIDIsIHRyLmxlbmd0aCAvIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0ci5pbmRleE9mKHJlY3QucGFyZW50RWxlbWVudCk7IGkgPCB0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhlaWdodCArPSB0cltpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jYWxjUG9zKHJlY3QpO1xuICAgICAgICAgICAgcG9zLmxlZnQgKz0gKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6ICcgKyBoZWlnaHQgKyAncHg7IHRvcDogJyArIHBvcy50b3AgKyAncHg7IGxlZnQ6JyArIE1hdGguZmxvb3IocG9zLmxlZnQpICsgJ3B4Oyc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyA/IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlY29udGVudCcpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHJldHVybiAoZWxlLnNjcm9sbEhlaWdodCA+IGVsZS5jbGllbnRIZWlnaHQgJiYgaGVpZ2h0KSB8fFxuICAgICAgICAgICAgICAgIGVsZS5zY3JvbGxXaWR0aCA+IGVsZS5jbGllbnRXaWR0aCA/IHV0aWxfMS5nZXRTY3JvbGxCYXJXaWR0aCgpIDogMDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZW1vdmVIZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNscyA9IGUudGFyZ2V0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIGlmICghKGNscy5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSB8fCBjbHMuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbikpICYmIHRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlcik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlajJfYmFzZV8xLmNsb3Nlc3QodGhpcy5lbGVtZW50LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IodGhpcy5jYWxjUG9zKHJlY3QpLmxlZnQgKyAodGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gMCAtIDEgOiByZWN0Lm9mZnNldFdpZHRoIC0gMikpICsgJ3B4JztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYWxjUG9zID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZWxlbS5vZmZzZXRQYXJlbnQgfHwgZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiZcbiAgICAgICAgICAgICAgICAob2Zmc2V0UGFyZW50ID09PSBkb2MuYm9keSB8fCBvZmZzZXRQYXJlbnQgPT09IGRvYy5kb2N1bWVudEVsZW1lbnQpICYmXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50LnN0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQgIT09IGVsZW0gJiYgb2Zmc2V0UGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZG91YmxlVGFwRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlckFnZW50KCkgJiYgdGhpcy5pc0RibENsaykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50YXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIoKSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbEF1dG9GaXQoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0VXNlckFnZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXJBZ2VudCA9IGVqMl9iYXNlXzEuQnJvd3Nlci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiAvaXBob25lfGlwb2R8aXBhZC8udGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVzaXplO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZXNpemUgPSBSZXNpemU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJlb3JkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW9yZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucmVvcmRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuZHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmRyYWdTdGFydCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0b3AsIHRoaXMuZHJhZ1N0b3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jaGtEcm9wUG9zaXRpb24gPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzcmNFbGVtLnBhcmVudEVsZW1lbnQuaXNFcXVhbE5vZGUoZGVzdEVsZW0ucGFyZW50RWxlbWVudCkgJiYgdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleChzcmNFbGVtLCBkZXN0RWxlbSkgPiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY2hrRHJvcEFsbENvbHMgPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHZhciBpc0ZvdW5kO1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHdoaWxlICghaXNGb3VuZCAmJiBoZWFkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBoZWFkZXJzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlzRm91bmQgPSBzcmNFbGVtICE9PSBoZWFkZXIgJiYgdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleChzcmNFbGVtLCBkZXN0RWxlbSkgPiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0ZvdW5kO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5maW5kQ29sUGFyZW50ID0gZnVuY3Rpb24gKGNvbCwgY29scywgcGFyZW50KSB7XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2wgPT09IGNvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbHNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY250ID0gcGFyZW50Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnB1c2goY29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5maW5kQ29sUGFyZW50KGNvbCwgY29sc1tpXS5jb2x1bW5zLCBwYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc3BsaWNlKGNudCwgcGFyZW50Lmxlbmd0aCAtIGNudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0Q29sdW1uc01vZGVsID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5Nb2RlbCA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1YkNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uTW9kZWwucHVzaChjb2xzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YkNvbHMgPSBzdWJDb2xzLmNvbmNhdChjb2xzW2ldLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJDb2xzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbHVtbk1vZGVsID0gY29sdW1uTW9kZWwuY29uY2F0KHRoaXMuZ2V0Q29sdW1uc01vZGVsKHN1YkNvbHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5Nb2RlbDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuaGVhZGVyRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICd0aCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlc3RFbGVtID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGRlc3RFbGVtICYmICEoIXRoaXMuY2hrRHJvcFBvc2l0aW9uKHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pIHx8ICF0aGlzLmNoa0Ryb3BBbGxDb2xzKHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pKSkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkSWR4ID0gdXRpbF8xLmdldEVsZW1lbnRJbmRleCh0aGlzLmVsZW1lbnQsIGhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zTW9kZWwodGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbb2xkSWR4XTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUNvbHVtbnMobmV3SW5kZXgsIGNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmlzQWN0aW9uUHJldmVudCA9IGZ1bmN0aW9uIChnT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUubW92ZUNvbHVtbnMgPSBmdW5jdGlvbiAoZGVzdEluZGV4LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLm1vdmVDb2x1bW5zLCBhcmcxOiBkZXN0SW5kZXgsIGFyZzI6IGNvbHVtbiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoY29sdW1uLCB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNyY0lkeCA9IHV0aWxfMS5pbkFycmF5KGNvbHVtbiwgY29scyk7XG4gICAgICAgICAgICBpZiAoIWdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IHNyY0lkeCA9PT0gZGVzdEluZGV4IHx8IHNyY0lkeCA9PT0gLTEgfHwgZGVzdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHMuc3BsaWNlKGRlc3RJbmRleCwgMCwgY29scy5zcGxpY2Uoc3JjSWR4LCAxKVswXSk7XG4gICAgICAgICAgICBnT2JqLmdldENvbHVtbnModHJ1ZSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB7IGZyb21JbmRleDogZGVzdEluZGV4LCB0b0luZGV4OiBzcmNJZHggfSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jlb3JkZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXggPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmbGF0Q29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc01vZGVsKGNvbHMpO1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGZsYXRDb2x1bW5zW3V0aWxfMS5nZXRFbGVtZW50SW5kZXgoc3JjRWxlbSwgaGVhZGVycyldLCBjb2xzKTtcbiAgICAgICAgICAgIGNvbHMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IGNvbHM7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmluQXJyYXkoZmxhdENvbHVtbnNbdXRpbF8xLmdldEVsZW1lbnRJbmRleChkZXN0RWxlbSwgaGVhZGVycyldLCBjb2xzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0Q29sUGFyZW50ID0gZnVuY3Rpb24gKGNvbHVtbiwgY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmluZENvbFBhcmVudChjb2x1bW4sIGNvbHVtbnMsIHBhcmVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUucmVvcmRlckNvbHVtbnMgPSBmdW5jdGlvbiAoZnJvbUZOYW1lLCB0b0ZOYW1lKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZCh0b0ZOYW1lKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChjb2x1bW4sIHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZGVzdEluZGV4ID0gdXRpbF8xLmluQXJyYXkoY29sdW1uLCBjb2x1bW5zKTtcbiAgICAgICAgICAgIGlmIChkZXN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUNvbHVtbnMoZGVzdEluZGV4LCB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZyb21GTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jcmVhdGVSZW9yZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdyA9IGhlYWRlci5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWljb24tcmVvcmRlcnVwYXJyb3cgZS1yZW9yZGVydXBhcnJvdycsIGF0dHJzOiB7IHN0eWxlOiAnZGlzcGxheTpub25lJyB9IH0pKTtcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93ID0gaGVhZGVyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtaWNvbi1yZW9yZGVyZG93bmFycm93IGUtcmVvcmRlcmRvd25hcnJvdycsIGF0dHJzOiB7IHN0eWxlOiAnZGlzcGxheTpub25lJyB9IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwgeyB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy51cEFycm93KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZG93bkFycm93KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yZW9yZGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuZHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5kcmFnU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgdGhpcy5kcmFnU3RvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGw6bm90KC5lLXN0YWNrZWRIZWFkZXJDZWxsKScpO1xuICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgIHZhciBpc0xlZnQgPSB0aGlzLnggPiB1dGlsXzEuZ2V0UG9zaXRpb24oZS5ldmVudCkueCArIGdPYmouZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yZW9yZGVyaW5kaWNhdGUnKSwgWydlLXJlb3JkZXJpbmRpY2F0ZSddKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbFBvc3Rpb24oZS5ldmVudCk7XG4gICAgICAgICAgICBpZiAoY2xvc2VzdCAmJiAhY2xvc2VzdC5pc0VxdWFsTm9kZSh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdDtcbiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5jaGtEcm9wUG9zaXRpb24odGhpcy5lbGVtZW50LCB0YXJnZXQpIHx8ICF0aGlzLmNoa0Ryb3BBbGxDb2xzKHRoaXMuZWxlbWVudCwgdGFyZ2V0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBcnJvd1Bvc2l0aW9uKHRhcmdldCwgaXNMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtYWxsb3dEcm9wJywgJ2UtcmVvcmRlcmluZGljYXRlJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShnT2JqLmFsbG93R3JvdXBpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS51cGRhdGVTY3JvbGxQb3N0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgeCA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKS54O1xuICAgICAgICAgICAgdmFyIGNsaVJlY3RCYXNlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxFbGVtID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKHggPiBjbGlSZWN0QmFzZS5sZWZ0ICYmIHggPCBjbGlSZWN0QmFzZS5sZWZ0ICsgMzUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMuc2V0U2Nyb2xsTGVmdChzY3JvbGxFbGVtLCB0cnVlKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoeCA8IGNsaVJlY3RCYXNlLnJpZ2h0ICYmIHggPiBjbGlSZWN0QmFzZS5yaWdodCAtIDM1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IF90aGlzLnNldFNjcm9sbExlZnQoc2Nyb2xsRWxlbSwgZmFsc2UpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnNldFNjcm9sbExlZnQgPSBmdW5jdGlvbiAoc2Nyb2xsRWxlbSwgaXNMZWZ0KSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCA9IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCArIChpc0xlZnQgPyAtNSA6IDUpO1xuICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgIT09IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudXBkYXRlQXJyb3dQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzTGVmdCkge1xuICAgICAgICAgICAgdmFyIGNsaVJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdEJhc2UgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKChpc0xlZnQgJiYgY2xpUmVjdC5sZWZ0IDwgY2xpUmVjdEJhc2UubGVmdCkgfHwgKCFpc0xlZnQgJiYgY2xpUmVjdC5yaWdodCA+IGNsaVJlY3RCYXNlLnJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS50b3AgPSBjbGlSZWN0LnRvcCArIGNsaVJlY3QuaGVpZ2h0IC0gY2xpUmVjdEJhc2UudG9wICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93LnN0eWxlLnRvcCA9IGNsaVJlY3QudG9wIC0gY2xpUmVjdEJhc2UudG9wIC0gNCArICdweCc7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUubGVmdCA9IHRoaXMuZG93bkFycm93LnN0eWxlLmxlZnQgPSAoaXNMZWZ0ID8gY2xpUmVjdC5sZWZ0IDogY2xpUmVjdC5yaWdodCkgLSBjbGlSZWN0QmFzZS5sZWZ0IC0gNCArICdweCc7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJycpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgdGhpcy54ID0gdXRpbF8xLmdldFBvc2l0aW9uKGUuZXZlbnQpLnggKyBnT2JqLmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICghZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVvcmRlcmluZGljYXRlJyksIFsnZS1yZW9yZGVyaW5kaWNhdGUnXSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnNldERpc3BsYXkgPSBmdW5jdGlvbiAoZGlzcGxheSkge1xuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jlb3JkZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVvcmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVvcmRlciA9IFJlb3JkZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd0REID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93REQocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZHJhZ2FyZWEnKS5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICAgICAgKCFlLnNlbmRlci50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlbGVjdGlvbmJhY2tncm91bmQnKSAmJiBnT2JqLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgIT09ICdzaW5nbGUnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2FuZGRyb3AgZS1ncmlkIGUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiAnaGVpZ2h0OlwiYXV0b1wiLCB6LWluZGV4OjIsIHdpZHRoOicgKyBnT2JqLmVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBzdHlsZXM6ICd3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAncm93JyAmJiBnT2JqLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KGUuc2VuZGVyLnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBzZWxlY3RlZFJvd3NbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRkcmFnYXJlYScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJywgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgJiYgZHJvcEVsZW0gJiYgZHJvcEVsZW0uZWoyX2luc3RhbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wRWxlbS5lajJfaW5zdGFuY2VzWzBdLmdldENvbnRlbnQoKS5jbGFzc0xpc3QuYWRkKCdlLWFsbG93Um93RHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5pc0RyYWdTdG9wID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLmdldEVsZW1lbnRGcm9tUG9zaXRpb24oY2xvbmVFbGVtZW50LCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZywge1xuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Utcm93ZHJhZycpO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChjbG9uZUVsZW1lbnQucGFyZW50RWxlbWVudCwgJ2UtZ3JpZCcpLmlkID09PSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZCcpLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbihlLmhlbHBlciwgZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Utcm93ZHJhZycpO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgJiYgZHJvcEVsZW0gJiYgZHJvcEVsZW0uZWoyX2luc3RhbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wRWxlbS5lajJfaW5zdGFuY2VzWzBdLmdldENvbnRlbnQoKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWFsbG93Um93RHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0Ryb3AsIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJyxcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSwgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZURyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgUm93REQucHJvdG90eXBlLmluaXRpYWxpemVEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICB2YXIgZHJhZztcbiAgICAgICAgICAgIGRyYWcgPSBuZXcgZWoyX2Jhc2VfMS5EcmFnZ2FibGUoZ09iai5nZXRDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtcm93Y2VsbCcsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRFbGVtZW50RnJvbVBvc2l0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGV2ZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8yLmV4dGVuZChlLCB7IHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRUYXJnZXRJZHggPSBmdW5jdGlvbiAodGFyZ2V0Um93KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Um93ID8gcGFyc2VJbnQodGFyZ2V0Um93LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkgOiAwO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuY29sdW1uRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSAhPT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRSb3cgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBzcmNDb250cm9sID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQucGFyZW50RWxlbWVudC5pZCAhPT0gZ09iai5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wgPSBlLmRyb3BwZWRFbGVtZW50LnBhcmVudEVsZW1lbnQuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNyY0NvbnRyb2wuZWxlbWVudC5pZCAhPT0gZ09iai5lbGVtZW50LmlkICYmIHNyY0NvbnRyb2wucm93RHJvcFNldHRpbmdzLnRhcmdldElEICE9PSBnT2JqLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVjb3JkcyA9IHNyY0NvbnRyb2wuZ2V0U2VsZWN0ZWRSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEluZGV4ID0gY3VycmVudEluZGV4ID0gdGhpcy5nZXRUYXJnZXRJZHgodGFyZ2V0Um93KTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChpc05hTih0YXJnZXRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IHRhcmdldEluZGV4ICsgKGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICogZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpIC0gZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5yb3dzQWRkZWQsIHsgdG9JbmRleDogdGFyZ2V0SW5kZXgsIHJlY29yZHM6IHJlY29yZHMgfSk7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncm93ZHJhZ2FuZGRyb3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IHNyY0NvbnRyb2wuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNraXAgPSBzcmNDb250cm9sLmFsbG93UGFnaW5nID9cbiAgICAgICAgICAgICAgICAgICAgKHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICogc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MucGFnZVNpemUpIC0gc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MucGFnZVNpemUgOiAwO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlY29yZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MucHVzaChza2lwICsgc2VsZWN0ZWRSb3dzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3JjQ29udHJvbC5ub3RpZnkoZXZlbnRzLnJvd3NSZW1vdmVkLCB7IGluZGV4ZXM6IHRoaXMuc2VsZWN0ZWRSb3dzLCByZWNvcmRzOiByZWNvcmRzIH0pO1xuICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jvd2RyYWdhbmRkcm9wJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZURyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyb3dEcmFnQW5kRHJvcCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dERDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93REQgPSBSb3dERDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jvdy1yZW9yZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwKHBhcmVudCwgZ3JvdXBTZXR0aW5ncywgc29ydGVkQ29sdW1ucywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdjbG9uZSBlLWdkY2xvbmUnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ2xpbmUtaGVpZ2h0OjIzcHgnLCBhdHRyczogeyBhY3Rpb246ICdncm91cGluZycgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JvdXBoZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JvdXBoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtdW5ncm91cGRyYWcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBfdGhpcy5jb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVuZ3JvdXBkcmFnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCEodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWEuc2V0R3JhYmJlZChfdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCdbYXJpYS1ncmFiYmVkPXRydWVdJyksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCksICdlLWdyaWQnKS5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYXJpYSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MgPSBncm91cFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpICYmXG4gICAgICAgICAgICAgICAgISh0aGlzLnBhcmVudC5hbGxvd1Jlb3JkZXJpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JvdXBkcm9wYXJlYScpID8gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaG92ZXInKSA6IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWhvdmVyJyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5EcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wQXJlYSA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpO1xuICAgICAgICAgICAgdGhpcy5hcmlhLnNldERyb3BUYXJnZXQoZHJvcEFyZWEsIGUuY29sdW1uLmFsbG93R3JvdXBpbmcpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gZS50YXJnZXQgOiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWEuc2V0R3JhYmJlZChlbGVtZW50LCB0cnVlLCAhZS5jb2x1bW4uYWxsb3dHcm91cGluZyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5Ecm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpID09PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCksICdlLWdyaWQnKS5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuY29sdW1uRHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmNvbHVtbkRyYWdTdGFydCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuY29sdW1uRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBDb2x1bW4oY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0VXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdPYmouYWxsb3dTZWxlY3Rpb24gPyBnT2JqLmdldFNlbGVjdGVkUm93SW5kZXhlcygpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFSb3cgPSBnT2JqLmdldERhdGFSb3dzKClbc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoIC0gMV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdycFJvdyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhUm93LnJvd0luZGV4OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdycFJvdyA9IHJvd3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKGdycFJvdy5xdWVyeVNlbGVjdG9yKGUuYWN0aW9uID09PSAnYWx0VXBBcnJvdycgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZm9jdXMuZ2V0Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbY2xhc3NePVwiZS1yZWNvcmRcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTb3J0RnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnVuR3JvdXBGcm9tVGFyZ2V0KGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMudG9vZ2xlR3JvdXBGcm9tSGVhZGVyKGUudGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVuR3JvdXBGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS50b29nbGVHcm91cEZyb21IZWFkZXIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncnB0b2dnbGVidG4nKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS10b2dnbGV1bmdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uKHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFwcGx5U29ydEZyb21UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdIZWFkZXIgPSBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JvdXBoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1NvcnRpbmcgJiYgZ0hlYWRlciAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS11bmdyb3VwYnV0dG9uJykgJiZcbiAgICAgICAgICAgICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS10b2dnbGV1bmdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBnSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGZpZWxkKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0Q29sdW1uKGZpZWxkLCAnZGVzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0Q29sdW1uKGZpZWxkLCAnYXNjZW5kaW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2VSb3dzID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpIHx8XG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgaWYgKHRyZ3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRyZ3QuY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dJZHggPSB0cmd0LnBhcmVudEVsZW1lbnQucm93SW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIHJvd05vZGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwocm93Tm9kZXMpLnNsaWNlKHJvd0lkeCArIDEsIHJvd05vZGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGlzSGlkZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kRWxlbSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdG9FeHBhbmQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZW50ID0gdHJndC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWluZGVudGNlbGwnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0cmd0LmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nZGlhZ29uYWxkb3duIGUtaWNvbi1nZG93bmFycm93JztcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RyZ3RdLCAnZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RyZ3RdLCAnZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0RXhwYW5kKHRyZ3QsIGV4cGFuZCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGQnKVtjZWxsSWR4XSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpW2NlbGxJZHhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbmRlbnRjZWxsJykgJiYgcm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWluZGVudGNlbGwnKS5sZW5ndGggPT09IGluZGVudCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEVsZW0gPSByb3dzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5lLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGFuZEVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kLnB1c2goZXhwYW5kRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpIC0gMV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZGV0YWlscm93Y29sbGFwc2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG9FeHBhbmQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdG9FeHBhbmRbaV1dLCAnZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RvRXhwYW5kW2ldXSwgJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKHRvRXhwYW5kW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHJvd05vZGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciByb3c7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93Tm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93Tm9kZXNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVjb3JkcGx1c2V4cGFuZCwgLmUtcmVjb3JkcGx1c2NvbGxhcHNlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoaXNFeHBhbmQgPyAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJyA6ICcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBpc0V4cGFuZCA/ICdlLXJlY29yZHBsdXNleHBhbmQnIDogJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSBpc0V4cGFuZCA/ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocm93Tm9kZXNbaV0uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Tm9kZXNbaV0uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJlY29yZHBsdXNjb2xsYXBzZScpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93Tm9kZXNbaV0uc3R5bGUuZGlzcGxheSA9IGlzRXhwYW5kID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2xsYXBzZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UoZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5pbml0RHJhZ0FuZERyb3AoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bigpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVuZGVyR3JvdXBEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBncm91cEVsZW0gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKTtcbiAgICAgICAgICAgIGlmIChncm91cEVsZW0pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShncm91cEVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBkcm9wYXJlYScsIGF0dHJzOiB7ICd0YWJpbmRleCc6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLnBhcmVudC5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVHcm91cERyb3BBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEgJiYgIXRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnTGFiZWwgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyb3VwRHJvcEFyZWEnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gZHJhZ0xhYmVsO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWdyb3VwZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyb3VwRHJvcEFyZWEnKSAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ncm91cGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0RHJhZ0FuZERyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHSGVhZGVyRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0hlYWRlckRyYWcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxpemVHSGVhZGVyRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkcmFnID0gbmV3IGVqMl9iYXNlXzEuRHJhZ2dhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1ncm91cGhlYWRlcmNlbGwnLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbGl6ZUdIZWFkZXJEcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzEuRHJvcHBhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5jb250ZW50UmVmcmVzaCAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmdyb3VwQ29sdW1uLCBhcmcxOiBjb2x1bW5OYW1lIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gZ09iai5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uO1xuICAgICAgICAgICAgdGhpcy5jb2xOYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2xUb0dyb3VwRHJvcChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudW5ncm91cENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gY29sdW1uTmFtZTsgfSlbMF0gOiBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fCB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy51bmdyb3VwQ29sdW1uLCBhcmcxOiBjb2x1bW5OYW1lIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY29sTmFtZSA9IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgY29sdW1ucy5zcGxpY2UoY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSksIDEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5OYW1lID09PSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIGNvbHVtbnMucHVzaCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSB0aGlzLmNvbE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMucHVzaCh7IGZpZWxkOiB0aGlzLmNvbE5hbWUsIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZ09iai5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmRpcmVjdGlvbiA9ICdhc2NlbmRpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlID09PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2xUb0dyb3VwRHJvcCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDb2xGcm9tR3JvdXBEcm9wKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSA+IC0xID8ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sTmFtZSwgcmVxdWVzdFR5cGU6ICdncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICd1bmdyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMy5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYWRkQ29sVG9Hcm91cERyb3AgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZENvbHVtbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWQtaWNvbiBlLWdyb3VwaGVhZGVyY2VsbCcgfSk7XG4gICAgICAgICAgICB2YXIgY2hpbGREaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgYXR0cnM6IHsgJ2VqLW1hcHBpbmduYW1lJzogZmllbGQgfSB9KTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDZWxsID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkRGl2LmlubmVySFRNTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29sdW1uLmhlYWRlclRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGREaXYuaW5uZXJIVE1MID0gY29sdW1uLmhlYWRlclRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGlsZERpdi5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKCdlLWdyb3VwdGV4dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdyb3VwdGV4dCcsIGlubmVySFRNTDogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdzb3J0IHRoZSBncm91cGVkIGNvbHVtbicgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10b2dnbGVncm91cGJ1dHRvbiBlLWljb25zIGUtaWNvbi11bmdyb3VwIGUtdG9nZ2xldW5ncm91cCcsIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICd1bmdyb3VwIGJ1dHRvbicgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZywuZS1kZXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1hc2NlbmRpbmcnKSA/ICdhc2NlbmRpbmcnIDogJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXBzb3J0IGUtaWNvbnMgJyArICgnZS0nICsgZGlyZWN0aW9uICsgJyBlLWljb24tJyArIGRpcmVjdGlvbiksIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3NvcnQgdGhlIGdyb3VwZWQgY29sdW1uJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS11bmdyb3VwYnV0dG9uIGUtaWNvbnMgZS1pY29uLWhpZGUnLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1VuR3JvdXAnKSwgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3VuZ3JvdXAgdGhlIGdyb3VwZWQgY29sdW1uJyB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogdGhpcy5ncm91cFNldHRpbmdzLnNob3dVbmdyb3VwQnV0dG9uID8gJycgOiAnZGlzcGxheTpub25lJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZ3JvdXBlZENvbHVtbi5hcHBlbmRDaGlsZChjaGlsZERpdik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZ3JvdXBlZENvbHVtbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZWZyZXNoVG9nZ2xlQnRuID0gZnVuY3Rpb24gKGlzUmVtb3ZlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGxkaXYnKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhlYWRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGVhZGVyc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZW1wdHljZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoaGVhZGVyc1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgfHwgKHRoaXMucGFyZW50LnNob3dDb2x1bW5NZW51ICYmICFjb2x1bW4uc2hvd0NvbHVtbk1lbnUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcnNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JwdG9nZ2xlYnRuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGhlYWRlcnNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JwdG9nZ2xlYnRuJylbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaV0uYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncnB0b2dnbGVidG4gZS1pY29ucyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW4uZmllbGQpID4gLTEgPyAnZS10b2dnbGV1bmdyb3VwIGUtaWNvbi11bmdyb3VwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdlLXRvZ2dsZWdyb3VwIGUtaWNvbi1ncm91cCcpLCBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnR3JvdXAgYnV0dG9uJyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW1vdmVDb2xGcm9tR3JvdXBEcm9wID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmdldEdIZWFkZXJDZWxsKGZpZWxkKSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpID4gLTEgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sTmFtZSwgcmVxdWVzdFR5cGU6ICdncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAndW5ncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RHJvcEFyZWEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhID8gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJyA6IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dHcm91cGVkQ29sdW1uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBlZENvbHVtbih0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93VW5ncm91cEJ1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkodGhpcy5ncm91cFNldHRpbmdzLnNob3dVbmdyb3VwQnV0dG9uLCAnZS11bmdyb3VwYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1RvZ2dsZUJ1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24sICdlLXRvZ2dsZWdyb3VwYnV0dG9uICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVmcmVzaEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlR3JvdXBlZENvbHVtbiA9IGZ1bmN0aW9uIChpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zW2ldKS52aXNpYmxlID0gaXNWaXNpYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIChpc1Zpc2libGUsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdIZWFkZXIgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNsYXNzTmFtZSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnSGVhZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ0hlYWRlcltpXS5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyR3JvdXBpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9nZ2xlQnRuKHRydWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsZWFyR3JvdXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdncm91cCc7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZWZyZXNoU29ydEljb25zID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9nZ2xlQnRuKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93U29ydGluZyAmJiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKSAmJiB0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3Vwc29ydCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5kaXJlY3Rpb24gPT09ICdhc2NlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3Vwc29ydCcpLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3Vwc29ydCcpLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGdDb2xzW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChnQ29sc1tpXSkuc2V0QXR0cmlidXRlKCdhcmlhLWdyb3VwZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ2V0R0hlYWRlckNlbGwgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlai1tYXBwaW5nbmFtZT0nICsgZmllbGQgKyAnXScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZWotbWFwcGluZ25hbWU9JyArIGZpZWxkICsgJ10nKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuR3JvdXAgPSBHcm91cDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2dyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZ3JpZFwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBncmlkXzEsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSwgcm93XzEsIGNlbGxfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxSb3cocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IGxvY2F0b3IuZ2V0U2VydmljZSgnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudG9vZ2xlRXhwYW5kY29sbGFwc2UoZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAndGQnKSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUudG9vZ2xlRXhwYW5kY29sbGFwc2UgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICdwYXJlbnREZXRhaWxzJztcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ciA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciB1aWRfMSA9IHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFJvdyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW5bdHIucm93SW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAncmVjb3Jkcyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSBnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouY3VycmVudFZpZXdEYXRhW2tleV0gOiBnT2JqLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBjdXJyZW50Vmlld0RhdGFbdHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbFJvdyhuZXh0Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFJvdy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ09iai5nZXREZXRhaWxUZW1wbGF0ZSgpIHx8IGdPYmouY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsUm93ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3cnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbENlbGwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGNlbGwnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCB0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFSb3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHM6IFtuZXcgY2VsbF8xLkNlbGwoeyBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLkluZGVudCB9KSwgbmV3IGNlbGxfMS5DZWxsKHsgaXNEYXRhQ2VsbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSB9KV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsUm93LmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscy51bnNoaWZ0KG5ldyBjZWxsXzEuQ2VsbCh7IGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChkZXRhaWxDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRldGFpbFJvdywgdHIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZGV0YWlsVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4oZGV0YWlsQ2VsbCwgZ09iai5nZXREZXRhaWxUZW1wbGF0ZSgpKGRhdGEsIGdPYmosICdkZXRhaWxUZW1wbGF0ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouY2hpbGRHcmlkW3BhcmVudF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElEOiBnT2JqLmVsZW1lbnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFByaW1hcnlLZXlzOiBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleUZpZWxkOiBnT2JqLmNoaWxkR3JpZC5xdWVyeVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50S2V5RmllbGRWYWx1ZTogZGF0YVtnT2JqLmNoaWxkR3JpZC5xdWVyeVN0cmluZ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFJvd0RhdGE6IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkID0gbmV3IGdyaWRfMS5HcmlkKGdPYmouY2hpbGRHcmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kdWxlcyA9IGdyaWQuZ2V0SW5qZWN0ZWRNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluamVjdGVkTW9kdWVzID0gZ09iai5nZXRJbmplY3RlZE1vZHVsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZHVsZXMgfHwgbW9kdWxlcy5sZW5ndGggIT09IGluamVjdGVkTW9kdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLnNldEluamVjdGVkTW9kdWxlcyhpbmplY3RlZE1vZHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2NoaWxkJyArIHV0aWxfMS5wYXJlbnRzKHRyLCAnZS1ncmlkJykubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdfZ3JpZCcgKyB0ci5yb3dJbmRleCArIHV0aWxfMS5nZXRVaWQoJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsQ2VsbC5hcHBlbmRDaGlsZChncmlkRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5hcHBlbmRUbyhncmlkRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZGV0YWlsQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkZXRhaWxSb3csIHRyLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHhfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKS5zb21lKGZ1bmN0aW9uIChyLCBySW5kZXgpIHsgaWR4XzEgPSBySW5kZXg7IHJldHVybiByLnVpZCA9PT0gdWlkXzE7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRSb3dzKCkuc3BsaWNlKHRyLnJvd0luZGV4ICsgMSwgMCwgZGV0YWlsUm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKS5zcGxpY2UoaWR4XzEgKyAxLCAwLCByb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5kZXRhaWxEYXRhQm91bmQsIHsgZGV0YWlsRWxlbWVudDogZGV0YWlsQ2VsbCwgZGF0YTogZGF0YSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5kZXRhaWxEYXRhQm91bmQsIHsgcm93czogdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRhcmdldCwgWydlLWRldGFpbHJvd2V4cGFuZCddLCBbJ2UtZGV0YWlscm93Y29sbGFwc2UnXSk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZCwgWydlLWR0ZGlhZ29uYWxkb3duJywgJ2UtaWNvbi1nZG93bmFycm93J10sIFsnZS1kdGRpYWdvbmFscmlnaHQnLCAnZS1pY29uLWdyaWdodGFycm93J10pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0RXhwYW5kKHRhcmdldCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbFJvdyhuZXh0Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRhcmdldCwgWydlLWRldGFpbHJvd2NvbGxhcHNlJ10sIFsnZS1kZXRhaWxyb3dleHBhbmQnXSk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZCwgWydlLWR0ZGlhZ29uYWxyaWdodCcsICdlLWljb24tZ3JpZ2h0YXJyb3cnXSwgWydlLWR0ZGlhZ29uYWxkb3duJywgJ2UtaWNvbi1nZG93bmFycm93J10pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0RXhwYW5kKHRhcmdldCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5pc0RldGFpbFJvdyA9IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHJldHVybiByb3cgJiYgcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZ2V0VERmcm9tSW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF07XG4gICAgICAgICAgICBpZiAodHIgJiYgdHIucXVlcnlTZWxlY3RvcihjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyLnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZ2V0VERmcm9tSW5kZXgodGFyZ2V0LCAnLmUtZGV0YWlscm93Y29sbGFwc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZSh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmNvbGxhcHNlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRURGZyb21JbmRleCh0YXJnZXQsICcuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3dleHBhbmQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vZ2xlRXhwYW5kY29sbGFwc2UodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmNvbGxhcHNlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZShmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoaXNFeHBhbmQpIHtcbiAgICAgICAgICAgIHZhciB0ZDtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGQgPSByb3dzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlLCAuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICBpc0V4cGFuZCA/IHRoaXMuZXhwYW5kKHRkKSA6IHRoaXMuY29sbGFwc2UodGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxEb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0VXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0RG93bkFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ09iai5hbGxvd1NlbGVjdGlvbiA/IGdPYmouZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFSb3cgPSBnT2JqLmdldERhdGFSb3dzKClbc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoIC0gMV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gZGF0YVJvdy5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3djb2xsYXBzZSwgLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmFjdGlvbiA9PT0gJ2FsdERvd25BcnJvdycgPyB0aGlzLmV4cGFuZCh0ZCkgOiB0aGlzLmNvbGxhcHNlKHRkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZm9jdXMuZ2V0Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3dleHBhbmQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGV0YWlsUm93JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbFJvdztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGV0YWlsUm93ID0gRGV0YWlsUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGV0YWlsLXJvdy5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfbmF2aWdhdGlvbnNfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFRvb2xiYXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUb29sYmFyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zID0ge307XG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gWydhZGQnLCAnZWRpdCcsICd1cGRhdGUnLCAnZGVsZXRlJywgJ2NhbmNlbCcsICdwcmludCcsICdzZWFyY2gnLFxuICAgICAgICAgICAgICAgICdjb2x1bW5jaG9vc2VyJywgJ3BkZmV4cG9ydCcsICdleGNlbGV4cG9ydCcsICdjc3ZleHBvcnQnLCAnd29yZGV4cG9ydCddO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHZhciBwcmVJdGVtcyA9IFsnYWRkJywgJ2VkaXQnLCAndXBkYXRlJywgJ2RlbGV0ZScsICdjYW5jZWwnLCAncHJpbnQnLFxuICAgICAgICAgICAgICAgICdwZGZleHBvcnQnLCAnZXhjZWxleHBvcnQnLCAnd29yZGV4cG9ydCcsICdjc3ZleHBvcnQnXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJlSXRlbXNfMSA9IHByZUl0ZW1zOyBfaSA8IHByZUl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBwcmVJdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxlTmFtZSA9IGl0ZW1bMF0udG9VcHBlckNhc2UoKSArIGl0ZW0uc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW0sIHByZWZpeEljb246ICdlLScgKyBpdGVtLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSksIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuc2VhcmNoID0ge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfc2VhcmNoJywgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiZS1zZWFyY2hcIiByb2xlPVwic2VhcmNoXCIgPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJ1dHRvblwiIGNsYXNzPVwiZS1zZWFyY2hmaW5kIGUtaWNvbnNcIiB0YWJpbmRleD1cIi0xXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPSBcInNlYXJjaFwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cIicgKyB0aGlzLmdyaWRJRCArICdfc2VhcmNoYmFyXCIgYXJpYS1tdWx0aWxpbmU9IFwiZmFsc2VcIiB0eXBlPVwic2VhcmNoXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPScgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpICsgJz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDwvaW5wdXQ+PC9kaXY+JywgdG9vbHRpcFRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJyksIGFsaWduOiAncmlnaHQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuY29sdW1uY2hvb3NlciA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyAnY29sdW1uY2hvb3NlcicsIGNzc0NsYXNzOiAnZS1jYyBlLWNjZGl2IGUtY2MtdG9vbGJhcicsIHN1ZmZpeEljb246ICdlLScgKyAnY29sdW1uY2hvb3Nlci1idG4nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdDb2x1bW5zJywgdG9vbHRpcFRleHQ6ICdjb2x1bW5zJywgYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG9vbGJhci5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgZWoyX25hdmlnYXRpb25zXzEuVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLFxuICAgICAgICAgICAgICAgIGNsaWNrZWQ6IHRoaXMudG9vbGJhckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVBlcnNpc3RlbmNlOiB0aGlzLnBhcmVudC5lbmFibGVQZXJzaXN0ZW5jZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdmlld1N0ciA9ICd2aWV3Q29udGFpbmVyUmVmJztcbiAgICAgICAgICAgIHZhciByZWdpc3RlclRlbXAgPSAncmVnaXN0ZXJlZFRlbXBsYXRlJztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudFt2aWV3U3RyXSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhcltyZWdpc3RlclRlbXBdID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyW3ZpZXdTdHJdID0gdGhpcy5wYXJlbnRbdmlld1N0cl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ190b29sYmFySXRlbXMnIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnRvb2xiYXIuZWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbih0aGlzLmVsZW1lbnQsIHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkoe30sIHRoaXMucGFyZW50LCAndG9vbGJhclRlbXBsYXRlJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhcicpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXJJdGVtcyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGVuYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGdPYmouZWRpdFNldHRpbmdzO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0FkZGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0VkaXRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19lZGl0JykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0RlbGV0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJyk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQgJiYgKGVkaXQuYWxsb3dBZGRpbmcgfHwgZWRpdC5hbGxvd0VkaXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zID0gW3RoaXMuZ3JpZElEICsgJ191cGRhdGUnLCB0aGlzLmdyaWRJRCArICdfY2FuY2VsJ107XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfYWRkJywgdGhpcy5ncmlkSUQgKyAnX2VkaXQnLCB0aGlzLmdyaWRJRCArICdfZGVsZXRlJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGVuYWJsZUl0ZW1zLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSXRlbXMoZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgdG9vbGJhckl0ZW1zID0gdGhpcy5wYXJlbnQudG9vbGJhciB8fCBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXIpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdG9vbGJhckl0ZW1zXzEgPSB0b29sYmFySXRlbXM7IF9pIDwgdG9vbGJhckl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0b29sYmFySXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh0aGlzLmdldEl0ZW1PYmplY3QodGhpcy5pdGVtc1tpdGVtXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbU9iamVjdChpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2godGhpcy5nZXRJdGVtKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAoaXRlbU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtT2JqZWN0LnRleHRdO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPyBlajJfYmFzZV8xLmV4dGVuZChpdGVtLCBpdGVtLCBpdGVtT2JqZWN0KSA6IGl0ZW1PYmplY3Q7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1PYmplY3QgPSBmdW5jdGlvbiAoaXRlbU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtTmFtZV0gfHwgeyB0ZXh0OiBpdGVtTmFtZSwgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgaXRlbU5hbWUgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZW5hYmxlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGlzRW5hYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZW5hYmxlSXRlbXMoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBpc0VuYWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50b29sYmFyQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0lEID0gdGhpcy5ncmlkSUQ7XG4gICAgICAgICAgICBpZiAoIWFyZ3MuaXRlbSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMudG9vbGJhckNsaWNrLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MuaXRlbS5pZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19wcmludCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmoucHJpbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2VkaXQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnN0YXJ0RWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfdXBkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jYW5jZWwnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5hZGRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19zZWFyY2gnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldC5pZCA9PT0gZ0lEICsgJ19zZWFyY2hidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jb2x1bW5jaG9vc2VyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhckVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RWxlID0gYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGFyRWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouY3JlYXRlQ29sdW1uY2hvb3Nlcih4LCB5LCB0YXJnZXRFbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm1vZGVsQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpIHx8ICF0aGlzLnBhcmVudC50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5rZXlVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWFyY2godGhpcy5zZWFyY2hFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudXBkYXRlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSA9IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUud2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudW5XaXJlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3guYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLnVwZGF0ZVNlYXJjaEJveCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbGJhclJlZnJlc2gsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b29sYmFyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2xiYXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlRvb2xiYXIgPSBUb29sYmFyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvdG9vbGJhci5qc1xuLy8gbW9kdWxlIGlkID0gNzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9mb290ZXItcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgY29uc3RhbnRfMSwgZm9vdGVyX3JlbmRlcmVyXzEsIHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBZ2dyZWdhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGUocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FnZ3JlZ2F0ZSc7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuaW5pdGlhdGVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNlbGxGYWMgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLlN1bW1hcnlDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICBbZW51bV8xLkNlbGxUeXBlLlN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeV0uZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjZWxsRmFjLmFkZENlbGxSZW5kZXJlcih0eXBlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIgPSBuZXcgZm9vdGVyX3JlbmRlcmVyXzEuRm9vdGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IucmVnaXN0ZXIoJ2Zvb3RlclJlbmRlcmVyJywgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuZGF0YVJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5mb290ZXJSZW5kZXJlci5yZWZyZXNoLCB0aGlzLmZvb3RlclJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5wcmVwYXJlU3VtbWFyeUluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgc3VtbWFyeUl0ZXJhdG9yKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMsIGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNvbHVtbiA9IF90aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbi5maWVsZCkgfHwge307XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBkYXRhQ29sdW1uLnR5cGU7XG4gICAgICAgICAgICAgICAgY29sdW1uLmZvcm1hdCA9IF90aGlzLmdldEZvcm1hdEZyb21UeXBlKGNvbHVtbi5mb3JtYXQsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY29sdW1uTmFtZSA9IGNvbHVtbi5jb2x1bW5OYW1lIHx8IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldEZvcm1hdEZyb21UeXBlID0gZnVuY3Rpb24gKGZvcm1hdCwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodHlwZSkgfHwgdHlwZW9mIGZvcm1hdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgZm9ybWF0OiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogdHlwZSwgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyUmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWF0ZVJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVwYXJlU3VtbWFyeUluZm8oKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIGNNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIGdNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChnTW9kZWwuZ2V0RGF0YSgpLmxlbmd0aCAhPT0gMCB8fCAhY01vZGVsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Rm9vdGVyQ29udGVudCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlID0gQWdncmVnYXRlO1xuICAgIGZ1bmN0aW9uIHN1bW1hcnlJdGVyYXRvcihhZ2dyZWdhdGVzLCBjYWxsYmFjaykge1xuICAgICAgICBhZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY29sdW1uLCByb3cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnN1bW1hcnlJdGVyYXRvciA9IHN1bW1hcnlJdGVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2FnZ3JlZ2F0ZS5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGNvbnN0YW50XzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZvb3RlclJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZvb3RlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGb290ZXJSZW5kZXJlcihncmlkTW9kdWxlLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5hZ2dyZWdhdGVzID0ge307XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBncmlkTW9kdWxlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMubW9kZWxHZW5lcmF0b3IgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGZvb3RlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y29udGVudCcgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldFBhZ2VyKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgdGhpcy5wYXJlbnQuZ2V0UGFnZXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5jcmVhdGVDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGlubmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJyk7XG4gICAgICAgICAgICB2YXIgdEZvb3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rmb290Jyk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Rm9vdCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclN1bW1hcnlDb250ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBBcnJheSA/IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgc3VtbWFyaWVzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgZHVtbWllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhpbnB1dCwgZSB8fCB0aGlzLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIHJvd3JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMubG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgcm93cmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVFInLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeXJvdycgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBzcm93ID0gMCwgbGVuID0gc3VtbWFyaWVzLmxlbmd0aDsgc3JvdyA8IGxlbjsgc3JvdysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3Nbc3Jvd107XG4gICAgICAgICAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ciA9IHJvd3JlbmRlcmVyLnJlbmRlcihyb3csIGR1bW1pZXMpO1xuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS50Rm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgICAgICB0aGlzLmFnZ3JlZ2F0ZXMgPSBlO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkudEZvb3QuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclN1bW1hcnlDb250ZW50KGUpO1xuICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaENvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDb2wgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5yZXBsYWNlQ2hpbGQoaGVhZGVyQ29sLCB0aGlzLmdldENvbEdyb3VwKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cChoZWFkZXJDb2wpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUub25XaWR0aENoYW5nZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmdldENvbEdyb3VwKCkuY2hpbGRyZW5bYXJncy5pbmRleF0uc3R5bGUud2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQoYXJncy53aWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZyAmJiBhcmdzLm1vZHVsZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlclRhYmxlV2lkdGgodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IHsgbGVmdDogdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQuc2Nyb2xsTGVmdCB9OyB9XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5zY3JvbGxMZWZ0ID0gZS5sZWZ0O1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5yZWZyZXNoQ29sLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLm9uV2lkdGhDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5zY3JvbGwsIHRoaXMub25TY3JvbGwsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sR3JvdXBSZWZyZXNoLCB0aGlzLnJlZnJlc2hDb2wpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLm9uV2lkdGhDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuc2Nyb2xsLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZUZvb3RlclRhYmxlV2lkdGggPSBmdW5jdGlvbiAodEZvb3QpIHtcbiAgICAgICAgICAgIHZhciB0SGVhZCA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCk7XG4gICAgICAgICAgICBpZiAodEhlYWQgJiYgdEZvb3QpIHtcbiAgICAgICAgICAgICAgICB0Rm9vdC5zdHlsZS53aWR0aCA9IHRIZWFkLnN0eWxlLndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRm9vdGVyUmVuZGVyZXI7XG4gICAgfShjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcikpO1xuICAgIGV4cG9ydHMuRm9vdGVyUmVuZGVyZXIgPSBGb290ZXJSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9mb290ZXItcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdW1tYXJ5Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFN1bW1hcnlDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN1bW1hcnlDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnljZWxsJywgYXR0cnM6IHsgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTdW1tYXJ5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAga2V5ID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnR5cGUpID8gY29sdW1uLmZpZWxkICsgJyAtICcgKyAoY29sdW1uLnR5cGUpIDogY29sdW1uLmNvbHVtbk5hbWU7XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtjb2x1bW4uY29sdW1uTmFtZV0gPyBkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXVtrZXldIDogJyc7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlDZWxsUmVuZGVyZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIGlmICghKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGVtcE9iaiA9IGNvbHVtbi5nZXRUZW1wbGF0ZShjZWxsLmNlbGxUeXBlKTtcbiAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCB0ZW1wT2JqLmZuKGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdLCB0aGlzLnBhcmVudCwgdGVtcE9iai5wcm9wZXJ0eSkpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3VtbWFyeUNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLlN1bW1hcnlDZWxsUmVuZGVyZXIgPSBTdW1tYXJ5Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvZWRpdC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGxcIiwgXCIuLi9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbFwiLCBcIi4vaW5saW5lLWVkaXRcIiwgXCIuL2JhdGNoLWVkaXRcIiwgXCIuL2RpYWxvZy1lZGl0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9yZW5kZXJlci9kYXRlcGlja2VyLWVkaXQtY2VsbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGV2ZW50cywgZWRpdF9yZW5kZXJlcl8xLCBib29sZWFuX2VkaXRfY2VsbF8xLCBkcm9wZG93bl9lZGl0X2NlbGxfMSwgbnVtZXJpY19lZGl0X2NlbGxfMSwgZGVmYXVsdF9lZGl0X2NlbGxfMSwgaW5saW5lX2VkaXRfMSwgYmF0Y2hfZWRpdF8xLCBkaWFsb2dfZWRpdF8xLCBlajJfcG9wdXBzXzEsIHV0aWxfMSwgZWoyX2lucHV0c18xLCBkYXRlcGlja2VyX2VkaXRfY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRDZWxsVHlwZSA9IHtcbiAgICAgICAgICAgICAgICAnZHJvcGRvd25lZGl0JzogZHJvcGRvd25fZWRpdF9jZWxsXzEuRHJvcERvd25FZGl0Q2VsbCwgJ251bWVyaWNlZGl0JzogbnVtZXJpY19lZGl0X2NlbGxfMS5OdW1lcmljRWRpdENlbGwsXG4gICAgICAgICAgICAgICAgJ2RhdGVwaWNrZXJlZGl0JzogZGF0ZXBpY2tlcl9lZGl0X2NlbGxfMS5EYXRlUGlja2VyRWRpdENlbGwsICdib29sZWFuZWRpdCc6IGJvb2xlYW5fZWRpdF9jZWxsXzEuQm9vbGVhbkVkaXRDZWxsLCAnZGVmYXVsdGVkaXQnOiBkZWZhdWx0X2VkaXRfY2VsbF8xLkRlZmF1bHRFZGl0Q2VsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7ICdpbmxpbmUnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdub3JtYWwnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdiYXRjaCc6IGJhdGNoX2VkaXRfMS5CYXRjaEVkaXQsICdkaWFsb2cnOiBkaWFsb2dfZWRpdF8xLkRpYWxvZ0VkaXQgfTtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdE9iaigpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBbGVydERsZygpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb25maXJtRGxnKCk7XG4gICAgICAgIH1cbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ29sVHlwZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY29sLmVkaXQgPSBlajJfYmFzZV8yLmV4dGVuZChuZXcgdGhpcy5lZGl0Q2VsbFR5cGVbY29sLmVkaXRUeXBlICYmIHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZV0gP1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdFR5cGUgOiAnZGVmYXVsdGVkaXQnXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciksIGNvbC5lZGl0IHx8IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZWRpdCc7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dBZGRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0RlbGV0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dFZGl0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCBnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbEVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0T2JqKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUVkaXRPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgZWRpdF9yZW5kZXJlcl8xLkVkaXRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sVHlwZU9iaigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudGFwRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlckFnZW50KCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRvdWJsZVRhcCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIC9pcGhvbmV8aXBvZHxpcGFkLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCBnT2JqLmlzRWRpdCB8fCBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdFZGl0T3BlcmF0aW9uQWxlcnQnLCB0aGlzLmFsZXJ0RE9iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHIuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnN0YXJ0RWRpdCh0cik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSgnc3RhcnQtZWRpdCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZ1xuICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdDYW5jZWxFZGl0JywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSgnY2xvc2UtZWRpdCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoJ3N0YXJ0LWFkZCcsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgfHwgZ09iai5zZWxlY3RlZFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0RlbGV0ZU9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NvbmZpcm1EZWxldGUnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQobnVsbCwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKV0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlQ29uZmlybScsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlQ2VsbChyb3dJbmRleCwgZmllbGQsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlUm93KGluZGV4LCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdENlbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZWRpdENlbGwoaW5kZXgsIGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdEZvcm1WYWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRNb2R1bGUuZ2V0QmF0Y2hDaGFuZ2VzID8gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcygpIDoge307XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0Q2VsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5nZXRDdXJyZW50RWRpdGVkRGF0YSh0aGlzLmZvcm1PYmouZWxlbWVudCwge30pO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtPYmplY3Qua2V5cyhvYmopWzBdXTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc2F2ZUNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc2F2ZUNlbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAoY29udGVudCwgb2JqKSB7XG4gICAgICAgICAgICBvYmouY29udGVudCA9ICc8ZGl2PicgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoY29udGVudCkgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIG9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgb2JqLnNob3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0VmFsdWVGcm9tVHlwZSA9IGZ1bmN0aW9uIChjb2wsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gdmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSA/IHBhcnNlRmxvYXQodmFsdWUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1RydWUnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSAhPT0gJ2RhdGVwaWNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95VG9vbFRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JpZGVycm9yJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVDb25maXJtRGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5kbGdPay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnQ2FuY2VsLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0JywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNyZWF0ZUFsZXJ0RGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5hbGVydENsaWNrLmJpbmQodGhpcyksIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnT0tCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLWZsYXQnLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0QWxlcnQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWxlcnRDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnV2lkZ2V0ID0gZnVuY3Rpb24gKGJ0bk9wdGlvbnMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBuYW1lIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgc2hvd0Nsb3NlSWNvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNNb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzMyMHB4JyxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gYnRuT3B0aW9ucztcbiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyhvcHRpb25zKTtcbiAgICAgICAgICAgIG9iai5hcHBlbmRUbyhkaXYpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUob2JqLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kbGdPayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGxnLWNvbnRlbnQnKS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ29uZmlybURlbGV0ZScpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxFZGl0Jyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0JhdGNoU2F2ZUNvbmZpcm0nKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVMb3N0Q2hhbmdlcycpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ0NhbmNlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmF1dG9Db2wsIHRoaXMudXBkYXRlQ29sVHlwZU9iaiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXAsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3lGb3JtLCB0aGlzLmRlc3Ryb3lGb3JtLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uQmVnaW5GdW5jdGlvbiA9IHRoaXMub25BY3Rpb25CZWdpbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uID0gdGhpcy5hY3Rpb25Db21wbGV0ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMuYWN0aW9uQmVnaW5GdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLndpcmVFdmVudHMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmopO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy50b29sdGlwRGVzdHJveSwgdGhpcy5kZXN0cm95VG9vbFRpcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLmFjdGlvbkJlZ2luRnVuY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnVud2lyZUV2ZW50cyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gWydhZGQnLCAnYmVnaW5FZGl0JywgJ3NhdmUnLCAnZGVsZXRlJywgJ2NhbmNlbCddO1xuICAgICAgICAgICAgaWYgKGFjdGlvbnMuaW5kZXhPZihlLnJlcXVlc3RUeXBlKSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0Q3VycmVudEVkaXRlZERhdGEgPSBmdW5jdGlvbiAoZm9ybSwgZWRpdGVkRGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbnB1dHMgPSBbXS5zbGljZS5jYWxsKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZmllbGQnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoaW5wdXRzW2ldLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoY29sICYmIGNvbC5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LnJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8yLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC50eXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGdPYmouZWRpdE1vZHVsZS5nZXRWYWx1ZUZyb21UeXBlKGNvbCwgY29sLmVkaXQucmVhZChpbnB1dHNbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gaW5wdXRzW2ldLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRWYWx1ZShjb2wuZmllbGQsIHZhbHVlLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWRpdGVkRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgZS5yZXF1ZXN0VHlwZSAhPT0gJ3NhdmUnICYmIHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVdpZGdldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveVdpZGdldHMgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgY29scyA9IGNvbHMgPyBjb2xzIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18xID0gY29sczsgX2kgPCBjb2xzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0LmRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLmVkaXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveUZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lUb29sVGlwKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtT2JqICYmICF0aGlzLmZvcm1PYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1PYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZXN0cm95VG9vbFRpcCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtKTtcbiAgICAgICAgICAgIGVsZW0gPSB0aGlzLmFsZXJ0RE9iai5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luc2VydCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2YyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICcuZS11bmJvdW5kY2VsbGRpdicpICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1wb3B1cC1vcGVuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucHJldmVudEJhdGNoID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE9iaiA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0JhdGNoU2F2ZUxvc3RDaGFuZ2VzJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5leGVjdXRlQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50T2JqLmhhbmRsZXIuY2FsbCh0aGlzLnByZXZlbnRPYmouaW5zdGFuY2UsIHRoaXMucHJldmVudE9iai5hcmcxLCB0aGlzLnByZXZlbnRPYmouYXJnMiwgdGhpcy5wcmV2ZW50T2JqLmFyZzMsIHRoaXMucHJldmVudE9iai5hcmc0LCB0aGlzLnByZXZlbnRPYmouYXJnNSwgdGhpcy5wcmV2ZW50T2JqLmFyZzYsIHRoaXMucHJldmVudE9iai5hcmc3KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYXBwbHlGb3JtVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSB7fTtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18yID0gY29sczsgX2kgPCBjb2xzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMltfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52YWxpZGF0aW9uUnVsZXMgJiYgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcjJyArIGdPYmouZWxlbWVudC5pZCArIGNvbC5maWVsZCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzW2NvbC5maWVsZF0gPSBjb2wudmFsaWRhdGlvblJ1bGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiA9IG5ldyBlajJfaW5wdXRzXzEuRm9ybVZhbGlkYXRvcihmb3JtLCB7XG4gICAgICAgICAgICAgICAgcnVsZXM6IHJ1bGVzLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25Db21wbGV0ZTogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGlvbkNvbXBsZXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY3VzdG9tUGxhY2VtZW50OiBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxFcnJvclBsYWNlbWVudChpbnB1dEVsZW1lbnQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsRXJyb3JQbGFjZW1lbnQgPSBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGVycm9yLmdldEF0dHJpYnV0ZSgnZm9yJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW0gPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19kaWFsb2dFZGl0X3dyYXBwZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHBhcmVudEVsZW0ucXVlcnlTZWxlY3RvcignIycgKyBpZCArICdfRXJyb3InKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUb29sdGlwKGlucHV0RWxlbWVudCwgZXJyb3IsIGlkLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLXRpcC1jb250ZW50JykuaW5uZXJIVE1MID0gZXJyb3IuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicpO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gcGFyZW50RWxlbS5xdWVyeVNlbGVjdG9yKCcjJyArIGFyZ3MuaW5wdXROYW1lICsgJ19FcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0YXR1cyA9PT0gJ2ZhaWx1cmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY3JlYXRlVG9vbHRpcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBlcnJvciwgbmFtZSwgZGlzcGxheSkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkgOlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19kaWFsb2dFZGl0X3dyYXBwZXInKS5xdWVyeVNlbGVjdG9yKCcuZS1kbGctY29udGVudCcpO1xuICAgICAgICAgICAgdmFyIGNsaWVudCA9IHRhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGlucHV0Q2xpZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbChlbGVtZW50LCAnZS1yb3djZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10b29sdGlwLXdyYXAgZS1wb3B1cCBlLWdyaWRlcnJvcicsXG4gICAgICAgICAgICAgICAgaWQ6IG5hbWUgKyAnX0Vycm9yJyxcbiAgICAgICAgICAgICAgICBzdHlsZXM6ICdkaXNwbGF5OicgKyBkaXNwbGF5ICsgJzt0b3A6JyArXG4gICAgICAgICAgICAgICAgICAgIChpbnB1dENsaWVudC5ib3R0b20gLSBjbGllbnQudG9wICsgdGFibGUuc2Nyb2xsVG9wICsgOSkgKyAncHg7bGVmdDonICtcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0Q2xpZW50LmxlZnQgLSBjbGllbnQubGVmdCArIHRhYmxlLnNjcm9sbExlZnQgKyBpbnB1dENsaWVudC53aWR0aCAvIDIpICsgJ3B4OydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS10aXAtY29udGVudCcgfSk7XG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVycm9yKTtcbiAgICAgICAgICAgIHZhciBhcnJvdyA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWFycm93LXRpcCBlLXRpcC10b3AnIH0pO1xuICAgICAgICAgICAgYXJyb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtYXJyb3ctdGlwLW91dGVyIGUtdGlwLXRvcCcgfSkpO1xuICAgICAgICAgICAgYXJyb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtYXJyb3ctdGlwLWlubmVyIGUtdGlwLXRvcCcgfSkpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGFycm93KTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYuc3R5bGUubGVmdCA9IChwYXJzZUludChkaXYuc3R5bGUubGVmdCwgMTApIC0gZGl2Lm9mZnNldFdpZHRoIC8gMikgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRWRpdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRWRpdCA9IEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9pbnB1dHNfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOdW1lcmljRWRpdENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBOdW1lcmljRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmNvbHVtbi5maWVsZCwgbmFtZTogYXJncy5jb2x1bW4uZmllbGQsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0udmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2lucHV0c18xLk51bWVyaWNUZXh0Qm94KGVqMl9iYXNlXzEuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyc2VGbG9hdChhcmdzLnJvd0RhdGFbY29sLmZpZWxkXSksIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB1dGlsXzEuaXNFZGl0YWJsZShhcmdzLmNvbHVtbiwgYXJncy5yZXF1ZXN0VHlwZSwgYXJncy5lbGVtZW50KSxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgfSwgY29sLmVkaXQucGFyYW1zKSk7XG4gICAgICAgICAgICB0aGlzLm9iai5hcHBlbmRUbyhhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIGNvbC5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaiAmJiAhdGhpcy5vYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1lcmljRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk51bWVyaWNFZGl0Q2VsbCA9IE51bWVyaWNFZGl0Q2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2lubGluZS1lZGl0LXJlbmRlcmVyXCIsIFwiLi9iYXRjaC1lZGl0LXJlbmRlcmVyXCIsIFwiLi9kaWFsb2ctZWRpdC1yZW5kZXJlclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGlubGluZV9lZGl0X3JlbmRlcmVyXzEsIGJhdGNoX2VkaXRfcmVuZGVyZXJfMSwgZGlhbG9nX2VkaXRfcmVuZGVyZXJfMSwgZWoyX2Jhc2VfMiwgZW51bV8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFZGl0UmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2lubGluZSc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlcixcbiAgICAgICAgICAgICAgICAnbm9ybWFsJzogaW5saW5lX2VkaXRfcmVuZGVyZXJfMS5JbmxpbmVFZGl0UmVuZGVyLCAnYmF0Y2gnOiBiYXRjaF9lZGl0X3JlbmRlcmVyXzEuQmF0Y2hFZGl0UmVuZGVyLCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfcmVuZGVyZXJfMS5EaWFsb2dFZGl0UmVuZGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHBhcmVudCwgc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IHNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkTmV3KHRoaXMuZ2V0RWRpdEVsZW1lbnRzKGFyZ3MpLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuY29udmVydFdpZGdldChhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKHRoaXMuZ2V0RWRpdEVsZW1lbnRzKGFyZ3MpLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuY29udmVydFdpZGdldChhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuY29udmVydFdpZGdldCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGlzRm9jdXNlZDtcbiAgICAgICAgICAgIHZhciBjZWxsO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyA/IGdPYmouY29sdW1ucyA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUgfHwgY29sLmNvbW1hbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIGNvbC51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQud3JpdGU7XG4gICAgICAgICAgICAgICAgY29sLmVkaXQud3JpdGUoe1xuICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiBhcmdzLnJvd0RhdGEsIGVsZW1lbnQ6IGNlbGwsIGNvbHVtbjogY29sLCByZXF1ZXN0VHlwZTogYXJncy5yZXF1ZXN0VHlwZSwgcm93OiBhcmdzLnJvd1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNGb2N1c2VkICYmICFjZWxsLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbWVudChjZWxsLCBhcmdzLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZm9jdXNFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW0sIHR5cGUpIHtcbiAgICAgICAgICAgIHZhciBjaGtCb3ggPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXQtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjaGtCb3gpKSB7XG4gICAgICAgICAgICAgICAgY2hrQm94Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWZvY3VzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLm9uQ2xpY2soeyB0YXJnZXQ6IGVqMl9iYXNlXzEuY2xvc2VzdChlbGVtLCAndGQnKSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnZS1kZWZhdWx0Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRTZWxlY3Rpb25SYW5nZShlbGVtLnZhbHVlLmxlbmd0aCwgZWxlbS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnID8gZ09iai5jb2x1bW5zIDogW2dPYmouZ2V0Q29sdW1uQnlGaWVsZChhcmdzLmNvbHVtbk5hbWUpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKCFjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5jb21tYW5kcyB8fCBjb2wuY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyRmFjdCA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Db21tYW5kQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gbW9kZWwuZ2VuZXJhdGVSb3dzKGFyZ3Mucm93RGF0YSlbMF0uY2VsbHM7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IGNlbGxSZW5kZXJlci5yZW5kZXIoY2VsbHNbaV0sIGFyZ3Mucm93RGF0YSwgeyAnaW5kZXgnOiBhcmdzLnJvdyA/IGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpIDogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IHRkLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCd0ZXh0QWxpZ24nLCB0ZC5nZXRBdHRyaWJ1dGUoJ3RleHRBbGlnbicpKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbY29sLnVpZF0gPSBkaXY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2wudmFsdWVBY2Nlc3Nvcihjb2wuZmllbGQsIGFyZ3Mucm93RGF0YSwgY29sKTtcbiAgICAgICAgICAgICAgICB2YXIgdEFyZ3MgPSB7IGNvbHVtbjogY29sLCB2YWx1ZTogdmFsdWUsIHR5cGU6IGFyZ3MucmVxdWVzdFR5cGUsIGRhdGE6IGFyZ3Mucm93RGF0YSB9O1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQuY3JlYXRlO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IGNvbC5lZGl0LmNyZWF0ZSh0QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpbnB1dC50YWdOYW1lICE9PSAnaW5wdXQnICYmIGlucHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpc0lucHV0ID8gaW5wdXQucXVlcnlTZWxlY3RvcignaW5wdXQnKSA6IGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbC5maWVsZCwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBnT2JqLmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoaW5wdXQsIFsnZS1pbnB1dCcsICdlLWZpZWxkJ10sIFtdKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnRleHRBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLXJhbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGNvbC5pc1ByaW1hcnlLZXkgfHwgY29sLmlzSWRlbnRpdHkpICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICdiZWdpbkVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2wudWlkXSA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRWRpdFJlbmRlciA9IEVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1yb3cgZS1hZGRlZHJvdycgfSk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUoYXJncy5yb3csIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgYXJncy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGRFbGVtZW50ID0gW10uc2xpY2UuY2FsbChhcmdzLnJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5lLXJvd2NlbGwnKSk7XG4gICAgICAgICAgICBhcmdzLnJvdy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGFyZ3Mucm93LmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIHRydWUsIHRkRWxlbWVudCkpO1xuICAgICAgICAgICAgYXJncy5yb3cuY2xhc3NMaXN0LmFkZCgnZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGlzRWRpdCwgdGRFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdMZW4gPSAwO1xuICAgICAgICAgICAgdmFyIGlzRGV0YWlsID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5kZXRhaWxUZW1wbGF0ZSkgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5jaGlsZEdyaWQpID8gMSA6IDA7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZ0xlbiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1lZGl0Y2VsbCBlLW5vcm1hbGVkaXQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbHNwYW46IChnT2JqLmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoICsgZ0xlbiArIGlzRGV0YWlsKS50b1N0cmluZygpIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUgZS1pbmxpbmUtZWRpdCcsIGF0dHJzOiB7IGNlbGxzcGFjaW5nOiAnMC4yNScgfSB9KTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKGlzRGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgdHIuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93Y29sbGFwc2UnIH0pLCB0ci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgZ0xlbikge1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSkpO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtID0gMDtcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKChpc0VkaXQgJiYgbSA8IHRkRWxlbWVudC5sZW5ndGggJiYgaSA8IGdPYmouY29sdW1ucy5sZW5ndGgpIHx8IGkgPCBnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBpc0VkaXQgPyB0ZEVsZW1lbnRbbV0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmNvbHVtbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZF8xID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHN0eWxlOiAndGV4dC1hbGlnbjonICsgKGNvbC50ZXh0QWxpZ24gPyBjb2wudGV4dEFsaWduIDogJycpLCAnY29sc3Bhbic6IHNwYW4gPyBzcGFuIDogJycgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGRfMS5hcHBlbmRDaGlsZChlbGVtZW50c1tjb2wudWlkXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkXzEuY2xhc3NMaXN0LmFkZCgnZS1ib29sY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbC5jb21tYW5kcyB8fCBjb2wuY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbdGRfMV0sICdlLXVuYm91bmRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkgPSBzcGFuID8gaSArIHBhcnNlSW50KHNwYW4sIDEwKSA6IGkgKyAxO1xuICAgICAgICAgICAgICAgIG0rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgICAgICByZXR1cm4gdGQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0UmVuZGVyID0gSW5saW5lRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCYXRjaEVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXRjaEVkaXRSZW5kZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBCYXRjaEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgYXJncy5jZWxsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgYXJncy5jZWxsLmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIGFyZ3MpKTtcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWVkaXRlZGJhdGNoY2VsbCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QoYXJncy5yb3csIFsnZS1lZGl0ZWRyb3cnLCAnZS1iYXRjaHJvdyddLCBbXSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChlbGVtZW50c1thcmdzLmNvbHVtbk9iamVjdC51aWRdKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbk9iamVjdC5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWJvb2xjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWFyZ3MuY29sdW1uT2JqZWN0LmVkaXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXRib3gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmF0Y2hFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5CYXRjaEVkaXRSZW5kZXIgPSBCYXRjaEVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gODdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9wb3B1cHNfMSwgZWoyX2Jhc2VfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERpYWxvZ0VkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEaWFsb2dFZGl0UmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5zZXRMb2NhbGVPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5hZGROZXcgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZyhlbGVtZW50cywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVEaWFsb2coZWxlbWVudHMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5jcmVhdGVEaWFsb2cgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ19kaWFsb2dFZGl0X3dyYXBwZXInIH0pO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxlT2JqKCk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRoaXMuaXNFZGl0ID8gdGhpcy5sMTBuLmdldENvbnN0YW50KCdFZGl0Rm9ybVRpdGxlJykgKyBhcmdzLnByaW1hcnlLZXlWYWx1ZVswXSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQWRkRm9ybVRpdGxlJyksIGlzTW9kYWw6IHRydWUsIHZpc2libGU6IHRydWUsIGNzc0NsYXNzOiAnZS1lZGl0LWRpYWxvZycsXG4gICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cyksIHNob3dDbG9zZUljb246IHRydWUsIGFsbG93RHJhZ2dpbmc6IHRydWUsIGNsb3NlOiB0aGlzLmRlc3Ryb3kuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiB0cnVlLCB3aWR0aDogJzMzMHB4JywgdGFyZ2V0OiBnT2JqLmVsZW1lbnQsIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmJ0bkNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NhdmVCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLXByaW1hcnknLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNsaWNrOiB0aGlzLmJ0bkNsaWNrLmJpbmQodGhpcyksIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0JywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9IH1dXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmFwcGVuZFRvKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5idG5DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKS50b0xvd2VyQ2FzZSgpID09PSBlLnRhcmdldC5pbm5lclRleHQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZW5kRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZGVzdHJveUZvcm0sIHt9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nICYmICF0aGlzLmRpYWxvZ09iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLmRpYWxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IHRoaXMuaXNFZGl0ID8gJ2UtZWRpdGVkcm93JyA6ICdlLWluc2VydGVkcm93JyB9KTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICc2cHgnIH0gfSk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghY29sc1tpXS52aXNpYmxlIHx8IGNvbHNbaV0uY29tbWFuZHMgfHwgY29sc1tpXS5jb21tYW5kc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmxlZnQ7d2lkdGg6MTkwcHgnIH0gfSk7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgaW5uZXJIVE1MOiBjb2xzW2ldLmZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2NvbHNbaV0udWlkXS5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0Jyk7XG4gICAgICAgICAgICAgICAgZGF0YUNlbGwuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sc1tpXS51aWRdKTtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChkYXRhQ2VsbCk7XG4gICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgICAgICByZXR1cm4gZGl2O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGlhbG9nRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGlhbG9nRWRpdFJlbmRlciA9IERpYWxvZ0VkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGlhbG9nLWVkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9idXR0b25zXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9vbGVhbkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQm9vbGVhbkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVDbGFzc2VzID0gWydlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWVzID0gJ2UtZmllbGQgZS1ib29sY2VsbCc7XG4gICAgICAgICAgICBpZiAoY29sLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWVzID0gJ2UtZmllbGQgZS1ib29sY2VsbCBlLWVkaXQtY2hlY2tzZWxlY3QnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogYXJncy52YWx1ZSwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNoZWNrZWQ7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdENoa0JveDtcbiAgICAgICAgICAgIHZhciBjaGtTdGF0ZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnJvdykpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RDaGtCb3ggPSBhcmdzLnJvdy5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0LWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXSkge1xuICAgICAgICAgICAgICAgIGNoa1N0YXRlID0gSlNPTi5wYXJzZShhcmdzLnJvd0RhdGFbYXJncy5jb2x1bW4uZmllbGRdLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc2VsZWN0Q2hrQm94KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cgPSBhcmdzLnJvdztcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5yZXF1ZXN0VHlwZSAhPT0gJ2FkZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQoYXJncy5yb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgY2hrU3RhdGUgPSByb3cgPyByb3cuaXNTZWxlY3RlZCA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlsXzEuYWRkUmVtb3ZlQWN0aXZlQ2xhc3Nlcy5hcHBseSh2b2lkIDAsIFtbXS5zbGljZS5jYWxsKGFyZ3Mucm93LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSksIGNoa1N0YXRlXS5jb25jYXQodGhpcy5hY3RpdmVDbGFzc2VzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KGVqMl9iYXNlXzIuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNoa1N0YXRlLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogdGhpcy5jaGVja0JveENoYW5nZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LCBhcmdzLmNvbHVtbi5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5jaGVja0JveENoYW5nZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0Um93ICYmIHRoaXMuZWRpdFR5cGUgIT09ICdkaWFsb2cnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFkZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghYXJncy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJvdy5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJvdy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCBhZGQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHV0aWxfMS5hZGRSZW1vdmVBY3RpdmVDbGFzc2VzLmFwcGx5KHZvaWQgMCwgW1tdLnNsaWNlLmNhbGwodGhpcy5lZGl0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSksIGFkZF0uY29uY2F0KHRoaXMuYWN0aXZlQ2xhc3NlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmopIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCb29sZWFuRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJvb2xlYW5FZGl0Q2VsbCA9IEJvb2xlYW5FZGl0Q2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9kcm9wZG93bnNfMSwgZWoyX2RhdGFfMSwgdXRpbF8xLCB1dGlsXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERyb3BEb3duRWRpdENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEcm9wRG93bkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmllbGQnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuY29sdW1uLmZpZWxkLCBuYW1lOiBhcmdzLmNvbHVtbi5maWVsZCwgdHlwZTogJ3RleHQnLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gYXJncy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgaXNJbmxpbmUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZyc7XG4gICAgICAgICAgICB0aGlzLm9iaiA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KGVqMl9iYXNlXzEuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5kYXRhU291cmNlKSxcbiAgICAgICAgICAgICAgICBxdWVyeTogbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS5zZWxlY3QoYXJncy5jb2x1bW4uZmllbGQpLCBlbmFibGVkOiB1dGlsXzEuaXNFZGl0YWJsZShhcmdzLmNvbHVtbiwgYXJncy5yZXF1ZXN0VHlwZSwgYXJncy5lbGVtZW50KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgdmFsdWU6IGFyZ3MuY29sdW1uLmZpZWxkIH0sIHZhbHVlOiBhcmdzLnJvd0RhdGFbYXJncy5jb2x1bW4uZmllbGRdLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLCBhY3Rpb25Db21wbGV0ZTogdGhpcy5kZEFjdGlvbkNvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCwgcG9wdXBIZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IGlzSW5saW5lID8gJ05ldmVyJyA6ICdBbHdheXMnLCBvcGVuOiB0aGlzLmRyb3BEb3duT3Blbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgfSwgYXJncy5jb2x1bW4uZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgYXJncy5jb2x1bW4uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0udmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmRkQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5yZXN1bHQgPSBlLnJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaSwgdmFsdWVzKSB7IHJldHVybiB2YWx1ZXMuaW5kZXhPZih2YWwpID09PSBpOyB9KTtcbiAgICAgICAgICAgIGUucmVzdWx0LnNvcnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZHJvcERvd25PcGVuID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBkbGdFbGVtZW50ID0gdXRpbF8yLnBhcmVudHNVbnRpbCh0aGlzLm9iai5lbGVtZW50LCAnZS1kaWFsb2cnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkbGdFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciBkbGdPYmogPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZGxnRWxlbWVudC5pZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICBhcmdzLnBvcHVwLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gKGRsZ09iai56SW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRHJvcERvd25FZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRHJvcERvd25FZGl0Q2VsbCA9IERyb3BEb3duRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGVmYXVsdEVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGVmYXVsdEVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtaW5wdXQgZS1kZWZhdWx0Y2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgdmFsdWU6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpID8gYXJncy52YWx1ZSA6ICcnLCAnZS1tYXBwaW5ndWlkJzogY29sLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsIG5hbWU6IGNvbC5maWVsZCwgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyBjb2wudGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgZWoyX2lucHV0c18xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhcmdzLmVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlOiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCwgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGVmYXVsdEVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EZWZhdWx0RWRpdENlbGwgPSBEZWZhdWx0RWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIElubGluZUVkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSW5saW5lRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXQgPSBJbmxpbmVFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvaW5saW5lLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOb3JtYWxFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTm9ybWFsRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSAmJiAhdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXVuYm91bmRjZWxsZGl2JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKSA/IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkgOiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRPbkRibENsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5zdGFydEVkaXQodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZGl0Q29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBzd2l0Y2ggKGUucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja2JveHNlbGVjdGlvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAhdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcGVyc2lzdHNlbGVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3coMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5lZGl0Um93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5VmFsdWVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdGhpcy5lZGl0Um93SW5kZXggPSBwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMucm93SW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltYXJ5S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXlWYWx1ZXMucHVzaCh0aGlzLnByZXZpb3VzRGF0YVtwcmltYXJ5S2V5c1tpXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcm93OiB0ciwgcHJpbWFyeUtleTogcHJpbWFyeUtleXMsIHByaW1hcnlLZXlWYWx1ZTogcHJpbWFyeUtleVZhbHVlcywgcmVxdWVzdFR5cGU6ICdiZWdpbkVkaXQnLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCByb3dJbmRleDogdGhpcy5yb3dJbmRleCwgdHlwZTogJ2VkaXQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWdpbkVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gJ2FjdGlvbkJlZ2luJztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdkaWFsb2cnKSB7XG4gICAgICAgICAgICAgICAgYXJncy5yb3cuY2xhc3NMaXN0LmFkZCgnZS1kbGdlZGl0cm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZShhcmdzKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdHIuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9ICdhY3Rpb25Db21wbGV0ZSc7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCB8fCAhZ09iai5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMucHJldmlvdXNEYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZWRpdGVkRGF0YSwgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCBzZWxlY3RlZFJvdzogZ09iai5zZWxlY3RlZFJvd0luZGV4LCBmb3JlaWduS2V5RGF0YToge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdGVkcm93JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXJncy5hY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy51cGRhdGVEYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2FkZCc7XG4gICAgICAgICAgICAgICAgYXJncy5zZWxlY3RlZFJvdyA9IDA7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveVdpZGdldHMoKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnZGlhbG9nJyAmJiBhcmdzLmFjdGlvbiAhPT0gJ2FkZCcpIHtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGxnZWRpdHJvdycpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZGxnZWRpdHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZGl0SGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MucHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGFyZ3MucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5lZFN1Y2MoZSwgYXJncyk7IH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5lZEZhaWwoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2Vzcyh7fSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkU3VjYyA9IGZ1bmN0aW9uIChlLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRTdWNjZXNzKGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZEZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0RmFpbHVyZShlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdFN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgaWYgKGUucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYmVmb3JlRGF0YUJvdW5kLCBlKTtcbiAgICAgICAgICAgICAgICBhcmdzLmRhdGEgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSBldmVudHMuYWN0aW9uQ29tcGxldGU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvdyhhcmdzLmRhdGEpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja2JveHNlbGVjdGlvbicpXG4gICAgICAgICAgICAgICAgfHwgIXRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBlcnNpc3RzZWxlY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdyh0aGlzLnJvd0luZGV4ID4gLTEgPyB0aGlzLnJvd0luZGV4IDogdGhpcy5lZGl0Um93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0aGlzLnVpZCk7XG4gICAgICAgICAgICBpZiAocm93T2JqKSB7XG4gICAgICAgICAgICAgICAgcm93T2JqLmNoYW5nZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHJvdy5yZWZyZXNoKHJvd09iaiwgdGhpcy5wYXJlbnQuY29sdW1ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnY2FuY2VsJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvdyhhcmdzLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5yb3dJbmRleCk7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzYXZlJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiBkYXRhLCBzZWxlY3RlZFJvdzogMCwgYWN0aW9uOiAnYWRkJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLnVpZCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhW2NvbC5maWVsZF0gPSBkYXRhICYmIGRhdGFbY29sLmZpZWxkXSA/IGRhdGFbY29sLmZpZWxkXSA6IGNvbC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdhZGQnLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh7IHJvd0RhdGE6IGFyZ3MuZGF0YSwgcmVxdWVzdFR5cGU6ICdhZGQnIH0pO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Um93SW5kZXggPSB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2RlbGV0ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZm9yZWlnbktleURhdGE6IHt9LFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEgPyBbZGF0YV0gOiB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJlY29yZHMoKSwgdHI6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93cygpLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuc3RvcEVkaXRTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY3J1ZEFjdGlvbiwgdGhpcy5lZGl0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVsZXRlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE5vcm1hbEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk5vcm1hbEVkaXQgPSBOb3JtYWxFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDkzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9yb3ctcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZW51bV8xLCB1dGlsXzEsIGV2ZW50cywgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYmVmb3JlQ2VsbEZvY3VzZWQsIHRoaXMub25CZWZvcmVDZWxsRm9jdXNlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbEZvY3VzZWQsIHRoaXMub25DZWxsRm9jdXNlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRhdGFCb3VuZEZ1bmN0aW9uID0gdGhpcy5kYXRhQm91bmQuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmRGdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuYmVmb3JlQ2VsbEZvY3VzZWQsIHRoaXMub25CZWZvcmVDZWxsRm9jdXNlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbEZvY3VzZWQsIHRoaXMub25DZWxsRm9jdXNlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuZGF0YUJvdW5kRnVuY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYXRhQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2FkZCcsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiYgIXRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHgoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvdycpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0ciAmJiAhaXNOYU4ocGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApLCB0aGlzLnBhcmVudC5jb2x1bW5zW3BhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApXS5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUub25CZWZvcmVDZWxsRm9jdXNlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0ICYmIHRoaXMudmFsaWRhdGVGb3JtT2JqKCkgJiZcbiAgICAgICAgICAgICAgICAoZS5ieUNsaWNrIHx8IChbJ3RhYicsICdzaGlmdFRhYicsICdlbnRlcicsICdzaGlmdEVudGVyJ10uaW5kZXhPZihlLmtleUFyZ3MuYWN0aW9uKSA+IC0xKSkpIHtcbiAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGUuYnlDbGljaykge1xuICAgICAgICAgICAgICAgICAgICBlLmNsaWNrQXJncy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZS5rZXlBcmdzLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLm9uQ2VsbEZvY3VzZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNsZWFyID0gIWUuY29udGFpbmVyLmlzQ29udGVudCB8fCAhZS5jb250YWluZXIuaXNEYXRhQ2VsbDtcbiAgICAgICAgICAgIGlmICghZS5ieUtleSB8fCBjbGVhcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IGUuY29udGFpbmVyLmluZGV4ZXMsIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIGlzRWRpdCA9IHRoaXMucGFyZW50LmlzRWRpdDtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtcG9wdXAtb3BlbicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlzRWRpdCA9IGlzRWRpdCAmJiAhdGhpcy52YWxpZGF0ZUZvcm1PYmooKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5QXJncy5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFiJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRUYWInOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGxGcm9tSW5kZXgocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUua2V5QXJncy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwocm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmlzQWRkUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SWR4LCBjZWxsSWR4KSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcm93SWR4O1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSBjZWxsSWR4O1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChyb3dJZHgsIHRoaXMucGFyZW50LmNvbHVtbnNbY2VsbElkeF0uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKTtcbiAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3dzW2ldLnVpZCArICddJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRChyb3dzW2ldLnVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvd3NbaV0uY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0ciwgW10sIFsnZS1oaWRkZW5yb3cnLCAnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIucmVmcmVzaChyb3dzW2ldLCBnT2JqLmNvbHVtbnMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB0aGlzLmJ1bGtEZWxldGUoZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5idWxrQWRkUm93KGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCAmJiB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYXRjaFNhdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS52YWxpZGF0ZUZvcm1PYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqICYmICF0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLmdldEJhdGNoQ2hhbmdlcygpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGJhdGNoQ2hhbmdlczogY2hhbmdlcywgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmJ1bGtTYXZlLCB7IGNoYW5nZXM6IGNoYW5nZXMgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0QmF0Y2hDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB7XG4gICAgICAgICAgICAgICAgYWRkZWRSZWNvcmRzOiBbXSxcbiAgICAgICAgICAgICAgICBkZWxldGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFJlY29yZHM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd3NfMSA9IHJvd3M7IF9pIDwgcm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJvdy5lZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuYWRkZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmRlbGV0ZWRSZWNvcmRzLnB1c2gocm93LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmNoYW5nZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnVpZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd3Muc3BsaWNlKGksIDEpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmFkZFJvd09iamVjdCA9IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKS51bnNoaWZ0KHJvdyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0RlbGV0ZSA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBkYXRhID8gdGhpcy5nZXRJbmRleEZyb21EYXRhKGRhdGEpIDogZ09iai5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleTogdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgcm93RGF0YTogZGF0YSA/IGRhdGEgOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpWzBdLFxuICAgICAgICAgICAgICAgIHJvdzogZGF0YSA/IGdPYmouZ2V0Um93cygpW2luZGV4XSA6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF0sIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWFyZ3Mucm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgdWlkID0gYXJncy5yb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKGFyZ3Mucm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSb3dPYmplY3RGcm9tVUlEKHVpZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoYXJncy5yb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByb3dPYmouZWRpdCA9ICdkZWxldGUnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGFyZ3Mucm93LCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coaW5kZXgpO1xuICAgICAgICAgICAgZGVsZXRlIGFyZ3Mucm93O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuYmF0Y2hEZWxldGUsIHsgcm93czogdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpIH0pO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVmcmVzaFJvd0lkeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBkYXRhUm93cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1oaWRkZW5yb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcsIGoudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXJvd2luZGV4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldEluZGV4RnJvbURhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pbkFycmF5KGRhdGEsIHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5idWxrQWRkUm93ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlZmF1bHREYXRhID0gZGF0YSA/IGRhdGEgOiB0aGlzLmdldERlZmF1bHREYXRhKCk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0YTogZGVmYXVsdERhdGEsXG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleTogZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZUJhdGNoQWRkLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIG1vZGVsID0gbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgbW9kZWxEYXRhID0gbW9kZWwuZ2VuZXJhdGVSb3dzKFthcmdzLmRlZmF1bHREYXRhXSk7XG4gICAgICAgICAgICB2YXIgdHIgPSByb3cucmVuZGVyKG1vZGVsRGF0YVswXSwgZ09iai5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdmFyIGNvbDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdHIuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSksIHRyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIG1vZGVsRGF0YVswXS5jZWxscy51bnNoaWZ0KG5ldyBjZWxsXzEuQ2VsbCh7IGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIHRyLmNsYXNzTGlzdC5hZGQoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZSh0ciwgdGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSwgWydlLXVwZGF0ZWR0ZCddKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIG1vZGVsRGF0YVswXS5kYXRhKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5lZGl0ID0gJ2FkZCc7XG4gICAgICAgICAgICB0aGlzLmFkZFJvd09iamVjdChtb2RlbERhdGFbMF0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzLmZvcmdldFByZXZpb3VzKCk7XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCgwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb2wgPSBnT2JqLmNvbHVtbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwoMCwgY29sLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzMSA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0YTogYXJncy5kZWZhdWx0RGF0YSwgcm93OiB0cixcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbCwgY29sdW1uSW5kZXg6IGluZGV4LCBwcmltYXJ5S2V5OiBhcmdzLnByaW1hcnlLZXksIGNlbGw6IHRyLmNlbGxzW2luZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hBZGQsIGFyZ3MxKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5iYXRjaEFkZCwgeyByb3dzOiB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZmluZE5leHRFZGl0YWJsZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2hlY2tOUENlbGwgPSBmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgICByZXR1cm4gIWNvbC50ZW1wbGF0ZSAmJiBjb2wudmlzaWJsZSAmJiAhY29sLmlzUHJpbWFyeUtleSAmJiAhY29sLmlzSWRlbnRpdHkgJiYgY29sLmFsbG93RWRpdGluZztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREZWZhdWx0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGRWYWx1ZXMgPSB7ICdudW1iZXInOiAwLCAnc3RyaW5nJzogbnVsbCwgJ2Jvb2xlYW4nOiBmYWxzZSwgJ2RhdGUnOiBudWxsLCAnZGF0ZXRpbWUnOiBudWxsIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZGF0YVtjb2wuZmllbGRdID0gY29sLmRlZmF1bHRWYWx1ZSA/IGNvbC5kZWZhdWx0VmFsdWUgOiBkVmFsdWVzW2NvbC50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENlbGxJZHggPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGdMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSB0YXJnZXQuY2VsbEluZGV4IC0gZ0xlbjtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXRDZWxsID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyAmJiBjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmICEodGhpcy5jZWxsRGV0YWlscy5jb2x1bW4uZmllbGQgPT09IGZpZWxkICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBnT2JqLmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICgoa2V5c1swXSA9PT0gY29sLmZpZWxkICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93JykpIHx8IGNvbC50ZW1wbGF0ZSB8fCBjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3dEYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMuZ2V0RGF0YUJ5SW5kZXgoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5hcHBseShyb3cuY2VsbHMpO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBjZWxsOiBjZWxsc1t0aGlzLmdldENvbEluZGV4KGNlbGxzLCB0aGlzLmdldENlbGxJZHgoY29sLnVpZCkpXSwgcm93OiByb3csXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IGNvbC5maWVsZCwgY29sdW1uT2JqZWN0OiBjb2wsIGlzRm9yZWlnbktleTogIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sLmZvcmVpZ25LZXlWYWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IGtleXMsIHJvd0RhdGE6IHJvd0RhdGEsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25SdWxlczogZWoyX2Jhc2VfMS5leHRlbmQoe30sIGNvbC52YWxpZGF0aW9uUnVsZXMgPyBjb2wudmFsaWRhdGlvblJ1bGVzIDoge30pLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93RGF0YVtjb2wuZmllbGRdLCB0eXBlOiAhaXNBZGQgPyAnZWRpdCcgOiAnYWRkJywgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCFhcmdzLmNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNlbGxFZGl0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiByb3dEYXRhLCBjb2x1bW46IGNvbCwgdmFsdWU6IGFyZ3MudmFsdWUsIGlzRm9yZWlnbktleTogYXJncy5pc0ZvcmVpZ25LZXksIHJvd0luZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4OiBwYXJzZUludChhcmdzLmNlbGwuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdXBkYXRlZHRkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbG9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tib3hzZWxlY3Rpb24nKSB8fCAhZ09iai5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1wZXJzaXN0c2VsZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScpO1xuICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKFtjb2xdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICBpZiAoY29sICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0uY2VsbHNbdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGZpZWxkKV07XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFREKHRkLCBjb2wsIHJvd09iaiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnF1ZXJ5Q2VsbEluZm8sIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogdGQsIGNvbHVtbjogY29sLCBkYXRhOiByb3dPYmouY2hhbmdlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENoYW5nZXMgPSBmdW5jdGlvbiAocm93T2JqLCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghcm93T2JqLmNoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICByb3dPYmouY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCByb3dPYmouZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dPYmouY2hhbmdlc1tmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbChpbmRleCwgY29sLCBkYXRhW2NvbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldENlbGxJZHggPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgY0lkeCA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQodWlkKSArIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmNoaWxkR3JpZCkpIHtcbiAgICAgICAgICAgICAgICBjSWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY0lkeDtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoVEQgPSBmdW5jdGlvbiAodGQsIGNvbHVtbiwgcm93T2JqLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBuZXcgY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLnNldENoYW5nZXMocm93T2JqLCBjb2x1bW4uZmllbGQsIHZhbHVlKTtcbiAgICAgICAgICAgIGNlbGwucmVmcmVzaFREKHRkLCByb3dPYmouY2VsbHNbdGhpcy5nZXRDZWxsSWR4KGNvbHVtbi51aWQpXSwgcm93T2JqLmNoYW5nZXMpO1xuICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRDb2xJbmRleCA9IGZ1bmN0aW9uIChjZWxscywgaW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgY2VsbHMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSBwYXJzZUludChjZWxsc1ttXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNhdmVDZWxsID0gZnVuY3Rpb24gKGlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSAmJiAoIWdPYmouaXNFZGl0IHx8IHRoaXMudmFsaWRhdGVGb3JtT2JqKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0aGlzLmZvcm0sICdlLXJvdycpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuY2VsbERldGFpbHMuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGVkaXRlZERhdGEgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0Q3VycmVudEVkaXRlZERhdGEodGhpcy5mb3JtLCB7fSk7XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQodGhpcy5jZWxsRGV0YWlscy5yb3dEYXRhLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IGNvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZWRpdGVkRGF0YVtjb2x1bW4uZmllbGRdLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMuY2VsbERldGFpbHMucm93RGF0YSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbHVtbk9iamVjdDogY29sdW1uLFxuICAgICAgICAgICAgICAgIGNlbGw6IHRoaXMuZm9ybS5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGlzRm9yZWlnbktleTogdGhpcy5jZWxsRGV0YWlscy5pc0ZvcmVpZ25LZXksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jZWxsU2F2ZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5kZXN0cm95V2lkZ2V0cyhbY29sdW1uXSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hURChhcmdzLmNlbGwsIGNvbHVtbiwgZ09iai5nZXRSb3dPYmplY3RGcm9tVUlEKHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSksIGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdHJdLCBbJ2UtZWRpdGVkcm93JywgJ2UtYmF0Y2hyb3cnXSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFthcmdzLmNlbGxdLCBbJ2UtZWRpdGVkYmF0Y2hjZWxsJywgJ2UtYm9vbGNlbGwnXSk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpICYmIGFyZ3MudmFsdWUudG9TdHJpbmcoKSA9PT1cbiAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsRGV0YWlscy52YWx1ZSkgPyB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlIDogJycpLnRvU3RyaW5nKCkgJiYgIXRoaXMuaXNDb2xvcmVkKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGF0YUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICByZXR1cm4gcm93LmNoYW5nZXMgPyByb3cuY2hhbmdlcyA6IHJvdy5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmF0Y2hFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5CYXRjaEVkaXQgPSBCYXRjaEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEaWFsb2dFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERpYWxvZ0VkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEaWFsb2dFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5EaWFsb2dFZGl0ID0gRGlhbG9nRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9jYWxlbmRhcnNfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEYXRlUGlja2VyRWRpdENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRlUGlja2VyRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBEYXRlUGlja2VyRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmNvbHVtbi5maWVsZCwgbmFtZTogYXJncy5jb2x1bW4uZmllbGQsIHR5cGU6ICd0ZXh0JywgJ2UtbWFwcGluZ3VpZCc6IGFyZ3MuY29sdW1uLnVpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlUGlja2VyRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWoyX2luc3RhbmNlc1swXS52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVBpY2tlckVkaXRDZWxsLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaXNJbmxpbmUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZyc7XG4gICAgICAgICAgICB0aGlzLm9iaiA9IG5ldyBlajJfY2FsZW5kYXJzXzEuRGF0ZVBpY2tlcihlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IGlzSW5saW5lID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShhcmdzLnJvd0RhdGFbYXJncy5jb2x1bW4uZmllbGRdKSwgcGxhY2Vob2xkZXI6IGlzSW5saW5lID9cbiAgICAgICAgICAgICAgICAgICAgJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB1dGlsXzEuaXNFZGl0YWJsZShhcmdzLmNvbHVtbiwgYXJncy50eXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgfSwgYXJncy5jb2x1bW4uZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQaWNrZXJFZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGVQaWNrZXJFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0ZVBpY2tlckVkaXRDZWxsID0gRGF0ZVBpY2tlckVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9leHBvcnQtaGVscGVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZWoyX2V4Y2VsX2V4cG9ydF8xLCBlajJfYmFzZV8xLCBkYXRhXzEsIGV4cG9ydF9oZWxwZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSwgZW51bV8xLCBlajJfZGF0YV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeGNlbEV4cG9ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4Y2VsRXhwb3J0KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5ib29rID0ge307XG4gICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAnYXBwZW5kdG9zaGVldCc7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNFbGVtZW50SWRDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnRXhjZWxFeHBvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChnT2JqKSB7XG4gICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50ICE9PSBudWxsICYmIGdPYmouZWxlbWVudC5pZCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0VsZW1lbnRJZENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBnT2JqO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYm9vayA9IHt9O1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAxO1xuICAgICAgICAgICAgdGhpcy5mb290ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAnYXBwZW5kdG9zaGVldCc7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydFZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5NYXAgPSBmdW5jdGlvbiAoZ3JpZCwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGlzQ3N2KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IGdyaWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEoZ09iaik7XG4gICAgICAgICAgICB0aGlzLmlzRXhwb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChpc0Nzdikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBpc0NzdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlRXhjZWxFeHBvcnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1JlY29yZHMoZ3JpZCwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZHMgPSBmdW5jdGlvbiAoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IF90aGlzLmRhdGEuZ2V0RGF0YSh7fSwgX3RoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0lubmVyUmVjb3JkcyA9IGZ1bmN0aW9uIChnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgcikge1xuICAgICAgICAgICAgdmFyIGJsYW5rUm93cyA9IDU7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9IChleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LnR5cGUgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQudHlwZSA6ICdhcHBlbmR0b3NoZWV0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQuYmxhbmtSb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhbmtSb3dzID0gZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC5ibGFua1Jvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdvcmtib29rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IHdvcmtib29rLndvcmtzaGVldHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHdvcmtib29rLndvcmtzaGVldHNbMF0ucm93cztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB3b3JrYm9vay53b3Jrc2hlZXRzWzBdLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAodGhpcy5yb3dzW3RoaXMucm93cy5sZW5ndGggLSAxXS5pbmRleCArIGJsYW5rUm93cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZUV4cG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIChpc011bHRpcGxlRXhwb3J0IHx8IHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cFR5cGUgPT09ICdhcHBlbmR0b3NoZWV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uID0gKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3cgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydEhlbHBlcihnT2JqKS5nZXRIZWFkZXJzKGdPYmouY29sdW1ucywgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKTtcbiAgICAgICAgICAgIHZhciBncm91cEluZGVudCA9IDA7XG4gICAgICAgICAgICBpZiAoKHIucmVzdWx0KS5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBJbmRlbnQgKz0gKHIucmVzdWx0KS5sZXZlbDtcbiAgICAgICAgICAgICAgICBncm91cEluZGVudCArPSAoci5yZXN1bHQpLmNoaWxkTGV2ZWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSGVhZGVyQ29udGVudChnT2JqLCBoZWFkZXJSb3csIGV4cG9ydFByb3BlcnRpZXMsIGdyb3VwSW5kZW50KTtcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgIShleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZXhwb3J0VHlwZSA9PT0gJ2N1cnJlbnRwYWdlJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZXhjZWxFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkQ29udGVudCA9IGZ1bmN0aW9uIChnT2JqLCByZXR1cm5UeXBlLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGN1cnJlbnRWaWV3UmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIHZhciByZWNvcmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSBjdXJyZW50Vmlld1JlY29yZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWNvcmQubGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCByZWNvcmQubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkUm93cyhnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCByZXR1cm5UeXBlLnJlc3VsdCwgY3VycmVudFZpZXdSZWNvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgcmV0dXJuVHlwZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZXhwVHlwZSA9PT0gJ2FwcGVuZHRvc2hlZXQnICYmICFpc011bHRpcGxlRXhwb3J0KSB8fCAodGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NFeGNlbEZvb3Rlcih0aGlzLmZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNoZWV0ID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaGVldC5jb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXQucm93cyA9IHRoaXMucm93cztcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0LnB1c2goc2hlZXQpO1xuICAgICAgICAgICAgdGhpcy5ib29rLndvcmtzaGVldHMgPSB0aGlzLndvcmtTaGVldDtcbiAgICAgICAgICAgIHRoaXMuYm9vay5zdHlsZXMgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ3N2RXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib29rID0gbmV3IGVqMl9leGNlbF9leHBvcnRfMS5Xb3JrYm9vayh0aGlzLmJvb2ssICdjc3YnKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zYXZlKCdFeHBvcnQuY3N2Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9vayA9IG5ldyBlajJfZXhjZWxfZXhwb3J0XzEuV29ya2Jvb2sodGhpcy5ib29rLCAneGxzeCcpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNhdmUoJ0V4cG9ydC54bHN4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudElkQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaWQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJvd3MgPSBmdW5jdGlvbiAoZ09iaiwgZGF0YVNvdXJjZSwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSBpbmRleCArIGxldmVsO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGl0ZW0uZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gaXRlbS5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlICs9IGl0ZW0uY291bnQgKyAnIGl0ZW1zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cENhcHRpb25TdW1tYXJ5Um93cyA9IGNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cENhcHRpb25TdW1tYXJ5Um93cywgZGF0YVNvdXJjZS5sZXZlbCArIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHRoaXMucm93TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsSW5kZXggPSBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscyArIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzWzBdLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSB0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0Q2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Q2VsbC5pbmRleCA8IGxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxJbmRleCA9IHRDZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4ID4gaEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0Q2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxJbmRleCAtIGNlbGwuaW5kZXgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gbEluZGV4IC0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaEluZGV4IDwgKGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aCArIGluZGV4ICsgbGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDZWxsLmluZGV4ID0gKGhJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChzQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gaGVhZGVyUm93LmNvbHVtbnM7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzID0gY2VsbHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgaXRlbS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgKGxldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgaXRlbSwgdW5kZWZpbmVkLCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciByTGVuID0gT2JqZWN0LmtleXMocmVjb3JkKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJMZW47IHIrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBoZWFkZXJSb3cuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZWNvcmRbcl1baGVhZGVyUm93LmNvbHVtbnNbY10uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhjZWxDZWxsQXJncyA9IHsgZGF0YTogcmVjb3JkW3JdLCBjb2x1bW46IGhlYWRlclJvdy5jb2x1bW5zW2NdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsUXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoZXhjZWxDZWxsQXJncywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogaGVhZGVyUm93LmNvbHVtbnNbY10sIGRhdGE6IHJlY29yZFtyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsIHN0eWxlOiB1bmRlZmluZWQsIGNvbFNwYW46IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gaW5kZXggKyBsZXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBleGNlbENlbGxBcmdzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VsQ2VsbEFyZ3MuY29sU3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbFNwYW4gPSBleGNlbENlbGxBcmdzLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjZWxDZWxsQXJncy5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlSW5kZXggPSB0aGlzLmdldENvbHVtblN0eWxlKGdPYmosIGluZGV4ICsgbGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLm1lcmdlT3B0aW9ucyh0aGlzLnN0eWxlc1tzdHlsZUluZGV4XSwgZXhjZWxDZWxsQXJncy5zdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0geyBuYW1lOiBnT2JqLmVsZW1lbnQuaWQgKyAnY29sdW1uJyArIChpbmRleCArIGxldmVsKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCByZWMsIGN1cnJlbnRWaWV3UmVjb3JkcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgc3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gY3VycmVudFZpZXdSZWNvcmRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHJlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGEsIHsgbGV2ZWw6IGRhdGEubGV2ZWwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwU3VtbWFyeVJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxBZ2dyZWdhdGVzKGdPYmosIGdyb3VwU3VtbWFyeVJvd3MsIGluZGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhLCByZWMuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICBpZiAoc1Jvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFnZ3JlZ2F0ZXMoZ09iaiwgc1Jvd3MsIGluZGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5maWxsQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCBjZWxscywgaW5kZW50LCBjdXN0b21JbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsc18xID0gY2VsbHM7IF9pIDwgY2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzXzIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSByb3cuY2VsbHM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZUNlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjZWxsLnZpc2libGUgfHwgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5pbmRleCA9IGluZGV4ICsgaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gdHh0WzBdLndob2xlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IE9iamVjdC5rZXlzKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gY2VsbC5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmF2ZXJhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uZmFsc2Vjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmZhbHNlY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnN0eWxlID0gdGhpcy5nZXRDYXB0aW9uVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuaW5kZXggPSBpbmRleCArIGluZGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiBjdXN0b21JbmRleCwgY2VsbHM6IGNlbGxzXzIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHNfMiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbiAoSlNPTjEsIEpTT04yKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgICAgICB2YXIgYXR0cm5hbWUgPSBPYmplY3Qua2V5cyhKU09OMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXR0cm5hbWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJuYW1lW2luZGV4XSAhPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFthdHRybmFtZVtpbmRleF1dID0gSlNPTjFbYXR0cm5hbWVbaW5kZXhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRybmFtZSA9IE9iamVjdC5rZXlzKEpTT04yKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRybmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cm5hbWVbaW5kZXhdICE9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJuYW1lW2luZGV4XV0gPSBKU09OMlthdHRybmFtZVtpbmRleF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDb2x1bW5TdHlsZSA9IGZ1bmN0aW9uIChnT2JqLCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN0eWxlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLm5hbWUgPT09IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKGdPYmosIGhlYWRlclJvdywgZXhwb3J0UHJvcGVydGllcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gMTtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGhlYWRlclJvdztcbiAgICAgICAgICAgIHZhciBncmlkUm93cyA9IHJldHVyblZhbHVlLnJvd3M7XG4gICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSByZXR1cm5WYWx1ZS5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKGluZGVudCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleCAhPT0gaW5kZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4ICsgMSwgd2lkdGg6IDMwIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGdyaWRSb3dzLmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENlbGxJbmRleCA9IDEgKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sdW1uXzEgPSAwOyBjb2x1bW5fMSA8IGdyaWRSb3dzW3Jvd10uY2VsbHMubGVuZ3RoOyBjb2x1bW5fMSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZENlbGwgPSBncmlkUm93c1tyb3ddLmNlbGxzW2NvbHVtbl8xXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHsgY29udGFpbnM6IHRydWUsIGluZGV4OiAxIH07XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0SW5kZXgoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY3VycmVudENlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5yb3dTcGFuICE9PSB1bmRlZmluZWQgJiYgZ3JpZENlbGwucm93U3BhbiAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dTcGFuID0gZ3JpZENlbGwucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSByb3dJbmRleDsgaSA8IGdyaWRDZWxsLnJvd1NwYW4gKyByb3dJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0geyByb3dJbmRleDogMCwgY29sdW1uSW5kZXg6IDAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbC5yb3dJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPSBjdXJyZW50Q2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxscy5wdXNoKHNwYW5uZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sU3BhbiAhPT0gdW5kZWZpbmVkICYmIGdyaWRDZWxsLmNvbFNwYW4gIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IGdyaWRDZWxsLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gY3VycmVudENlbGxJbmRleCArIGNlbGwuY29sU3BhbiAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVtZSA9IGV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLmNvbHVtbi50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaEFsaWduID0gZ3JpZENlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dEFsaWduO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGxJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBncmlkQ29sdW1ucy5sZW5ndGg7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVN0eWxlcyhnT2JqLCBncmlkQ29sdW1uc1tjb2xdLCB0aGlzLmdldFJlY29yZFRoZW1lU3R5bGUodGhpcy50aGVtZSksIGluZGVudCArIGNvbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEyO1xuICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHRoaXMudXBkYXRlVGhlbWVTdHlsZSh0aGVtZS5oZWFkZXIsIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnVwZGF0ZVRoZW1lU3R5bGUgPSBmdW5jdGlvbiAodGhlbWVzdHlsZSwgc3R5bGUpIHtcbiAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmZvbnRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gdGhlbWVzdHlsZS5mb250Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5mb250TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSB0aGVtZXN0eWxlLmZvbnROYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoZW1lc3R5bGUuZm9udFNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gdGhlbWVzdHlsZS5mb250U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmJvcmRlcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGVtZXN0eWxlLmJvcmRlcnMuY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzLmNvbG9yID0gdGhlbWVzdHlsZS5ib3JkZXJzLmNvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5ib3JkZXJzLmxpbmVTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMubGluZVN0eWxlID0gdGhlbWVzdHlsZS5ib3JkZXJzLmxpbmVTdHlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhlbWVzdHlsZS5ib2xkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0aGVtZXN0eWxlLmJvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgc3R5bGUuYmFja0NvbG9yID0gJyNGNkY2RjYnO1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUuY2FwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSB0aGlzLnVwZGF0ZVRoZW1lU3R5bGUodGhlbWUuY2FwdGlvbiwgc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgaWYgKHRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhlbWUucmVjb3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHRoaXMudXBkYXRlVGhlbWVTdHlsZSh0aGVtZS5yZWNvcmQsIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeGNlbEhlYWRlciA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXIucm93cyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcgfHwgdGhpcy5yb3dMZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmhlYWRlclJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gaGVhZGVyLmhlYWRlclJvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd0xlbmd0aCA8IGhlYWRlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBub1Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gaGVhZGVyLnJvd3Nbcm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoanNvbi5pbmRleCAhPT0gbnVsbCAmJiBqc29uLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ID0gKHJvdyArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZENlbGxJbmRleChqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS51cGRhdGVkQ2VsbEluZGV4ID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgIHZhciBjZWxsc0xlbmd0aCA9IGpzb24uY2VsbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgY2VsbElkID0gMDsgY2VsbElkIDwgY2VsbHNMZW5ndGg7IGNlbGxJZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25DZWxsID0ganNvbi5jZWxsc1tjZWxsSWRdO1xuICAgICAgICAgICAgICAgIGlmICghKGpzb25DZWxsLmluZGV4ICE9PSBudWxsICYmIGpzb25DZWxsLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25DZWxsLmluZGV4ID0gKGNlbGxJZCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKGpzb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4Y2VsRm9vdGVyID0gZnVuY3Rpb24gKGZvb3Rlcikge1xuICAgICAgICAgICAgaWYgKGZvb3Rlci5yb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoICs9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA+IGZvb3Rlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggKz0gKGZvb3Rlci5mb290ZXJSb3dzIC0gZm9vdGVyLnJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5mb290ZXJSb3dzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5vUm93czsgcm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBmb290ZXIucm93c1tyb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5pbmRleCA9PT0gbnVsbCB8fCBqc29uLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggPSB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCArPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWRDZWxsSW5kZXgoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc3Bhbm5lZENlbGxzXzEgPSBzcGFubmVkQ2VsbHM7IF9pIDwgc3Bhbm5lZENlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0gc3Bhbm5lZENlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICgoc3Bhbm5lZENlbGwucm93SW5kZXggPT09IHJvd0luZGV4KSAmJiAoc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPT09IGNvbHVtbkluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5JbmRleCA9IGNvbHVtbkluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY29udGFpbnM6IHRydWUsIGluZGV4OiBjb2x1bW5JbmRleCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRhaW5zOiBmYWxzZSwgaW5kZXg6IGNvbHVtbkluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wYXJzZVN0eWxlcyA9IGZ1bmN0aW9uIChnT2JqLCBjb2wsIHN0eWxlLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0LnNrZWxldG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubnVtYmVyRm9ybWF0ID0gY29sLmZvcm1hdC5za2VsZXRvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLmZvcm1hdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5udW1iZXJGb3JtYXQgPSBjb2wuZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbC50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGNvbC50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5uYW1lID0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2wud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4LCB3aWR0aDogY29sLndpZHRoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4Y2VsRXhwb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeGNlbEV4cG9ydCA9IEV4Y2VsRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOThfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIlxuLy8gbW9kdWxlIGlkID0gOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi8uLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4vLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVudW1fMSwgZWoyX2Jhc2VfMSwgY2VsbF8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwb3J0SGVscGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0SGVscGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZXRIZWFkZXJzID0gZnVuY3Rpb24gKGNvbHVtbiwgaXNIaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgaWYgKGlzSGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMubWVhc3VyZUNvbHVtbkRlcHRoKGNvbHMpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBhY3R1YWxDb2x1bW5zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sRGVwdGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5wcm9jZXNzQ29sdW1ucyhyb3dzKTtcbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLnByb2Nlc3NIZWFkZXJDZWxscyhyb3dzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3cuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZpc2libGUgPT09IHVuZGVmaW5lZCAmJiBjZWxsLmNlbGxUeXBlICE9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCghaXNIaWRlQ29sdW1uSW5jbHVkZSkgJiYgY2VsbC52aXNpYmxlICE9PSB1bmRlZmluZWQgJiYgKCFjZWxsLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyhjb2xzW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHJvd3M6IHJvd3MsIGNvbHVtbnM6IGFjdHVhbENvbHVtbnMgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUFjdHVhbENvbHVtbnMgPSBmdW5jdGlvbiAoY29sdW1uLCBhY3R1YWxDb2x1bW5zKSB7XG4gICAgICAgICAgICBpZiAoIWNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsQ29sdW1ucy5wdXNoKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4sIDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sU3BhbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4uY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zKGNvbHVtbi5jb2x1bW5zW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5yZW1vdmVDZWxsRnJvbVJvdyA9IGZ1bmN0aW9uIChjZWxscywgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0Q2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VsbEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRDZWxscy5wdXNoKGNlbGxzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoY2VsbEluZGV4ICsgMSk7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdENlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2x1bW5zW2ldLCByb3dzLCAwLCBpID09PSAwLCBmYWxzZSwgaSA9PT0gKGNvbHVtbnMubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuYXBwZW5kR3JpZENlbGxzID0gZnVuY3Rpb24gKGNvbHMsIGdyaWRSb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbHVtbiwgaXNMYXN0Q29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbHVtbiA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBncmlkUm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbHVtbiA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyaWRSb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc0ZpcnN0Q2VsbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgaXNJZ25vcmVGaXJzdENlbGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5jb2x1bW5zW2ldLnZpc2libGUgJiYgIWlzSWdub3JlRmlyc3RDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0lnbm9yZUZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIGdyaWRSb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncmlkUm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoZ3JpZENvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZ3JpZENvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChncmlkQ29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogZ3JpZENvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2x1bW5JbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9uLnJvd1NwYW4gfHwgb3B0aW9uLnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbi5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NDb2x1bW5zID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBncmlkT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSBncmlkT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGogPCBsZW5fMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY29sdW1uSW5kZXhlcy5pbmRleE9mKGopID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ3JpZE9iai5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2V0Q2VsbENvdW50ID0gZnVuY3Rpb24gKGNvbHVtbiwgY291bnQpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4uY29sdW1uc1tpXSwgY291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSB8fCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5EZXB0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sdW1uW2ldLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAobWF4IDwgZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuY2hlY2tEZXB0aCA9IGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgcmV0dXJuIEV4cG9ydEhlbHBlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXhwb3J0SGVscGVyID0gRXhwb3J0SGVscGVyO1xuICAgIHZhciBFeHBvcnRWYWx1ZUZvcm1hdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4cG9ydFZhbHVlRm9ybWF0dGVyKCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcm5hdGlvbmFsaXphdGlvbiA9IG5ldyBlajJfYmFzZV8xLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0VmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZvcm1hdENlbGxWYWx1ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ251bWJlcicgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmF0aW9uYWxpemF0aW9uLmdldE51bWJlckZvcm1hdCh7IGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0IH0pKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3MudmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJyB8fCBhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZXRpbWUnIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3MuY29sdW1uLmZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ3RpbWUnLCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbihmb3JtYXQpKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLmZvcm1hdCBpbnN0YW5jZW9mIE9iamVjdCAmJiBhcmdzLmNvbHVtbi5mb3JtYXQudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFyZ3MudmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRm9ybWF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUZvcm1hdCA9IHsgdHlwZTogYXJncy5jb2x1bW4uZm9ybWF0LnR5cGUsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAndGltZScsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAnZGF0ZVRpbWUnLCBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdC5mb3JtYXQsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQuc2tlbGV0b24gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKGN1c3RvbUZvcm1hdCkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gdW5kZWZpbmVkIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhcmdzLnZhbHVlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHBvcnRWYWx1ZUZvcm1hdHRlciA9IEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qc1xuLy8gbW9kdWxlIGlkID0gOTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIi4vZXhwb3J0LWhlbHBlclwiLCBcIi4uL2FjdGlvbnMvZGF0YVwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZWoyX3BkZl9leHBvcnRfMSwgZWoyX3BkZl9leHBvcnRfMiwgZWoyX3BkZl9leHBvcnRfMywgZWoyX3BkZl9leHBvcnRfNCwgZWoyX3BkZl9leHBvcnRfNSwgZWoyX3BkZl9leHBvcnRfNiwgZXhwb3J0X2hlbHBlcl8xLCBkYXRhXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEsIGVqMl9iYXNlXzEsIGVudW1fMSwgZWoyX2RhdGFfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGRmRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGRmRXhwb3J0KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0dyb3VwaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGRmRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZVBkZkV4cG9ydCk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuTWFwID0gZnVuY3Rpb24gKHBhcmVudCwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSkudGhlbihmdW5jdGlvbiAocmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkRvYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBwZGZEb2M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkRvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRXhwb3J0KHBhcmVudCwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnRyaWdnZXIoZXZlbnRzLnBkZkV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMucGRmRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBfdGhpcy5kYXRhLmdldERhdGEoe30sIF90aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChyZXR1cm5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGRmRG9jICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NFeHBvcnQocGFyZW50LCByZXR1cm5UeXBlLCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudHJpZ2dlcihldmVudHMucGRmRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wZGZEb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeHBvcnQgPSBmdW5jdGlvbiAoZ09iaiwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gcGRmRXhwb3J0UHJvcGVydGllcy50aGVtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5wZGZEb2N1bWVudC5zZWN0aW9ucy5hZGQoKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByb2Nlc3NFeHBvcnRQcm9wZXJ0aWVzKHBkZkV4cG9ydFByb3BlcnRpZXMsIGRhdGFTb3VyY2UsIHNlY3Rpb24pO1xuICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHJlc3VsdC5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuR3JvdXBHdWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VjdGlvbiA9IHJlc3VsdC5zZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHBkZlBhZ2UgPSBzZWN0aW9uLnBhZ2VzLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHBkZkdyaWQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZHcmlkKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGhlbWVTdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSgpO1xuICAgICAgICAgICAgdmFyIGJvcmRlciA9IGhlYWRlclRoZW1lU3R5bGUuYm9yZGVyO1xuICAgICAgICAgICAgdmFyIGhlYWRlckZvbnQgPSBoZWFkZXJUaGVtZVN0eWxlLmZvbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQnJ1c2ggPSBoZWFkZXJUaGVtZVN0eWxlLmJydXNoO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gKG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0SGVscGVyKHRoaXMucGFyZW50KSkuZ2V0SGVhZGVycyhjb2x1bW5zLCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gcmV0dXJuVmFsdWUucm93cztcbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHJldHVyblZhbHVlLmNvbHVtbnM7XG4gICAgICAgICAgICBwZGZHcmlkID0gdGhpcy5wcm9jZXNzR3JpZEhlYWRlcnMoZGF0YVNvdXJjZS5jaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5Qcm9wZXJ0aWVzKGdyaWRDb2x1bW5zLCBwZGZHcmlkKTtcbiAgICAgICAgICAgIHZhciBjYXB0aW9uVGhlbWVTdHlsZSA9IHRoaXMuZ2V0U3VtbWFyeUNhcHRpb25UaGVtZVN0eWxlKCk7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UgIT09IG51bGwgJiYgZGF0YVNvdXJjZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCAwLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZChib3JkZXIsIGdyaWRDb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlLCBwZGZHcmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50Vmlld0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyh0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MocmV0dXJuVHlwZS5yZXN1bHQsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmRyYXcocGRmUGFnZSwgMjAsIDIwKTtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQuc2F2ZSgnRXhwb3J0LnBkZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFN1bW1hcnlDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRUaGVtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZ3JpZFRoZW1lLmNhcHRpb24gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5jYXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gdGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250U2l6ZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250U2l6ZSA6IDkuNzU7XG4gICAgICAgICAgICAgICAgdmFyIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250Q29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVuQnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuY2FwdGlvbi5mb250Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBwZGZDb2xvciA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBlbkJydXNoQ29sb3IuciwgcGVuQnJ1c2hDb2xvci5nLCBwZW5CcnVzaENvbG9yLmIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBkZkNvbG9yKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyNDYsIDI0NiwgMjQ2KSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCA5Ljc1KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMCkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjQ2LCAyNDYsIDI0NikpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZCb3JkZXJzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmJvcmRlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdyaWRUaGVtZS5oZWFkZXIuYm9yZGVycy5jb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3JkZXJDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmJvcmRlcnMuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJvcmRlckNvbG9yLnIsIGJvcmRlckNvbG9yLmcsIGJvcmRlckNvbG9yLmIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gdGhpcy5ncmlkVGhlbWUuaGVhZGVyLmZvbnRTaXplICE9PSB1bmRlZmluZWQgPyB0aGlzLmdyaWRUaGVtZS5oZWFkZXIuZm9udFNpemUgOiAxMC41O1xuICAgICAgICAgICAgICAgIHZhciBwZGZDb2xvciA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFRoZW1lLmhlYWRlci5mb250Q29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVuQnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IodGhpcy5ncmlkVGhlbWUuaGVhZGVyLmZvbnRDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IocGVuQnJ1c2hDb2xvci5yLCBwZW5CcnVzaENvbG9yLmcsIHBlbkJydXNoQ29sb3IuYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgZm9udFNpemUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChwZGZDb2xvcikgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjM0LCAyMzQsIDIzNCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDEwMiwgMTAyLCAxMDIpKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcm91cGVkUmVjb3JkcyA9IGZ1bmN0aW9uIChwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCBsZXZlbCwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgcmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwSW5kZXggPSBsZXZlbDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZGF0YVNvdXJjZV8xID0gZGF0YVNvdXJjZTsgX2kgPCBkYXRhU291cmNlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2VJdGVtcyA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFTb3VyY2VJdGVtcy5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGRhdGFTb3VyY2VJdGVtcy5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFTb3VyY2VJdGVtcy5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnICsgZGF0YVNvdXJjZUl0ZW1zLmNvdW50ICsgKGRhdGFTb3VyY2UuY291bnQgPiAxID8gJyBpdGVtcycgOiAnIGl0ZW0nKTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4KS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJvdy5jZWxscy5nZXRDZWxsKGdyb3VwSW5kZXggKyAxKS5zdHlsZS5zdHJpbmdGb3JtYXQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Rm9udChmb250KTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKGJydXNoKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0QmFja2dyb3VuZEJydXNoKGJhY2tncm91bmRCcnVzaCk7XG4gICAgICAgICAgICAgICAgdmFyIHNSb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGNhcHRpb25TdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBjYXB0aW9uU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzUm93cyAhPT0gdW5kZWZpbmVkICYmIHNSb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4ICsgMSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZS5jaGlsZExldmVscyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlSXRlbXMuaXRlbXMsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIChncm91cEluZGV4ICsgMSksIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmQoYm9yZGVyLCBncmlkQ29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCBwZGZHcmlkLCAoZ3JvdXBJbmRleCArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcmlkSGVhZGVycyA9IGZ1bmN0aW9uIChjaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5Db3VudCA9IGdyaWRDb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Db3VudCArPSAoY2hpbGRMZXZlbHMgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5hZGQoY29sdW1uQ291bnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGNoaWxkTGV2ZWxzICsgMSk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwZGZHcmlkLmNvbHVtbnMuZ2V0Q29sdW1uKGkpLndpZHRoID0gMjA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmFkZChyb3dzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZEhlYWRlciA9IHBkZkdyaWQuaGVhZGVycy5nZXRIZWFkZXIoaSk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBncmlkSGVhZGVyLnN0eWxlLnNldEZvbnQoaGVhZGVyRm9udCk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRUZXh0QnJ1c2goaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyAoY2hpbGRMZXZlbHMgKyAxKSA6IDA7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JpZEhlYWRlci5jZWxscy5jb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjZWxsSW5kZXg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwucm93U3BhbiA9IHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KCdib3R0b20nLCBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCwgcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4udGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPCByb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW47IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmdldEhlYWRlcihpICsgaykuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2x1bW5TcGFuID0gcm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggKz0gY2VsbC5jb2x1bW5TcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCArPSBjZWxsLmNvbHVtblNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGogLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBkZkdyaWQuY29sdW1ucy5jb3VudCA+PSA2KSB7XG4gICAgICAgICAgICAgICAgcGRmR3JpZC5zdHlsZS5hbGxvd0hvcml6b250YWxPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGRmR3JpZDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhwb3J0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChwZGZFeHBvcnRQcm9wZXJ0aWVzLCBkYXRhU291cmNlLCBzZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRUaGVtZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHBkZkV4cG9ydFByb3BlcnRpZXMucGFnZVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGRmUGFnZVNldHRpbmdzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5vcmllbnRhdGlvbiA9IChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScpID8gZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlIDogZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uUG9ydHJhaXQ7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5zaXplID0gdGhpcy5nZXRQYWdlU2l6ZShwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5zZXRQYWdlU2V0dGluZ3MocGRmUGFnZVNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFNpemUgPSB0aGlzLnBkZkRvY3VtZW50LnBhZ2VTZXR0aW5ncy5zaXplO1xuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUG9pbnRGKDAsIGhlYWRlci5mcm9tVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGhlYWRlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl9leHBvcnRfNC5SZWN0YW5nbGVGKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC50ZW1wbGF0ZS50b3AgPSB0aGlzLmRyYXdQYWdlVGVtcGxhdGUobmV3IGVqMl9wZGZfZXhwb3J0XzQuUGRmUGFnZVRlbXBsYXRlRWxlbWVudChib3VuZHMpLCBoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9vdGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBvaW50RigwLCAoKGNsaWVudFNpemUud2lkdGggLSA4MCkgLSAoZm9vdGVyLmZyb21Cb3R0b20gKiAwLjc1KSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKChjbGllbnRTaXplLndpZHRoIC0gODApLCAoZm9vdGVyLmhlaWdodCAqIDAuNzUpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBlajJfcGRmX2V4cG9ydF80LlJlY3RhbmdsZUYocG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnRlbXBsYXRlLmJvdHRvbSA9IHRoaXMuZHJhd1BhZ2VUZW1wbGF0ZShuZXcgZWoyX3BkZl9leHBvcnRfNC5QZGZQYWdlVGVtcGxhdGVFbGVtZW50KGJvdW5kcyksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW4gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHBhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsIHNlY3Rpb246IHNlY3Rpb24gfTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3UGFnZVRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZWxlbWVudC5jb250ZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnZhbHVlID09PSAnJyB8fCBjb250ZW50LnZhbHVlID09PSB1bmRlZmluZWQgfHwgY29udGVudC52YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC52YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB0aGUgdmFsaWQgaW5wdXQgdmFsdWUgaW4gdGV4dCBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2VOdW1iZXIodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnNyYyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQuc3JjID09PSBudWxsIHx8IGNvbnRlbnQuc3JjID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHRoZSB2YWxpZCBiYXNlNjQgc3RyaW5nIGluIGltYWdlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSB1bmRlZmluZWQgfHwgY29udGVudC50eXBlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGNvbnRlbnQgdHlwZS4uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2xpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCBwb2ludHMgaW4gJyArIGNvbnRlbnQudHlwZSArICcgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHBvc2l0aW9uIGluICcgKyBjb250ZW50LnR5cGUgKyAnIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uLnggPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uLnggPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9zaXRpb24ueCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4IGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbi55ID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbi55ID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvc2l0aW9uLnkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb3NpdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gKHBhZ2VUZW1wbGF0ZSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0aGlzLmdldEZvbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLmdldEJydXNoRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgcGVuID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlbkNvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvcik7XG4gICAgICAgICAgICAgICAgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBlbkNvbG9yLnIsIHBlbkNvbG9yLmcsIHBlbkNvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicnVzaCA9PSBudWxsICYmIHBlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbnRlbnQudmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciBmb3JtYXQ7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZXRDb250ZW50Rm9ybWF0KGNvbnRlbnQsIGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIHJlc3VsdC5zaXplLndpZHRoLCByZXN1bHQuc2l6ZS5oZWlnaHQsIHJlc3VsdC5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd1BhZ2VOdW1iZXIgPSBmdW5jdGlvbiAoZG9jdW1lbnRIZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gdGhpcy5nZXRGb250KGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFnZU51bWJlciA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZlBhZ2VOdW1iZXJGaWVsZChmb250LCBicnVzaCk7XG4gICAgICAgICAgICBwYWdlTnVtYmVyLm51bWJlclN0eWxlID0gdGhpcy5nZXRQYWdlTnVtYmVyU3R5bGUoY29udGVudC5wYWdlTnVtYmVyVHlwZSk7XG4gICAgICAgICAgICB2YXIgY29tcG9zaXRlRmllbGQ7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQuaW5kZXhPZignJHRvdGFsJykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlQ291bnRGaWVsZChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID4gY29udGVudC5mb3JtYXQuaW5kZXhPZignJGN1cnJlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnJHRvdGFsJywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZU51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUNvdW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZUNvdW50RmllbGQoZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZUNvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSAnezB9JztcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBjb21wb3NpdGVGaWVsZC5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLnN0cmluZ0Zvcm1hdCA9IHJlc3VsdC5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuYm91bmRzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzQuUmVjdGFuZ2xlRih4LCB5LCByZXN1bHQuc2l6ZS53aWR0aCwgcmVzdWx0LnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLmRyYXcoZG9jdW1lbnRIZWFkZXIuZ3JhcGhpY3MsIHgsIHkpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdJbWFnZSA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnNpemUud2lkdGggKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpID8gKGNvbnRlbnQuc2l6ZS5oZWlnaHQgKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZkJpdG1hcChjb250ZW50LnNyYyk7XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgeDEgPSBjb250ZW50LnBvaW50cy54MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTEgPSBjb250ZW50LnBvaW50cy55MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeDIgPSBjb250ZW50LnBvaW50cy54MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTIgPSBjb250ZW50LnBvaW50cy55MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgcGVuID0gdGhpcy5nZXRQZW5Gcm9tQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnBlblNpemUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnBlblNpemUgIT09IG51bGwgJiYgdHlwZW9mIGNvbnRlbnQuc3R5bGUucGVuU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuLndpZHRoID0gY29udGVudC5zdHlsZS5wZW5TaXplICogMC43NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVuLmRhc2hTdHlsZSA9IHRoaXMuZ2V0RGFzaFN0eWxlKGNvbnRlbnQuc3R5bGUuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdMaW5lKHBlbiwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGlzQ2FwdGlvbiwgY2FwdGlvblJvdywgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzUm93c18xID0gc1Jvd3M7IF9pIDwgc1Jvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gc1Jvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAhY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQgfHwgY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0VGVtcGxhdGVGdW5jdGlvbih0ZW1wbGF0ZUZuLCBpLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNlbGwuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gcmVzdWx0LnRlbXBsYXRlRnVuY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gcmVzdWx0LmxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCh0eHRbMF0ud2hvbGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRTdW1tYXJ5V2l0aG91dFRlbXBsYXRlKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSAmJiB2YWx1ZVtpXSAhPT0gJycgJiYgdmFsdWVbaV0gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZVtpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRGb250KGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRUZXh0QnJ1c2goYnJ1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCYWNrZ3JvdW5kQnJ1c2goYmFja2dyb3VuZEJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSA9IHZhbHVlW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFRlbXBsYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodGVtcGxhdGVGbiwgaW5kZXgsIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBsYXRlRnVuY3Rpb246IHRlbXBsYXRlRm4sIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDogbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYXZlcmFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLnRydWVjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJ1ZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5mYWxzZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmN1c3RvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb2x1bW5Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGdyaWRDb2x1bW5zLCBwZGZHcmlkKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IChwZGZHcmlkLmNvbHVtbnMuY291bnQgLSBncmlkQ29sdW1ucy5sZW5ndGgpIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZENvbHVtbnNbaV0udGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkuZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZHcmlkLnN0eWxlLmFsbG93SG9yaXpvbnRhbE92ZXJmbG93ICYmIGdyaWRDb2x1bW5zW2ldLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkud2lkdGggPSAoZ3JpZENvbHVtbnNbaV0ud2lkdGggKiAwLjc1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uIChyb3csIGJvcmRlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ncmlkVGhlbWUucmVjb3JkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ncmlkVGhlbWUucmVjb3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBkZkNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkVGhlbWUucmVjb3JkLmZvbnRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZW5CcnVzaENvbG9yID0gdGhpcy5oZXhUb1JnYih0aGlzLmdyaWRUaGVtZS5yZWNvcmQuZm9udENvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgcGRmQ29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5CcnVzaENvbG9yLnIsIHBlbkJydXNoQ29sb3IuZywgcGVuQnJ1c2hDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKHBkZkNvbG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZCA9IGZ1bmN0aW9uIChib3JkZXIsIGNvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2UsIHBkZkdyaWQsIGdyb3VwSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5pc0dyb3VwaW5nID8gZ3JvdXBJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZGF0YVNvdXJjZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSB0aGlzLnNldFJlY29yZFRoZW1lU3R5bGUocGRmR3JpZC5yb3dzLmFkZFJvdygpLCBib3JkZXIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29sdW1ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpdGVtc1tjb2x1bW5zW2pdLmZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpdGVtcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5zW2pdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbFNwYW46IDFcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5wZGZRdWVyeUNlbGxJbmZvLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkUm93LmNlbGxzLmdldENlbGwoaiArIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlci5mb3JtYXRDZWxsVmFsdWUoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0NlbGxTdHlsZShjZWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2xTcGFuID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChqICsgc3RhcnRJbmRleCArIDEgKyBhcmdzLmNvbFNwYW4pID4gZ3JpZFJvdy5jZWxscy5jb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY29sU3BhbiA9IGdyaWRSb3cuY2VsbHMuY291bnQgLSAoaiArIHN0YXJ0SW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uU3BhbiA9IGFyZ3MuY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY2VsbC5jb2x1bW5TcGFuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbkNlbGwgPSBncmlkUm93LmNlbGxzLmdldENlbGwoaiArIHN0YXJ0SW5kZXggKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuQ2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaiArPSAoYXJncy5jb2xTcGFuIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0NlbGxTdHlsZSA9IGZ1bmN0aW9uIChjZWxsLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBiYWNrQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRCcnVzaCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoYmFja0NvbG9yLnIsIGJhY2tDb2xvci5nLCBiYWNrQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEFsaWdubWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQoYXJncy5zdHlsZS50ZXh0QWxpZ25tZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnZlcnRpY2FsQWxpZ25tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0VmVydGljYWxBbGlnbm1lbnQoYXJncy5zdHlsZS52ZXJ0aWNhbEFsaWdubWVudCwgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEJydXNoQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0QnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS50ZXh0QnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHRleHRCcnVzaENvbG9yLnIsIHRleHRCcnVzaENvbG9yLmcsIHRleHRCcnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRQZW5Db2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dFBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcih0ZXh0UGVuQ29sb3IuciwgdGV4dFBlbkNvbG9yLmcsIHRleHRQZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuYm9sZCAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuaXRhbGljICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250ID0gdGhpcy5nZXRGb250KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmQm9yZGVycygpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IGFyZ3Muc3R5bGUuYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IChib3JkZXJXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBib3JkZXJXaWR0aCA9PT0gJ251bWJlcicpID8gKGJvcmRlcldpZHRoICogMC43NSkgOiAodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigxOTYsIDE5NiwgMTk2KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5ib3JkZXIuY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9yZGVyQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUuYm9yZGVyLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihib3JkZXJDb2xvci5yLCBib3JkZXJDb2xvci5nLCBib3JkZXJDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihjb2xvciwgd2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlci5kYXNoU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwZW4uZGFzaFN0eWxlID0gdGhpcy5nZXREYXNoU3R5bGUoYXJncy5zdHlsZS5ib3JkZXIuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IHBlbjtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJvcmRlcnMgPSBib3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SG9yaXpvbnRhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh0ZXh0QWxpZ24sIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRWZXJ0aWNhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh2ZXJ0aWNhbEFsaWduLCBmb3JtYXQsIHRleHRBbGlnbikge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHRleHRBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodmVydGljYWxBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Cb3R0b207XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5NaWRkbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRGb250RmFtaWx5ID0gZnVuY3Rpb24gKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZm9udEZhbWlseSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1RpbWVzUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdDb3VyaWVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3ltYm9sJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnWmFwZkRpbmdiYXRzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0Rm9udCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAoY29udGVudC5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnN0eWxlLmZvbnRTaXplICogMC43NSkgOiA5Ljc1O1xuICAgICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSAoY29udGVudC5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQpID8gKHRoaXMuZ2V0Rm9udEZhbWlseShjb250ZW50LnN0eWxlLmZvbnRGYW1pbHkpKSA6IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2E7XG4gICAgICAgICAgICB2YXIgZm9udFN0eWxlID0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuUmVndWxhcjtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLmJvbGQpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuQm9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuaXRhbGljKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLkl0YWxpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnVuZGVybGluZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUudW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlVuZGVybGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuc3RyaWtlb3V0KSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlN0cmlrZW91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZm9udEZhbWlseSwgZm9udFNpemUsIGZvbnRTdHlsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGFnZU51bWJlclN0eWxlID0gZnVuY3Rpb24gKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbG93ZXJsYXRpbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvd2Vycm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICd1cHBlcmxhdGluJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBwZXJyb21hbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnNldENvbnRlbnRGb3JtYXQgPSBmdW5jdGlvbiAoY29udGVudCwgZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBjb250ZW50LnNpemUud2lkdGggKiAwLjc1O1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBjb250ZW50LnNpemUuaGVpZ2h0ICogMC43NTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQsIGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuTWlkZGxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5oQWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQuc3R5bGUuaEFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqdXN0aWZ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS52QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KGNvbnRlbnQuc3R5bGUudkFsaWduLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb3JtYXQ6IGZvcm1hdCwgc2l6ZTogbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYod2lkdGgsIGhlaWdodCkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VTaXplID0gZnVuY3Rpb24gKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgNzkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdub3RlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDU0MCwgNzIwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdsZWdhbCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2MTIsIDEwMDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDIzODAsIDMzNjgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ExJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDE2ODQsIDIzODApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDExOTAsIDE2ODQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDg0MiwgMTE5MCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYTUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNDIxLCA1OTUpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2E2JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDI5NywgNDIxKTtcbiAgICAgICAgICAgICAgICBjYXNlICdhNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMTAsIDI5Nyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYTgnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTQ4LCAyMTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2E5JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDEwNSwgMTQ4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyODM2LCA0MDA4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMDA0LCAyODM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNDE4LCAyMDA0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiMyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMDAyLCAxNDE4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdiNCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3MDksIDEwMDIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2I1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDUwMSwgNzA5KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoYSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2NDgsIDg2NCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXJjaGInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoODY0LCAxMjk2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoYyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjk2LCAxNzI4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoZCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNzI4LCAyNTkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdhcmNoZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyNTkyLCAzNDU2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdmbHNhJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgOTM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdoYWxmbGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDM5NiwgNjEyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdsZXR0ZXIxMXgxNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3OTIsIDEyMjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZGdlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjI0LCA3OTIpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig1OTUsIDg0Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0RGFzaFN0eWxlID0gZnVuY3Rpb24gKGRhc2hTdHlsZSkge1xuICAgICAgICAgICAgc3dpdGNoIChkYXNoU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkYXNoJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnZG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGFzaGRvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Rhc2hkb3Rkb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRQZW5Gcm9tQ29udGVudCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCAmJiBjb250ZW50LnN0eWxlLnBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVuQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUucGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGVuO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEJydXNoRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBicnVzaDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5oZXhUb1JnYiA9IGZ1bmN0aW9uIChoZXgpIHtcbiAgICAgICAgICAgIGlmIChoZXggPT09IG51bGwgfHwgaGV4ID09PSAnJyB8fCBoZXgubGVuZ3RoICE9PSA3KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGhleCB2YWx1ZSBmb3IgY29sb3IuLi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhleCA9IGhleC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgYmlnaW50ID0gcGFyc2VJbnQoaGV4LCAxNik7XG4gICAgICAgICAgICB2YXIgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGcgPSAoYmlnaW50ID4+IDgpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGIgPSBiaWdpbnQgJiAyNTU7XG4gICAgICAgICAgICByZXR1cm4geyByOiByLCBnOiBnLCBiOiBiIH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBkZkV4cG9ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGRmRXhwb3J0ID0gUGRmRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcGRmLWV4cG9ydC5qc1xuLy8gbW9kdWxlIGlkID0gMTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMDFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCJcbi8vIG1vZHVsZSBpZCA9IDEwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgY29tbWFuZF9jb2x1bW5fcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29tbWFuZENvbHVtbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbW1hbmRDb2x1bW4ocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5pbml0aWF0ZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxsRmFjID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGNlbGxGYWMuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Db21tYW5kQ29sdW1uLCBuZXcgY29tbWFuZF9jb2x1bW5fcmVuZGVyZXJfMS5Db21tYW5kQ29sdW1uUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5jb21tYW5kQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0lEID0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICdidXR0b24nKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICFnT2JqLmVkaXRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldC5pZC5zcGxpdCgnXycpWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuc3RhcnRFZGl0KGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0cicpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVsZXRlUm93KGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICd0cicpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW4ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbW1hbmRDb2x1bW4nO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW4ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jbGljaywgdGhpcy5jb21tYW5kQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jbGljaywgdGhpcy5jb21tYW5kQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2VudGVyJyAmJiBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICdidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb21tYW5kQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db21tYW5kQ29sdW1uID0gQ29tbWFuZENvbHVtbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbW1hbmQtY29sdW1uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2J1dHRvbnNfMSwgY2VsbF9yZW5kZXJlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbW1hbmRDb2x1bW5SZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDb21tYW5kQ29sdW1uUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENvbW1hbmRDb2x1bW5SZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmJ1dHRvbkVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHt9KTtcbiAgICAgICAgICAgIF90aGlzLnVuYm91bkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVuYm91bmRjZWxsZGl2Jywgc3R5bGVzOiAnZGlzcGxheTogaW5saW5lLWJsb2NrJyB9KTtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utcm93Y2VsbCBlLXVuYm91bmRjZWxsJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDb21tYW5kQ29sdW1uUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy51bmJvdW5EaXYuY2xvbmVOb2RlKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnaXMgQ29tbWFuZCBjb2x1bW4gY29sdW1uIGhlYWRlciAnICsgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLmZpcnN0RWxlbWVudENoaWxkLCBjZWxsLmNvbHVtbi5nZXRDb2x1bW5UZW1wbGF0ZSgpKGRhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjZWxsLmNvbW1hbmRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoaXMucmVuZGVyQnV0dG9uKG5vZGUsIGNvbW1hbmQsIGF0dHJpYnV0ZXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdC1kZWxldGUnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3Mobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1zYXZlLWNhbmNlbCcpLCAnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtc2F2ZS1jYW5jZWwnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3Mobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1lZGl0LWRlbGV0ZScpLCAnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtblJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJCdXR0b24gPSBmdW5jdGlvbiAobm9kZSwgYnV0dG9uT3B0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMuYnV0dG9uRWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhidXR0b24sIHsgJ2lkJzogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIChidXR0b25PcHRpb24udHlwZSB8fCAnJykgKyAnXycgKyBpbmRleCwgJ3R5cGUnOiAnYnV0dG9uJyB9KTtcbiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYnV0dG9uT3B0aW9uLmJ1dHRvbk9wdGlvbi5jbGljaztcbiAgICAgICAgICAgIG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQobmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKGJ1dHRvbk9wdGlvbi5idXR0b25PcHRpb24sIGJ1dHRvbikuZWxlbWVudCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGJ1dHRvbk9wdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgWydlLWVkaXQtZGVsZXRlJywgJ2UtJyArIGJ1dHRvbk9wdGlvbi50eXBlICsgJ2J1dHRvbiddKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgWydlLXNhdmUtY2FuY2VsJywgJ2UtJyArIGJ1dHRvbk9wdGlvbi50eXBlICsgJ2J1dHRvbiddKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRDb2x1bW5SZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkNvbW1hbmRDb2x1bW5SZW5kZXJlciA9IENvbW1hbmRDb2x1bW5SZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYWN0aW9ucy9yZXNpemVcIiwgXCIuLi9hY3Rpb25zL3BhZ2VcIiwgXCIuLi9hY3Rpb25zL2dyb3VwXCIsIFwiLi4vYWN0aW9ucy9zb3J0XCIsIFwiLi4vYWN0aW9ucy9wZGYtZXhwb3J0XCIsIFwiLi4vYWN0aW9ucy9leGNlbC1leHBvcnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfbmF2aWdhdGlvbnNfMSwgZXZlbnRzLCByZXNpemVfMSwgcGFnZV8xLCBncm91cF8xLCBzb3J0XzEsIHBkZl9leHBvcnRfMSwgZXhjZWxfZXhwb3J0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5tZW51Q2xhc3MgPSB7XG4gICAgICAgIGhlYWRlcjogJy5lLWdyaWRoZWFkZXInLFxuICAgICAgICBjb250ZW50OiAnLmUtZ3JpZGNvbnRlbnQnLFxuICAgICAgICBlZGl0OiAnLmUtaW5saW5lLWVkaXQnLFxuICAgICAgICBlZGl0SWNvbjogJ2UtZWRpdCcsXG4gICAgICAgIHBhZ2VyOiAnLmUtZ3JpZHBhZ2VyJyxcbiAgICAgICAgZGVsZXRlOiAnZS1kZWxldGUnLFxuICAgICAgICBzYXZlOiAnZS1zYXZlJyxcbiAgICAgICAgY2FuY2VsOiAnZS1jYW5jZWwnLFxuICAgICAgICBjb3B5OiAnZS1jb3B5JyxcbiAgICAgICAgcGRmOiAnZS1wZGZleHBvcnQnLFxuICAgICAgICBncm91cDogJ2UtaWNvbi1ncm91cCcsXG4gICAgICAgIHVuZ3JvdXA6ICdlLWljb24tdW5ncm91cCcsXG4gICAgICAgIGNzdjogJ2UtY3N2ZXhwb3J0JyxcbiAgICAgICAgZXhjZWw6ICdlLWV4Y2VsZXhwb3J0JyxcbiAgICAgICAgZlBhZ2U6ICdlLWljb24tZmlyc3QnLFxuICAgICAgICBuUGFnZTogJ2UtaWNvbi1uZXh0JyxcbiAgICAgICAgbFBhZ2U6ICdlLWljb24tbGFzdCcsXG4gICAgICAgIHBQYWdlOiAnZS1pY29uLXByZXYnLFxuICAgICAgICBhc2NlbmRpbmc6ICdlLWljb24tYXNjZW5kaW5nJyxcbiAgICAgICAgZGVzY2VuZGluZzogJ2UtaWNvbi1kZXNjZW5kaW5nJyxcbiAgICAgICAgZ3JvdXBIZWFkZXI6ICdlLWdyb3VwZHJvcGFyZWEnLFxuICAgICAgICB0b3VjaFBvcDogJ2UtZ3JpZHBvcHVwJ1xuICAgIH07XG4gICAgdmFyIENvbnRleHRNZW51ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29udGV4dE1lbnUocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SXRlbXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmxvY2FsZVRleHQgPSB0aGlzLnNldExvY2FsZUtleSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd1bCcsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ19jbWVudScgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJyMnICsgdGhpcy5ncmlkSUQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KHtcbiAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5nZXRNZW51SXRlbXMoKSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBlbmFibGVQZXJzaXN0ZW5jZTogdGhpcy5wYXJlbnQuZW5hYmxlUGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiB0aGlzLmNvbnRleHRNZW51SXRlbUNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogdGhpcy5jb250ZXh0TWVudUJlZm9yZU9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvbk9wZW46IHRoaXMuY29udGV4dE1lbnVPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5jb250ZXh0TWVudU9uQ2xvc2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtZ3JpZC1tZW51J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWVudUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZXhwb3J0SXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5jb250ZXh0TWVudUl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgdGhpcy5nZXREZWZhdWx0SXRlbXMoKS5pbmRleE9mKGl0ZW0pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2V4cG9ydCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0SXRlbXMucHVzaCh0aGlzLmJ1aWxkRGVmYXVsdEl0ZW1zKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtcy5wdXNoKHRoaXMuYnVpbGREZWZhdWx0SXRlbXMoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhwb3J0SXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBleHBvcnRHcm91cCA9IHRoaXMuYnVpbGREZWZhdWx0SXRlbXMoJ2V4cG9ydCcpO1xuICAgICAgICAgICAgICAgIGV4cG9ydEdyb3VwLml0ZW1zID0gZXhwb3J0SXRlbXM7XG4gICAgICAgICAgICAgICAgbWVudUl0ZW1zLnB1c2goZXhwb3J0R3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lbnVJdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldExhc3RQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvdGFscGFnZSA9IE1hdGguZmxvb3IodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQgJSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUpIHtcbiAgICAgICAgICAgICAgICB0b3RhbHBhZ2UgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b3RhbHBhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudUl0ZW1DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0QWxsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnMoW10pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXV0b0ZpdENvbHVtbnModGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwQ29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnVuZ3JvdXBDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5kZWxldGVSb3codGhpcy5wYXJlbnQuZ2V0Um93QnlJbmRleCh0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY29weSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGRmRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucGRmRXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4Y2VsRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZXhjZWxFeHBvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3N2RXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY3N2RXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRBc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0Q29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkLCAnYXNjZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnREZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCwgJ2Rlc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UodGhpcy5nZXRMYXN0UGFnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbmV4dFBhZ2UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nb1RvUGFnZSh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jb250ZXh0TWVudUNsaWNrLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmNvbnRleHRNZW51T25DbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudE9iaic7XG4gICAgICAgICAgICBpZiAoYXJncy5pdGVtcy5sZW5ndGggPiAwICYmIGFyZ3MuaXRlbXNbMF1bcGFyZW50XSBpbnN0YW5jZW9mIGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJdGVtU3RhdHVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMb2NhbGVUZXh0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQodGhpcy5sb2NhbGVUZXh0W2l0ZW1dKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnVwZGF0ZUl0ZW1TdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNob3dJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuZW5hYmxlSXRlbXModGhpcy5kaXNhYmxlSXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudUJlZm9yZU9wZW4gPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDb2x1bW4gPSB0aGlzLmdldENvbHVtbihhcmdzLmV2ZW50KTtcbiAgICAgICAgICAgIGlmIChhcmdzLmV2ZW50ICYmIChlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuJyArIGV4cG9ydHMubWVudUNsYXNzLmdyb3VwSGVhZGVyKVxuICAgICAgICAgICAgICAgIHx8IGVqMl9iYXNlXzEuY2xvc2VzdChhcmdzLmV2ZW50LnRhcmdldCwgJy4nICsgZXhwb3J0cy5tZW51Q2xhc3MudG91Y2hQb3ApKSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gYXJncy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXlGcm9tSWQoaXRlbS5pZCk7XG4gICAgICAgICAgICAgICAgdmFyIGRJdGVtID0gdGhpcy5kZWZhdWx0SXRlbXNba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXREZWZhdWx0SXRlbXMoKS5pbmRleE9mKGtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuc3VyZURpc2FibGVkU3RhdHVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5ldmVudCAmJiBlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsIGV4cG9ydHMubWVudUNsYXNzLmVkaXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnc2F2ZScgJiYga2V5ICE9PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuSXRlbXMucHVzaChpdGVtLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wYXJlbnRJdGVtKSAmJiBhcmdzLmV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MuZXZlbnQudGFyZ2V0LCBkSXRlbS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnRhcmdldCAmJiBhcmdzLmV2ZW50ICYmXG4gICAgICAgICAgICAgICAgICAgICFlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsIGl0ZW0udGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmhpZGVJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRBcmdzID0gYXJncy5ldmVudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbnRleHRNZW51T3BlbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAodGhpcy5oaWRkZW5JdGVtcy5sZW5ndGggPT09IGFyZ3MuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJdGVtU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgYXJncy5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5zdXJlRGlzYWJsZWRTdGF0dXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXRBbGwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXQnOlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocmVzaXplXzEuUmVzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgfHwgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApICYmIHRoaXMudGFyZ2V0Q29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnRhcmdldENvbHVtbi5maWVsZCkgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyB8fCAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cClcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSAmJiB0aGlzLnRhcmdldENvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKSA8IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvcHknOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoIXRoaXMucGFyZW50LmFsbG93RXhjZWxFeHBvcnQgJiYgIXRoaXMucGFyZW50LmV4Y2VsRXhwb3J0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBkZl9leHBvcnRfMS5QZGZFeHBvcnQpICYmICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChleGNlbF9leHBvcnRfMS5FeGNlbEV4cG9ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGRmRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dQZGZFeHBvcnQpIHx8ICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChwZGZfZXhwb3J0XzEuUGRmRXhwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3N2RXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dFeGNlbEV4cG9ydCkgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGV4Y2VsX2V4cG9ydF8xLkV4Y2VsRXhwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoIXRoaXMucGFyZW50LmFsbG93U29ydGluZykgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChzb3J0XzEuU29ydCkgJiYgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCAmJiB0aGlzLnRhcmdldENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmZpZWxkID09PSBfdGhpcy50YXJnZXRDb2x1bW4uZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZWxlbWVudC5kaXJlY3Rpb24gPT09IGl0ZW0ucmVwbGFjZSgnc29ydCcsICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdwcmV2UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSAmJiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICBjYXNlICduZXh0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcgfHwgIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBhZ2VfMS5QYWdlKSAmJiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPT09IHRoaXMuZ2V0TGFzdFBhZ2UoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0Q29udGV4dE1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY29udGV4dE1lbnUnO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkSUQgKyAnX2NtZW51XycgKyBpdGVtO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0S2V5RnJvbUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQucmVwbGFjZSh0aGlzLmdyaWRJRCArICdfY21lbnVfJywgJycpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuYnVpbGREZWZhdWx0SXRlbXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtO1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdEFsbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZ3JvdXAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MudW5ncm91cCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZWRpdEljb24gfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuZGVsZXRlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5lZGl0LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5zYXZlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmVkaXQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmNhbmNlbCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb3B5JzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuY29weSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5jb250ZW50IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BkZkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLnBkZiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmV4Y2VsIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NzdkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmNzdiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuaGVhZGVyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5hc2NlbmRpbmcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5oZWFkZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmRlc2NlbmRpbmcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmZQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLnBQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xhc3RQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmxQYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25leHRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MucGFnZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLm5QYWdlIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SXRlbXNbaXRlbV0gPSB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRMb2NhbGVUZXh0KGl0ZW0pLCBpZDogdGhpcy5nZW5lcmF0ZUlEKGl0ZW0pLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbWVudUl0ZW0udGFyZ2V0LCBpY29uQ3NzOiBtZW51SXRlbS5pY29uQ3NzID8gJ2UtaWNvbnMgJyArIG1lbnVJdGVtLmljb25Dc3MgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRJdGVtc1tpdGVtXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldERlZmF1bHRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ2F1dG9GaXRBbGwnLCAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJywgJ3VuZ3JvdXAnLCAnZWRpdCcsICdkZWxldGUnLCAnc2F2ZScsICdjYW5jZWwnLCAnY29weScsICdleHBvcnQnLFxuICAgICAgICAgICAgICAgICdwZGZFeHBvcnQnLCAnZXhjZWxFeHBvcnQnLCAnY3N2RXhwb3J0JywgJ3NvcnRBc2NlbmRpbmcnLCAnc29ydERlc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgICdmaXJzdFBhZ2UnLCAncHJldlBhZ2UnLCAnbGFzdFBhZ2UnLCAnbmV4dFBhZ2UnXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLnNldExvY2FsZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2F1dG9GaXRBbGwnOiAnYXV0b0ZpdEFsbCcsXG4gICAgICAgICAgICAgICAgJ2F1dG9GaXQnOiAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2NvcHknOiAnQ29weScsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJzogJ0dyb3VwJyxcbiAgICAgICAgICAgICAgICAndW5ncm91cCc6ICdVbmdyb3VwJyxcbiAgICAgICAgICAgICAgICAnZWRpdCc6ICdFZGl0UmVjb3JkJyxcbiAgICAgICAgICAgICAgICAnZGVsZXRlJzogJ0RlbGV0ZVJlY29yZCcsXG4gICAgICAgICAgICAgICAgJ3NhdmUnOiAnU2F2ZScsXG4gICAgICAgICAgICAgICAgJ2NhbmNlbCc6ICdDYW5jZWxCdXR0b24nLFxuICAgICAgICAgICAgICAgICdwZGZFeHBvcnQnOiAnUGRmZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnZXhjZWxFeHBvcnQnOiAnRXhjZWxleHBvcnQnLFxuICAgICAgICAgICAgICAgICdjc3ZFeHBvcnQnOiAnQ3N2ZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnZXhwb3J0JzogJ0V4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ3NvcnRBc2NlbmRpbmcnOiAnU29ydEFzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgJ3NvcnREZXNjZW5kaW5nJzogJ1NvcnREZXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnZmlyc3RQYWdlJzogJ0ZpcnN0UGFnZScsXG4gICAgICAgICAgICAgICAgJ2xhc3RQYWdlJzogJ0xhc3RQYWdlJyxcbiAgICAgICAgICAgICAgICAncHJldlBhZ2UnOiAnUHJldmlvdXNQYWdlJyxcbiAgICAgICAgICAgICAgICAnbmV4dFBhZ2UnOiAnTmV4dFBhZ2UnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0Q29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAndGguZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBjZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh1aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RyLmUtcm93Jyk7XG4gICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KHRoaXMucGFyZW50LmdldERhdGFSb3dzKCkuaW5kZXhPZihyb3cpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRleHRNZW51O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZXh0TWVudSA9IENvbnRleHRNZW51O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvY29udGV4dC1tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL2ZyZWV6ZS1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZW51bV8xLCBmcmVlemVfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnJlZXplID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRnJlZXplKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmcmVlemUnO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZS5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgZnJlZXplX3JlbmRlcmVyXzEuRnJlZXplUmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgZnJlZXplX3JlbmRlcmVyXzEuRnJlZXplQ29udGVudFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cyAmJiAhdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyBmcmVlemVfcmVuZGVyZXJfMS5GcmVlemVDb250ZW50UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGcmVlemU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZyZWV6ZSA9IEZyZWV6ZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2ZyZWV6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2hlYWRlci1yZW5kZXJlclwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2ZyZWV6ZS1yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGZyZWV6ZV9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnJlZXplQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGcmVlemVDb250ZW50UmVuZGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGcmVlemVDb250ZW50UmVuZGVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyUGFuZWwuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mcm96ZW5jb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1vdmFibGVjb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChmRGl2KTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChtRGl2KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZyb3plbkNvbnRlbnQoZkRpdik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNb3ZhYmxlQ29udGVudChtRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyRW1wdHkuY2FsbCh0aGlzLCB0Ym9keSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUNvbnRlbnQoKS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5oZWFkZXInKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRGcm96ZW5Db250ZW50ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5mcm96ZW5Db250ZW50ID0gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRNb3ZhYmxlQ29udGVudCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMubW92YWJsZUNvbnRlbnQgPSBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZUNvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldEZyb3plbkNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm96ZW5Db250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb3ZhYmxlQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmFibGVDb250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZnJlZXplX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5GcmVlemVSb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZUNvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZyb3plbkNvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgICAgIHZhciBtVGJsID0gdGhpcy5nZXRUYWJsZSgpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdmFibGVDb250ZW50KCkuYXBwZW5kQ2hpbGQobVRibCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLmNsYXNzTGlzdC5hZGQoJ2UtZnJvemVuaGRyY29udCcpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZyZWV6ZUNvbnRlbnRSZW5kZXI7XG4gICAgfShjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcikpO1xuICAgIGV4cG9ydHMuRnJlZXplQ29udGVudFJlbmRlciA9IEZyZWV6ZUNvbnRlbnRSZW5kZXI7XG4gICAgdmFyIEZyZWV6ZVJlbmRlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGcmVlemVSZW5kZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZyZWV6ZVJlbmRlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmZzaE1vdmFibGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyUGFuZWwuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBmRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZnJvemVuaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhciBtRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbW92YWJsZWhlYWRlcicgfSk7XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChmRGl2KTtcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLmFwcGVuZENoaWxkKG1EaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRGcm96ZW5IZWFkZXIoZkRpdik7XG4gICAgICAgICAgICB0aGlzLnNldE1vdmFibGVIZWFkZXIobURpdik7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVmcmVzaFVJID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlZnJlc2hVSS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5yZnNoTW92YWJsZSgpO1xuICAgICAgICAgICAgdmFyIG1UYWJsZSA9IHRoaXMuZ2V0TW92YWJsZUhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpKTtcbiAgICAgICAgICAgIG1UYWJsZS5pbnNlcnRCZWZvcmUodGhpcy5yZW5kZXJNb3ZhYmxlKHRoaXMuZ2V0RnJvemVuSGVhZGVyKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKSksIG1UYWJsZS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5yZnNoTW92YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJSb3c7XG4gICAgICAgICAgICB0aGlzLmdldEZyb3plbkhlYWRlcigpLmFwcGVuZENoaWxkKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRhYmxlKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZyb3plbkhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlclJvdyA9IHRoaXMuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCcuZS1maWx0ZXJiYXInKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0ZpbHRlcmluZyAmJiBmaWx0ZXJSb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlck1vdmFibGUoZmlsdGVyUm93KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZyZWV6ZVJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5zZXRGcm96ZW5IZWFkZXIgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB0aGlzLmZyb3plbkhlYWRlciA9IGVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5zZXRNb3ZhYmxlSGVhZGVyID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZhYmxlSGVhZGVyID0gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLmdldEZyb3plbkhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb3plbkhlYWRlcjtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5nZXRNb3ZhYmxlSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW92YWJsZUhlYWRlcjtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJNb3ZhYmxlID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdmFyIG1FbGUgPSBlbGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtRWxlLnJlbW92ZUNoaWxkKG1FbGUuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMsIGxlbiA9IGVsZS5jaGlsZEVsZW1lbnRDb3VudDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlLnJlbW92ZUNoaWxkKGVsZS5jaGlsZHJlbltlbGUuY2hpbGRFbGVtZW50Q291bnQgLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbUVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZyZWV6ZVJlbmRlcjtcbiAgICB9KGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcikpO1xuICAgIGV4cG9ydHMuRnJlZXplUmVuZGVyID0gRnJlZXplUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZyZWV6ZS1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRnJlZXplUm93TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmlzRnJ6TG9hZCA9IDE7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMucm93TW9kZWxHZW5lcmF0b3IgPSBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBGcmVlemVSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIG5vdGlmeUFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnJvd01vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhkYXRhLCBub3RpZnlBcmdzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvdy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZyekxvYWQgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dbaV0uY2VsbHMgPSByb3dbaV0uY2VsbHMuc2xpY2UodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucywgcm93W2ldLmNlbGxzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dbaV0uY2VsbHMgPSByb3dbaV0uY2VsbHMuc2xpY2UoMCwgdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRnJ6TG9hZCsrO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GcmVlemVSb3dNb2RlbEdlbmVyYXRvciA9IEZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2ZyZWV6ZS1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9hY3Rpb25zL2dyb3VwXCIsIFwiLi4vYWN0aW9ucy9zb3J0XCIsIFwiLi4vYWN0aW9ucy9maWx0ZXJcIiwgXCIuLi9hY3Rpb25zL3Jlc2l6ZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9uYXZpZ2F0aW9uc18xLCB1dGlsXzEsIGV2ZW50cywgZWoyX3BvcHVwc18xLCBlajJfYnV0dG9uc18xLCBncm91cF8xLCBzb3J0XzEsIGZpbHRlcl8xLCByZXNpemVfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uTWVudSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbk1lbnUocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SXRlbXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlVGV4dCA9IHRoaXMuc2V0TG9jYWxlS2V5KCk7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuR1JPVVAgPSAnZS1pY29uLWdyb3VwJztcbiAgICAgICAgICAgIHRoaXMuVU5HUk9VUCA9ICdlLWljb24tdW5ncm91cCc7XG4gICAgICAgICAgICB0aGlzLkFTQ0VORElORyA9ICdlLWljb24tYXNjZW5kaW5nJztcbiAgICAgICAgICAgIHRoaXMuREVTQ0VORElORyA9ICdlLWljb24tZGVzY2VuZGluZyc7XG4gICAgICAgICAgICB0aGlzLlJPT1QgPSAnZS1jb2x1bW5tZW51JztcbiAgICAgICAgICAgIHRoaXMuRklMVEVSID0gJ2UtaWNvbi1maWx0ZXInO1xuICAgICAgICAgICAgdGhpcy5QT1AgPSAnZS1maWx0ZXItcG9wdXAnO1xuICAgICAgICAgICAgdGhpcy5XUkFQID0gJ2UtY29sLW1lbnUnO1xuICAgICAgICAgICAgdGhpcy5DSE9PU0VSID0gJ19jaG9vc2VyXyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZElEID0gcGFyZW50LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1uTWVudUhhbmRsZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSwgJ21vdXNlZG93bicsIF90aGlzLmNvbHVtbk1lbnVIYW5kbGVyRG93biwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbk1lbnVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGUsICdtb3VzZWRvd24nLCBfdGhpcy5jb2x1bW5NZW51SGFuZGxlckRvd24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUZpbHRlckV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVIYW5kbGVyQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5tZW51JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkNvbHVtbk1lbnUoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMuaGVhZGVyQ2VsbCAhPT0gdGhpcy5nZXRIZWFkZXJDZWxsKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Db2x1bW5NZW51KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5vcGVuQ29sdW1uTWVudSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6YmxvY2s7dmlzaWJpbGl0eTpoaWRkZW4nO1xuICAgICAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OnZpc2libGUnO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJDZWxsID0gdGhpcy5nZXRIZWFkZXJDZWxsKGUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHBvcy50b3AgPSAoKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpIC0gKGVsZVBvcy5oZWlnaHQgLyAyKSk7XG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgPSAoKHdpbmRvdy5pbm5lcldpZHRoIC8gMikgLSAoZWxlUG9zLndpZHRoIC8gMikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICBwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUG9zaXRpb24odGhpcy5oZWFkZXJDZWxsLCAnbGVmdCcsICdib3R0b20nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmhlYWRlckNlbGwsICdyaWdodCcsICdib3R0b20nKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zLmxlZnQgLT0gZWxlUG9zLndpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5vcGVuKHBvcy50b3AsIHBvcy5sZWZ0KTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuY29sdW1uTWVudUhhbmRsZXJEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gISh0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldENvbHVtbk1lbnVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyB0aGlzLlJPT1QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMud2lyZUV2ZW50cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGaWx0ZXJJdGVtQWRkZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJEaWFsb2dDcmVhdGVkLCB0aGlzLmZpbHRlclBvc2l0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jb2x1bW5NZW51SGFuZGxlckNsaWNrLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnVud2lyZUV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRmlsdGVySXRlbUFkZGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmZpbHRlckRpYWxvZ0NyZWF0ZWQsIHRoaXMuZmlsdGVyUG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jb2x1bW5NZW51SGFuZGxlckNsaWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndWwnLCB7IGlkOiB0aGlzLmdyaWRJRCArICdfY29sdW1ubWVudScsIGNsYXNzTmFtZTogJ2UtY29sbWVudScgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUgPSBuZXcgZWoyX25hdmlnYXRpb25zXzEuQ29udGV4dE1lbnUoe1xuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1ncmlkLW1lbnUnLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIGVuYWJsZVBlcnNpc3RlbmNlOiB0aGlzLnBhcmVudC5lbmFibGVQZXJzaXN0ZW5jZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5nZXRJdGVtcygpLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogdGhpcy5jb2x1bW5NZW51SXRlbUNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogdGhpcy5jb2x1bW5NZW51QmVmb3JlT3Blbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMuY29sdW1uTWVudU9uQ2xvc2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBiZWZvcmVJdGVtUmVuZGVyOiB0aGlzLmJlZm9yZU1lbnVJdGVtUmVuZGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IHRoaXMuY29sdW1uTWVudUJlZm9yZUNsb3NlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLndpcmVGaWx0ZXJFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUud2lyZUZpbHRlckV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlICYmIHRoaXMuaXNGaWx0ZXJJdGVtQWRkZWQoKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmFwcGVuZEZpbHRlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLnVud2lyZUZpbHRlckV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlICYmIHRoaXMuaXNGaWx0ZXJJdGVtQWRkZWQoKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmFwcGVuZEZpbHRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmJlZm9yZU1lbnVJdGVtUmVuZGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hvb3Nlckl0ZW0oYXJncy5pdGVtKSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCwgdGhpcy5DSE9PU0VSKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveChmYWxzZSwge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogYXJncy5pdGVtLnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNvbHVtbi52aXNpYmxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVjay5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFwcGVuZENoaWxkKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MuaXRlbS5pZCAmJiB0aGlzLmdldEtleUZyb21JZChhcmdzLml0ZW0uaWQpID09PSAnZmlsdGVyJykge1xuICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1jYXJldCcgfSkpO1xuICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5jbGFzc05hbWUgKz0gJ2UtZmlsdGVyLWl0ZW0gZS1tZW51LWNhcmV0LWljb24nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51QmVmb3JlQ2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MucGFyZW50SXRlbSkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmdldEtleUZyb21JZChhcmdzLnBhcmVudEl0ZW0uaWQpID09PSAnY29sdW1uQ2hvb3NlcicgJiZcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuZS1tZW51LXBhcmVudCcpKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5ldmVudCAmJiAoZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MuZXZlbnQudGFyZ2V0LCAnLicgKyB0aGlzLlBPUClcbiAgICAgICAgICAgICAgICB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChhcmdzLmV2ZW50LnRhcmdldCwgJ2UtcG9wdXAnKSkpKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5pc0Nob29zZXJJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmlkICYmIGl0ZW0uaWQuaW5kZXhPZignX2NvbG1lbnVfJykgPj0gMCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0S2V5RnJvbUlkKGl0ZW0uaWQsIHRoaXMuQ0hPT1NFUikuaW5kZXhPZignX2NvbG1lbnVfJykgPT09IC0xO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51QmVmb3JlT3BlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmNvbHVtbiA9IHRoaXMudGFyZ2V0Q29sdW1uID0gdGhpcy5nZXRDb2x1bW4oKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbHVtbk1lbnVPcGVuLCBhcmdzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBhcmdzLml0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleUZyb21JZChpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICB2YXIgZEl0ZW0gPSB0aGlzLmRlZmF1bHRJdGVtc1trZXldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldERlZmF1bHRJdGVtcygpLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5zdXJlRGlzYWJsZWRTdGF0dXMoa2V5KSAmJiAhZEl0ZW0uaGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMucHVzaChpdGVtLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0uaGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcy5wdXNoKGl0ZW0udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuZW5hYmxlSXRlbXModGhpcy5kaXNhYmxlSXRlbXMsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5oaWRlSXRlbXModGhpcy5oaWRkZW5JdGVtcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmVuc3VyZURpc2FibGVkU3RhdHVzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyB8fCAodGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cCkgJiYgdGhpcy50YXJnZXRDb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKSA+PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0QWxsJzpcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0JzpcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHJlc2l6ZV8xLlJlc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApIHx8ICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSAmJiB0aGlzLnRhcmdldENvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy50YXJnZXRDb2x1bW4uZmllbGQpIDwgMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRBc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dTb3J0aW5nICYmIHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCAmJiB0aGlzLnRhcmdldENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5maWVsZCA9PT0gX3RoaXMudGFyZ2V0Q29sdW1uLmZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGVsZS5kaXJlY3Rpb24gPT09IGl0ZW0ucmVwbGFjZSgnc29ydCcsICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMucGFyZW50LmFsbG93U29ydGluZyB8fCAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoc29ydF8xLlNvcnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9ICEodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLnR5cGUgIT09ICdmaWx0ZXJiYXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZmlsdGVyXzEuRmlsdGVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51SXRlbUNsaWNrID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pc0Nob29zZXJJdGVtKGFyZ3MuaXRlbSkgPyAnY29sdW1uQ2hvb3NlcicgOiB0aGlzLmdldEtleUZyb21JZChhcmdzLml0ZW0uaWQpO1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdEFsbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnVuZ3JvdXBDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwQ29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNvcnRDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQsICdhc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0Q29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkLCAnZGVzY2VuZGluZycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5DaG9vc2VyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCwgdGhpcy5DSE9PU0VSKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gYXJncy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrYm94LXdyYXBwZXIgLmUtZnJhbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ICYmIGNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVjaycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdlLWNoZWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5oaWRlQ29sdW1uKGtleSwgJ2ZpZWxkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dDb2x1bW4oa2V5LCAnZmllbGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2snKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmaWx0ZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZpbHRlcihhcmdzLmVsZW1lbnQsIGFyZ3MuaXRlbS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29sdW1uTWVudUNsaWNrLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuY29sdW1uTWVudU9uQ2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICdwYXJlbnRPYmonO1xuICAgICAgICAgICAgaWYgKGFyZ3MuaXRlbXMubGVuZ3RoID4gMCAmJiBhcmdzLml0ZW1zWzBdW3BhcmVudF0gaW5zdGFuY2VvZiBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5lbmFibGVJdGVtcyh0aGlzLmRpc2FibGVJdGVtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuc2hvd0l0ZW1zKHRoaXMuaGlkZGVuSXRlbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuSXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZpbHRlclBvcHVwT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyKGFyZ3MuZWxlbWVudCwgYXJncy5lbGVtZW50LmlkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldERlZmF1bHRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ2F1dG9GaXRBbGwnLCAnYXV0b0ZpdCcsICdzb3J0QXNjZW5kaW5nJywgJ3NvcnREZXNjZW5kaW5nJywgJ2dyb3VwJywgJ3VuZ3JvdXAnLCAnY29sdW1uQ2hvb3NlcicsICdmaWx0ZXInXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBkZWZ1bHRJdGVtcyA9IHRoaXMucGFyZW50LmNvbHVtbk1lbnVJdGVtcyA/IHRoaXMucGFyZW50LmNvbHVtbk1lbnVJdGVtcyA6IHRoaXMuZ2V0RGVmYXVsdCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkZWZ1bHRJdGVtc18xID0gZGVmdWx0SXRlbXM7IF9pIDwgZGVmdWx0SXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRlZnVsdEl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICdjb2x1bW5DaG9vc2VyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0RGVmYXVsdEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuaXRlbXMgPSB0aGlzLmNyZWF0ZUNob29zZXJJdGVtcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChjb2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh0aGlzLmdldERlZmF1bHRJdGVtKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldERlZmF1bHRJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBtZW51SXRlbSA9IHt9O1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkFTQ0VORElORyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkRFU0NFTkRJTkcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgaWNvbkNzczogdGhpcy5HUk9VUCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1bmdyb3VwJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IGljb25Dc3M6IHRoaXMuVU5HUk9VUCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmaWx0ZXInOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgaWNvbkNzczogdGhpcy5GSUxURVIgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRJdGVtc1tpdGVtXSA9IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldExvY2FsZVRleHQoaXRlbSksIGlkOiB0aGlzLmdlbmVyYXRlSUQoaXRlbSksXG4gICAgICAgICAgICAgICAgaWNvbkNzczogbWVudUl0ZW0uaWNvbkNzcyA/ICdlLWljb25zICcgKyBtZW51SXRlbS5pY29uQ3NzIDogJydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0SXRlbXNbaXRlbV07XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldExvY2FsZVRleHQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubDEwbi5nZXRDb25zdGFudCh0aGlzLmxvY2FsZVRleHRbaXRlbV0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZW5lcmF0ZUlEID0gZnVuY3Rpb24gKGl0ZW0sIGFwcGVuZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZElEICsgJ19jb2xtZW51XycgKyAoYXBwZW5kID8gYXBwZW5kICsgaXRlbSA6IGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRLZXlGcm9tSWQgPSBmdW5jdGlvbiAoaWQsIGFwcGVuZCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkLnJlcGxhY2UodGhpcy5ncmlkSUQgKyAnX2NvbG1lbnVfJyArIChhcHBlbmQgPyBhcHBlbmQgOiAnJyksICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0Q29sdW1uTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbHVtbk1lbnUnO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5zZXRMb2NhbGVLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICdhdXRvRml0QWxsJzogJ2F1dG9GaXRBbGwnLFxuICAgICAgICAgICAgICAgICdhdXRvRml0JzogJ2F1dG9GaXQnLFxuICAgICAgICAgICAgICAgICdncm91cCc6ICdHcm91cCcsXG4gICAgICAgICAgICAgICAgJ3VuZ3JvdXAnOiAnVW5ncm91cCcsXG4gICAgICAgICAgICAgICAgJ3NvcnRBc2NlbmRpbmcnOiAnU29ydEFzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgJ3NvcnREZXNjZW5kaW5nJzogJ1NvcnREZXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uQ2hvb3Nlcic6ICdDb2x1bW5jaG9vc2VyJyxcbiAgICAgICAgICAgICAgICAnZmlsdGVyJzogJ0ZpbHRlck1lbnUnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRIZWFkZXJDZWxsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0aC5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0Q29sdW1uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyQ2VsbCkge1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSB0aGlzLmhlYWRlckNlbGwucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuY3JlYXRlQ2hvb3Nlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5zaG93SW5Db2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goeyBpZDogdGhpcy5nZW5lcmF0ZUlEKGNvbC5maWVsZCwgdGhpcy5DSE9PU0VSKSwgdGV4dDogY29sLmhlYWRlclRleHQgPyBjb2wuaGVhZGVyVGV4dCA6IGNvbC5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmFwcGVuZEZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gJ2ZpbHRlcic7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVmYXVsdEl0ZW1zW2ZpbHRlcl0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5kZWZhdWx0SXRlbXNbZmlsdGVyXS5pZDtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnIycgKyBrZXkpICYmICF0aGlzLmlzRmlsdGVyUG9wdXBPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGaWx0ZXIoZS50YXJnZXQsIGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICcjJyArIGtleSkgJiYgdGhpcy5pc0ZpbHRlclBvcHVwT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyKGUudGFyZ2V0LCBrZXksIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RmlsdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgaWQsIGlzQ2xvc2UpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJQb3B1cCA9IHRoaXMuZ2V0RmlsdGVyUG9wKCk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyUG9wdXApIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5ID0gaXNDbG9zZSA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlck9wZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgY29sOiB0aGlzLnRhcmdldENvbHVtbiwgdGFyZ2V0OiB0YXJnZXQsIGlzQ2xvc2U6IGlzQ2xvc2UsIGlkOiBpZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsaSwgdWwpIHtcbiAgICAgICAgICAgIHZhciBncmlkUG9zID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBsaVBvcyA9IGxpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBsaVBvcy5sZWZ0IC0gZ3JpZFBvcy5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRvcCA9IGxpUG9zLnRvcCAtIGdyaWRQb3MudG9wO1xuICAgICAgICAgICAgaWYgKGdyaWRQb3MuaGVpZ2h0IDwgdG9wKSB7XG4gICAgICAgICAgICAgICAgdG9wID0gdG9wIC0gdWwub2Zmc2V0SGVpZ2h0ICsgbGlQb3MuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ3JpZFBvcy5oZWlnaHQgPCB0b3AgKyB1bC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0b3AgPSBncmlkUG9zLmhlaWdodCAtIHVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCB1bC5vZmZzZXRIZWlnaHQgKyB0b3AgKyBncmlkUG9zLnRvcCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHVsLm9mZnNldEhlaWdodCAtIGdyaWRQb3MudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVmdCArPSAodGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gLXVsLm9mZnNldFdpZHRoIDogbGlQb3Mud2lkdGgpO1xuICAgICAgICAgICAgaWYgKGdyaWRQb3Mud2lkdGggPD0gbGVmdCArIHVsLm9mZnNldFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbGVmdCAtPSBsaVBvcy53aWR0aCArIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IHVsLm9mZnNldFdpZHRoICsgbGlQb3Mud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xuICAgICAgICAgICAgdWwuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5maWx0ZXJQb3NpdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyUG9wdXAgPSB0aGlzLmdldEZpbHRlclBvcCgpO1xuICAgICAgICAgICAgZmlsdGVyUG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLldSQVApO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcCA9IGZpbHRlclBvcHVwLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgZmlsdGVyUG9wdXAuc3R5bGUuY3NzVGV4dCArPSAnZGlzcGxheTpibG9jazt2aXNpYmlsaXR5OmhpZGRlbic7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5GSUxURVIpO1xuICAgICAgICAgICAgICAgIGlmIChsaSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGxpLnBhcmVudEVsZW1lbnQsIGZpbHRlclBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUG9wdXAuc3R5bGUuY3NzVGV4dCArPSAnZGlzcGxheTonICsgZGlzcCArICc7dmlzaWJpbGl0eTp2aXNpYmxlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChyZXNpemVfMS5SZXNpemUpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnYXV0b0ZpdEFsbCcpO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ2F1dG9GaXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nICYmIHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCd1bmdyb3VwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dTb3J0aW5nICYmIHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ3NvcnRBc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdzb3J0RGVzY2VuZGluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaCgnY29sdW1uQ2hvb3NlcicpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93RmlsdGVyaW5nICYmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlICE9PSAnZmlsdGVyYmFyJykgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChmaWx0ZXJfMS5GaWx0ZXIpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnZmlsdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmlzRmlsdGVyUG9wdXBPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpbHRlclBvcHVwID0gdGhpcy5nZXRGaWx0ZXJQb3AoKTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJQb3B1cCAmJiBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEZpbHRlclBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5QT1ApO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5pc0ZpbHRlckl0ZW1BZGRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zLmluZGV4T2YoJ2ZpbHRlcicpID49IDApIHx8ICF0aGlzLnBhcmVudC5jb2x1bW5NZW51SXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5NZW51O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5NZW51ID0gQ29sdW1uTWVudTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbHVtbl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMuanNcbi8vIG1vZHVsZSBpZCA9IDEwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvcmVuZGVyXCIsIFwiLi9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZGlhbG9nLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2lubGluZS1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZnJlZXplLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9zdHJpbmctZmlsdGVyLXVpXCIsIFwiLi9yZW5kZXJlci9udW1iZXItZmlsdGVyLXVpXCIsIFwiLi9yZW5kZXJlci9kYXRlLWZpbHRlci11aVwiLCBcIi4vcmVuZGVyZXIvYm9vbGVhbi1maWx0ZXItdWlcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1tZW51LW9wZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVhZGVyX3JlbmRlcmVyXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIHJlbmRlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xLCBkYXRlcGlja2VyX2VkaXRfY2VsbF8xLCBjb21tYW5kX2NvbHVtbl9yZW5kZXJlcl8xLCBmcmVlemVfcmVuZGVyZXJfMSwgc3RyaW5nX2ZpbHRlcl91aV8xLCBudW1iZXJfZmlsdGVyX3VpXzEsIGRhdGVfZmlsdGVyX3VpXzEsIGJvb2xlYW5fZmlsdGVyX3VpXzEsIGZpbHRlcl9tZW51X29wZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGhlYWRlcl9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChjb250ZW50X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHJvd19yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChjZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChyZW5kZXJfMSk7XG4gICAgX19leHBvcnQoZmlsdGVyX2NlbGxfcmVuZGVyZXJfMik7XG4gICAgX19leHBvcnQoaW5kZW50X2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGJhdGNoX2VkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZGlhbG9nX2VkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoaW5saW5lX2VkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChib29sZWFuX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChkZWZhdWx0X2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChkcm9wZG93bl9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQobnVtZXJpY19lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZGF0ZXBpY2tlcl9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoY29tbWFuZF9jb2x1bW5fcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZnJlZXplX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHN0cmluZ19maWx0ZXJfdWlfMSk7XG4gICAgX19leHBvcnQobnVtYmVyX2ZpbHRlcl91aV8xKTtcbiAgICBfX2V4cG9ydChkYXRlX2ZpbHRlcl91aV8xKTtcbiAgICBfX2V4cG9ydChib29sZWFuX2ZpbHRlcl91aV8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfbWVudV9vcGVyYXRvcl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vc2VydmljZXMvY2VsbC1yZW5kZXItZmFjdG9yeVwiLCBcIi4vc2VydmljZXMvc2VydmljZS1sb2NhdG9yXCIsIFwiLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuL3NlcnZpY2VzL2ZyZWV6ZS1yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSwgZnJlZXplX3Jvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJfZmFjdG9yeV8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlX2xvY2F0b3JfMSk7XG4gICAgX19leHBvcnQocm93X21vZGVsX2dlbmVyYXRvcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF9tb2RlbF9nZW5lcmF0b3JfMSk7XG4gICAgX19leHBvcnQoZnJlZXplX3Jvd19tb2RlbF9nZW5lcmF0b3JfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMuanNcbi8vIG1vZHVsZSBpZCA9IDExMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3BhZ2VyXCIsIFwiLi9leHRlcm5hbC1tZXNzYWdlXCIsIFwiLi9udW1lcmljLWNvbnRhaW5lclwiLCBcIi4vcGFnZXItbWVzc2FnZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHBhZ2VyXzEsIGV4dGVybmFsX21lc3NhZ2VfMSwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChwYWdlcl8xKTtcbiAgICBfX2V4cG9ydChleHRlcm5hbF9tZXNzYWdlXzEpO1xuICAgIF9fZXhwb3J0KG51bWVyaWNfY29udGFpbmVyXzEpO1xuICAgIF9fZXhwb3J0KHBhZ2VyX21lc3NhZ2VfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}