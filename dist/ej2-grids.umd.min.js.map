/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 1.0.22
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_44__","__WEBPACK_EXTERNAL_MODULE_53__","__WEBPACK_EXTERNAL_MODULE_62__","__WEBPACK_EXTERNAL_MODULE_72__","__WEBPACK_EXTERNAL_MODULE_85__","__WEBPACK_EXTERNAL_MODULE_88__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","tab","shiftTab","getPersistData","keyEntity","_i","_a","columns","col","template","addOnPersist","requiredModules","allowFiltering","push","member","args","filterSettings","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","sortSettings","allowPaging","pageSettings","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","groupSettings","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","editSettings","allowAdding","allowDeleting","allowEditing","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","createSpinner","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","showSpinner","initialEnd","hideSpinner","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","visible","matches","showHider","show","headerText","hide","refreshMediaCol","refresh","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","updateGridLines","searchSettings","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getDataRows","rows","children","dataRows","getCellFromIndex","rowIndex","getColumnHeaderByIndex","getRowObjectFromUID","uid","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","column","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","isSelected","data","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","isToggle","selectRows","rowIndexes","clearSelection","selectCell","cellIndex","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","recalcIndentWidth","getAttribute","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","headerRefreshed","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","parentsUntil","touches","checkEdit","preventDefault","click","mode","isEdit","dblclick","display","filterClear","gridElement","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","Component","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","services","name","type","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","result","pred","document","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","extend","setStyleAttribute","attributes","copied","first","second","exclude","moved","forEach","indexOf","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","getBoundingClientRect","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","cssText","body","clientWidth","removeChild","getRowHeight","rowHeight","table","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","changeButtonType","elements_1","button","allowResizing","showInColumnChooser","merge","valueFormatter","format","skeleton","setFormatter","getFormatFunction","setParser","getParserFunction","templateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getDomSetter","disableHtmlEncode","cultureName","intl","Internationalization","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","updateData","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","data_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","toString","renderEmpty","updateColumnType","record","items","fmtr","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_1","row_1","helper","visualElement","sender","headercelldiv","textContent","lineHeight","dragStart","event","drag","closest","cloneElement","dragStop","drop","droppedElement","setVisible","div","innerDiv","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","panel","headerTable","getColGroup","colgroup","setColGroup","colGroup","tHead","createTable","bodyCell","cellspacing","findHeaderRow","createHeaderContent","thead","rowBody","len_1","cells","updateColGroup","colcount","colHeader","rowRenderer","RowRenderer","headerRow","colDepth","getObjDepth","generateRow","ensureColumns","getHeaderCells","len_2","generateCell","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","colSpan","getCellCnt","Cell","cellType","Row","rowSpan","colIndex","opt","isDataCell","isTemplate","headerTemplate","rowID","idx","displayVal","clen","insertBefore","appendContent","max","depth","checkDepth","cnt","Draggable","dragTarget","distance","abort","Droppable","accept","refreshRow","isChanged","cells_1","cell","cloneNode","rowArgs","cellArgs","attrCopy","isDataRow","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","td","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","class","initDataManager","addRows","removeRows","crudActions","skipPage","clone","columns_1","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","getKey","foreignKeyData","executeQuery","update","url","filterObject","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","row_model_generator_1","group_model_generator_1","rafCallback","generator","getModelGenerator","contentDiv","createContentTable","multiselectable","initializeContentDrop","frag","createDocumentFragment","rowElements","modelData","generateRows","isTR","nodeName","contentPanel","contentTable","testRow","some","canSkip","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","startIndex","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","rowId","oIndex","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","textAlign","summaryRows","single","setTemplate","types","disp","val","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","tabindex","localizer","formatter","getGui","evaluate","innerText","invokeFormatter","refreshCell","refreshTD","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","setAttributes","property","buildAttributeFromCell","colindex","hTxtEle","sortEle","gui","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","sort","grabbed","handler","headerTextAlign","alignment","setStateAndProperties","attribute","removeAttribute","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","toolTip","aria-expanded","cellRenderMap","getEnumValue","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","edit","getSiblingsHeight","getHeightFromDirection","sibling","parseInt","minWidth","maxWidth","getTableWidth","tWidth","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","span","clearCellSelection","isCellType","selectedCell","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","min","cellIndexes","stIndex","edIndex","temp","cellSelectionMode","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","focus","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","clickHandler","keyPressHandler","popUpClickHandler","rowCellSelectionHandler","showPopup","checkScroll","downArrowKey","upArrowKey","rightArrowKey","leftArrowKey","homeKey","endKey","ctrlHomeKey","ctrlEndKey","shiftDownKey","shiftUpKey","shiftRightKey","shiftLeftKey","scrollElem","firstElementChild","scrollTop","checkVisible","st","scrollY","innerHeight","applyDownUpKey","cond1","cond2","applyUpDown","cIndex","preSelectedCellIndex","applyRightLeftKey","key1","key2","cond","isCellHide","cellIndex_1","rowElement","applyHomeEndKey","applyShiftLeftRightKey","applyCtrlHomeEndKey","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","info","onContentScroll","scrollTarget","isHeader","scrollLeft","isFooter","scrollHeight","clientHeight","css","overflowY","isPrinting","printWindow","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","getTemplate","ej2_buttons_1","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","unWireEvents","hideDialog","renderDlgContent","targetElement","dlgObj","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","maxHeight","elementVisible","newpos","calculateRelativeBasedPosition","X","Y","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","dlgDiv","tarElement","Dialog","showCloseIcon","closeOnEscape","getElementById","buttons","confirmDlgBtnClick","buttonModel","isPrimary","clearActions","animationSettings","effect","appendTo","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","params","dialogInstance","stateColumns","state","colUid","replace","currentCol","checkstatecolumn","targetEle","uncheckColumn","checked","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","searchElement","columnChooserManualSearch","gdCol","ulElement","renderCheckbox","cclist","hideColState","showColState","checkBoxObj","cclabe","cccheckboxlist","CheckBox","label","change","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","DetailRow","aria","toogleExpandcollapse","nextRow","isDetailRow","detailRow","detailCell","parentNode","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","getInjectedModules","injectedModues","gridElem","detailElement","getTDfromIndex","isNaN","collapse","expandAll","expandCollapse","collapseAll","isExpand","dataRow","Sort","contentRefresh","isModelChanged","updateModel","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","enableSortMultiTouch","showPopUp","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","canSkipAction","keyActions","el","activeElement","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","getLocalizedLabel","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","match","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","pageCount","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","onChange","filter_cell_renderer_1","Filter","values","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","split","updateCrossIcon","processFilter","targetText","previousElementSibling","disabled","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","JSON","parse","stringify","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","filterBarTemplate","templateRead","read","templateWrite","write","resizeClassList","suppress","icon","cursor","lines","Resize","tapped","isDblClk","fName","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","text","tag","myTableDiv","mySubDiv","myTable","myTr","offsetWidthValue","setHandlerHeight","getResizeHandlers","ele","touchStartEvent","callAutoFit","getTargetColumn","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","nodeType","getUserAgent","clearTimeout","setTimeout","timeoutHandler","test","userAgent","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","Group","groupColumn","dropArea","ungroupColumn","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","ej2_navigations_1","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","getItem","itemObject","itemName","isEnable","items_1","gID","originalEvent","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","callback","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","fn","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","setProperties","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","container","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","clear","gLen","n","currentFirst","iterateGroup","oRow","res","shift","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","ej2_popups_2","ej2_inputs_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","booleanedit","BooleanEditCell","default","DefaultEditCell","editType","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","updateColTypeObj","EditRender","createAlertDlg","createConfirmDlg","tapEvent","navigator","showDialog","alertDObj","refreshToolbar","showConfirmDialog","dialogObj","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","parseFloat","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","form","editedData","inputs","setValue","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","tooltip","Tooltip","opensOn","animation","close","inputName","tObj","status","isInline","NumericTextBox","rowData","enabled","floatLabelType","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","setSelectionRange","tArgs","isInput","tagName","getEditElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","btnClick","dataCell","lbl","for","select","ddActionComplete","popupHeight","Input","createInput","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","primaryKey","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","rowObj","cellDetails","setCellIdx","validateFormObj","editNextCell","editPrevCell","editCellFromIndex","reFocusOnError","isAddRow","findNextEditableCell","findPrevEditableCell","isDirty","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","rows_1","addRowObject","getIndexFromData","defaultData","getDefaultData","checkNPCell","dValues","number","string","boolean","date","datetime","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","keys_1","cIdx","isForceSave","previousValue","valComplete","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","init","toISOString","isExporting","footer","exportValueFormatter","ExportValueFormatter","theme","isCsv","processRecords","reject","adaptor","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","ExportHelper","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","_b","tCell","sCell","_c","_d","rLen","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontColor","fontName","fontSize","borders","color","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","hideColumnInclude","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","customFormat","ej2_pdf_1","ej2_pdf_2","ej2_pdf_3","ej2_pdf_4","ej2_pdf_5","ej2_pdf_6","PdfExport","customDataSource","gridTheme","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","PdfBorders","all","PdfPen","groupIndex","dataSourceItems","getCell","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","stringFormat","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","hexToRgb","g","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","borderColor","PdfStringFormat","PdfTextAlignment","Right","Center","Justify","Left","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_72__, __WEBPACK_EXTERNAL_MODULE_85__, __WEBPACK_EXTERNAL_MODULE_88__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(92)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(45), __webpack_require__(89), __webpack_require__(90), __webpack_require__(91)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(15), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(7), __webpack_require__(11), __webpack_require__(12), __webpack_require__(15), __webpack_require__(33), __webpack_require__(4), __webpack_require__(10), __webpack_require__(34), __webpack_require__(35), __webpack_require__(25), __webpack_require__(36), __webpack_require__(37), __webpack_require__(38), __webpack_require__(39), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab'\n\t            };\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var keyEntity = ['allowPaging', 'pageSettings', 'allowSorting', 'sortSettings', 'allowSelection',\n\t                'selectionSettings', 'allowFiltering', 'filterSettings', 'gridLines',\n\t                'created', 'destroyed', 'load', 'actionBegin', 'actionComplete', 'actionFailure', 'rowSelecting', 'rowSelected',\n\t                'columnSelecting', 'columnSelected', 'cellSelecting', 'cellSelected', 'dataBound', 'groupSettings', 'columns', 'allowKeyboard',\n\t                'enableAltRow', 'enableHover', 'allowTextWrap', 'textWrapSettings', 'searchSettings', 'selectedRowIndex', 'allowReordering',\n\t                'allowRowDragAndDrop', 'rowDropSettings', 'allowGrouping', 'height', 'width', 'printMode',\n\t                'rowDataBound', 'queryCellInfo', 'rowDeselecting', 'rowDeselected', 'cellDeselecting', 'cellDeselected',\n\t                'columnDragStart', 'columnDrag', 'columnDrop', 'printComplete', 'beforePrint', 'detailDataBound',\n\t                'childGrid', 'queryString', 'toolbar', 'toolbarClick', 'editSettings',\n\t                'batchAdd', 'batchDelete', 'beforeBatchAdd', 'beforeBatchDelete',\n\t                'beforeBatchSave', 'beginEdit', 'cellEdit', 'cellSave', 'endAdd', 'endDelete', 'endEdit', 'beforeDataBound',\n\t                'beforeOpenColumnChooser', 'allowResizing', 'ExcelExport', 'PdfExport',\n\t                'allowExcelExport', 'allowPdfExport',\n\t                'pdfQueryCellInfo', 'excelQueryCellInfo'];\n\t            for (var _i = 0, _a = this.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.template) {\n\t                    delete col.template;\n\t                }\n\t            }\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            ej2_popups_1.createSpinner({ target: this.element });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.showSpinner();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.showSpinner = function () {\n\t            ej2_popups_1.showSpinner(this.element);\n\t        };\n\t        Grid.prototype.hideSpinner = function () {\n\t            ej2_popups_1.hideSpinner(this.element);\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, {\n\t                            module: 'scroll',\n\t                            properties: { width: newProp.width, height: newProp.height }\n\t                        });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.contentModule.getRows().filter(function (row) { return row.isSelected; })\n\t                .map(function (m) { return m.data; });\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index, isToggle) {\n\t            this.selectionModule.selectRow(index, isToggle);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex, isToggle) {\n\t            this.selectionModule.selectCell(cellIndex, isToggle);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.addEventListener(events.dataBound, this.refreshMediaCol.bind(this));\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.refreshMediaCol);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell'));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowExcelExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPdfExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t    function changeButtonType(target) {\n\t        var elements = [].slice.call(target.querySelectorAll('button'));\n\t        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t            var button = elements_1[_i];\n\t            ej2_base_3.attributes(button, { type: 'button' });\n\t        }\n\t    }\n\t    exports.changeButtonType = changeButtonType;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.allowEditing = true;\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.template) {\n\t                this.templateFn = util_1.templateCompiler(this.template);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(15), __webpack_require__(18), __webpack_require__(11), __webpack_require__(7), __webpack_require__(19), __webpack_require__(13), __webpack_require__(23), __webpack_require__(24), __webpack_require__(26), __webpack_require__(27), __webpack_require__(28), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            if (args.requestType !== 'virtualscroll') {\n\t                this.parent.showSpinner();\n\t            }\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                    if (typeof (columns[i].format) === 'string') {\n\t                        switch (columns[i].type) {\n\t                            case 'date':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'datetime':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'number':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ format: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ format: columns[i].format }));\n\t                                break;\n\t                        }\n\t                    }\n\t                    else if (!columns[i].format && columns[i].type === 'number') {\n\t                        columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t                this.parent.hideSpinner();\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t            this.parent.hideSpinner();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(14), __webpack_require__(16), __webpack_require__(17), __webpack_require__(11), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                visualElement.textContent = headercelldiv ?\n\t                    gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.innerHTML;\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = findHeaderRow.rows;\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(7), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t            }\n\t            var node = this.parent.getContent().querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                tr.appendChild(td);\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column }));\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent) {\n\t            this.parent = parent;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                    var col = columns_1[_i];\n\t                    var sType = gObj.getColumnByField(col.field).type;\n\t                    if (sType !== 'date' && sType !== 'datetime') {\n\t                        query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                    }\n\t                    else {\n\t                        query.where(this.getDatePredicate(col));\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    query.group(columns[i]);\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                prevObj.operator = 'greaterthan';\n\t                nextObj.operator = 'lessthan';\n\t            }\n\t            else {\n\t                prevObj.operator = 'lessthanorequal';\n\t                nextObj.operator = 'greaterthanorequal';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            return filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.indexes.indexOf(index) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function () {\n\t                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                _this.parent.notify(events.contentReady, {});\n\t                _this.parent.trigger(events.dataBound, {});\n\t                if (_this.args) {\n\t                    var action = (_this.args.requestType || '').toLowerCase() + '-complete';\n\t                    _this.parent.notify(action, _this.args);\n\t                }\n\t                _this.parent.hideSpinner();\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var tbody = this.getTable().querySelector('tbody');\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]));\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                frag.appendChild(tr);\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                _this.appendContent(tbody, frag, args);\n\t            }, this.rafCallback);\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(17), __webpack_require__(15), __webpack_require__(16), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, undefined, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan\n\t            };\n\t            if (opt.isDataCell) {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(5), __webpack_require__(15), __webpack_require__(20), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                visibles = captionCells.cells.filter(function (cell) { return cell.visible; });\n\t                visibles = visibles.slice(groupedLen + 1, visibles.length);\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(9), __webpack_require__(5), __webpack_require__(7), __webpack_require__(15), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && group.aggregates[key] ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data));\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + (value === 'true' ? 'checked' : '') + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes)) {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            var value = column.headerText;\n\t            var headerText = this.hTxtEle.cloneNode();\n\t            headerText[column.getDomSetter()] = value;\n\t            innerDIV.appendChild(headerText);\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var value = this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(27)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing) {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol = header.querySelector('colgroup').children[index];\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t                content.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t            this.parent.getHeaderTable().style.width = tWidth;\n\t            this.parent.getContentTable().style.width = tWidth;\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"pageSizes\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit;\n\t        };\n\t        Selection.prototype.selectRow = function (index, isToggle) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n\t            if (!isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToggle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t            if (span.classList.contains('e-rowselect')) {\n\t                span.classList.remove('e-spanclicked');\n\t            }\n\t            this.clearRowSelection();\n\t            this.clearCellSelection();\n\t            this.enableSelectMultiTouch = false;\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex, isToggle) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, cellIndex.cellIndex);\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            isToggle = !isToggle ? isToggle : !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isToggle) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : gObj.getColumns().length - 1;\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex);\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            cell.focus();\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            if (target.classList.contains('e-rowcell')) {\n\t                this.target = target;\n\t                this.rowCellSelectionHandler(parseInt(target.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target.getAttribute('aria-colindex'), 10));\n\t                if (ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex, true);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.keyPressHandler = function (e) {\n\t            var checkScroll;\n\t            var preventDefault;\n\t            switch (e.action) {\n\t                case 'downArrow':\n\t                    checkScroll = true;\n\t                    this.downArrowKey();\n\t                    break;\n\t                case 'upArrow':\n\t                    checkScroll = true;\n\t                    this.upArrowKey();\n\t                    break;\n\t                case 'rightArrow':\n\t                    preventDefault = true;\n\t                    this.rightArrowKey();\n\t                    break;\n\t                case 'leftArrow':\n\t                    preventDefault = true;\n\t                    this.leftArrowKey();\n\t                    break;\n\t                case 'home':\n\t                    preventDefault = true;\n\t                    this.homeKey();\n\t                    break;\n\t                case 'end':\n\t                    preventDefault = true;\n\t                    this.endKey();\n\t                    break;\n\t                case 'ctrlHome':\n\t                    preventDefault = true;\n\t                    this.ctrlHomeKey();\n\t                    break;\n\t                case 'ctrlEnd':\n\t                    preventDefault = true;\n\t                    this.ctrlEndKey();\n\t                    break;\n\t                case 'shiftDown':\n\t                    this.shiftDownKey();\n\t                    break;\n\t                case 'shiftUp':\n\t                    this.shiftUpKey();\n\t                    break;\n\t                case 'shiftRight':\n\t                    this.shiftRightKey();\n\t                    break;\n\t                case 'shiftLeft':\n\t                    this.shiftLeftKey();\n\t                    break;\n\t                case 'escape':\n\t                    preventDefault = true;\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    preventDefault = true;\n\t                    this.ctrlPlusA();\n\t                    break;\n\t            }\n\t            if (checkScroll) {\n\t                var scrollElem = this.parent.getContent().firstElementChild;\n\t                if (this.selectedRecords.length || this.selectedRowCellIndexes.length) {\n\t                    var row = this.selectedRecords.length ? this.selectedRecords[0] :\n\t                        this.parent.getRowByIndex(this.selectedRowCellIndexes[0].rowIndex);\n\t                    var height = row.offsetHeight;\n\t                    var rowIndex = row.rowIndex;\n\t                    scrollElem.scrollTop = scrollElem.scrollTop + (e.action === 'downArrow' ? height : height * -1);\n\t                    if (this.checkVisible(row) &&\n\t                        rowIndex !== 0 && this.parent.getContentTable().querySelector('tbody').children.length !== rowIndex + 1) {\n\t                        e.preventDefault();\n\t                    }\n\t                }\n\t            }\n\t            if (preventDefault) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Selection.prototype.checkVisible = function (element) {\n\t            var st = window.scrollY;\n\t            var y = element.getBoundingClientRect().top + st;\n\t            return y + 36 < (window.innerHeight + st) - this.getRowHeight(element) && y > (st - element.offsetHeight) +\n\t                this.getRowHeight(element);\n\t        };\n\t        Selection.prototype.getRowHeight = function (element) {\n\t            return element.getBoundingClientRect().height;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.downArrowKey = function () {\n\t            this.applyDownUpKey(1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex + 1 < this.parent.getRows().length, !ej2_base_2.isUndefined(this.prevECIdxs) &&\n\t                this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length);\n\t        };\n\t        Selection.prototype.upArrowKey = function () {\n\t            this.applyDownUpKey(-1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex - 1 > -1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.rowIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (key, cond1, cond2) {\n\t            var gObj = this.parent;\n\t            if (this.isRowType() && cond1) {\n\t                this.selectRow(gObj.selectedRowIndex + key, true);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType() && cond2) {\n\t                this.selectCell({ rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: this.prevECIdxs.cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.rightArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(1, 0, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.leftArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (key1, key2, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            var rowIndex;\n\t            if (!ej2_base_2.isNullOrUndefined(this.prevECIdxs)) {\n\t                cellIndex = this.prevECIdxs.cellIndex;\n\t                rowIndex = this.prevECIdxs.rowIndex;\n\t            }\n\t            if (this.isCellType()) {\n\t                if (cond && this.prevECIdxs.cellIndex + key1 > -1 &&\n\t                    this.prevECIdxs.cellIndex + key1 < this.parent.getColumns().length) {\n\t                    cellIndex = this.prevECIdxs.cellIndex + key1;\n\t                    rowIndex = this.prevECIdxs.rowIndex;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                }\n\t                else if (this.prevECIdxs.rowIndex + key1 > -1 &&\n\t                    this.prevECIdxs.rowIndex + key1 < this.parent.getRows().length) {\n\t                    cellIndex = key2;\n\t                    rowIndex = this.prevECIdxs.rowIndex + key1;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                }\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: cellIndex })) {\n\t                    if (!((cellIndex === 0 && rowIndex === 0) ||\n\t                        (cellIndex === gObj.getColumns().length - 1 && rowIndex === gObj.getRows().length - 1))) {\n\t                        this.applyRightLeftKey(key1, key2, cond);\n\t                    }\n\t                    else {\n\t                        this.selectCell(this.preSelectedCellIndex, true);\n\t                    }\n\t                }\n\t            }\n\t            else if (this.isRowType()) {\n\t                var cellIndex_1 = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t                var rowElement = ej2_base_3.closest(this.target, 'tr');\n\t                if (cellIndex_1 + key1 > -1 && cellIndex_1 + key1 < this.parent.getColumns().length) {\n\t                    var cell = rowElement.querySelectorAll('.e-rowcell')[cellIndex_1 + key1];\n\t                    if (cell) {\n\t                        if (!cell.classList.contains('e-hide')) {\n\t                            this.addAttribute(cell);\n\t                        }\n\t                        else {\n\t                            key1 += key1;\n\t                            this.applyRightLeftKey(key1, key2, cond);\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.addAttribute(this.target);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.homeKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: 0 });\n\t        };\n\t        Selection.prototype.endKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: this.parent.getColumns().length - 1 });\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (key) {\n\t            if (this.isCellType()) {\n\t                this.selectCell(key, true);\n\t                if (this.isCellHide(key)) {\n\t                    if (key.cellIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(key.rowIndex, key.cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? this.prevRowIndex + 1 :\n\t                        (gObj.selectedRowIndex + 1 < this.parent.getRows().length ?\n\t                            gObj.selectedRowIndex + 1 : gObj.selectedRowIndex);\n\t                    if (endIndex < this.parent.getRows().length) {\n\t                        this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                        this.applyUpDown(endIndex);\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectRow(0, true);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevCIdxs)) {\n\t                    if (this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length) {\n\t                        this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex + 1, cellIndex: this.prevECIdxs.cellIndex });\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: 1, cellIndex: 0 });\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftUpKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !ej2_base_2.isUndefined(this.prevRowIndex) && !this.isSingleSel()) {\n\t                var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? (this.prevRowIndex - 1 > -1 ? (this.prevRowIndex - 1) : 0) :\n\t                    ((gObj.selectedRowIndex - 1) > -1 ? gObj.selectedRowIndex - 1 : gObj.selectedRowIndex);\n\t                this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                this.applyUpDown(endIndex);\n\t            }\n\t            if (this.isCellType() && !ej2_base_2.isUndefined(this.prevECIdxs) && (this.prevECIdxs.rowIndex - 1) > -1 && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex - 1, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftLeftKey = function () {\n\t            this.applyShiftLeftRightKey(-1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.shiftRightKey = function () {\n\t            this.applyShiftLeftRightKey(1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (key, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (cond) {\n\t                    cellIndex = { rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key };\n\t                    this.selectCellsByRange(this.prevCIdxs, {\n\t                        rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key\n\t                    });\n\t                }\n\t                else if (!this.isSingleSel()) {\n\t                    if (this.selectionSettings.cellSelectionMode === 'flow' &&\n\t                        (key > 0 ? this.prevECIdxs.rowIndex + 1 < this.parent.pageSettings.pageSize : this.prevECIdxs.rowIndex - 1 > -1)) {\n\t                        cellIndex = { rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1 };\n\t                        this.selectCellsByRange(this.prevCIdxs, {\n\t                            rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1\n\t                        });\n\t                    }\n\t                }\n\t                if (!ej2_base_2.isNullOrUndefined(cellIndex) && this.isCellHide(cellIndex) && !((cellIndex.rowIndex === 0 && cellIndex.cellIndex === 0) ||\n\t                    (cellIndex.rowIndex === gObj.getRows().length - 1 && cellIndex.cellIndex === gObj.getColumns().length))) {\n\t                    this.applyShiftLeftRightKey(key, cellIndex.cellIndex > 0);\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.ctrlHomeKey = function () {\n\t            this.applyCtrlHomeEndKey(0, 0);\n\t        };\n\t        Selection.prototype.ctrlEndKey = function () {\n\t            this.applyCtrlHomeEndKey(this.parent.getRows().length - 1, this.parent.getColumns().length - 1);\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, colIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, colIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: colIndex }, true);\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: colIndex })) {\n\t                    if (colIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                for (var i = 0, len = cells.length; i < len; i++) {\n\t                    if (isAdd) {\n\t                        ej2_base_3.classList(cells[i], args.slice(), []);\n\t                        cells[i].setAttribute('aria-selected', 'true');\n\t                    }\n\t                    else {\n\t                        ej2_base_3.classList(cells[i], [], args.slice());\n\t                        cells[i].removeAttribute('aria-selected');\n\t                    }\n\t                }\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.isCellHide = function (cellIndex) {\n\t            return !this.parent.getColumns()[cellIndex.cellIndex].visible;\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(35)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var content = this.parent.getContent().firstChild;\n\t            content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(5), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(this.footerTemplate, helper);\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(this.groupFooterTemplate, helper);\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(this.groupCaptionTemplate, helper);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(5), __webpack_require__(44), __webpack_require__(11), __webpack_require__(6), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, ej2_buttons_1, events, ej2_popups_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                        this.isDlgOpen = true;\n\t                        return;\n\t                    }\n\t                }\n\t                else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                    this.columnChooserSearch('');\n\t                    this.removeCancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                    this.dlgObj.hide();\n\t                    this.isDlgOpen = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(ej2_base_2.closest(target, '.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + ej2_base_2.closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (this.parent.element.classList.contains('e-device')) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + ej2_base_2.closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t                this.wireEvents();\n\t            }\n\t            else {\n\t                this.unWireEvents();\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t            util_1.changeButtonType(this.dlgObj.element);\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', function () {\n\t                ccsearchele.parentElement.classList.add('e-input-focus');\n\t            });\n\t            ccsearchele.addEventListener('blur', function () {\n\t                ccsearchele.parentElement.classList.remove('e-input-focus');\n\t            });\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index].replace('e-cc', '');\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.unWireEvents();\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (e) {\n\t            var targetEle = e.event.target;\n\t            var uncheckColumn = targetEle.id;\n\t            if (e.checked) {\n\t                if (this.hideColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.showColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.showColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.hideColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var column = this.parent.getColumnByUid(element.id.replace('e-cc', ''));\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                var cclabe = ej2_base_1.createElement('label', { className: 'e-cc' });\n\t                var cccheckboxlist = ej2_base_1.createElement('input', {\n\t                    className: 'e-cc e-cc-chbox ',\n\t                    id: 'e-cc' + column.uid, attrs: { type: 'checkbox' }\n\t                });\n\t                cclabe.appendChild(cccheckboxlist);\n\t                hideColState = this.hideColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                checkBoxObj = new ej2_buttons_1.CheckBox({ label: column.headerText, checked: true, change: this.checkstatecolumn.bind(this) });\n\t                if ((column.visible && !hideColState) || showColState) {\n\t                    checkBoxObj.checked = true;\n\t                }\n\t                else {\n\t                    checkBoxObj.checked = false;\n\t                }\n\t                checkBoxObj.appendTo(cccheckboxlist);\n\t                cclist.appendChild(cclabe);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t            var chele = this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0];\n\t            chele.focus();\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_44__;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(18), __webpack_require__(47), __webpack_require__(48), __webpack_require__(37), __webpack_require__(55), __webpack_require__(38), __webpack_require__(40), __webpack_require__(57), __webpack_require__(58), __webpack_require__(59), __webpack_require__(60), __webpack_require__(41), __webpack_require__(46), __webpack_require__(61), __webpack_require__(63), __webpack_require__(66), __webpack_require__(70), __webpack_require__(82), __webpack_require__(80), __webpack_require__(81), __webpack_require__(83), __webpack_require__(43), __webpack_require__(84), __webpack_require__(87), __webpack_require__(86)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            detailCell.appendChild(gridElem);\n\t                            grid.appendTo(gridElem);\n\t                        }\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false) {\n\t                return;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = this.parent.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler')) {\n\t                var gObj = this.parent;\n\t                var field = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid')).field;\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (!e.shiftKey) {\n\t                    this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t                }\n\t                else {\n\t                    this.removeSortColumn(field);\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.showPopUp(e);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target)) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(49), __webpack_require__(52), __webpack_require__(54), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t            var links = numericContainer.querySelectorAll('a');\n\t            for (var i = 0; i < links.length; i++) {\n\t                if (this.parent.getContentTable()) {\n\t                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                }\n\t            }\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t            classList.forEach(function (value) {\n\t                var element = _this.element.querySelector(value);\n\t                if (_this.parent.getContentTable()) {\n\t                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                }\n\t            });\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.isForceCancel = true;\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerObj.destroy();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            this.initLocalization();\n\t            this.updateRTL();\n\t            this.totalRecordsCount = this.totalRecordsCount || 0;\n\t            this.renderFirstPrevDivForDevice();\n\t            this.containerModule.render();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.render();\n\t            }\n\t            this.renderNextLastDivForDevice();\n\t            if (this.checkpagesizes()) {\n\t                this.pagerdropdownModule.render();\n\t            }\n\t            this.addAriaLabel();\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.render();\n\t            }\n\t            this.refresh();\n\t            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['enableExternalMessage', 'enablePagerMessage', 'currentPage', 'enableQueryString', 'pageSizes',\n\t                'pageSize', 'pageCount', 'totalRecordsCount', 'externalMessage', 'customText', 'click', 'created', 'dropDownChanged'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            this.updateRTL();\n\t            this.containerModule.refresh();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.refresh();\n\t            }\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"dropDownChanged\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            pagerObj.totalPages = (pagerObj.totalRecordsCount % pagerObj.pageSize === 0) ? (pagerObj.totalRecordsCount / pagerObj.pageSize) :\n\t                (parseInt((pagerObj.totalRecordsCount / pagerObj.pageSize).toString(), 10) + 1);\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(53)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(11), __webpack_require__(15), __webpack_require__(14), __webpack_require__(16), __webpack_require__(17), __webpack_require__(56)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_base_3, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            if (gObj.columns.length) {\n\t                var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter);\n\t                var row = void 0;\n\t                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                this.l10n = this.serviceLocator.getService('localization');\n\t                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                rowRenderer.element = ej2_base_3.createElement('tr', { className: 'e-filterbar' });\n\t                row = this.generateRow();\n\t                row.data = this.values;\n\t                this.element = rowRenderer.render(row, gObj.getColumns());\n\t                this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                var detail = this.element.querySelector('.e-detailheadercell');\n\t                if (detail) {\n\t                    detail.className = 'e-filterbarcell e-mastercell';\n\t                }\n\t                this.wireEvents();\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            ej2_base_3.remove(this.element);\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            filterCell = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            if (!ej2_base_2.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = filterValue.toString();\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (!(isClearFilterBar === false)) {\n\t                        this.element.querySelector('#' + cols[i].field + '_filterBarcell').value = '';\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    this.parent.getColumnHeaderByField(field).removeAttribute('aria-filtered');\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (ej2_base_3.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            var gObj = this.parent;\n\t            var columns = this.filterSettings.columns;\n\t            var column;\n\t            if (!this.filterSettings.showFilterBarStatus) {\n\t                return;\n\t            }\n\t            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                this.filterStatusMsg = '';\n\t                for (var index = 0; index < columns.length; index++) {\n\t                    column = gObj.getColumnByField(columns[index].field);\n\t                    if (index) {\n\t                        this.filterStatusMsg += ' && ';\n\t                    }\n\t                    this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                }\n\t            }\n\t            if (gObj.allowPaging) {\n\t                gObj.updateExternalMessage(this.filterStatusMsg);\n\t            }\n\t            this.filterStatusMsg = '';\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_2.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_2.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                node.classList.add('e-fltrtemp');\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-fltrtempdiv'\n\t                });\n\t                if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        attrs: { type: 'search', title: column.headerText }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t                else {\n\t                    var args = { column: column };\n\t                    var temp = column.filterBarTemplate.create;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_1.getValue(temp, window);\n\t                    }\n\t                    input = temp(args);\n\t                    if (typeof input === 'string') {\n\t                        var div = ej2_base_2.createElement('div');\n\t                        div.innerHTML = input;\n\t                        input = div.firstChild;\n\t                    }\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        title: column.headerText,\n\t                        id: column.field + '_filterBarcell',\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-filterdiv e-fltrinputdiv'\n\t                });\n\t                input = ej2_base_2.createElement('input', {\n\t                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                    attrs: {\n\t                        type: 'search', title: column.headerText + cell.attributes.title,\n\t                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                    }\n\t                });\n\t                innerDIV.appendChild(input);\n\t                innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                    attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                }));\n\t            }\n\t            if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                input.setAttribute('disabled', 'true');\n\t                input.classList.add('e-disable');\n\t            }\n\t            if (!column.visible) {\n\t                node.classList.add('e-hide');\n\t            }\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                var templateRead = column.filterBarTemplate.read;\n\t                var templateWrite = column.filterBarTemplate.write;\n\t                var args = { element: input, column: column };\n\t                if (typeof templateRead === 'string') {\n\t                    templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                }\n\t                if (typeof templateWrite === 'string') {\n\t                    templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                }\n\t                templateWrite.call(this, args);\n\t            }\n\t            this.appendHtml(node, innerDIV);\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(35), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (!(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.updateColGroup(this.column);\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.updateColGroup = function (column) {\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.uid === column.uid) {\n\t                    col.width = column.width;\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderTable().querySelectorAll('tr'));\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function () {\n\t            var ele = this.parent.getContent().firstChild;\n\t            return ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    !e.sender.target.classList.contains('e-selectionbackground')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    trgt.className = 'e-recordplusexpand';\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    trgt.className = 'e-recordpluscollapse';\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    toExpand[i].className = 'e-recordpluscollapse';\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.headerDrop = function (e) {\n\t            if (!e.uid) {\n\t                return;\n\t            }\n\t            var column = this.parent.getColumnByUid(e.uid);\n\t            this.ungroupColumn(column.field);\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-grouptext', innerHTML: column.headerText,\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                            ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                        }\n\t                        if (!isRemove) {\n\t                            headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                className: 'e-grptogglebtn e-icons ' +\n\t                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                            }));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(62), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    this.element = util_1.templateCompiler(this.parent.toolbarTemplate)()[1];\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                typeof (item) === 'string' ? items.push(this.getItemObject(item)) : items.push(this.getItem(item));\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            if (item) {\n\t                ej2_base_1.extend(item, item, itemObject);\n\t            }\n\t            else {\n\t                item = itemObject;\n\t            }\n\t            return item;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(11), __webpack_require__(64), __webpack_require__(65), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(19), __webpack_require__(14), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing) {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var fn = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, fn(data[column.columnName]));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(11), __webpack_require__(15), __webpack_require__(67), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(11), __webpack_require__(15), __webpack_require__(19), __webpack_require__(13), __webpack_require__(68), __webpack_require__(69)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if (currentFirst.isDataRow || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(73), __webpack_require__(77), __webpack_require__(78), __webpack_require__(71), __webpack_require__(79), __webpack_require__(80), __webpack_require__(82), __webpack_require__(83), __webpack_require__(6), __webpack_require__(7), __webpack_require__(6), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_popups_2, ej2_inputs_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell,\n\t                'numericedit': numeric_edit_cell_1.NumericEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'default': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'default'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !ej2_base_4.isNullOrUndefined(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.element.querySelectorAll('td.e-tooltip'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                elem.ej2_instances[0].destroy();\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            util_1.changeButtonType(obj.element);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.parent.addEventListener(events.actionBegin, this.onActionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t            this.parent.removeEventListener(events.actionBegin, this.onActionBegin);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            if (e.requestType !== 'add' && e.requestType !== 'beginEdit' && e.requestType !== 'delete') {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && this.formObj && !this.formObj.isDestroyed && !e.cancel) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.destroyToolTip();\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.destroyToolTip();\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.destroyForm();\n\t            this.removeEventListener();\n\t            this.dialogObj.destroy();\n\t            this.alertDObj.destroy();\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var td = util_1.parentsUntil(inputElement, 'e-rowcell');\n\t                if (!td.ej2_instances || !td.ej2_instances.length) {\n\t                    var tooltip = new ej2_popups_2.Tooltip({\n\t                        opensOn: 'custom', content: error, position: 'bottom center', cssClass: 'e-griderror',\n\t                        animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n\t                    });\n\t                    tooltip.appendTo(td);\n\t                    tooltip.open(td);\n\t                }\n\t                else {\n\t                    td.ej2_instances[0].content = error;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var elem = util_1.parentsUntil(document.getElementById(this.parent.element.id + args.inputName), 'e-rowcell');\n\t                if (elem && elem.ej2_instances && elem.ej2_instances.length) {\n\t                    var tObj = elem.ej2_instances[0];\n\t                    if (args.status === 'failure') {\n\t                        tObj.open(util_1.parentsUntil(args.element, 'e-rowcell'));\n\t                    }\n\t                    else {\n\t                        tObj.close();\n\t                    }\n\t                    tObj.refresh();\n\t                }\n\t            }\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(72), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_72__;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.edit.write({ rowData: args.rowData, element: cell, column: col, requestType: args.requestType });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem) {\n\t            elem.focus();\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if (col.textAlign === 'right') {\n\t                    input.classList.add('e-ralign');\n\t                }\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var td_1 = ej2_base_1.createElement('td', {\n\t                    className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : '') }\n\t                });\n\t                td_1.appendChild(elements[col.uid]);\n\t                if (col.editType === 'booleanedit') {\n\t                    td_1.classList.add('e-boolcell');\n\t                }\n\t                tr.appendChild(td_1);\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(5), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true,\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t            util_1.changeButtonType(this.dialogObj.element);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                if (cols[i].editType === 'booleanedit') {\n\t                    var elem = dataCell.appendChild(elements[cols[i].uid]);\n\t                    var lbl = ej2_base_1.createElement('label', { className: 'e-noselect', attrs: { for: elem.id, style: ej2_base_1.Browser.isDevice ? '' : 'vertical-align: top;' } });\n\t                    lbl.innerHTML = cols[i].headerText;\n\t                    dataCell.appendChild(elem);\n\t                    dataCell.appendChild(lbl);\n\t                }\n\t                else {\n\t                    dataCell.appendChild(elements[cols[i].uid]);\n\t                }\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-boolcell', attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t            if (!util_1.isEditable(args.column, args.requestType, args.element)) {\n\t                input.setAttribute('disabled', 'true');\n\t            }\n\t            if (args.value) {\n\t                input.checked = true;\n\t            }\n\t            return input;\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            args.element.style.width = 'auto';\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(53), __webpack_require__(8), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(72), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    this.parent.selectRow(0);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.showSpinner();\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.parent.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            this.parent.element.focus();\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.element.focus();\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'add', type: events.actionBegin, data: data\n\t                });\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            gObj.isEdit = false;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14), __webpack_require__(23), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_renderer_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBound);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = e.target;\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if ((util_1.parentsUntil(target, 'e-rowcell')) && tr) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(util_1.parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.keyPressHandler = function (e) {\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                this.saveCell();\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.action) {\n\t                    case 'tab':\n\t                        if (isEdit) {\n\t                            this.editNextCell();\n\t                        }\n\t                        break;\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editPrevCell();\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                        e.preventDefault();\n\t                        if (isEdit && this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                            this.editCell(this.cellDetails.rowIndex + 1, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t                        break;\n\t                }\n\t                if (this.parent.isEdit || !(this.cellDetails.cellIndex === 0 && this.cellDetails.rowIndex === 0) ||\n\t                    !(this.cellDetails.rowIndex === this.parent.getDataRows().length &&\n\t                        this.cellDetails.cellIndex === this.parent.columns.length - 1)) {\n\t                    e.preventDefault();\n\t                }\n\t            }\n\t            this.reFocusOnError(e);\n\t        };\n\t        BatchEdit.prototype.reFocusOnError = function (e) {\n\t            if (this.validateFormObj() && (e.action === 'tab' || e.action === 'shiftTab')) {\n\t                e.target.focus();\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editNextCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findNextEditableCell(this.cellDetails.cellIndex + 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                this.cellDetails.rowIndex++;\n\t                this.cellDetails.cellIndex = this.findNextEditableCell(0, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editPrevCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findPrevEditableCell(this.cellDetails.cellIndex - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex - 1 > -1) {\n\t                this.cellDetails.rowIndex--;\n\t                this.cellDetails.cellIndex = this.findPrevEditableCell(this.parent.columns.length - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = gObj.contentModule.getRows();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.showSpinner();\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.contentModule.getRows();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.contentModule.getRows();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.contentModule.getRows().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            gObj.element.focus();\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.findPrevEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            for (var i = columnIndex; i > -1; i--) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var args = {\n\t                    cell: row.cells[this.getCellIdx(col.uid)], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey,\n\t                };\n\t                this.setCellIdx(args.cell);\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.clearSelection();\n\t                gObj.selectRow(this.cellDetails.rowIndex);\n\t                gObj.isEdit = true;\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_2.classList(tr, [], ['e-editedrow', 'e-batchrow']);\n\t            args.cell.classList.remove('e-editedbatchcell');\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        BatchEdit.prototype.valComplete = function (args) {\n\t            var edit = this.parent.editModule;\n\t            edit.validationComplete(args);\n\t        };\n\t        BatchEdit.prototype.customPlacement = function (inputElement, error) {\n\t            var edit = this.parent.editModule;\n\t            edit.valErrorPlacement(inputElement, error);\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(85), __webpack_require__(5), __webpack_require__(18), __webpack_require__(86), __webpack_require__(22), __webpack_require__(15), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.parent = parent;\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            if (gObj.element !== null && gObj.element.id === '') {\n\t                gObj.element.id = new Date().toISOString();\n\t            }\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.theme = 'material';\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            this.data = new data_1.Data(gObj);\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            gObj.trigger(events.beforeExcelExport);\n\t            return this.processRecords(grid, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = new export_helper_1.ExportHelper(gObj).getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentview') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var args = {\n\t                            column: headerRow.columns[c], value: value, style: undefined\n\t                        };\n\t                        gObj.trigger(events.excelQueryCellInfo, args);\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = args.value;\n\t                        if (args.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], args.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#666666';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#33330F' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 12;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.backColor = '#F6F6F6';\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.backColor = '#F6F6F6';\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#333333';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#DDDDDD' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: col.width });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_85__;\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(15), __webpack_require__(5), __webpack_require__(16), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.valueFormatter.getFormatFunction(format)(args.value);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(86), __webpack_require__(18), __webpack_require__(22), __webpack_require__(5), __webpack_require__(15), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_1, ej2_pdf_2, ej2_pdf_3, ej2_pdf_4, ej2_pdf_5, ej2_pdf_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            this.data = new data_1.Data(parent);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = (new export_helper_1.ExportHelper(this.parent)).getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(255, 255, 255)) };\n\t                case 'fabric':\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(246, 246, 246)) };\n\t                default:\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_1.PdfBorders();\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(221, 221, 221));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)) };\n\t                case 'fabric':\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(224, 224, 224));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 9), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0.54)) };\n\t                default:\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(234, 234, 234));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? ej2_pdf_6.PdfPageOrientation.Landscape : ej2_pdf_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentview') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pageNumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === '' || content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === '' || content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === '' || content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = (gridColumns[i].width * 0.75);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                case 'fabric':\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                default:\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var args = {\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                cell.style.textPen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(args.style.textPenColor.r, args.style.textPenColor.g, args.style.textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'LowerLatin':\n\t                    return 2;\n\t                case 'LowerRoman':\n\t                    return 3;\n\t                case 'UpperLatin':\n\t                    return 4;\n\t                case 'UpperRoman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_3.PdfStringFormat(ej2_pdf_3.PdfTextAlignment.Left, ej2_pdf_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'Letter':\n\t                    return new ej2_pdf_6.SizeF(612, 792);\n\t                case 'Note':\n\t                    return new ej2_pdf_6.SizeF(540, 720);\n\t                case 'Legal':\n\t                    return new ej2_pdf_6.SizeF(612, 1008);\n\t                case 'A0':\n\t                    return new ej2_pdf_6.SizeF(2380, 3368);\n\t                case 'A1':\n\t                    return new ej2_pdf_6.SizeF(1684, 2380);\n\t                case 'A2':\n\t                    return new ej2_pdf_6.SizeF(1190, 1684);\n\t                case 'A3':\n\t                    return new ej2_pdf_6.SizeF(842, 1190);\n\t                case 'A5':\n\t                    return new ej2_pdf_6.SizeF(421, 595);\n\t                case 'A6':\n\t                    return new ej2_pdf_6.SizeF(297, 421);\n\t                case 'A7':\n\t                    return new ej2_pdf_6.SizeF(210, 297);\n\t                case 'A8':\n\t                    return new ej2_pdf_6.SizeF(148, 210);\n\t                case 'A9':\n\t                    return new ej2_pdf_6.SizeF(105, 148);\n\t                case 'B0':\n\t                    return new ej2_pdf_6.SizeF(2836, 4008);\n\t                case 'B1':\n\t                    return new ej2_pdf_6.SizeF(2004, 2836);\n\t                case 'B2':\n\t                    return new ej2_pdf_6.SizeF(1418, 2004);\n\t                case 'B3':\n\t                    return new ej2_pdf_6.SizeF(1002, 1418);\n\t                case 'B4':\n\t                    return new ej2_pdf_6.SizeF(709, 1002);\n\t                case 'B5':\n\t                    return new ej2_pdf_6.SizeF(501, 709);\n\t                case 'ArchA':\n\t                    return new ej2_pdf_6.SizeF(648, 864);\n\t                case 'ArchB':\n\t                    return new ej2_pdf_6.SizeF(864, 1296);\n\t                case 'ArchC':\n\t                    return new ej2_pdf_6.SizeF(1296, 1728);\n\t                case 'ArchD':\n\t                    return new ej2_pdf_6.SizeF(1728, 2592);\n\t                case 'ArchE':\n\t                    return new ej2_pdf_6.SizeF(2592, 3456);\n\t                case 'Flsa':\n\t                    return new ej2_pdf_6.SizeF(612, 936);\n\t                case 'HalfLetter':\n\t                    return new ej2_pdf_6.SizeF(396, 612);\n\t                case 'Letter11x17':\n\t                    return new ej2_pdf_6.SizeF(792, 1224);\n\t                case 'Ledger':\n\t                    return new ej2_pdf_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'Dash':\n\t                    return 1;\n\t                case 'Dot':\n\t                    return 2;\n\t                case 'DashDot':\n\t                    return 3;\n\t                case 'DashDotDot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(13), __webpack_require__(19), __webpack_require__(14), __webpack_require__(23), __webpack_require__(24), __webpack_require__(56), __webpack_require__(26), __webpack_require__(12), __webpack_require__(56), __webpack_require__(27), __webpack_require__(28), __webpack_require__(75), __webpack_require__(76), __webpack_require__(74), __webpack_require__(73), __webpack_require__(77), __webpack_require__(79), __webpack_require__(78), __webpack_require__(71)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(33), __webpack_require__(4), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(49), __webpack_require__(54), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzMDEzMWIyYmIzNTI3Njc4NGJlMyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3IuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS91dGlsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS9jb25zdGFudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2VudW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3Jvdy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2FyaWEtc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1pbmRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9wYWdlLXNldHRpbmdzLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2VsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2VhcmNoLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2hvdy1oaWRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcHJpbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2FnZ3JlZ2F0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcGFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1kcm9wZG93bi5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BkZi1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O2lFQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDUkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUNWRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0EsK0JBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0MsZ0JBQWdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQzkrQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3JCRCxnRDs7Ozs7O0FDQUEsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQSwrQ0FBOEMsb0JBQW9CO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QixxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsY0FBYyxpQkFBaUIsbUJBQW1CLGFBQWE7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxxREFBcUQ7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QixpQkFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDLHdCQUF3QjtBQUN2RTtBQUNBLDRDQUEyQyxpQkFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztBQ3ZURCxnRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDaEREO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNqREQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ3ZIRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLE1BQU0s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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELHlFQUF5RTtBQUMzSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFxRCxTQUFTO0FBQzlEO0FBQ0EsMkRBQTBELFVBQVU7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsU0FBUztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFnRSw4QkFBOEI7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQywyQ0FBMkM7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsbUZBQWtGLDJDQUEyQyxvQkFBb0IsMkNBQTJDO0FBQzVMO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywyQ0FBMkM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUF5Qyw0QkFBNEIsR0FBRyw2RkFBNkY7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUE4RCxrQkFBa0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELFFBQVE7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1E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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw0QkFBNEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0Q7QUFDdEQ7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHdCQUF3QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxvQ0FBb0M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FB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QW1ELGdCQUFnQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixFQUFFO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLDJCQUEyQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QywyQkFBMkI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBLGdDQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQzc0QkQsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O2lFQ1BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDekJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDVkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQyIsImZpbGUiOiJlajItZ3JpZHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcGRmXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcGRmXCJdKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81M19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzYyX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84NV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzg4X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzAxMzFiMmJiMzUyNzY3ODRiZTMiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2dyaWQvaW5kZXhcIiwgXCIuL3BhZ2VyL2luZGV4XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaW5kZXhfMSwgaW5kZXhfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaW5kZXhfMSk7XG4gICAgX19leHBvcnQoaW5kZXhfMik7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vY29tbW9uXCIsIFwiLi9hY3Rpb25zXCIsIFwiLi9tb2RlbHNcIiwgXCIuL3JlbmRlcmVyXCIsIFwiLi9zZXJ2aWNlc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNvbW1vbl8xLCBhY3Rpb25zXzEsIG1vZGVsc18xLCByZW5kZXJlcl8xLCBzZXJ2aWNlc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChjb21tb25fMSk7XG4gICAgX19leHBvcnQoYWN0aW9uc18xKTtcbiAgICBfX2V4cG9ydChtb2RlbHNfMSk7XG4gICAgX19leHBvcnQocmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoc2VydmljZXNfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9iYXNlL2dyaWRcIiwgXCIuL2Jhc2UvZW51bVwiLCBcIi4vYmFzZS91dGlsXCIsIFwiLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZ3JpZF8xLCBlbnVtXzEsIHV0aWxfMSwgY29uc3RhbnRfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoZ3JpZF8xKTtcbiAgICBfX2V4cG9ydChlbnVtXzEpO1xuICAgIF9fZXhwb3J0KHV0aWxfMSk7XG4gICAgX19leHBvcnQoY29uc3RhbnRfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvY29tbW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcmVuZGVyXCIsIFwiLi9lbnVtXCIsIFwiLi4vc2VydmljZXMvY2VsbC1yZW5kZXItZmFjdG9yeVwiLCBcIi4uL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvclwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiLCBcIi4uL3NlcnZpY2VzL3JlbmRlcmVyLWZhY3RvcnlcIiwgXCIuLi9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyXCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCIsIFwiLi4vbW9kZWxzL3BhZ2Utc2V0dGluZ3NcIiwgXCIuLi9hY3Rpb25zL3NlbGVjdGlvblwiLCBcIi4uL2FjdGlvbnMvc2VhcmNoXCIsIFwiLi4vYWN0aW9ucy9zaG93LWhpZGVcIiwgXCIuLi9hY3Rpb25zL3Njcm9sbFwiLCBcIi4uL2FjdGlvbnMvcHJpbnRcIiwgXCIuLi9tb2RlbHMvYWdncmVnYXRlXCIsIFwiLi4vYWN0aW9ucy9jb2x1bW4tY2hvb3NlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBldmVudHMsIHJlbmRlcl8xLCBlbnVtXzEsIGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSwgc2VydmljZV9sb2NhdG9yXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCByZW5kZXJlcl9mYWN0b3J5XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSwgYXJpYV9zZXJ2aWNlXzEsIHBhZ2Vfc2V0dGluZ3NfMSwgc2VsZWN0aW9uXzEsIHNlYXJjaF8xLCBzaG93X2hpZGVfMSwgc2Nyb2xsXzEsIHByaW50XzEsIGFnZ3JlZ2F0ZV8xLCBjb2x1bW5fY2hvb3Nlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTb3J0RGVzY3JpcHRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTb3J0RGVzY3JpcHRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU29ydERlc2NyaXB0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNvcnREZXNjcmlwdG9yO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFNvcnREZXNjcmlwdG9yLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBTb3J0RGVzY3JpcHRvci5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Tb3J0RGVzY3JpcHRvciA9IFNvcnREZXNjcmlwdG9yO1xuICAgIHZhciBTb3J0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU29ydFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTb3J0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNvcnRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIFNvcnREZXNjcmlwdG9yKVxuICAgIF0sIFNvcnRTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU29ydFNldHRpbmdzID0gU29ydFNldHRpbmdzO1xuICAgIHZhciBQcmVkaWNhdGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUHJlZGljYXRlLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQcmVkaWNhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByZWRpY2F0ZTtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcIm1hdGNoQ2FzZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInByZWRpY2F0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHt9KVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiYWN0dWFsRmlsdGVyVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7fSlcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImFjdHVhbE9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5QcmVkaWNhdGUgPSBQcmVkaWNhdGU7XG4gICAgdmFyIEZpbHRlclNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpbHRlclNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGaWx0ZXJTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmlsdGVyU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBQcmVkaWNhdGUpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnZmlsdGVyYmFyJylcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dGaWx0ZXJCYXJTdGF0dXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxNTAwKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJpbW1lZGlhdGVNb2RlRGVsYXlcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkZpbHRlclNldHRpbmdzID0gRmlsdGVyU2V0dGluZ3M7XG4gICAgdmFyIFNlbGVjdGlvblNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNlbGVjdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZWxlY3Rpb25TZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgncm93JylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdmbG93JylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGlvbk1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnc2luZ2xlJylcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU2VsZWN0aW9uU2V0dGluZ3MgPSBTZWxlY3Rpb25TZXR0aW5ncztcbiAgICB2YXIgU2VhcmNoU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU2VhcmNoU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTZWFyY2hTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJmaWVsZHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnJylcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwia2V5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2NvbnRhaW5zJylcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJpZ25vcmVDYXNlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5TZWFyY2hTZXR0aW5ncyA9IFNlYXJjaFNldHRpbmdzO1xuICAgIHZhciBSb3dEcm9wU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUm93RHJvcFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSb3dEcm9wU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJvd0Ryb3BTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBSb3dEcm9wU2V0dGluZ3MucHJvdG90eXBlLCBcInRhcmdldElEXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Sb3dEcm9wU2V0dGluZ3MgPSBSb3dEcm9wU2V0dGluZ3M7XG4gICAgdmFyIFRleHRXcmFwU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVGV4dFdyYXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGV4dFdyYXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVGV4dFdyYXBTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdib3RoJylcbiAgICBdLCBUZXh0V3JhcFNldHRpbmdzLnByb3RvdHlwZSwgXCJ3cmFwTW9kZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuVGV4dFdyYXBTZXR0aW5ncyA9IFRleHRXcmFwU2V0dGluZ3M7XG4gICAgdmFyIEdyb3VwU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR3JvdXBTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0Ryb3BBcmVhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd1RvZ2dsZUJ1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dHcm91cGVkQ29sdW1uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93VW5ncm91cEJ1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcImRpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Hcm91cFNldHRpbmdzID0gR3JvdXBTZXR0aW5ncztcbiAgICB2YXIgRWRpdFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEVkaXRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRWRpdFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBFZGl0U2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93QWRkaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0VkaXRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RGVsZXRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnbm9ybWFsJylcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dFZGl0T25EYmxDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93Q29uZmlybURpYWxvZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2dcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkVkaXRTZXR0aW5ncyA9IEVkaXRTZXR0aW5ncztcbiAgICB2YXIgR3JpZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcmlkLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcmlkKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWwgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMuc29ydGVkQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaW5WaWV3SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMubWVkaWFDb2wgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmlzTWVkaWFRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuaXNJbml0aWFsTG9hZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZmlsdGVyT3BlcmF0b3JzID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAnY29udGFpbnMnLCBlbmRzV2l0aDogJ2VuZHN3aXRoJywgZXF1YWw6ICdlcXVhbCcsIGdyZWF0ZXJUaGFuOiAnZ3JlYXRlcnRoYW4nLCBncmVhdGVyVGhhbk9yRXF1YWw6ICdncmVhdGVydGhhbm9yZXF1YWwnLFxuICAgICAgICAgICAgICAgIGxlc3NUaGFuOiAnbGVzc3RoYW4nLCBsZXNzVGhhbk9yRXF1YWw6ICdsZXNzdGhhbm9yZXF1YWwnLCBub3RFcXVhbDogJ25vdGVxdWFsJywgc3RhcnRzV2l0aDogJ3N0YXJ0c3dpdGgnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuZGVmYXVsdExvY2FsZSA9IHtcbiAgICAgICAgICAgICAgICBFbXB0eVJlY29yZDogJ05vIHJlY29yZHMgdG8gZGlzcGxheScsXG4gICAgICAgICAgICAgICAgVHJ1ZTogJ3RydWUnLFxuICAgICAgICAgICAgICAgIEZhbHNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgICAgIEludmFsaWRGaWx0ZXJNZXNzYWdlOiAnSW52YWxpZCBGaWx0ZXIgRGF0YScsXG4gICAgICAgICAgICAgICAgR3JvdXBEcm9wQXJlYTogJ0RyYWcgYSBjb2x1bW4gaGVhZGVyIGhlcmUgdG8gZ3JvdXAgaXRzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgVW5Hcm91cDogJ0NsaWNrIGhlcmUgdG8gdW5ncm91cCcsXG4gICAgICAgICAgICAgICAgR3JvdXBEaXNhYmxlOiAnR3JvdXBpbmcgaXMgZGlzYWJsZWQgZm9yIHRoaXMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBGaWx0ZXJiYXJUaXRsZTogJ1xcJ3MgZmlsdGVyIGJhciBjZWxsJyxcbiAgICAgICAgICAgICAgICBFbXB0eURhdGFTb3VyY2VFcnJvcjogJ0RhdGFTb3VyY2UgbXVzdCBub3QgYmUgZW1wdHkgYXQgaW5pdGlhbCBsb2FkIHNpbmNlIGNvbHVtbnMgYXJlIGdlbmVyYXRlZCBmcm9tIGRhdGFTb3VyY2UgaW4gQXV0b0dlbmVyYXRlIENvbHVtbiBHcmlkJyxcbiAgICAgICAgICAgICAgICBBZGQ6ICdBZGQnLFxuICAgICAgICAgICAgICAgIEVkaXQ6ICdFZGl0JyxcbiAgICAgICAgICAgICAgICBDYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIFVwZGF0ZTogJ1VwZGF0ZScsXG4gICAgICAgICAgICAgICAgRGVsZXRlOiAnRGVsZXRlJyxcbiAgICAgICAgICAgICAgICBQcmludDogJ1ByaW50JyxcbiAgICAgICAgICAgICAgICBQZGZleHBvcnQ6ICdQREYgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBFeGNlbGV4cG9ydDogJ0V4Y2VsIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgV29yZGV4cG9ydDogJ1dvcmQgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBDc3ZleHBvcnQ6ICdDU1YgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBTZWFyY2g6ICdTZWFyY2gnLFxuICAgICAgICAgICAgICAgIEl0ZW06ICdpdGVtJyxcbiAgICAgICAgICAgICAgICBJdGVtczogJ2l0ZW1zJyxcbiAgICAgICAgICAgICAgICBFZGl0T3BlcmF0aW9uQWxlcnQ6ICdObyByZWNvcmRzIHNlbGVjdGVkIGZvciBlZGl0IG9wZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgRGVsZXRlT3BlcmF0aW9uQWxlcnQ6ICdObyByZWNvcmRzIHNlbGVjdGVkIGZvciBkZWxldGUgb3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBTYXZlQnV0dG9uOiAnU2F2ZScsXG4gICAgICAgICAgICAgICAgT0tCdXR0b246ICdPSycsXG4gICAgICAgICAgICAgICAgQ2FuY2VsQnV0dG9uOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBFZGl0Rm9ybVRpdGxlOiAnRGV0YWlscyBvZiAnLFxuICAgICAgICAgICAgICAgIEFkZEZvcm1UaXRsZTogJ0FkZCBOZXcgUmVjb3JkJyxcbiAgICAgICAgICAgICAgICBCYXRjaFNhdmVDb25maXJtOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHNhdmUgY2hhbmdlcz8nLFxuICAgICAgICAgICAgICAgIEJhdGNoU2F2ZUxvc3RDaGFuZ2VzOiAnVW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgbG9zdC4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNvbnRpbnVlPycsXG4gICAgICAgICAgICAgICAgQ29uZmlybURlbGV0ZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBEZWxldGUgUmVjb3JkPycsXG4gICAgICAgICAgICAgICAgQ2FuY2VsRWRpdDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBDYW5jZWwgdGhlIGNoYW5nZXM/JyxcbiAgICAgICAgICAgICAgICBDaG9vc2VDb2x1bW5zOiAnQ2hvb3NlIENvbHVtbicsXG4gICAgICAgICAgICAgICAgU2VhcmNoQ29sdW1uczogJ3NlYXJjaCBjb2x1bW5zJyxcbiAgICAgICAgICAgICAgICBNYXRjaHM6ICdObyBNYXRjaGVzIEZvdW5kJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgZG93bkFycm93OiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICB1cEFycm93OiAndXBhcnJvdycsXG4gICAgICAgICAgICAgICAgcmlnaHRBcnJvdzogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIGxlZnRBcnJvdzogJ2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnREb3duOiAnc2hpZnQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFVwOiAnc2hpZnQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRSaWdodDogJ3NoaWZ0K3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0TGVmdDogJ3NoaWZ0K2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgaG9tZTogJ2hvbWUnLFxuICAgICAgICAgICAgICAgIGVuZDogJ2VuZCcsXG4gICAgICAgICAgICAgICAgZXNjYXBlOiAnZXNjYXBlJyxcbiAgICAgICAgICAgICAgICBjdHJsSG9tZTogJ2N0cmwraG9tZScsXG4gICAgICAgICAgICAgICAgY3RybEVuZDogJ2N0cmwrZW5kJyxcbiAgICAgICAgICAgICAgICBwYWdlVXA6ICdwYWdldXAnLFxuICAgICAgICAgICAgICAgIHBhZ2VEb3duOiAncGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGN0cmxBbHRQYWdlVXA6ICdjdHJsK2FsdCtwYWdldXAnLFxuICAgICAgICAgICAgICAgIGN0cmxBbHRQYWdlRG93bjogJ2N0cmwrYWx0K3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBhbHRQYWdlVXA6ICdhbHQrcGFnZXVwJyxcbiAgICAgICAgICAgICAgICBhbHRQYWdlRG93bjogJ2FsdCtwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgYWx0RG93bkFycm93OiAnYWx0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgYWx0VXBBcnJvdzogJ2FsdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsRG93bkFycm93OiAnY3RybCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxVcEFycm93OiAnY3RybCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsUGx1c0E6ICdjdHJsK0EnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzUDogJ2N0cmwrUCcsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiAnaW5zZXJ0JyxcbiAgICAgICAgICAgICAgICBkZWxldGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgIGYyOiAnZjInLFxuICAgICAgICAgICAgICAgIGVudGVyOiAnZW50ZXInLFxuICAgICAgICAgICAgICAgIHRhYjogJ3RhYicsXG4gICAgICAgICAgICAgICAgc2hpZnRUYWI6ICdzaGlmdCt0YWInXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnYWxsb3dQYWdpbmcnLCAncGFnZVNldHRpbmdzJywgJ2FsbG93U29ydGluZycsICdzb3J0U2V0dGluZ3MnLCAnYWxsb3dTZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICdzZWxlY3Rpb25TZXR0aW5ncycsICdhbGxvd0ZpbHRlcmluZycsICdmaWx0ZXJTZXR0aW5ncycsICdncmlkTGluZXMnLFxuICAgICAgICAgICAgICAgICdjcmVhdGVkJywgJ2Rlc3Ryb3llZCcsICdsb2FkJywgJ2FjdGlvbkJlZ2luJywgJ2FjdGlvbkNvbXBsZXRlJywgJ2FjdGlvbkZhaWx1cmUnLCAncm93U2VsZWN0aW5nJywgJ3Jvd1NlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uU2VsZWN0aW5nJywgJ2NvbHVtblNlbGVjdGVkJywgJ2NlbGxTZWxlY3RpbmcnLCAnY2VsbFNlbGVjdGVkJywgJ2RhdGFCb3VuZCcsICdncm91cFNldHRpbmdzJywgJ2NvbHVtbnMnLCAnYWxsb3dLZXlib2FyZCcsXG4gICAgICAgICAgICAgICAgJ2VuYWJsZUFsdFJvdycsICdlbmFibGVIb3ZlcicsICdhbGxvd1RleHRXcmFwJywgJ3RleHRXcmFwU2V0dGluZ3MnLCAnc2VhcmNoU2V0dGluZ3MnLCAnc2VsZWN0ZWRSb3dJbmRleCcsICdhbGxvd1Jlb3JkZXJpbmcnLFxuICAgICAgICAgICAgICAgICdhbGxvd1Jvd0RyYWdBbmREcm9wJywgJ3Jvd0Ryb3BTZXR0aW5ncycsICdhbGxvd0dyb3VwaW5nJywgJ2hlaWdodCcsICd3aWR0aCcsICdwcmludE1vZGUnLFxuICAgICAgICAgICAgICAgICdyb3dEYXRhQm91bmQnLCAncXVlcnlDZWxsSW5mbycsICdyb3dEZXNlbGVjdGluZycsICdyb3dEZXNlbGVjdGVkJywgJ2NlbGxEZXNlbGVjdGluZycsICdjZWxsRGVzZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbkRyYWdTdGFydCcsICdjb2x1bW5EcmFnJywgJ2NvbHVtbkRyb3AnLCAncHJpbnRDb21wbGV0ZScsICdiZWZvcmVQcmludCcsICdkZXRhaWxEYXRhQm91bmQnLFxuICAgICAgICAgICAgICAgICdjaGlsZEdyaWQnLCAncXVlcnlTdHJpbmcnLCAndG9vbGJhcicsICd0b29sYmFyQ2xpY2snLCAnZWRpdFNldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAnYmF0Y2hBZGQnLCAnYmF0Y2hEZWxldGUnLCAnYmVmb3JlQmF0Y2hBZGQnLCAnYmVmb3JlQmF0Y2hEZWxldGUnLFxuICAgICAgICAgICAgICAgICdiZWZvcmVCYXRjaFNhdmUnLCAnYmVnaW5FZGl0JywgJ2NlbGxFZGl0JywgJ2NlbGxTYXZlJywgJ2VuZEFkZCcsICdlbmREZWxldGUnLCAnZW5kRWRpdCcsICdiZWZvcmVEYXRhQm91bmQnLFxuICAgICAgICAgICAgICAgICdiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlcicsICdhbGxvd1Jlc2l6aW5nJywgJ0V4Y2VsRXhwb3J0JywgJ1BkZkV4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ2FsbG93RXhjZWxFeHBvcnQnLCAnYWxsb3dQZGZFeHBvcnQnLFxuICAgICAgICAgICAgICAgICdwZGZRdWVyeUNlbGxJbmZvJywgJ2V4Y2VsUXVlcnlDZWxsSW5mbyddO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbC50ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuZmlsdGVyU2V0dGluZ3MsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0V4Y2VsRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnRXhjZWxFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGRmRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnUGRmRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc29ydFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMucGFnZVNldHRpbmdzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVtYmVyOiAncmVzaXplJyxcbiAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncmVvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jvd0RyYWdBbmREcm9wJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5ncm91cFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7IG1lbWJlcjogJ2FnZ3JlZ2F0ZScsIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdkZXRhaWxSb3cnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIgfHwgdGhpcy50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd0b29sYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVWaXJ0dWFsaXphdGlvbiB8fCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAndmlydHVhbHNjcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBuZXcgc2VydmljZV9sb2NhdG9yXzEuU2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5lbGVtZW50LCB7IHJvbGU6ICdncmlkJyB9KTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5jcmVhdGVTcGlubmVyKHsgdGFyZ2V0OiB0aGlzLmVsZW1lbnQgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZSA9IG5ldyByZW5kZXJfMS5SZW5kZXIodGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmdldE1lZGlhQ29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUgPSBuZXcgc2VhcmNoXzEuU2VhcmNoKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBuZXcgc2Nyb2xsXzEuU2Nyb2xsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJNb2R1bGUgPSBuZXcgY29sdW1uX2Nob29zZXJfMS5Db2x1bW5DaG9vc2VyKHRoaXMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluaXRpYWxMb2FkLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoZXZlbnRzLmxvYWQpO1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMuY29sdW1ucywgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbik7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc01vZGVsKCk7XG4gICAgICAgICAgICB0aGlzLmdyaWRSZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0Q3Vyc29yKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5pdGlhbEVuZCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93U3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5zaG93U3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlU3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5oaWRlU3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRNZWRpYUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2NvbCA9IHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdzaG93SGlkZVNlcnZpY2UnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGdjb2wubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbFtpbmRleF0uaGlkZUF0TWVkaWEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYUNvbC5wdXNoKGdjb2xbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShnY29sW2luZGV4XS5oaWRlQXRNZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYVF1ZXJ5VXBkYXRlKGluZGV4LCBtZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuYWRkTGlzdGVuZXIodGhpcy5tZWRpYVF1ZXJ5VXBkYXRlLmJpbmQodGhpcywgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubWVkaWFRdWVyeVVwZGF0ZSA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgZSkge1xuICAgICAgICAgICAgdGhpcy5pc01lZGlhUXVlcnkgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XTtcbiAgICAgICAgICAgIGNvbC52aXNpYmxlID0gZS5tYXRjaGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsTG9hZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGNvbC5oZWFkZXJUZXh0LCAnaGVhZGVyVGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShjb2wuaGVhZGVyVGV4dCwgJ2hlYWRlclRleHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hNZWRpYUNvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTWVkaWFRdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbExvYWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ldmVudEluaXRpYWxpemVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lEZXBlbmRlbnRNb2R1bGVzKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS1ydGwnLCAnZS1ncmlkaG92ZXInLCAnZS1yZXNwb25zaXZlJywgJ2UtZGVmYXVsdCcsICdlLWRldmljZSddKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVzdHJveURlcGVuZGVudE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JpZCc7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciByZXF1aXJlUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVHcmlkUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ3Vyc29yO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1BhZ2luZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncGFnZXInLCBlbmFibGU6IHRoaXMuYWxsb3dQYWdpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZVNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3BhZ2VyJywgcHJvcGVydGllczogbmV3UHJvcC5wYWdlU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSkgJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqLnNldExvY2FsZShuZXdQcm9wLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5zZXRDdWx0dXJlKG5ld1Byb3AubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dTb3J0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdzb3J0JywgZW5hYmxlOiB0aGlzLmFsbG93U29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0ZpbHRlcmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZmlsdGVyJywgZW5hYmxlOiB0aGlzLmFsbG93RmlsdGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZTogJ3Njcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogeyB3aWR0aDogbmV3UHJvcC53aWR0aCwgaGVpZ2h0OiBuZXdQcm9wLmhlaWdodCB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlb3JkZXJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jlb3JkZXInLCBlbmFibGU6IHRoaXMuYWxsb3dSZW9yZGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93Um93RHJhZ0FuZERyb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jvd0RyYWdBbmREcm9wJywgZW5hYmxlOiB0aGlzLmFsbG93Um93RHJhZ0FuZERyb3AgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm93VGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5yb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGV0YWlsVGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dHcm91cGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZ3JvdXAnLCBlbmFibGU6IHRoaXMuYWxsb3dHcm91cGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoaWxkR3JpZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9vbGJhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXBTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdncm91cCcsIHByb3BlcnRpZXM6IG5ld1Byb3AuZ3JvdXBTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZ2dyZWdhdGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdhZ2dyZWdhdGUnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5PYmplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVHcmlkUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZShwcm9wLCBuZXdQcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHRDdXJzb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1aXJlR3JpZFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVpcmVSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wLCBuZXdQcm9wKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5yZW1vdmVQYWRkaW5nKCFuZXdQcm9wLmVuYWJsZVJ0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlQWx0Um93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlc2l6aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyaWRMaW5lcyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JpZExpbmVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlclNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZmlsdGVyJywgcHJvcGVydGllczogbmV3UHJvcC5maWx0ZXJTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNoU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWFyY2gnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlYXJjaFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzb3J0JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0aW9uU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWxlY3Rpb24nLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlbGVjdGlvblNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdlZGl0JywgcHJvcGVydGllczogbmV3UHJvcC5lZGl0U2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93VGV4dFdyYXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRXcmFwU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1RleHRXcmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRhU291cmNlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwge30pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZUhvdmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5ld1Byb3AuZW5hYmxlSG92ZXIgPyBlajJfYmFzZV8zLmFkZENsYXNzIDogZWoyX2Jhc2VfMy5yZW1vdmVDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKFt0aGlzLmVsZW1lbnRdLCAnZS1ncmlkaG92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZURlZmF1bHRDdXJzb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaGVhZGVyUm93c18xID0gaGVhZGVyUm93czsgX2kgPCBoZWFkZXJSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGhlYWRlclJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTb3J0aW5nIHx8IHRoaXMuYWxsb3dHcm91cGluZyB8fCB0aGlzLmFsbG93UmVvcmRlcmluZykge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZSgnZS1kZWZhdWx0Y3Vyc29yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgnZS1kZWZhdWx0Y3Vyc29yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVDb2x1bW5Nb2RlbCA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5Nb2RlbChjb2x1bW5zW2ldLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbC5wdXNoKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW52aWV3ID0gdGhpcy5pblZpZXdJbmRleGVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gdiAtIF90aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IH0pLmZpbHRlcihmdW5jdGlvbiAodikgeyByZXR1cm4gdiA+IC0xOyB9KTtcbiAgICAgICAgICAgIHZhciB2TGVuID0gaW52aWV3Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sdW1uTW9kZWwpIHx8IHRoaXMuY29sdW1uTW9kZWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uTW9kZWwodGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdkxlbiA9PT0gMCA/IHRoaXMuY29sdW1uTW9kZWwgOlxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwuc2xpY2UoaW52aWV3WzBdLCBpbnZpZXdbdkxlbiAtIDFdICsgMSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhlc0luVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluVmlld0luZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldENvbHVtbkluZGV4ZXNJblZpZXcgPSBmdW5jdGlvbiAoaW5kZXhlcykge1xuICAgICAgICAgICAgdGhpcy5pblZpZXdJbmRleGVzID0gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0VmlzaWJsZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29sdW1uTW9kZWw7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29scy5wdXNoKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJNb2R1bGUuZ2V0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZEhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUuc2V0UGFuZWwoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0VGFibGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZENvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUuc2V0VGFibGUoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFBhbmVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRDb250ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZS5zZXRQYW5lbChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0SGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJNb2R1bGUuZ2V0VGFibGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZEhlYWRlclRhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnNldFRhYmxlKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRGb290ZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRmb290ZXInKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3RlckVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEZvb3RlckNvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZm9vdGVyJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb290ZXJFbGVtZW50LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UGFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkUGFnZXI7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRQYWdlciA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmdyaWRQYWdlciA9IGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd0VsZW1lbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERhdGFSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgZGF0YVJvd3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1oaWRkZW5yb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhUm93cy5wdXNoKHJvd3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhUm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q2VsbEZyb21JbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERhdGFSb3dzKClbcm93SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjb2x1bW5JbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtaGVhZGVyY2VsbCcpW2luZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93T2JqZWN0RnJvbVVJRCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5IZWFkZXJCeVVpZCh0aGlzLmdldENvbHVtbkJ5RmllbGQoZmllbGQpLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIHVpZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyBpbmRleCA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRVaWRCeUNvbHVtbkZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5GaWVsZE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5nZXRDb2x1bW5zKClbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTmFtZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd1RlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93VGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGV0YWlsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQcmltYXJ5S2V5RmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgPSAwLCBjb2wgPSB0aGlzLmNvbHVtbnMsIGNMZW4gPSBjb2wubGVuZ3RoOyBrZXkgPCBjTGVuOyBrZXkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xba2V5XS5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGNvbFtrZXldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZSA/IHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUmVjb3JkcyA6IFtdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd0luZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0luZGV4ZXMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJlY29yZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKS5maWx0ZXIoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmlzU2VsZWN0ZWQ7IH0pXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5kYXRhOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGF0YU1vZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1vZHVsZS5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93Q29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBzaG93QnkpIHtcbiAgICAgICAgICAgIHNob3dCeSA9IHNob3dCeSA/IHNob3dCeSA6ICdoZWFkZXJUZXh0JztcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLnNob3coa2V5cywgc2hvd0J5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaGlkZUNvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgaGlkZUJ5KSB7XG4gICAgICAgICAgICBoaWRlQnkgPSBoaWRlQnkgPyBoaWRlQnkgOiAnaGVhZGVyVGV4dCc7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlci5oaWRlKGtleXMsIGhpZGVCeSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5nb1RvUGFnZShwYWdlTm8pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLnNvcnRDb2x1bW4oY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyU29ydGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5jbGVhclNvcnRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlU29ydENvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLnJlbW92ZVNvcnRDb2x1bW4oZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5maWx0ZXJCeUNvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcikge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuZmlsdGVyQnlDb2x1bW4oZmllbGROYW1lLCBmaWx0ZXJPcGVyYXRvciwgZmlsdGVyVmFsdWUsIHByZWRpY2F0ZSwgbWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZSwgYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhckZpbHRlcmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmNsZWFyRmlsdGVyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGlzQ2xlYXJGaWx0ZXJCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQoZmllbGQsIGlzQ2xlYXJGaWx0ZXJCYXIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3coaW5kZXgsIGlzVG9nZ2xlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93cyA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3dzKHJvd0luZGV4ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdENlbGwgPSBmdW5jdGlvbiAoY2VsbEluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Q2VsbChjZWxsSW5kZXgsIGlzVG9nZ2xlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUuc2VhcmNoKHNlYXJjaFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZS5wcmludCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zdGFydEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJvdyh0cik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlY2FsY0luZGVudFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXRoaXMuaXNEZXRhaWwoKSkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuZ2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgcGVyUGl4ZWwgPSBpbmRlbnRXaWR0aCAvIDMwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKHBlclBpeGVsID49IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCA9ICgzMCAvIHBlclBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAzMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgY29udGVudENvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBpLCB3aWR0aDogaW5kZW50V2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuc2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnLCAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlck1vZHVsZS5yZW9yZGVyQ29sdW1ucyhmcm9tRk5hbWUsIHRvRk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmaWVsZE5hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU1vZHVsZS5hdXRvRml0Q29sdW1ucyhmaWVsZE5hbWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uY2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZS5yZW5kZXJDb2x1bW5DaG9vc2VyKHgsIHksIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmluaXRpYWxpemVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3dpZHRoU2VydmljZScsIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignY2VsbFJlbmRlcmVyRmFjdG9yeScsIG5ldyBjZWxsX3JlbmRlcl9mYWN0b3J5XzEuQ2VsbFJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdyZW5kZXJlckZhY3RvcnknLCBuZXcgcmVuZGVyZXJfZmFjdG9yeV8xLlJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdsb2NhbGl6YXRpb24nLCB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV80LkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3ZhbHVlRm9ybWF0dGVyJywgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIodGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3Nob3dIaWRlU2VydmljZScsIHRoaXMuc2hvd0hpZGVyID0gbmV3IHNob3dfaGlkZV8xLlNob3dIaWRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2FyaWFTZXJ2aWNlJywgdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJvY2Vzc01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc0NvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWc7XG4gICAgICAgICAgICB2YXIgajtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNMZW4gPSBzQ29scy5sZW5ndGg7IGogPCBzTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQ29sc1tqXS5maWVsZCA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xzLnB1c2goeyBmaWVsZDogZ0NvbHNbaV0sIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc18xLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5zb3J0ZWRDb2x1bW5zLnB1c2goc0NvbHNbal0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHNbal0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzXzEuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXNfMS5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBnQ29sc1tpXTsgfSlbMF0gOiB0aGlzXzEuZ2V0Q29sdW1uQnlGaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpLCBsZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzLnBhcmVudEtleUZpZWxkVmFsdWUpID8gJ3VuZGVmaW5lZCcgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlKHRoaXMucXVlcnlTdHJpbmcsICdlcXVhbCcsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ3JpZFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVIb3Zlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWRldmljZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnXSwgW10pO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyRmFjdG9yeSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZSA9IHJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZSA9IG5ldyBwcmludF8xLlByaW50KHRoaXMsIHRoaXMuc2Nyb2xsTW9kdWxlKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEluaXRpYWxpemVyKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFdpZHRoKCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVHcmlkUG9wVXBFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBvcHVwJywgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNvbnRlbnQnLCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW2NvbnRlbnQsIGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVwdGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZG93bnRhaWwgZS10YWlsJyB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUdyaWRMaW5lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS12ZXJ0aWNhbGxpbmVzJywgJ2UtaG9yaXpvbnRhbGxpbmVzJywgJ2UtaGlkZWxpbmVzJywgJ2UtYm90aGxpbmVzJ10pO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRMaW5lcykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3Jpem9udGFsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS12ZXJ0aWNhbGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWJvdGhsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXBwbHlUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmdldENvbnRlbnQoKSwgJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IHRoaXMuZWxlbWVudC50YWJJbmRleCA9PT0gLTEgPyAwIDogdGhpcy5lbGVtZW50LnRhYkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2tleWRvd24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLnJlY2FsY0luZGVudFdpZHRoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoTWVkaWFDb2wuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaE1lZGlhQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q3VycmVudFZpZXdSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbG93R3JvdXBpbmcgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEucmVjb3JkcyA6IHRoaXMuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tb3VzZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZHBvcHVwJykgJiYgZS50b3VjaGVzKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jbG9uZXByb3BlcnRpZXMnKS5sZW5ndGggfHwgdGhpcy5jaGVja0VkaXQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCghdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHx8XG4gICAgICAgICAgICAgICAgKCEodGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpICYmIHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNoZWNrRWRpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgJiYgdHIgJiYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRyb3cnKSB8fCB0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtYWRkZWRyb3cnKSk7XG4gICAgICAgICAgICByZXR1cm4gaXNFZGl0IHx8ICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiZcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWVkaXRlZGJhdGNoY2VsbCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJykuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kYmxjbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmZvY3VzT3V0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2xlYXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2FuY2VsOm5vdCguZS1oaWRlKScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlckNsZWFyKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2xlYXIuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzQ2hpbGRHcmlkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzRGV0YWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hpbGRHcmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRWRpdCAmJiBlLmFjdGlvbiAhPT0gJ2VzY2FwZScgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgZS5hY3Rpb24gIT09ICd0YWInICYmIGUuYWN0aW9uICE9PSAnc2hpZnRUYWInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdjdHJsUGx1c1AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMua2V5UHJlc3NlZCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEluamVjdGVkTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluamVjdGVkTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk9iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4Y2VsRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3N2RXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wZGZFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZGZFeHBvcnRNb2R1bGUuTWFwKHRoaXMsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcmlkO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVBbHRSb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUhvdmVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0tleWJvYXJkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dUZXh0V3JhcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFRleHRXcmFwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidGV4dFdyYXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGFnaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgcGFnZV9zZXR0aW5nc18xLlBhZ2VTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwYWdlU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVWaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgU2VhcmNoU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VhcmNoU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NvcnRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0V4Y2VsRXhwb3J0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dQZGZFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTb3J0U2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic29ydFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NlbGVjdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KC0xKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlbGVjdGVkUm93SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTZWxlY3Rpb25TZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25TZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93RmlsdGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZW9yZGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZXNpemluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93Um93RHJhZ0FuZERyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBSb3dEcm9wU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJvcFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRmlsdGVyU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZmlsdGVyU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0dyb3VwaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgR3JvdXBTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncm91cFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRWRpdFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVkaXRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZVJvdylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2hvd0NvbHVtbkNob29zZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2RlZmF1bHQnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImdyaWRMaW5lc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXRhaWxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGlsZEdyaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYWxscGFnZXMnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFTb3VyY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ0b29sYmFyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwibG9hZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25CZWdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25GYWlsdXJlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93U2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbERlc2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1N0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludENvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZVByaW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInBkZlF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZXhjZWxRdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRldGFpbERhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaFNhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVnaW5FZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxFZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTYXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIm9uUmVzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0b3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgR3JpZCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEdyaWQpO1xuICAgIGV4cG9ydHMuR3JpZCA9IEdyaWQ7XG4gICAgR3JpZC5JbmplY3Qoc2VsZWN0aW9uXzEuU2VsZWN0aW9uKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2dyaWQuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZXJ2aWNlTG9jYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlcnZpY2VMb2NhdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFNlcnZpY2VMb2NhdG9yLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZXNbbmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZXJ2aWNlTG9jYXRvci5wcm90b3R5cGUuZ2V0U2VydmljZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHNlcnZpY2UgXCIgKyBuYW1lICsgXCIgaXMgbm90IHJlZ2lzdGVyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzW25hbWVdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VydmljZUxvY2F0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlcnZpY2VMb2NhdG9yID0gU2VydmljZUxvY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc2VydmljZS1sb2NhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZnVuY3Rpb24gZG9lc0ltcGxlbWVudEludGVyZmFjZSh0YXJnZXQsIGNoZWNrRm9yKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQucHJvdG90eXBlICYmIGNoZWNrRm9yIGluIHRhcmdldC5wcm90b3R5cGU7XG4gICAgfVxuICAgIGV4cG9ydHMuZG9lc0ltcGxlbWVudEludGVyZmFjZSA9IGRvZXNJbXBsZW1lbnRJbnRlcmZhY2U7XG4gICAgZnVuY3Rpb24gdmFsdWVBY2Nlc3NvcihmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgIGZpZWxkID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChmaWVsZCkgPyAnJyA6IGZpZWxkO1xuICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZShmaWVsZCwgZGF0YSk7XG4gICAgfVxuICAgIGV4cG9ydHMudmFsdWVBY2Nlc3NvciA9IHZhbHVlQWNjZXNzb3I7XG4gICAgZnVuY3Rpb24gZ2V0VXBkYXRlVXNpbmdSYWYodXBkYXRlRnVuY3Rpb24sIGNhbGxCYWNrKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKG51bGwsIHVwZGF0ZUZ1bmN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VXBkYXRlVXNpbmdSYWYgPSBnZXRVcGRhdGVVc2luZ1JhZjtcbiAgICBmdW5jdGlvbiBpdGVyYXRlQXJyYXlPck9iamVjdChjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHByZWQgPSBwcmVkaWNhdGUoY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocHJlZCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBleHBvcnRzLml0ZXJhdGVBcnJheU9yT2JqZWN0ID0gaXRlcmF0ZUFycmF5T3JPYmplY3Q7XG4gICAgZnVuY3Rpb24gdGVtcGxhdGVDb21waWxlcih0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBleHBvcnRzLnRlbXBsYXRlQ29tcGlsZXIgPSB0ZW1wbGF0ZUNvbXBpbGVyO1xuICAgIGZ1bmN0aW9uIHNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBjb3B5QXR0ciA9IHt9O1xuICAgICAgICB2YXIgbGl0ZXJhbHMgPSBbJ3N0eWxlJywgJ2NsYXNzJ107XG4gICAgICAgIGVqMl9iYXNlXzIuZXh0ZW5kKGNvcHlBdHRyLCBjdXN0b21BdHRyaWJ1dGVzLCB7fSk7XG4gICAgICAgIGlmICgnc3R5bGUnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKG5vZGUsIGNvcHlBdHRyW2xpdGVyYWxzWzBdXSk7XG4gICAgICAgICAgICBkZWxldGUgY29weUF0dHJbbGl0ZXJhbHNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY2xhc3MnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKFtub2RlXSwgY29weUF0dHJbbGl0ZXJhbHNbMV1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1sxXV07XG4gICAgICAgIH1cbiAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKG5vZGUsIGNvcHlBdHRyKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMgPSBzZXRTdHlsZUFuZEF0dHJpYnV0ZXM7XG4gICAgZnVuY3Rpb24gZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCwgZXhjbHVkZSkge1xuICAgICAgICB2YXIgbW92ZWQgPSBlajJfYmFzZV8yLmV4dGVuZChjb3BpZWQsIGZpcnN0LCBzZWNvbmQpO1xuICAgICAgICBPYmplY3Qua2V5cyhtb3ZlZCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbW92ZWRbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1vdmVkO1xuICAgIH1cbiAgICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcbiAgICBmdW5jdGlvbiBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zLCBhdXRvV2lkdGgpIHtcbiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuOyBjKyspIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbHVtbnNbY10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbih7IGZpZWxkOiBjb2x1bW5zW2NdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIShjb2x1bW5zW2NdIGluc3RhbmNlb2YgY29sdW1uXzEuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgIGlmICghY29sdW1uc1tjXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKGNvbHVtbnNbY10pO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2NdLmNvbHVtbnMgPSBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zW2NdLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4uaGVhZGVyVGV4dCA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRleHQpID8gY29sdW1uLmZpZWxkIHx8ICcnIDogY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICBjb2x1bW4udmFsdWVBY2Nlc3NvciA9IGNvbHVtbi52YWx1ZUFjY2Vzc29yIHx8IHZhbHVlQWNjZXNzb3I7XG4gICAgICAgICAgICBjb2x1bW4ud2lkdGggPSBhdXRvV2lkdGggJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4ud2lkdGgpID8gMjAwIDogY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uc1tjXSA9IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICB9XG4gICAgZXhwb3J0cy5wcmVwYXJlQ29sdW1ucyA9IHByZXBhcmVDb2x1bW5zO1xuICAgIGZ1bmN0aW9uIHNldENzc0luR3JpZFBvcFVwKHBvcFVwLCBlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIHBvcFVwU3BhbiA9IHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gcG9wVXAucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHRhcmdldFBvc2l0aW9uID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBpc0JvdHRvbVRhaWw7XG4gICAgICAgIHBvcFVwU3Bhbi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHBvcFVwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgaXNCb3R0b21UYWlsID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpID4gcG9wVXAub2Zmc2V0SGVpZ2h0ICsgMTA7XG4gICAgICAgIHBvcFVwLnN0eWxlLnRvcCA9IHRhcmdldFBvc2l0aW9uLnRvcCAtIHBvc2l0aW9uLnRvcCArXG4gICAgICAgICAgICAoaXNCb3R0b21UYWlsID8gLShwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgOiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgKyAncHgnO1xuICAgICAgICBwb3BVcC5zdHlsZS5sZWZ0ID0gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wVXAsIGUsIHRhcmdldFBvc2l0aW9uLCBwb3NpdGlvbi5sZWZ0KSArICdweCc7XG4gICAgICAgIGlmIChpc0JvdHRvbVRhaWwpIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLXVwdGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldENzc0luR3JpZFBvcFVwID0gc2V0Q3NzSW5HcmlkUG9wVXA7XG4gICAgZnVuY3Rpb24gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wdXAsIGUsIHRhcmdldFBvc2l0aW9uLCBsZWZ0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHBvcHVwLm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgdmFyIHggPSBnZXRQb3NpdGlvbihlKS54O1xuICAgICAgICBpZiAoeCAtIHRhcmdldFBvc2l0aW9uLmxlZnQgPCB3aWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFBvc2l0aW9uLmxlZnQgLSBsZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldFBvc2l0aW9uLnJpZ2h0IC0geCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ucmlnaHQgLSBsZWZ0IC0gd2lkdGggKiAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcGVydGllcyhvYmopIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuZ2V0VmFsdWUoJ3Byb3BlcnRpZXMnLCBvYmopO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BlcnRpZXMgPSBnZXRBY3R1YWxQcm9wZXJ0aWVzO1xuICAgIGZ1bmN0aW9uIHBhcmVudHNVbnRpbChlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIGV4cG9ydHMucGFyZW50c1VudGlsID0gcGFyZW50c1VudGlsO1xuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRJbmRleChlbGVtZW50LCBlbGVtZW50cykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uaXNFcXVhbE5vZGUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBleHBvcnRzLmdldEVsZW1lbnRJbmRleCA9IGdldEVsZW1lbnRJbmRleDtcbiAgICBmdW5jdGlvbiBpbkFycmF5KHZhbHVlLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbltpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGV4cG9ydHMuaW5BcnJheSA9IGluQXJyYXk7XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcEZyb21Db2xsKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGNvbGwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldLmhhc093blByb3BlcnR5KCdwcm9wZXJ0aWVzJykpIHtcbiAgICAgICAgICAgICAgICBjb2xsLnB1c2goY29sbGVjdGlvbltpXS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbDtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRBY3R1YWxQcm9wRnJvbUNvbGwgPSBnZXRBY3R1YWxQcm9wRnJvbUNvbGw7XG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCh0YXJnZXQsIHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbWVudHNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMucmVtb3ZlRWxlbWVudCA9IHJlbW92ZUVsZW1lbnQ7XG4gICAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oZSkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB7fTtcbiAgICAgICAgcG9zaXRpb24ueCA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WCkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOlxuICAgICAgICAgICAgZS5jbGllbnRYKTtcbiAgICAgICAgcG9zaXRpb24ueSA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WSkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOlxuICAgICAgICAgICAgZS5jbGllbnRZKTtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFBvc2l0aW9uID0gZ2V0UG9zaXRpb247XG4gICAgdmFyIHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gZ2V0VWlkKHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgdWlkKys7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VWlkID0gZ2V0VWlkO1xuICAgIGZ1bmN0aW9uIGFwcGVuZENoaWxkcmVuKGVsZW0sIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG4gICAgZXhwb3J0cy5hcHBlbmRDaGlsZHJlbiA9IGFwcGVuZENoaWxkcmVuO1xuICAgIGZ1bmN0aW9uIHBhcmVudHMoZWxlbSwgc2VsZWN0b3IsIGlzSUQpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW07XG4gICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0lEID8gcGFyZW50LmlkID09PSBzZWxlY3RvciA6IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzID0gcGFyZW50cztcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgZGF0YSwgY29sdW1uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUgPyBjb2x1bW4uY3VzdG9tQWdncmVnYXRlLmNhbGwoY29udGV4dCwgZGF0YSwgY29sdW1uKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlajJfZGF0YV8xLkRhdGFVdGlsLmFnZ3JlZ2F0ZXNbdHlwZV0oZGF0YSwgY29sdW1uLmZpZWxkKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVBZ2dyZWdhdGUgPSBjYWxjdWxhdGVBZ2dyZWdhdGU7XG4gICAgdmFyIHNjcm9sbFdpZHRoID0gbnVsbDtcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxCYXJXaWR0aCgpIHtcbiAgICAgICAgaWYgKHNjcm9sbFdpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpdk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHZhbHVlID0gMDtcbiAgICAgICAgZGl2Tm9kZS5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOjEwMHB4O2hlaWdodDogMTAwcHg7b3ZlcmZsb3c6IHNjcm9sbDtwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiAtOTk5OXB4Oyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHZhbHVlID0gKGRpdk5vZGUub2Zmc2V0V2lkdGggLSBkaXZOb2RlLmNsaWVudFdpZHRoKSB8IDA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHJldHVybiBzY3JvbGxXaWR0aCA9IHZhbHVlO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFNjcm9sbEJhcldpZHRoID0gZ2V0U2Nyb2xsQmFyV2lkdGg7XG4gICAgdmFyIHJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBnZXRSb3dIZWlnaHQoZWxlbWVudCkge1xuICAgICAgICBpZiAocm93SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIHN0eWxlczogJ3Zpc2liaWxpdHk6IGhpZGRlbicgfSk7XG4gICAgICAgIHRhYmxlLmlubmVySFRNTCA9ICc8dHI+PHRkIGNsYXNzPVwiZS1yb3djZWxsXCI+QTx0ZD48L3RyPic7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB2YXIgcmVjdCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQodGFibGUpO1xuICAgICAgICByb3dIZWlnaHQgPSBNYXRoLmNlaWwocmVjdC5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gcm93SGVpZ2h0O1xuICAgIH1cbiAgICBleHBvcnRzLmdldFJvd0hlaWdodCA9IGdldFJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBpc0VkaXRhYmxlKGNvbCwgdHlwZSwgZWxlbSkge1xuICAgICAgICB2YXIgcm93ID0gcGFyZW50c1VudGlsKGVsZW0sICdlLXJvdycpO1xuICAgICAgICB2YXIgaXNPbGRSb3cgPSAhcm93ID8gdHJ1ZSA6IHJvdyAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2JlZ2luRWRpdCcgJiYgaXNPbGRSb3cpIHtcbiAgICAgICAgICAgIGlmIChjb2wuaXNJZGVudGl0eSB8fCBjb2wuaXNQcmltYXJ5S2V5IHx8ICFjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNPbGRSb3cgJiYgIWNvbC5hbGxvd0VkaXRpbmcgJiYgIWNvbC5pc0lkZW50aXR5ICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5pc0VkaXRhYmxlID0gaXNFZGl0YWJsZTtcbiAgICBmdW5jdGlvbiBpc0FjdGlvblByZXZlbnQoaW5zdCkge1xuICAgICAgICB2YXIgZGxnID0gaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaW5zdC5lbGVtZW50LmlkICsgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIHJldHVybiBpbnN0LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAoaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCkgJiZcbiAgICAgICAgICAgIChkbGcgPyBkbGcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBvcHVwLWNsb3NlJykgOiB0cnVlKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pc0FjdGlvblByZXZlbnQgPSBpc0FjdGlvblByZXZlbnQ7XG4gICAgZnVuY3Rpb24gd3JhcChlbGVtLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIGNsTmFtZSA9ICdlLXdyYXAnO1xuICAgICAgICBlbGVtID0gZWxlbSBpbnN0YW5jZW9mIEFycmF5ID8gZWxlbSA6IFtlbGVtXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhY3Rpb24gPyBlbGVtW2ldLmNsYXNzTGlzdC5hZGQoY2xOYW1lKSA6IGVsZW1baV0uY2xhc3NMaXN0LnJlbW92ZShjbE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMud3JhcCA9IHdyYXA7XG4gICAgZnVuY3Rpb24gY2hhbmdlQnV0dG9uVHlwZSh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0YXJnZXQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKGJ1dHRvbiwgeyB0eXBlOiAnYnV0dG9uJyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmNoYW5nZUJ1dHRvblR5cGUgPSBjaGFuZ2VCdXR0b25UeXBlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbihvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93UmVzaXppbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0VkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93SW5Db2x1bW5DaG9vc2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtY29sdW1uJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZvcm1hdCAmJiAob3B0aW9ucy5mb3JtYXQuc2tlbGV0b24gfHwgb3B0aW9ucy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9ybWF0dGVyKHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKG9wdGlvbnMuZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJzZXIodmFsdWVGb3JtYXR0ZXIuZ2V0UGFyc2VyRnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLnNldEZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXRGbiA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldFBhcnNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlckZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLnNldFBhcnNlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJzZXJGbiA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldENvbHVtblRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5nZXREb21TZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlSHRtbEVuY29kZSA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uID0gQ29sdW1uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9jb2x1bW4uanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmFsdWVGb3JtYXR0ZXIoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VsdHVyZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRsLmN1bHR1cmUgPSBjdWx0dXJlTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0Rm9ybWF0RnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5nZXRQYXJzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0RGF0ZVBhcnNlcihmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXROdW1iZXJQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZyb21WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScgfHwgdHlwZSA9PT0gJ2RhdGV0aW1lJyB8fCB0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUudG9WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmb3JtYXQpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuc2V0Q3VsdHVyZSA9IGZ1bmN0aW9uIChjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0Q3VsdHVyZShjdWx0dXJlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWYWx1ZUZvcm1hdHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmFsdWVGb3JtYXR0ZXIgPSBWYWx1ZUZvcm1hdHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5jcmVhdGVkID0gJ2NyZWF0ZSc7XG4gICAgZXhwb3J0cy5kZXN0cm95ZWQgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5sb2FkID0gJ2xvYWQnO1xuICAgIGV4cG9ydHMucm93RGF0YUJvdW5kID0gJ3Jvd0RhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5xdWVyeUNlbGxJbmZvID0gJ3F1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYWN0aW9uQmVnaW4gPSAnYWN0aW9uQmVnaW4nO1xuICAgIGV4cG9ydHMuYWN0aW9uQ29tcGxldGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgIGV4cG9ydHMuYWN0aW9uRmFpbHVyZSA9ICdhY3Rpb25GYWlsdXJlJztcbiAgICBleHBvcnRzLmRhdGFCb3VuZCA9ICdkYXRhQm91bmQnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0aW5nID0gJ3Jvd1NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3RlZCA9ICdyb3dTZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5yb3dEZXNlbGVjdGluZyA9ICdyb3dEZXNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dEZXNlbGVjdGVkID0gJ3Jvd0Rlc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGluZyA9ICdjZWxsU2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3RlZCA9ICdjZWxsU2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbERlc2VsZWN0aW5nID0gJ2NlbGxEZXNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsRGVzZWxlY3RlZCA9ICdjZWxsRGVzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnU3RhcnQgPSAnY29sdW1uRHJhZ1N0YXJ0JztcbiAgICBleHBvcnRzLmNvbHVtbkRyYWcgPSAnY29sdW1uRHJhZyc7XG4gICAgZXhwb3J0cy5jb2x1bW5Ecm9wID0gJ2NvbHVtbkRyb3AnO1xuICAgIGV4cG9ydHMucm93RHJhZ1N0YXJ0ID0gJ3Jvd0RyYWdTdGFydCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnID0gJ3Jvd0RyYWcnO1xuICAgIGV4cG9ydHMucm93RHJvcCA9ICdyb3dEcm9wJztcbiAgICBleHBvcnRzLmJlZm9yZVByaW50ID0gJ2JlZm9yZVByaW50JztcbiAgICBleHBvcnRzLnByaW50Q29tcGxldGUgPSAncHJpbnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5kZXRhaWxEYXRhQm91bmQgPSAnZGV0YWlsRGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnRvb2xiYXJDbGljayA9ICd0b29sYmFyQ2xpY2snO1xuICAgIGV4cG9ydHMuYmF0Y2hBZGQgPSAnYmF0Y2hBZGQnO1xuICAgIGV4cG9ydHMuYmF0Y2hEZWxldGUgPSAnYmF0Y2hEZWxldGUnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hBZGQgPSAnYmVmb3JlQmF0Y2hBZGQnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hEZWxldGUgPSAnYmVmb3JlQmF0Y2hEZWxldGUnO1xuICAgIGV4cG9ydHMuYmVmb3JlQmF0Y2hTYXZlID0gJ2JlZm9yZUJhdGNoU2F2ZSc7XG4gICAgZXhwb3J0cy5iZWdpbkVkaXQgPSAnYmVnaW5FZGl0JztcbiAgICBleHBvcnRzLmNlbGxFZGl0ID0gJ2NlbGxFZGl0JztcbiAgICBleHBvcnRzLmNlbGxTYXZlID0gJ2NlbGxTYXZlJztcbiAgICBleHBvcnRzLmVuZEFkZCA9ICdlbmRBZGQnO1xuICAgIGV4cG9ydHMuZW5kRGVsZXRlID0gJ2VuZERlbGV0ZSc7XG4gICAgZXhwb3J0cy5lbmRFZGl0ID0gJ2VuZEVkaXQnO1xuICAgIGV4cG9ydHMucmVjb3JkRG91YmxlQ2xpY2sgPSAncmVjb3JkRG91YmxlQ2xpY2snO1xuICAgIGV4cG9ydHMucmVjb3JkQ2xpY2sgPSAncmVjb3JkQ2xpY2snO1xuICAgIGV4cG9ydHMuYmVmb3JlRGF0YUJvdW5kID0gJ2JlZm9yZURhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVPcGVuQ29sdW1uQ2hvb3NlciA9ICdiZWZvcmVPcGVuQ29sdW1uQ2hvb3Nlcic7XG4gICAgZXhwb3J0cy5yZXNpemVTdGFydCA9ICdyZXNpemVTdGFydCc7XG4gICAgZXhwb3J0cy5vblJlc2l6ZSA9ICdvblJlc2l6ZSc7XG4gICAgZXhwb3J0cy5yZXNpemVTdG9wID0gJ3Jlc2l6ZVN0b3AnO1xuICAgIGV4cG9ydHMuaW5pdGlhbExvYWQgPSAnaW5pdGlhbC1sb2FkJztcbiAgICBleHBvcnRzLmluaXRpYWxFbmQgPSAnaW5pdGlhbC1lbmQnO1xuICAgIGV4cG9ydHMuZGF0YVJlYWR5ID0gJ2RhdGEtcmVhZHknO1xuICAgIGV4cG9ydHMuY29udGVudFJlYWR5ID0gJ2NvbnRlbnQtcmVhZHknO1xuICAgIGV4cG9ydHMudWlVcGRhdGUgPSAndWktdXBkYXRlJztcbiAgICBleHBvcnRzLmluQm91bmRNb2RlbENoYW5nZWQgPSAnaW5ib3VuZC1tb2RlbC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLm1vZGVsQ2hhbmdlZCA9ICdtb2RlbC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLmNvbEdyb3VwUmVmcmVzaCA9ICdjb2xncm91cC1yZWZyZXNoJztcbiAgICBleHBvcnRzLmhlYWRlclJlZnJlc2hlZCA9ICdoZWFkZXItcmVmcmVzaGVkJztcbiAgICBleHBvcnRzLnBhZ2VCZWdpbiA9ICdwYWdpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMucGFnZUNvbXBsZXRlID0gJ3BhZ2luZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5zb3J0QmVnaW4gPSAnc29ydGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5zb3J0Q29tcGxldGUgPSAnc29ydGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5maWx0ZXJCZWdpbiA9ICdmaWx0ZXJpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuZmlsdGVyQ29tcGxldGUgPSAnZmlsdGVyaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNlYXJjaEJlZ2luID0gJ3NlYXJjaGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5zZWFyY2hDb21wbGV0ZSA9ICdzZWFyY2hpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMucmVvcmRlckJlZ2luID0gJ3Jlb3JkZXItYmVnaW4nO1xuICAgIGV4cG9ydHMucmVvcmRlckNvbXBsZXRlID0gJ3Jlb3JkZXItY29tcGxldGUnO1xuICAgIGV4cG9ydHMucm93RHJhZ0FuZERyb3BCZWdpbiA9ICdyb3dkcmFnYW5kZHJvcC1iZWdpbic7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlID0gJ3Jvd2RyYWdhbmRkcm9wLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmdyb3VwQmVnaW4gPSAnZ3JvdXBpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuZ3JvdXBDb21wbGV0ZSA9ICdncm91cGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy51bmdyb3VwQmVnaW4gPSAndW5ncm91cGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy51bmdyb3VwQ29tcGxldGUgPSAndW5ncm91cGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3Rpb25CZWdpbiA9ICdyb3dzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0aW9uQ29tcGxldGUgPSAncm93c2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uU2VsZWN0aW9uQmVnaW4gPSAnY29sdW1uc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNvbHVtblNlbGVjdGlvbkNvbXBsZXRlID0gJ2NvbHVtbnNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3Rpb25CZWdpbiA9ICdjZWxsc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSA9ICdjZWxsc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMua2V5UHJlc3NlZCA9ICdrZXktcHJlc3NlZCc7XG4gICAgZXhwb3J0cy5jbGljayA9ICdjbGljayc7XG4gICAgZXhwb3J0cy5kZXN0cm95ID0gJ2Rlc3Ryb3knO1xuICAgIGV4cG9ydHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQgPSAnY29sdW1uLXZpc2libGUtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5zY3JvbGwgPSAnc2Nyb2xsJztcbiAgICBleHBvcnRzLmNvbHVtbldpZHRoQ2hhbmdlZCA9ICdjb2x1bW4td2lkdGgtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQgPSAnY29sdW1uLXBvc2l0aW9uLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMucm93RHJhZ0FuZERyb3AgPSAncm93LWRyYWctYW5kLWRyb3AnO1xuICAgIGV4cG9ydHMucm93c0FkZGVkID0gJ3Jvd3MtYWRkZWQnO1xuICAgIGV4cG9ydHMucm93c1JlbW92ZWQgPSAncm93cy1yZW1vdmVkJztcbiAgICBleHBvcnRzLmNvbHVtbkRyYWdTdG9wID0gJ2NvbHVtbi1kcmFnLXN0b3AnO1xuICAgIGV4cG9ydHMuaGVhZGVyRHJvcCA9ICdoZWFkZXItZHJvcCc7XG4gICAgZXhwb3J0cy5kYXRhU291cmNlTW9kaWZpZWQgPSAnZGF0YXNvdXJjZS1tb2RpZmllZCc7XG4gICAgZXhwb3J0cy5yZWZyZXNoQ29tcGxldGUgPSAncmVmcmVzaC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZWZyZXNoVmlydHVhbEJsb2NrID0gJ3JlZnJlc2gtdmlydHVhbC1ibG9jayc7XG4gICAgZXhwb3J0cy5kYmxjbGljayA9ICdkYmxjbGljayc7XG4gICAgZXhwb3J0cy50b29sYmFyUmVmcmVzaCA9ICd0b29sYmFyLXJlZnJlc2gnO1xuICAgIGV4cG9ydHMuYnVsa1NhdmUgPSAnYnVsay1zYXZlJztcbiAgICBleHBvcnRzLmF1dG9Db2wgPSAnYXV0by1jb2wnO1xuICAgIGV4cG9ydHMudG9vbHRpcERlc3Ryb3kgPSAndG9vbHRpcC1kZXN0cm95JztcbiAgICBleHBvcnRzLnVwZGF0ZURhdGEgPSAndXBkYXRlLWRhdGEnO1xuICAgIGV4cG9ydHMuZWRpdEJlZ2luID0gJ2VkaXQtYmVnaW4nO1xuICAgIGV4cG9ydHMuZWRpdENvbXBsZXRlID0gJ2VkaXQtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuYWRkQmVnaW4gPSAnYWRkLWJlZ2luJztcbiAgICBleHBvcnRzLmFkZENvbXBsZXRlID0gJ2FkZC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5zYXZlQ29tcGxldGUgPSAnc2F2ZS1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5kZWxldGVCZWdpbiA9ICdkZWxldGUtYmVnaW4nO1xuICAgIGV4cG9ydHMuZGVsZXRlQ29tcGxldGUgPSAnZGVsZXRlLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnByZXZlbnRCYXRjaCA9ICdwcmV2ZW50LWJhdGNoJztcbiAgICBleHBvcnRzLmRpYWxvZ0Rlc3Ryb3kgPSAnZGlhbG9nLWRlc3Ryb3knO1xuICAgIGV4cG9ydHMuY3J1ZEFjdGlvbiA9ICdjcnVkLUFjdGlvbic7XG4gICAgZXhwb3J0cy5hZGREZWxldGVBY3Rpb24gPSAnYWRkLWRlbGV0ZS1BY3Rpb24nO1xuICAgIGV4cG9ydHMuZGVzdHJveUZvcm0gPSAnZGVzdHJveS1mb3JtJztcbiAgICBleHBvcnRzLmRvdWJsZVRhcCA9ICdkb3VibGUtdGFwJztcbiAgICBleHBvcnRzLmJlZm9yZUV4Y2VsRXhwb3J0ID0gJ2JlZm9yZUV4Y2VsRXhwb3J0JztcbiAgICBleHBvcnRzLmV4Y2VsRXhwb3J0Q29tcGxldGUgPSAnZXhjZWxFeHBvcnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5leGNlbFF1ZXJ5Q2VsbEluZm8gPSAnZXhjZWxRdWVyeUNlbGxJbmZvJztcbiAgICBleHBvcnRzLmJlZm9yZVBkZkV4cG9ydCA9ICdiZWZvcmVQZGZFeHBvcnQnO1xuICAgIGV4cG9ydHMucGRmRXhwb3J0Q29tcGxldGUgPSAncGRmRXhwb3J0Q29tcGxldGUnO1xuICAgIGV4cG9ydHMucGRmUXVlcnlDZWxsSW5mbyA9ICdwZGZRdWVyeUNlbGxJbmZvJztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlbnVtXzEsIGRhdGFfMSwgZXZlbnRzLCB1dGlsXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEsIGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLCBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5yZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07IH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShlLnJlcXVlc3RUeXBlICsgXCItYmVnaW5cIiwgZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgZSk7XG4gICAgICAgICAgICBpZiAoZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hEYXRhTWFuYWdlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0ge307IH1cbiAgICAgICAgICAgIGlmIChhcmdzLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlYWR5ID0gdGhpcy5kYXRhLmRhdGFNYW5hZ2VyLnJlYWR5O1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRCdXN5KHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IHRoaXMuZGF0YS5nZXREYXRhKGFyZ3MsIHRoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIGlmICghcmVhZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5kaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIgPSBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy52YWxpZGF0ZUdyb3VwUmVjb3JkcyhlKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFNYW5hZ2VyU3VjY2VzcyhlLCBhcmdzKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kYXRhTWFuYWdlckZhaWx1cmUoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnNlbmRCdWxrUmVxdWVzdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmRhdGEuc2F2ZUNoYW5nZXMoYXJncy5jaGFuZ2VzLCB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5vZmZsaW5lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoeyByZXF1ZXN0VHlwZTogJ2JhdGNoc2F2ZScgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kbVN1Y2Nlc3MoZSwgYXJncyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZG1GYWlsdXJlKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kbVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlclN1Y2Nlc3MoZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZG1GYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJGYWlsdXJlKGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlbmRlckVtcHR5Um93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5lbXB0eVJvdyA9IGZ1bmN0aW9uIChpc1RyaWdnZXIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSB0aGlzLmNvbnRlbnRSZW5kZXJlci5nZXRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0Ym9keSk7XG4gICAgICAgICAgICB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1lbXB0eXJvdycgfSk7XG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIGlubmVySFRNTDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFbXB0eVJlY29yZCcpLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbHNwYW46IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlckVtcHR5KHRib2R5KTtcbiAgICAgICAgICAgIGlmIChpc1RyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5kYXRhQm91bmQsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVDb2x1bW5UeXBlID0gZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHJlY29yZCAmJiByZWNvcmQuaXRlbXMgPyByZWNvcmQuaXRlbXNbMF0gOiByZWNvcmQ7XG4gICAgICAgICAgICB2YXIgZm10ciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGVqMl9iYXNlXzIuZ2V0VmFsdWUoY29sdW1uc1tpXS5maWVsZCB8fCAnJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sVHlwZURlZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sdW1uc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnR5cGUgPSB2YWx1ZS5nZXREYXkgPyAodmFsdWUuZ2V0SG91cnMoKSA+IDAgfHwgdmFsdWUuZ2V0TWludXRlcygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmdldFNlY29uZHMoKSA+IDAgfHwgdmFsdWUuZ2V0TWlsbGlzZWNvbmRzKCkgPiAwID8gJ2RhdGV0aW1lJyA6ICdkYXRlJykgOiB0eXBlb2YgKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChjb2x1bW5zW2ldLmZvcm1hdCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbHVtbnNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRGb3JtYXR0ZXIoZm10ci5nZXRGb3JtYXRGdW5jdGlvbih7IGZvcm1hdDogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgZm9ybWF0OiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjb2x1bW5zW2ldLmZvcm1hdCAmJiBjb2x1bW5zW2ldLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgZm9ybWF0OiAnbjInIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS50eXBlID0gY29sdW1uc1tpXS50eXBlIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRhdGFNYW5hZ2VyU3VjY2VzcyA9IGZ1bmN0aW9uIChlLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGUpO1xuICAgICAgICAgICAgdmFyIGxlbiA9IE9iamVjdC5rZXlzKGUucmVzdWx0KS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgaWYgKCFsZW4gJiYgZS5jb3VudCAmJiBnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSBNYXRoLmNlaWwoZS5jb3VudCAvIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggJiYgbGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVzT25Jbml0aWFsUmVuZGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ29sVHlwZURlZikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uVHlwZShnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZGF0YVJlYWR5LCBlajJfYmFzZV8yLmV4dGVuZCh7IGNvdW50OiBlLmNvdW50LCByZXN1bHQ6IGUucmVzdWx0LCBhZ2dyZWdhdGVzOiBlLmFnZ3JlZ2F0ZXMgfSwgYXJncykpO1xuICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCB8fCAoYXJncyAmJiBhcmdzLnJlcXVlc3RUeXBlID09PSAndW5ncm91cGluZycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZWZyZXNoQ29udGVudFJvd3MoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW1wdHlEYXRhU291cmNlRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIuc2V0Um93RWxlbWVudHMoW10pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlSb3coKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGFyZ3MucmVxdWVzdFR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgKyAnLWNvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGFjdGlvbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZGF0YU1hbmFnZXJGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgeyBidXN5OiBmYWxzZSwgaW52YWxpZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlSb3coKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlc09uSW5pdGlhbFJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQ29sdW1ucyhlLnJlc3VsdFswXSk7XG4gICAgICAgICAgICB1dGlsXzEucHJlcGFyZUNvbHVtbnModGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5hdXRvQ29sLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuYnVpbGRDb2x1bW5zID0gZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBPYmplY3Qua2V5cyhyZWNvcmQpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sc1tpXSA9IHsgJ2ZpZWxkJzogY29sdW1uc1tpXSB9O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb2xzW2ldLndpZHRoID0gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sc1tpXS53aWR0aCkgPyBjb2xzW2ldLndpZHRoIDogMjAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmNvbHVtbnMgPSBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlciwgbmV3IGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyBjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB2YXIgY2VsbHJlbmRlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCBuZXcgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMS5IZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRhdGEsIG5ldyBjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBuZXcgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSW5kZW50LCBuZXcgaW5kZW50X2NlbGxfcmVuZGVyZXJfMS5JbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiwgbmV3IGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLkdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uRW1wdHksIG5ldyBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMS5Hcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kLCBuZXcgZXhwYW5kX2NlbGxfcmVuZGVyZXJfMS5FeHBhbmRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCwgbmV3IGhlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMS5IZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIG5ldyBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMS5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIsIG5ldyBkZXRhaWxfaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLkRldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsRXhwYW5kLCBuZXcgZGV0YWlsX2V4cGFuZF9jZWxsX3JlbmRlcmVyXzEuRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yZWZyZXNoQ29tcGxldGUsIHRoaXMucmVmcmVzaENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5idWxrU2F2ZSwgdGhpcy5zZW5kQnVsa1JlcXVlc3QsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnZhbGlkYXRlR3JvdXBSZWNvcmRzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBlLnJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JvdXAwID0gZS5yZXN1bHRbMF07XG4gICAgICAgICAgICB2YXIgZ3JvdXBOID0gZS5yZXN1bHRbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGFkZFdoZXJlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgW2dyb3VwMCwgZ3JvdXBOXS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlLnB1c2gobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKCdmaWVsZCcsICc9PScsIGdyb3VwLmZpZWxkKS5hbmQoX3RoaXMuZ2V0UHJlZGljYXRlKCdrZXknLCAnZXF1YWwnLCBncm91cC5rZXkpKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5wdXQud2hlcmUoZWoyX2RhdGFfMS5QcmVkaWNhdGUub3IocHJlZGljYXRlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGFkZFdoZXJlKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciBjdXJEbSA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGUucmVzdWx0KTtcbiAgICAgICAgICAgIHZhciBjdXJGaWx0ZXIgPSBjdXJEbS5leGVjdXRlTG9jYWwocXVlcnkpO1xuICAgICAgICAgICAgdmFyIG5ld1F1ZXJ5ID0gdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgclByZWRpY2F0ZSA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5pc1JlbW90ZSgpKSB7XG4gICAgICAgICAgICAgICAgW2dyb3VwMCwgZ3JvdXBOXS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gclByZWRpY2F0ZS5wdXNoKF90aGlzLmdldFByZWRpY2F0ZShncm91cC5maWVsZCwgJ2VxdWFsJywgZ3JvdXAua2V5KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbmV3UXVlcnkud2hlcmUoZWoyX2RhdGFfMS5QcmVkaWNhdGUub3IoclByZWRpY2F0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkV2hlcmUobmV3UXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IGVqMl9kYXRhXzEuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5nZXREYXRhKHt9LCBuZXdRdWVyeSkudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZUdyb3VwSW5mbyhjdXJGaWx0ZXIsIHIucmVzdWx0KTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5nZXRQcmVkaWNhdGUgPSBmdW5jdGlvbiAoa2V5LCBvcGVyYXRvciwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdldERhdGVQcmVkaWNhdGUoeyBmaWVsZDoga2V5LCBvcGVyYXRvcjogb3BlcmF0b3IsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoa2V5LCBvcGVyYXRvciwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUdyb3VwSW5mbyA9IGZ1bmN0aW9uIChjdXJyZW50LCB1bnRvdWNoZWQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZG0gPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih1bnRvdWNoZWQpO1xuICAgICAgICAgICAgY3VycmVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdUdyb3VwID0gZG0uZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZSgnZmllbGQnLCAnPT0nLCBlbGVtZW50LmZpZWxkKS5hbmQoX3RoaXMuZ2V0UHJlZGljYXRlKCdrZXknLCAnZXF1YWwnLCBlbGVtZW50LmtleSkpKSlbMF07XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jb3VudCA9IHVHcm91cC5jb3VudDtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUdyb3VwID0gZWxlbWVudC5pdGVtcztcbiAgICAgICAgICAgICAgICB2YXIgdUdyb3VwSXRlbSA9IHVHcm91cC5pdGVtcztcbiAgICAgICAgICAgICAgICBpZiAoaXRlbUdyb3VwLkdyb3VwR3VpZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lml0ZW1zID0gX3RoaXMudXBkYXRlR3JvdXBJbmZvKGVsZW1lbnQuaXRlbXMsIHVHcm91cC5pdGVtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZSBpbnN0YW5jZW9mIEFycmF5ID8gY29sdW1uLnR5cGUgOiBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjb2x1bW4uZmllbGQgKyAnIC0gJyArIHR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZ2dyZWdhdGVzW2tleV0gPSB1dGlsXzEuY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGl0ZW1Hcm91cC5sZXZlbCA/IHVHcm91cEl0ZW0ucmVjb3JkcyA6IHVHcm91cC5pdGVtcywgY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlbmRlciA9IFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9yZW5kZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZXZlbnRzLCBlajJfYmFzZV80LCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlclJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlclJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmICghKGdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdjbG9uZSBlLWhlYWRlcmNsb25lJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS5zZW5kZXIudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyY2VsbGRpdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQudGV4dENvbnRlbnQgPSBoZWFkZXJjZWxsZGl2ID9cbiAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5CeVVpZChoZWFkZXJjZWxsZGl2LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmhlYWRlclRleHQgOiBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gKGhlaWdodCAtIDYpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh2aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZXN0IHx8IGNsb3Nlc3QuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXJlb3JkZXJ1cGFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcmRvd25hcnJvdycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiBlLnRhcmdldCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGV2ZW50OiBlLmV2ZW50IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGlmICgoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSAmJiAhdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWdPYmouYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCFlLmhlbHBlci5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0b3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZXZlbnQ6IGUuZXZlbnQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBjYW5jZWw6IGNhbmNlbCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB1aWQgPSBlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1ncmlkJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgfHxcbiAgICAgICAgICAgICAgICAgICAgIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmhlYWRlckRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgdWlkOiB1aWQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3dpZHRoU2VydmljZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVUksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjb250ZW50JyB9KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyVGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKGhlYWRlckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyb3AoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0UGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJQYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRQYW5lbCA9IGZ1bmN0aW9uIChwYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJQYW5lbCA9IHBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyVGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0VGFibGUgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyVGFibGUgPSB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRDb2xHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldENvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cCA9IGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGFibGUudEhlYWQucm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuY3JlYXRlVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyRGl2O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZVRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICcwLjI1cHgnLCByb2xlOiAnZ3JpZCcgfSB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIGZpbmRIZWFkZXJSb3cgPSB0aGlzLmNyZWF0ZUhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgIHZhciB0aGVhZCA9IGZpbmRIZWFkZXJSb3cudGhlYWQ7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5JywgeyBjbGFzc05hbWU6ICdlLWhpZGUnIH0pO1xuICAgICAgICAgICAgdmFyIGNvbEdyb3VwID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2xncm91cCcpO1xuICAgICAgICAgICAgdmFyIHJvd0JvZHkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgYm9keUNlbGw7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGZpbmRIZWFkZXJSb3cucm93cztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbl8xID0gcm93c1tpXS5jZWxscy5sZW5ndGg7IGogPCBsZW5fMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93c1tpXS5jZWxsc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgYm9keUNlbGwgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgICAgIHJvd0JvZHkuYXBwZW5kQ2hpbGQoYm9keUNlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93RmlsdGVyaW5nIHx8IGdPYmouYWxsb3dTb3J0aW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoJ2Utc29ydGZpbHRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3dCb2R5KTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoaXMuc2V0Q29sR3JvdXAoY29sR3JvdXApKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoZWFkKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0YWJsZSwgeyBjb2xjb3VudDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRoZWFkID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0aGVhZCcpO1xuICAgICAgICAgICAgdmFyIGNvbEhlYWRlciA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtY29sdW1uaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHJvd1JlbmRlcmVyLmVsZW1lbnQgPSBjb2xIZWFkZXI7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvdztcbiAgICAgICAgICAgIHRoaXMuY29sRGVwdGggPSB0aGlzLmdldE9iakRlcHRoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb2xEZXB0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IHRoaXMuZ2VuZXJhdGVSb3coaSk7XG4gICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93cyA9IHRoaXMuZW5zdXJlQ29sdW1ucyhyb3dzKTtcbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLmdldEhlYWRlckNlbGxzKHJvd3MpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuY29sRGVwdGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGhlYWRlclJvdyA9IHJvd1JlbmRlcmVyLnJlbmRlcihyb3dzW2ldLCBjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbmRIZWFkZXJSb3cgPSB7XG4gICAgICAgICAgICAgICAgdGhlYWQ6IHRoZWFkLFxuICAgICAgICAgICAgICAgIHJvd3M6IHJvd3NcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZmluZEhlYWRlclJvdztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS51cGRhdGVDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgY29sO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbEdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIGNvbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sJyk7XG4gICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNldFN0eWxlQXR0cmlidXRlKGNvbCwgeyAnZGlzcGxheSc6ICdub25lJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5lbnN1cmVDb2x1bW5zID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuXzIgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW5fMjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ09iai5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0SGVhZGVyQ2VsbHMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZENlbGxzKGNvbHNbaV0sIHJvd3MsIDAsIGkgPT09IDAsIGZhbHNlLCBpID09PSAobGVuIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ2VsbHMgPSBmdW5jdGlvbiAoY29scywgcm93cywgaW5kZXgsIGlzRmlyc3RPYmosIGlzRmlyc3RDb2wsIGlzTGFzdENvbCkge1xuICAgICAgICAgICAgdmFyIGxhc3RDb2wgPSBpc0xhc3RDb2wgPyAnZS1sYXN0Y2VsbCcgOiAnJztcbiAgICAgICAgICAgIGlmICghY29scy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbCA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENudChjb2xzLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sU3Bhbikge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29scy5jb2x1bW5zW2ldLCByb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHJvd18xLlJvdyh7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2xJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0LnJvd1NwYW4gfHwgb3B0LnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZ2V0Um93cygpKTtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gJyc7XG4gICAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIGlkeCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYWwgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkTm9kZXNbaWR4XSwgeyAnZGlzcGxheSc6IGRpc3BsYXlWYWwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNoaWxkKHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdGFibGUuaW5zZXJ0QmVmb3JlKGZpbmRIZWFkZXJSb3cudGhlYWQsIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCksIHRhYmxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZENvbnRlbnQodGFibGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2xHcm91cFJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVIZWFkZXJEcmFnKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwge30pO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKGhlYWRlckRpdi5xdWVyeVNlbGVjdG9yQWxsKCd0ci5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1RleHRXcmFwICYmIHRoaXMucGFyZW50LnRleHRXcmFwU2V0dGluZ3Mud3JhcE1vZGUgPT09ICdoZWFkZXInKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLndyYXAocm93cywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldE9iakRlcHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1heCA9IDA7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXB0aCA9IHRoaXMuY2hlY2tEZXB0aChjb2xzW2ldLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAobWF4IDwgZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY2hlY2tEZXB0aCA9IGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2wuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuY2hlY2tEZXB0aChjb2wuY29sdW1uc1tpXSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRDZWxsQ250ID0gZnVuY3Rpb24gKGNvbCwgY250KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY250ID0gdGhpcy5nZXRDZWxsQ250KGNvbC5jb2x1bW5zW2ldLCBjbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjbnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY250O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVIZWFkZXJEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghKHRoaXMucGFyZW50LmFsbG93UmVvcmRlcmluZyB8fCAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoZWFkZXJSb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWcgPSBuZXcgZWoyX2Jhc2VfNC5EcmFnZ2FibGUoaGVhZGVyUm93c1tpXSwge1xuICAgICAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtaGVhZGVyY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wLFxuICAgICAgICAgICAgICAgICAgICBhYm9ydDogJy5lLXJoYW5kbGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVIZWFkZXJEcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzQuRHJvcHBhYmxlKGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVyUmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJSZW5kZXIgPSBIZWFkZXJSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNvbnN0YW50XzEsIHV0aWxfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd1JlbmRlcmVyKHNlcnZpY2VMb2NhdG9yLCBjZWxsVHlwZSwgcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBhdHRyczogeyByb2xlOiAncm93JyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5jZWxsVHlwZSA9IGNlbGxUeXBlO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZyZXNoUm93KHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGlzQ2hhbmdlZCwgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICByb3cuZGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCByb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS11aWQ9JyArIHJvdy51aWQgKyAnXScpO1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5yZWZyZXNoUm93KHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW10uc2xpY2UuY2FsbCh0ci5jZWxscyk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsc18xID0gY2VsbHM7IF9pIDwgY2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoUm93ID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciByb3dBcmdzID0geyBkYXRhOiByb3cuZGF0YSB9O1xuICAgICAgICAgICAgdmFyIGNlbGxBcmdzID0geyBkYXRhOiByb3cuZGF0YSB9O1xuICAgICAgICAgICAgdmFyIGF0dHJDb3B5ID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIHt9KTtcbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKHJvdy5pbmRleCkgPiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVGcm9tUm93KHRyLCByb3cpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKHRyLCBhdHRyQ29weSk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKHRyLCByb3cuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyRmFjdCA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvdy5jZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2ldO1xuICAgICAgICAgICAgICAgIGNlbGwuaXNTZWxlY3RlZCA9IHJvdy5pc1NlbGVjdGVkO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXIgPSBjZWxsUmVuZGVyZXJGYWN0LmdldENlbGxSZW5kZXJlcihyb3cuY2VsbHNbaV0uY2VsbFR5cGUgfHwgZW51bV8xLkNlbGxUeXBlLkRhdGEpO1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGNlbGxSZW5kZXJlci5yZW5kZXIocm93LmNlbGxzW2ldLCByb3cuZGF0YSwgeyAnaW5kZXgnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpID8gcm93LmluZGV4LnRvU3RyaW5nKCkgOiAnJyB9KTtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSA9PT0gZW51bV8xLkNlbGxUeXBlLkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihjb25zdGFudF8xLnF1ZXJ5Q2VsbEluZm8sIGVqMl9iYXNlXzEuZXh0ZW5kKGNlbGxBcmdzLCB7IGNlbGw6IHRkLCBjb2x1bW46IGNlbGwuY29sdW1uIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoY29uc3RhbnRfMS5yb3dEYXRhQm91bmQsIGVqMl9iYXNlXzEuZXh0ZW5kKHJvd0FyZ3MsIHsgcm93OiB0ciB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgdHIuY2xhc3NMaXN0LmFkZChyb3cuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUuYnVpbGRBdHRyaWJ1dGVGcm9tUm93ID0gZnVuY3Rpb24gKHRyLCByb3cpIHtcbiAgICAgICAgICAgIHZhciBhdHRyID0ge307XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHsgJ3Jvd2luZGV4JzogJ2FyaWEtcm93aW5kZXgnLCAnZGF0YVVJRCc6ICdkYXRhLXVpZCcsICdhcmlhU2VsZWN0ZWQnOiAnYXJpYS1zZWxlY3RlZCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1yb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNBbHRSb3cpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtYWx0cm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocm93LmluZGV4KSkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5yb3dpbmRleF0gPSByb3cuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnJvd1NwYW4pIHtcbiAgICAgICAgICAgICAgICBhdHRyLnJvd1NwYW4gPSByb3cucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cudWlkKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmRhdGFVSURdID0gcm93LnVpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5hcmlhU2VsZWN0ZWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0ci5jbGFzcyA9IGNsYXNzZXM7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKHRyLCBhdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd1JlbmRlcmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dSZW5kZXJlciA9IFJvd1JlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFR5cGU7XG4gICAgKGZ1bmN0aW9uIChDZWxsVHlwZSkge1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRhdGFcIl0gPSAwXSA9IFwiRGF0YVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkhlYWRlclwiXSA9IDFdID0gXCJIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJTdW1tYXJ5XCJdID0gMl0gPSBcIlN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cFN1bW1hcnlcIl0gPSAzXSA9IFwiR3JvdXBTdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiQ2FwdGlvblN1bW1hcnlcIl0gPSA0XSA9IFwiQ2FwdGlvblN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJGaWx0ZXJcIl0gPSA1XSA9IFwiRmlsdGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSW5kZW50XCJdID0gNl0gPSBcIkluZGVudFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwQ2FwdGlvblwiXSA9IDddID0gXCJHcm91cENhcHRpb25cIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cENhcHRpb25FbXB0eVwiXSA9IDhdID0gXCJHcm91cENhcHRpb25FbXB0eVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkV4cGFuZFwiXSA9IDldID0gXCJFeHBhbmRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJIZWFkZXJJbmRlbnRcIl0gPSAxMF0gPSBcIkhlYWRlckluZGVudFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIlN0YWNrZWRIZWFkZXJcIl0gPSAxMV0gPSBcIlN0YWNrZWRIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEZXRhaWxIZWFkZXJcIl0gPSAxMl0gPSBcIkRldGFpbEhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRldGFpbEV4cGFuZFwiXSA9IDEzXSA9IFwiRGV0YWlsRXhwYW5kXCI7XG4gICAgfSkoQ2VsbFR5cGUgPSBleHBvcnRzLkNlbGxUeXBlIHx8IChleHBvcnRzLkNlbGxUeXBlID0ge30pKTtcbiAgICB2YXIgUmVuZGVyVHlwZTtcbiAgICAoZnVuY3Rpb24gKFJlbmRlclR5cGUpIHtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiSGVhZGVyXCJdID0gMF0gPSBcIkhlYWRlclwiO1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJDb250ZW50XCJdID0gMV0gPSBcIkNvbnRlbnRcIjtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiU3VtbWFyeVwiXSA9IDJdID0gXCJTdW1tYXJ5XCI7XG4gICAgfSkoUmVuZGVyVHlwZSA9IGV4cG9ydHMuUmVuZGVyVHlwZSB8fCAoZXhwb3J0cy5SZW5kZXJUeXBlID0ge30pKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2VudW0uanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGwob3B0aW9ucykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbCA9IENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93KG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJvdztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93ID0gUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2RhdGFfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmluaXREYXRhTWFuYWdlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd3NBZGRlZCwgdGhpcy5hZGRSb3dzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yZW1vdmVSb3dzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHRoaXMuaW5pdERhdGFNYW5hZ2VyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVwZGF0ZURhdGEsIHRoaXMuY3J1ZEFjdGlvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmFkZERlbGV0ZUFjdGlvbiwgdGhpcy5nZXREYXRhLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBEYXRhLnByb3RvdHlwZS5pbml0RGF0YU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlciA9IGdPYmouZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgPyBnT2JqLmRhdGFTb3VyY2UgOlxuICAgICAgICAgICAgICAgIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouZGF0YVNvdXJjZSkgPyBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcigpIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZ09iai5kYXRhU291cmNlKSk7XG4gICAgICAgICAgICBnT2JqLnF1ZXJ5ID0gZ09iai5xdWVyeSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuUXVlcnkgPyBnT2JqLnF1ZXJ5IDogbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeSA9IGZ1bmN0aW9uIChza2lwUGFnZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IGdPYmoucXVlcnkuY2xvbmUoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93RmlsdGVyaW5nICYmIGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNUeXBlID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbC5maWVsZCkudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNUeXBlICE9PSAnZGF0ZScgJiYgc1R5cGUgIT09ICdkYXRldGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKGNvbC5maWVsZCwgY29sLm9wZXJhdG9yLCBjb2wudmFsdWUsICFjb2wubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHRoaXMuZ2V0RGF0ZVByZWRpY2F0ZShjb2wpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnNlYXJjaFNldHRpbmdzLmtleS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc1NldHRpbmdzID0gZ09iai5zZWFyY2hTZXR0aW5ncztcbiAgICAgICAgICAgICAgICBzU2V0dGluZ3MuZmllbGRzID0gc1NldHRpbmdzLmZpZWxkcy5sZW5ndGggPyBzU2V0dGluZ3MuZmllbGRzIDogZ09iai5nZXRDb2x1bW5GaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICAgICAgcXVlcnkuc2VhcmNoKHNTZXR0aW5ncy5rZXksIHNTZXR0aW5ncy5maWVsZHMsIHNTZXR0aW5ncy5vcGVyYXRvciwgc1NldHRpbmdzLmlnbm9yZUNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5hZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZSBpbnN0YW5jZW9mIEFycmF5ID8gY29sdW1uLnR5cGUgOiBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7IHJldHVybiBxdWVyeS5hZ2dyZWdhdGUodHlwZSwgY29sdW1uLmZpZWxkKTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSAmJiBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICB2YXIgc29ydEdycCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5zLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbnNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuc29ydEJ5KGNvbHVtbnNbaV0uZmllbGQsIGNvbHVtbnNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRHcnAucHVzaChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc29ydEdycC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5zb3J0Qnkoc29ydEdycFtpXS5maWVsZCwgc29ydEdycFtpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1BhZ2luZyB8fCBnT2JqLmVuYWJsZVZpcnR1YWxpemF0aW9uKSAmJiBza2lwUGFnZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnBhZ2UoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UsIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5ncm91cChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoYXJncywgcXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAnJyB9OyB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoYXJncy5mb3JlaWduS2V5RGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFyZ3MuZm9yZWlnbktleURhdGEpLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgYXJncy5mb3JlaWduS2V5RGF0YSA6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCkpO1xuICAgICAgICAgICAgc3dpdGNoIChhcmdzLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIucmVtb3ZlKGtleSwgYXJncy5kYXRhWzBdLCBudWxsLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5pbnNlcnQoYXJncy5kYXRhLCBudWxsLCBxdWVyeSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YU1hbmFnZXIucmVhZHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZHkgPSB0aGlzLmRhdGFNYW5hZ2VyLnJlYWR5O1xuICAgICAgICAgICAgICAgIHJlYWR5LnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5jcnVkQWN0aW9ucyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBwciA9ICdwcm9taXNlJztcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleShhcmdzLmZvcmVpZ25LZXlEYXRhICYmXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYXJncy5mb3JlaWduS2V5RGF0YSkubGVuZ3RoID8gYXJncy5mb3JlaWduS2V5RGF0YSA6XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIudXBkYXRlKGtleSwgYXJncy5kYXRhLCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1twcl0gPSBwcm9taXNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jcnVkQWN0aW9uLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNoYW5nZXMoY2hhbmdlcywga2V5LCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaXNSZW1vdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLm9mZmxpbmUgIT09IHRydWUgJiYgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLnVybCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRlUHJlZGljYXRlID0gZnVuY3Rpb24gKGZpbHRlck9iamVjdCkge1xuICAgICAgICAgICAgdmFyIHByZXZEYXRlO1xuICAgICAgICAgICAgdmFyIG5leHREYXRlO1xuICAgICAgICAgICAgdmFyIHByZXZPYmogPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXMoZmlsdGVyT2JqZWN0KSk7XG4gICAgICAgICAgICB2YXIgbmV4dE9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG5ldyBEYXRlKGZpbHRlck9iamVjdC52YWx1ZSk7XG4gICAgICAgICAgICBwcmV2RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpIC0gMSkpO1xuICAgICAgICAgICAgbmV4dERhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSArIDIpKTtcbiAgICAgICAgICAgIHByZXZPYmoudmFsdWUgPSBwcmV2RGF0ZTtcbiAgICAgICAgICAgIG5leHRPYmoudmFsdWUgPSBuZXh0RGF0ZTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcpIHtcbiAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFuJztcbiAgICAgICAgICAgICAgICBuZXh0T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW5vcmVxdWFsJztcbiAgICAgICAgICAgICAgICBuZXh0T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlU3QgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUocHJldk9iai5maWVsZCwgcHJldk9iai5vcGVyYXRvciwgcHJldk9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZUVuZCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShuZXh0T2JqLmZpZWxkLCBuZXh0T2JqLm9wZXJhdG9yLCBuZXh0T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnID8gcHJlZGljYXRlU3QuYW5kKHByZWRpY2F0ZUVuZCkgOiBwcmVkaWNhdGVTdC5vcihwcmVkaWNhdGVFbmQpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5hZGRSb3dzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBlLnJlY29yZHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24uc3BsaWNlKGUudG9JbmRleCwgMCwgZS5yZWNvcmRzW2kgLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLnJlbW92ZVJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbjtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uID0ganNvbi5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gZS5pbmRleGVzLmluZGV4T2YoaW5kZXgpID09PSAtMTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd3NBZGRlZCwgdGhpcy5hZGRSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucmVtb3ZlUm93cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5pbml0RGF0YU1hbmFnZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVwZGF0ZURhdGEsIHRoaXMuY3J1ZEFjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5hZGREZWxldGVBY3Rpb24sIHRoaXMuZ2V0RGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEYXRhO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EYXRhID0gRGF0YTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuL3Jvdy1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgcm93X3JlbmRlcmVyXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbnRlbnRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb250ZW50UmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29sdW1uRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBkcm9wcGVkRWxlbWVudDogZS5kcm9wcGVkRWxlbWVudCB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJhZkNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWFTZXJ2aWNlLnNldEJ1c3koX3RoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbnRlbnRSZWFkeSwge30pO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5kYXRhQm91bmQsIHt9KTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKF90aGlzLmFyZ3MucmVxdWVzdFR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgKyAnLWNvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShhY3Rpb24sIF90aGlzLmFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IHRoaXMuZ2V0TW9kZWxHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5zZXRWaXNpYmxlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2xHcm91cFJlZnJlc2gsIHRoaXMuY29sR3JvdXBSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jb250ZW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGlubmVyRGl2LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKGlubmVyRGl2LCB7IGJ1c3k6IGZhbHNlIH0pO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgY29udGVudERpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUNvbnRlbnRUYWJsZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUoY29udGVudERpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmdldFRhYmxlKCksIHtcbiAgICAgICAgICAgICAgICBtdWx0aXNlbGVjdGFibGU6IHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29udGVudERyb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY3JlYXRlQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NvbnRlbnRfdGFibGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoaXMuZ2V0Q29sR3JvdXAoKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5JykpO1xuICAgICAgICAgICAgaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyRGl2O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoQ29udGVudFJvd3MgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IHt9OyB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBnT2JqLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0cjtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIG1vZGVsRGF0YSA9IHRoaXMuZ2VuZXJhdG9yLmdlbmVyYXRlUm93cyhkYXRhU291cmNlLCBhcmdzKTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IHRoaXMuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vZGVsRGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5yb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhW2ldLCBjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGdPYmouZ2V0Um93VGVtcGxhdGUoKShlajJfYmFzZV8yLmV4dGVuZCh7IGluZGV4OiBpIH0sIGRhdGFTb3VyY2VbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVFIgPSBlbGVtZW50c1tqXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndHInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVFIgfHwgKGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwgJiYgZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCgndHInKS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHIgPSBpc1RSID8gZWxlbWVudHNbal0gOiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yKCd0cicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKG1vZGVsRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsRGF0YVtpXS5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkID0gdHIucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbDpub3QoLmUtaGlkZSknKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdlLWRldGFpbHJvd3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzLnB1c2godHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5nZXRUYWJsZSgpLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgICAgICB1dGlsXzEuZ2V0VXBkYXRlVXNpbmdSYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKHRib2R5KTtcbiAgICAgICAgICAgICAgICB0Ym9keSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcHBlbmRDb250ZW50KHRib2R5LCBmcmFnLCBhcmdzKTtcbiAgICAgICAgICAgIH0sIHRoaXMucmFmQ2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRib2R5LCBmcmFnLCBhcmdzKSB7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRQYW5lbCA9IGZ1bmN0aW9uIChwYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UGFuZWwgPSBwYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50VGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFRhYmxlID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93RWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dFbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0Um93RWxlbWVudHMgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucm93RWxlbWVudHMgPSBlbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgdmFyIHRlc3RSb3c7XG4gICAgICAgICAgICByb3dzLnNvbWUoZnVuY3Rpb24gKHIpIHsgaWYgKHIuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgdGVzdFJvdyA9IHI7XG4gICAgICAgICAgICB9IHJldHVybiByLmlzRGF0YVJvdzsgfSk7XG4gICAgICAgICAgICB2YXIgdGFza3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBjbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBjbGVuOyBjKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhblNraXAoY29sdW1uLCB0ZXN0Um93LCBpZHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheVZhbCA9IGNvbHVtbi52aXNpYmxlID09PSB0cnVlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmdldENvbEdyb3VwKCkuY2hpbGROb2Rlc1tpZHhdLCB7ICdkaXNwbGF5JzogZGlzcGxheVZhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENvbnRlbnRSb3dzKHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY29sR3JvdXBSZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q29sR3JvdXAoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IHRoaXMuZ2V0Q29sR3JvdXAoKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5pbm5lckhUTUwgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUNvbnRlbnREcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzEuRHJvcHBhYmxlKGdPYmouZ2V0Q29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jYW5Ta2lwID0gZnVuY3Rpb24gKGNvbHVtbiwgcm93LCBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93KSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnZpc2libGUpIHx8XG4gICAgICAgICAgICAgICAgcm93LmNlbGxzW2luZGV4XS52aXNpYmxlID09PSBjb2x1bW4udmlzaWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0TW9kZWxHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IgPSB0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nID8gbmV3IGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwTW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpIDogbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlckVtcHR5ID0gZnVuY3Rpb24gKHRib2R5KSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAodWlkLCBzZXQsIGNsZWFyQWxsKSB7XG4gICAgICAgICAgICB0aGlzLmdldFJvd3MoKS5maWx0ZXIoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gY2xlYXJBbGwgfHwgdWlkID09PSByb3cudWlkOyB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5pc1NlbGVjdGVkID0gc2V0OyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGVudFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29udGVudFJlbmRlciA9IENvbnRlbnRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY29udGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCByb3dfMSwgZW51bV8xLCBjZWxsXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24gPyBhcmdzLnN0YXJ0SW5kZXggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aDsgaSA8IGxlbjsgaSsrLCBzdGFydEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhkYXRhW2ldLCBzdGFydEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZW5zdXJlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29scy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsRXhwYW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGRhdGEsIGluZGV4LCBjc3NDbGFzcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgb3B0aW9ucy51aWQgPSB1dGlsXzEuZ2V0VWlkKCdncmlkLXJvdycpO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgb3B0aW9ucy5pc0RhdGFSb3cgPSB0cnVlO1xuICAgICAgICAgICAgb3B0aW9ucy5jc3NDbGFzcyA9IGNzc0NsYXNzO1xuICAgICAgICAgICAgb3B0aW9ucy5pc0FsdFJvdyA9IHRoaXMucGFyZW50LmVuYWJsZUFsdFJvdyA/IGluZGV4ICUgMiAhPT0gMCA6IGZhbHNlO1xuICAgICAgICAgICAgb3B0aW9ucy5pc1NlbGVjdGVkID0gdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkuaW5kZXhPZihpbmRleCkgPiAtMTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IHRoaXMuZW5zdXJlQ29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSBjZWxscy5jb25jYXQodGhpcy5nZW5lcmF0ZUNlbGxzKG9wdGlvbnMpKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGxzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHVtbWllcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIGR1bW1pZXMuZm9yRWFjaChmdW5jdGlvbiAoZHVtbXksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRtcC5wdXNoKF90aGlzLmdlbmVyYXRlQ2VsbChkdW1teSwgb3B0aW9ucy51aWQsIHVuZGVmaW5lZCwgbnVsbCwgaW5kZXgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHJvd0lkLCBjZWxsVHlwZSwgY29sU3Bhbiwgb0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQgfHwgY29sdW1uLnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogcm93SWQsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsVHlwZSkgPyBjZWxsVHlwZSA6IGVudW1fMS5DZWxsVHlwZS5EYXRhLFxuICAgICAgICAgICAgICAgICdjb2xTcGFuJzogY29sU3BhblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChvcHQuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgIG9wdC5pbmRleCA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaFJvd3MgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5jZWxscyA9IF90aGlzLmdlbmVyYXRlQ2VsbHMocm93KTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93TW9kZWxHZW5lcmF0b3IgPSBSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL21vZGVscy9yb3dcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBlajJfYmFzZV8xLCBlbnVtXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cE1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cE1vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgX3RoaXMuc3VtbWFyeU1vZGVsR2VuID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmNhcHRpb25Nb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MuY2FsbCh0aGlzLCBkYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uID8gKHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogZGF0YS5yZWNvcmRzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoMCwgZGF0YVtpXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdyb3VwZWRSZWNvcmRzID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhLCByYXcpIHtcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IHJhdztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEuaXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YS5Hcm91cEd1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHRoaXMucm93cy5jb25jYXQodGhpcy5nZW5lcmF0ZURhdGFSb3dzKGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCwgZGF0YVtqXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KHRoaXMuZ2VuZXJhdGVDYXB0aW9uUm93KGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaXRlbXMgJiYgZGF0YS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCArIDEsIGRhdGEuaXRlbXMsIGRhdGEuaXRlbXMubGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gdGhpcy5yb3dzKS5wdXNoLmFwcGx5KF9hLCB0aGlzLnN1bW1hcnlNb2RlbEdlbi5nZW5lcmF0ZVJvd3MoZGF0YSwgeyBsZXZlbDogbGV2ZWwgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2FwdGlvblJvd0NlbGxzID0gZnVuY3Rpb24gKGZpZWxkLCBpbmRlbnQsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwZWRMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRlbnQgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IDEgOlxuICAgICAgICAgICAgICAgICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCArIGdyb3VwZWRMZW4gKyAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCA/IDEgOiAwKSAtXG4gICAgICAgICAgICAgICAgICAgIGluZGVudCArICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCA/IC0xIDogMCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoICYmICF0aGlzLmNhcHRpb25Nb2RlbEdlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FwdGlvbkNlbGxzID0gdGhpcy5jYXB0aW9uTW9kZWxHZW4uZ2VuZXJhdGVSb3dzKGRhdGEpWzBdO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGRhdGEsIGNhcHRpb25DZWxscy5kYXRhKTtcbiAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IGNhcHRpb25DZWxscy5jZWxscy5maWx0ZXIoZnVuY3Rpb24gKGNlbGwpIHsgcmV0dXJuIGNlbGwudmlzaWJsZTsgfSk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZXMgPSB2aXNpYmxlcy5zbGljZShncm91cGVkTGVuICsgMSwgdmlzaWJsZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgLSB2aXNpYmxlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29scyA9ICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbY29sdW1uXSA6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgY29scy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcEZsYWcgPSB3RmxhZyAmJiBpbmRleGVzLmluZGV4T2YoaW5kZW50KSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRtcEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxUeXBlID0gIV90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCB0bXBGbGFnID9cbiAgICAgICAgICAgICAgICAgICAgZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiA6IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eTtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24gPyBpbmRlbnQgKyBncm91cGVkTGVuIDogaW5kZW50O1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGNvbHVtbiwgbnVsbCwgY2VsbFR5cGUsIGluZGVudCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjZWxscy5wdXNoLmFwcGx5KGNlbGxzLCB2aXNpYmxlcyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2FwdGlvblJvdyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChkYXRhLmZpZWxkKTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkYXRhKTtcbiAgICAgICAgICAgIGlmIChjb2wpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZmllbGQgPSBkYXRhLmZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5pc0RhdGFSb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMuZ2V0Q2FwdGlvblJvd0NlbGxzKGRhdGEuZmllbGQsIGluZGVudCwgcm93LmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVEYXRhUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IHRoaXMuZ2VuZXJhdGVSb3coZGF0YVtpXSwgdGhpcy5pbmRleCwgaSA/IHVuZGVmaW5lZCA6ICdlLWZpcnN0Y2hpbGRyb3cnLCBpbmRlbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy51bnNoaWZ0KHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVJbmRlbnRDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaFJvd3MgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IF90aGlzLmdlbmVyYXRlQ2VsbHMocm93KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3cuaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKHJvdy5pbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLnVuc2hpZnQoX3RoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY1JvdyA9IF90aGlzLmdlbmVyYXRlQ2FwdGlvblJvdyhyb3cuZGF0YSwgcm93LmluZGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IGNSb3cuY2VsbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cE1vZGVsR2VuZXJhdG9yO1xuICAgIH0ocm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cE1vZGVsR2VuZXJhdG9yID0gR3JvdXBNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL21vZGVscy9jb2x1bW5cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL21vZGVscy9jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGNvbHVtbl8xLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVudW1fMSwgY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBfdGhpcy5jb2x1bW5TZWxlY3Rvcihjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goeyBjb2x1bW5zOiBjb2x1bW5zIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY29sdW1ucy5wdXNoKG5ldyBjb2x1bW5fMS5Db2x1bW4oe30pKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2gobmV3IGNvbHVtbl8xLkNvbHVtbih7fSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1ucy5wdXNoLmFwcGx5KGNvbHVtbnMsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoaW5wdXQsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5idWlsZFN1bW1hcnlEYXRhKGlucHV0LCBhcmdzKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmdldERhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcm93cy5wdXNoKF90aGlzLmdldEdlbmVyYXRlZFJvdyhyb3csIGRhdGFbaW5kZXhdLCBhcmdzID8gYXJncy5sZXZlbCA6IHVuZGVmaW5lZCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHZW5lcmF0ZWRSb3cgPSBmdW5jdGlvbiAoc3VtbWFyeVJvdywgZGF0YSwgcmF3KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGVudHMgPSB0aGlzLmdldEluZGVudEJ5TGV2ZWwocmF3KTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRMZW5ndGggPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICsgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlID8gMSA6IDApO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiB0bXAucHVzaChfdGhpcy5nZXRHZW5lcmF0ZWRDZWxsKHZhbHVlLCBzdW1tYXJ5Um93LCBpbmRleCA+PSBpbmRlbnRMZW5ndGggPyBfdGhpcy5nZXRDZWxsVHlwZSgpIDogZW51bV8xLkNlbGxUeXBlLkluZGVudCwgaW5kZW50c1tpbmRleF0pKTsgfSk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyh7IGRhdGE6IGRhdGEsIGF0dHJpYnV0ZXM6IHsgY2xhc3M6ICdlLXN1bW1hcnlyb3cnIH0gfSk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0bXA7XG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRtcC5zb21lKGZ1bmN0aW9uIChjZWxsKSB7IHJldHVybiBjZWxsLmlzRGF0YUNlbGwgJiYgY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R2VuZXJhdGVkQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHN1bW1hcnlSb3csIGNlbGxUeXBlLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBzQ29sdW1uID0gc3VtbWFyeVJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoc2NvbHVtbikgeyByZXR1cm4gc2NvbHVtbi5jb2x1bW5OYW1lID09PSBjb2x1bW4uZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgdmFyIGF0dHJzID0geyAnc3R5bGUnOiB7ICd0ZXh0QWxpZ24nOiBjb2x1bW4udGV4dEFsaWduIH0gfTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgICAgICAgICBhdHRycy5jbGFzcyA9IGluZGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNDb2x1bW4pLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogc0NvbHVtbiAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzQ29sdW1uLmZvb3RlclRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHx8IHNDb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBzQ29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogc0NvbHVtbiB8fCB7fSxcbiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcyc6IGF0dHJzLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmJ1aWxkU3VtbWFyeURhdGEgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1teSA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1bW1hcnlSb3dzID0gdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0ge307XG4gICAgICAgICAgICB2YXIga2V5ID0gJyc7XG4gICAgICAgICAgICBzdW1tYXJ5Um93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBzaW5nbGUgPSB7fTtcbiAgICAgICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlID0gX3RoaXMuc2V0VGVtcGxhdGUoY29sdW1uLCAoYXJncyAmJiBhcmdzLmFnZ3JlZ2F0ZXMpID8gYXJncyA6IGRhdGEsIHNpbmdsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHVtbXkucHVzaChzaW5nbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZHVtbXk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiAnZS1pbmRlbnRjZWxsdG9wJzsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoY29sdW1uLCBkYXRhLCBzaW5nbGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZTtcbiAgICAgICAgICAgIHZhciBoZWxwZXIgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JtYXRGbiA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGE7IH07IH0pKCk7XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBkYXRhO1xuICAgICAgICAgICAgaWYgKCEodHlwZXMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICB0eXBlcyA9IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcCA9IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBncm91cC5hZ2dyZWdhdGVzICYmIGdyb3VwLmFnZ3JlZ2F0ZXNba2V5XSA/IGdyb3VwLmFnZ3JlZ2F0ZXNba2V5XSA6XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5jYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgZ3JvdXAuYWdncmVnYXRlcyA/IGdyb3VwLnJlc3VsdCA6IGRhdGEsIGNvbHVtbiwgX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0gPSBzaW5nbGVbZGlzcF0gfHwge307XG4gICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdW3R5cGVdID0gZm9ybWF0Rm4odmFsKTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAuZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdLmZpZWxkID0gZ3JvdXAuZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXS5rZXkgPSBncm91cC5rZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXIuZm9ybWF0ID0gY29sdW1uLmdldEZvcm1hdHRlcigpO1xuICAgICAgICAgICAgY29sdW1uLnNldFRlbXBsYXRlKGhlbHBlcik7XG4gICAgICAgICAgICByZXR1cm4gc2luZ2xlO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgdmFyIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEluZGVudEJ5TGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwpIHtcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5tYXAoZnVuY3Rpb24gKHYsIGluZHgpIHsgcmV0dXJuIGluZHggPD0gbGV2ZWwgLSAxID8gJycgOiAnZS1pbmRlbnRjZWxsdG9wJzsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgfShTdW1tYXJ5TW9kZWxHZW5lcmF0b3IpKTtcbiAgICBleHBvcnRzLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgdmFyIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbml0VmFsID0geyBjb2x1bW5zOiBbXSB9O1xuICAgICAgICAgICAgcmV0dXJuIFtfc3VwZXIucHJvdG90eXBlLmdldERhdGEuY2FsbCh0aGlzKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cikge1xuICAgICAgICAgICAgICAgICAgICBwcmV2LmNvbHVtbnMgPSBwcmV2LmNvbHVtbnMuY29uY2F0KGN1ci5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgfSwgaW5pdFZhbCldO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmdldERhdGEoKVswXS5jb2x1bW5zIHx8IFtdKS5sZW5ndGggPT09IDA7XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgfShTdW1tYXJ5TW9kZWxHZW5lcmF0b3IpKTtcbiAgICBleHBvcnRzLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl6ZXIgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZXIgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmZvcm1hdHRlci50b1ZpZXcodmFsdWUsIGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBsaXRlcmFscyA9IFsnaW5kZXgnXTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjZWxsLmNvbHVtbi5nZXRDb2x1bW5UZW1wbGF0ZSgpKGVqMl9iYXNlXzEuZXh0ZW5kKHsgJ2luZGV4JzogYXR0cmlidXRlc1tsaXRlcmFsc1swXV0gfSwgZGF0YSkpO1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lclRleHQgKyAnIGlzIHRlbXBsYXRlIGNlbGwnICsgJyBjb2x1bW4gaGVhZGVyICcgK1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5pbnZva2VGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5kb2VzSW1wbGVtZW50SW50ZXJmYWNlKGNvbHVtbi5mb3JtYXR0ZXIsICdnZXRWYWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBjb2x1bW4uZm9ybWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBmb3JtYXR0ZXIoKS5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29sdW1uLmZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbHVtbi5mb3JtYXR0ZXIoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlci5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFREID0gZnVuY3Rpb24gKHRkLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbm5lckh0bWwgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShjb2x1bW4uZmllbGQsIGRhdGEsIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmZvcm1hdChjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHZhciBpc051bGwgPSAodmFsdWUgIT09ICd0cnVlJyAmJiB2YWx1ZSAhPT0gJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5kaXNwbGF5QXNDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2tib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sID0gaXNOdWxsID8gbnVsbCA6ICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZGlzYWJsZWQgJyArICh2YWx1ZSA9PT0gJ3RydWUnID8gJ2NoZWNrZWQnIDogJycpICsgJy8+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbGVTdHIgPSBpc051bGwgPyBudWxsIDogdmFsdWUgPT09ICd0cnVlJyA/ICdUcnVlJyA6ICdGYWxzZSc7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCA9IGxvY2FsZVN0ciA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KGxvY2FsZVN0cikgOiBpbm5lckh0bWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyb21Gb3JtYXR0ZXIgPSB0aGlzLmludm9rZUZvcm1hdHRlcihjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpID8gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmcm9tRm9ybWF0dGVyKSA/ICcnIDogZnJvbUZvcm1hdHRlci50b1N0cmluZygpIDogaW5uZXJIdG1sO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpbm5lckh0bWwgKyAnIGNvbHVtbiBoZWFkZXIgJyArIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZhbHVhdGUobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJIdG1sLCBjb2x1bW4uZ2V0RG9tU2V0dGVyID8gY29sdW1uLmdldERvbVNldHRlcigpIDogJ2lubmVySFRNTCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwsIHByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IHZvaWQgMCkgeyBwcm9wZXJ0eSA9ICdpbm5lckhUTUwnOyB9XG4gICAgICAgICAgICBub2RlW3Byb3BlcnR5XSA9IGlubmVySHRtbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnRleHRBbGlnbiA9IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYnVpbGRBdHRyaWJ1dGVGcm9tQ2VsbCA9IGZ1bmN0aW9uIChub2RlLCBjZWxsKSB7XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3AgPSB7ICdjb2xpbmRleCc6ICdhcmlhLWNvbGluZGV4JyB9O1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbFNwYW4pIHtcbiAgICAgICAgICAgICAgICBhdHRyLmNvbFNwYW4gPSBjZWxsLmNvbFNwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5yb3dTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5yb3dTcGFuID0gY2VsbC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS10ZW1wbGF0ZWNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2guYXBwbHkoY2xhc3NlcywgWydlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuY29saW5kZXhdID0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHIuY2xhc3MgPSBjbGFzc2VzO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLnZhbHVlQWNjZXNzb3IoY29sdW1uLmZpZWxkLCBkYXRhLCBjb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2VsbFJlbmRlcmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsUmVuZGVyZXIgPSBDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwnLCBhdHRyczogeyByb2xlOiAnY29sdW1uaGVhZGVyJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIF90aGlzLmFyaWFTZXJ2aWNlID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICBfdGhpcy5oVHh0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcnRleHQnIH0pO1xuICAgICAgICAgICAgX3RoaXMuc29ydEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXNvcnRmaWx0ZXJkaXYgZS1pY29ucycgfSk7XG4gICAgICAgICAgICBfdGhpcy5ndWkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3VpLmNsb25lTm9kZSgpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChjZWxsLCBub2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFuKG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlcGFyZUhlYWRlcihjZWxsLCBub2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5jbGVhbiA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVIZWFkZXIgPSBmdW5jdGlvbiAoY2VsbCwgbm9kZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyID0ge307XG4gICAgICAgICAgICB2YXIgaW5uZXJESVYgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGV4dCA9IHRoaXMuaFR4dEVsZS5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIGhlYWRlclRleHRbY29sdW1uLmdldERvbVNldHRlcigpXSA9IHZhbHVlO1xuICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAnZS1tYXBwaW5ndWlkJzogY29sdW1uLnVpZCxcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZS1oZWFkZXJjZWxsZGl2J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwobm9kZSwgY2VsbCk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJESVYpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLnNvcnRFbGUuY2xvbmVOb2RlKCkpO1xuICAgICAgICAgICAgaWYgKGNlbGwuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNlbGwuY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBhcmlhQXR0ci5zb3J0ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgYXJpYUF0dHIuZ3JhYmJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5jbGFzc05hbWUgPSBjb2x1bW4uYWxsb3dSZXNpemluZyA/ICdlLXJoYW5kbGVyIGUtcmN1cnNvcicgOiAnZS1yc3VwcHJlc3MnO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnMobm9kZSwgYXJpYUF0dHIpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZXh0QWxpZ24pIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZXh0QWxpZ24pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsaWdubWVudCA9IGNvbHVtbi5oZWFkZXJUZXh0QWxpZ24gfHwgY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbm1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWdubWVudCA9PT0gJ3JpZ2h0JyB8fCBhbGlnbm1lbnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ2UtcmlnaHRhbGlnbicgOiAnZS1sZWZ0YWxpZ24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1yb3dzcGFuJywgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwucm93U3BhbikgPyBjZWxsLnJvd1NwYW4gOiAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWNvbHNwYW4nLCAnMScpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSGVhZGVyQ2VsbFJlbmRlcmVyID0gSGVhZGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBcmlhU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFyaWFTZXJ2aWNlKCkge1xuICAgICAgICB9XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHByb3BzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgICAgICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWdbbmFtZV0sIG9wdGlvbnNbbmFtZV0pOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEV4cGFuZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGV4cGFuZCkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmV4cGFuZCwgZXhwYW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldFNvcnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5zb3J0LCBkaXJlY3Rpb24sIHR5cGVvZiBkaXJlY3Rpb24gPT09ICdib29sZWFuJyk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRCdXN5ID0gZnVuY3Rpb24gKHRhcmdldCwgaXNCdXN5KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuYnVzeSwgaXNCdXN5KTtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5pbnZhbGlkLCBudWxsLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEdyYWJiZWQgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0dyYWJiZWQsIHJlbW92ZSkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmdyYWJiZWQsIGlzR3JhYmJlZCwgcmVtb3ZlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldERyb3BUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc1RhcmdldCkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmRyb3BlZmZlY3QsICdjb3B5JywgIWlzVGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFyaWFTZXJ2aWNlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5BcmlhU2VydmljZSA9IEFyaWFTZXJ2aWNlO1xuICAgIGZ1bmN0aW9uIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGF0dHJpYnV0ZSwgdmFsdWUsIHJlbW92ZSkge1xuICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBleHBhbmQ6ICdhcmlhLWV4cGFuZGVkJyxcbiAgICAgICAgcm9sZTogJ3JvbGUnLFxuICAgICAgICBzZWxlY3RlZDogJ2FyaWEtc2VsZWN0ZWQnLFxuICAgICAgICBtdWx0aXNlbGVjdGFibGU6ICdhcmlhLW11bHRpc2VsZWN0YWJsZScsXG4gICAgICAgIHNvcnQ6ICdhcmlhLXNvcnQnLFxuICAgICAgICBidXN5OiAnYXJpYS1idXN5JyxcbiAgICAgICAgaW52YWxpZDogJ2FyaWEtaW52YWxpZCcsXG4gICAgICAgIGdyYWJiZWQ6ICdhcmlhLWdyYWJiZWQnLFxuICAgICAgICBkcm9wZWZmZWN0OiAnYXJpYS1kcm9wZWZmZWN0JyxcbiAgICAgICAgaGFzcG9wdXA6ICdhcmlhLWhhc3BvcHVwJyxcbiAgICAgICAgbGV2ZWw6ICdhcmlhLWxldmVsJyxcbiAgICAgICAgY29sY291bnQ6ICdhcmlhLWNvbGNvdW50J1xuICAgIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvYXJpYS1zZXJ2aWNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsIGUtc3RhY2tlZGhlYWRlcmNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICByb2xlOiAnY29sdW1uaGVhZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3RhY2tlZGhlYWRlcmNlbGxkaXYnIH0pO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGNlbGwuY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4udG9vbFRpcCkge1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd0aXRsZScsIGNlbGwuY29sdW1uLnRvb2xUaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5jb2x1bW4udGV4dEFsaWduKSkge1xuICAgICAgICAgICAgICAgIGRpdi5zdHlsZS50ZXh0QWxpZ24gPSBjZWxsLmNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWNvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1yb3dzcGFuJywgJzEnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIgPSBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjZWxsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5JbmRlbnRDZWxsUmVuZGVyZXIgPSBJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cENhcHRpb25DZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBjYXB0aW9uJywgYXR0cnM6IHsgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZm9ybWF0KGNlbGwuY29sdW1uLCBjZWxsLmNvbHVtbi52YWx1ZUFjY2Vzc29yKCdrZXknLCBkYXRhLCBjZWxsLmNvbHVtbikpO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0ICsgJzogJyArIHZhbHVlICsgJyAtICcgKyBkYXRhLmNvdW50ICsgJyAnICtcbiAgICAgICAgICAgICAgICAoZGF0YS5jb3VudCA8IDIgPyB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudCgnSXRlbScpIDogdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQoJ0l0ZW1zJykpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG5vZGUuaW5uZXJIVE1MICsgJyBpcyBncm91cGNhcHRpb24gY2VsbCcpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cENhcHRpb25DZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5Hcm91cENhcHRpb25DZWxsUmVuZGVyZXIgPSBHcm91cENhcHRpb25DZWxsUmVuZGVyZXI7XG4gICAgdmFyIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBjYXB0aW9uJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyID0gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9pbmRlbnQtY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4cGFuZENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFeHBhbmRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEV4cGFuZENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBFeHBhbmRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NOYW1lID0gJ2UtcmVjb3JkcGx1c2V4cGFuZCc7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnLCBkYXRhLmZpZWxkKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdlai1tYXBwaW5ndmFsdWUnLCBkYXRhLmtleSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1nZGlhZ29uYWxkb3duIGUtaWNvbi1nZG93bmFycm93JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4cGFuZENlbGxSZW5kZXJlcjtcbiAgICB9KGluZGVudF9jZWxsX3JlbmRlcmVyXzEuSW5kZW50Q2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5FeHBhbmRDZWxsUmVuZGVyZXIgPSBFeHBhbmRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlckluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXB0b3BsZWZ0Y2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGxkaXYgZS1lbXB0eWNlbGwnLCBpbm5lckhUTUw6ICcmbmJzcDsnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1pbmRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlsaGVhZGVyY2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWVtcHR5Y2VsbCcgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbEV4cGFuZENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbEV4cGFuZENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3djb2xsYXBzZScsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtZXhwYW5kZWQnOiAnZmFsc2UnLCByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWR0ZGlhZ29uYWxyaWdodCBlLWljb24tZ3JpZ2h0YXJyb3cnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyID0gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxSZW5kZXJlckZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsUmVuZGVyZXJGYWN0b3J5KCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsUmVuZGVyTWFwID0ge307XG4gICAgICAgIH1cbiAgICAgICAgQ2VsbFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuYWRkQ2VsbFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIG5hbWUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lIDogZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5nZXRDZWxsUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIGNlbGxSZW5kZXJlciBcIiArIG5hbWUgKyBcIiBpcyBub3QgZm91bmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDZWxsUmVuZGVyZXJGYWN0b3J5O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsUmVuZGVyZXJGYWN0b3J5ID0gQ2VsbFJlbmRlcmVyRmFjdG9yeTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVuZGVyZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyZXJGYWN0b3J5KCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuYWRkUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgdmFyIHJOYW1lID0gZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLlJlbmRlclR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZW5kZXJlck1hcFtyTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcFtyTmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciByTmFtZSA9IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5SZW5kZXJUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVuZGVyZXJNYXBbck5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHJlbmRlcmVyIFwiICsgck5hbWUgKyBcIiBpcyBub3QgZm91bmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcmVyRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyZXJGYWN0b3J5ID0gUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3JlbmRlcmVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNvbnN0YW50XzEsIGNvbHVtbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5XaWR0aFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9Db2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgdmFyIHdGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5XaWR0aChuZXcgY29sdW1uXzEuQ29sdW1uKHsgd2lkdGg6ICczMHB4JyB9KSwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uV2lkdGgobmV3IGNvbHVtbl8xLkNvbHVtbih7IHdpZHRoOiAnMzBweCcgfSksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRDb2x1bW5XaWR0aChjb2x1bW4sIHdGbGFnID8gdW5kZWZpbmVkIDogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0Q29sdW1uV2lkdGggPSBmdW5jdGlvbiAoY29sdW1uLCBpbmRleCwgbW9kdWxlKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKSA6IGluZGV4O1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoKGNXaWR0aCwgY29sdW1uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGhUb1RhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogY29sdW1uSW5kZXgsIHdpZHRoOiBjV2lkdGgsIGNvbHVtbjogY29sdW1uLCBtb2R1bGU6IG1vZHVsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciBmV2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChoZWFkZXJDb2wpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2wuc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XS5zdHlsZS53aWR0aCA9IGZXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZS5lLWlubGluZS1lZGl0Jyk7XG4gICAgICAgICAgICBpZiAoZWRpdCkge1xuICAgICAgICAgICAgICAgIGVkaXQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF0uc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0U2libGluZ3NIZWlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICdwcmV2aW91cycpO1xuICAgICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldEhlaWdodEZyb21EaXJlY3Rpb24oZWxlbWVudCwgJ25leHQnKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91cyArIG5leHQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudFtkaXJlY3Rpb24gKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2libGluZy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2libGluZyA9IHNpYmxpbmdbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLndpZHRoKSAmJiB0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLndpZHRoID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb2x1bW4ud2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KGNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLm1pbldpZHRoICYmIHdpZHRoIDwgcGFyc2VJbnQoY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoY29sdW1uLm1heFdpZHRoICYmIHdpZHRoID4gcGFyc2VJbnQoY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1heFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYWJsZVdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY1dpZHRoID0gdGhpcy5nZXRXaWR0aChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSAhPT0gZmFsc2UgJiYgY1dpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRXaWR0aCArPSBwYXJzZUludChjV2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0V2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGhUb1RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdCh0aGlzLmdldFRhYmxlV2lkdGgodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICB2YXIgZWRpdCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uV2lkdGhTZXJ2aWNlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5XaWR0aFNlcnZpY2UgPSBDb2x1bW5XaWR0aFNlcnZpY2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvd2lkdGgtY29udHJvbGxlci5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFnZVNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTIpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VTaXplc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUGFnZVNldHRpbmdzID0gUGFnZVNldHRpbmdzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9wYWdlLXNldHRpbmdzLmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VsZWN0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VsZWN0aW9uKHBhcmVudCwgc2VsZWN0aW9uU2V0dGluZ3MsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncyA9IHNlbGVjdGlvblNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MsIHR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VsZWN0aW9uJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNFZGl0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmlzRWRpdDtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gZ09iai5nZXRSb3dCeUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIHZhciBzZWxlY3REYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVtpbmRleF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSb3dUeXBlKCkgfHwgIXNlbGVjdGVkUm93IHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNSb3dTZWxlY3RlZCA9IHNlbGVjdGVkUm93Lmhhc0F0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgaXNUb2dnbGUgPSAhaXNUb2dnbGUgPyBpc1RvZ2dsZSA6IGluZGV4ID09PSB0aGlzLnByZXZSb3dJbmRleCAmJiBpc1Jvd1NlbGVjdGVkO1xuICAgICAgICAgICAgaWYgKCFpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdERhdGEsIHJvd0luZGV4OiBpbmRleCwgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHJvdzogc2VsZWN0ZWRSb3csIHByZXZpb3VzUm93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LCB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKGluZGV4KTtcbiAgICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHJvdzogc2VsZWN0ZWRSb3csIHByZXZpb3VzUm93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LCB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RSb3dzQnlSYW5nZSA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzKHRoaXMuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93cyA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcm93SW5kZXhlc1swXV07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIHJvd0luZGV4ZXM6IHJvd0luZGV4ZXMsIHJvdzogc2VsZWN0ZWRSb3csIHJvd0luZGV4OiByb3dJbmRleGVzWzBdLCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhXG4gICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSb3coKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93SW5kZXhlc18xID0gcm93SW5kZXhlczsgX2kgPCByb3dJbmRleGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcm93SW5kZXhlc18xW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1NlbGVjdGlvbihnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXgpLCByb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKHJvd0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRSb3dzVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93SW5kZXhlc18yID0gcm93SW5kZXhlczsgX2kgPCByb3dJbmRleGVzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcm93SW5kZXhlc18yW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcm93SW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciBpc1VuU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5pbmRleE9mKHJvd0luZGV4KSA+IC0xO1xuICAgICAgICAgICAgICAgIGdPYmouc2VsZWN0ZWRSb3dJbmRleCA9IHJvd0luZGV4O1xuICAgICAgICAgICAgICAgIGlmIChpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5zcGxpY2UodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCksIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3Jkcy5zcGxpY2UodGhpcy5zZWxlY3RlZFJlY29yZHMuaW5kZXhPZihzZWxlY3RlZFJvdyksIDEpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdy5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCBmYWxzZSwgbnVsbCwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgW3Jvd0luZGV4XSwgZGF0YSwgW3NlbGVjdGVkUm93XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSwgcm93SW5kZXg6IHJvd0luZGV4LCByb3c6IHNlbGVjdGVkUm93LCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1NlbGVjdGlvbihzZWxlY3RlZFJvdywgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSwgcm93SW5kZXg6IHJvd0luZGV4LCByb3c6IHNlbGVjdGVkUm93LCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRDb2xsZWN0aW9uRnJvbUluZGV4ZXMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICB2YXIgX2EgPSAoc3RhcnRJbmRleCA8IGVuZEluZGV4KSA/XG4gICAgICAgICAgICAgICAgeyBpOiBzdGFydEluZGV4LCBtYXg6IGVuZEluZGV4IH0gOiB7IGk6IGVuZEluZGV4LCBtYXg6IHN0YXJ0SW5kZXggfSwgaSA9IF9hLmksIG1heCA9IF9hLm1heDtcbiAgICAgICAgICAgIGZvciAoOyBpIDw9IG1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPiBlbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJSb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZSb3dJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzUm93U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggJiYgdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRSb3csIHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5wdXNoKHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMucHVzaChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICBzZWxlY3RlZFJvdy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCB0cnVlLCBudWxsLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICAgICAgaWYgKHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVt0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXV0pO1xuICAgICAgICAgICAgICAgICAgICByb3cucHVzaCh0aGlzLnBhcmVudC5nZXRSb3dzKClbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXgucHVzaCh0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd18xID0gdGhpcy5wYXJlbnQuZ2V0Um93QnlJbmRleCh0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93XzEucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHJvd18xLCBmYWxzZSwgdHJ1ZSwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGVkLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yb3dEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCByb3dJbmRleCwgZGF0YSwgcm93KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIHtcbiAgICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsIGRhdGE6IGRhdGEsIHJvdzogcm93XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBjZWxsSW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpIHx8ICFzZWxlY3RlZENlbGwgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0NlbGxTZWxlY3RlZCA9IHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIGlzVG9nZ2xlID0gIWlzVG9nZ2xlID8gaXNUb2dnbGUgOiAhKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJlxuICAgICAgICAgICAgICAgIGNlbGxJbmRleC5yb3dJbmRleCA9PT0gdGhpcy5wcmV2Q0lkeHMucm93SW5kZXggJiYgY2VsbEluZGV4LmNlbGxJbmRleCA9PT0gdGhpcy5wcmV2Q0lkeHMuY2VsbEluZGV4ICYmXG4gICAgICAgICAgICAgICAgaXNDZWxsU2VsZWN0ZWQpO1xuICAgICAgICAgICAgaWYgKGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGwoKTtcbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwsIGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdENlbGxzQnlSYW5nZSA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHN0YXJ0SW5kZXgucm93SW5kZXgsIHN0YXJ0SW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIHZhciBtaW47XG4gICAgICAgICAgICB2YXIgbWF4O1xuICAgICAgICAgICAgdmFyIHN0SW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdmFyIGVkSW5kZXggPSBlbmRJbmRleCA9IGVuZEluZGV4ID8gZW5kSW5kZXggOiBzdGFydEluZGV4O1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBzdGFydEluZGV4LnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHN0YXJ0SW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGwoKTtcbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4LnJvd0luZGV4ID4gZW5kSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICAgICAgICAgIGVuZEluZGV4ID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4LnJvd0luZGV4OyBpIDw9IGVuZEluZGV4LnJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5jZWxsU2VsZWN0aW9uTW9kZSAhPT0gJ2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluID0gaSA9PT0gc3RhcnRJbmRleC5yb3dJbmRleCA/IChzdGFydEluZGV4LmNlbGxJbmRleCkgOiAwO1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBpID09PSBlbmRJbmRleC5yb3dJbmRleCA/IChlbmRJbmRleC5jZWxsSW5kZXgpIDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IHN0YXJ0SW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBlbmRJbmRleC5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IG1pbiA8IG1heCA/IG1pbiA6IG1heCwgbGVuID0gbWluID4gbWF4ID8gbWluIDogbWF4OyBqIDw9IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChpLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzLnB1c2goaik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiBpLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhzdEluZGV4LCBlZEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHN0YXJ0SW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxscyA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGxJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNlbGxMZW4gPSByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlcy5sZW5ndGg7IGogPCBjZWxsTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSwgeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkQ2VsbHNUb1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChjZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KGNlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXhlc1swXS5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBjZWxsSW5kZXhlc1swXS5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxJbmRleGVzXzEgPSBjZWxsSW5kZXhlczsgX2kgPCBjZWxsSW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSBjZWxsSW5kZXhlc18xW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXggPT09IGNlbGxJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCwgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVblNlbGVjdGVkID0gaW5kZXggPiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGxJZHggPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDZWxsSWR4LmluZGV4T2YoY2VsbEluZGV4LmNlbGxJbmRleCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGluZywgW3sgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4ZXM6IFtjZWxsSW5kZXguY2VsbEluZGV4XSB9XSwgc2VsZWN0ZWREYXRhLCBbc2VsZWN0ZWRDZWxsXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxJZHguc3BsaWNlKHNlbGVjdGVkQ2VsbElkeC5pbmRleE9mKGNlbGxJbmRleC5jZWxsSW5kZXgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdlLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXNlbGVjdChldmVudHMuY2VsbERlc2VsZWN0ZWQsIFt7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbY2VsbEluZGV4LmNlbGxJbmRleF0gfV0sIHNlbGVjdGVkRGF0YSwgW3NlbGVjdGVkQ2VsbF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNVblNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oYXJncywgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleC5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbihhcmdzLCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwsIGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKGNlbGxJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleGVzWzBdLCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzXG4gICAgICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhckNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNlbGxEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCBjZWxsSW5kZXhlcywgZGF0YSwgY2VsbHMpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwge1xuICAgICAgICAgICAgICAgIGNlbGxzOiBjZWxscywgZGF0YTogZGF0YSwgY2VsbEluZGV4ZXM6IGNlbGxJbmRleGVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkQ2VsbCwgcm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJvd0luZGV4KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QuYWRkKCdlLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChjZWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IGNlbGw7XG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBjZWxsLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlQ2VsbFByb3BzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZDSWR4cyA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLnByZXZFQ0lkeHMgPSBlbmRJbmRleDtcbiAgICAgICAgICAgIHRoaXMuaXNDZWxsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoICYmIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUm93Q2VsbEluZGV4ID0gZnVuY3Rpb24gKHJvd0NlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGlzUm93QXZhaWw7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCA9PT0gcm93Q2VsbEluZGV4LnJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlzUm93QXZhaWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1Jvd0F2YWlsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXMuaW5kZXhPZihyb3dDZWxsSW5kZXguY2VsbEluZGV4KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcy5wdXNoKHJvd0NlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5wdXNoKHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4ZXM6IFtyb3dDZWxsSW5kZXguY2VsbEluZGV4XSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhckNlbGxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbHMgPSB0aGlzLmdldFNlbGVjdGVkQ2VsbHNFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0NlbGwgPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXM7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93Q2VsbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goY3VycmVudFZpZXdEYXRhW3Jvd0NlbGxbaV0ucm93SW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNMZW4gPSByb3dDZWxsLmxlbmd0aDsgaiA8IGNMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLnBhcmVudC5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxbaV0ucm93SW5kZXgsIHJvd0NlbGxbaV0uY2VsbEluZGV4ZXNbal0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXNlbGVjdChldmVudHMuY2VsbERlc2VsZWN0aW5nLCByb3dDZWxsLCBkYXRhLCBjZWxscyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGVjdGVkQ2VsbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdlLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHNbaV0ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDZWxsU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXNlbGVjdChldmVudHMuY2VsbERlc2VsZWN0ZWQsIHJvd0NlbGwsIGRhdGEsIGNlbGxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRTZWxlY3RlZENlbGxzRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjZWxscyA9IGNlbGxzLmNvbmNhdChbXS5zbGljZS5jYWxsKHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGdCUmVjdCA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgeDEgPSB0aGlzLng7XG4gICAgICAgICAgICB2YXIgeTEgPSB0aGlzLnk7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB1dGlsXzEuZ2V0UG9zaXRpb24oZSk7XG4gICAgICAgICAgICB2YXIgeDIgPSBwb3NpdGlvbi54IC0gZ0JSZWN0LmxlZnQ7XG4gICAgICAgICAgICB2YXIgeTIgPSBwb3NpdGlvbi55IC0gZ0JSZWN0LnRvcDtcbiAgICAgICAgICAgIHZhciB0bXA7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodGhpcy5wYXJlbnQuZWxlbWVudC5vZmZzZXRMZWZ0ICsgMiwgZS5jbGllbnRZKSwgJ3RyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeDEgPiB4Mikge1xuICAgICAgICAgICAgICAgIHRtcCA9IHgyO1xuICAgICAgICAgICAgICAgIHgyID0geDE7XG4gICAgICAgICAgICAgICAgeDEgPSB0bXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeTEgPiB5Mikge1xuICAgICAgICAgICAgICAgIHRtcCA9IHkyO1xuICAgICAgICAgICAgICAgIHkyID0geTE7XG4gICAgICAgICAgICAgICAgeTEgPSB0bXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IHgxICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSB5MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSB4MiAtIHgxICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSB5MiAtIHkxICsgJ3B4JztcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgIWUuY3RybEtleSAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UodGhpcy5zdGFydEluZGV4LCByb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdlLWRpc2FibGV1c2Vyc2VsZWN0Jyk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQuYm9keSwgJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW91c2VEb3duSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZCcpO1xuICAgICAgICAgICAgaWYgKGdyaWRFbGVtZW50ICYmIGdyaWRFbGVtZW50LmlkICE9PSB0aGlzLnBhcmVudC5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkgfHwgZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93Um93RHJhZ0FuZERyb3AgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykgJiYgIWUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzU2luZ2xlU2VsKCkgfHwgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJ3RkJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlbGVjdGlvbmJhY2tncm91bmQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZS1kaXNhYmxldXNlcnNlbGVjdCcpO1xuICAgICAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGdCUmVjdCA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3Rpb24gPSB1dGlsXzEuZ2V0UG9zaXRpb24oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEluZGV4ID0gcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBwb3N0aW9uLnggLSBnQlJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSBwb3N0aW9uLnkgLSBnQlJlY3QudG9wO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRkcmFnYXJlYScgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LmJvZHksICdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJTZWxBZnRlclJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgIT09ICd2aXJ0dWFsc2Nyb2xsJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93U2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5jbGVhclNlbEFmdGVyUmVmcmVzaCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNsZWFyU2VsZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93U2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5jbGVhclNlbEFmdGVyUmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jbGVhclNlbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMudHlwZSkgJiYgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVBvcFVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLm1vZGUpIHx8XG4gICAgICAgICAgICAgICAgIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLmNlbGxTZWxlY3Rpb25Nb2RlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5oaWRlUG9wVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3dzZWxlY3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3codGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGUuc2hpZnRLZXk7XG4gICAgICAgICAgICB0aGlzLnBvcFVwQ2xpY2tIYW5kbGVyKGUpO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dDZWxsU2VsZWN0aW9uSGFuZGxlcihwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApLCBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiB0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93c2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNwYW5jbGlja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNob3dQb3B1cCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utcm93c2VsZWN0IGUtaWNvbnMgZS1pY29uLXJvd3NlbGVjdCcgK1xuICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZScgJiZcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDEgfHwgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCA+IDEpID8gJyBlLXNwYW5jbGlja2VkJyA6ICcnKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCAmJiAhdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpID8gcm93SW5kZXggOiB0aGlzLnByZXZSb3dJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpID8geyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0gOiB0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dzVG9TZWxlY3Rpb24oW3Jvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDZWxsc1RvU2VsZWN0aW9uKFt7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNoZWNrU2Nyb2xsO1xuICAgICAgICAgICAgdmFyIHByZXZlbnREZWZhdWx0O1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Rvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3duQXJyb3dLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cEFycm93S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0QXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRBcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0QXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVmdEFycm93S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9tZUtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxIb21lJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxIb21lS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxFbmQnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybEVuZEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdERvd24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0RG93bktleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFVwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdFVwS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0UmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0UmlnaHRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdExlZnRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxQbHVzQSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHJsUGx1c0EoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRWxlbSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJlY29yZHMubGVuZ3RoIHx8IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA/IHRoaXMuc2VsZWN0ZWRSZWNvcmRzWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IHJvdy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvdy5yb3dJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRWxlbS5zY3JvbGxUb3AgPSBzY3JvbGxFbGVtLnNjcm9sbFRvcCArIChlLmFjdGlvbiA9PT0gJ2Rvd25BcnJvdycgPyBoZWlnaHQgOiBoZWlnaHQgKiAtMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmlzaWJsZShyb3cpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleCAhPT0gMCAmJiB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuLmxlbmd0aCAhPT0gcm93SW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tWaXNpYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBzdCA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICAgICAgdmFyIHkgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHN0O1xuICAgICAgICAgICAgcmV0dXJuIHkgKyAzNiA8ICh3aW5kb3cuaW5uZXJIZWlnaHQgKyBzdCkgLSB0aGlzLmdldFJvd0hlaWdodChlbGVtZW50KSAmJiB5ID4gKHN0IC0gZWxlbWVudC5vZmZzZXRIZWlnaHQpICtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFJvd0hlaWdodChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRSb3dIZWlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmN0cmxQbHVzQSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKDAsIHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UoeyByb3dJbmRleDogMCwgY2VsbEluZGV4OiAwIH0sIHsgcm93SW5kZXg6IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGggLSAxLCBjZWxsSW5kZXg6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRvd25BcnJvd0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEb3duVXBLZXkoMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCkgJiYgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwQXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5RG93blVwS2V5KC0xLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4KSAmJiB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4IC0gMSA+IC0xLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCAtIDEgPiAtMSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlEb3duVXBLZXkgPSBmdW5jdGlvbiAoa2V5LCBjb25kMSwgY29uZDIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiBjb25kMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KGdPYmouc2VsZWN0ZWRSb3dJbmRleCArIGtleSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihnT2JqLnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmIGNvbmQyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleSwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5VXBEb3duID0gZnVuY3Rpb24gKHJvd0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgY0luZGV4ID0gcGFyc2VJbnQodGhpcy50YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0Um93QnlJbmRleChyb3dJbmRleCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NJbmRleF07XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucmlnaHRBcnJvd0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJlU2VsZWN0ZWRDZWxsSW5kZXggPSB0aGlzLnByZXZFQ0lkeHM7XG4gICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KDEsIDAsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5sZWZ0QXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByZVNlbGVjdGVkQ2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzO1xuICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgtMSwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCAtIDEgPiAtMSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlSaWdodExlZnRLZXkgPSBmdW5jdGlvbiAoa2V5MSwga2V5MiwgY29uZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjZWxsSW5kZXg7XG4gICAgICAgICAgICB2YXIgcm93SW5kZXg7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSkge1xuICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgcm93SW5kZXggPSB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZCAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5MSA+IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXkxIDwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5MTtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggPSB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleTEgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXkxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSBrZXkyO1xuICAgICAgICAgICAgICAgICAgICByb3dJbmRleCA9IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleTE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbEhpZGUoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKChjZWxsSW5kZXggPT09IDAgJiYgcm93SW5kZXggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoY2VsbEluZGV4ID09PSBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggLSAxICYmIHJvd0luZGV4ID09PSBnT2JqLmdldFJvd3MoKS5sZW5ndGggLSAxKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoa2V5MSwga2V5MiwgY29uZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwodGhpcy5wcmVTZWxlY3RlZENlbGxJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzUm93VHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJbmRleF8xID0gcGFyc2VJbnQodGhpcy50YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93RWxlbWVudCA9IGVqMl9iYXNlXzMuY2xvc2VzdCh0aGlzLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGxJbmRleF8xICsga2V5MSA+IC0xICYmIGNlbGxJbmRleF8xICsga2V5MSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3dFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjZWxsSW5kZXhfMSArIGtleTFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1oaWRlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTEgKz0ga2V5MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KGtleTEsIGtleTIsIGNvbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmhvbWVLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5SG9tZUVuZEtleSh7IHJvd0luZGV4OiB0aGlzLmN1cnJlbnRJbmRleCB8fCAwLCBjZWxsSW5kZXg6IDAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZW5kS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUhvbWVFbmRLZXkoeyByb3dJbmRleDogdGhpcy5jdXJyZW50SW5kZXggfHwgMCwgY2VsbEluZGV4OiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseUhvbWVFbmRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoa2V5LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxIaWRlKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5jZWxsSW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KC0xLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KDEsIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChrZXkucm93SW5kZXgsIGtleS5jZWxsSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdERvd25LZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGVqMl9iYXNlXzIuaXNVbmRlZmluZWQoZ09iai5zZWxlY3RlZFJvd0luZGV4KSA/IHRoaXMucHJldlJvd0luZGV4ICsgMSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAoZ09iai5zZWxlY3RlZFJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouc2VsZWN0ZWRSb3dJbmRleCArIDEgOiBnT2JqLnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kSW5kZXggPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMucHJldlJvd0luZGV4LCBlbmRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKGVuZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIDEsIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UoeyByb3dJbmRleDogMCwgY2VsbEluZGV4OiAwIH0sIHsgcm93SW5kZXg6IDEsIGNlbGxJbmRleDogMCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdFVwS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZSb3dJbmRleCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGVqMl9iYXNlXzIuaXNVbmRlZmluZWQoZ09iai5zZWxlY3RlZFJvd0luZGV4KSA/ICh0aGlzLnByZXZSb3dJbmRleCAtIDEgPiAtMSA/ICh0aGlzLnByZXZSb3dJbmRleCAtIDEpIDogMCkgOlxuICAgICAgICAgICAgICAgICAgICAoKGdPYmouc2VsZWN0ZWRSb3dJbmRleCAtIDEpID4gLTEgPyBnT2JqLnNlbGVjdGVkUm93SW5kZXggLSAxIDogZ09iai5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMucHJldlJvd0luZGV4LCBlbmRJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihlbmRJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJiAodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4IC0gMSkgPiAtMSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCAtIDEsIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNoaWZ0TGVmdEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTaGlmdExlZnRSaWdodEtleSgtMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggLSAxID4gLTEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNoaWZ0UmlnaHRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkoMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlTaGlmdExlZnRSaWdodEtleSA9IGZ1bmN0aW9uIChrZXksIGNvbmQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0geyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXkgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5jZWxsU2VsZWN0aW9uTW9kZSA9PT0gJ2Zsb3cnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoa2V5ID4gMCA/IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUgOiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXksIGNlbGxJbmRleDoga2V5ID4gMCA/IDAgOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggLSAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXksIGNlbGxJbmRleDoga2V5ID4gMCA/IDAgOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY2VsbEluZGV4KSAmJiB0aGlzLmlzQ2VsbEhpZGUoY2VsbEluZGV4KSAmJiAhKChjZWxsSW5kZXgucm93SW5kZXggPT09IDAgJiYgY2VsbEluZGV4LmNlbGxJbmRleCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGNlbGxJbmRleC5yb3dJbmRleCA9PT0gZ09iai5nZXRSb3dzKCkubGVuZ3RoIC0gMSAmJiBjZWxsSW5kZXguY2VsbEluZGV4ID09PSBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkoa2V5LCBjZWxsSW5kZXguY2VsbEluZGV4ID4gMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY3RybEhvbWVLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5Q3RybEhvbWVFbmRLZXkoMCwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY3RybEVuZEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDdHJsSG9tZUVuZEtleSh0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5Q3RybEhvbWVFbmRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnBhcmVudC5nZXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjb2xJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNvbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbEhpZGUoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY29sSW5kZXggfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgtMSwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgxLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRSZW1vdmVDbGFzc2VzRm9yUm93ID0gZnVuY3Rpb24gKHJvdywgaXNBZGQsIGNsZWFyQWxsKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAzOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdLnNsaWNlLmNhbGwocm93LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UnKSB8fCByb3cucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2VsbHNbaV0sIGFyZ3Muc2xpY2UoKSwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNlbGxzW2ldLCBbXSwgYXJncy5zbGljZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRSZW5kZXJlcigpLnNldFNlbGVjdGlvbihyb3cgPyByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpIDogbnVsbCwgaXNBZGQsIGNsZWFyQWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc1Jvd1R5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAncm93JyB8fCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdib3RoJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc0NlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ2NlbGwnIHx8IHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ2JvdGgnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzU2luZ2xlU2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ3NpbmdsZSc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNDZWxsSGlkZSA9IGZ1bmN0aW9uIChjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpW2NlbGxJbmRleC5jZWxsSW5kZXhdLnZpc2libGU7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnRSZW5kZXJlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlciA9IHRoaXMuZmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZW5kZXJlcjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VsZWN0aW9uID0gU2VsZWN0aW9uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VhcmNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuc2VhcmNoLCBhcmcxOiBzZWFyY2hTdHJpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoU3RyaW5nICE9PSBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSkge1xuICAgICAgICAgICAgICAgIGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5ID0gc2VhcmNoU3RyaW5nO1xuICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHNlYXJjaFN0cmluZzogdGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3Mua2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NlYXJjaGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleSwgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWFyY2gnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VhcmNoO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZWFyY2ggPSBTZWFyY2g7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTaG93SGlkZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNob3dIaWRlKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgc2hvd0J5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgc2hvd0J5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5nZXRUb2dnbGVGaWVsZHMoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucyhrZXlzLCBoaWRlQnkpO1xuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0VG9nZ2xlRmllbGRzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGZpbmFsaXplZCA9IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0gW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZWQgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVkO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBnZXRLZXlCeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KGtleXMsIGZ1bmN0aW9uIChrZXksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bZ2V0S2V5QnldID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2x1bW5zID0gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW5zKSA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSA6IGNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCBjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNob3dIaWRlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TaG93SGlkZSA9IFNob3dIaWRlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2hvdy1oaWRlLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgY29uc3RhbnRfMSwgd2lkdGhfY29udHJvbGxlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTY3JvbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlcyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUud2lkdGggPSBlajJfYmFzZV8zLmZvcm1hdFVuaXQodGhpcy5wYXJlbnQud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUgJiYgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlLnRvb2xiYXIucmVmcmVzaE92ZXJmbG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LmhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZU92ZXJmbG93KGNvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxXaWR0aCA9IFNjcm9sbC5nZXRTY3JvbGxCYXJXaWR0aCgpIC0gdGhpcy5nZXRUaHJlc2hvbGQoKTtcbiAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuZ2V0Q3NzUHJvcGVydGllcygpO1xuICAgICAgICAgICAgY29udGVudC5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSBzY3JvbGxXaWR0aCA+IDAgPyAnMXB4JyA6ICcwcHgnO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9IHNjcm9sbFdpZHRoID4gMCA/IHNjcm9sbFdpZHRoICsgJ3B4JyA6ICcwcHgnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZVBhZGRpbmcgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMocnRsKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnBhcmVudEVsZW1lbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmhlaWdodCAhPT0gJzEwMCUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLndpZHRoU2VydmljZS5nZXRTaWJsaW5nc0hlaWdodChjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2NhbGMoMTAwJSAtICcgKyBoZWlnaHQgKyAncHgpJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRUaHJlc2hvbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXBwTmFtZSA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICBpZiAoYXBwTmFtZSA9PT0gJ21vemlsbGEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Db250ZW50U2Nyb2xsID0gZnVuY3Rpb24gKHNjcm9sbFRhcmdldCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGlzSGVhZGVyID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnQucXVlcnlTZWxlY3RvcigndGJvZHknKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBzTGltaXQgPSB0YXJnZXQuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGlzRm9vdGVyID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdW1tYXJ5Y29udGVudCcpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID09PSBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9ICFpc0hlYWRlciA/IF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA6IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBpZiAoaXNGb290ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyLnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGNvbnN0YW50XzEuc2Nyb2xsLCB7IGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vbmVUaW1lUmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmNvbnRlbnQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmhlYWRlciksIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmhlYWRlciwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuY29udGVudCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Rm9vdGVyQ29udGVudCgpLmZpcnN0Q2hpbGQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmNvbnRlbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgaWYgKHRhYmxlLnNjcm9sbEhlaWdodCA8IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyOmxhc3QtY2hpbGQgdGQnKSwgJ2UtbGFzdHJvd2NlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHRoaXMucHJldmlvdXNWYWx1ZXMubGVmdDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gdGhpcy5wcmV2aW91c1ZhbHVlcy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbExlZnQgPSB0aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0Q3NzUHJvcGVydGllcyA9IGZ1bmN0aW9uIChydGwpIHtcbiAgICAgICAgICAgIHZhciBjc3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBlbmFibGVSdGwgPSBlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHJ0bCkgPyB0aGlzLnBhcmVudC5lbmFibGVSdGwgOiBydGw7XG4gICAgICAgICAgICBjc3MuYm9yZGVyID0gZW5hYmxlUnRsID8gJ2JvcmRlckxlZnRXaWR0aCcgOiAnYm9yZGVyUmlnaHRXaWR0aCc7XG4gICAgICAgICAgICBjc3MucGFkZGluZyA9IGVuYWJsZVJ0bCA/ICdwYWRkaW5nTGVmdCcgOiAncGFkZGluZ1JpZ2h0JztcbiAgICAgICAgICAgIHJldHVybiBjc3M7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZW5zdXJlT3ZlcmZsb3cgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5vdmVyZmxvd1kgPSB0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdzY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFkZGluZygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGRdLCAnZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZF0sICdlLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmdldFNjcm9sbEJhcldpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTY3JvbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNjcm9sbCA9IFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Njcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUHJpbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQcmludChwYXJlbnQsIHNjcm9sbE1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmNvbnRlbnRSZWFkeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gc2Nyb2xsTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZ09iai5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJ3ByaW50JywgJ2hlaWdodD0nICsgd2luZG93Lm91dGVySGVpZ2h0ICsgJyx3aWR0aD0nICsgd2luZG93Lm91dGVyV2lkdGggKyAnLHRhYmJhcj1ubycpO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93LnJlc2l6ZVRvKHNjcmVlbi5hdmFpbFdpZHRoLCBzY3JlZW4uYXZhaWxIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5wcmludE1vZGUgPT09ICdjdXJyZW50cGFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGFnZXJEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWxsb3dQYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlYWR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5jb250ZW50UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbnRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhZ2VyRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBnT2JqLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdlckRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZ09iai5hbGxvd1BhZ2luZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuc2Nyb2xsTW9kdWxlLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckRpdiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgICAgICAgICAgaGVhZGVyRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEdyb3VwKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdG9vbGJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZpbHRlcmJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFjdGl2ZScpLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uMWJhY2tncm91bmQnKSwgJ2UtY2VsbHNlbGVjdGlvbjFiYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ByaW50JywgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93czogZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0clthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXScpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVQcmludCwgYXJncyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnByaW50KHRoaXMuZWxlbWVudCwgdGhpcy5wcmludFdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucHJpbnRDb21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5yZW1vdmVDb2xHcm91cCA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgICAgICAgICAgdmFyIGdyb3VwQ2FwdGlvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cGNhcHRpb24nKTtcbiAgICAgICAgICAgIHZhciBjb2xTcGFuID0gZ3JvdXBDYXB0aW9uW2RlcHRoIC0gMV0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwQ2FwdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdyb3VwQ2FwdGlvbltpXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjb2xTcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xHcm91cHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sR3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZXB0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbEdyb3Vwc1tpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ByaW50JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByaW50O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QcmludCA9IFByaW50O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcHJpbnQuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZW51bV8xLCBlajJfYmFzZV8zLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlQ29sdW1uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFnZ3JlZ2F0ZUNvbHVtbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlQ29sdW1uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy50ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdCAmJiAodGhpcy5mb3JtYXQuc2tlbGV0b24gfHwgdGhpcy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0Rm4gPSB2YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbih0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoaGVscGVyKSB7XG4gICAgICAgICAgICBpZiAoaGVscGVyID09PSB2b2lkIDApIHsgaGVscGVyID0ge307IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZm9vdGVyVGVtcGxhdGUsIGhlbHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cEZvb3RlclRlbXBsYXRlLCBoZWxwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBDYXB0aW9uVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZ3JvdXBDYXB0aW9uVGVtcGxhdGUsIGhlbHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIHR5cGUpXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZUNvbHVtbjtcbiAgICB9KGVqMl9iYXNlXzMuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImNvbHVtbk5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImdyb3VwRm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJncm91cENhcHRpb25UZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImN1c3RvbUFnZ3JlZ2F0ZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlQ29sdW1uID0gQWdncmVnYXRlQ29sdW1uO1xuICAgIHZhciBBZ2dyZWdhdGVSb3cgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWdncmVnYXRlUm93LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGVSb3coKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZVJvdztcbiAgICB9KGVqMl9iYXNlXzMuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkNvbGxlY3Rpb24oW10sIEFnZ3JlZ2F0ZUNvbHVtbilcbiAgICBdLCBBZ2dyZWdhdGVSb3cucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZVJvdyA9IEFnZ3JlZ2F0ZVJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2RhdGFfMSwgZWoyX2Jhc2VfMiwgZWoyX2J1dHRvbnNfMSwgZXZlbnRzLCBlajJfcG9wdXBzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uQ2hvb3NlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbkNob29zZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRsZ2hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE9wZW5EbGcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmhpZGVEaWFsb2cuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGxnQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3Nob3dIaWRlU2VydmljZScpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0RWxlbWVudCwgJy5lLWNjJykpIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MtdG9vbGJhcicpKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5jaG9vc2VyLWJ0bicpIHx8IHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNjLXRvb2xiYXInKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaW5pdGlhbE9wZW5EbGcgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSkgfHwgIXRoaXMuaXNEbGdPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjc2VhcmNoJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmhpZGVEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB7IFg6IG51bGwsIFk6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInLCBlbGVtZW50OiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyLCBhcmdzMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnNDMwcHgnO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmlzaWJsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHZhciBuZXdwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUmVsYXRpdmVCYXNlZFBvc2l0aW9uKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS10b29sYmFyLWl0ZW0nKSwgdGhpcy5kbGdPYmouZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZWxlbWVudFZpc2libGU7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBuZXdwb3MudG9wICsgZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWNjLXRvb2xiYXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHZhciBkbGdXaWR0aCA9IDI1MDtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWJpZ2dlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai53aWR0aCA9IDI1MztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLm9wZW4gPSB0aGlzLm1PcGVuRGxnLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAoKG5ld3Bvcy5sZWZ0IC0gZGxnV2lkdGgpICsgZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWNjLXRvb2xiYXInKS5jbGllbnRXaWR0aCkgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5zaG93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5vcGVuQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uIChYLCBZKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouY29udGVudCA9IHRoaXMucmVuZGVyQ2hvb3Nlckxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94U3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChYKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBZICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSBYICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jY2RsZyBlLWNjJywgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NjZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdmFyIHhwb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjUwO1xuICAgICAgICAgICAgdmFyIGRpYWxvUG9zID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0Nob29zZUNvbHVtbnMnKSxcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jb25maXJtRGxnQnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWNjIGUtY2Nfb2tidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckFjdGlvbnMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0IGUtY2MgZS1jYy1jbmJ0bicsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlbmRlckNob29zZXJMaXN0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI1MCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDaG9vc2VyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1haW4tZGl2IGUtY2MnIH0pO1xuICAgICAgICAgICAgdmFyIHNlYXJjaERpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjLXNlYXJjaGRpdiBlLWNjIGUtaW5wdXQtZ3JvdXAnIH0pO1xuICAgICAgICAgICAgdmFyIGNjc2VhcmNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjc2VhcmNoIGUtY2MgZS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJykgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY2NzZWFyY2hpY29uID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjc2VhcmNoLWljb24gZS1pY29ucyBlLWNjIGUtaW5wdXQtZ3JvdXAtaWNvbicgfSk7XG4gICAgICAgICAgICB2YXIgY29uRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2MtY29udGVudGRpdicgfSk7XG4gICAgICAgICAgICB0aGlzLmlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaW5uZXJkaXYgZS1jYycgfSk7XG4gICAgICAgICAgICBzZWFyY2hEaXYuYXBwZW5kQ2hpbGQoY2NzZWFyY2hlbGUpO1xuICAgICAgICAgICAgc2VhcmNoRGl2LmFwcGVuZENoaWxkKGNjc2VhcmNoaWNvbik7XG4gICAgICAgICAgICBjY3NlYXJjaGVsZS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2NzZWFyY2hlbGUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2Q29udGVudCA9IHRoaXMucmVmcmVzaENoZWNrYm94TGlzdCh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChpbm5lckRpdkNvbnRlbnQpO1xuICAgICAgICAgICAgY29uRGl2LmFwcGVuZENoaWxkKHRoaXMuaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKHNlYXJjaERpdik7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYuYXBwZW5kQ2hpbGQoY29uRGl2KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5EaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbmZpcm1EbGdCdG5DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLmhpZGVDb2x1bW4sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLnNob3dDb2x1bW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NvbHVtbnN0YXRlJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMsIGRpYWxvZ0luc3RhbmNlOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2Uuc2V0VmlzaWJsZSh0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckFjdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdGVDb2x1bW5zLCBzdGF0ZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlQ29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sVWlkID0gc3RhdGVDb2x1bW5zW2luZGV4XS5yZXBsYWNlKCdlLWNjJywgJycpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoY29sVWlkKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sLnZpc2libGUgPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGVhckFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrc3RhdGVjb2x1bW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGUuZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHVuY2hlY2tDb2x1bW4gPSB0YXJnZXRFbGUuaWQ7XG4gICAgICAgICAgICBpZiAoZS5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4uc3BsaWNlKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4ucHVzaCh1bmNoZWNrQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbi5zcGxpY2UodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbiksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbi5wdXNoKHVuY2hlY2tDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3NlclNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHZhciBjbGVhclNlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGZsdHJDb2w7XG4gICAgICAgICAgICBpZiAoc2VhcmNoVmFsID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmx0ckNvbCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCdoZWFkZXJUZXh0JywgJ3N0YXJ0c3dpdGgnLCBzZWFyY2hWYWwsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbHRyQ29sLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuaW5uZXJIVE1MID0gJyAnO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnJlZnJlc2hDaGVja2JveExpc3QoZmx0ckNvbCwgc2VhcmNoVmFsKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbk1hdGNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjIGUtbm1hdGNoJyB9KTtcbiAgICAgICAgICAgICAgICBuTWF0Y2hlbGUuaW5uZXJIVE1MID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdNYXRjaHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmFwcGVuZENoaWxkKG5NYXRjaGVsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5jbGFzc0xpc3QuYWRkKCdlLWNjbm1kaXYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveExpc3QgPSBmdW5jdGlvbiAoZ2RDb2wsIHNlYXJjaFZhbCkge1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJywgeyBjbGFzc05hbWU6ICdlLWNjdWwtZWxlIGUtY2MnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZENvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ2RDb2xbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGVja2JveChjb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVsRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVmcmVzaENoZWNrYm94U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtaW5wdXQnKS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNjLWNoYm94JylbaV07XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGVsZW1lbnQuaWQucmVwbGFjZSgnZS1jYycsICcnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNoZWNrYm94ID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGNjbGlzdDtcbiAgICAgICAgICAgIHZhciBoaWRlQ29sU3RhdGU7XG4gICAgICAgICAgICB2YXIgc2hvd0NvbFN0YXRlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQm94T2JqO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5zaG93SW5Db2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgY2NsaXN0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsaScsIHsgY2xhc3NOYW1lOiAnZS1jY2xpc3QgZS1jYycsIHN0eWxlczogJ2xpc3Qtc3R5bGU6Tm9uZScsIGlkOiAnZS1jY2xpXycgKyBjb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjY2xhYmUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLWNjJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY2NjaGVja2JveGxpc3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjIGUtY2MtY2hib3ggJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdlLWNjJyArIGNvbHVtbi51aWQsIGF0dHJzOiB7IHR5cGU6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNjbGFiZS5hcHBlbmRDaGlsZChjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgaGlkZUNvbFN0YXRlID0gdGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoJ2UtY2MnICsgY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHNob3dDb2xTdGF0ZSA9IHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKCdlLWNjJyArIGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGVja0JveE9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgbGFiZWw6IGNvbHVtbi5oZWFkZXJUZXh0LCBjaGVja2VkOiB0cnVlLCBjaGFuZ2U6IHRoaXMuY2hlY2tzdGF0ZWNvbHVtbi5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoY29sdW1uLnZpc2libGUgJiYgIWhpZGVDb2xTdGF0ZSkgfHwgc2hvd0NvbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQm94T2JqLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hPYmouY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGVja0JveE9iai5hcHBlbmRUbyhjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgY2NsaXN0LmFwcGVuZENoaWxkKGNjbGFiZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2NsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSAhcHJveHkuZmxhZyAmJiBlLmtleUNvZGUgIT09IDEzID8gNTAwIDogMDtcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBwcm94eS5jb2x1bW5DaG9vc2VyU2VhcmNoKHByb3h5LnNlYXJjaFZhbHVlKTsgfSwgaW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuYWRkY2FuY2VsSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtY2NzZWFyY2gtaWNvbicpLmNsYXNzTGlzdC5hZGQoJ2UtY2MtY2FuY2VsJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5tT3BlbkRsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2Mtc2VhcmNoZGl2JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICAgICAgdmFyIGNoZWxlID0gdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpWzBdO1xuICAgICAgICAgICAgY2hlbGUuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29sdW1uQ2hvb3Nlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5DaG9vc2VyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5DaG9vc2VyID0gQ29sdW1uQ2hvb3Nlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9hY3Rpb25zL3NvcnRcIiwgXCIuL2FjdGlvbnMvcGFnZVwiLCBcIi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuL2FjdGlvbnMvZmlsdGVyXCIsIFwiLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuL2FjdGlvbnMvcmVzaXplXCIsIFwiLi9hY3Rpb25zL3Jlb3JkZXJcIiwgXCIuL2FjdGlvbnMvcm93LXJlb3JkZXJcIiwgXCIuL2FjdGlvbnMvZ3JvdXBcIiwgXCIuL2FjdGlvbnMvcHJpbnRcIiwgXCIuL2FjdGlvbnMvZGV0YWlsLXJvd1wiLCBcIi4vYWN0aW9ucy90b29sYmFyXCIsIFwiLi9hY3Rpb25zL2FnZ3JlZ2F0ZVwiLCBcIi4vYWN0aW9ucy92aXJ0dWFsLXNjcm9sbFwiLCBcIi4vYWN0aW9ucy9lZGl0XCIsIFwiLi9hY3Rpb25zL2JhdGNoLWVkaXRcIiwgXCIuL2FjdGlvbnMvaW5saW5lLWVkaXRcIiwgXCIuL2FjdGlvbnMvbm9ybWFsLWVkaXRcIiwgXCIuL2FjdGlvbnMvZGlhbG9nLWVkaXRcIiwgXCIuL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZXhwb3J0XCIsIFwiLi9hY3Rpb25zL3BkZi1leHBvcnRcIiwgXCIuL2FjdGlvbnMvZXhwb3J0LWhlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGRhdGFfMSwgc29ydF8xLCBwYWdlXzEsIHNlbGVjdGlvbl8xLCBmaWx0ZXJfMSwgc2VhcmNoXzEsIHNjcm9sbF8xLCByZXNpemVfMSwgcmVvcmRlcl8xLCByb3dfcmVvcmRlcl8xLCBncm91cF8xLCBwcmludF8xLCBkZXRhaWxfcm93XzEsIHRvb2xiYXJfMSwgYWdncmVnYXRlXzEsIHZpcnR1YWxfc2Nyb2xsXzEsIGVkaXRfMSwgYmF0Y2hfZWRpdF8xLCBpbmxpbmVfZWRpdF8xLCBub3JtYWxfZWRpdF8xLCBkaWFsb2dfZWRpdF8xLCBjb2x1bW5fY2hvb3Nlcl8xLCBleGNlbF9leHBvcnRfMSwgcGRmX2V4cG9ydF8xLCBleHBvcnRfaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGRhdGFfMSk7XG4gICAgX19leHBvcnQoc29ydF8xKTtcbiAgICBfX2V4cG9ydChwYWdlXzEpO1xuICAgIF9fZXhwb3J0KHNlbGVjdGlvbl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfMSk7XG4gICAgX19leHBvcnQoc2VhcmNoXzEpO1xuICAgIF9fZXhwb3J0KHNjcm9sbF8xKTtcbiAgICBfX2V4cG9ydChyZXNpemVfMSk7XG4gICAgX19leHBvcnQocmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF8xKTtcbiAgICBfX2V4cG9ydChwcmludF8xKTtcbiAgICBfX2V4cG9ydChkZXRhaWxfcm93XzEpO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG4gICAgX19leHBvcnQoYWdncmVnYXRlXzEpO1xuICAgIF9fZXhwb3J0KHZpcnR1YWxfc2Nyb2xsXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChub3JtYWxfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChjb2x1bW5fY2hvb3Nlcl8xKTtcbiAgICBfX2V4cG9ydChleGNlbF9leHBvcnRfMSk7XG4gICAgX19leHBvcnQocGRmX2V4cG9ydF8xKTtcbiAgICBfX2V4cG9ydChleHBvcnRfaGVscGVyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9ncmlkXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGdyaWRfMSwgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxSb3cocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZShlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0ZCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS50b29nbGVFeHBhbmRjb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudERldGFpbHMnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRSb3cgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuW3RyLnJvd0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ3JlY29yZHMnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YVtrZXldIDogZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VycmVudFZpZXdEYXRhW3RyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxjZWxsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxpbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZGV0YWlsQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkZXRhaWxSb3csIHRyLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKGRldGFpbENlbGwsIGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKShkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmNoaWxkR3JpZFtwYXJlbnRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDogZ09iai5lbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQcmltYXJ5S2V5czogZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZDogZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleUZpZWxkVmFsdWU6IGRhdGFbZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSb3dEYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IG5ldyBncmlkXzEuR3JpZChnT2JqLmNoaWxkR3JpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBncmlkLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmplY3RlZE1vZHVlcyA9IGdPYmouZ2V0SW5qZWN0ZWRNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVzIHx8IG1vZHVsZXMubGVuZ3RoICE9PSBpbmplY3RlZE1vZHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZXRJbmplY3RlZE1vZHVsZXMoaW5qZWN0ZWRNb2R1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdjaGlsZCcgKyB1dGlsXzEucGFyZW50cyh0ciwgJ2UtZ3JpZCcpLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnX2dyaWQnICsgdHIucm93SW5kZXggKyB1dGlsXzEuZ2V0VWlkKCcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuYXBwZW5kQ2hpbGQoZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuYXBwZW5kVG8oZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRSb3dzKCkuc3BsaWNlKHRyLnJvd0luZGV4ICsgMSwgMCwgZGV0YWlsUm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZGV0YWlsRGF0YUJvdW5kLCB7IGRldGFpbEVsZW1lbnQ6IGRldGFpbENlbGwsIGRhdGE6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10sIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSwgWydlLWR0ZGlhZ29uYWxyaWdodCcsICdlLWljb24tZ3JpZ2h0YXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsUm93KG5leHRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93Y29sbGFwc2UnXSwgWydlLWRldGFpbHJvd2V4cGFuZCddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmlzRGV0YWlsUm93ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdyAmJiByb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5nZXRURGZyb21JbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICh0ciAmJiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHIucXVlcnlTZWxlY3RvcihjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRURGZyb21JbmRleCh0YXJnZXQsICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZSh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHRkO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZCA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlzRXhwYW5kID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbHRVcEFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkYXRhUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlLCAuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuYWN0aW9uID09PSAnYWx0RG93bkFycm93JyA/IHRoaXMuZXhwYW5kKHRkKSA6IHRoaXMuY29sbGFwc2UodGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2RldGFpbFJvdyc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRldGFpbFJvdyA9IERldGFpbFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTb3J0KHBhcmVudCwgc29ydFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzID0gc29ydFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNvcnRlZENvbHVtbiA9IHsgZmllbGQ6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiB9O1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpU29ydCkge1xuICAgICAgICAgICAgICAgIGlmICghZ0NvbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBbc29ydGVkQ29sdW1uXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWRDb2xzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQoZ0NvbHNbaV0sIHNvcnRlZENvbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uTmFtZSA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzQ29sID0gdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGdDb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goeyBmaWVsZDogc0NvbC5maWVsZCwgZGlyZWN0aW9uOiBzQ29sLmRpcmVjdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBzb3J0ZWRDb2xzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkKHRoaXMuY29sdW1uTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSBzb3J0ZWRDb2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0U29ydGVkQ29sID0gdGhpcy5jb2x1bW5OYW1lO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gIXRoaXMuaXNSZW1vdmUgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9O1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuc29ydENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKS5hbGxvd1NvcnRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBhcmcxOiBjb2x1bW5OYW1lLCBhcmcyOiBkaXJlY3Rpb24sIGFyZzM6IGlzTXVsdGlTb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGlzTXVsdGlTb3J0O1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTb3J0ZWRDb2xzKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUudXBkYXRlU29ydGVkQ29scyA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgaWYgKCFpc011bHRpU29ydCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnNvcnRlZENvbHVtbnNbaV0pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMuc3BsaWNlKDAsIHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMucHVzaChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4gfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuY2xlYXJTb3J0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhclNvcnRpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRDb2x1bW4oY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmlzQWN0aW9uUHJldmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlU29ydENvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMucmVtb3ZlU29ydENvbHVtbiwgYXJnMTogZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMuc3BsaWNlKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgY29scy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vZGVsQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkU29ydEljb25zKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIHNvcnRlZENvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gc29ydGVkQ29sdW1ucyA/IHNvcnRlZENvbHVtbnMgOiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oY29sLmZpZWxkLCBjb2wuZGlyZWN0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtc29ydGRpcmVjdCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgICAgICB0aGlzLmlzTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsZGl2JykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJoYW5kbGVyJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZDtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gIXRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGggPyAnYXNjZW5kaW5nJyA6XG4gICAgICAgICAgICAgICAgICAgICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGZpZWxkLCBkaXJlY3Rpb24sIGUuY3RybEtleSB8fCB0aGlzLmVuYWJsZVNvcnRNdWx0aVRvdWNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UG9wVXAoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zaG93UG9wVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldENzc0luR3JpZFBvcFVwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJyksIGUsICdlLXNvcnRkaXJlY3QgZS1pY29ucyBlLWljb24tc29ydGRpcmVjdCcgKyAodGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCA+IDEgPyAnIGUtc3BhbmNsaWNrZWQnIDogJycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucG9wVXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNvcnRkaXJlY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3BhbmNsaWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkU29ydEljb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCBjb2xzW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNdWx0aVNvcnQgJiYgY29scy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0bnVtYmVyJywgaW5uZXJIVE1MOiAoaSArIDEpLnRvU3RyaW5nKCkgfSksIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJ0ZXh0JykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRmaWx0ZXJkaXYnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5kaXJlY3Rpb24gPT09ICdhc2NlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChmaWx0ZXJFbGVtZW50LCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0SWNvbnMgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwb3NpdGlvbiA/IHBvc2l0aW9uIDogMCwgbGVuID0gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9zaXRpb24pID8gcG9zaXRpb24gKyAxIDogY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpLCBbXSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnLCAnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLnJlbW92ZUNoaWxkKGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0bnVtYmVyJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydENvbHVtbkZyb21GaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVBcmlhQXR0ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zb3J0ZWRDb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2wpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIHRoaXMuZ2V0U29ydENvbHVtbkZyb21GaWVsZChjb2wpLmRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlZnJlc2hTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXJpYUF0dHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNvcnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNvcnQgPSBTb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL3BhZ2VyL3BhZ2VyXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXItZHJvcGRvd25cIiwgXCIuLi8uLi9wYWdlci9leHRlcm5hbC1tZXNzYWdlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHBhZ2VyXzEsIHBhZ2VyX2Ryb3Bkb3duXzEsIGV4dGVybmFsX21lc3NhZ2VfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgcGFnZXJfMS5QYWdlci5JbmplY3QoZXh0ZXJuYWxfbWVzc2FnZV8xLkV4dGVybmFsTWVzc2FnZSwgcGFnZXJfZHJvcGRvd25fMS5QYWdlckRyb3BEb3duKTtcbiAgICB2YXIgUGFnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2UocGFyZW50LCBwYWdlU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MgPSBwYWdlU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBQYWdlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmo7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcGFnZXInIH0pO1xuICAgICAgICAgICAgcGFnZXJPYmogPSB1dGlsXzEuZXh0ZW5kKHt9LCBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXModGhpcy5wYWdlU2V0dGluZ3MpKSwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyb3BEb3duQ2hhbmdlZDogdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogZ09iai5lbmFibGVSdGwsIGxvY2FsZTogZ09iai5sb2NhbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5hZGRBcmlhQXR0ci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LCBbJ3BhcmVudE9iaicsICdwcm9wTmFtZSddKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmogPSBuZXcgcGFnZXJfMS5QYWdlcihwYWdlck9iaik7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLnBhZ2VTaXplID0gZS5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkQXJpYUF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG51bWVyaWNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbnVtZXJpY2NvbnRhaW5lcicpO1xuICAgICAgICAgICAgdmFyIGxpbmtzID0gbnVtZXJpY0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkuaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSBbJy5lLW1maXJzdCcsICcuZS1tcHJldicsICcuZS1maXJzdCcsICcuZS1wcmV2JywgJy5lLW5leHQnLCAnLmUtbGFzdCcsICcuZS1tbmV4dCcsICcuZS1tbGFzdCddO1xuICAgICAgICAgICAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ducycsIF90aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKGUpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5nb1RvUGFnZShwYWdlTm8pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQgPSBlLmNvdW50O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UsIHJlcXVlc3RUeXBlOiAncGFnaW5nJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuZXdQcm9wID0gZS5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmpbcHJvcF0gPSBuZXdQcm9wW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9yY2VDYW5jZWwgfHwgdXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ZvcmNlQ2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZ29Ub1BhZ2UsIGFyZzE6IGUuY3VycmVudFBhZ2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouY3VycmVudFBhZ2UgPSBnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZvcmNlQ2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb3JjZUNhbmNlbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZQYWdlID0gdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IGUuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAncGFnaW5nJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2U6IHByZXZQYWdlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBlLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Ta2lwQWN0aW9uKGUuYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmFjdGlvbiBpbiBrZXlBY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGtleUFjdGlvbnNbZS5hY3Rpb25dKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5jYW5Ta2lwQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSB7XG4gICAgICAgICAgICAgICAgcGFnZVVwOiBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnNjcm9sbFRvcCAhPT0gMDsgfSxcbiAgICAgICAgICAgICAgICBwYWdlRG93bjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiAhKGVsLnNjcm9sbFRvcCA+PSBlbC5zY3JvbGxIZWlnaHQgLSBlbC5jbGllbnRIZWlnaHQpOyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbnRlbnQnKSAmJlxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuaXNFcXVhbE5vZGUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkKSAmJiBbJ3BhZ2VVcCcsICdwYWdlRG93biddLmluZGV4T2YoYWN0aW9uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZVthY3Rpb25dKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYWdlck9iai5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmVuYWJsZUV4dGVybmFsTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5leHRlcm5hbE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hcHBlbmRUb0VsZW1lbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0R3JpZFBhZ2VyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVG9FbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHRoaXMucmVuZGVyLFxuICAgICAgICAgICAgICAgIGVuZDogdGhpcy5hcHBlbmRUb0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgcmVhZHk6IHRoaXMuZGF0YVJlYWR5LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLm9uQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgdXBkYXRlTGF5b3V0OiB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLFxuICAgICAgICAgICAgICAgIGluYm91bmRDaGFuZ2U6IHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsXG4gICAgICAgICAgICAgICAga2V5UHJlc3M6IHRoaXMua2V5UHJlc3NIYW5kbGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmhhbmRsZXJzLmxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaGFuZGxlcnMuZW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnBhZ2VDb21wbGV0ZSwgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuaGFuZGxlcnMudXBkYXRlTGF5b3V0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMuaGFuZGxlcnMua2V5UHJlc3MsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5oYW5kbGVycy5sb2FkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5oYW5kbGVycy5lbmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuaGFuZGxlcnMucmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wYWdlQ29tcGxldGUsIHRoaXMuaGFuZGxlcnMuY29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5oYW5kbGVycy51cGRhdGVMYXlvdXQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLmhhbmRsZXJzLmluYm91bmRDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmhhbmRsZXJzLmtleVByZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZSA9IFBhZ2U7XG4gICAgdmFyIGtleUFjdGlvbnMgPSB7XG4gICAgICAgIHBhZ2VVcDogJy5lLXByZXYnLFxuICAgICAgICBwYWdlRG93bjogJy5lLW5leHQnLFxuICAgICAgICBjdHJsQWx0UGFnZURvd246ICcuZS1sYXN0JyxcbiAgICAgICAgY3RybEFsdFBhZ2VVcDogJy5lLWZpcnN0JyxcbiAgICAgICAgYWx0UGFnZVVwOiAnLmUtcHAnLFxuICAgICAgICBhbHRQYWdlRG93bjogJy5lLW5wJ1xuICAgIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9udW1lcmljLWNvbnRhaW5lclwiLCBcIi4vcGFnZXItbWVzc2FnZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIG51bWVyaWNfY29udGFpbmVyXzEsIHBhZ2VyX21lc3NhZ2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUGFnZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5kZWZhdWx0Q29uc3RhbnRzID0ge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlSW5mbzogJ3swfSBvZiB7MX0gcGFnZXMnLFxuICAgICAgICAgICAgICAgIHRvdGFsSXRlbXNJbmZvOiAnKHswfSBpdGVtcyknLFxuICAgICAgICAgICAgICAgIGZpcnN0UGFnZVRvb2x0aXA6ICdHbyB0byBmaXJzdCBwYWdlJyxcbiAgICAgICAgICAgICAgICBsYXN0UGFnZVRvb2x0aXA6ICdHbyB0byBsYXN0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIG5leHRQYWdlVG9vbHRpcDogJ0dvIHRvIG5leHQgcGFnZScsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQYWdlVG9vbHRpcDogJ0dvIHRvIHByZXZpb3VzIHBhZ2UnLFxuICAgICAgICAgICAgICAgIG5leHRQYWdlclRvb2x0aXA6ICdHbyB0byBuZXh0IHBhZ2VyJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VyVG9vbHRpcDogJ0dvIHRvIHByZXZpb3VzIHBhZ2VyJyxcbiAgICAgICAgICAgICAgICBwYWdlckRyb3BEb3duOiAnSXRlbXMgcGVyIHBhZ2UnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyTW9kdWxlID0gbmV3IG51bWVyaWNfY29udGFpbmVyXzEuTnVtZXJpY0NvbnRhaW5lcihfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUgPSBuZXcgcGFnZXJfbWVzc2FnZV8xLlBhZ2VyTWVzc2FnZShfdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlcXVpcmVkTW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtb2R1bGVzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdleHRlcm5hbE1lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrcGFnZXNpemVzKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdwYWdlcmRyb3Bkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlcztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzQ291bnQgPSB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IHx8IDA7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0UHJldkRpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dExhc3REaXZGb3JEZXZpY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrcGFnZXNpemVzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY3JlYXRlZCcsIHsgJ2N1cnJlbnRQYWdlJzogdGhpcy5jdXJyZW50UGFnZSwgJ3RvdGFsUmVjb3Jkc0NvdW50JzogdGhpcy50b3RhbFJlY29yZHNDb3VudCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsnZW5hYmxlRXh0ZXJuYWxNZXNzYWdlJywgJ2VuYWJsZVBhZ2VyTWVzc2FnZScsICdjdXJyZW50UGFnZScsICdlbmFibGVRdWVyeVN0cmluZycsICdwYWdlU2l6ZXMnLFxuICAgICAgICAgICAgICAgICdwYWdlU2l6ZScsICdwYWdlQ291bnQnLCAndG90YWxSZWNvcmRzQ291bnQnLCAnZXh0ZXJuYWxNZXNzYWdlJywgJ2N1c3RvbVRleHQnLCAnY2xpY2snLCAnY3JlYXRlZCcsICdkcm9wRG93bkNoYW5nZWQnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXInO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VDb3VudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZWZyZXNoTnVtZXJpY0xpbmtzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VycmVudFBhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tHb1RvUGFnZShuZXdQcm9wLmN1cnJlbnRQYWdlLCBvbGRQcm9wLmN1cnJlbnRQYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VDaGFuZ2VkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZVNpemUnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3RhbFJlY29yZHNDb3VudCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1c3RvbVRleHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZVNpemVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrcGFnZXNpemVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyZHJvcGRvd25Nb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJkcm9wZG93bk1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRMb2NhbGl6YXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZUV4dGVybmFsTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdleHRlcm5hbE1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVBhZ2VyTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5zaG93TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUuaGlkZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldExvY2FsaXplZExhYmVsID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlT2JqLmdldENvbnN0YW50KGtleSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrR29Ub1BhZ2UocGFnZU5vKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlTm87XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuY2hlY2twYWdlc2l6ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlU2l6ZXMgPT09IHRydWUgfHwgdGhpcy5wYWdlU2l6ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jaGVja0dvVG9QYWdlID0gZnVuY3Rpb24gKG5ld1BhZ2VObywgb2xkUGFnZU5vKSB7XG4gICAgICAgICAgICBpZiAobmV3UGFnZU5vICE9PSB0aGlzLmN1cnJlbnRQYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2VObyA9IHRoaXMuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQob2xkUGFnZU5vKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlTm8gPSBvbGRQYWdlTm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c1BhZ2VObyAhPT0gbmV3UGFnZU5vICYmIChuZXdQYWdlTm8gPj0gMSAmJiBuZXdQYWdlTm8gPD0gdGhpcy50b3RhbFBhZ2VzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuY3VycmVudFBhZ2VDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5U3RyaW5nKHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGN1cnJlbnRQYWdlOiB0aGlzLmN1cnJlbnRQYWdlLCBjYW5jZWw6IGZhbHNlIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NsaWNrJywgYXJncyk7XG4gICAgICAgICAgICBpZiAoIWFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5pbml0TG9jYWxpemF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVPYmogPSBuZXcgZWoyX2Jhc2VfMS5MMTBuKHRoaXMuZ2V0TW9kdWxlTmFtZSgpLCB0aGlzLmRlZmF1bHRDb25zdGFudHMsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9IHRoaXMuZ2V0VXBkYXRlZFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZiwgJ3BhZ2UnLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IHBhdGg6IHVwZGF0ZWRVcmwgfSwgJycsIHVwZGF0ZWRVcmwpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0VXBkYXRlZFVSTCA9IGZ1bmN0aW9uICh1cmksIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZWd4ID0gbmV3IFJlZ0V4cCgnKFs/fCZdKScgKyBrZXkgKyAnPS4qPygmfCN8JCknLCAnaScpO1xuICAgICAgICAgICAgaWYgKHVyaS5tYXRjaChyZWd4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmkucmVwbGFjZShyZWd4LCAnJDEnICsga2V5ICsgJz0nICsgdmFsdWUgKyAnJDInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHVyaS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSB1cmkucmVwbGFjZSgvLiojLywgJyMnKTtcbiAgICAgICAgICAgICAgICAgICAgdXJpID0gdXJpLnJlcGxhY2UoLyMuKi8sICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVyaSArICh1cmkuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JykgKyBrZXkgKyAnPScgKyB2YWx1ZSArIGhhc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXJGaXJzdFByZXZEaXZGb3JEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlck5leHRMYXN0RGl2Rm9yRGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tbGFzdCBlLWljb25zIGUtaWNvbi1sYXN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnbGFzdFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmFkZEFyaWFMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlcjtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZUV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImVuYWJsZVBhZ2VyTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEyKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEwKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXJyZW50UGFnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwidG90YWxSZWNvcmRzQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImV4dGVybmFsTWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJwYWdlU2l6ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnJylcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiY3VzdG9tVGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiY2xpY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImRyb3BEb3duQ2hhbmdlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIFBhZ2VyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgUGFnZXIpO1xuICAgIGV4cG9ydHMuUGFnZXIgPSBQYWdlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvcGFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIE51bWVyaWNDb250YWluZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBOdW1lcmljQ29udGFpbmVyKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQgPSB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck51bWVyaWNDb250YWluZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaE51bWVyaWNMaW5rcygpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgcGFnZXJPYmoudG90YWxQYWdlcyA9IChwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCAlIHBhZ2VyT2JqLnBhZ2VTaXplID09PSAwKSA/IChwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCAvIHBhZ2VyT2JqLnBhZ2VTaXplKSA6XG4gICAgICAgICAgICAgICAgKHBhcnNlSW50KChwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCAvIHBhZ2VyT2JqLnBhZ2VTaXplKS50b1N0cmluZygpLCAxMCkgKyAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlua3NIdG1sKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZWZyZXNoTnVtZXJpY0xpbmtzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxpbms7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdmFyIGRpdiA9IHBhZ2VyT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbnVtZXJpY2NvbnRhaW5lcicpO1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwYWdlck9iai5wYWdlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGxpbmsgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLW51bWVyaWNpdGVtIGUtc3BhY2luZyBlLXBhZ2VyLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyByb2xlOiAnbGluaycsIHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdHb3RvIFBhZ2UgJyArIGkgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChsaW5rLCBbJ2UtY3VycmVudGl0ZW0nLCAnZS1hY3RpdmUnXSwgWydlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgICAgICB0aGlzLmxpbmtzID0gW10uc2xpY2UuY2FsbChkaXYuY2hpbGROb2Rlcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYWdlckVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFnZXJFbGVtZW50LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJOdW1lcmljQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1wYWdlcmNvbnRhaW5lcicsIGF0dHJzOiB7ICdyb2xlJzogJ25hdmlnYXRpb24nIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaXJzdE5QcmV2KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByZXZQYWdlclNldCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW51bWVyaWNjb250YWluZXInIH0pKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dFBhZ2VyU2V0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck5leHROTGFzdCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlckZpcnN0TlByZXYgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3QgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpcnN0IGUtaWNvbnMgZS1pY29uLWZpcnN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ2ZpcnN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJldiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtcHJldiBlLWljb25zIGUtaWNvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFt0aGlzLmZpcnN0LCB0aGlzLnByZXZdLCBwYWdlckNvbnRhaW5lcik7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlclByZXZQYWdlclNldCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5QUCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1wcCBlLXNwYWNpbmcnLCBpbm5lckhUTUw6ICcuLi4nLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VyVG9vbHRpcCcpLCByb2xlOiAnbGluaycsXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlclRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBhZ2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuUFApO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXJOZXh0UGFnZXJTZXQgPSBmdW5jdGlvbiAocGFnZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuTlAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtbnAgZS1zcGFjaW5nJyxcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6ICcuLi4nLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VyVG9vbHRpcCcpLCByb2xlOiAnbGluaycsXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VyVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5OUCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck5leHROTGFzdCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5uZXh0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1uZXh0IGUtaWNvbnMgZS1pY29uLW5leHQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubGFzdCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGFzdCBlLWljb25zIGUtaWNvbi1sYXN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbGFzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnbGFzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbdGhpcy5uZXh0LCB0aGlzLmxhc3RdLCBwYWdlckNvbnRhaW5lcik7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgcGFnZXJPYmoucHJldmlvdXNQYWdlTm8gPSBwYWdlck9iai5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kaXNhYmxlJykgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSkpIHtcbiAgICAgICAgICAgICAgICBwYWdlck9iai5jdXJyZW50UGFnZSA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICBwYWdlck9iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVMaW5rc0h0bWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlU2V0O1xuICAgICAgICAgICAgdmFyIHBhZ2VObztcbiAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFnZXJPYmoudG90YWxQYWdlcyA9PT0gMSA/IDEgOiBwYWdlck9iai5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA+IHBhZ2VyT2JqLnRvdGFsUGFnZXMgJiYgcGFnZXJPYmoudG90YWxQYWdlcykge1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFnZXJPYmoudG90YWxQYWdlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRQYWdlU2V0ID0gcGFyc2VJbnQoKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC8gcGFnZXJPYmoucGFnZUNvdW50KS50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgJSBwYWdlck9iai5wYWdlQ291bnQgPT09IDAgJiYgY3VycmVudFBhZ2VTZXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VTZXQgPSBjdXJyZW50UGFnZVNldCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VyT2JqLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcGFnZU5vID0gKGN1cnJlbnRQYWdlU2V0ICogcGFnZXJPYmoucGFnZUNvdW50KSArIDEgKyBpO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlTm8gPD0gcGFnZXJPYmoudG90YWxQYWdlcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZU5vLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmlubmVySFRNTCA9ICFwYWdlck9iai5jdXN0b21UZXh0ID8gcGFnZU5vLnRvU3RyaW5nKCkgOiBwYWdlck9iai5jdXN0b21UZXh0ICsgcGFnZU5vO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgIT09IHBhZ2VObykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5jbGFzc0xpc3QuYWRkKCdlLXBhZ2VyLWRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZS1wYWdlci1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5saW5rc1tpXSwgW10sIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyc3Quc2V0QXR0cmlidXRlKCdpbmRleCcsICcxJyk7XG4gICAgICAgICAgICB0aGlzLmxhc3Quc2V0QXR0cmlidXRlKCdpbmRleCcsIHBhZ2VyT2JqLnRvdGFsUGFnZXMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnByZXYuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSAtIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5uZXh0LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAnMScpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWxhc3QnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZXJPYmoudG90YWxQYWdlcy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1wcmV2Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSAtIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLlBQLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFyc2VJbnQodGhpcy5saW5rc1swXS5nZXRBdHRyaWJ1dGUoJ2luZGV4JyksIDEwKSAtIHBhZ2VyT2JqLnBhZ2VDb3VudCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLk5QLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFyc2VJbnQodGhpcy5saW5rc1t0aGlzLmxpbmtzLmxlbmd0aCAtIDFdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZVN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlyc3ROUHJldlN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2UGFnZXJTZXRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV4dFBhZ2VyU2V0U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU5leHROTGFzdFN0eWxlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5saW5rc1sodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSAtIDEpICUgdGhpcy5wYWdlck1vZHVsZS5wYWdlQ291bnRdLCBbJ2UtY3VycmVudGl0ZW0nLCAnZS1hY3RpdmUnXSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVGaXJzdE5QcmV2U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0UGFnZSA9IFsnZS1maXJzdHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlRGlzYWJsZWQgPSBbJ2UtZmlyc3RwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgcHJldlBhZ2UgPSBbJ2UtcHJldnBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgcHJldlBhZ2VEaXNhYmxlZCA9IFsnZS1wcmV2cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wcmV2LCBwcmV2UGFnZSwgcHJldlBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5maXJzdCwgZmlyc3RQYWdlLCBmaXJzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0JyksIGZpcnN0UGFnZSwgZmlyc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1wcmV2JyksIHByZXZQYWdlLCBwcmV2UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucHJldiwgcHJldlBhZ2VEaXNhYmxlZCwgcHJldlBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZmlyc3QsIGZpcnN0UGFnZURpc2FibGVkLCBmaXJzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1wcmV2JyksIHByZXZQYWdlRGlzYWJsZWQsIHByZXZQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKSwgZmlyc3RQYWdlRGlzYWJsZWQsIGZpcnN0UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZVByZXZQYWdlclNldFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlID4gdGhpcy5wYWdlck1vZHVsZS5wYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLlBQLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10sIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLlBQLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10sIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZU5leHRQYWdlclNldFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlID0gdGhpcy5saW5rc1swXS5pbm5lckhUTUwucmVwbGFjZShwYWdlck9iai5jdXN0b21UZXh0LCAnJyk7XG4gICAgICAgICAgICBpZiAoIWZpcnN0UGFnZS5sZW5ndGggfHwgIXRoaXMubGlua3MubGVuZ3RoIHx8IChwYXJzZUludChmaXJzdFBhZ2UsIDEwKSArIHBhZ2VyT2JqLnBhZ2VDb3VudCA+IHBhZ2VyT2JqLnRvdGFsUGFnZXMpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5OUCwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5OUCwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVOZXh0Tkxhc3RTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGFzdFBhZ2UgPSBbJ2UtbGFzdHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgbGFzdFBhZ2VEaXNhYmxlZCA9IFsnZS1sYXN0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIG5leHRQYWdlID0gWydlLW5leHRwYWdlJywgJ2UtcGFnZXItZGVmYXVsdCddO1xuICAgICAgICAgICAgdmFyIG5leHRQYWdlRGlzYWJsZWQgPSBbJ2UtbmV4dHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICBpZiAocGFnZXJPYmouY3VycmVudFBhZ2UgPT09IHBhZ2VyT2JqLnRvdGFsUGFnZXMgfHwgcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxhc3QsIGxhc3RQYWdlRGlzYWJsZWQsIGxhc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLm5leHQsIG5leHRQYWdlRGlzYWJsZWQsIG5leHRQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLCBsYXN0UGFnZURpc2FibGVkLCBsYXN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKSwgbmV4dFBhZ2VEaXNhYmxlZCwgbmV4dFBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5sYXN0LCBsYXN0UGFnZSwgbGFzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5uZXh0LCBuZXh0UGFnZSwgbmV4dFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWxhc3QnKSwgbGFzdFBhZ2UsIGxhc3RQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1uZXh0JyksIG5leHRQYWdlLCBuZXh0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWVyaWNDb250YWluZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk51bWVyaWNDb250YWluZXIgPSBOdW1lcmljQ29udGFpbmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9udW1lcmljLWNvbnRhaW5lci5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlck1lc3NhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlck1lc3NhZ2UocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYXJlbnRtc2diYXInLCBhdHRyczogeyAnYXJpYS1sYWJlbCc6ICdQYWdlciBJbmZvcm1hdGlvbicgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlbm9tc2cnLCBzdHlsZXM6ICd0ZXh0YWxpZ246cmlnaHQnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXBhZ2Vjb3VudG1zZycsIHN0eWxlczogJ3RleHRhbGlnbjpyaWdodCcgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFwcGVuZChbdGhpcy5wYWdlTm9Nc2dFbGVtLCB0aGlzLnBhZ2VDb3VudE1zZ0VsZW1dLCBkaXYpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0KHBhZ2VyT2JqLmdldExvY2FsaXplZExhYmVsKCdjdXJyZW50UGFnZUluZm8nKSwgW3BhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50ID09PSAwID8gMCA6XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlLCBwYWdlck9iai50b3RhbFBhZ2VzIHx8IDBdKSArICcgJztcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0KHBhZ2VyT2JqLmdldExvY2FsaXplZExhYmVsKCd0b3RhbEl0ZW1zSW5mbycpLCBbcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgfHwgMF0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy5wYWdlTm9Nc2dFbGVtLnRleHRDb250ZW50ICsgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnRleHRDb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5oaWRlTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VOb01zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VDb3VudE1zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYWdlTm9Nc2dFbGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKHN0ciwgYXJncykge1xuICAgICAgICAgICAgdmFyIHJlZ3g7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZWd4ID0gbmV3IFJlZ0V4cCgnXFxcXHsnICsgKGkpICsgJ1xcXFx9JywgJ2dtJyk7XG4gICAgICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmVneCwgYXJnc1tpXS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlck1lc3NhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBhZ2VyTWVzc2FnZSA9IFBhZ2VyTWVzc2FnZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvcGFnZXItbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Ryb3Bkb3duc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlckRyb3BEb3duID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXJEcm9wRG93bihwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyZHJvcGRvd24nO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlckRyb3BEb3duLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRyb3BEb3duRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXNpemVzJyB9KTtcbiAgICAgICAgICAgIHZhciBkcm9wRG93bkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhZ2VyZHJvcGRvd24nIH0pO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRUZXh0RGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXJjb25zdGFudCcgfSk7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBhdHRyczogeyB0eXBlOiAndGV4dCcsIHRhYmluZGV4OiAnMScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJDb25zID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNvbnN0YW50JywgaW5uZXJIVE1MOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwYWdlckRyb3BEb3duJykgfSk7XG4gICAgICAgICAgICBkcm9wRG93bkRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICBkZWZhdWx0VGV4dERpdi5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VyQ29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoZHJvcERvd25EaXYpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGRlZmF1bHRUZXh0RGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VyRHJvcERvd25EaXYpO1xuICAgICAgICAgICAgdmFyIHBhZ2VTaXplc01vZHVsZSA9IHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemVzO1xuICAgICAgICAgICAgdmFyIHBhZ2VTaXplc0FycmF5ID0gKHBhZ2VTaXplc01vZHVsZS5sZW5ndGggPyBwYWdlU2l6ZXNNb2R1bGUgOiBbNSwgMTAsIDEyLCAyMF0pO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IChwYWdlU2l6ZXNBcnJheSkuaW5kZXhPZih0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplKSA+IC0xID8gdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSA6IHBhZ2VTaXplc0FycmF5WzBdO1xuICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QgPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkRyb3BEb3duTGlzdCh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogcGFnZVNpemVzQXJyYXksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC5hcHBlbmRUbyhpbnB1dCk7XG4gICAgICAgICAgICBwYWdlck9iai5wYWdlU2l6ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICBwYWdlck9iai50cmlnZ2VyKCdkcm9wRG93bkNoYW5nZWQnLCB7IHBhZ2VTaXplOiBkZWZhdWx0VmFsdWUgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUgPSB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudHJpZ2dlcignZHJvcERvd25DaGFuZ2VkJywgeyBwYWdlU2l6ZTogdGhpcy5kcm9wRG93bkxpc3RPYmplY3QudmFsdWUgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJvcERvd25MaXN0T2JqZWN0ICYmICF0aGlzLmRyb3BEb3duTGlzdE9iamVjdC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLnBhZ2VyRHJvcERvd25EaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZXJEcm9wRG93bjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZXJEcm9wRG93biA9IFBhZ2VyRHJvcERvd247XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL3BhZ2VyLWRyb3Bkb3duLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNTNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIlxuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeHRlcm5hbE1lc3NhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFeHRlcm5hbE1lc3NhZ2UocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2V4dGVybmFsTWVzc2FnZSc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXJleHRlcm5hbG1zZycsIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ1BhZ2VyIGV4dGVybmFsIG1lc3NhZ2UnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2UgJiYgdGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2UudG9TdHJpbmcoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMucGFnZXJNb2R1bGUuZXh0ZXJuYWxNZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlTWVzc2FnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLmhpZGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuc2hvd01lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICBFeHRlcm5hbE1lc3NhZ2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXh0ZXJuYWxNZXNzYWdlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHRlcm5hbE1lc3NhZ2UgPSBFeHRlcm5hbE1lc3NhZ2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBlajJfYmFzZV8zLCBlajJfZGF0YV8xLCBldmVudHMsIGVudW1fMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfMSwgcm93XzEsIGZpbHRlcl9jZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3BlcmF0b3JzID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAnY29udGFpbnMnLCBlbmRzV2l0aDogJ2VuZHN3aXRoJywgZXF1YWw6ICdlcXVhbCcsIGdyZWF0ZXJUaGFuOiAnZ3JlYXRlcnRoYW4nLCBncmVhdGVyVGhhbk9yRXF1YWw6ICdncmVhdGVydGhhbm9yZXF1YWwnLFxuICAgICAgICAgICAgICAgIGxlc3NUaGFuOiAnbGVzc3RoYW4nLCBsZXNzVGhhbk9yRXF1YWw6ICdsZXNzdGhhbm9yZXF1YWwnLCBub3RFcXVhbDogJ25vdGVxdWFsJywgc3RhcnRzV2l0aDogJ3N0YXJ0c3dpdGgnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZ09iai5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjZWxscmVuZGVyID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkZpbHRlciwgbmV3IGZpbHRlcl9jZWxsX3JlbmRlcmVyXzEuRmlsdGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgICAgIHJvd1JlbmRlcmVyLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcmJhcicgfSk7XG4gICAgICAgICAgICAgICAgcm93ID0gdGhpcy5nZW5lcmF0ZVJvdygpO1xuICAgICAgICAgICAgICAgIHJvdy5kYXRhID0gdGhpcy52YWx1ZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gcm93UmVuZGVyZXIucmVuZGVyKHJvdywgZ09iai5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGRldGFpbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbCkge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWwuY2xhc3NOYW1lID0gJ2UtZmlsdGVyYmFyY2VsbCBlLW1hc3RlcmNlbGwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5nZW5lcmF0ZUNlbGxzKCk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1bW15ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoZHVtbXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBjZWxsVHlwZSkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ3Jvd0lkJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSA/IGNlbGxUeXBlIDogZW51bV8xLkNlbGxUeXBlLkZpbHRlcixcbiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcyc6IHsgdGl0bGU6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRmlsdGVyYmFyVGl0bGUnKSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLmZpZWxkTmFtZSwgb3BlcmF0b3I6IHRoaXMub3BlcmF0b3IsIHZhbHVlOiB0aGlzLnZhbHVlLCBwcmVkaWNhdGU6IHRoaXMucHJlZGljYXRlLFxuICAgICAgICAgICAgICAgIG1hdGNoQ2FzZTogdGhpcy5tYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlOiB7fSwgYWN0dWFsT3BlcmF0b3I6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQodGhpcy5maWVsZE5hbWUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnNbaW5kZXhdID0gdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLnB1c2godGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2V0RmlsdGVyZWRDb2xzSW5kZXhCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gIXRoaXMuaXNSZW1vdmUgPyB7XG4gICAgICAgICAgICAgICAgY3VycmVudEZpbHRlck9iamVjdDogdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0LCBjdXJyZW50RmlsdGVyaW5nQ29sdW1uOiB0aGlzLmNvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMudXBkYXRlU3BhbkNsYXNzLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgJ2ZvY3VzaW4nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ5Q29sdW1uKGNvbC5maWVsZCwgY29sLm9wZXJhdG9yLCBjb2wudmFsdWUsIGNvbC5wcmVkaWNhdGUsIGNvbC5tYXRjaENhc2UsIGNvbC5hY3R1YWxGaWx0ZXJWYWx1ZSwgY29sLmFjdHVhbE9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJCeUNvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJDZWxsO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZmllbGROYW1lKTtcbiAgICAgICAgICAgIGZpbHRlckNlbGwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLmNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhdGhpcy5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZmlsdGVyQnlDb2x1bW4sIGFyZzE6IGZpZWxkTmFtZSwgYXJnMjogZmlsdGVyT3BlcmF0b3IsIGFyZzM6IGZpbHRlclZhbHVlLCBhcmc0OiBwcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgICAgIGFyZzU6IG1hdGNoQ2FzZSwgYXJnNjogYWN0dWFsRmlsdGVyVmFsdWUsIGFyZzc6IGFjdHVhbE9wZXJhdG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBtYXRjaENhc2UgfHwgZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlIHx8ICdhbmQnO1xuICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IGZpbHRlck9wZXJhdG9yO1xuICAgICAgICAgICAgZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5jb2x1bW4uZmllbGRdID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGROYW1lKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZmlsdGVyZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgfHwgdGhpcy5jaGVja0ZvclNraXBJbnB1dCh0aGlzLmNvbHVtbiwgZmlsdGVyVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSBmaWx0ZXJWYWx1ZS5sZW5ndGggPCAxID8gJycgOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVyQ2VsbC52YWx1ZSAhPT0gZmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJDZWxsLnZhbHVlID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja0FscmVhZHlDb2xGaWx0ZXJlZCh0aGlzLmNvbHVtbi5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZpbHRlck9iamVjdDogdGhpcy5jdXJyZW50RmlsdGVyT2JqZWN0LCBjdXJyZW50RmlsdGVyaW5nQ29sdW1uOiB0aGlzLmNvbHVtbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbi5maWVsZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLCByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0ZpbHRlckJhclN0YXR1cyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5wcm9wZXJ0aWVzW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGFyZW50LmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jbGVhckZpbHRlcmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdXRpbF8xLmdldEFjdHVhbFByb3BGcm9tQ29sbCh0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMpO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuY2xlYXJGaWx0ZXJpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQoY29sc1tpXS5maWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gJyc7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5maWVsZCA9PT0gZmllbGQgJiYgY29sLnZhbHVlID09PSB0aGlzLnZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbC5vcGVyYXRvciA9PT0gdGhpcy5vcGVyYXRvciAmJiBjb2wucHJlZGljYXRlID09PSB0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgaXNDbGVhckZpbHRlckJhcikge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBhcmcxOiBmaWVsZCwgYXJnMjogaXNDbGVhckZpbHRlckJhclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlzQ2xlYXJGaWx0ZXJCYXIgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgY29sc1tpXS5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcpLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZXNbZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGZpZWxkKS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZmlsdGVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmaWx0ZXInO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMubWF0Y2hlcyh0YXJnZXQsICcuZS1maWx0ZXJiYXIgaW5wdXQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKHRhcmdldC5pZC5zcGxpdCgnXycpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDcm9zc0ljb24odGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZmlsdGVyU2V0dGluZ3MubW9kZSA9PT0gJ2ltbWVkaWF0ZScgfHwgZS5rZXlDb2RlID09PSAxMykgJiYgZS5rZXlDb2RlICE9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0YXJnZXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGaWx0ZXIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZVNwYW5DbGFzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNhbmNlbCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRleHQgPSB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICB0YXJnZXRUZXh0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIHRhcmdldFRleHQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnZm9jdXNpbicgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJ0ZXh0JykgJiYgIXRhcmdldC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RGaWx0ZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNyb3NzSWNvbih0YXJnZXQpO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnZm9jdXNpbicgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVydGV4dCcpICYmIHRoaXMubGFzdEZpbHRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVDcm9zc0ljb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZSgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlRmlsdGVyTXNnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJTZXR0aW5ncy5zaG93RmlsdGVyQmFyU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoID4gMCAmJiB0aGlzLmZpbHRlclN0YXR1c01zZyAhPT0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbnNbaW5kZXhdLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSAnICYmICc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgKz0gY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdGhpcy52YWx1ZXNbY29sdW1uLmZpZWxkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGdPYmoudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKHRoaXMuZmlsdGVyU3RhdHVzTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tGb3JTa2lwSW5wdXQgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGlzU2tpcDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc9JywgJyAnLCAnISddO1xuICAgICAgICAgICAgICAgIGlmIChlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9sc1t2YWx1ZV0gfHwgc2tpcElucHV0LmluZGV4T2YodmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz4nLCAnPCcsICc9JywgJyEnXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlXzEgPSB2YWx1ZTsgX2kgPCB2YWx1ZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gdmFsdWVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWwpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2tpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNTa2lwO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnByb2Nlc3NGaWx0ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMub25UaW1lclRpY2soKTsgfSwgZS5rZXlDb2RlID09PSAxMyA/IDAgOiB0aGlzLmZpbHRlclNldHRpbmdzLmltbWVkaWF0ZU1vZGVEZWxheSk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUub25UaW1lclRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbHRlckVsZW1lbnQudmFsdWUpKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQodGhpcy5jb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVGaWx0ZXJWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4odGhpcy5jb2x1bW4uZmllbGQsIHRoaXMub3BlcmF0b3IsIHRoaXMudmFsdWUsIHRoaXMucHJlZGljYXRlLCB0aGlzLm1hdGNoQ2FzZSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudmFsaWRhdGVGaWx0ZXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IHRydWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY29sdW1uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcElucHV0LmluZGV4T2YodmFsdWVbaV0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPcGVyYXRvcih2YWx1ZS5zdWJzdHJpbmcoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycgJiYgdmFsdWUubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZUZvcm1hdHRlci5mcm9tVmlldyh0aGlzLnZhbHVlLCB0aGlzLmNvbHVtbi5nZXRQYXJzZXIoKSwgdGhpcy5jb2x1bW4udHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICcqJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQodmFsdWUubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuY2hhckF0KDApID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVuZHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUgPT09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRPcGVyYXRvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNpbmdsZU9wID0gdmFsdWUuY2hhckF0KDApO1xuICAgICAgICAgICAgdmFyIG11bHRpcGxlT3AgPSB2YWx1ZS5zbGljZSgwLCAyKTtcbiAgICAgICAgICAgIHZhciBvcGVyYXRvcnMgPSBlajJfYmFzZV8yLmV4dGVuZCh7ICc9JzogdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWwsICchJzogdGhpcy5maWx0ZXJPcGVyYXRvcnMubm90RXF1YWwgfSwgZWoyX2RhdGFfMS5EYXRhVXRpbC5vcGVyYXRvclN5bWJvbHMpO1xuICAgICAgICAgICAgaWYgKG9wZXJhdG9ycy5oYXNPd25Qcm9wZXJ0eShzaW5nbGVPcCkgfHwgb3BlcmF0b3JzLmhhc093blByb3BlcnR5KG11bHRpcGxlT3ApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1tzaW5nbGVPcF07XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3BlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1ttdWx0aXBsZU9wXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMubGVzc1RoYW4gfHwgdGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZ3JlYXRlclRoYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5jaGFyQXQoMCkgPT09ICc9Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5vcGVyYXRvciArICdvcmVxdWFsJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGxzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZmlsdGVyYmFyY2VsbCcpKTtcbiAgICAgICAgICAgIGZpbHRlckNlbGxzLnNwbGljZShlLnRvSW5kZXgsIDAsIGZpbHRlckNlbGxzLnNwbGljZShlLmZyb21JbmRleCwgMSlbMF0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmaWx0ZXJDZWxsc18xID0gZmlsdGVyQ2VsbHM7IF9pIDwgZmlsdGVyQ2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGZpbHRlckNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpbHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZmlsdGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWx0ZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyY2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRmlsdGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgaW5uZXJESVYgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIGlucHV0O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWZsdHJ0ZW1wJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdlLWZsdHJ0ZW1wZGl2J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5jcmVhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnLCBjbGFzc05hbWU6ICdlLWZpbHRlclVpX2lucHV0IGUtZmlsdGVydGV4dCBlLWZsdHJUZW1wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICdzZWFyY2gnLCB0aXRsZTogY29sdW1uLmhlYWRlclRleHQgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGNvbHVtbjogY29sdW1uIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IHRlbXAoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdlLWZpbHRlcmRpdiBlLWZsdHJpbnB1dGRpdidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBjb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnLCBjbGFzc05hbWU6ICdlLWZpbHRlcnRleHQnLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCArIGNlbGwuYXR0cmlidXRlcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2NlbGwuY29sdW1uLmZpZWxkXSA/IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdIDogJycsIHJvbGU6ICdzZWFyY2gnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNhbmNlbCBlLWhpZGUgZS1pY29ucyBlLWljb24taGlkZScsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ2NsZWFyIGZpbHRlciBjZWxsJywgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcgPT09IGZhbHNlIHx8IGNvbHVtbi5maWVsZCA9PT0gJycgfHwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZS1kaXNhYmxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpIHx8IGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVJlYWQgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUucmVhZDtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVXcml0ZSA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS53cml0ZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgZWxlbWVudDogaW5wdXQsIGNvbHVtbjogY29sdW1uIH07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVJlYWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVhZCA9IGFyZ3MuY29sdW1uID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVJlYWQsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGVXcml0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVXcml0ZSA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcGxhdGVXcml0ZSwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVXcml0ZS5jYWxsKHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZEh0bWwgPSBmdW5jdGlvbiAobm9kZSwgaW5uZXJIdG1sKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGlubmVySHRtbCk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpbHRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkZpbHRlckNlbGxSZW5kZXJlciA9IEZpbHRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHdpZHRoX2NvbnRyb2xsZXJfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QgPSB7XG4gICAgICAgIHJvb3Q6ICdlLXJoYW5kbGVyJyxcbiAgICAgICAgc3VwcHJlc3M6ICdlLXJzdXBwcmVzcycsXG4gICAgICAgIGljb246ICdlLXJpY29uJyxcbiAgICAgICAgaGVscGVyOiAnZS1yaGVscGVyJyxcbiAgICAgICAgaGVhZGVyOiAndGguZS1oZWFkZXJjZWxsJyxcbiAgICAgICAgY3Vyc29yOiAnZS1yY3Vyc29yJyxcbiAgICAgICAgbGluZXM6ICdlLXJsaW5lcydcbiAgICB9O1xuICAgIHZhciBSZXNpemUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZXNpemUocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuYXV0b0ZpdENvbHVtbnMgPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lID0gKGZOYW1lID09PSB1bmRlZmluZWQgfHwgZk5hbWUgPT09IG51bGwgfHwgZk5hbWUubGVuZ3RoIDw9IDApID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmZpZWxkOyB9KSA6ICh0eXBlb2YgZk5hbWUgPT09ICdzdHJpbmcnKSA/IFtmTmFtZV0gOiBmTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZmluZENvbHVtbihjb2x1bW5OYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUsIGluZGV4LCBpZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXZUYWcgPSAnZS1ncmlkaGVhZGVyJztcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2VGFnID0gJ2UtZ3JpZGNvbnRlbnQnO1xuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoQ2xvbmUgPSBnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcigndHInKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGggPSAwO1xuICAgICAgICAgICAgaWYgKGluZGVudFdpZHRoQ2xvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZW50V2lkdGhDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCArPSBpbmRlbnRXaWR0aENsb25lW2ldLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1aWQgPSBpZCA/IGlkIDogdGhpcy5wYXJlbnQuZ2V0VWlkQnlDb2x1bW5GaWVsZChmTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgodWlkKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0Q2xvbmUgPSBoZWFkZXJUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpW2NvbHVtbkluZGV4XS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGV4dCA9IFtoZWFkZXJUZXh0Q2xvbmVdO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUZXh0Q2xvbmUgPSBjb250ZW50VGFibGUucXVlcnlTZWxlY3RvckFsbChcInRkOm50aC1jaGlsZChcIiArIChjb2x1bW5JbmRleCArIDEpICsgXCIpXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUZXh0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRUZXh0Q2xvbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb250ZW50VGV4dFtpXSA9IGNvbnRlbnRUZXh0Q2xvbmVbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdIZWFkZXIgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJUZXh0LCBoZWFkZXJEaXZUYWcpO1xuICAgICAgICAgICAgdmFyIHdDb250ZW50ID0gdGhpcy5jcmVhdGVUYWJsZShjb250ZW50VGFibGUsIGNvbnRlbnRUZXh0LCBjb250ZW50RGl2VGFnKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5ieWluZGV4ID0gZ09iai5nZXRDb2x1bW5zKClbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICh3SGVhZGVyID4gd0NvbnRlbnQpID8gY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3SGVhZGVyKSA6IGNvbHVtbmJ5aW5kZXgud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod0NvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgoZ09iai5nZXRDb2x1bW5zKClbaW5kZXhdKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdPYmouZ2V0Q29sdW1ucygpLnNvbWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgud2lkdGggPT09IG51bGwgfHwgeC53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IHgud2lkdGgubGVuZ3RoIDw9IDA7IH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0V2lkdGggPSB0V2lkdGggKyBwYXJzZUludChlbGVtZW50LndpZHRoLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFibGVXaWR0aF8xID0gdFdpZHRoICsgaW5kZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKHRXaWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFRhYmxlLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHRhYmxlV2lkdGhfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhYmxlV2lkdGggPSBoZWFkZXJUYWJsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBjb250ZW50d2lkdGggPSAoZ09iai5nZXRDb250ZW50KCkuc2Nyb2xsV2lkdGgpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnR3aWR0aCA+IHRhYmxlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5jbGFzc0xpc3QuYWRkKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudFRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncmVzaXplJztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5maW5kQ29sdW1uID0gZnVuY3Rpb24gKGZOYW1lKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgZk5hbWUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IF90aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmdldENvbHVtbnMoKVtjb2x1bW5JbmRleF0udmlzaWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNpemVDb2x1bW4oZmllbGROYW1lLCBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAodGFibGUsIHRleHQsIHRhZykge1xuICAgICAgICAgICAgdmFyIG15VGFibGVEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5jbGFzc05hbWUgPSB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7dmlzaWJpbGl0eTpoaWRkZW47cG9zaXRpb246YWJzb2x1dGUnO1xuICAgICAgICAgICAgdmFyIG15U3ViRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG15U3ViRGl2LmNsYXNzTmFtZSA9IHRhZztcbiAgICAgICAgICAgIHZhciBteVRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICAgICAgbXlUYWJsZS5jbGFzc05hbWUgPSB0YWJsZS5jbGFzc05hbWU7XG4gICAgICAgICAgICBteVRhYmxlLnN0eWxlLmNzc1RleHQgPSAndGFibGUtbGF5b3V0OiBhdXRvO3dpZHRoOiBhdXRvJztcbiAgICAgICAgICAgIHZhciBteVRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdGV4dC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gbXlUci5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICB0ci5jbGFzc05hbWUgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0cicpLmNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBteVRhYmxlLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbXlTdWJEaXYuYXBwZW5kQ2hpbGQobXlUYWJsZSk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmFwcGVuZENoaWxkKG15U3ViRGl2KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0V2lkdGhWYWx1ZSA9IG15VGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG15VGFibGVEaXYpO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChvZmZzZXRXaWR0aFZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAndmVydGljYWwnIHx8IHRoaXMucGFyZW50LmdyaWRMaW5lcyA9PT0gJ2JvdGgnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5saW5lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEhhbmRsZXJIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gZWxlLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmdldFJlc2l6ZUhhbmRsZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgX3RoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0UmVzaXplSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Qucm9vdCkpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnNldEhhbmRsZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5zdXBwcmVzcykpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FsbEF1dG9GaXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0VGFyZ2V0Q29sdW1uKGUpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4oY29sLmZpZWxkLCB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sLnVpZCksIGNvbC51aWQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZVN0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEhlbHBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHRoaXMuZ2V0UG9pbnRYKGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAtICh0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgKz0gdGhpcy5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgIXRoaXMuaGVscGVyLmNsYXNzTGlzdC5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyLmNsYXNzTGlzdC5hZGQoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdGFydCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdhZGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYW5jZWxSZXNpemVBY3Rpb24gPSBmdW5jdGlvbiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdyZW1vdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgaWYgKG1pbldpZHRoICYmIHdpZHRoIDwgbWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF4V2lkdGggJiYgd2lkdGggPiBtYXhXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXppbmcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICB2YXIgbW91c2Vtb3ZlID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gLShwYWdlWCAtIHRoaXMucGFnZVgpIDogKHBhZ2VYIC0gdGhpcy5wYWdlWCk7XG4gICAgICAgICAgICB2YXIgY29sRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQodGhpcy53aWR0aFNlcnZpY2UuZ2V0V2lkdGgodGhpcy5jb2x1bW4pLnRvU3RyaW5nKCksIDEwKSArIG1vdXNlbW92ZSxcbiAgICAgICAgICAgICAgICBtaW5XaWR0aDogdGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiB0aGlzLmNvbHVtbi5tYXhXaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbERhdGEud2lkdGgsIGNvbERhdGEubWluV2lkdGgsIGNvbERhdGEubWF4V2lkdGgpO1xuICAgICAgICAgICAgaWYgKCghdGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA+PSBwYWdlWCkgfHwgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCAmJiB0aGlzLm1pbk1vdmUgPD0gcGFnZVgpKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2VYID0gdGhpcy5taW5Nb3ZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4ud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5vblJlc2l6ZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sR3JvdXAodGhpcy5jb2x1bW4pO1xuICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldENvbHVtbldpZHRoKHRoaXMuY29sdW1uLCBudWxsLCAncmVzaXplJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIZWxwZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVFbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZTogZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucmVzaXplU3RvcCwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMuZG91YmxlVGFwRXZlbnQoZSk7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRQb2ludFggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudWlkID09PSBjb2x1bW4udWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC53aWR0aCA9IGNvbHVtbi53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFRhcmdldENvbHVtbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHZhciB1aWQgPSBjZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlQ3Vyc29yID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpKTtcbiAgICAgICAgICAgIGhlYWRlclJvd3MucHVzaCh0aGlzLnBhcmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaGVhZGVyUm93c18xID0gaGVhZGVyUm93czsgX2kgPCBoZWFkZXJSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGhlYWRlclJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdFthY3Rpb25dKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmN1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucGFnZVggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hcHBlbmRIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVscGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5vZmZzZXRIZWlnaHQgLSB0aGlzLmdldFNjcm9sbEJhcldpZHRoKCk7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0aGlzLmVsZW1lbnQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB2YXIgdHIgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgndHInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdHIuaW5kZXhPZihyZWN0LnBhcmVudEVsZW1lbnQpOyBpIDwgdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQgKz0gdHJbaV0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuY2FsY1BvcyhyZWN0KTtcbiAgICAgICAgICAgIHBvcy5sZWZ0ICs9ICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAwIC0gMSA6IHJlY3Qub2Zmc2V0V2lkdGggLSAyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OiAnICsgaGVpZ2h0ICsgJ3B4OyB0b3A6ICcgKyBwb3MudG9wICsgJ3B4OyBsZWZ0OicgKyBNYXRoLmZsb29yKHBvcy5sZWZ0KSArICdweDsnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgcmV0dXJuIGVsZS5zY3JvbGxXaWR0aCA+IGVsZS5jbGllbnRXaWR0aCA/IHV0aWxfMS5nZXRTY3JvbGxCYXJXaWR0aCgpIDogMDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZW1vdmVIZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNscyA9IGUudGFyZ2V0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIGlmICghKGNscy5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSB8fCBjbHMuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbikpICYmIHRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlcik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlajJfYmFzZV8xLmNsb3Nlc3QodGhpcy5lbGVtZW50LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IodGhpcy5jYWxjUG9zKHJlY3QpLmxlZnQgKyAodGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gMCAtIDEgOiByZWN0Lm9mZnNldFdpZHRoIC0gMikpICsgJ3B4JztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYWxjUG9zID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZWxlbS5vZmZzZXRQYXJlbnQgfHwgZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiZcbiAgICAgICAgICAgICAgICAob2Zmc2V0UGFyZW50ID09PSBkb2MuYm9keSB8fCBvZmZzZXRQYXJlbnQgPT09IGRvYy5kb2N1bWVudEVsZW1lbnQpICYmXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50LnN0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQgIT09IGVsZW0gJiYgb2Zmc2V0UGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZG91YmxlVGFwRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlckFnZW50KCkgJiYgdGhpcy5pc0RibENsaykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50YXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIoKSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbEF1dG9GaXQoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0VXNlckFnZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXJBZ2VudCA9IGVqMl9iYXNlXzEuQnJvd3Nlci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiAvaXBob25lfGlwb2R8aXBhZC8udGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVzaXplO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZXNpemUgPSBSZXNpemU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJlb3JkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW9yZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucmVvcmRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuZHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmRyYWdTdGFydCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0b3AsIHRoaXMuZHJhZ1N0b3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jaGtEcm9wUG9zaXRpb24gPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzcmNFbGVtLnBhcmVudEVsZW1lbnQuaXNFcXVhbE5vZGUoZGVzdEVsZW0ucGFyZW50RWxlbWVudCkgJiYgdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleChzcmNFbGVtLCBkZXN0RWxlbSkgPiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY2hrRHJvcEFsbENvbHMgPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHZhciBpc0ZvdW5kO1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHdoaWxlICghaXNGb3VuZCAmJiBoZWFkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBoZWFkZXJzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlzRm91bmQgPSBzcmNFbGVtICE9PSBoZWFkZXIgJiYgdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleChzcmNFbGVtLCBkZXN0RWxlbSkgPiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0ZvdW5kO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5maW5kQ29sUGFyZW50ID0gZnVuY3Rpb24gKGNvbCwgY29scywgcGFyZW50KSB7XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2wgPT09IGNvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbHNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY250ID0gcGFyZW50Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnB1c2goY29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5maW5kQ29sUGFyZW50KGNvbCwgY29sc1tpXS5jb2x1bW5zLCBwYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc3BsaWNlKGNudCwgcGFyZW50Lmxlbmd0aCAtIGNudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0Q29sdW1uc01vZGVsID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5Nb2RlbCA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1YkNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uTW9kZWwucHVzaChjb2xzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YkNvbHMgPSBzdWJDb2xzLmNvbmNhdChjb2xzW2ldLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJDb2xzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbHVtbk1vZGVsID0gY29sdW1uTW9kZWwuY29uY2F0KHRoaXMuZ2V0Q29sdW1uc01vZGVsKHN1YkNvbHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5Nb2RlbDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuaGVhZGVyRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICd0aCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlc3RFbGVtID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGRlc3RFbGVtICYmICEoIXRoaXMuY2hrRHJvcFBvc2l0aW9uKHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pIHx8ICF0aGlzLmNoa0Ryb3BBbGxDb2xzKHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pKSkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkSWR4ID0gdXRpbF8xLmdldEVsZW1lbnRJbmRleCh0aGlzLmVsZW1lbnQsIGhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zTW9kZWwodGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbb2xkSWR4XTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHRoaXMuZWxlbWVudCwgZGVzdEVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUNvbHVtbnMobmV3SW5kZXgsIGNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmlzQWN0aW9uUHJldmVudCA9IGZ1bmN0aW9uIChnT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUubW92ZUNvbHVtbnMgPSBmdW5jdGlvbiAoZGVzdEluZGV4LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLm1vdmVDb2x1bW5zLCBhcmcxOiBkZXN0SW5kZXgsIGFyZzI6IGNvbHVtbiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoY29sdW1uLCB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNyY0lkeCA9IHV0aWxfMS5pbkFycmF5KGNvbHVtbiwgY29scyk7XG4gICAgICAgICAgICBpZiAoIWdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IHNyY0lkeCA9PT0gZGVzdEluZGV4IHx8IHNyY0lkeCA9PT0gLTEgfHwgZGVzdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHMuc3BsaWNlKGRlc3RJbmRleCwgMCwgY29scy5zcGxpY2Uoc3JjSWR4LCAxKVswXSk7XG4gICAgICAgICAgICBnT2JqLmdldENvbHVtbnModHJ1ZSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB7IGZyb21JbmRleDogZGVzdEluZGV4LCB0b0luZGV4OiBzcmNJZHggfSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jlb3JkZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXggPSBmdW5jdGlvbiAoc3JjRWxlbSwgZGVzdEVsZW0pIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmbGF0Q29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc01vZGVsKGNvbHMpO1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGZsYXRDb2x1bW5zW3V0aWxfMS5nZXRFbGVtZW50SW5kZXgoc3JjRWxlbSwgaGVhZGVycyldLCBjb2xzKTtcbiAgICAgICAgICAgIGNvbHMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IGNvbHM7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmluQXJyYXkoZmxhdENvbHVtbnNbdXRpbF8xLmdldEVsZW1lbnRJbmRleChkZXN0RWxlbSwgaGVhZGVycyldLCBjb2xzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0Q29sUGFyZW50ID0gZnVuY3Rpb24gKGNvbHVtbiwgY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmluZENvbFBhcmVudChjb2x1bW4sIGNvbHVtbnMsIHBhcmVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUucmVvcmRlckNvbHVtbnMgPSBmdW5jdGlvbiAoZnJvbUZOYW1lLCB0b0ZOYW1lKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZCh0b0ZOYW1lKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChjb2x1bW4sIHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZGVzdEluZGV4ID0gdXRpbF8xLmluQXJyYXkoY29sdW1uLCBjb2x1bW5zKTtcbiAgICAgICAgICAgIGlmIChkZXN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUNvbHVtbnMoZGVzdEluZGV4LCB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZyb21GTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jcmVhdGVSZW9yZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdyA9IGhlYWRlci5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWljb24tcmVvcmRlcnVwYXJyb3cgZS1yZW9yZGVydXBhcnJvdycsIGF0dHJzOiB7IHN0eWxlOiAnZGlzcGxheTpub25lJyB9IH0pKTtcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93ID0gaGVhZGVyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtaWNvbi1yZW9yZGVyZG93bmFycm93IGUtcmVvcmRlcmRvd25hcnJvdycsIGF0dHJzOiB7IHN0eWxlOiAnZGlzcGxheTpub25lJyB9IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwgeyB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy51cEFycm93KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZG93bkFycm93KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yZW9yZGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuZHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5kcmFnU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgdGhpcy5kcmFnU3RvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGw6bm90KC5lLXN0YWNrZWRIZWFkZXJDZWxsKScpO1xuICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgIHZhciBpc0xlZnQgPSB0aGlzLnggPiB1dGlsXzEuZ2V0UG9zaXRpb24oZS5ldmVudCkueCArIGdPYmouZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yZW9yZGVyaW5kaWNhdGUnKSwgWydlLXJlb3JkZXJpbmRpY2F0ZSddKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbFBvc3Rpb24oZS5ldmVudCk7XG4gICAgICAgICAgICBpZiAoY2xvc2VzdCAmJiAhY2xvc2VzdC5pc0VxdWFsTm9kZSh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdDtcbiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5jaGtEcm9wUG9zaXRpb24odGhpcy5lbGVtZW50LCB0YXJnZXQpIHx8ICF0aGlzLmNoa0Ryb3BBbGxDb2xzKHRoaXMuZWxlbWVudCwgdGFyZ2V0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBcnJvd1Bvc2l0aW9uKHRhcmdldCwgaXNMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtYWxsb3dEcm9wJywgJ2UtcmVvcmRlcmluZGljYXRlJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShnT2JqLmFsbG93R3JvdXBpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS51cGRhdGVTY3JvbGxQb3N0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgeCA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKS54O1xuICAgICAgICAgICAgdmFyIGNsaVJlY3RCYXNlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxFbGVtID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKHggPiBjbGlSZWN0QmFzZS5sZWZ0ICYmIHggPCBjbGlSZWN0QmFzZS5sZWZ0ICsgMzUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMuc2V0U2Nyb2xsTGVmdChzY3JvbGxFbGVtLCB0cnVlKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoeCA8IGNsaVJlY3RCYXNlLnJpZ2h0ICYmIHggPiBjbGlSZWN0QmFzZS5yaWdodCAtIDM1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IF90aGlzLnNldFNjcm9sbExlZnQoc2Nyb2xsRWxlbSwgZmFsc2UpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnNldFNjcm9sbExlZnQgPSBmdW5jdGlvbiAoc2Nyb2xsRWxlbSwgaXNMZWZ0KSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCA9IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCArIChpc0xlZnQgPyAtNSA6IDUpO1xuICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgIT09IHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudXBkYXRlQXJyb3dQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzTGVmdCkge1xuICAgICAgICAgICAgdmFyIGNsaVJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdEJhc2UgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKChpc0xlZnQgJiYgY2xpUmVjdC5sZWZ0IDwgY2xpUmVjdEJhc2UubGVmdCkgfHwgKCFpc0xlZnQgJiYgY2xpUmVjdC5yaWdodCA+IGNsaVJlY3RCYXNlLnJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS50b3AgPSBjbGlSZWN0LnRvcCArIGNsaVJlY3QuaGVpZ2h0IC0gY2xpUmVjdEJhc2UudG9wICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93LnN0eWxlLnRvcCA9IGNsaVJlY3QudG9wIC0gY2xpUmVjdEJhc2UudG9wIC0gNCArICdweCc7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUubGVmdCA9IHRoaXMuZG93bkFycm93LnN0eWxlLmxlZnQgPSAoaXNMZWZ0ID8gY2xpUmVjdC5sZWZ0IDogY2xpUmVjdC5yaWdodCkgLSBjbGlSZWN0QmFzZS5sZWZ0IC0gNCArICdweCc7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJycpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgdGhpcy54ID0gdXRpbF8xLmdldFBvc2l0aW9uKGUuZXZlbnQpLnggKyBnT2JqLmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICghZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IGUuY29sdW1uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVvcmRlcmluZGljYXRlJyksIFsnZS1yZW9yZGVyaW5kaWNhdGUnXSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnNldERpc3BsYXkgPSBmdW5jdGlvbiAoZGlzcGxheSkge1xuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jlb3JkZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVvcmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVvcmRlciA9IFJlb3JkZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd0REID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93REQocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZHJhZ2FyZWEnKS5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICAgICAgIWUuc2VuZGVyLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnYW5kZHJvcCBlLWdyaWQgZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM6ICdoZWlnaHQ6XCJhdXRvXCIsIHotaW5kZXg6Miwgd2lkdGg6JyArIGdPYmouZWxlbWVudC5vZmZzZXRXaWR0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IHN0eWxlczogJ3dpZHRoOicgKyBnT2JqLmVsZW1lbnQub2Zmc2V0V2lkdGggfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSBnT2JqLmdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZFJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gc2VsZWN0ZWRSb3dzW2ldLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1pbmRlbnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtZGV0YWlscm93Y29sbGFwc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoc2VsZWN0ZWRSb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZHJhZ2FyZWEnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0RyYWdTdGFydCwge1xuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGUudGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEICYmIGRyb3BFbGVtICYmIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcEVsZW0uZWoyX2luc3RhbmNlc1swXS5nZXRDb250ZW50KCkuY2xhc3NMaXN0LmFkZCgnZS1hbGxvd1Jvd0Ryb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuaXNEcmFnU3RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5nZXRFbGVtZW50RnJvbVBvc2l0aW9uKGNsb25lRWxlbWVudCwgZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0RyYWcsIHtcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJywgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJvd2RyYWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoY2xvbmVFbGVtZW50LnBhcmVudEVsZW1lbnQsICdlLWdyaWQnKS5pZCA9PT0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbihlLmhlbHBlciwgZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Utcm93ZHJhZycpO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgJiYgZHJvcEVsZW0gJiYgZHJvcEVsZW0uZWoyX2luc3RhbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wRWxlbS5lajJfaW5zdGFuY2VzWzBdLmdldENvbnRlbnQoKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWFsbG93Um93RHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnJvd0Ryb3AsIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJyxcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSwgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZURyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgUm93REQucHJvdG90eXBlLmluaXRpYWxpemVEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICB2YXIgZHJhZztcbiAgICAgICAgICAgIGRyYWcgPSBuZXcgZWoyX2Jhc2VfMS5EcmFnZ2FibGUoZ09iai5nZXRDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtcm93Y2VsbCcsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRFbGVtZW50RnJvbVBvc2l0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGV2ZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8yLmV4dGVuZChlLCB7IHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRUYXJnZXRJZHggPSBmdW5jdGlvbiAodGFyZ2V0Um93KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Um93ID8gcGFyc2VJbnQodGFyZ2V0Um93LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkgOiAwO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuY29sdW1uRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSAhPT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRSb3cgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBzcmNDb250cm9sID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQucGFyZW50RWxlbWVudC5pZCAhPT0gZ09iai5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wgPSBlLmRyb3BwZWRFbGVtZW50LnBhcmVudEVsZW1lbnQuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNyY0NvbnRyb2wuZWxlbWVudC5pZCAhPT0gZ09iai5lbGVtZW50LmlkICYmIHNyY0NvbnRyb2wucm93RHJvcFNldHRpbmdzLnRhcmdldElEICE9PSBnT2JqLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVjb3JkcyA9IHNyY0NvbnRyb2wuZ2V0U2VsZWN0ZWRSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEluZGV4ID0gY3VycmVudEluZGV4ID0gdGhpcy5nZXRUYXJnZXRJZHgodGFyZ2V0Um93KTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChpc05hTih0YXJnZXRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IHRhcmdldEluZGV4ICsgKGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICogZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpIC0gZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5yb3dzQWRkZWQsIHsgdG9JbmRleDogdGFyZ2V0SW5kZXgsIHJlY29yZHM6IHJlY29yZHMgfSk7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncm93ZHJhZ2FuZGRyb3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IHNyY0NvbnRyb2wuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNraXAgPSBzcmNDb250cm9sLmFsbG93UGFnaW5nID9cbiAgICAgICAgICAgICAgICAgICAgKHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICogc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MucGFnZVNpemUpIC0gc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MucGFnZVNpemUgOiAwO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlY29yZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MucHVzaChza2lwICsgc2VsZWN0ZWRSb3dzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3JjQ29udHJvbC5ub3RpZnkoZXZlbnRzLnJvd3NSZW1vdmVkLCB7IGluZGV4ZXM6IHRoaXMuc2VsZWN0ZWRSb3dzIH0pO1xuICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jvd2RyYWdhbmRkcm9wJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZURyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyb3dEcmFnQW5kRHJvcCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dERDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93REQgPSBSb3dERDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jvdy1yZW9yZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwKHBhcmVudCwgZ3JvdXBTZXR0aW5ncywgc29ydGVkQ29sdW1ucywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdjbG9uZSBlLWdkY2xvbmUnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ2xpbmUtaGVpZ2h0OjIzcHgnLCBhdHRyczogeyBhY3Rpb246ICdncm91cGluZycgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JvdXBoZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JvdXBoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtdW5ncm91cGRyYWcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBfdGhpcy5jb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVuZ3JvdXBkcmFnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCEodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWEuc2V0R3JhYmJlZChfdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCdbYXJpYS1ncmFiYmVkPXRydWVdJyksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCksICdlLWdyaWQnKS5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYXJpYSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MgPSBncm91cFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5EcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSAmJlxuICAgICAgICAgICAgICAgICEodGhpcy5wYXJlbnQuYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyb3VwZHJvcGFyZWEnKSA/IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhvdmVyJykgOiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ob3ZlcicpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGwnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcEFyZWEgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KGRyb3BBcmVhLCBlLmNvbHVtbi5hbGxvd0dyb3VwaW5nKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IGUudGFyZ2V0IDogdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgdGhpcy5hcmlhLnNldEdyYWJiZWQoZWxlbWVudCwgdHJ1ZSwgIWUuY29sdW1uLmFsbG93R3JvdXBpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSA9PT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpLCAnZS1ncmlkJykuZ2V0QXR0cmlidXRlKCdpZCcpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuY29sdW1uRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3ApO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBDb2x1bW4oY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0VXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdPYmouYWxsb3dTZWxlY3Rpb24gPyBnT2JqLmdldFNlbGVjdGVkUm93SW5kZXhlcygpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFSb3cgPSBnT2JqLmdldERhdGFSb3dzKClbc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoIC0gMV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdycFJvdyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhUm93LnJvd0luZGV4OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdycFJvdyA9IHJvd3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKGdycFJvdy5xdWVyeVNlbGVjdG9yKGUuYWN0aW9uID09PSAnYWx0VXBBcnJvdycgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U29ydEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy51bkdyb3VwRnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUdyb3VwRnJvbUhlYWRlcihlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bkdyb3VwRnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVuZ3JvdXBidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudG9vZ2xlR3JvdXBGcm9tSGVhZGVyID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hcHBseVNvcnRGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTb3J0aW5nICYmIGdIZWFkZXIgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpICYmXG4gICAgICAgICAgICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2Rlc2NlbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2FzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlUm93cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgIGlmICh0cmd0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0cmd0LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgcm93SWR4ID0gdHJndC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHJvd05vZGVzKS5zbGljZShyb3dJZHggKyAxLCByb3dOb2Rlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciBpc0hpZGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZEVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRvRXhwYW5kID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGVudCA9IHRyZ3QucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzZXhwYW5kJztcbiAgICAgICAgICAgICAgICAgICAgdHJndC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICBleHBhbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXNIaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzY29sbGFwc2UnO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodHJndCwgZXhwYW5kKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpW2NlbGxJZHhdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylbY2VsbElkeF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluZGVudGNlbGwnKSAmJiByb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtaW5kZW50Y2VsbCcpLmxlbmd0aCA9PT0gaW5kZW50ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kRWxlbSA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kRWxlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9FeHBhbmQucHVzaChleHBhbmRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2kgLSAxXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1kZXRhaWxyb3djb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b0V4cGFuZC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzY29sbGFwc2UnO1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyh0b0V4cGFuZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoaXNFeHBhbmQpIHtcbiAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgcm93O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlY29yZHBsdXNleHBhbmQsIC5lLXJlY29yZHBsdXNjb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKGlzRXhwYW5kID8gJy5lLXJlY29yZHBsdXNjb2xsYXBzZScgOiAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzZXhwYW5kJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmQgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERyYWdBbmREcm9wKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlckdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGRyb3BhcmVhJywgYXR0cnM6IHsgJ3RhYmluZGV4JzogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHRoaXMucGFyZW50LmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSAmJiAhdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdMYWJlbCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBkcmFnTGFiZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZ3JvdXBlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPT09IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyb3VwZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXREcmFnQW5kRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdIZWFkZXJEcm9wKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHSGVhZGVyRHJhZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbGl6ZUdIZWFkZXJEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRyYWcgPSBuZXcgZWoyX2Jhc2VfMS5EcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWdyb3VwaGVhZGVyY2VsbCcsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5oZWFkZXJEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghZS51aWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoZS51aWQpO1xuICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsaXplR0hlYWRlckRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmNvbnRlbnRSZWZyZXNoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSBnT2JqLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW47XG4gICAgICAgICAgICB0aGlzLmNvbE5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBjb2x1bW5OYW1lOyB9KVswXSA6IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnVuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jb2xOYW1lID0gY29sdW1uLmZpZWxkO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICBjb2x1bW5zLnNwbGljZShjb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSwgMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbk5hbWUgPT09IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgY29sdW1ucy5wdXNoKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQgPT09IHRoaXMuY29sTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSBpKSB7XG4gICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5wdXNoKHsgZmllbGQ6IHRoaXMuY29sTmFtZSwgZGlyZWN0aW9uOiAnYXNjZW5kaW5nJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFnT2JqLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgPT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEZyb21Hcm91cERyb3AodGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpID4gLTEgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2xOYW1lLCByZXF1ZXN0VHlwZTogJ2dyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8zLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGRDb2xUb0dyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgIHZhciBncm91cGVkQ29sdW1uID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZC1pY29uIGUtZ3JvdXBoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHZhciBjaGlsZERpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBhdHRyczogeyAnZWotbWFwcGluZ25hbWUnOiBmaWVsZCB9IH0pO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNlbGwgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXB0ZXh0JywgaW5uZXJIVE1MOiBjb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnc29ydCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10b2dnbGVncm91cGJ1dHRvbiBlLWljb25zIGUtaWNvbi11bmdyb3VwIGUtdG9nZ2xldW5ncm91cCcsIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICd1bmdyb3VwIGJ1dHRvbicgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZywuZS1kZXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1hc2NlbmRpbmcnKSA/ICdhc2NlbmRpbmcnIDogJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXBzb3J0IGUtaWNvbnMgJyArICgnZS0nICsgZGlyZWN0aW9uICsgJyBlLWljb24tJyArIGRpcmVjdGlvbiksIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3NvcnQgdGhlIGdyb3VwZWQgY29sdW1uJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS11bmdyb3VwYnV0dG9uIGUtaWNvbnMgZS1pY29uLWhpZGUnLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1VuR3JvdXAnKSwgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3VuZ3JvdXAgdGhlIGdyb3VwZWQgY29sdW1uJyB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogdGhpcy5ncm91cFNldHRpbmdzLnNob3dVbmdyb3VwQnV0dG9uID8gJycgOiAnZGlzcGxheTpub25lJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZ3JvdXBlZENvbHVtbi5hcHBlbmRDaGlsZChjaGlsZERpdik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZ3JvdXBlZENvbHVtbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZWZyZXNoVG9nZ2xlQnRuID0gZnVuY3Rpb24gKGlzUmVtb3ZlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGxkaXYnKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhlYWRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGVhZGVyc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZW1wdHljZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoaGVhZGVyc1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdycHRvZ2dsZWJ0bicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGhlYWRlcnNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JwdG9nZ2xlYnRuJylbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaV0uYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdycHRvZ2dsZWJ0biBlLWljb25zICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uLmZpZWxkKSA+IC0xID8gJ2UtdG9nZ2xldW5ncm91cCBlLWljb24tdW5ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdlLXRvZ2dsZWdyb3VwIGUtaWNvbi1ncm91cCcpLCBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnR3JvdXAgYnV0dG9uJyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlQ29sRnJvbUdyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRHSGVhZGVyQ2VsbChmaWVsZCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSA+IC0xID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbE5hbWUsIHJlcXVlc3RUeXBlOiAnZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0Ryb3BBcmVhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSA/IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJycgOiB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93R3JvdXBlZENvbHVtbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwZWRDb2x1bW4odGhpcy5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1VuZ3JvdXBCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VW5ncm91cEJ1dHRvbiwgJ2UtdW5ncm91cGJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dUb2dnbGVCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uLCAnZS10b2dnbGVncm91cGJ1dHRvbiAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlZnJlc2hIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwZWRDb2x1bW4gPSBmdW5jdGlvbiAoaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZCh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1uc1tpXSkudmlzaWJsZSA9IGlzVmlzaWJsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkgPSBmdW5jdGlvbiAoaXNWaXNpYmxlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWUpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ0hlYWRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdIZWFkZXJbaV0uc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckdyb3VwaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bih0cnVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jbGVhckdyb3VwaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2xzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JvdXAnO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBnQ29scyA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5hbGxvd1NvcnRpbmcgJiYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgW10pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0bnVtYmVyJywgaW5uZXJIVE1MOiAoaSArIDEpLnRvU3RyaW5nKCkgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkgJiYgdGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHNvcnQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZGlyZWN0aW9uID09PSAnYXNjZW5kaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihnQ29sc1tpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZ0NvbHNbaV0pLnNldEF0dHJpYnV0ZSgnYXJpYS1ncm91cGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdldEdIZWFkZXJDZWxsID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZWotbWFwcGluZ25hbWU9JyArIGZpZWxkICsgJ10nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2VqLW1hcHBpbmduYW1lPScgKyBmaWVsZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXA7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkdyb3VwID0gR3JvdXA7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfbmF2aWdhdGlvbnNfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFRvb2xiYXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUb29sYmFyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zID0ge307XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZElEID0gcGFyZW50LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdmFyIHByZUl0ZW1zID0gWydhZGQnLCAnZWRpdCcsICd1cGRhdGUnLCAnZGVsZXRlJywgJ2NhbmNlbCcsICdwcmludCcsXG4gICAgICAgICAgICAgICAgJ3BkZmV4cG9ydCcsICdleGNlbGV4cG9ydCcsICd3b3JkZXhwb3J0JywgJ2NzdmV4cG9ydCddO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcmVJdGVtc18xID0gcHJlSXRlbXM7IF9pIDwgcHJlSXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHByZUl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhbGVOYW1lID0gaXRlbVswXS50b1VwcGVyQ2FzZSgpICsgaXRlbS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgaXRlbSwgcHJlZml4SWNvbjogJ2UtJyArIGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudChsb2NhbGVOYW1lKSwgdG9vbHRpcFRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudChsb2NhbGVOYW1lKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtcy5zZWFyY2ggPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZElEICsgJ19zZWFyY2gnLCB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJlLXNlYXJjaFwiIHJvbGU9XCJzZWFyY2hcIiA+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cIicgKyB0aGlzLmdyaWRJRCArICdfc2VhcmNoYnV0dG9uXCIgY2xhc3M9XCJlLXNlYXJjaGZpbmQgZS1pY29uc1wiIHRhYmluZGV4PVwiLTFcIlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiIGFyaWEtbGFiZWw9IFwic2VhcmNoXCI+PC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hiYXJcIiBhcmlhLW11bHRpbGluZT0gXCJmYWxzZVwiIHR5cGU9XCJzZWFyY2hcIlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9JyArIHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJykgKyAnPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgPC9pbnB1dD48L2Rpdj4nLCB0b29sdGlwVGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSwgYWxpZ246ICdyaWdodCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtcy5jb2x1bW5jaG9vc2VyID0ge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfJyArICdjb2x1bW5jaG9vc2VyJywgY3NzQ2xhc3M6ICdlLWNjIGUtY2NkaXYgZS1jYy10b29sYmFyJywgc3VmZml4SWNvbjogJ2UtJyArICdjb2x1bW5jaG9vc2VyLWJ0bicsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0NvbHVtbnMnLCB0b29sdGlwVGV4dDogJ2NvbHVtbnMnLCBhbGlnbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0VG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvb2xiYXIuZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50b29sYmFyLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuY3JlYXRlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcbiAgICAgICAgICAgIHRoaXMudG9vbGJhciA9IG5ldyBlajJfbmF2aWdhdGlvbnNfMS5Ub29sYmFyKHtcbiAgICAgICAgICAgICAgICBpdGVtczogaXRlbXMsXG4gICAgICAgICAgICAgICAgY2xpY2tlZDogdGhpcy50b29sYmFyQ2xpY2tIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgZW5hYmxlUGVyc2lzdGVuY2U6IHRoaXMucGFyZW50LmVuYWJsZVBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogdGhpcy5ncmlkSUQgKyAnX3Rvb2xiYXJJdGVtcycgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZFRvKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHRoaXMudG9vbGJhci5lbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKSgpWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhcicpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXJJdGVtcyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGVuYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGdPYmouZWRpdFNldHRpbmdzO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0FkZGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0VkaXRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19lZGl0JykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0RlbGV0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJyk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQgJiYgKGVkaXQuYWxsb3dBZGRpbmcgfHwgZWRpdC5hbGxvd0VkaXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zID0gW3RoaXMuZ3JpZElEICsgJ191cGRhdGUnLCB0aGlzLmdyaWRJRCArICdfY2FuY2VsJ107XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfYWRkJywgdGhpcy5ncmlkSUQgKyAnX2VkaXQnLCB0aGlzLmdyaWRJRCArICdfZGVsZXRlJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGVuYWJsZUl0ZW1zLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSXRlbXMoZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgdG9vbGJhckl0ZW1zID0gdGhpcy5wYXJlbnQudG9vbGJhciB8fCBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXIpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdG9vbGJhckl0ZW1zXzEgPSB0b29sYmFySXRlbXM7IF9pIDwgdG9vbGJhckl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0b29sYmFySXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdHlwZW9mIChpdGVtKSA9PT0gJ3N0cmluZycgPyBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbU9iamVjdChpdGVtKSkgOiBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbShpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAoaXRlbU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtT2JqZWN0LnRleHRdO1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChpdGVtLCBpdGVtLCBpdGVtT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtT2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1PYmplY3QgPSBmdW5jdGlvbiAoaXRlbU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtTmFtZV0gfHwgeyB0ZXh0OiBpdGVtTmFtZSwgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgaXRlbU5hbWUgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZW5hYmxlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGlzRW5hYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZW5hYmxlSXRlbXMoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBpc0VuYWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50b29sYmFyQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0lEID0gdGhpcy5ncmlkSUQ7XG4gICAgICAgICAgICBpZiAoIWFyZ3MuaXRlbSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMudG9vbGJhckNsaWNrLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MuaXRlbS5pZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19wcmludCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmoucHJpbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2VkaXQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnN0YXJ0RWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfdXBkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jYW5jZWwnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5hZGRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19zZWFyY2gnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldC5pZCA9PT0gZ0lEICsgJ19zZWFyY2hidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jb2x1bW5jaG9vc2VyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhckVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RWxlID0gYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGFyRWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouY3JlYXRlQ29sdW1uY2hvb3Nlcih4LCB5LCB0YXJnZXRFbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm1vZGVsQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpIHx8ICF0aGlzLnBhcmVudC50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5rZXlVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWFyY2godGhpcy5zZWFyY2hFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudXBkYXRlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSA9IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUud2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudW5XaXJlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3guYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLnVwZGF0ZVNlYXJjaEJveCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbGJhclJlZnJlc2gsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b29sYmFyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2xiYXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlRvb2xiYXIgPSBUb29sYmFyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvdG9vbGJhci5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzYyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIlxuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9mb290ZXItcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgY29uc3RhbnRfMSwgZm9vdGVyX3JlbmRlcmVyXzEsIHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBZ2dyZWdhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGUocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FnZ3JlZ2F0ZSc7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuaW5pdGlhdGVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNlbGxGYWMgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLlN1bW1hcnlDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICBbZW51bV8xLkNlbGxUeXBlLlN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeV0uZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjZWxsRmFjLmFkZENlbGxSZW5kZXJlcih0eXBlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIgPSBuZXcgZm9vdGVyX3JlbmRlcmVyXzEuRm9vdGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IucmVnaXN0ZXIoJ2Zvb3RlclJlbmRlcmVyJywgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuZGF0YVJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5mb290ZXJSZW5kZXJlci5yZWZyZXNoLCB0aGlzLmZvb3RlclJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5wcmVwYXJlU3VtbWFyeUluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgc3VtbWFyeUl0ZXJhdG9yKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMsIGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNvbHVtbiA9IF90aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbi5maWVsZCkgfHwge307XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBkYXRhQ29sdW1uLnR5cGU7XG4gICAgICAgICAgICAgICAgY29sdW1uLmZvcm1hdCA9IF90aGlzLmdldEZvcm1hdEZyb21UeXBlKGNvbHVtbi5mb3JtYXQsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY29sdW1uTmFtZSA9IGNvbHVtbi5jb2x1bW5OYW1lIHx8IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldEZvcm1hdEZyb21UeXBlID0gZnVuY3Rpb24gKGZvcm1hdCwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodHlwZSkgfHwgdHlwZW9mIGZvcm1hdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgZm9ybWF0OiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogdHlwZSwgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyUmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWF0ZVJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVwYXJlU3VtbWFyeUluZm8oKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIGNNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIGdNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChnTW9kZWwuZ2V0RGF0YSgpLmxlbmd0aCAhPT0gMCB8fCAhY01vZGVsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Rm9vdGVyQ29udGVudCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlID0gQWdncmVnYXRlO1xuICAgIGZ1bmN0aW9uIHN1bW1hcnlJdGVyYXRvcihhZ2dyZWdhdGVzLCBjYWxsYmFjaykge1xuICAgICAgICBhZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY29sdW1uLCByb3cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnN1bW1hcnlJdGVyYXRvciA9IHN1bW1hcnlJdGVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2FnZ3JlZ2F0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGNvbnN0YW50XzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZvb3RlclJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZvb3RlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGb290ZXJSZW5kZXJlcihncmlkTW9kdWxlLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5hZ2dyZWdhdGVzID0ge307XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBncmlkTW9kdWxlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMubW9kZWxHZW5lcmF0b3IgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGZvb3RlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y29udGVudCcgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldFBhZ2VyKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgdGhpcy5wYXJlbnQuZ2V0UGFnZXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5jcmVhdGVDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGlubmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJyk7XG4gICAgICAgICAgICB2YXIgdEZvb3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rmb290Jyk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Rm9vdCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclN1bW1hcnlDb250ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBBcnJheSA/IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgc3VtbWFyaWVzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgZHVtbWllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhpbnB1dCwgZSB8fCB0aGlzLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIHJvd3JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICByb3dyZW5kZXJlci5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUUicsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5cm93JyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIHNyb3cgPSAwLCBsZW4gPSBzdW1tYXJpZXMubGVuZ3RoOyBzcm93IDwgbGVuOyBzcm93KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c1tzcm93XTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvdykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gcm93cmVuZGVyZXIucmVuZGVyKHJvdywgZHVtbWllcyk7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnRGb290LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWdncmVnYXRlcyA9IGU7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS50Rm9vdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU3VtbWFyeUNvbnRlbnQoZSk7XG4gICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ29sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnJlcGxhY2VDaGlsZChoZWFkZXJDb2wsIHRoaXMuZ2V0Q29sR3JvdXAoKSk7XG4gICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKGhlYWRlckNvbCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5vbldpZHRoQ2hhbmdlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZHJlblthcmdzLmluZGV4XS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChhcmdzLndpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGb290ZXJUYWJsZVdpZHRoKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSB7IGxlZnQ6IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnNjcm9sbExlZnQgfTsgfVxuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuc2Nyb2xsTGVmdCA9IGUubGVmdDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2xHcm91cFJlZnJlc2gsIHRoaXMucmVmcmVzaENvbCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuc2Nyb2xsLCB0aGlzLm9uU2Nyb2xsLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5yZWZyZXNoQ29sKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLnNjcm9sbCwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVGb290ZXJUYWJsZVdpZHRoID0gZnVuY3Rpb24gKHRGb290KSB7XG4gICAgICAgICAgICB2YXIgdEhlYWQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgaWYgKHRIZWFkICYmIHRGb290KSB7XG4gICAgICAgICAgICAgICAgdEZvb3Quc3R5bGUud2lkdGggPSB0SGVhZC5zdHlsZS53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZvb3RlclJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLkZvb3RlclJlbmRlcmVyID0gRm9vdGVyUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3VtbWFyeUNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdW1tYXJ5Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3VtbWFyeUNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIGtleSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50eXBlKSA/IGNvbHVtbi5maWVsZCArICcgLSAnICsgKGNvbHVtbi50eXBlKSA6IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdID8gZGF0YVtjb2x1bW4uY29sdW1uTmFtZV1ba2V5XSA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoIShjb2x1bW4uZm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZuID0gY29sdW1uLmdldFRlbXBsYXRlKGNlbGwuY2VsbFR5cGUpO1xuICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKG5vZGUsIGZuKGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdW1tYXJ5Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuU3VtbWFyeUNlbGxSZW5kZXJlciA9IFN1bW1hcnlDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3VtbWFyeS1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvdmlydHVhbC1jb250ZW50LXJlbmRlcmVyXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgY29uc3RhbnRfMSwgZW51bV8xLCB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsU2Nyb2xsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbFNjcm9sbChwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ZpcnR1YWxzY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5pbnN0YW50aWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEuVmlydHVhbEhlYWRlclJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMS5WaXJ0dWFsQ29udGVudFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlUGFnZVNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZW5zdXJlUGFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93SGVpZ2h0ID0gdXRpbF8xLmdldFJvd0hlaWdodCh0aGlzLnBhcmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tTaXplID0gfn4odGhpcy5wYXJlbnQuaGVpZ2h0IC8gcm93SGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmJsb2NrU2l6ZSAqIDI7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldFByb3BlcnRpZXMoeyBwYWdlU2V0dGluZ3M6IHsgcGFnZVNpemU6IHNpemUgPCBoZWlnaHQgPyBoZWlnaHQgOiBzaXplIH0gfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVmlydHVhbEVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVmlydHVhbEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5yZWZyZXNoVmlydHVhbEVsZW1lbnQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGFyZ3MubW9kdWxlID09PSAncmVzaXplJykge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KS5yZWZyZXNoVmlydHVhbEVsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbFNjcm9sbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbFNjcm9sbCA9IFZpcnR1YWxTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy92aXJ0dWFsLXNjcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2ludGVyc2VjdGlvbi1vYnNlcnZlclwiLCBcIi4uL3NlcnZpY2VzL3ZpcnR1YWwtcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIHV0aWxfMSwgY29uc3RhbnRfMSwgZW51bV8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBpbnRlcnNlY3Rpb25fb2JzZXJ2ZXJfMSwgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxDb250ZW50UmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVmlydHVhbENvbnRlbnRSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbENvbnRlbnRSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnByZXZIZWlnaHQgPSAwO1xuICAgICAgICAgICAgX3RoaXMucHJldmVudEV2ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5hY3Rpb25zID0gWydmaWx0ZXJpbmcnLCAnc2VhcmNoaW5nJywgJ2dyb3VwaW5nJywgJ3VuZ3JvdXBpbmcnXTtcbiAgICAgICAgICAgIF90aGlzLm9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnRtcE9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUgPSBuZXcgVmlydHVhbEVsZW1lbnRIYW5kbGVyKCk7XG4gICAgICAgICAgICBfdGhpcy5vZmZzZXRLZXlzID0gW107XG4gICAgICAgICAgICBfdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lcignb24nKTtcbiAgICAgICAgICAgIF90aGlzLnZnZW5lcmF0b3IgPSBfdGhpcy5nZW5lcmF0b3I7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQgPSB0aGlzLmNvbnRlbnQgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJXcmFwcGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyUGxhY2VIb2xkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS53cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZUV2ZW50ID0gKHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyICYmICF0aGlzLnBhcmVudC5kYXRhU291cmNlLmRhdGFTb3VyY2Uub2ZmbGluZSk7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250ZW50LCBwYWdlSGVpZ2h0OiB0aGlzLmdldEJsb2NrSGVpZ2h0KCkgKiAyLCBkZWJvdW5jZUV2ZW50OiBkZWJvdW5jZUV2ZW50LFxuICAgICAgICAgICAgICAgIGF4ZXM6IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gWydYJywgJ1knXSA6IFsnWSddXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBpbnRlcnNlY3Rpb25fb2JzZXJ2ZXJfMS5JbnRlclNlY3Rpb25PYnNlcnZlcih0aGlzLnZpcnR1YWxFbGUud3JhcHBlciwgb3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoMCwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnNjcm9sbExpc3RlbmVyID0gZnVuY3Rpb24gKHNjcm9sbEFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZlbnRFdmVudCB8fCB0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0aGlzLmNvbnRlbnQgPT09IGVqMl9iYXNlXzEuY2xvc2VzdChkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAnLmUtY29udGVudCcpIHx8IHRoaXMuY29udGVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbmZvID0gc2Nyb2xsQXJncy5zZW50aW5lbDtcbiAgICAgICAgICAgIHZhciB2aWV3SW5mbyA9IHRoaXMuZ2V0SW5mb0Zyb21WaWV3KHNjcm9sbEFyZ3MuZGlyZWN0aW9uLCBpbmZvLCBzY3JvbGxBcmdzLm9mZnNldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2SW5mbyAmJiAoKGluZm8uYXhpcyA9PT0gJ1knICYmIHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkgPT09IHZpZXdJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIHx8IChpbmZvLmF4aXMgPT09ICdYJyAmJiB0aGlzLnByZXZJbmZvLmNvbHVtbkluZGV4ZXMudG9TdHJpbmcoKSA9PT0gdmlld0luZm8uY29sdW1uSW5kZXhlcy50b1N0cmluZygpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdmlld0luZm8uY29sdW1uSW5kZXhlcyA6IFtdKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IHZpZXdJbmZvLmxvYWROZXh0ICYmICF2aWV3SW5mby5sb2FkU2VsZiA/IHZpZXdJbmZvLm5leHRJbmZvLnBhZ2UgOiB2aWV3SW5mby5wYWdlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KHZpZXdJbmZvLmV2ZW50LCB7IHJlcXVlc3RUeXBlOiAndmlydHVhbHNjcm9sbCcsIHZpcnR1YWxJbmZvOiB2aWV3SW5mbyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuYmxvY2sgPSBmdW5jdGlvbiAoYmxrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUoYmxrKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW5mb0Zyb21WaWV3ID0gZnVuY3Rpb24gKGRpcmVjdGlvbiwgaW5mbywgZSkge1xuICAgICAgICAgICAgdmFyIHRlbXBCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmZvVHlwZSA9IHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIHNlbnRpbmVsSW5mbzogaW5mbywgb2Zmc2V0czogZSB9O1xuICAgICAgICAgICAgaW5mb1R5cGUucGFnZSA9IHRoaXMuZ2V0UGFnZUZyb21Ub3AoZS50b3AsIGluZm9UeXBlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmJsb2NrSW5kZXhlcyA9IHRlbXBCbG9ja3MgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm9UeXBlLnBhZ2UpO1xuICAgICAgICAgICAgaW5mb1R5cGUubG9hZFNlbGYgPSAhdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUodGVtcEJsb2Nrc1tpbmZvVHlwZS5ibG9ja10pO1xuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IHRoaXMuZW5zdXJlQmxvY2tzKGluZm9UeXBlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmJsb2NrSW5kZXhlcyA9IGJsb2NrcztcbiAgICAgICAgICAgIGluZm9UeXBlLmxvYWROZXh0ID0gIWJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gdGVtcEJsb2Nrcy5pbmRleE9mKHZhbCkgPT09IC0xOyB9KVxuICAgICAgICAgICAgICAgIC5ldmVyeSh0aGlzLmJsb2NrLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgaW5mb1R5cGUuZXZlbnQgPSAoaW5mb1R5cGUubG9hZE5leHQgfHwgaW5mb1R5cGUubG9hZFNlbGYpID8gY29uc3RhbnRfMS5tb2RlbENoYW5nZWQgOiBjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2s7XG4gICAgICAgICAgICBpbmZvVHlwZS5uZXh0SW5mbyA9IGluZm9UeXBlLmxvYWROZXh0ID8geyBwYWdlOiBNYXRoLm1heCgxLCBpbmZvVHlwZS5wYWdlICsgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nID8gMSA6IC0xKSkgfSA6IHt9O1xuICAgICAgICAgICAgaW5mb1R5cGUuY29sdW1uSW5kZXhlcyA9IGluZm8uYXhpcyA9PT0gJ1gnID8gdGhpcy52Z2VuZXJhdG9yLmdldENvbHVtbkluZGV4ZXMoKSA6IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmZvLmF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgIGluZm9UeXBlLmV2ZW50ID0gY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZm9UeXBlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5lbnN1cmVCbG9ja3MgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluZm8uYmxvY2tJbmRleGVzW2luZm8uYmxvY2tdO1xuICAgICAgICAgICAgdmFyIG1JZHg7XG4gICAgICAgICAgICB2YXIgb2xkID0gaW5kZXg7XG4gICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXg7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IGluZm8uZGlyZWN0aW9uID09PSAnZG93bicgPyBbbWF4KGluZGV4LCAxKSwgKytpbmRleCwgKytpbmRleF0gOiBbbWF4KGluZGV4IC0gMSwgMSksIGluZGV4LCBpbmRleCArIDFdO1xuICAgICAgICAgICAgaW5kZXhlcyA9IGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGluZCkgeyByZXR1cm4gaW5kZXhlcy5pbmRleE9mKHZhbCkgPT09IGluZDsgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSA9PT0gaW5kZXhlcy50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5mby5sb2FkU2VsZiB8fCAoaW5mby5kaXJlY3Rpb24gPT09ICdkb3duJyAmJiB0aGlzLmlzRW5kQmxvY2sob2xkKSkpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvLnBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXhlcy5zb21lKGZ1bmN0aW9uICh2YWwsIGluZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWwgPT09IF90aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBtSWR4ID0gaW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobUlkeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcyA9IGluZGV4ZXMuc2xpY2UoMCwgbUlkeCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmJsb2NrID09PSAwICYmIGluZGV4ZXMubGVuZ3RoID09PSAxICYmIHRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMF0gLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzID0gW2luZGV4ZXNbMF0gLSAxLCBpbmRleGVzWzBdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YXJnZXQsIG5ld0NoaWxkLCBlKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGUudmlydHVhbEluZm87XG4gICAgICAgICAgICB0aGlzLnByZXZJbmZvID0gdGhpcy5wcmV2SW5mbyB8fCBlLnZpcnR1YWxJbmZvO1xuICAgICAgICAgICAgdmFyIGNCbG9jayA9IChpbmZvLmNvbHVtbkluZGV4ZXNbMF0pIC0gMTtcbiAgICAgICAgICAgIHZhciBjT2Zmc2V0ID0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0Jsb2NrKTtcbiAgICAgICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgICAgIHZhciBibG9ja3MgPSBpbmZvLmJsb2NrSW5kZXhlcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoT2Zmc2V0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuZ2V0VHJhbnNsYXRlWSh0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wLCB0aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LCBpbmZvKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZShjT2Zmc2V0LCB0cmFuc2xhdGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5hZGp1c3RUYWJsZShjT2Zmc2V0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjSW5kZXggPSBpbmZvLmNvbHVtbkluZGV4ZXM7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLmdldENvbHVtbk9mZnNldChjSW5kZXhbY0luZGV4Lmxlbmd0aCAtIDFdKSAtIHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNJbmRleFswXSAtIDEpICsgJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5zZXRXcmFwcGVyV2lkdGgod2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnNldFdyYXBwZXJXaWR0aCh3aWR0aCwgdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgZWoyX2Jhc2VfMi5Ccm93c2VyLmlzSUUpO1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5kaXJlY3Rpb24gPT09ICd1cCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsayA9IHRoaXMub2Zmc2V0c1t0aGlzLmdldFRvdGFsQmxvY2tzKCldIC0gdGhpcy5wcmV2SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzVG9wID0gdGhpcy5jb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IHNUb3AgKyBibGs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuc2V0UGFnZUhlaWdodCh0aGlzLmdldE9mZnNldChibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdKSAtIHRoaXMuZ2V0T2Zmc2V0KGJsb2Nrc1swXSAtIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldkluZm8gPSBpbmZvO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uRGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChlLmNvdW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBlLmNvdW50O1xuICAgICAgICAgICAgICAgIHRoaXMubWF4UGFnZSA9IE1hdGguY2VpbChlLmNvdW50IC8gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNjcm9sbFBvc2l0aW9uKGUucmVxdWVzdFR5cGUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5zZXRWaXJ0dWFsSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoICsgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAtIDEpICsgJ3B4JyA6ICcxMDAlJztcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5zZXRWaXJ0dWFsSGVpZ2h0KHRoaXMub2Zmc2V0c1t0aGlzLmdldFRvdGFsQmxvY2tzKCldLCB3aWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLnNldFZpcnR1YWxIZWlnaHQoMSwgd2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRQYWdlRnJvbVRvcCA9IGZ1bmN0aW9uIChzVG9wLCBpbmZvKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSAwO1xuICAgICAgICAgICAgdmFyIGV4dHJhID0gdGhpcy5vZmZzZXRzW3RvdGFsXSAtIHRoaXMucHJldkhlaWdodDtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0S2V5cy5zb21lKGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IE51bWJlcihvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBzVG9wIDwgX3RoaXMub2Zmc2V0c1tvZmZzZXRdIHx8IChpT2Zmc2V0ID09PSB0b3RhbCAmJiBzVG9wID4gX3RoaXMub2Zmc2V0c1tvZmZzZXRdKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2sgPSBpT2Zmc2V0ICUgMiA9PT0gMCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICBwYWdlID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oX3RoaXMudmdlbmVyYXRvci5nZXRQYWdlKGlPZmZzZXQpLCBfdGhpcy5tYXhQYWdlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBib3JkZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYWdlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUcmFuc2xhdGVZID0gZnVuY3Rpb24gKHNUb3AsIGNIZWlnaHQsIGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmZvID0geyBwYWdlOiB0aGlzLmdldFBhZ2VGcm9tVG9wKHNUb3AsIHt9KSB9O1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvLnBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJsb2NrID0gKGluZm8uYmxvY2tJbmRleGVzWzBdIHx8IDEpIC0gMTtcbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSB0aGlzLmdldE9mZnNldChibG9jayk7XG4gICAgICAgICAgICB2YXIgZW5kVHJhbnNsYXRlID0gdGhpcy5nZXRPZmZzZXQoaW5mby5ibG9ja0luZGV4ZXNbaW5mby5ibG9ja0luZGV4ZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZSA+IHNUb3AgPyB0aGlzLmdldE9mZnNldChibG9jayAtIDEpIDogZW5kVHJhbnNsYXRlIDwgKHNUb3AgKyBjSGVpZ2h0KSA/IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrICsgMSkgOiB0cmFuc2xhdGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldE9mZnNldCA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMub2Zmc2V0c1tibG9ja10gfCAwLCB0aGlzLm9mZnNldHNbdGhpcy5tYXhCbG9ja10pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkVudGVyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbGVtZW50LCBjdXJyZW50LCBkaXJlY3Rpb24sIGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgeEF4aXMgPSBjdXJyZW50LmF4aXMgPT09ICdYJztcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gX3RoaXMucHJldkluZm8ub2Zmc2V0cyA/IF90aGlzLnByZXZJbmZvLm9mZnNldHMudG9wIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3RoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBfdGhpcy5nZXRDb2x1bW5PZmZzZXQoeEF4aXMgPyBfdGhpcy52Z2VuZXJhdG9yLmdldENvbHVtbkluZGV4ZXMoKVswXSAtIDEgOiBfdGhpcy5wcmV2SW5mby5jb2x1bW5JbmRleGVzWzBdIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBfdGhpcy5nZXRUcmFuc2xhdGVZKGUudG9wLCBoZWlnaHQsIHhBeGlzICYmIHRvcCA9PT0gZS50b3AgPyBfdGhpcy5wcmV2SW5mbyA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZSh4LCBNYXRoLm1pbih5LCBfdGhpcy5vZmZzZXRzW190aGlzLm1heEJsb2NrXSkpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoeCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFthY3Rpb25dKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLm9uRGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50W2FjdGlvbl0oY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrLCB0aGlzLnJlZnJlc2hDb250ZW50Um93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnBhcmVudFthY3Rpb25dKGV2ZW50ICsgXCItYmVnaW5cIiwgX3RoaXMub25BY3Rpb25CZWdpbiwgX3RoaXMpOyB9KTtcbiAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vYnNlcnZlci5vYnNlcnZlKGZ1bmN0aW9uIChzY3JvbGxBcmdzKSB7IHJldHVybiBfdGhpcy5zY3JvbGxMaXN0ZW5lcihzY3JvbGxBcmdzKTsgfSwgX3RoaXMub25FbnRlcmVkKCkpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb250ZW50UmVhZHksIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgZm4sIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRCbG9ja1NpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplID4+IDE7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEJsb2NrSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxvY2tTaXplKCkgKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmlzRW5kQmxvY2sgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbEJsb2NrcyA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA+PSB0b3RhbEJsb2NrcyB8fCBpbmRleCA9PT0gdG90YWxCbG9ja3MgLSAxO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUb3RhbEJsb2NrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5jb3VudCAvIHRoaXMuZ2V0QmxvY2tTaXplKCkpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRDb2x1bW5PZmZzZXQgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuY09mZnNldHNbYmxvY2tdIHwgMDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0TW9kZWxHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlc2V0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gYWN0aW9uOyB9KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gdGhpcy5jb250ZW50LnNjcm9sbFRvcCAhPT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRQcm9wZXJ0aWVzKHsgcGFnZVNldHRpbmdzOiB7IGN1cnJlbnRQYWdlOiAxIH0gfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmdldFJvd3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcztcbiAgICAgICAgICAgIHZhciBzdGFydElkeCA9IChwcmV2WzBdIC0gMSkgKiB0aGlzLmdldEJsb2NrU2l6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXggLSBzdGFydElkeF07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hPZmZzZXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3cgPSAwO1xuICAgICAgICAgICAgdmFyIGJTaXplID0gdGhpcy5nZXRCbG9ja1NpemUoKTtcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHRoaXMucHJldkhlaWdodCA9IHRoaXMub2Zmc2V0c1t0b3RhbF07XG4gICAgICAgICAgICB0aGlzLm1heEJsb2NrID0gdG90YWwgJSAyID09PSAwID8gdG90YWwgLSAyIDogdG90YWwgLSAxO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRzID0ge307XG4gICAgICAgICAgICBBcnJheS5hcHBseShudWxsLCBBcnJheSh0b3RhbCkpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiArK3JvdzsgfSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gKF90aGlzLnZnZW5lcmF0b3IuY2FjaGVbYmxvY2tdIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIHJlbSA9IF90aGlzLmNvdW50ICUgYlNpemU7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBibG9jayBpbiBfdGhpcy52Z2VuZXJhdG9yLmNhY2hlID9cbiAgICAgICAgICAgICAgICAgICAgdG1wICogdXRpbF8xLmdldFJvd0hlaWdodCgpIDogcmVtICYmIGJsb2NrID09PSB0b3RhbCA/IHJlbSAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKSA6IF90aGlzLmdldEJsb2NrSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0c1tibG9ja10gPSAoX3RoaXMub2Zmc2V0c1tibG9jayAtIDFdIHwgMCkgKyBzaXplO1xuICAgICAgICAgICAgICAgIF90aGlzLnRtcE9mZnNldHNbYmxvY2tdID0gX3RoaXMub2Zmc2V0c1tibG9jayAtIDFdIHwgMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRLZXlzID0gT2JqZWN0LmtleXModGhpcy5vZmZzZXRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMudmdlbmVyYXRvci5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVmlydHVhbEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnZnZW5lcmF0b3IucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbENvbnRlbnRSZW5kZXJlcjtcbiAgICB9KGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsQ29udGVudFJlbmRlcmVyID0gVmlydHVhbENvbnRlbnRSZW5kZXJlcjtcbiAgICB2YXIgVmlydHVhbEhlYWRlclJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFZpcnR1YWxIZWFkZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbEhlYWRlclJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZSA9IG5ldyBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgIF90aGlzLmdlbiA9IG5ldyB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5WaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2ssIGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnZpcnR1YWxJbmZvLnNlbnRpbmVsSW5mby5heGlzID09PSAnWCcgPyBfdGhpcy5yZWZyZXNoVUkoKSA6IG51bGw7IH0sIF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZW4ucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5nZW4uZ2V0Q29sdW1uSW5kZXhlcyh0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCkpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJXcmFwcGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyUGxhY2VIb2xkZXIoJ2Fic29sdXRlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLndyYXBwZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMuZ2VuLmdldENvbHVtbkluZGV4ZXModGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQpKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaFVJLmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsSGVhZGVyUmVuZGVyZXI7XG4gICAgfShoZWFkZXJfcmVuZGVyZXJfMS5IZWFkZXJSZW5kZXIpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxIZWFkZXJSZW5kZXJlciA9IFZpcnR1YWxIZWFkZXJSZW5kZXJlcjtcbiAgICB2YXIgVmlydHVhbEVsZW1lbnRIYW5kbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbEVsZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUucmVuZGVyV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXZpcnR1YWx0YWJsZScgfSk7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy50YWJsZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5yZW5kZXJQbGFjZUhvbGRlciA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSB2b2lkIDApIHsgcG9zaXRpb24gPSAncmVsYXRpdmUnOyB9XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdmlydHVhbHRyYWNrJywgc3R5bGVzOiBcInBvc2l0aW9uOlwiICsgcG9zaXRpb24gfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuYWRqdXN0VGFibGUgPSBmdW5jdGlvbiAoeFZhbHVlLCB5VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIHhWYWx1ZSArIFwicHgsIFwiICsgeVZhbHVlICsgXCJweClcIjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5zZXRXcmFwcGVyV2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIGZ1bGwpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS53aWR0aCA9IHdpZHRoID8gd2lkdGggKyBcInB4XCIgOiBmdWxsID8gJzEwMCUnIDogJyc7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuc2V0VmlydHVhbEhlaWdodCA9IGZ1bmN0aW9uIChoZWlnaHQsIHdpZHRoKSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxFbGVtZW50SGFuZGxlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbEVsZW1lbnRIYW5kbGVyID0gVmlydHVhbEVsZW1lbnRIYW5kbGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEludGVyU2VjdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW50ZXJTZWN0aW9uT2JzZXJ2ZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZnJvbVdoZWVsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICAgICAgICB0aGlzLnNlbnRpbmVsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAndXAnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IHJlY3QudG9wIC0gX3RoaXMuY29udGFpbmVyUmVjdC50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSB0b3AgPj0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3AgKyAoX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMikgPj0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXhpczogJ1knXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnZG93bic6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY0hlaWdodCA9IF90aGlzLm9wdGlvbnMuY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSByZWN0LmJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHJlY3QuYm90dG9tIDw9IF90aGlzLmNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvcCAtIChfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyKSA8PSBfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdyaWdodCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSByZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gcmlnaHQgPCBfdGhpcy5jb250YWluZXJSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0IC0gX3RoaXMuY29udGFpbmVyUmVjdC53aWR0aCA8PSBfdGhpcy5jb250YWluZXJSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdsZWZ0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gcmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gbGVmdCA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVmdCArIF90aGlzLmNvbnRhaW5lclJlY3Qud2lkdGggPj0gX3RoaXMuY29udGFpbmVyUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmVjdCA9IHRoaXMub3B0aW9ucy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5vcHRpb25zLmNvbnRhaW5lciwgJ3doZWVsJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZnJvbVdoZWVsID0gdHJ1ZTsgfSwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5vcHRpb25zLmNvbnRhaW5lciwgJ3Njcm9sbCcsIHRoaXMudmlydHVhbFNjcm9sbEhhbmRsZXIoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjayksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuc2VudGluZWxJbmZvW2RpcmVjdGlvbl07XG4gICAgICAgICAgICByZXR1cm4gaW5mby5jaGVjayh0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGluZm8pO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUudmlydHVhbFNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcmV2VG9wID0gMDtcbiAgICAgICAgICAgIHZhciBwcmV2TGVmdCA9IDA7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VkMTAwID0gZWoyX2Jhc2VfMi5kZWJvdW5jZShjYWxsYmFjaywgMTAwKTtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZWQ1MCA9IGVqMl9iYXNlXzIuZGVib3VuY2UoY2FsbGJhY2ssIDUwKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBlLnRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBlLnRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBwcmV2VG9wIDwgdG9wID8gJ2Rvd24nIDogJ3VwJztcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBwcmV2TGVmdCA9PT0gbGVmdCA/IGRpcmVjdGlvbiA6IHByZXZMZWZ0IDwgbGVmdCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgICAgICAgICAgcHJldlRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBwcmV2TGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBfdGhpcy5zZW50aW5lbEluZm9bZGlyZWN0aW9uXTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5heGVzLmluZGV4T2YoY3VycmVudC5heGlzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hlY2sgPSBfdGhpcy5jaGVjayhkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmVudGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbnRlckNhbGxiYWNrKF90aGlzLmVsZW1lbnQsIGN1cnJlbnQsIGRpcmVjdGlvbiwgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IF90aGlzLmZyb21XaGVlbCA/IF90aGlzLm9wdGlvbnMuZGVib3VuY2VFdmVudCA/IGRlYm91bmNlZDEwMCA6IGNhbGxiYWNrIDogZGVib3VuY2VkMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5heGlzID09PSAnWCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuID0gZGVib3VuY2VkNTA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm4oeyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgc2VudGluZWw6IGN1cnJlbnQsIG9mZnNldDogeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5mcm9tV2hlZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5zZXRQYWdlSGVpZ2h0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucGFnZUhlaWdodCA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZXJTZWN0aW9uT2JzZXJ2ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkludGVyU2VjdGlvbk9ic2VydmVyID0gSW50ZXJTZWN0aW9uT2JzZXJ2ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNPZmZzZXRzID0ge307XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnJvd01vZGVsR2VuZXJhdG9yID0gdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyA/IG5ldyBncm91cF9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cE1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KSA6IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIG5vdGlmeUFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IG5vdGlmeUFyZ3MudmlydHVhbEluZm8gPSBub3RpZnlBcmdzLnZpcnR1YWxJbmZvIHx8IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIHhBeGlzID0gaW5mby5zZW50aW5lbEluZm8gJiYgaW5mby5zZW50aW5lbEluZm8uYXhpcyA9PT0gJ1gnO1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSAheEF4aXMgJiYgaW5mby5sb2FkTmV4dCAmJiAhaW5mby5sb2FkU2VsZiA/IGluZm8ubmV4dEluZm8ucGFnZSA6IGluZm8ucGFnZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSB+fih0aGlzLm1vZGVsLnBhZ2VTaXplIC8gMik7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMuZ2V0QmxvY2tJbmRleGVzKHBhZ2UpO1xuICAgICAgICAgICAgdmFyIGxvYWRlZEJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jaGVja0FuZFJlc2V0Q2FjaGUobm90aWZ5QXJncy5yZXF1ZXN0VHlwZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW3ZhbHVlXSA9IF90aGlzLnJvd01vZGVsR2VuZXJhdG9yLnJlZnJlc2hSb3dzKF90aGlzLmNhY2hlW3ZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IF90aGlzLnJvd01vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW5mbzogaW5mbywgc3RhcnRJbmRleDogX3RoaXMuZ2V0U3RhcnRJbmRleCh2YWx1ZSwgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYW4gPSB+fk1hdGgubWF4KHJvd3MubGVuZ3RoLCBfdGhpcy5tb2RlbC5wYWdlU2l6ZSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW2luZGV4ZXNbMF1dID0gcm93cy5zbGljZSgwLCBtZWRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbaW5kZXhlc1sxXV0gPSByb3dzLnNsaWNlKG1lZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmICF4QXhpcyAmJiBfdGhpcy5jYWNoZVt2YWx1ZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbdmFsdWVdID0gX3RoaXMudXBkYXRlR3JvdXBSb3coX3RoaXMuY2FjaGVbdmFsdWVdLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCwgX3RoaXMuY2FjaGVbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkQmxvY2tzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMgPSBsb2FkZWRCbG9ja3M7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEJsb2NrSW5kZXhlcyA9IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BhZ2UgKyAocGFnZSAtIDEpLCBwYWdlICogMl07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0UGFnZSA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIGJsb2NrICUgMiA9PT0gMCA/IGJsb2NrIC8gMiA6IChibG9jayArIDEpIC8gMjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pc0Jsb2NrQXZhaWxhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgaW4gdGhpcy5jYWNoZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLm1vZGVsLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIGJsb2NrSW5kZXhlczogdGhpcy5nZXRCbG9ja0luZGV4ZXModGhpcy5tb2RlbC5jdXJyZW50UGFnZSksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnZG93bicsXG4gICAgICAgICAgICAgICAgY29sdW1uSW5kZXhlczogdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFN0YXJ0SW5kZXggPSBmdW5jdGlvbiAoYmxrLCBkYXRhLCBmdWxsKSB7XG4gICAgICAgICAgICBpZiAoZnVsbCA9PT0gdm9pZCAwKSB7IGZ1bGwgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgcGFnZSA9IHRoaXMuZ2V0UGFnZShibGspO1xuICAgICAgICAgICAgdmFyIGV2ZW4gPSBibGsgJSAyID09PSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gKHBhZ2UgLSAxKSAqIHRoaXMubW9kZWwucGFnZVNpemU7XG4gICAgICAgICAgICByZXR1cm4gZnVsbCB8fCAhZXZlbiA/IGluZGV4IDogaW5kZXggKyB+fih0aGlzLm1vZGVsLnBhZ2VTaXplIC8gMik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhlcyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQgPT09IHZvaWQgMCkgeyBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7IH1cbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICB2YXIgc0xlZnQgPSBjb250ZW50LnNjcm9sbExlZnQgfCAwO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmNPZmZzZXRzKTtcbiAgICAgICAgICAgIHZhciBjV2lkdGggPSBjb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgc0xlZnQgPSBNYXRoLm1pbih0aGlzLmNPZmZzZXRzW2tleXMubGVuZ3RoIC0gMV0gLSBjV2lkdGgsIHNMZWZ0KTtcbiAgICAgICAgICAgIHZhciBjYWxXaWR0aCA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSA/IDIgKiBjV2lkdGggOiBjV2lkdGggLyAyO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBzTGVmdCArIGNXaWR0aCArIChzTGVmdCA9PT0gMCA/IGNhbFdpZHRoIDogMCk7XG4gICAgICAgICAgICBrZXlzLnNvbWUoZnVuY3Rpb24gKG9mZnNldCwgaW5keCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IE51bWJlcihvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRWYWwgPSBfdGhpcy5jT2Zmc2V0c1tvZmZzZXRdO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBzTGVmdCAtIGNhbFdpZHRoIDw9IG9mZnNldFZhbCAmJiBsZWZ0ICsgY2FsV2lkdGggPj0gb2Zmc2V0VmFsO1xuICAgICAgICAgICAgICAgIGlmIChib3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGlPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdCArIGNhbFdpZHRoIDwgb2Zmc2V0VmFsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jaGVja0FuZFJlc2V0Q2FjaGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXIgPSBbJ3BhZ2luZycsICdyZWZyZXNoJywgJ3NvcnRpbmcnLCAnZmlsdGVyaW5nJywgJ3NlYXJjaGluZycsICdncm91cGluZycsICd1bmdyb3VwaW5nJ11cbiAgICAgICAgICAgICAgICAuc29tZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGFjdGlvbiA9PT0gdmFsdWU7IH0pO1xuICAgICAgICAgICAgaWYgKGNsZWFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xlYXI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaENvbE9mZnNldHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbCA9IDA7XG4gICAgICAgICAgICB0aGlzLmNPZmZzZXRzID0ge307XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgY0xlbiA9IGNvbHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGlzVmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi52aXNpYmxlICYmXG4gICAgICAgICAgICAgICAgKCFfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbiA/IF90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW4uZmllbGQpIDwgMCA6IGNvbHVtbi52aXNpYmxlKTsgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjLCBuKSB7IHJldHVybiBfdGhpcy5jT2Zmc2V0c1tuXSA9IChfdGhpcy5jT2Zmc2V0c1tuIC0gMV0gfCAwKSArIDMwOyB9KTtcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGNMZW4pKS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29sKys7IH0pLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrLCBpKSB7XG4gICAgICAgICAgICAgICAgYmxvY2sgPSBibG9jayArIGdMZW47XG4gICAgICAgICAgICAgICAgX3RoaXMuY09mZnNldHNbYmxvY2tdID0gKF90aGlzLmNPZmZzZXRzW2Jsb2NrIC0gMV0gfCAwKSArIChpc1Zpc2libGUoY29sc1tpXSkgPyBwYXJzZUludChjb2xzW2ldLndpZHRoLCAxMCkgOiAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnVwZGF0ZUdyb3VwUm93ID0gZnVuY3Rpb24gKGN1cnJlbnQsIGJsb2NrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaXJzdCA9IGN1cnJlbnRbMF07XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihrZXkpIDwgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuY29uY2F0KF90aGlzLmNhY2hlW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaXJzdC5pc0RhdGFSb3cgfHwgYmxvY2sgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlR3JvdXAoY3VycmVudCwgcm93cyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXRlcmF0ZUdyb3VwID0gZnVuY3Rpb24gKGN1cnJlbnQsIHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Rmlyc3QgPSBjdXJyZW50WzBdO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpcnN0LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUHJlc2VudCA9IGN1cnJlbnQuc29tZShmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd3Muc29tZShmdW5jdGlvbiAob1JvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9Sb3cgJiYgb1Jvdy5kYXRhLmZpZWxkICE9PSB1bmRlZmluZWQgJiYgb1Jvdy5kYXRhLmZpZWxkID09PSByb3cuZGF0YS5maWVsZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgb1Jvdy5kYXRhLmtleSA9PT0gcm93LmRhdGEua2V5O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzLnNsaWNlKG9mZnNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL2lubGluZS1lZGl0XCIsIFwiLi9iYXRjaC1lZGl0XCIsIFwiLi9kaWFsb2ctZWRpdFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGV2ZW50cywgZWRpdF9yZW5kZXJlcl8xLCBib29sZWFuX2VkaXRfY2VsbF8xLCBkcm9wZG93bl9lZGl0X2NlbGxfMSwgbnVtZXJpY19lZGl0X2NlbGxfMSwgZGVmYXVsdF9lZGl0X2NlbGxfMSwgaW5saW5lX2VkaXRfMSwgYmF0Y2hfZWRpdF8xLCBkaWFsb2dfZWRpdF8xLCBlajJfcG9wdXBzXzEsIHV0aWxfMSwgZWoyX3BvcHVwc18yLCBlajJfaW5wdXRzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVkaXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFZGl0KHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdENlbGxUeXBlID0ge1xuICAgICAgICAgICAgICAgICdkcm9wZG93bmVkaXQnOiBkcm9wZG93bl9lZGl0X2NlbGxfMS5Ecm9wRG93bkVkaXRDZWxsLFxuICAgICAgICAgICAgICAgICdudW1lcmljZWRpdCc6IG51bWVyaWNfZWRpdF9jZWxsXzEuTnVtZXJpY0VkaXRDZWxsLCAnYm9vbGVhbmVkaXQnOiBib29sZWFuX2VkaXRfY2VsbF8xLkJvb2xlYW5FZGl0Q2VsbCwgJ2RlZmF1bHQnOiBkZWZhdWx0X2VkaXRfY2VsbF8xLkRlZmF1bHRFZGl0Q2VsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7ICdpbmxpbmUnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdub3JtYWwnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdiYXRjaCc6IGJhdGNoX2VkaXRfMS5CYXRjaEVkaXQsICdkaWFsb2cnOiBkaWFsb2dfZWRpdF8xLkRpYWxvZ0VkaXQgfTtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0T2JqKCk7XG4gICAgICAgIH1cbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ29sVHlwZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY29sLmVkaXQgPSBlajJfYmFzZV8yLmV4dGVuZChuZXcgdGhpcy5lZGl0Q2VsbFR5cGVbY29sLmVkaXRUeXBlICYmIHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZV0gP1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdFR5cGUgOiAnZGVmYXVsdCddKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKSwgY29sLmVkaXQgfHwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdlZGl0JztcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgbmV3UHJvcCA9IGUucHJvcGVydGllcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0FkZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RGVsZXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0VkaXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IGdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCBnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRPYmooKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlRWRpdE9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBlZGl0X3JlbmRlcmVyXzEuRWRpdFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUgPSBuZXcgdGhpcy5lZGl0VHlwZVt0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZV0odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucmVuZGVyZXIpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xUeXBlT2JqKCk7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBbGVydERsZygpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb25maXJtRGxnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAndG91Y2hzdGFydCcsIHRoaXMudGFwRXZlbnQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAndG91Y2hzdGFydCcsIHRoaXMudGFwRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS50YXBFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRVc2VyQWdlbnQoKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50YXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIoKSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZG91YmxlVGFwLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0VXNlckFnZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gL2lwaG9uZXxpcG9kfGlwYWQvLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudGltZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IGdPYmouaXNFZGl0IHx8IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdPYmouZ2V0U2VsZWN0ZWRSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0VkaXRPcGVyYXRpb25BbGVydCcsIHRoaXMuYWxlcnRET2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0cikge1xuICAgICAgICAgICAgICAgIHRyID0gZ09iai5nZXRTZWxlY3RlZFJvd3MoKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ci5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc3RhcnRFZGl0KHRyKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLnNob3dDb25maXJtRGlhbG9nXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11cGRhdGVkdGQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NhbmNlbEVkaXQnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5yZWZyZXNoVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmFkZFJlY29yZChkYXRhKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgfHwgZ09iai5zZWxlY3RlZFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0RlbGV0ZU9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NvbmZpcm1EZWxldGUnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQobnVsbCwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKV0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlQ29uZmlybScsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlQ2VsbChyb3dJbmRleCwgZmllbGQsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlUm93KGluZGV4LCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdENlbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZWRpdENlbGwoaW5kZXgsIGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdEZvcm1WYWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRNb2R1bGUuZ2V0QmF0Y2hDaGFuZ2VzID8gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcygpIDoge307XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0Q2VsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5nZXRDdXJyZW50RWRpdGVkRGF0YSh0aGlzLmZvcm1PYmouZWxlbWVudCwge30pO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtPYmplY3Qua2V5cyhvYmopWzBdXTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc2F2ZUNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc2F2ZUNlbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAoY29udGVudCwgb2JqKSB7XG4gICAgICAgICAgICBvYmouY29udGVudCA9ICc8ZGl2PicgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoY29udGVudCkgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIG9iai5zaG93KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFZhbHVlRnJvbVR5cGUgPSBmdW5jdGlvbiAoY29sLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChjb2wudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHBhcnNlRmxvYXQodmFsdWUpKSA/IHBhcnNlRmxvYXQodmFsdWUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1RydWUnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSAhPT0gJ2RhdGVwaWNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95VG9vbFRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5lLXRvb2x0aXAnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgZWxlbS5lajJfaW5zdGFuY2VzWzBdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY3JlYXRlQ29uZmlybURsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnT2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRsZ0NhbmNlbC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjc3NDbGFzczogJ2UtZmxhdCcsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0Q29uZmlybScpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVBbGVydERsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYWxlcnRDbGljay5iaW5kKHRoaXMpLCBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1mbGF0JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCAnRWRpdEFsZXJ0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFsZXJ0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iai5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ1dpZGdldCA9IGZ1bmN0aW9uIChidG5PcHRpb25zLCBuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgbmFtZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzTW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICczMjBweCcsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGJ0bk9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgb2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2cob3B0aW9ucyk7XG4gICAgICAgICAgICBvYmouYXBwZW5kVG8oZGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKG9iai5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ0NhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnT2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmRpYWxvZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZy1jb250ZW50JykuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NvbmZpcm1EZWxldGUnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsRWRpdCcpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVDb25maXJtJyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdGluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQmF0Y2hTYXZlTG9zdENoYW5nZXMnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdDYW5jZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmosIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB0aGlzLmRlc3Ryb3lUb29sVGlwLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5vbkFjdGlvbkJlZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuYXV0b0NvbCwgdGhpcy51cGRhdGVDb2xUeXBlT2JqKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveUZvcm0sIHRoaXMuZGVzdHJveUZvcm0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMub25BY3Rpb25CZWdpbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMudW53aXJlRXZlbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgIT09ICdhZGQnICYmIGUucmVxdWVzdFR5cGUgIT09ICdiZWdpbkVkaXQnICYmIGUucmVxdWVzdFR5cGUgIT09ICdkZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0ZWREYXRhID0gZnVuY3Rpb24gKGZvcm0sIGVkaXRlZERhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gW10uc2xpY2UuY2FsbChmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWZpZWxkJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGlucHV0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5VWlkKGlucHV0c1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGNvbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LnJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8yLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0VmFsdWVGcm9tVHlwZShjb2wsIGNvbC5lZGl0LnJlYWQoaW5wdXRzW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUoY29sLmZpZWxkLCB2YWx1ZSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVkaXRlZERhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkICYmICFlLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lXaWRnZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lXaWRnZXRzID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdC5kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5lZGl0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95VG9vbFRpcCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2xUaXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdpbnNlcnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1wb3B1cC1vcGVuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucHJldmVudEJhdGNoID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE9iaiA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0JhdGNoU2F2ZUxvc3RDaGFuZ2VzJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5leGVjdXRlQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50T2JqLmhhbmRsZXIuY2FsbCh0aGlzLnByZXZlbnRPYmouaW5zdGFuY2UsIHRoaXMucHJldmVudE9iai5hcmcxLCB0aGlzLnByZXZlbnRPYmouYXJnMiwgdGhpcy5wcmV2ZW50T2JqLmFyZzMsIHRoaXMucHJldmVudE9iai5hcmc0LCB0aGlzLnByZXZlbnRPYmouYXJnNSwgdGhpcy5wcmV2ZW50T2JqLmFyZzYsIHRoaXMucHJldmVudE9iai5hcmc3KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYXBwbHlGb3JtVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSB7fTtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18yID0gY29sczsgX2kgPCBjb2xzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMltfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52YWxpZGF0aW9uUnVsZXMgJiYgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcjJyArIGdPYmouZWxlbWVudC5pZCArIGNvbC5maWVsZCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzW2NvbC5maWVsZF0gPSBjb2wudmFsaWRhdGlvblJ1bGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiA9IG5ldyBlajJfaW5wdXRzXzEuRm9ybVZhbGlkYXRvcihmb3JtLCB7XG4gICAgICAgICAgICAgICAgcnVsZXM6IHJ1bGVzLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25Db21wbGV0ZTogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGlvbkNvbXBsZXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY3VzdG9tUGxhY2VtZW50OiBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxFcnJvclBsYWNlbWVudChpbnB1dEVsZW1lbnQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsRXJyb3JQbGFjZW1lbnQgPSBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoaW5wdXRFbGVtZW50LCAnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0ZC5lajJfaW5zdGFuY2VzIHx8ICF0ZC5lajJfaW5zdGFuY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9IG5ldyBlajJfcG9wdXBzXzIuVG9vbHRpcCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuc09uOiAnY3VzdG9tJywgY29udGVudDogZXJyb3IsIHBvc2l0aW9uOiAnYm90dG9tIGNlbnRlcicsIGNzc0NsYXNzOiAnZS1ncmlkZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiB7IG9wZW46IHsgZWZmZWN0OiAnTm9uZScgfSwgY2xvc2U6IHsgZWZmZWN0OiAnTm9uZScgfSB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmFwcGVuZFRvKHRkKTtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5vcGVuKHRkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRkLmVqMl9pbnN0YW5jZXNbMF0uY29udGVudCA9IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuaW5wdXROYW1lKSwgJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtICYmIGVsZW0uZWoyX2luc3RhbmNlcyAmJiBlbGVtLmVqMl9pbnN0YW5jZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0T2JqID0gZWxlbS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5zdGF0dXMgPT09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdE9iai5vcGVuKHV0aWxfMS5wYXJlbnRzVW50aWwoYXJncy5lbGVtZW50LCAnZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdE9iai5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRPYmoucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkVkaXQgPSBFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0VkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtZXJpY0VkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9pbnB1dHNfMS5OdW1lcmljVGV4dEJveChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoYXJncy5yb3dEYXRhW2NvbC5maWVsZF0pLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICdOZXZlcicgOiAnQWx3YXlzJyxcbiAgICAgICAgICAgIH0sIGNvbC5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBjb2wuZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmogJiYgIXRoaXMub2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0VkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljRWRpdENlbGwgPSBOdW1lcmljRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83Ml9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vaW5saW5lLWVkaXQtcmVuZGVyZXJcIiwgXCIuL2JhdGNoLWVkaXQtcmVuZGVyZXJcIiwgXCIuL2RpYWxvZy1lZGl0LXJlbmRlcmVyXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBiYXRjaF9lZGl0X3JlbmRlcmVyXzEsIGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFZGl0UmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2lubGluZSc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlcixcbiAgICAgICAgICAgICAgICAnbm9ybWFsJzogaW5saW5lX2VkaXRfcmVuZGVyZXJfMS5JbmxpbmVFZGl0UmVuZGVyLCAnYmF0Y2gnOiBiYXRjaF9lZGl0X3JlbmRlcmVyXzEuQmF0Y2hFZGl0UmVuZGVyLCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfcmVuZGVyZXJfMS5EaWFsb2dFZGl0UmVuZGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHBhcmVudCwgc2VydmljZUxvY2F0b3IpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmNvbnZlcnRXaWRnZXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpc0ZvY3VzZWQ7XG4gICAgICAgICAgICB2YXIgY2VsbDtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgPyBnT2JqLmNvbHVtbnMgOiBbZ09iai5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuY29sdW1uTmFtZSldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzEgPSBjb2xzOyBfaSA8IGNvbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIGNvbC51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQud3JpdGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2wuZWRpdC53cml0ZSh7IHJvd0RhdGE6IGFyZ3Mucm93RGF0YSwgZWxlbWVudDogY2VsbCwgY29sdW1uOiBjb2wsIHJlcXVlc3RUeXBlOiBhcmdzLnJlcXVlc3RUeXBlIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNGb2N1c2VkICYmICFjZWxsLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbWVudChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICBlbGVtLmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGVmYXVsdGNlbGwnKSkge1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0U2VsZWN0aW9uUmFuZ2UoZWxlbS52YWx1ZS5sZW5ndGgsIGVsZW0udmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnRzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyA/IGdPYmouY29sdW1ucyA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMiA9IGNvbHM7IF9pIDwgY29sc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIHZhciB0QXJncyA9IHsgY29sdW1uOiBjb2wsIHZhbHVlOiB2YWx1ZSwgdHlwZTogYXJncy5yZXF1ZXN0VHlwZSB9O1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQuY3JlYXRlO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IGNvbC5lZGl0LmNyZWF0ZSh0QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpbnB1dC50YWdOYW1lICE9PSAnaW5wdXQnICYmIGlucHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpc0lucHV0ID8gaW5wdXQucXVlcnlTZWxlY3RvcignaW5wdXQnKSA6IGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbC5maWVsZCwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBnT2JqLmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoaW5wdXQsIFsnZS1pbnB1dCcsICdlLWZpZWxkJ10sIFtdKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnRleHRBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLXJhbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGNvbC5pc1ByaW1hcnlLZXkgfHwgY29sLmlzSWRlbnRpdHkpICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICdiZWdpbkVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2wudWlkXSA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRWRpdFJlbmRlciA9IEVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1yb3cgZS1hZGRlZHJvdycgfSk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUoYXJncy5yb3csIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgYXJncy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLnJvdy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGFyZ3Mucm93LmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIHRydWUpKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBpc0VkaXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICB2YXIgaXNEZXRhaWwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmNoaWxkR3JpZCkgPyAxIDogMDtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRkID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWVkaXRjZWxsIGUtbm9ybWFsZWRpdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgY29sc3BhbjogKGdPYmouZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggKyBnTGVuICsgaXNEZXRhaWwpLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZSBlLWlubGluZS1lZGl0JywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICcwLjI1JyB9IH0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBpZiAoaXNEZXRhaWwpIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3djb2xsYXBzZScgfSksIHRyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBnTGVuKSB7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ZF8xID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyAoY29sLnRleHRBbGlnbiA/IGNvbC50ZXh0QWxpZ24gOiAnJykgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRkXzEuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sLnVpZF0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGRfMS5jbGFzc0xpc3QuYWRkKCdlLWJvb2xjZWxsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXRSZW5kZXIgPSBJbmxpbmVFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2lubGluZS1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEJhdGNoRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmNlbGwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhcmdzLmNlbGwuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgYXJncykpO1xuICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkYmF0Y2hjZWxsJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10sIFtdKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGVsZW1lbnRzW2FyZ3MuY29sdW1uT2JqZWN0LnVpZF0pO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uT2JqZWN0LmVkaXRUeXBlID09PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtYm9vbGNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYXJncy5jb2x1bW5PYmplY3QuZWRpdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1pbnB1dGJveCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdFJlbmRlciA9IEJhdGNoRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX3BvcHVwc18xLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGlhbG9nRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGlhbG9nRGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLnNldExvY2FsZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZyhlbGVtZW50cywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZURpYWxvZyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVPYmooKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2coe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdGhpcy5pc0VkaXQgPyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VkaXRGb3JtVGl0bGUnKSArIGFyZ3MucHJpbWFyeUtleVZhbHVlWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sMTBuLmdldENvbnN0YW50KCdBZGRGb3JtVGl0bGUnKSwgaXNNb2RhbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzKSwgc2hvd0Nsb3NlSWNvbjogdHJ1ZSwgYWxsb3dEcmFnZ2luZzogdHJ1ZSwgY2xvc2U6IHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IHRydWUsIHdpZHRoOiAnMzMwcHgnLCB0YXJnZXQ6IGdPYmouZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2F2ZUJ1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSwgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpIH0gfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouYXBwZW5kVG8odGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUodGhpcy5kaWFsb2dPYmouZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmJ0bkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpLnRvTG93ZXJDYXNlKCkgPT09IGUudGFyZ2V0LmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbmRFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kZXN0cm95Rm9ybSwge30pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogdGhpcy5pc0VkaXQgPyAnZS1lZGl0ZWRyb3cnIDogJ2UtaW5zZXJ0ZWRyb3cnIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzZweCcgfSB9KTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xzW2ldLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNlbGwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyBzdHlsZTogJ3RleHQtYWxpZ246bGVmdDt3aWR0aDoxOTBweCcgfSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBpbm5lckhUTUw6IGNvbHNbaV0uZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbY29sc1tpXS51aWRdLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYmwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLW5vc2VsZWN0JywgYXR0cnM6IHsgZm9yOiBlbGVtLmlkLCBzdHlsZTogZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gJycgOiAndmVydGljYWwtYWxpZ246IHRvcDsnIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIGxibC5pbm5lckhUTUwgPSBjb2xzW2ldLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICBkYXRhQ2VsbC5hcHBlbmRDaGlsZChsYmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGwuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sc1tpXS51aWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZGF0YUNlbGwpO1xuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXRSZW5kZXIgPSBEaWFsb2dFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9vbGVhbkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQm9vbGVhbkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtYm9vbGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogYXJncy52YWx1ZSwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRWRpdENlbGwgPSBCb29sZWFuRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRHJvcERvd25FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERyb3BEb3duRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCB0eXBlOiAndGV4dCcsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3QoZWoyX2Jhc2VfMS5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmRhdGFTb3VyY2UpLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLnNlbGVjdChhcmdzLmNvbHVtbi5maWVsZCksIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB2YWx1ZTogYXJncy5jb2x1bW4uZmllbGQgfSwgdmFsdWU6IGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0sXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGFjdGlvbkNvbXBsZXRlOiB0aGlzLmRkQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlzSW5saW5lID8gJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LCBwb3B1cEhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogaXNJbmxpbmUgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICB9LCBhcmdzLmNvbHVtbi5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBhcmdzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWoyX2luc3RhbmNlc1swXS52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGRBY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnJlc3VsdCA9IGUucmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodmFsLCBpLCB2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5pbmRleE9mKHZhbCkgPT09IGk7IH0pO1xuICAgICAgICAgICAgZS5yZXN1bHQuc29ydCgpO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRHJvcERvd25FZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRHJvcERvd25FZGl0Q2VsbCA9IERyb3BEb3duRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGVmYXVsdEVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGVmYXVsdEVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtaW5wdXQgZS1kZWZhdWx0Y2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgdmFsdWU6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpID8gYXJncy52YWx1ZSA6ICcnLCAnZS1tYXBwaW5ndWlkJzogY29sLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsIG5hbWU6IGNvbC5maWVsZCwgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyBjb2wudGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgZWoyX2lucHV0c18xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhcmdzLmVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlOiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCwgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGVmYXVsdEVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EZWZhdWx0RWRpdENlbGwgPSBEZWZhdWx0RWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIElubGluZUVkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSW5saW5lRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXQgPSBJbmxpbmVFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvaW5saW5lLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOb3JtYWxFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTm9ybWFsRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucm93SW5kZXggPSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2Utcm93Y2VsbCcpID8gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSA6IC0xO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLmFsbG93RWRpdE9uRGJsQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLnN0YXJ0RWRpdCh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRDb21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdyh0aGlzLmVkaXRSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHByaW1hcnlLZXlzID0gZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpO1xuICAgICAgICAgICAgdmFyIHByaW1hcnlLZXlWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93SW5kZXggPSB0aGlzLmVkaXRSb3dJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5yb3dJbmRleF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByaW1hcnlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleVZhbHVlcy5wdXNoKHRoaXMucHJldmlvdXNEYXRhW3ByaW1hcnlLZXlzW2ldXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByb3c6IHRyLCBwcmltYXJ5S2V5OiBwcmltYXJ5S2V5cywgcHJpbWFyeUtleVZhbHVlOiBwcmltYXJ5S2V5VmFsdWVzLCByZXF1ZXN0VHlwZTogJ2JlZ2luRWRpdCcsXG4gICAgICAgICAgICAgICAgcm93RGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4LCB0eXBlOiAnZWRpdCcsIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZ2luRWRpdCwgYXJncyk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQmVnaW4nO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZShhcmdzKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdHIuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9ICdhY3Rpb25Db21wbGV0ZSc7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCB8fCAhZ09iai5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMucHJldmlvdXNEYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZWRpdGVkRGF0YSwgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCBzZWxlY3RlZFJvdzogZ09iai5zZWxlY3RlZFJvd0luZGV4LCBmb3JlaWduS2V5RGF0YToge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdGVkcm93JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXJncy5hY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy51cGRhdGVEYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2FkZCc7XG4gICAgICAgICAgICAgICAgYXJncy5zZWxlY3RlZFJvdyA9IDA7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUucmVmcmVzaFJvdyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMudWlkKTtcbiAgICAgICAgICAgIGlmIChyb3dPYmopIHtcbiAgICAgICAgICAgICAgICByb3dPYmouY2hhbmdlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgcm93LnJlZnJlc2gocm93T2JqLCB0aGlzLnBhcmVudC5jb2x1bW5zLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnY2FuY2VsJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5zdG9wRWRpdFN0YXR1cygpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLnJvd0luZGV4KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYWRkJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGFbY29sLmZpZWxkXSA9IGRhdGEgJiYgZGF0YVtjb2wuZmllbGRdID8gZGF0YVtjb2wuZmllbGRdIDogY29sLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsIGZvcmVpZ25LZXlEYXRhOiB7fSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2FkZCcsIGRhdGE6IHRoaXMucHJldmlvdXNEYXRhLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkTmV3KHsgcm93RGF0YTogYXJncy5kYXRhLCByZXF1ZXN0VHlwZTogJ2FkZCcgfSk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuYXBwbHlGb3JtVmFsaWRhdGlvbigpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgYXJncy5yb3cgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRSb3dJbmRleCA9IHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXg7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZGVsZXRlJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSA/IFtkYXRhXSA6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUmVjb3JkcygpLCB0cjogdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dzKCksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5zdG9wRWRpdFN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY3J1ZEFjdGlvbiwgdGhpcy5lZGl0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVsZXRlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE5vcm1hbEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk5vcm1hbEVkaXQgPSBOb3JtYWxFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9yb3ctcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgY2VsbF9yZW5kZXJlcl8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRhdGFCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfYWRkJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJiAhdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkeChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIGlmICgodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKSkgJiYgdHIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCksIHRoaXMucGFyZW50LmNvbHVtbnNbcGFyc2VJbnQodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApXS5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLnBhcmVudC5pc0VkaXQ7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgaXNFZGl0ID0gaXNFZGl0ICYmICF0aGlzLnZhbGlkYXRlRm9ybU9iaigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXROZXh0Q2VsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRQcmV2Q2VsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQgJiYgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCArIDEsIHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0IHx8ICEodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPT09IDAgJiYgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgISh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID09PSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPT09IHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVGb2N1c09uRXJyb3IoZSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVGb2N1c09uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVGb3JtT2JqKCkgJiYgKGUuYWN0aW9uID09PSAndGFiJyB8fCBlLmFjdGlvbiA9PT0gJ3NoaWZ0VGFiJykpIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5pc0FkZFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXROZXh0Q2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvbGRJZHggPSB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleDtcbiAgICAgICAgICAgIHZhciBjZWxsSWR4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCh0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCArIDEsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgaWYgKGNlbGxJZHggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gY2VsbElkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSB0aGlzLmZpbmROZXh0RWRpdGFibGVDZWxsKDAsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZElkeCAhPT0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0UHJldkNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2xkSWR4ID0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRoaXMuZmluZFByZXZFZGl0YWJsZUNlbGwodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggLSAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsSWR4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4IC0gMSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleC0tO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGhpcy5maW5kUHJldkVkaXRhYmxlQ2VsbCh0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCAtIDEsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZElkeCAhPT0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbEZyb21JbmRleCA9IGZ1bmN0aW9uIChyb3dJZHgsIGNlbGxJZHgpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPSByb3dJZHg7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHJvd0lkeCwgdGhpcy5wYXJlbnQuY29sdW1uc1tjZWxsSWR4XS5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciByb3dzID0gZ09iai5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3dzW2ldLnVpZCArICddJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRChyb3dzW2ldLnVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvd3NbaV0uY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0ciwgW10sIFsnZS1oaWRkZW5yb3cnLCAnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIucmVmcmVzaChyb3dzW2ldLCBnT2JqLmNvbHVtbnMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB0aGlzLmJ1bGtEZWxldGUoZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5idWxrQWRkUm93KGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCAmJiB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYXRjaFNhdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS52YWxpZGF0ZUZvcm1PYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqICYmICF0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLmdldEJhdGNoQ2hhbmdlcygpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGJhdGNoQ2hhbmdlczogY2hhbmdlcywgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmJ1bGtTYXZlLCB7IGNoYW5nZXM6IGNoYW5nZXMgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0QmF0Y2hDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB7XG4gICAgICAgICAgICAgICAgYWRkZWRSZWNvcmRzOiBbXSxcbiAgICAgICAgICAgICAgICBkZWxldGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFJlY29yZHM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocm93LmVkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5hZGRlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuZGVsZXRlZFJlY29yZHMucHVzaChyb3cuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuY2hhbmdlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlcztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZW1vdmVSb3dPYmplY3RGcm9tVUlEID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSb3dPYmplY3QgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKS51bnNoaWZ0KHJvdyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0RlbGV0ZSA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBkYXRhID8gdGhpcy5nZXRJbmRleEZyb21EYXRhKGRhdGEpIDogZ09iai5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleTogdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgcm93RGF0YTogZGF0YSA/IGRhdGEgOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpWzBdLFxuICAgICAgICAgICAgICAgIHJvdzogZGF0YSA/IGdPYmouZ2V0Um93cygpW2luZGV4XSA6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF0sIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWFyZ3Mucm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgdWlkID0gYXJncy5yb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKGFyZ3Mucm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSb3dPYmplY3RGcm9tVUlEKHVpZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoYXJncy5yb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByb3dPYmouZWRpdCA9ICdkZWxldGUnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGFyZ3Mucm93LCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coaW5kZXgpO1xuICAgICAgICAgICAgZGVsZXRlIGFyZ3Mucm93O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3dJZHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgZGF0YVJvd3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnLCBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRJbmRleEZyb21EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaW5BcnJheShkYXRhLCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0FkZFJvdyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0YSA9IGRhdGEgPyBkYXRhIDogdGhpcy5nZXREZWZhdWx0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGRlZmF1bHREYXRhLFxuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaEFkZCwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIG1vZGVsRGF0YSA9IG1vZGVsLmdlbmVyYXRlUm93cyhbYXJncy5kZWZhdWx0RGF0YV0pO1xuICAgICAgICAgICAgdmFyIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbMF0sIGdPYmouZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pLCB0ci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIHRyLmNsYXNzTGlzdC5hZGQoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZSh0ciwgdGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSwgWydlLXVwZGF0ZWR0ZCddKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIG1vZGVsRGF0YVswXS5kYXRhKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5lZGl0ID0gJ2FkZCc7XG4gICAgICAgICAgICB0aGlzLmFkZFJvd09iamVjdChtb2RlbERhdGFbMF0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCgwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb2wgPSBnT2JqLmNvbHVtbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwoMCwgY29sLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzMSA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0YTogYXJncy5kZWZhdWx0RGF0YSwgcm93OiB0cixcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbCwgY29sdW1uSW5kZXg6IGluZGV4LCBwcmltYXJ5S2V5OiBhcmdzLnByaW1hcnlLZXksIGNlbGw6IHRyLmNlbGxzW2luZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hBZGQsIGFyZ3MxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5maW5kTmV4dEVkaXRhYmxlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGNvbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbkluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZGQgJiYgdGhpcy5jaGVja05QQ2VsbChjb2xzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBZGQgJiYgIWNvbHNbaV0udGVtcGxhdGUgJiYgY29sc1tpXS52aXNpYmxlICYmIGNvbHNbaV0uYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5maW5kUHJldkVkaXRhYmxlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA+IC0xOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2hlY2tOUENlbGwgPSBmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgICByZXR1cm4gIWNvbC50ZW1wbGF0ZSAmJiBjb2wudmlzaWJsZSAmJiAhY29sLmlzUHJpbWFyeUtleSAmJiAhY29sLmlzSWRlbnRpdHkgJiYgY29sLmFsbG93RWRpdGluZztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREZWZhdWx0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGRWYWx1ZXMgPSB7ICdudW1iZXInOiAwLCAnc3RyaW5nJzogbnVsbCwgJ2Jvb2xlYW4nOiBmYWxzZSwgJ2RhdGUnOiBudWxsLCAnZGF0ZXRpbWUnOiBudWxsIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZGF0YVtjb2wuZmllbGRdID0gY29sLmRlZmF1bHRWYWx1ZSA/IGNvbC5kZWZhdWx0VmFsdWUgOiBkVmFsdWVzW2NvbC50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENlbGxJZHggPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGdMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSB0YXJnZXQuY2VsbEluZGV4IC0gZ0xlbjtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXRDZWxsID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyAmJiBjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmICEodGhpcy5jZWxsRGV0YWlscy5jb2x1bW4uZmllbGQgPT09IGZpZWxkICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBnT2JqLmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICgoa2V5c1swXSA9PT0gY29sLmZpZWxkICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93JykpIHx8IGNvbC50ZW1wbGF0ZSB8fCBjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3dEYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMuZ2V0RGF0YUJ5SW5kZXgoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogcm93LmNlbGxzW3RoaXMuZ2V0Q2VsbElkeChjb2wudWlkKV0sIHJvdzogcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2wuZmllbGQsIGNvbHVtbk9iamVjdDogY29sLCBpc0ZvcmVpZ25LZXk6ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5mb3JlaWduS2V5VmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBrZXlzLCByb3dEYXRhOiByb3dEYXRhLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUnVsZXM6IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBjb2wudmFsaWRhdGlvblJ1bGVzID8gY29sLnZhbGlkYXRpb25SdWxlcyA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvd0RhdGFbY29sLmZpZWxkXSwgdHlwZTogIWlzQWRkID8gJ2VkaXQnIDogJ2FkZCcsIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbEVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsIGNvbHVtbjogY29sLCB2YWx1ZTogYXJncy52YWx1ZSwgaXNGb3JlaWduS2V5OiBhcmdzLmlzRm9yZWlnbktleSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkeChhcmdzLmNlbGwpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVwZGF0ZWR0ZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJyk7XG4gICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oW2NvbF0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVDZWxsID0gZnVuY3Rpb24gKHJvd0luZGV4LCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIGlmIChjb2wgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5jZWxsc1t0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoZmllbGQpXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0ZC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQodGQsIGNvbCwgcm93T2JqLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucXVlcnlDZWxsSW5mbywge1xuICAgICAgICAgICAgICAgICAgICBjZWxsOiB0ZCwgY29sdW1uOiBjb2wsIGRhdGE6IHJvd09iai5jaGFuZ2VzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuc2V0Q2hhbmdlcyA9IGZ1bmN0aW9uIChyb3dPYmosIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFyb3dPYmouY2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvd09iai5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAgICAgcm93T2JqLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnVwZGF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsKGluZGV4LCBjb2wsIGRhdGFbY29sXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0Q2VsbElkeCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBjSWR4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpICsgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSkgfHwgIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuY2hpbGRHcmlkKSkge1xuICAgICAgICAgICAgICAgIGNJZHgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjSWR4O1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hURCA9IGZ1bmN0aW9uICh0ZCwgY29sdW1uLCByb3dPYmosIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IG5ldyBjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hhbmdlcyhyb3dPYmosIGNvbHVtbi5maWVsZCwgdmFsdWUpO1xuICAgICAgICAgICAgY2VsbC5yZWZyZXNoVEQodGQsIHJvd09iai5jZWxsc1t0aGlzLmdldENlbGxJZHgoY29sdW1uLnVpZCldLCByb3dPYmouY2hhbmdlcyk7XG4gICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNhdmVDZWxsID0gZnVuY3Rpb24gKGlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSAmJiAoIWdPYmouaXNFZGl0IHx8IHRoaXMudmFsaWRhdGVGb3JtT2JqKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0aGlzLmZvcm0sICdlLXJvdycpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuY2VsbERldGFpbHMuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGVkaXRlZERhdGEgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0Q3VycmVudEVkaXRlZERhdGEodGhpcy5mb3JtLCB7fSk7XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQodGhpcy5jZWxsRGV0YWlscy5yb3dEYXRhLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IGNvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZWRpdGVkRGF0YVtjb2x1bW4uZmllbGRdLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMuY2VsbERldGFpbHMucm93RGF0YSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbHVtbk9iamVjdDogY29sdW1uLFxuICAgICAgICAgICAgICAgIGNlbGw6IHRoaXMuZm9ybS5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGlzRm9yZWlnbktleTogdGhpcy5jZWxsRGV0YWlscy5pc0ZvcmVpZ25LZXksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jZWxsU2F2ZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5kZXN0cm95V2lkZ2V0cyhbY29sdW1uXSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hURChhcmdzLmNlbGwsIGNvbHVtbiwgZ09iai5nZXRSb3dPYmplY3RGcm9tVUlEKHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSksIGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodHIsIFtdLCBbJ2UtZWRpdGVkcm93JywgJ2UtYmF0Y2hyb3cnXSk7XG4gICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1lZGl0ZWRiYXRjaGNlbGwnKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoYXJncy52YWx1ZSkgJiYgYXJncy52YWx1ZS50b1N0cmluZygpID09PVxuICAgICAgICAgICAgICAgICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxEZXRhaWxzLnZhbHVlKSA/IHRoaXMuY2VsbERldGFpbHMudmFsdWUgOiAnJykudG9TdHJpbmcoKSAmJiAhdGhpcy5pc0NvbG9yZWQpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy5pc0NvbG9yZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREYXRhQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgIHJldHVybiByb3cuY2hhbmdlcyA/IHJvdy5jaGFuZ2VzIDogcm93LmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudmFsQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGVkaXQgPSB0aGlzLnBhcmVudC5lZGl0TW9kdWxlO1xuICAgICAgICAgICAgZWRpdC52YWxpZGF0aW9uQ29tcGxldGUoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY3VzdG9tUGxhY2VtZW50ID0gZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBlZGl0ID0gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZTtcbiAgICAgICAgICAgIGVkaXQudmFsRXJyb3JQbGFjZW1lbnQoaW5wdXRFbGVtZW50LCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdCA9IEJhdGNoRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2JhdGNoLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERpYWxvZ0VkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGlhbG9nRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXQgPSBEaWFsb2dFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuL2V4cG9ydC1oZWxwZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZXZlbnRzLCBlajJfZXhjZWxfZXhwb3J0XzEsIGVqMl9iYXNlXzEsIGRhdGFfMSwgZXhwb3J0X2hlbHBlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLCBlbnVtXzEsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4Y2VsRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhjZWxFeHBvcnQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmJvb2sgPSB7fTtcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9ICdhcHBlbmR0b3NoZWV0JztcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0V4Y2VsRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgaWYgKGdPYmouZWxlbWVudCAhPT0gbnVsbCAmJiBnT2JqLmVsZW1lbnQuaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmlkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBnT2JqO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYm9vayA9IHt9O1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAxO1xuICAgICAgICAgICAgdGhpcy5mb290ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAnYXBwZW5kdG9zaGVldCc7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydFZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICB0aGlzLnRoZW1lID0gJ21hdGVyaWFsJztcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLk1hcCA9IGZ1bmN0aW9uIChncmlkLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgaXNDc3YpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gZ3JpZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShnT2JqKTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGlzQ3N2KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGlzQ3N2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVFeGNlbEV4cG9ydCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVjb3JkcyhncmlkLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vayk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkcyA9IGZ1bmN0aW9uIChnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHsgdXJsOiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuZGF0YVNvdXJjZS51cmwsIGFkYXB0b3I6IGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5hZGFwdG9yIH0pLmV4ZWN1dGVRdWVyeShuZXcgZWoyX2RhdGFfMS5RdWVyeSgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NJbm5lclJlY29yZHMoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5ib29rKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gX3RoaXMuZGF0YS5nZXREYXRhKHt9LCBfdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NJbm5lclJlY29yZHMoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5ib29rKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzSW5uZXJSZWNvcmRzID0gZnVuY3Rpb24gKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKSB7XG4gICAgICAgICAgICB2YXIgYmxhbmtSb3dzID0gNTtcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBUeXBlID0gKGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQudHlwZSAhPT0gdW5kZWZpbmVkID8gZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC50eXBlIDogJ2FwcGVuZHRvc2hlZXQnKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC5ibGFua1Jvd3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBibGFua1Jvd3MgPSBleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LmJsYW5rUm93cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod29ya2Jvb2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gd29ya2Jvb2sud29ya3NoZWV0cztcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IHdvcmtib29rLnN0eWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gd29ya2Jvb2sud29ya3NoZWV0c1swXS5yb3dzO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHdvcmtib29rLndvcmtzaGVldHNbMF0uY29sdW1ucztcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IHdvcmtib29rLnN0eWxlcztcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9ICh0aGlzLnJvd3NbdGhpcy5yb3dzLmxlbmd0aCAtIDFdLmluZGV4ICsgYmxhbmtSb3dzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChpc011bHRpcGxlRXhwb3J0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgKGlzTXVsdGlwbGVFeHBvcnQgfHwgdGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhjZWxIZWFkZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmhlYWRlcikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwVHlwZSA9PT0gJ2FwcGVuZHRvc2hlZXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhjZWxIZWFkZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmhlYWRlcikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkID8gZXhwb3J0UHJvcGVydGllcy5pbmNsdWRlSGlkZGVuQ29sdW1uIDogZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvdyA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0SGVscGVyKGdPYmopLmdldEhlYWRlcnMoZ09iai5jb2x1bW5zLCB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4pO1xuICAgICAgICAgICAgdmFyIGdyb3VwSW5kZW50ID0gMDtcbiAgICAgICAgICAgIGlmICgoci5yZXN1bHQpLmxldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBncm91cEluZGVudCArPSAoci5yZXN1bHQpLmxldmVsO1xuICAgICAgICAgICAgICAgIGdyb3VwSW5kZW50ICs9IChyLnJlc3VsdCkuY2hpbGRMZXZlbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NIZWFkZXJDb250ZW50KGdPYmosIGhlYWRlclJvdywgZXhwb3J0UHJvcGVydGllcywgZ3JvdXBJbmRlbnQpO1xuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCAmJiAhKGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHZpZXcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5leGNlbEV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmRDb250ZW50ID0gZnVuY3Rpb24gKGdPYmosIHJldHVyblR5cGUsIGhlYWRlclJvdywgaXNNdWx0aXBsZUV4cG9ydCwgY3VycmVudFZpZXdSZWNvcmRzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHJlY29yZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlY29yZCA9IGN1cnJlbnRWaWV3UmVjb3JkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29yZCA9IHJldHVyblR5cGUucmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29yZC5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJvd3MoZ09iaiwgcmVjb3JkLCBoZWFkZXJSb3csIHJlY29yZC5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCAwKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVHlwZS5hZ2dyZWdhdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWaWV3UmVjb3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKGdPYmosIHJldHVyblR5cGUucmVzdWx0LCBjdXJyZW50Vmlld1JlY29yZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCByZXR1cm5UeXBlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5leHBUeXBlID09PSAnYXBwZW5kdG9zaGVldCcgJiYgIWlzTXVsdGlwbGVFeHBvcnQpIHx8ICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsRm9vdGVyKHRoaXMuZm9vdGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2hlZXQgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNoZWV0LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldC5yb3dzID0gdGhpcy5yb3dzO1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQucHVzaChzaGVldCk7XG4gICAgICAgICAgICB0aGlzLmJvb2sud29ya3NoZWV0cyA9IHRoaXMud29ya1NoZWV0O1xuICAgICAgICAgICAgdGhpcy5ib29rLnN0eWxlcyA9IHRoaXMuc3R5bGVzO1xuICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDc3ZFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvb2sgPSBuZXcgZWoyX2V4Y2VsX2V4cG9ydF8xLldvcmtib29rKHRoaXMuYm9vaywgJ2NzdicpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNhdmUoJ0V4cG9ydC5jc3YnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib29rID0gbmV3IGVqMl9leGNlbF9leHBvcnRfMS5Xb3JrYm9vayh0aGlzLmJvb2ssICd4bHN4Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2F2ZSgnRXhwb3J0Lnhsc3gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJvd3MgPSBmdW5jdGlvbiAoZ09iaiwgZGF0YVNvdXJjZSwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSBpbmRleCArIGxldmVsO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGl0ZW0uZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gaXRlbS5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlICs9IGl0ZW0uY291bnQgKyAnIGl0ZW1zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cENhcHRpb25TdW1tYXJ5Um93cyA9IGNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cENhcHRpb25TdW1tYXJ5Um93cywgZGF0YVNvdXJjZS5sZXZlbCArIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHRoaXMucm93TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsSW5kZXggPSBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscyArIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzWzBdLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSB0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0Q2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Q2VsbC5pbmRleCA8IGxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxJbmRleCA9IHRDZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4ID4gaEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0Q2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxJbmRleCAtIGNlbGwuaW5kZXgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gbEluZGV4IC0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaEluZGV4IDwgKGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aCArIGluZGV4ICsgbGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDZWxsLmluZGV4ID0gKGhJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChzQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gaGVhZGVyUm93LmNvbHVtbnM7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzID0gY2VsbHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgaXRlbS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgKGxldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgaXRlbSwgdW5kZWZpbmVkLCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciByTGVuID0gT2JqZWN0LmtleXMocmVjb3JkKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJMZW47IHIrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBoZWFkZXJSb3cuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZWNvcmRbcl1baGVhZGVyUm93LmNvbHVtbnNbY10uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGhlYWRlclJvdy5jb2x1bW5zW2NdLCB2YWx1ZTogdmFsdWUsIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsUXVlcnlDZWxsSW5mbywgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbmRleCA9IGluZGV4ICsgbGV2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gYXJncy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGVJbmRleCA9IHRoaXMuZ2V0Q29sdW1uU3R5bGUoZ09iaiwgaW5kZXggKyBsZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMubWVyZ2VPcHRpb25zKHRoaXMuc3R5bGVzW3N0eWxlSW5kZXhdLCBhcmdzLnN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB7IG5hbWU6IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgKGluZGV4ICsgbGV2ZWwpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxscyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKGdPYmosIHJlYywgY3VycmVudFZpZXdSZWNvcmRzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBzdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBjdXJyZW50Vmlld1JlY29yZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gcmVjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeVJvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YSwgeyBsZXZlbDogZGF0YS5sZXZlbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTdW1tYXJ5Um93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFnZ3JlZ2F0ZXMoZ09iaiwgZ3JvdXBTdW1tYXJ5Um93cywgaW5kZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGEsIHJlYy5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgIGlmIChzUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBzUm93cywgaW5kZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmZpbGxBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKGdPYmosIGNlbGxzLCBpbmRlbnQsIGN1c3RvbUluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxzXzEgPSBjZWxsczsgX2kgPCBjZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBjZWxsc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHNfMiA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IHJvdy5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBfYltfYV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBlQ2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNlbGwudmlzaWJsZSB8fCB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLmluZGV4ID0gaW5kZXggKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjZWxsLmNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHR4dFswXS53aG9sZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHR4dFswXS53aG9sZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gT2JqZWN0LmtleXMocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKTsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfZFtfY107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBjZWxsLmNvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5zdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5hdmVyYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uYXZlcmFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS50cnVlY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS50cnVlY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uZmFsc2Vjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmN1c3RvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmN1c3RvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzXzIucHVzaChlQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5pbmRleCA9IGluZGV4ICsgaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzXzIucHVzaChlQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXN0b21JbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IGN1c3RvbUluZGV4LCBjZWxsczogY2VsbHNfMiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxsc18yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLm1lcmdlT3B0aW9ucyA9IGZ1bmN0aW9uIChKU09OMSwgSlNPTjIpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIHZhciBhdHRybmFtZSA9IE9iamVjdC5rZXlzKEpTT04xKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRybmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cm5hbWVbaW5kZXhdICE9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJuYW1lW2luZGV4XV0gPSBKU09OMVthdHRybmFtZVtpbmRleF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJuYW1lID0gT2JqZWN0LmtleXMoSlNPTjIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGF0dHJuYW1lLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChhdHRybmFtZVtpbmRleF0gIT09ICduYW1lJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbYXR0cm5hbWVbaW5kZXhdXSA9IEpTT04yW2F0dHJuYW1lW2luZGV4XV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldENvbHVtblN0eWxlID0gZnVuY3Rpb24gKGdPYmosIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc3R5bGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUubmFtZSA9PT0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0hlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoZ09iaiwgaGVhZGVyUm93LCBleHBvcnRQcm9wZXJ0aWVzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgcm93SW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gaGVhZGVyUm93O1xuICAgICAgICAgICAgdmFyIGdyaWRSb3dzID0gcmV0dXJuVmFsdWUucm93cztcbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHJldHVyblZhbHVlLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc3Bhbm5lZENlbGxzID0gW107XG4gICAgICAgICAgICBpZiAoaW5kZW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4ICE9PSBpbmRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goeyBpbmRleDogaW5kZXggKyAxLCB3aWR0aDogMzAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgZ3JpZFJvd3MubGVuZ3RoOyByb3crKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q2VsbEluZGV4ID0gMSArIGluZGVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2x1bW5fMSA9IDA7IGNvbHVtbl8xIDwgZ3JpZFJvd3Nbcm93XS5jZWxscy5sZW5ndGg7IGNvbHVtbl8xKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBncmlkQ2VsbCA9IGdyaWRSb3dzW3Jvd10uY2VsbHNbY29sdW1uXzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0geyBjb250YWluczogdHJ1ZSwgaW5kZXg6IDEgfTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlc3VsdC5jb250YWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5nZXRJbmRleChzcGFubmVkQ2VsbHMsIHJvd0luZGV4LCBjdXJyZW50Q2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsSW5kZXggPSByZXN1bHQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb250YWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSByZXN1bHQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLnJvd1NwYW4gIT09IHVuZGVmaW5lZCAmJiBncmlkQ2VsbC5yb3dTcGFuICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd1NwYW4gPSBncmlkQ2VsbC5yb3dTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJvd0luZGV4OyBpIDwgZ3JpZENlbGwucm93U3BhbiArIHJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbm5lZENlbGwgPSB7IHJvd0luZGV4OiAwLCBjb2x1bW5JbmRleDogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxsLnJvd0luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbC5jb2x1bW5JbmRleCA9IGN1cnJlbnRDZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGxzLnB1c2goc3Bhbm5lZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5jb2xTcGFuICE9PSB1bmRlZmluZWQgJiYgZ3JpZENlbGwuY29sU3BhbiAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gZ3JpZENlbGwuY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsSW5kZXggPSBjdXJyZW50Q2VsbEluZGV4ICsgY2VsbC5jb2xTcGFuIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy50aGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW1lID0gZXhwb3J0UHJvcGVydGllcy50aGVtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5nZXRIZWFkZXJUaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sdW1uLnRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBncmlkQ2VsbC5jb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxscyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IGdyaWRDb2x1bW5zLmxlbmd0aDsgY29sKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlU3R5bGVzKGdPYmosIGdyaWRDb2x1bW5zW2NvbF0sIHRoaXMuZ2V0UmVjb3JkVGhlbWVTdHlsZSh0aGlzLnRoZW1lKSwgaW5kZW50ICsgY29sICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRIZWFkZXJUaGVtZVN0eWxlID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzY2NjY2Nic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnROYW1lID0gJ1NlZ29lIFVJJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyMzMzMzMEYnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTI7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0UwRTBFMCcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMEYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250TmFtZSA9ICdTZWdvZSBVSSc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJhY2tDb2xvciA9ICcjRjZGNkY2JztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFQUVBRUEnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTM7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJhY2tDb2xvciA9ICcjRjZGNkY2JztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRSZWNvcmRUaGVtZVN0eWxlID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMzMyc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnROYW1lID0gJ1NlZ29lIFVJJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0RERERERCcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeGNlbEhlYWRlciA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXIucm93cyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcgfHwgdGhpcy5yb3dMZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmhlYWRlclJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gaGVhZGVyLmhlYWRlclJvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd0xlbmd0aCA8IGhlYWRlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBub1Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gaGVhZGVyLnJvd3Nbcm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoanNvbi5pbmRleCAhPT0gbnVsbCAmJiBqc29uLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ID0gKHJvdyArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZENlbGxJbmRleChqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS51cGRhdGVkQ2VsbEluZGV4ID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgIHZhciBjZWxsc0xlbmd0aCA9IGpzb24uY2VsbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgY2VsbElkID0gMDsgY2VsbElkIDwgY2VsbHNMZW5ndGg7IGNlbGxJZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25DZWxsID0ganNvbi5jZWxsc1tjZWxsSWRdO1xuICAgICAgICAgICAgICAgIGlmICghKGpzb25DZWxsLmluZGV4ICE9PSBudWxsICYmIGpzb25DZWxsLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25DZWxsLmluZGV4ID0gKGNlbGxJZCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKGpzb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4Y2VsRm9vdGVyID0gZnVuY3Rpb24gKGZvb3Rlcikge1xuICAgICAgICAgICAgaWYgKGZvb3Rlci5yb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoICs9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA+IGZvb3Rlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggKz0gKGZvb3Rlci5mb290ZXJSb3dzIC0gZm9vdGVyLnJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5mb290ZXJSb3dzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5vUm93czsgcm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBmb290ZXIucm93c1tyb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5pbmRleCA9PT0gbnVsbCB8fCBqc29uLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggPSB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCArPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWRDZWxsSW5kZXgoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc3Bhbm5lZENlbGxzXzEgPSBzcGFubmVkQ2VsbHM7IF9pIDwgc3Bhbm5lZENlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0gc3Bhbm5lZENlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICgoc3Bhbm5lZENlbGwucm93SW5kZXggPT09IHJvd0luZGV4KSAmJiAoc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPT09IGNvbHVtbkluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5JbmRleCA9IGNvbHVtbkluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY29udGFpbnM6IHRydWUsIGluZGV4OiBjb2x1bW5JbmRleCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRhaW5zOiBmYWxzZSwgaW5kZXg6IGNvbHVtbkluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wYXJzZVN0eWxlcyA9IGZ1bmN0aW9uIChnT2JqLCBjb2wsIHN0eWxlLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0LnNrZWxldG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubnVtYmVyRm9ybWF0ID0gY29sLmZvcm1hdC5za2VsZXRvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLmZvcm1hdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5udW1iZXJGb3JtYXQgPSBjb2wuZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbC50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGNvbC50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5uYW1lID0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2wud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4LCB3aWR0aDogY29sLndpZHRoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4Y2VsRXhwb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeGNlbEV4cG9ydCA9IEV4Y2VsRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfODVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIlxuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi8uLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4vLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVudW1fMSwgZWoyX2Jhc2VfMSwgY2VsbF8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwb3J0SGVscGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0SGVscGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZXRIZWFkZXJzID0gZnVuY3Rpb24gKGNvbHVtbiwgaXNIaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgaWYgKGlzSGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMubWVhc3VyZUNvbHVtbkRlcHRoKGNvbHMpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBhY3R1YWxDb2x1bW5zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sRGVwdGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5wcm9jZXNzQ29sdW1ucyhyb3dzKTtcbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLnByb2Nlc3NIZWFkZXJDZWxscyhyb3dzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3cuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZpc2libGUgPT09IHVuZGVmaW5lZCAmJiBjZWxsLmNlbGxUeXBlICE9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCghaXNIaWRlQ29sdW1uSW5jbHVkZSkgJiYgY2VsbC52aXNpYmxlICE9PSB1bmRlZmluZWQgJiYgKCFjZWxsLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyhjb2xzW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHJvd3M6IHJvd3MsIGNvbHVtbnM6IGFjdHVhbENvbHVtbnMgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUFjdHVhbENvbHVtbnMgPSBmdW5jdGlvbiAoY29sdW1uLCBhY3R1YWxDb2x1bW5zKSB7XG4gICAgICAgICAgICBpZiAoIWNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsQ29sdW1ucy5wdXNoKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4sIDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sU3BhbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4uY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zKGNvbHVtbi5jb2x1bW5zW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5yZW1vdmVDZWxsRnJvbVJvdyA9IGZ1bmN0aW9uIChjZWxscywgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0Q2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VsbEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRDZWxscy5wdXNoKGNlbGxzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoY2VsbEluZGV4ICsgMSk7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdENlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2x1bW5zW2ldLCByb3dzLCAwLCBpID09PSAwLCBmYWxzZSwgaSA9PT0gKGNvbHVtbnMubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuYXBwZW5kR3JpZENlbGxzID0gZnVuY3Rpb24gKGNvbHMsIGdyaWRSb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbHVtbiwgaXNMYXN0Q29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbHVtbiA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBncmlkUm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbHVtbiA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyaWRSb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc0ZpcnN0Q2VsbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgaXNJZ25vcmVGaXJzdENlbGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5jb2x1bW5zW2ldLnZpc2libGUgJiYgIWlzSWdub3JlRmlyc3RDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0lnbm9yZUZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIGdyaWRSb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncmlkUm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoZ3JpZENvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZ3JpZENvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChncmlkQ29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogZ3JpZENvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2x1bW5JbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9uLnJvd1NwYW4gfHwgb3B0aW9uLnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbi5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NDb2x1bW5zID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBncmlkT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSBncmlkT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGogPCBsZW5fMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY29sdW1uSW5kZXhlcy5pbmRleE9mKGopID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ3JpZE9iai5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2V0Q2VsbENvdW50ID0gZnVuY3Rpb24gKGNvbHVtbiwgY291bnQpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4uY29sdW1uc1tpXSwgY291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSB8fCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5EZXB0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sdW1uW2ldLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAobWF4IDwgZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuY2hlY2tEZXB0aCA9IGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgcmV0dXJuIEV4cG9ydEhlbHBlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXhwb3J0SGVscGVyID0gRXhwb3J0SGVscGVyO1xuICAgIHZhciBFeHBvcnRWYWx1ZUZvcm1hdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4cG9ydFZhbHVlRm9ybWF0dGVyKCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcm5hdGlvbmFsaXphdGlvbiA9IG5ldyBlajJfYmFzZV8xLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0VmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZvcm1hdENlbGxWYWx1ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ251bWJlcicgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmF0aW9uYWxpemF0aW9uLmdldE51bWJlckZvcm1hdCh7IGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0IH0pKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3MudmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJyB8fCBhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZXRpbWUnIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3MuY29sdW1uLmZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ3RpbWUnLCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbihmb3JtYXQpKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLmZvcm1hdCBpbnN0YW5jZW9mIE9iamVjdCAmJiBhcmdzLmNvbHVtbi5mb3JtYXQudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFyZ3MudmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRm9ybWF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUZvcm1hdCA9IHsgdHlwZTogYXJncy5jb2x1bW4uZm9ybWF0LnR5cGUsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAndGltZScsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAnZGF0ZVRpbWUnLCBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdC5mb3JtYXQsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQuc2tlbGV0b24gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKGN1c3RvbUZvcm1hdCkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gdW5kZWZpbmVkIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhcmdzLnZhbHVlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHBvcnRWYWx1ZUZvcm1hdHRlciA9IEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiLCBcIi4vZXhwb3J0LWhlbHBlclwiLCBcIi4uL2FjdGlvbnMvZGF0YVwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZWoyX3BkZl8xLCBlajJfcGRmXzIsIGVqMl9wZGZfMywgZWoyX3BkZl80LCBlajJfcGRmXzUsIGVqMl9wZGZfNiwgZXhwb3J0X2hlbHBlcl8xLCBkYXRhXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEsIGVqMl9iYXNlXzEsIGVudW1fMSwgZWoyX2RhdGFfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGRmRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGRmRXhwb3J0KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ncmlkVGhlbWUgPSAnbWF0ZXJpYWwnO1xuICAgICAgICAgICAgdGhpcy5pc0dyb3VwaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGRmRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gJ21hdGVyaWFsJztcbiAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZVBkZkV4cG9ydCk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuTWFwID0gZnVuY3Rpb24gKHBhcmVudCwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSkudGhlbihmdW5jdGlvbiAocmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkRvYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBwZGZEb2M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IG5ldyBlajJfcGRmXzEuUGRmRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NFeHBvcnQocGFyZW50LCByZXR1cm5UeXBlLCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudHJpZ2dlcihldmVudHMucGRmRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wZGZEb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IF90aGlzLmRhdGEuZ2V0RGF0YSh7fSwgX3RoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHJldHVyblR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQocGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZGZEb2MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gcGRmRG9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBuZXcgZWoyX3BkZl8xLlBkZkRvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRXhwb3J0KHBhcmVudCwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnRyaWdnZXIoZXZlbnRzLnBkZkV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMucGRmRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhwb3J0ID0gZnVuY3Rpb24gKGdPYmosIHJldHVyblR5cGUsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5wZGZEb2N1bWVudC5zZWN0aW9ucy5hZGQoKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByb2Nlc3NFeHBvcnRQcm9wZXJ0aWVzKHBkZkV4cG9ydFByb3BlcnRpZXMsIGRhdGFTb3VyY2UsIHNlY3Rpb24pO1xuICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHJlc3VsdC5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuR3JvdXBHdWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VjdGlvbiA9IHJlc3VsdC5zZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHBkZlBhZ2UgPSBzZWN0aW9uLnBhZ2VzLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHBkZkdyaWQgPSBuZXcgZWoyX3BkZl8xLlBkZkdyaWQoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUaGVtZVN0eWxlID0gdGhpcy5nZXRIZWFkZXJUaGVtZVN0eWxlKCk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gaGVhZGVyVGhlbWVTdHlsZS5ib3JkZXI7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRm9udCA9IGhlYWRlclRoZW1lU3R5bGUuZm9udDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJCcnVzaCA9IGhlYWRlclRoZW1lU3R5bGUuYnJ1c2g7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSAobmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRIZWxwZXIodGhpcy5wYXJlbnQpKS5nZXRIZWFkZXJzKGNvbHVtbnMsIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSByZXR1cm5WYWx1ZS5yb3dzO1xuICAgICAgICAgICAgdmFyIGdyaWRDb2x1bW5zID0gcmV0dXJuVmFsdWUuY29sdW1ucztcbiAgICAgICAgICAgIHBkZkdyaWQgPSB0aGlzLnByb2Nlc3NHcmlkSGVhZGVycyhkYXRhU291cmNlLmNoaWxkTGV2ZWxzLCBwZGZHcmlkLCByb3dzLCBncmlkQ29sdW1ucywgYm9yZGVyLCBoZWFkZXJGb250LCBoZWFkZXJCcnVzaCk7XG4gICAgICAgICAgICB0aGlzLnNldENvbHVtblByb3BlcnRpZXMoZ3JpZENvbHVtbnMsIHBkZkdyaWQpO1xuICAgICAgICAgICAgdmFyIGNhcHRpb25UaGVtZVN0eWxlID0gdGhpcy5nZXRTdW1tYXJ5Q2FwdGlvblRoZW1lU3R5bGUoKTtcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZSAhPT0gbnVsbCAmJiBkYXRhU291cmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSZWNvcmRzKHBkZkdyaWQsIGRhdGFTb3VyY2UsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIDAsIGNhcHRpb25UaGVtZVN0eWxlLmZvbnQsIGNhcHRpb25UaGVtZVN0eWxlLmJydXNoLCBjYXB0aW9uVGhlbWVTdHlsZS5iYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkKGJvcmRlciwgZ3JpZENvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2UsIHBkZkdyaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVHlwZS5hZ2dyZWdhdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLlN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNSb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21EYXRhU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZSwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnJlbnRWaWV3RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UucmVjb3JkcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhyZXR1cm5UeXBlLnJlc3VsdCwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGNhcHRpb25UaGVtZVN0eWxlLmZvbnQsIGNhcHRpb25UaGVtZVN0eWxlLmJydXNoLCBjYXB0aW9uVGhlbWVTdHlsZS5iYWNrZ3JvdW5kQnJ1c2gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcGRmR3JpZC5yb3dzLmFkZFJvdygpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuZHJhdyhwZGZQYWdlLCAyMCwgMjApO1xuICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC5zYXZlKCdFeHBvcnQucGRmJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeUNhcHRpb25UaGVtZVN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmXzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcig1MSwgNTEsIDUxKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMjU1LCAyNTUsIDI1NSkpIH07XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9udDogbmV3IGVqMl9wZGZfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSwgYmFja2dyb3VuZEJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigyNDYsIDI0NiwgMjQ2KSkgfTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmXzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDkuNzUpLCBicnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMCwgMCwgMCkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDI0NiwgMjQ2LCAyNDYpKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEhlYWRlclRoZW1lU3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfMS5QZGZCb3JkZXJzKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZ3JpZFRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMjIxLCAyMjEsIDIyMSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBib3JkZXI6IGJvcmRlciwgZm9udDogbmV3IGVqMl9wZGZfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl8xLlBkZlBlbihuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDIyNCwgMjI0LCAyMjQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm9yZGVyOiBib3JkZXIsIGZvbnQ6IG5ldyBlajJfcGRmXzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgOSksIGJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigwLCAwLCAwLjU0KSkgfTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfMS5QZGZQZW4obmV3IGVqMl9wZGZfMy5QZGZDb2xvcigyMzQsIDIzNCwgMjM0KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmXzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMTAyLCAxMDIsIDEwMikpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0dyb3VwZWRSZWNvcmRzID0gZnVuY3Rpb24gKHBkZkdyaWQsIGRhdGFTb3VyY2UsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIGxldmVsLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBJbmRleCA9IGxldmVsO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVNvdXJjZUl0ZW1zID0gZGF0YVNvdXJjZV8xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcGRmR3JpZC5yb3dzLmFkZFJvdygpO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YVNvdXJjZUl0ZW1zLmtleSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBnT2JqLmdldENvbHVtbkJ5RmllbGQoZGF0YVNvdXJjZUl0ZW1zLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVNvdXJjZUl0ZW1zLmZpZWxkICsgJzogJyArIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIuZm9ybWF0Q2VsbFZhbHVlKGFyZ3MpICsgJyAtICcgKyBkYXRhU291cmNlSXRlbXMuY291bnQgKyAoZGF0YVNvdXJjZS5jb3VudCA+IDEgPyAnIGl0ZW1zJyA6ICcgaXRlbScpO1xuICAgICAgICAgICAgICAgIHJvdy5jZWxscy5nZXRDZWxsKGdyb3VwSW5kZXgpLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRGb250KGZvbnQpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRUZXh0QnJ1c2goYnJ1c2gpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCYWNrZ3JvdW5kQnJ1c2goYmFja2dyb3VuZEJydXNoKTtcbiAgICAgICAgICAgICAgICB2YXIgc1Jvd3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGNhcHRpb25TdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlSXRlbXMuaXRlbXMucmVjb3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gY2FwdGlvblN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGNhcHRpb25TdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNSb3dzICE9PSB1bmRlZmluZWQgJiYgc1Jvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscy5nZXRDZWxsKGdyb3VwSW5kZXggKyAxKS5jb2x1bW5TcGFuID0gcGRmR3JpZC5jb2x1bW5zLmNvdW50IC0gKGdyb3VwSW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgIT09IHVuZGVmaW5lZCAmJiBkYXRhU291cmNlLmNoaWxkTGV2ZWxzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHRydWUsIHJvdywgZ3JvdXBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSZWNvcmRzKHBkZkdyaWQsIGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgZ3JpZENvbHVtbnMsIGdPYmosIGJvcmRlciwgKGdyb3VwSW5kZXggKyAxKSwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgcmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGdyb3VwU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMucmVjb3JkcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHRydWUsIHJvdywgZ3JvdXBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZChib3JkZXIsIGdyaWRDb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlSXRlbXMuaXRlbXMsIHBkZkdyaWQsIChncm91cEluZGV4ICsgMSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0dyaWRIZWFkZXJzID0gZnVuY3Rpb24gKGNoaWxkTGV2ZWxzLCBwZGZHcmlkLCByb3dzLCBncmlkQ29sdW1ucywgYm9yZGVyLCBoZWFkZXJGb250LCBoZWFkZXJCcnVzaCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbkNvdW50ID0gZ3JpZENvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGNvbHVtbkNvdW50ICs9IChjaGlsZExldmVscyArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmFkZChjb2x1bW5Db3VudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAoY2hpbGRMZXZlbHMgKyAxKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5nZXRDb2x1bW4oaSkud2lkdGggPSAyMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmhlYWRlcnMuYWRkKHJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBncmlkSGVhZGVyID0gcGRmR3JpZC5oZWFkZXJzLmdldEhlYWRlcihpKTtcbiAgICAgICAgICAgICAgICBncmlkSGVhZGVyLnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgIGdyaWRIZWFkZXIuc3R5bGUuc2V0Rm9udChoZWFkZXJGb250KTtcbiAgICAgICAgICAgICAgICBncmlkSGVhZGVyLnN0eWxlLnNldFRleHRCcnVzaChoZWFkZXJCcnVzaCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IChjaGlsZExldmVscyArIDEpIDogMDtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBncmlkSGVhZGVyLmNlbGxzLmNvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZ3JpZEhlYWRlci5jZWxscy5nZXRDZWxsKGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNlbGxJbmRleDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJvd3NbaV0uY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZ3JpZEhlYWRlci5jZWxscy5nZXRDZWxsKGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSByb3dzW2ldLmNlbGxzW2pdLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzW2pdLmNvbHVtbi5oZWFkZXJUZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudChyb3dzW2ldLmNlbGxzW2pdLmNvbHVtbi5oZWFkZXJUZXh0QWxpZ24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5yb3dTcGFuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dTcGFuID0gcm93c1tpXS5jZWxsc1tqXS5yb3dTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0VmVydGljYWxBbGlnbm1lbnQoJ2JvdHRvbScsIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0LCByb3dzW2ldLmNlbGxzW2pdLmNvbHVtbi50ZXh0QWxpZ24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMTsgayA8IHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGZHcmlkLmhlYWRlcnMuZ2V0SGVhZGVyKGkgKyBrKS5jZWxscy5nZXRDZWxsKGNlbGxJbmRleCkudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzW2pdLmNvbFNwYW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbHVtblNwYW4gPSByb3dzW2ldLmNlbGxzW2pdLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCArPSBjZWxsLmNvbHVtblNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ICs9IGNlbGwuY29sdW1uU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gaiAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGRmR3JpZC5jb2x1bW5zLmNvdW50ID49IDYpIHtcbiAgICAgICAgICAgICAgICBwZGZHcmlkLnN0eWxlLmFsbG93SG9yaXpvbnRhbE92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwZGZHcmlkO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeHBvcnRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHBkZkV4cG9ydFByb3BlcnRpZXMsIGRhdGFTb3VyY2UsIHNlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy50aGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gcGRmRXhwb3J0UHJvcGVydGllcy50aGVtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMucGFnZU9yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgfHwgcGRmRXhwb3J0UHJvcGVydGllcy5wYWdlU2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZGZQYWdlU2V0dGluZ3MgPSBuZXcgZWoyX3BkZl82LlBkZlBhZ2VTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBwZGZQYWdlU2V0dGluZ3Mub3JpZW50YXRpb24gPSAocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlT3JpZW50YXRpb24gPT09ICdMYW5kc2NhcGUnKSA/IGVqMl9wZGZfNi5QZGZQYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlIDogZWoyX3BkZl82LlBkZlBhZ2VPcmllbnRhdGlvbi5Qb3J0cmFpdDtcbiAgICAgICAgICAgICAgICAgICAgcGRmUGFnZVNldHRpbmdzLnNpemUgPSB0aGlzLmdldFBhZ2VTaXplKHBkZkV4cG9ydFByb3BlcnRpZXMucGFnZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnNldFBhZ2VTZXR0aW5ncyhwZGZQYWdlU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50U2l6ZSA9IHRoaXMucGRmRG9jdW1lbnQucGFnZVNldHRpbmdzLnNpemU7XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IHBkZkV4cG9ydFByb3BlcnRpZXMuaGVhZGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBuZXcgZWoyX3BkZl81LlBvaW50RigwLCBoZWFkZXIuZnJvbVRvcCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gbmV3IGVqMl9wZGZfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGhlYWRlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl80LlJlY3RhbmdsZUYocG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnRlbXBsYXRlLnRvcCA9IHRoaXMuZHJhd1BhZ2VUZW1wbGF0ZShuZXcgZWoyX3BkZl80LlBkZlBhZ2VUZW1wbGF0ZUVsZW1lbnQoYm91bmRzKSwgaGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvb3RlciA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZm9vdGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBuZXcgZWoyX3BkZl81LlBvaW50RigwLCAoKGNsaWVudFNpemUud2lkdGggLSA4MCkgLSAoZm9vdGVyLmZyb21Cb3R0b20gKiAwLjc1KSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IG5ldyBlajJfcGRmXzYuU2l6ZUYoKGNsaWVudFNpemUud2lkdGggLSA4MCksIChmb290ZXIuaGVpZ2h0ICogMC43NSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IGVqMl9wZGZfNC5SZWN0YW5nbGVGKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC50ZW1wbGF0ZS5ib3R0b20gPSB0aGlzLmRyYXdQYWdlVGVtcGxhdGUobmV3IGVqMl9wZGZfNC5QZGZQYWdlVGVtcGxhdGVFbGVtZW50KGJvdW5kcyksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW4gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsIHNlY3Rpb246IHNlY3Rpb24gfTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3UGFnZVRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZWxlbWVudC5jb250ZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnZhbHVlID09PSAnJyB8fCBjb250ZW50LnZhbHVlID09PSB1bmRlZmluZWQgfHwgY29udGVudC52YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC52YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB0aGUgdmFsaWQgaW5wdXQgdmFsdWUgaW4gdGV4dCBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2VOdW1iZXIodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnNyYyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQuc3JjID09PSBudWxsIHx8IGNvbnRlbnQuc3JjID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHRoZSB2YWxpZCBiYXNlNjQgc3RyaW5nIGluIGltYWdlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnJyB8fCBjb250ZW50LnR5cGUgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnbGluZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzID09PSAnJyB8fCBjb250ZW50LnBvaW50cyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCBwb2ludHMgaW4gJyArIGNvbnRlbnQudHlwZSArICcgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbiA9PT0gJycgfHwgY29udGVudC5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHBvc2l0aW9uIGluICcgKyBjb250ZW50LnR5cGUgKyAnIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uLnggPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uLnggPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9zaXRpb24ueCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4IGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbi55ID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbi55ID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvc2l0aW9uLnkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb3NpdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gKHBhZ2VUZW1wbGF0ZSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0aGlzLmdldEZvbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLmdldEJydXNoRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgcGVuID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlbkNvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvcik7XG4gICAgICAgICAgICAgICAgcGVuID0gbmV3IGVqMl9wZGZfMS5QZGZQZW4obmV3IGVqMl9wZGZfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnJ1c2ggPT0gbnVsbCAmJiBwZW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gY29udGVudC52YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIGZvcm1hdDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnNldENvbnRlbnRGb3JtYXQoY29udGVudCwgZm9ybWF0KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0LmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdC5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwYWdlVGVtcGxhdGUuZ3JhcGhpY3MuZHJhd1N0cmluZyh2YWx1ZSwgZm9udCwgcGVuLCBicnVzaCwgeCwgeSwgcmVzdWx0LnNpemUud2lkdGgsIHJlc3VsdC5zaXplLmhlaWdodCwgcmVzdWx0LmZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWdlVGVtcGxhdGUuZ3JhcGhpY3MuZHJhd1N0cmluZyh2YWx1ZSwgZm9udCwgcGVuLCBicnVzaCwgeCwgeSwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3UGFnZU51bWJlciA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0aGlzLmdldEZvbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSBudWxsO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUudGV4dEJydXNoQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBicnVzaENvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yKTtcbiAgICAgICAgICAgICAgICBicnVzaCA9IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSBuZXcgZWoyX3BkZl81LlBkZlBhZ2VOdW1iZXJGaWVsZChmb250LCBicnVzaCk7XG4gICAgICAgICAgICBwYWdlTnVtYmVyLm51bWJlclN0eWxlID0gdGhpcy5nZXRQYWdlTnVtYmVyU3R5bGUoY29udGVudC5wYWdlTnVtYmVyVHlwZSk7XG4gICAgICAgICAgICB2YXIgY29tcG9zaXRlRmllbGQ7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQuaW5kZXhPZignJHRvdGFsJykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBuZXcgZWoyX3BkZl82LlBkZlBhZ2VDb3VudEZpZWxkKGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQuaW5kZXhPZignJHRvdGFsJykgPiBjb250ZW50LmZvcm1hdC5pbmRleE9mKCckY3VycmVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnJHRvdGFsJywgJzEnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyRjdXJyZW50JywgJzEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCckdG90YWwnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfNS5QZGZDb21wb3NpdGVGaWVsZChmb250LCBicnVzaCwgZm9ybWF0LCBwYWdlTnVtYmVyLCBwYWdlQ291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250ZW50LmZvcm1hdC5pbmRleE9mKCckY3VycmVudCcpICE9PSAtMSAmJiBjb250ZW50LmZvcm1hdC5pbmRleE9mKCckdG90YWwnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmXzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZU51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUNvdW50ID0gbmV3IGVqMl9wZGZfNi5QZGZQYWdlQ291bnRGaWVsZChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJHRvdGFsJywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQgPSBuZXcgZWoyX3BkZl81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gJ3swfSc7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQgPSBuZXcgZWoyX3BkZl81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBjb21wb3NpdGVGaWVsZC5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLnN0cmluZ0Zvcm1hdCA9IHJlc3VsdC5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuYm91bmRzID0gbmV3IGVqMl9wZGZfNC5SZWN0YW5nbGVGKHgsIHksIHJlc3VsdC5zaXplLndpZHRoLCByZXN1bHQuc2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuZHJhdyhkb2N1bWVudEhlYWRlci5ncmFwaGljcywgeCwgeSk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd0ltYWdlID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgeCA9IGNvbnRlbnQucG9zaXRpb24ueCAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbnRlbnQucG9zaXRpb24ueSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpID8gKGNvbnRlbnQuc2l6ZS53aWR0aCAqIDAuNzUpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IChjb250ZW50LnNpemUgIT09IHVuZGVmaW5lZCkgPyAoY29udGVudC5zaXplLmhlaWdodCAqIDAuNzUpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IGVqMl9wZGZfMi5QZGZCaXRtYXAoY29udGVudC5zcmMpO1xuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRIZWFkZXIuZ3JhcGhpY3MuZHJhd0ltYWdlKGltYWdlLCB4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3TGluZSA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHgxID0gY29udGVudC5wb2ludHMueDEgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkxID0gY29udGVudC5wb2ludHMueTEgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHgyID0gY29udGVudC5wb2ludHMueDIgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkyID0gY29udGVudC5wb2ludHMueTIgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHBlbiA9IHRoaXMuZ2V0UGVuRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5wZW5TaXplICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS5wZW5TaXplICE9PSBudWxsICYmIHR5cGVvZiBjb250ZW50LnN0eWxlLnBlblNpemUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbi53aWR0aCA9IGNvbnRlbnQuc3R5bGUucGVuU2l6ZSAqIDAuNzU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBlbi5kYXNoU3R5bGUgPSB0aGlzLmdldERhc2hTdHlsZShjb250ZW50LnN0eWxlLmRhc2hTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3TGluZShwZW4sIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBpc0NhcHRpb24sIGNhcHRpb25Sb3csIGdyb3VwSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc1Jvd3NfMSA9IHNSb3dzOyBfaSA8IHNSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHNSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNlbGwudmlzaWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHRpb25Sb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlICE9PSB1bmRlZmluZWQgJiYgIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwgPSByb3cuY2VsbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCB8fCBjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldFRlbXBsYXRlRnVuY3Rpb24odGVtcGxhdGVGbiwgaSwgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4LCBjZWxsLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbiA9IHJlc3VsdC50ZW1wbGF0ZUZ1bmN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9IHJlc3VsdC5sZWFzdENhcHRpb25TdW1tYXJ5SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godHh0WzBdLndob2xlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW1wdHkgJiYgdmFsdWVbaV0gIT09ICcnICYmIHZhbHVlW2ldICE9PSB1bmRlZmluZWQgJiYgdmFsdWVbaV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NhcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkUm93ID0gcGRmR3JpZC5yb3dzLmFkZFJvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0Rm9udChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0VGV4dEJydXNoKGJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0QmFja2dyb3VuZEJydXNoKGJhY2tncm91bmRCcnVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5jZWxscy5nZXRDZWxsKGkpLnZhbHVlID0gdmFsdWVbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAoZ3JvdXBJbmRleCArIDEpICYmIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLmNvbHVtblNwYW4gPSBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09PSAoZ3JvdXBJbmRleCArIDEpICYmIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLmNvbHVtblNwYW4gPSBwZGZHcmlkLmNvbHVtbnMuY291bnQgLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRUZW1wbGF0ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKHRlbXBsYXRlRm4sIGluZGV4LCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY29sdW1uLmZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wbGF0ZUZ1bmN0aW9uOiB0ZW1wbGF0ZUZuLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXg6IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCB9O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFN1bW1hcnlXaXRob3V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3VtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5zdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLmF2ZXJhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmF2ZXJhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm1pbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50cnVlY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnRydWVjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuZmFsc2Vjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmFsc2Vjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuY3VzdG9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jdXN0b207XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0Q29sdW1uUHJvcGVydGllcyA9IGZ1bmN0aW9uIChncmlkQ29sdW1ucywgcGRmR3JpZCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyAocGRmR3JpZC5jb2x1bW5zLmNvdW50IC0gZ3JpZENvbHVtbnMubGVuZ3RoKSA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyaWRDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5nZXRDb2x1bW4oaSArIHN0YXJ0SW5kZXgpLmZvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudChncmlkQ29sdW1uc1tpXS50ZXh0QWxpZ24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmR3JpZC5zdHlsZS5hbGxvd0hvcml6b250YWxPdmVyZmxvdyAmJiBncmlkQ29sdW1uc1tpXS53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5nZXRDb2x1bW4oaSArIHN0YXJ0SW5kZXgpLndpZHRoID0gKGdyaWRDb2x1bW5zW2ldLndpZHRoICogMC43NSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnNldFJlY29yZFRoZW1lU3R5bGUgPSBmdW5jdGlvbiAocm93LCBib3JkZXIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRUZXh0QnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigwLCAwLCAwKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkID0gZnVuY3Rpb24gKGJvcmRlciwgY29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZSwgcGRmR3JpZCwgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyBncm91cEluZGV4IDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBkYXRhU291cmNlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZFJvdyA9IHRoaXMuc2V0UmVjb3JkVGhlbWVTdHlsZShwZGZHcmlkLnJvd3MuYWRkUm93KCksIGJvcmRlcik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2x1bW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zW2NvbHVtbnNbal0uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uc1tqXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5wZGZRdWVyeUNlbGxJbmZvLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkUm93LmNlbGxzLmdldENlbGwoaiArIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlci5mb3JtYXRDZWxsVmFsdWUoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0NlbGxTdHlsZShjZWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQ2VsbFN0eWxlID0gZnVuY3Rpb24gKGNlbGwsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJhY2tncm91bmRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJhY2tDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZEJydXNoID0gbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoYmFja0NvbG9yLnIsIGJhY2tDb2xvci5nLCBiYWNrQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEFsaWdubWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQoYXJncy5zdHlsZS50ZXh0QWxpZ25tZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnZlcnRpY2FsQWxpZ25tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0VmVydGljYWxBbGlnbm1lbnQoYXJncy5zdHlsZS52ZXJ0aWNhbEFsaWdubWVudCwgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dEJydXNoQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0QnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS50ZXh0QnJ1c2ggPSBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcih0ZXh0QnJ1c2hDb2xvci5yLCB0ZXh0QnJ1c2hDb2xvci5nLCB0ZXh0QnJ1c2hDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dFBlbiA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuciwgYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuZywgYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuZm9udEZhbWlseSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuZm9udFNpemUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUudW5kZXJsaW5lICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5zdHJpa2VvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udCA9IHRoaXMuZ2V0Rm9udChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IG5ldyBlajJfcGRmXzEuUGRmQm9yZGVycygpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IGFyZ3Muc3R5bGUuYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IChib3JkZXJXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBib3JkZXJXaWR0aCA9PT0gJ251bWJlcicpID8gKGJvcmRlcldpZHRoICogMC43NSkgOiAodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDE5NiwgMTk2LCAxOTYpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlci5jb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3JkZXJDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS5ib3JkZXIuY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoYm9yZGVyQ29sb3IuciwgYm9yZGVyQ29sb3IuZywgYm9yZGVyQ29sb3IuYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwZW4gPSBuZXcgZWoyX3BkZl8xLlBkZlBlbihjb2xvciwgd2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlci5kYXNoU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwZW4uZGFzaFN0eWxlID0gdGhpcy5nZXREYXNoU3R5bGUoYXJncy5zdHlsZS5ib3JkZXIuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IHBlbjtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJvcmRlcnMgPSBib3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SG9yaXpvbnRhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh0ZXh0QWxpZ24sIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfMy5QZGZTdHJpbmdGb3JtYXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodGV4dEFsaWduKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuSnVzdGlmeTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5MZWZ0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0VmVydGljYWxBbGlnbm1lbnQgPSBmdW5jdGlvbiAodmVydGljYWxBbGlnbiwgZm9ybWF0LCB0ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IG5ldyBlajJfcGRmXzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHRleHRBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodmVydGljYWxBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl80LlBkZlZlcnRpY2FsQWxpZ25tZW50LkJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWlkZGxlJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmxpbmVBbGlnbm1lbnQgPSBlajJfcGRmXzQuUGRmVmVydGljYWxBbGlnbm1lbnQuTWlkZGxlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQubGluZUFsaWdubWVudCA9IGVqMl9wZGZfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRGb250RmFtaWx5ID0gZnVuY3Rpb24gKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZm9udEZhbWlseSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1RpbWVzUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdDb3VyaWVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3ltYm9sJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnWmFwZkRpbmdiYXRzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0Rm9udCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAoY29udGVudC5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnN0eWxlLmZvbnRTaXplICogMC43NSkgOiA5Ljc1O1xuICAgICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSAoY29udGVudC5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQpID8gKHRoaXMuZ2V0Rm9udEZhbWlseShjb250ZW50LnN0eWxlLmZvbnRGYW1pbHkpKSA6IGVqMl9wZGZfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYTtcbiAgICAgICAgICAgIHZhciBmb250U3R5bGUgPSBlajJfcGRmXzIuUGRmRm9udFN0eWxlLlJlZ3VsYXI7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5ib2xkICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS5ib2xkKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfMi5QZGZGb250U3R5bGUuQm9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuaXRhbGljKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfMi5QZGZGb250U3R5bGUuSXRhbGljO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUudW5kZXJsaW5lICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS51bmRlcmxpbmUpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl8yLlBkZkZvbnRTdHlsZS5VbmRlcmxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5zdHJpa2VvdXQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnN0cmlrZW91dCkge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZSB8PSBlajJfcGRmXzIuUGRmRm9udFN0eWxlLlN0cmlrZW91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl8yLlBkZlN0YW5kYXJkRm9udChmb250RmFtaWx5LCBmb250U2l6ZSwgZm9udFN0eWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRQYWdlTnVtYmVyU3R5bGUgPSBmdW5jdGlvbiAocGFnZU51bWJlclR5cGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAocGFnZU51bWJlclR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdMb3dlckxhdGluJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgY2FzZSAnTG93ZXJSb21hbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1VwcGVyTGF0aW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgICAgICBjYXNlICdVcHBlclJvbWFuJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0Q29udGVudEZvcm1hdCA9IGZ1bmN0aW9uIChjb250ZW50LCBmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGNvbnRlbnQuc2l6ZS53aWR0aCAqIDAuNzU7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGNvbnRlbnQuc2l6ZS5oZWlnaHQgKiAwLjc1O1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IG5ldyBlajJfcGRmXzMuUGRmU3RyaW5nRm9ybWF0KGVqMl9wZGZfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQsIGVqMl9wZGZfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5NaWRkbGUpO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmhBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudC5zdHlsZS5oQWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqdXN0aWZ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuSnVzdGlmeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUudkFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudChjb250ZW50LnN0eWxlLnZBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9ybWF0OiBmb3JtYXQsIHNpemU6IG5ldyBlajJfcGRmXzYuU2l6ZUYod2lkdGgsIGhlaWdodCkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VTaXplID0gZnVuY3Rpb24gKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNjEyLCA3OTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ05vdGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig1NDAsIDcyMCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGVnYWwnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig2MTIsIDEwMDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjM4MCwgMzM2OCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTEnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigxNjg0LCAyMzgwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDExOTAsIDE2ODQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoODQyLCAxMTkwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBNSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDQyMSwgNTk1KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBNic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDI5NywgNDIxKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDIxMCwgMjk3KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBOCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDE0OCwgMjEwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBOSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDEwNSwgMTQ4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDI4MzYsIDQwMDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0IxJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjAwNCwgMjgzNik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigxNDE4LCAyMDA0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDEwMDIsIDE0MTgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0I0JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNzA5LCAxMDAyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdCNSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDUwMSwgNzA5KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoQSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDY0OCwgODY0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoQic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDg2NCwgMTI5Nik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigxMjk2LCAxNzI4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoRCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDE3MjgsIDI1OTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0FyY2hFJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjU5MiwgMzQ1Nik7XG4gICAgICAgICAgICAgICAgY2FzZSAnRmxzYSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDYxMiwgOTM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdIYWxmTGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMzk2LCA2MTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xldHRlcjExeDE3JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNzkyLCAxMjI0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdMZWRnZXInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigxMjI0LCA3OTIpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDU5NSwgODQyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXREYXNoU3R5bGUgPSBmdW5jdGlvbiAoZGFzaFN0eWxlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRhc2hTdHlsZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Rhc2gnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBjYXNlICdEb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdEYXNoRG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGFzaERvdERvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBlbkZyb21Db250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBwZW4gPSBuZXcgZWoyX3BkZl8xLlBkZlBlbihuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCAmJiBjb250ZW50LnN0eWxlLnBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVuQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUucGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIHBlbiA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IocGVuQ29sb3IuciwgcGVuQ29sb3IuZywgcGVuQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBlbjtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRCcnVzaEZyb21Db250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBicnVzaCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJydXNoQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUudGV4dEJydXNoQ29sb3IpO1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoYnJ1c2hDb2xvci5yLCBicnVzaENvbG9yLmcsIGJydXNoQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmhleFRvUmdiID0gZnVuY3Rpb24gKGhleCkge1xuICAgICAgICAgICAgaWYgKGhleCA9PT0gbnVsbCB8fCBoZXggPT09ICcnIHx8IGhleC5sZW5ndGggIT09IDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBzZXQgdmFsaWQgaGV4IHZhbHVlIGZvciBjb2xvci4uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGV4ID0gaGV4LnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIHZhciBiaWdpbnQgPSBwYXJzZUludChoZXgsIDE2KTtcbiAgICAgICAgICAgIHZhciByID0gKGJpZ2ludCA+PiAxNikgJiAyNTU7XG4gICAgICAgICAgICB2YXIgZyA9IChiaWdpbnQgPj4gOCkgJiAyNTU7XG4gICAgICAgICAgICB2YXIgYiA9IGJpZ2ludCAmIDI1NTtcbiAgICAgICAgICAgIHJldHVybiB7IHI6IHIsIGc6IGcsIGI6IGIgfTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGRmRXhwb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QZGZFeHBvcnQgPSBQZGZFeHBvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wZGYtZXhwb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfODhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIlxuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbHVtbl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMuanNcbi8vIG1vZHVsZSBpZCA9IDg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9yb3ctcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9yZW5kZXJcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlYWRlcl9yZW5kZXJlcl8xLCBjb250ZW50X3JlbmRlcmVyXzEsIHJvd19yZW5kZXJlcl8xLCBjZWxsX3JlbmRlcmVyXzEsIGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEsIGZpbHRlcl9jZWxsX3JlbmRlcmVyXzEsIHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLCByZW5kZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMiwgaW5kZW50X2NlbGxfcmVuZGVyZXJfMSwgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEsIGJhdGNoX2VkaXRfcmVuZGVyZXJfMSwgZGlhbG9nX2VkaXRfcmVuZGVyZXJfMSwgaW5saW5lX2VkaXRfcmVuZGVyZXJfMSwgZWRpdF9yZW5kZXJlcl8xLCBib29sZWFuX2VkaXRfY2VsbF8xLCBkZWZhdWx0X2VkaXRfY2VsbF8xLCBkcm9wZG93bl9lZGl0X2NlbGxfMSwgbnVtZXJpY19lZGl0X2NlbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaGVhZGVyX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbnRlbnRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocm93X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHJlbmRlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yKTtcbiAgICBfX2V4cG9ydChpbmRlbnRfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChlZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGJvb2xlYW5fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRlZmF1bHRfZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRyb3Bkb3duX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChudW1lcmljX2VkaXRfY2VsbF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5XCIsIFwiLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSwgc2VydmljZV9sb2NhdG9yXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSk7XG4gICAgX19leHBvcnQoc2VydmljZV9sb2NhdG9yXzEpO1xuICAgIF9fZXhwb3J0KHJvd19tb2RlbF9nZW5lcmF0b3JfMSk7XG4gICAgX19leHBvcnQoZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzLmpzXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3BhZ2VyXCIsIFwiLi9leHRlcm5hbC1tZXNzYWdlXCIsIFwiLi9udW1lcmljLWNvbnRhaW5lclwiLCBcIi4vcGFnZXItbWVzc2FnZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHBhZ2VyXzEsIGV4dGVybmFsX21lc3NhZ2VfMSwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChwYWdlcl8xKTtcbiAgICBfX2V4cG9ydChleHRlcm5hbF9tZXNzYWdlXzEpO1xuICAgIF9fZXhwb3J0KG51bWVyaWNfY29udGFpbmVyXzEpO1xuICAgIF9fZXhwb3J0KHBhZ2VyX21lc3NhZ2VfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9"]}