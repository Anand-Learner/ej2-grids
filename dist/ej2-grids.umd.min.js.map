/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 1.0.19
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_43__","__WEBPACK_EXTERNAL_MODULE_44__","__WEBPACK_EXTERNAL_MODULE_60__","__WEBPACK_EXTERNAL_MODULE_70__","__WEBPACK_EXTERNAL_MODULE_77__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","tab","shiftTab","getPersistData","keyEntity","addOnPersist","requiredModules","allowFiltering","push","member","args","filterSettings","serviceLocator","allowSorting","sortSettings","allowPaging","pageSettings","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","groupSettings","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","editSettings","allowAdding","allowDeleting","allowEditing","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","columns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","initialEnd","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","refresh","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","_i","_a","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","updateGridLines","searchSettings","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getDataRows","rows","children","dataRows","getCellFromIndex","rowIndex","getColumnHeaderByIndex","getRowObjectFromUID","uid","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","column","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","isSelected","data","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","selectRows","rowIndexes","clearSelection","selectCell","cellIndex","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","recalcIndentWidth","getAttribute","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","headerRefreshed","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","parentsUntil","touches","checkEdit","preventDefault","click","mode","isEdit","dblclick","display","filterClear","gridElement","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","Component","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","cultureName","intl","Internationalization","culture","getFormatFunction","format","type","getDateFormat","getNumberFormat","getParserFunction","getDateParser","getNumberParser","fromView","toView","result","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","pred","template","document","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","extend","setStyleAttribute","attributes","copied","first","second","exclude","moved","forEach","indexOf","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","getBoundingClientRect","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","cssText","body","clientWidth","removeChild","getRowHeight","rowHeight","table","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","allowResizing","showInColumnChooser","merge","valueFormatter","skeleton","setFormatter","setParser","templateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getDomSetter","disableHtmlEncode","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","updateData","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","data_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","setBusy","dataManager","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","toString","renderEmpty","updateColumnType","record","items","fmtr","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_1","row_1","helper","visualElement","sender","headercelldiv","textContent","lineHeight","dragStart","event","drag","closest","cloneElement","dragStop","drop","droppedElement","setVisible","div","innerDiv","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","panel","headerTable","getColGroup","colgroup","setColGroup","colGroup","tHead","createTable","bodyCell","cellspacing","findHeaderRow","createHeaderContent","thead","rowBody","len_1","cells","updateColGroup","colcount","colHeader","rowRenderer","RowRenderer","headerRow","colDepth","getObjDepth","generateRow","ensureColumns","getHeaderCells","len_2","generateCell","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","colSpan","getCellCnt","Cell","cellType","Row","rowSpan","colIndex","opt","isDataCell","isTemplate","headerTemplate","rowID","idx","displayVal","clen","insertBefore","appendContent","max","depth","checkDepth","cnt","Draggable","dragTarget","distance","abort","Droppable","accept","refreshRow","isChanged","cells_1","cell","cloneNode","rowArgs","cellArgs","attrCopy","isDataRow","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","td","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","class","initDataManager","addRows","removeRows","crudActions","skipPage","clone","columns_1","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","getKey","foreignKeyData","executeQuery","update","url","filterObject","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","row_model_generator_1","group_model_generator_1","rafCallback","generator","getModelGenerator","contentDiv","createContentTable","multiselectable","initializeContentDrop","frag","createDocumentFragment","rowElements","modelData","generateRows","isTR","nodeName","contentPanel","contentTable","testRow","some","canSkip","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","startIndex","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","rowId","oIndex","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","textAlign","summaryRows","single","setTemplate","types","disp","val","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","tabindex","localizer","formatter","getGui","evaluate","innerText","invokeFormatter","refreshCell","refreshTD","elements_1","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","setAttributes","property","buildAttributeFromCell","colindex","hTxtEle","sortEle","gui","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","sort","grabbed","handler","headerTextAlign","alignment","setStateAndProperties","attribute","removeAttribute","name","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","toolTip","aria-expanded","cellRenderMap","getEnumValue","services","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","edit","getSiblingsHeight","getHeightFromDirection","sibling","parseInt","minWidth","maxWidth","getTableWidth","tWidth","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","isToogle","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","span","clearCellSelection","isCellType","selectedCell","currentIndex","isCellSelected","isUpdate","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","min","cellIndexes","stIndex","edIndex","temp","cellSelectionMode","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","focus","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","clickHandler","keyPressHandler","popUpClickHandler","rowCellSelectionHandler","showPopup","checkScroll","downArrowKey","upArrowKey","rightArrowKey","leftArrowKey","homeKey","endKey","ctrlHomeKey","ctrlEndKey","shiftDownKey","shiftUpKey","shiftRightKey","shiftLeftKey","scrollElem","firstElementChild","scrollTop","checkVisible","st","scrollY","innerHeight","applyDownUpKey","cond1","cond2","applyUpDown","cIndex","preSelectedCellIndex","applyRightLeftKey","key1","key2","cond","isCellHide","cellIndex_1","rowElement","applyHomeEndKey","applyShiftLeftRightKey","applyCtrlHomeEndKey","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","info","onContentScroll","scrollTarget","isHeader","scrollLeft","isFooter","scrollHeight","clientHeight","css","overflowY","isPrinting","printWindow","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","getTemplate","ej2_buttons_1","ej2_popups_1","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","unWireEvents","hideDialog","renderDlgContent","targetElement","dlgObj","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","maxHeight","elementVisible","newpos","calculateRelativeBasedPosition","X","Y","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","dlgDiv","tarElement","Dialog","showCloseIcon","closeOnEscape","getElementById","buttons","confirmDlgBtnClick","buttonModel","isPrimary","clearActions","animationSettings","effect","appendTo","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","params","dialogInstance","stateColumns","state","colUid","replace","currentCol","checkstatecolumn","targetEle","uncheckColumn","checked","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","searchElement","columnChooserManualSearch","gdCol","ulElement","renderCheckbox","cclist","hideColState","showColState","checkBoxObj","cclabe","cccheckboxlist","CheckBox","label","change","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","Group","draggableType","aria","groupColumn","contentRefresh","dropArea","ungroupColumn","enableAfterRender","refreshSortIcons","dataRow","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","isExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","updateModel","addColToGroupDrop","JSON","parse","stringify","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","aria-label","title","showUngroupButton","isRemove","headers","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","Sort","isModelChanged","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","enableSortMultiTouch","showPopUp","filterElement","updateAriaAttr","pager_1","external_message_1","Pager","ExternalMessage","Page","pagerObj","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","canSkipAction","keyActions","el","activeElement","enableExternalMessage","externalMessage","appendToElement","handlers","ready","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","containerModule","NumericContainer","pagerMessageModule","PagerMessage","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","getLocalizedLabel","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","match","hash","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","pageCount","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","filter_cell_renderer_1","Filter","values","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","split","updateCrossIcon","processFilter","targetText","previousElementSibling","disabled","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","validateFilterValue","getOperator","substring","isNaN","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","filterBarTemplate","templateRead","read","templateWrite","write","resizeClassList","suppress","icon","cursor","lines","Resize","tapped","isDblClk","fName","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","text","tag","myTableDiv","mySubDiv","myTable","myTr","offsetWidthValue","setHandlerHeight","getResizeHandlers","ele","touchStartEvent","callAutoFit","getTargetColumn","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","setTimeout","timeoutHandler","test","userAgent","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","cliRectBase","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","DetailRow","toogleExpandcollapse","nextRow","isDetailRow","detailRow","detailCell","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","getInjectedModules","injectedModues","gridElem","nextSibling","detailElement","getTDfromIndex","collapse","ej2_navigations_1","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","getItem","itemObject","itemName","isEnable","items_1","gID","originalEvent","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","callback","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","fn","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","setProperties","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","container","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","clear","gLen","n","currentFirst","iterateGroup","oRow","res","shift","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","ej2_popups_2","ej2_inputs_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","booleanedit","BooleanEditCell","default","DefaultEditCell","editType","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","updateColTypeObj","EditRender","createAlertDlg","createConfirmDlg","tapEvent","navigator","showDialog","alertDObj","refreshToolbar","showConfirmDialog","dialogObj","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","parseFloat","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","form","editedData","inputs","setValue","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","tooltip","Tooltip","opensOn","animation","close","inputName","tObj","status","isInline","NumericTextBox","rowData","enabled","floatLabelType","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","setSelectionRange","tArgs","isInput","tagName","getEditElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","btnClick","dataCell","lbl","for","ej2_dropdowns_1","DropDownList","select","ddActionComplete","popupHeight","Input","createInput","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","primaryKey","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","rowObj","defaultValue","cellDetails","setCellIdx","validateFormObj","editNextCell","editPrevCell","editCellFromIndex","reFocusOnError","isAddRow","findNextEditableCell","findPrevEditableCell","isDirty","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","rows_1","addRowObject","getIndexFromData","defaultData","getDefaultData","checkNPCell","dValues","number","string","boolean","date","datetime","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","keys_1","cIdx","isForceSave","previousValue","valComplete","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-dropdowns\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-dropdowns\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_43__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_60__, __WEBPACK_EXTERNAL_MODULE_70__, __WEBPACK_EXTERNAL_MODULE_77__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(86)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(45), __webpack_require__(83), __webpack_require__(84), __webpack_require__(85)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(13), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(10), __webpack_require__(13), __webpack_require__(31), __webpack_require__(32), __webpack_require__(4), __webpack_require__(33), __webpack_require__(34), __webpack_require__(23), __webpack_require__(35), __webpack_require__(36), __webpack_require__(37), __webpack_require__(38), __webpack_require__(39), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab'\n\t            };\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var keyEntity = ['allowPaging', 'pageSettings', 'allowSorting', 'sortSettings', 'allowSelection',\n\t                'selectionSettings', 'allowFiltering', 'filterSettings', 'gridLines',\n\t                'created', 'destroyed', 'load', 'actionBegin', 'actionComplete', 'actionFailure', 'rowSelecting', 'rowSelected',\n\t                'columnSelecting', 'columnSelected', 'cellSelecting', 'cellSelected', 'dataBound', 'groupSettings', 'columns', 'allowKeyboard',\n\t                'enableAltRow', 'enableHover', 'allowTextWrap', 'textWrapSettings', 'searchSettings', 'selectedRowIndex', 'allowReordering',\n\t                'allowRowDragAndDrop', 'rowDropSettings', 'allowGrouping', 'height', 'width', 'rowTemplate', 'printMode',\n\t                'rowDataBound', 'queryCellInfo', 'rowDeselecting', 'rowDeselected', 'cellDeselecting', 'cellDeselected',\n\t                'columnDragStart', 'columnDrag', 'columnDrop', 'printComplete', 'beforePrint', 'detailDataBound', 'detailTemplate',\n\t                'childGrid', 'queryString', 'toolbar', 'toolbarClick', 'editSettings',\n\t                'batchAdd', 'batchDelete', 'beforeBatchAdd', 'beforeBatchDelete',\n\t                'beforeBatchSave', 'beginEdit', 'cellEdit', 'cellSave', 'endAdd', 'endDelete', 'endEdit', 'beforeDataBound',\n\t                'beforeOpenColumnChooser', 'allowResizing'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, {\n\t                            module: 'scroll',\n\t                            properties: { width: newProp.width, height: newProp.height }\n\t                        });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.contentModule.getRows().filter(function (row) { return row.isSelected; })\n\t                .map(function (m) { return m.data; });\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index) {\n\t            this.selectionModule.selectRow(index);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex) {\n\t            this.selectionModule.selectCell(cellIndex);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.addEventListener(events.dataBound, this.refreshMediaCol.bind(this));\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.refreshMediaCol);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell'));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(4), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.allowEditing = true;\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.template) {\n\t                this.templateFn = util_1.templateCompiler(this.template);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(13), __webpack_require__(16), __webpack_require__(9), __webpack_require__(6), __webpack_require__(17), __webpack_require__(11), __webpack_require__(21), __webpack_require__(22), __webpack_require__(24), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(28), __webpack_require__(29), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t            }\n\t            dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                .catch(function (e) { return _this.dataManagerFailure(e); });\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                    if (typeof (columns[i].format) === 'string') {\n\t                        switch (columns[i].type) {\n\t                            case 'date':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'datetime':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'number':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ format: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ format: columns[i].format }));\n\t                                break;\n\t                        }\n\t                    }\n\t                    else if (!columns[i].format && columns[i].type === 'number') {\n\t                        columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(e.result[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(12), __webpack_require__(14), __webpack_require__(15), __webpack_require__(9), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                visualElement.textContent = headercelldiv ?\n\t                    gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.innerHTML;\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = findHeaderRow.rows;\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(6), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t            }\n\t            var node = this.parent.getContent().querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                tr.appendChild(td);\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column }));\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent) {\n\t            this.parent = parent;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                    var col = columns_1[_i];\n\t                    var sType = gObj.getColumnByField(col.field).type;\n\t                    if (sType !== 'date' && sType !== 'datetime') {\n\t                        query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                    }\n\t                    else {\n\t                        query.where(this.getDatePredicate(col));\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    query.group(columns[i]);\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                prevObj.operator = 'greaterthan';\n\t                nextObj.operator = 'lessthan';\n\t            }\n\t            else {\n\t                prevObj.operator = 'lessthanorequal';\n\t                nextObj.operator = 'greaterthanorequal';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            return filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.indexes.indexOf(index) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function () {\n\t                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                _this.parent.notify(events.contentReady, {});\n\t                _this.parent.trigger(events.dataBound, {});\n\t                if (_this.args) {\n\t                    var action = (_this.args.requestType || '').toLowerCase() + '-complete';\n\t                    _this.parent.notify(action, _this.args);\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var tbody = this.getTable().querySelector('tbody');\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]));\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                frag.appendChild(tr);\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                _this.appendContent(tbody, frag, args);\n\t            }, this.rafCallback);\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15), __webpack_require__(13), __webpack_require__(14), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, undefined, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan\n\t            };\n\t            if (opt.isDataCell) {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(5), __webpack_require__(13), __webpack_require__(18), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                visibles = captionCells.cells.filter(function (cell) { return cell.visible; });\n\t                visibles = visibles.slice(groupedLen + 1, visibles.length);\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(8), __webpack_require__(5), __webpack_require__(6), __webpack_require__(13), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && group.aggregates[key] ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data));\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + (value === 'true' ? 'checked' : '') + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes)) {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(21), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            var value = column.headerText;\n\t            var headerText = this.hTxtEle.cloneNode();\n\t            headerText[column.getDomSetter()] = value;\n\t            innerDIV.appendChild(headerText);\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var value = this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing) {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol = header.querySelector('colgroup').children[index];\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t                content.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t            this.parent.getHeaderTable().style.width = tWidth;\n\t            this.parent.getContentTable().style.width = tWidth;\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit;\n\t        };\n\t        Selection.prototype.selectRow = function (index) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            var isToogle = index === this.prevRowIndex && isRowSelected;\n\t            if (!isToogle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToogle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToogle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t            if (span.classList.contains('e-rowselect')) {\n\t                span.classList.remove('e-spanclicked');\n\t            }\n\t            this.clearRowSelection();\n\t            this.clearCellSelection();\n\t            this.enableSelectMultiTouch = false;\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, cellIndex.cellIndex);\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            var isUpdate = !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isUpdate) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isUpdate) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isUpdate) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : gObj.getColumns().length - 1;\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex);\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            cell.focus();\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            if (target.classList.contains('e-rowcell')) {\n\t                this.target = target;\n\t                this.rowCellSelectionHandler(parseInt(target.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target.getAttribute('aria-colindex'), 10));\n\t                if (ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.keyPressHandler = function (e) {\n\t            var checkScroll;\n\t            var preventDefault;\n\t            switch (e.action) {\n\t                case 'downArrow':\n\t                    checkScroll = true;\n\t                    this.downArrowKey();\n\t                    break;\n\t                case 'upArrow':\n\t                    checkScroll = true;\n\t                    this.upArrowKey();\n\t                    break;\n\t                case 'rightArrow':\n\t                    preventDefault = true;\n\t                    this.rightArrowKey();\n\t                    break;\n\t                case 'leftArrow':\n\t                    preventDefault = true;\n\t                    this.leftArrowKey();\n\t                    break;\n\t                case 'home':\n\t                    preventDefault = true;\n\t                    this.homeKey();\n\t                    break;\n\t                case 'end':\n\t                    preventDefault = true;\n\t                    this.endKey();\n\t                    break;\n\t                case 'ctrlHome':\n\t                    preventDefault = true;\n\t                    this.ctrlHomeKey();\n\t                    break;\n\t                case 'ctrlEnd':\n\t                    preventDefault = true;\n\t                    this.ctrlEndKey();\n\t                    break;\n\t                case 'shiftDown':\n\t                    this.shiftDownKey();\n\t                    break;\n\t                case 'shiftUp':\n\t                    this.shiftUpKey();\n\t                    break;\n\t                case 'shiftRight':\n\t                    this.shiftRightKey();\n\t                    break;\n\t                case 'shiftLeft':\n\t                    this.shiftLeftKey();\n\t                    break;\n\t                case 'escape':\n\t                    preventDefault = true;\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    preventDefault = true;\n\t                    this.ctrlPlusA();\n\t                    break;\n\t            }\n\t            if (checkScroll) {\n\t                var scrollElem = this.parent.getContent().firstElementChild;\n\t                if (this.selectedRecords.length || this.selectedRowCellIndexes.length) {\n\t                    var row = this.selectedRecords.length ? this.selectedRecords[0] :\n\t                        this.parent.getRowByIndex(this.selectedRowCellIndexes[0].rowIndex);\n\t                    var height = row.offsetHeight;\n\t                    var rowIndex = row.rowIndex;\n\t                    scrollElem.scrollTop = scrollElem.scrollTop + (e.action === 'downArrow' ? height : height * -1);\n\t                    if (this.checkVisible(row) &&\n\t                        rowIndex !== 0 && this.parent.getContentTable().querySelector('tbody').children.length !== rowIndex + 1) {\n\t                        e.preventDefault();\n\t                    }\n\t                }\n\t            }\n\t            if (preventDefault) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Selection.prototype.checkVisible = function (element) {\n\t            var st = window.scrollY;\n\t            var y = element.getBoundingClientRect().top + st;\n\t            return y + 36 < (window.innerHeight + st) - this.getRowHeight(element) && y > (st - element.offsetHeight) +\n\t                this.getRowHeight(element);\n\t        };\n\t        Selection.prototype.getRowHeight = function (element) {\n\t            return element.getBoundingClientRect().height;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.downArrowKey = function () {\n\t            this.applyDownUpKey(1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex + 1 < this.parent.getRows().length, !ej2_base_2.isUndefined(this.prevECIdxs) &&\n\t                this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length);\n\t        };\n\t        Selection.prototype.upArrowKey = function () {\n\t            this.applyDownUpKey(-1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex - 1 > -1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.rowIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (key, cond1, cond2) {\n\t            var gObj = this.parent;\n\t            if (this.isRowType() && cond1) {\n\t                this.selectRow(gObj.selectedRowIndex + key);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType() && cond2) {\n\t                this.selectCell({ rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.rightArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(1, 0, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.leftArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (key1, key2, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            var rowIndex;\n\t            if (!ej2_base_2.isNullOrUndefined(this.prevECIdxs)) {\n\t                cellIndex = this.prevECIdxs.cellIndex;\n\t                rowIndex = this.prevECIdxs.rowIndex;\n\t            }\n\t            if (this.isCellType()) {\n\t                if (cond && this.prevECIdxs.cellIndex + key1 > -1 &&\n\t                    this.prevECIdxs.cellIndex + key1 < this.parent.getColumns().length) {\n\t                    cellIndex = this.prevECIdxs.cellIndex + key1;\n\t                    rowIndex = this.prevECIdxs.rowIndex;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t                }\n\t                else if (this.prevECIdxs.rowIndex + key1 > -1 &&\n\t                    this.prevECIdxs.rowIndex + key1 < this.parent.getRows().length) {\n\t                    cellIndex = key2;\n\t                    rowIndex = this.prevECIdxs.rowIndex + key1;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t                }\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: cellIndex })) {\n\t                    if (!((cellIndex === 0 && rowIndex === 0) ||\n\t                        (cellIndex === gObj.getColumns().length - 1 && rowIndex === gObj.getRows().length - 1))) {\n\t                        this.applyRightLeftKey(key1, key2, cond);\n\t                    }\n\t                    else {\n\t                        this.selectCell(this.preSelectedCellIndex);\n\t                    }\n\t                }\n\t            }\n\t            else if (this.isRowType()) {\n\t                var cellIndex_1 = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t                var rowElement = ej2_base_3.closest(this.target, 'tr');\n\t                if (cellIndex_1 + key1 > -1 && cellIndex_1 + key1 < this.parent.getColumns().length) {\n\t                    var cell = rowElement.querySelectorAll('.e-rowcell')[cellIndex_1 + key1];\n\t                    if (cell) {\n\t                        if (!cell.classList.contains('e-hide')) {\n\t                            this.addAttribute(cell);\n\t                        }\n\t                        else {\n\t                            key1 += key1;\n\t                            this.applyRightLeftKey(key1, key2, cond);\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.addAttribute(this.target);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.homeKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: 0 });\n\t        };\n\t        Selection.prototype.endKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: this.parent.getColumns().length - 1 });\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (key) {\n\t            if (this.isCellType()) {\n\t                this.selectCell(key);\n\t                if (this.isCellHide(key)) {\n\t                    if (key.cellIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(key.rowIndex, key.cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? this.prevRowIndex + 1 :\n\t                        (gObj.selectedRowIndex + 1 < this.parent.getRows().length ?\n\t                            gObj.selectedRowIndex + 1 : gObj.selectedRowIndex);\n\t                    if (endIndex < this.parent.getRows().length) {\n\t                        this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                        this.applyUpDown(endIndex);\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectRow(0);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevCIdxs)) {\n\t                    if (this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length) {\n\t                        this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex + 1, cellIndex: this.prevECIdxs.cellIndex });\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: 1, cellIndex: 0 });\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftUpKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !ej2_base_2.isUndefined(this.prevRowIndex) && !this.isSingleSel()) {\n\t                var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? (this.prevRowIndex - 1 > -1 ? (this.prevRowIndex - 1) : 0) :\n\t                    ((gObj.selectedRowIndex - 1) > -1 ? gObj.selectedRowIndex - 1 : gObj.selectedRowIndex);\n\t                this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                this.applyUpDown(endIndex);\n\t            }\n\t            if (this.isCellType() && !ej2_base_2.isUndefined(this.prevECIdxs) && (this.prevECIdxs.rowIndex - 1) > -1 && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex - 1, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftLeftKey = function () {\n\t            this.applyShiftLeftRightKey(-1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.shiftRightKey = function () {\n\t            this.applyShiftLeftRightKey(1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (key, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (cond) {\n\t                    cellIndex = { rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key };\n\t                    this.selectCellsByRange(this.prevCIdxs, {\n\t                        rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key\n\t                    });\n\t                }\n\t                else if (!this.isSingleSel()) {\n\t                    if (this.selectionSettings.cellSelectionMode === 'flow' &&\n\t                        (key > 0 ? this.prevECIdxs.rowIndex + 1 < this.parent.pageSettings.pageSize : this.prevECIdxs.rowIndex - 1 > -1)) {\n\t                        cellIndex = { rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1 };\n\t                        this.selectCellsByRange(this.prevCIdxs, {\n\t                            rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1\n\t                        });\n\t                    }\n\t                }\n\t                if (!ej2_base_2.isNullOrUndefined(cellIndex) && this.isCellHide(cellIndex) && !((cellIndex.rowIndex === 0 && cellIndex.cellIndex === 0) ||\n\t                    (cellIndex.rowIndex === gObj.getRows().length - 1 && cellIndex.cellIndex === gObj.getColumns().length))) {\n\t                    this.applyShiftLeftRightKey(key, cellIndex.cellIndex > 0);\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.ctrlHomeKey = function () {\n\t            this.applyCtrlHomeEndKey(0, 0);\n\t        };\n\t        Selection.prototype.ctrlEndKey = function () {\n\t            this.applyCtrlHomeEndKey(this.parent.getRows().length - 1, this.parent.getColumns().length - 1);\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, colIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, colIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: colIndex });\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: colIndex })) {\n\t                    if (colIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                for (var i = 0, len = cells.length; i < len; i++) {\n\t                    if (isAdd) {\n\t                        ej2_base_3.classList(cells[i], args.slice(), []);\n\t                        cells[i].setAttribute('aria-selected', 'true');\n\t                    }\n\t                    else {\n\t                        ej2_base_3.classList(cells[i], [], args.slice());\n\t                        cells[i].removeAttribute('aria-selected');\n\t                    }\n\t                }\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.isCellHide = function (cellIndex) {\n\t            return !this.parent.getColumns()[cellIndex.cellIndex].visible;\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(34)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var content = this.parent.getContent().firstChild;\n\t            content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(this.footerTemplate, helper);\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(this.groupFooterTemplate, helper);\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(this.groupCaptionTemplate, helper);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(43), __webpack_require__(9), __webpack_require__(44)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, ej2_buttons_1, events, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                        this.isDlgOpen = true;\n\t                        return;\n\t                    }\n\t                }\n\t                else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                    this.columnChooserSearch('');\n\t                    this.removeCancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                    this.dlgObj.hide();\n\t                    this.isDlgOpen = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(target.closest('.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + target.closest('.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (this.parent.element.classList.contains('e-device')) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + target.closest('.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t                this.wireEvents();\n\t            }\n\t            else {\n\t                this.unWireEvents();\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', function () {\n\t                ccsearchele.parentElement.classList.add('e-input-focus');\n\t            });\n\t            ccsearchele.addEventListener('blur', function () {\n\t                ccsearchele.parentElement.classList.remove('e-input-focus');\n\t            });\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index].replace('e-cc', '');\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.unWireEvents();\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (e) {\n\t            var targetEle = e.event.target;\n\t            var uncheckColumn = targetEle.id;\n\t            if (e.checked) {\n\t                if (this.hideColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.showColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.showColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.hideColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var column = this.parent.getColumnByUid(element.id.replace('e-cc', ''));\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                var cclabe = ej2_base_1.createElement('label', { className: 'e-cc' });\n\t                var cccheckboxlist = ej2_base_1.createElement('input', {\n\t                    className: 'e-cc e-cc-chbox ',\n\t                    id: 'e-cc' + column.uid, attrs: { type: 'checkbox' }\n\t                });\n\t                cclabe.appendChild(cccheckboxlist);\n\t                hideColState = this.hideColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                checkBoxObj = new ej2_buttons_1.CheckBox({ label: column.headerText, checked: true, change: this.checkstatecolumn.bind(this) });\n\t                if ((column.visible && !hideColState) || showColState) {\n\t                    checkBoxObj.checked = true;\n\t                }\n\t                else {\n\t                    checkBoxObj.checked = false;\n\t                }\n\t                checkBoxObj.appendTo(cccheckboxlist);\n\t                cclist.appendChild(cclabe);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t            var chele = this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0];\n\t            chele.focus();\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_43__;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_44__;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16), __webpack_require__(47), __webpack_require__(48), __webpack_require__(36), __webpack_require__(53), __webpack_require__(37), __webpack_require__(39), __webpack_require__(55), __webpack_require__(56), __webpack_require__(57), __webpack_require__(46), __webpack_require__(40), __webpack_require__(58), __webpack_require__(59), __webpack_require__(61), __webpack_require__(64), __webpack_require__(68), __webpack_require__(81), __webpack_require__(79), __webpack_require__(80), __webpack_require__(82), __webpack_require__(42)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    trgt.className = 'e-recordplusexpand';\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    trgt.className = 'e-recordpluscollapse';\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    toExpand[i].className = 'e-recordpluscollapse';\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.headerDrop = function (e) {\n\t            if (!e.uid) {\n\t                return;\n\t            }\n\t            var column = this.parent.getColumnByUid(e.uid);\n\t            this.ungroupColumn(column.field);\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-grouptext', innerHTML: column.headerText,\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                            ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                        }\n\t                        if (!isRemove) {\n\t                            headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                className: 'e-grptogglebtn e-icons ' +\n\t                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                            }));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false) {\n\t                return;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = this.parent.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler')) {\n\t                var gObj = this.parent;\n\t                var field = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid')).field;\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (!e.shiftKey) {\n\t                    this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t                }\n\t                else {\n\t                    this.removeSortColumn(field);\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.showPopUp(e);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target)) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(49), __webpack_require__(52), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t            var links = numericContainer.querySelectorAll('a');\n\t            for (var i = 0; i < links.length; i++) {\n\t                if (this.parent.getContentTable()) {\n\t                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                }\n\t            }\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t            classList.forEach(function (value) {\n\t                var element = _this.element.querySelector(value);\n\t                if (_this.parent.getContentTable()) {\n\t                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                }\n\t            });\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.isForceCancel = true;\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerObj.destroy();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            this.initLocalization();\n\t            this.updateRTL();\n\t            this.totalRecordsCount = this.totalRecordsCount || 0;\n\t            this.renderFirstPrevDivForDevice();\n\t            this.containerModule.render();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.render();\n\t            }\n\t            this.renderNextLastDivForDevice();\n\t            this.addAriaLabel();\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.render();\n\t            }\n\t            this.refresh();\n\t            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['enableExternalMessage', 'enablePagerMessage', 'currentPage', 'enableQueryString',\n\t                'pageSize', 'pageCount', 'totalRecordsCount', 'externalMessage', 'customText', 'click', 'created'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            this.updateRTL();\n\t            this.containerModule.refresh();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.refresh();\n\t            }\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            pagerObj.totalPages = (pagerObj.totalRecordsCount % pagerObj.pageSize === 0) ? (pagerObj.totalRecordsCount / pagerObj.pageSize) :\n\t                (parseInt((pagerObj.totalRecordsCount / pagerObj.pageSize).toString(), 10) + 1);\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(5), __webpack_require__(7), __webpack_require__(9), __webpack_require__(13), __webpack_require__(12), __webpack_require__(14), __webpack_require__(15), __webpack_require__(54)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_base_3, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            if (gObj.columns.length) {\n\t                var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter);\n\t                var row = void 0;\n\t                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                this.l10n = this.serviceLocator.getService('localization');\n\t                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                rowRenderer.element = ej2_base_3.createElement('tr', { className: 'e-filterbar' });\n\t                row = this.generateRow();\n\t                row.data = this.values;\n\t                this.element = rowRenderer.render(row, gObj.getColumns());\n\t                this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                var detail = this.element.querySelector('.e-detailheadercell');\n\t                if (detail) {\n\t                    detail.className = 'e-filterbarcell e-mastercell';\n\t                }\n\t                this.wireEvents();\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            ej2_base_3.remove(this.element);\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            filterCell = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            if (!ej2_base_2.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = filterValue.toString();\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (!(isClearFilterBar === false)) {\n\t                        this.element.querySelector('#' + cols[i].field + '_filterBarcell').value = '';\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    this.parent.getColumnHeaderByField(field).removeAttribute('aria-filtered');\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (ej2_base_3.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            var gObj = this.parent;\n\t            var columns = this.filterSettings.columns;\n\t            var column;\n\t            if (!this.filterSettings.showFilterBarStatus) {\n\t                return;\n\t            }\n\t            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                this.filterStatusMsg = '';\n\t                for (var index = 0; index < columns.length; index++) {\n\t                    column = gObj.getColumnByField(columns[index].field);\n\t                    if (index) {\n\t                        this.filterStatusMsg += ' && ';\n\t                    }\n\t                    this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                }\n\t            }\n\t            if (gObj.allowPaging) {\n\t                gObj.updateExternalMessage(this.filterStatusMsg);\n\t            }\n\t            this.filterStatusMsg = '';\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_2.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_2.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                node.classList.add('e-fltrtemp');\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-fltrtempdiv'\n\t                });\n\t                if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        attrs: { type: 'search', title: column.headerText }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t                else {\n\t                    var args = { column: column };\n\t                    var temp = column.filterBarTemplate.create;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_1.getValue(temp, window);\n\t                    }\n\t                    input = temp(args);\n\t                    if (typeof input === 'string') {\n\t                        var div = ej2_base_2.createElement('div');\n\t                        div.innerHTML = input;\n\t                        input = div.firstChild;\n\t                    }\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        title: column.headerText,\n\t                        id: column.field + '_filterBarcell',\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-filterdiv e-fltrinputdiv'\n\t                });\n\t                input = ej2_base_2.createElement('input', {\n\t                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                    attrs: {\n\t                        type: 'search', title: column.headerText + cell.attributes.title,\n\t                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                    }\n\t                });\n\t                innerDIV.appendChild(input);\n\t                innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                    attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                }));\n\t            }\n\t            if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                input.setAttribute('disabled', 'true');\n\t                input.classList.add('e-disable');\n\t            }\n\t            if (!column.visible) {\n\t                node.classList.add('e-hide');\n\t            }\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                var templateRead = column.filterBarTemplate.read;\n\t                var templateWrite = column.filterBarTemplate.write;\n\t                var args = { element: input, column: column };\n\t                if (typeof templateRead === 'string') {\n\t                    templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                }\n\t                if (typeof templateWrite === 'string') {\n\t                    templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                }\n\t                templateWrite.call(this, args);\n\t            }\n\t            this.appendHtml(node, innerDIV);\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(34), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (!(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.updateColGroup(this.column);\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.updateColGroup = function (column) {\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.uid === column.uid) {\n\t                    col.width = column.width;\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderTable().querySelectorAll('tr'));\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function () {\n\t            var ele = this.parent.getContent().firstChild;\n\t            return ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    !e.sender.target.classList.contains('e-selectionbackground')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            grid.appendTo(gridElem);\n\t                            detailCell.appendChild(gridElem);\n\t                        }\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(60), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    this.element = util_1.templateCompiler(this.parent.toolbarTemplate)()[1];\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                typeof (item) === 'string' ? items.push(this.getItemObject(item)) : items.push(this.getItem(item));\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            if (item) {\n\t                ej2_base_1.extend(item, item, itemObject);\n\t            }\n\t            else {\n\t                item = itemObject;\n\t            }\n\t            return item;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_60__;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(9), __webpack_require__(62), __webpack_require__(63), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(17), __webpack_require__(12), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing) {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var fn = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, fn(data[column.columnName]));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(9), __webpack_require__(13), __webpack_require__(65), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(6), __webpack_require__(9), __webpack_require__(13), __webpack_require__(17), __webpack_require__(11), __webpack_require__(66), __webpack_require__(67)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if (currentFirst.isDataRow || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(71), __webpack_require__(75), __webpack_require__(76), __webpack_require__(69), __webpack_require__(78), __webpack_require__(79), __webpack_require__(81), __webpack_require__(82), __webpack_require__(44), __webpack_require__(6), __webpack_require__(44), __webpack_require__(70)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_popups_2, ej2_inputs_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell,\n\t                'numericedit': numeric_edit_cell_1.NumericEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'default': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'default'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !ej2_base_4.isNullOrUndefined(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.element.getElementsByClassName('e-tooltip'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                elem.ej2_instances[0].destroy();\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.parent.addEventListener(events.actionBegin, this.onActionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t            this.parent.removeEventListener(events.actionBegin, this.onActionBegin);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            if (e.requestType !== 'add' && e.requestType !== 'beginEdit' && e.requestType !== 'delete') {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && this.formObj && !this.formObj.isDestroyed && !e.cancel) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.dialogObj.destroy();\n\t            this.alertDObj.destroy();\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var td = util_1.parentsUntil(inputElement, 'e-rowcell');\n\t                if (!td.ej2_instances || !td.ej2_instances.length) {\n\t                    var tooltip = new ej2_popups_2.Tooltip({\n\t                        opensOn: 'custom', content: error, position: 'bottom center', cssClass: 'e-griderror',\n\t                        animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n\t                    });\n\t                    tooltip.appendTo(td);\n\t                    tooltip.open(td);\n\t                }\n\t                else {\n\t                    td.ej2_instances[0].content = error;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var elem = util_1.parentsUntil(document.getElementById(this.parent.element.id + args.inputName), 'e-rowcell');\n\t                if (elem && elem.ej2_instances && elem.ej2_instances.length) {\n\t                    var tObj = elem.ej2_instances[0];\n\t                    if (args.status === 'failure') {\n\t                        tObj.open(util_1.parentsUntil(args.element, 'e-rowcell'));\n\t                    }\n\t                    else {\n\t                        tObj.close();\n\t                    }\n\t                    tObj.refresh();\n\t                }\n\t            }\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(70), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_70__;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(72), __webpack_require__(73), __webpack_require__(74), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.edit.write({ rowData: args.rowData, element: cell, column: col, requestType: args.requestType });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem) {\n\t            elem.focus();\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var td_1 = ej2_base_1.createElement('td', {\n\t                    className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : '') }\n\t                });\n\t                td_1.appendChild(elements[col.uid]);\n\t                if (col.editType === 'booleanedit') {\n\t                    td_1.classList.add('e-boolcell');\n\t                }\n\t                tr.appendChild(td_1);\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(44), __webpack_require__(5), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true,\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                if (cols[i].editType === 'booleanedit') {\n\t                    var elem = dataCell.appendChild(elements[cols[i].uid]);\n\t                    var lbl = ej2_base_1.createElement('label', { className: 'e-noselect', attrs: { for: elem.id, style: ej2_base_1.Browser.isDevice ? '' : 'vertical-align: top;' } });\n\t                    lbl.innerHTML = cols[i].headerText;\n\t                    dataCell.appendChild(elem);\n\t                    dataCell.appendChild(lbl);\n\t                }\n\t                else {\n\t                    dataCell.appendChild(elements[cols[i].uid]);\n\t                }\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-boolcell', attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t            if (!util_1.isEditable(args.column, args.requestType, args.element)) {\n\t                input.setAttribute('disabled', 'true');\n\t            }\n\t            if (args.value) {\n\t                input.checked = true;\n\t            }\n\t            return input;\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            args.element.style.width = 'auto';\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(77), __webpack_require__(7), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_77__;\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(70), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(80)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    this.parent.selectRow(0);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.parent.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.element.focus();\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'add', type: events.actionBegin, data: data\n\t                });\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            gObj.isEdit = false;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12), __webpack_require__(21), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_renderer_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBound);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = e.target;\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if ((util_1.parentsUntil(target, 'e-rowcell')) && tr) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(util_1.parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.keyPressHandler = function (e) {\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                this.saveCell();\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.action) {\n\t                    case 'tab':\n\t                        if (isEdit) {\n\t                            this.editNextCell();\n\t                        }\n\t                        break;\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editPrevCell();\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                        e.preventDefault();\n\t                        if (isEdit && this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                            this.editCell(this.cellDetails.rowIndex + 1, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t                        break;\n\t                }\n\t                if (this.parent.isEdit || !(this.cellDetails.cellIndex === 0 && this.cellDetails.rowIndex === 0) ||\n\t                    !(this.cellDetails.rowIndex === this.parent.getDataRows().length &&\n\t                        this.cellDetails.cellIndex === this.parent.columns.length - 1)) {\n\t                    e.preventDefault();\n\t                }\n\t            }\n\t            this.reFocusOnError(e);\n\t        };\n\t        BatchEdit.prototype.reFocusOnError = function (e) {\n\t            if (this.validateFormObj() && (e.action === 'tab' || e.action === 'shiftTab')) {\n\t                e.target.focus();\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editNextCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findNextEditableCell(this.cellDetails.cellIndex + 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                this.cellDetails.rowIndex++;\n\t                this.cellDetails.cellIndex = this.findNextEditableCell(0, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editPrevCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findPrevEditableCell(this.cellDetails.cellIndex - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex - 1 > -1) {\n\t                this.cellDetails.rowIndex--;\n\t                this.cellDetails.cellIndex = this.findPrevEditableCell(this.parent.columns.length - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = gObj.contentModule.getRows();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.contentModule.getRows();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.contentModule.getRows();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.contentModule.getRows().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            gObj.element.focus();\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.findPrevEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            for (var i = columnIndex; i > -1; i--) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var args = {\n\t                    cell: row.cells[this.getCellIdx(col.uid)], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey,\n\t                };\n\t                this.setCellIdx(args.cell);\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.clearSelection();\n\t                gObj.selectRow(this.cellDetails.rowIndex);\n\t                gObj.isEdit = true;\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_2.classList(tr, [], ['e-editedrow', 'e-batchrow']);\n\t            args.cell.classList.remove('e-editedbatchcell');\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        BatchEdit.prototype.valComplete = function (args) {\n\t            var edit = this.parent.editModule;\n\t            edit.validationComplete(args);\n\t        };\n\t        BatchEdit.prototype.customPlacement = function (inputElement, error) {\n\t            var edit = this.parent.editModule;\n\t            edit.valErrorPlacement(inputElement, error);\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(80)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(17), __webpack_require__(12), __webpack_require__(21), __webpack_require__(22), __webpack_require__(54), __webpack_require__(24), __webpack_require__(10), __webpack_require__(54), __webpack_require__(25), __webpack_require__(26), __webpack_require__(73), __webpack_require__(74), __webpack_require__(72), __webpack_require__(71), __webpack_require__(75), __webpack_require__(78), __webpack_require__(76), __webpack_require__(69)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(31), __webpack_require__(32), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(49), __webpack_require__(52), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA5OGUzMTFlYTg5NDViZGRkODE1YSIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL3V0aWwuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvY29sdW1uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvY29uc3RhbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9yb3ctcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS9lbnVtLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLWNob29zZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2dyb3VwLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL3BhZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9udW1lcmljLWNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2ZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlc2l6ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yb3ctcmVvcmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy90b29sYmFyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy92aXJ0dWFsLXNjcm9sbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3ZpcnR1YWwtcm93LW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2VkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvaW5saW5lLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ub3JtYWwtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2JhdGNoLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9kaWFsb2ctZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDVkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELCtCQUErQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELCtCQUErQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWlELFVBQVU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLDBDQUEwQztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWdFLDZCQUE2QixFQUFFO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELFNBQVM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxpREFBaUQsR0FBRztBQUM3Ryw0REFBMkQsaUNBQWlDLGlCQUFpQixFQUFFO0FBQy9HLDBFQUF5RSwrQkFBK0I7QUFDeEc7QUFDQSwwRUFBeUUsaUNBQWlDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUM3N0NEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ2pERCxnRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLFNBQVM7QUFDdEQ7QUFDQTtBQUNBLCtDQUE4QyxvQkFBb0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxjQUFjLGlCQUFpQixtQkFBbUIsYUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUMvU0QsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2hERDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDakhEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDMUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBLHdEQUF1RCwwQkFBMEI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCwwQkFBMEI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRSxTQUFTO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCx5RUFBeUU7QUFDM0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsU0FBUztBQUM5RDtBQUNBLDJEQUEwRCxVQUFVO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELFNBQVM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZ0UsOEJBQThCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBaUMsMkNBQTJDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLG1GQUFrRiwyQ0FBMkMsb0JBQW9CLDJDQUEyQztBQUM1TDtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsMkNBQTJDO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2pFRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakIsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNwREQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxhQUFhO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzFKRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsc0JB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsUUFBUTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0Esd0RBQXVEO0FBQ3ZELGNBQWE7QUFDYjtBQUNBO0FBQ0EsdUVBQXNFLGtDQUFrQztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELGdCQUFnQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELGVBQWU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBa0Usd0JBQXdCLHFDQUFxQztBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFtRCx3QkFBd0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiLDZEQUE0RCxvQ0FBb0M7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELDRCQUE0QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0EsOENBQTZDLHFCQUFxQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUM1UEQsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkI7QUFDM0I7QUFDQTtBQUNBLDRCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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c0QsZ0JBQWdCO0FBQ3RFO0FBQ0E7QUFDQSxnR0FBK0Y7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCxnQkFBZ0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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eEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQ7QUFDakQseURBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEwQyxtQkFBbUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxvQkFBb0I7QUFDL0Q7QUFD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QTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN4Q0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0EsRUFBQzs7Ozs7OztpRUNQRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ3pCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUMiLCJmaWxlIjoiZWoyLWdyaWRzLnVtZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiKSkgOiBmYWN0b3J5KHJvb3RbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfN19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzQzX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82MF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzcwX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzdfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA5OGUzMTFlYTg5NDViZGRkODE1YSIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZ3JpZC9pbmRleFwiLCBcIi4vcGFnZXIvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb21tb25cIiwgXCIuL2FjdGlvbnNcIiwgXCIuL21vZGVsc1wiLCBcIi4vcmVuZGVyZXJcIiwgXCIuL3NlcnZpY2VzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29tbW9uXzEsIGFjdGlvbnNfMSwgbW9kZWxzXzEsIHJlbmRlcmVyXzEsIHNlcnZpY2VzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbW1vbl8xKTtcbiAgICBfX2V4cG9ydChhY3Rpb25zXzEpO1xuICAgIF9fZXhwb3J0KG1vZGVsc18xKTtcbiAgICBfX2V4cG9ydChyZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlc18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2Jhc2UvZ3JpZFwiLCBcIi4vYmFzZS9lbnVtXCIsIFwiLi9iYXNlL3V0aWxcIiwgXCIuL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBncmlkXzEsIGVudW1fMSwgdXRpbF8xLCBjb25zdGFudF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChncmlkXzEpO1xuICAgIF9fZXhwb3J0KGVudW1fMSk7XG4gICAgX19leHBvcnQodXRpbF8xKTtcbiAgICBfX2V4cG9ydChjb25zdGFudF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vZW51bVwiLCBcIi4uL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIi4uL21vZGVscy9wYWdlLXNldHRpbmdzXCIsIFwiLi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4uL2FjdGlvbnMvc2hvdy1oaWRlXCIsIFwiLi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuLi9hY3Rpb25zL3ByaW50XCIsIFwiLi4vbW9kZWxzL2FnZ3JlZ2F0ZVwiLCBcIi4uL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCB1dGlsXzEsIGV2ZW50cywgcmVuZGVyXzEsIGVudW1fMSwgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgdmFsdWVfZm9ybWF0dGVyXzEsIHJlbmRlcmVyX2ZhY3RvcnlfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBhcmlhX3NlcnZpY2VfMSwgcGFnZV9zZXR0aW5nc18xLCBzZWxlY3Rpb25fMSwgc2VhcmNoXzEsIHNob3dfaGlkZV8xLCBzY3JvbGxfMSwgcHJpbnRfMSwgYWdncmVnYXRlXzEsIGNvbHVtbl9jaG9vc2VyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnREZXNjcmlwdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNvcnREZXNjcmlwdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTb3J0RGVzY3JpcHRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU29ydERlc2NyaXB0b3I7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgU29ydERlc2NyaXB0b3IucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFNvcnREZXNjcmlwdG9yLnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNvcnREZXNjcmlwdG9yID0gU29ydERlc2NyaXB0b3I7XG4gICAgdmFyIFNvcnRTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTb3J0U2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU29ydFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgU29ydERlc2NyaXB0b3IpXG4gICAgXSwgU29ydFNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Tb3J0U2V0dGluZ3MgPSBTb3J0U2V0dGluZ3M7XG4gICAgdmFyIFByZWRpY2F0ZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQcmVkaWNhdGUsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFByZWRpY2F0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJlZGljYXRlO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJvcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwibWF0Y2hDYXNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwicHJlZGljYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoe30pXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJhY3R1YWxGaWx0ZXJWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHt9KVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiYWN0dWFsT3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlByZWRpY2F0ZSA9IFByZWRpY2F0ZTtcbiAgICB2YXIgRmlsdGVyU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmlsdGVyU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBGaWx0ZXJTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIFByZWRpY2F0ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdmaWx0ZXJiYXInKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0ZpbHRlckJhclN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDE1MDApXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcImltbWVkaWF0ZU1vZGVEZWxheVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRmlsdGVyU2V0dGluZ3MgPSBGaWx0ZXJTZXR0aW5ncztcbiAgICB2YXIgU2VsZWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU2VsZWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdyb3cnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2Zsb3cnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW9uTW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdzaW5nbGUnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5TZWxlY3Rpb25TZXR0aW5ncyA9IFNlbGVjdGlvblNldHRpbmdzO1xuICAgIHZhciBTZWFyY2hTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWFyY2hTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNlYXJjaFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImZpZWxkc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJrZXlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnY29udGFpbnMnKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImlnbm9yZUNhc2VcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNlYXJjaFNldHRpbmdzID0gU2VhcmNoU2V0dGluZ3M7XG4gICAgdmFyIFJvd0Ryb3BTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhSb3dEcm9wU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJvd0Ryb3BTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUm93RHJvcFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFJvd0Ryb3BTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFyZ2V0SURcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlJvd0Ryb3BTZXR0aW5ncyA9IFJvd0Ryb3BTZXR0aW5ncztcbiAgICB2YXIgVGV4dFdyYXBTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUZXh0V3JhcFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUZXh0V3JhcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUZXh0V3JhcFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2JvdGgnKVxuICAgIF0sIFRleHRXcmFwU2V0dGluZ3MucHJvdG90eXBlLCBcIndyYXBNb2RlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UZXh0V3JhcFNldHRpbmdzID0gVGV4dFdyYXBTZXR0aW5ncztcbiAgICB2YXIgR3JvdXBTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHcm91cFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RHJvcEFyZWFcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93VG9nZ2xlQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0dyb3VwZWRDb2x1bW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dVbmdyb3VwQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiZGlzYWJsZVBhZ2VXaXNlQWdncmVnYXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkdyb3VwU2V0dGluZ3MgPSBHcm91cFNldHRpbmdzO1xuICAgIHZhciBFZGl0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRWRpdFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFZGl0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVkaXRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dBZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RWRpdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dEZWxldGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdub3JtYWwnKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0VkaXRPbkRibENsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dDb25maXJtRGlhbG9nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RGVsZXRlQ29uZmlybURpYWxvZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRWRpdFNldHRpbmdzID0gRWRpdFNldHRpbmdzO1xuICAgIHZhciBHcmlkID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyaWQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyaWQob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5zb3J0ZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICBfdGhpcy5pblZpZXdJbmRleGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5kZWZhdWx0TG9jYWxlID0ge1xuICAgICAgICAgICAgICAgIEVtcHR5UmVjb3JkOiAnTm8gcmVjb3JkcyB0byBkaXNwbGF5JyxcbiAgICAgICAgICAgICAgICBUcnVlOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgRmFsc2U6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgSW52YWxpZEZpbHRlck1lc3NhZ2U6ICdJbnZhbGlkIEZpbHRlciBEYXRhJyxcbiAgICAgICAgICAgICAgICBHcm91cERyb3BBcmVhOiAnRHJhZyBhIGNvbHVtbiBoZWFkZXIgaGVyZSB0byBncm91cCBpdHMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBVbkdyb3VwOiAnQ2xpY2sgaGVyZSB0byB1bmdyb3VwJyxcbiAgICAgICAgICAgICAgICBHcm91cERpc2FibGU6ICdHcm91cGluZyBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIEZpbHRlcmJhclRpdGxlOiAnXFwncyBmaWx0ZXIgYmFyIGNlbGwnLFxuICAgICAgICAgICAgICAgIEVtcHR5RGF0YVNvdXJjZUVycm9yOiAnRGF0YVNvdXJjZSBtdXN0IG5vdCBiZSBlbXB0eSBhdCBpbml0aWFsIGxvYWQgc2luY2UgY29sdW1ucyBhcmUgZ2VuZXJhdGVkIGZyb20gZGF0YVNvdXJjZSBpbiBBdXRvR2VuZXJhdGUgQ29sdW1uIEdyaWQnLFxuICAgICAgICAgICAgICAgIEFkZDogJ0FkZCcsXG4gICAgICAgICAgICAgICAgRWRpdDogJ0VkaXQnLFxuICAgICAgICAgICAgICAgIENhbmNlbDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgVXBkYXRlOiAnVXBkYXRlJyxcbiAgICAgICAgICAgICAgICBEZWxldGU6ICdEZWxldGUnLFxuICAgICAgICAgICAgICAgIFByaW50OiAnUHJpbnQnLFxuICAgICAgICAgICAgICAgIFBkZmV4cG9ydDogJ1BERiBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIEV4Y2VsZXhwb3J0OiAnRXhjZWwgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBXb3JkZXhwb3J0OiAnV29yZCBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIENzdmV4cG9ydDogJ0NTViBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIFNlYXJjaDogJ1NlYXJjaCcsXG4gICAgICAgICAgICAgICAgSXRlbTogJ2l0ZW0nLFxuICAgICAgICAgICAgICAgIEl0ZW1zOiAnaXRlbXMnLFxuICAgICAgICAgICAgICAgIEVkaXRPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGVkaXQgb3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBEZWxldGVPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGRlbGV0ZSBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIFNhdmVCdXR0b246ICdTYXZlJyxcbiAgICAgICAgICAgICAgICBPS0J1dHRvbjogJ09LJyxcbiAgICAgICAgICAgICAgICBDYW5jZWxCdXR0b246ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIEVkaXRGb3JtVGl0bGU6ICdEZXRhaWxzIG9mICcsXG4gICAgICAgICAgICAgICAgQWRkRm9ybVRpdGxlOiAnQWRkIE5ldyBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIEJhdGNoU2F2ZUNvbmZpcm06ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2F2ZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlTG9zdENoYW5nZXM6ICdVbnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/JyxcbiAgICAgICAgICAgICAgICBDb25maXJtRGVsZXRlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIERlbGV0ZSBSZWNvcmQ/JyxcbiAgICAgICAgICAgICAgICBDYW5jZWxFZGl0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIENhbmNlbCB0aGUgY2hhbmdlcz8nLFxuICAgICAgICAgICAgICAgIENob29zZUNvbHVtbnM6ICdDaG9vc2UgQ29sdW1uJyxcbiAgICAgICAgICAgICAgICBTZWFyY2hDb2x1bW5zOiAnc2VhcmNoIGNvbHVtbnMnLFxuICAgICAgICAgICAgICAgIE1hdGNoczogJ05vIE1hdGNoZXMgRm91bmQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBkb3duQXJyb3c6ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHVwQXJyb3c6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICByaWdodEFycm93OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbGVmdEFycm93OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdERvd246ICdzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0VXA6ICdzaGlmdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFJpZ2h0OiAnc2hpZnQrcmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRMZWZ0OiAnc2hpZnQrbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlc2NhcGU6ICdlc2NhcGUnLFxuICAgICAgICAgICAgICAgIGN0cmxIb21lOiAnY3RybCtob21lJyxcbiAgICAgICAgICAgICAgICBjdHJsRW5kOiAnY3RybCtlbmQnLFxuICAgICAgICAgICAgICAgIHBhZ2VVcDogJ3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgcGFnZURvd246ICdwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VVcDogJ2N0cmwrYWx0K3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VEb3duOiAnY3RybCthbHQrcGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VVcDogJ2FsdCtwYWdldXAnLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VEb3duOiAnYWx0K3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBhbHREb3duQXJyb3c6ICdhbHQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBhbHRVcEFycm93OiAnYWx0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxEb3duQXJyb3c6ICdjdHJsK2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFVwQXJyb3c6ICdjdHJsK3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzQTogJ2N0cmwrQScsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNQOiAnY3RybCtQJyxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6ICdpbnNlcnQnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgZjI6ICdmMicsXG4gICAgICAgICAgICAgICAgZW50ZXI6ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBzaGlmdFRhYjogJ3NoaWZ0K3RhYidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydhbGxvd1BhZ2luZycsICdwYWdlU2V0dGluZ3MnLCAnYWxsb3dTb3J0aW5nJywgJ3NvcnRTZXR0aW5ncycsICdhbGxvd1NlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgJ3NlbGVjdGlvblNldHRpbmdzJywgJ2FsbG93RmlsdGVyaW5nJywgJ2ZpbHRlclNldHRpbmdzJywgJ2dyaWRMaW5lcycsXG4gICAgICAgICAgICAgICAgJ2NyZWF0ZWQnLCAnZGVzdHJveWVkJywgJ2xvYWQnLCAnYWN0aW9uQmVnaW4nLCAnYWN0aW9uQ29tcGxldGUnLCAnYWN0aW9uRmFpbHVyZScsICdyb3dTZWxlY3RpbmcnLCAncm93U2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICdjb2x1bW5TZWxlY3RpbmcnLCAnY29sdW1uU2VsZWN0ZWQnLCAnY2VsbFNlbGVjdGluZycsICdjZWxsU2VsZWN0ZWQnLCAnZGF0YUJvdW5kJywgJ2dyb3VwU2V0dGluZ3MnLCAnY29sdW1ucycsICdhbGxvd0tleWJvYXJkJyxcbiAgICAgICAgICAgICAgICAnZW5hYmxlQWx0Um93JywgJ2VuYWJsZUhvdmVyJywgJ2FsbG93VGV4dFdyYXAnLCAndGV4dFdyYXBTZXR0aW5ncycsICdzZWFyY2hTZXR0aW5ncycsICdzZWxlY3RlZFJvd0luZGV4JywgJ2FsbG93UmVvcmRlcmluZycsXG4gICAgICAgICAgICAgICAgJ2FsbG93Um93RHJhZ0FuZERyb3AnLCAncm93RHJvcFNldHRpbmdzJywgJ2FsbG93R3JvdXBpbmcnLCAnaGVpZ2h0JywgJ3dpZHRoJywgJ3Jvd1RlbXBsYXRlJywgJ3ByaW50TW9kZScsXG4gICAgICAgICAgICAgICAgJ3Jvd0RhdGFCb3VuZCcsICdxdWVyeUNlbGxJbmZvJywgJ3Jvd0Rlc2VsZWN0aW5nJywgJ3Jvd0Rlc2VsZWN0ZWQnLCAnY2VsbERlc2VsZWN0aW5nJywgJ2NlbGxEZXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uRHJhZ1N0YXJ0JywgJ2NvbHVtbkRyYWcnLCAnY29sdW1uRHJvcCcsICdwcmludENvbXBsZXRlJywgJ2JlZm9yZVByaW50JywgJ2RldGFpbERhdGFCb3VuZCcsICdkZXRhaWxUZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgJ2NoaWxkR3JpZCcsICdxdWVyeVN0cmluZycsICd0b29sYmFyJywgJ3Rvb2xiYXJDbGljaycsICdlZGl0U2V0dGluZ3MnLFxuICAgICAgICAgICAgICAgICdiYXRjaEFkZCcsICdiYXRjaERlbGV0ZScsICdiZWZvcmVCYXRjaEFkZCcsICdiZWZvcmVCYXRjaERlbGV0ZScsXG4gICAgICAgICAgICAgICAgJ2JlZm9yZUJhdGNoU2F2ZScsICdiZWdpbkVkaXQnLCAnY2VsbEVkaXQnLCAnY2VsbFNhdmUnLCAnZW5kQWRkJywgJ2VuZERlbGV0ZScsICdlbmRFZGl0JywgJ2JlZm9yZURhdGFCb3VuZCcsXG4gICAgICAgICAgICAgICAgJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJywgJ2FsbG93UmVzaXppbmcnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dGaWx0ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5maWx0ZXJTZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3NvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zb3J0U2V0dGluZ3MsIHRoaXMuc29ydGVkQ29sdW1uc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncGFnZXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5wYWdlU2V0dGluZ3NdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3NlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZW1iZXI6ICdyZXNpemUnLFxuICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdyZW9yZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncm93RHJhZ0FuZERyb3AnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdncm91cCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLmdyb3VwU2V0dGluZ3MsIHRoaXMuc29ydGVkQ29sdW1ucywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHsgbWVtYmVyOiAnYWdncmVnYXRlJywgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWwoKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2RldGFpbFJvdycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhciB8fCB0aGlzLnRvb2xiYXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Rvb2xiYXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVZpcnR1YWxpemF0aW9uIHx8IHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd2aXJ0dWFsc2Nyb2xsJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IG5ldyBzZXJ2aWNlX2xvY2F0b3JfMS5TZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmVsZW1lbnQsIHsgcm9sZTogJ2dyaWQnIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUgPSBuZXcgcmVuZGVyXzEuUmVuZGVyKHRoaXMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5nZXRNZWRpYUNvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoTW9kdWxlID0gbmV3IHNlYXJjaF8xLlNlYXJjaCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlID0gbmV3IHNjcm9sbF8xLlNjcm9sbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyTW9kdWxlID0gbmV3IGNvbHVtbl9jaG9vc2VyXzEuQ29sdW1uQ2hvb3Nlcih0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbml0aWFsTG9hZCwge30pO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50cy5sb2FkKTtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NNb2RlbCgpO1xuICAgICAgICAgICAgdGhpcy5ncmlkUmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGVmYXVsdEN1cnNvcigpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluaXRpYWxFbmQsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TWVkaWFDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdjb2wgPSB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFNob3dIaWRlU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnc2hvd0hpZGVTZXJ2aWNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGdjb2wpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBnY29sLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGdjb2xbaW5kZXhdLmhpZGVBdE1lZGlhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVkaWFDb2wucHVzaChnY29sW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEoZ2NvbFtpbmRleF0uaGlkZUF0TWVkaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyeVVwZGF0ZShpbmRleCwgbWVkaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZExpc3RlbmVyKHRoaXMubWVkaWFRdWVyeVVwZGF0ZS5iaW5kKHRoaXMsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLm1lZGlhUXVlcnlVcGRhdGUgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNZWRpYVF1ZXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldENvbHVtbnMoKVtjb2x1bW5JbmRleF07XG4gICAgICAgICAgICBjb2wudmlzaWJsZSA9IGUubWF0Y2hlcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbExvYWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhjb2wuaGVhZGVyVGV4dCwgJ2hlYWRlclRleHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLmhpZGUoY29sLmhlYWRlclRleHQsICdoZWFkZXJUZXh0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoTWVkaWFDb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01lZGlhUXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWVkaWFRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxMb2FkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXZlbnRJbml0aWFsaXplciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGVzdHJveSwge30pO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95RGVwZW5kZW50TW9kdWxlcygpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmVsZW1lbnQsIFtdLCBbJ2UtcnRsJywgJ2UtZ3JpZGhvdmVyJywgJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnLCAnZS1kZXZpY2UnXSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlc3Ryb3lEZXBlbmRlbnRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2dyaWQnO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICB2YXIgcmVxdWlyZVJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByZXF1aXJlR3JpZFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBjaGVja0N1cnNvcjtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dQYWdpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3BhZ2VyJywgZW5hYmxlOiB0aGlzLmFsbG93UGFnaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdwYWdlcicsIHByb3BlcnRpZXM6IG5ld1Byb3AucGFnZVNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UpICYmIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZU9iai5zZXRMb2NhbGUobmV3UHJvcC5sb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2Uuc2V0Q3VsdHVyZShuZXdQcm9wLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Rvb2xiYXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93U29ydGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnc29ydCcsIGVuYWJsZTogdGhpcy5hbGxvd1NvcnRpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dGaWx0ZXJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2ZpbHRlcicsIGVuYWJsZTogdGhpcy5hbGxvd0ZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGU6ICdzY3JvbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgd2lkdGg6IG5ld1Byb3Aud2lkdGgsIGhlaWdodDogbmV3UHJvcC5oZWlnaHQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSZW9yZGVyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdyZW9yZGVyJywgZW5hYmxlOiB0aGlzLmFsbG93UmVvcmRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jvd0RyYWdBbmREcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdyb3dEcmFnQW5kRHJvcCcsIGVuYWJsZTogdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Jvd1RlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RldGFpbFRlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsVGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMuZGV0YWlsVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93R3JvdXBpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2dyb3VwJywgZW5hYmxlOiB0aGlzLmFsbG93R3JvdXBpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGlsZEdyaWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2xiYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Rvb2xiYXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dyb3VwU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZ3JvdXAnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmdyb3VwU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWdncmVnYXRlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnYWdncmVnYXRlJywgcHJvcGVydGllczogbmV3UHJvcCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uT2JqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlR3JpZFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZGVkUHJvcGVydHlDaGFuZ2UocHJvcCwgbmV3UHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrQ3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0Q3Vyc29yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWlyZUdyaWRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXF1aXJlUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4dGVuZGVkUHJvcGVydHlDaGFuZ2UgPSBmdW5jdGlvbiAocHJvcCwgbmV3UHJvcCkge1xuICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUucmVtb3ZlUGFkZGluZyghbmV3UHJvcC5lbmFibGVSdGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhck1vZHVsZS5nZXRUb29sYmFyKCkuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhck1vZHVsZS5nZXRUb29sYmFyKCkuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZUFsdFJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSZXNpemluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncmlkTGluZXMnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmaWx0ZXJTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2ZpbHRlcicsIHByb3BlcnRpZXM6IG5ld1Byb3AuZmlsdGVyU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlYXJjaFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc2VhcmNoJywgcHJvcGVydGllczogbmV3UHJvcC5zZWFyY2hTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc29ydCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGlvblNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc2VsZWN0aW9uJywgcHJvcGVydGllczogbmV3UHJvcC5zZWxlY3Rpb25TZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZWRpdCcsIHByb3BlcnRpZXM6IG5ld1Byb3AuZWRpdFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1RleHRXcmFwJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0ZXh0V3JhcFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dUZXh0V3JhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRleHRXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0YVNvdXJjZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVIb3Zlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBuZXdQcm9wLmVuYWJsZUhvdmVyID8gZWoyX2Jhc2VfMy5hZGRDbGFzcyA6IGVqMl9iYXNlXzMucmVtb3ZlQ2xhc3M7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbihbdGhpcy5lbGVtZW50XSwgJ2UtZ3JpZGhvdmVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVEZWZhdWx0Q3Vyc29yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGhlYWRlclJvd3NfMSA9IGhlYWRlclJvd3M7IF9pIDwgaGVhZGVyUm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBoZWFkZXJSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93U29ydGluZyB8fCB0aGlzLmFsbG93R3JvdXBpbmcgfHwgdGhpcy5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZGVmYXVsdGN1cnNvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2UtZGVmYXVsdGN1cnNvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlQ29sdW1uTW9kZWwgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uTW9kZWwoY29sdW1uc1tpXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwucHVzaChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGludmlldyA9IHRoaXMuaW5WaWV3SW5kZXhlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgLSBfdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyB9KS5maWx0ZXIoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgPiAtMTsgfSk7XG4gICAgICAgICAgICB2YXIgdkxlbiA9IGludmlldy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbHVtbk1vZGVsKSB8fCB0aGlzLmNvbHVtbk1vZGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk1vZGVsKHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHZMZW4gPT09IDAgPyB0aGlzLmNvbHVtbk1vZGVsIDpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsLnNsaWNlKGludmlld1swXSwgaW52aWV3W3ZMZW4gLSAxXSArIDEpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4ZXNJblZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pblZpZXdJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRDb2x1bW5JbmRleGVzSW5WaWV3ID0gZnVuY3Rpb24gKGluZGV4ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaW5WaWV3SW5kZXhlcyA9IGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFZpc2libGVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNvbHVtbk1vZGVsOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHMucHVzaChjb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyTW9kdWxlLmdldFBhbmVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnNldFBhbmVsKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFRhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlLnNldFRhYmxlKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUuc2V0UGFuZWwoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyTW9kdWxlLmdldFRhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5zZXRUYWJsZShlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZm9vdGVyJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb290ZXJFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRGb290ZXJDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGZvb3RlcicpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVyRWxlbWVudC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFBhZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFBhZ2VyO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkUGFnZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5ncmlkUGFnZXIgPSBlbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd0J5SW5kZXgoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dFbGVtZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREYXRhUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVJvd3MucHVzaChyb3dzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YVJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY29sdW1uSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWhlYWRlcmNlbGwnKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd09iamVjdEZyb21VSUQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cudWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uSGVhZGVyQnlVaWQodGhpcy5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKS51aWQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPScgKyB1aWQgKyAnXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IGluZGV4IDogLTE7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0VWlkQnlDb2x1bW5GaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnVpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXggPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldENvbHVtbkluZGV4QnlVaWQodWlkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBpbmRleCArPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbCgpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uRmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmdldENvbHVtbnMoKS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMuZ2V0Q29sdW1ucygpW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lcy5wdXNoKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbk5hbWVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd1RlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERldGFpbFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWlsVGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5ID0gMCwgY29sID0gdGhpcy5jb2x1bW5zLCBjTGVuID0gY29sLmxlbmd0aDsga2V5IDwgY0xlbjsga2V5KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sW2tleV0uaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChjb2xba2V5XS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJlY29yZHMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kdWxlID8gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWRSb3dJbmRleGVzIDogW107XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dzKCkuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5pc1NlbGVjdGVkOyB9KVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uZGF0YTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERhdGFNb2R1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNb2R1bGUuZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2hvd0NvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgc2hvd0J5KSB7XG4gICAgICAgICAgICBzaG93QnkgPSBzaG93QnkgPyBzaG93QnkgOiAnaGVhZGVyVGV4dCc7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGtleXMsIHNob3dCeSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmhpZGVDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIGhpZGVCeSkge1xuICAgICAgICAgICAgaGlkZUJ5ID0gaGlkZUJ5ID8gaGlkZUJ5IDogJ2hlYWRlclRleHQnO1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShrZXlzLCBoaWRlQnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zb3J0Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5zb3J0Q29sdW1uKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZVNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZmlsdGVyQnlDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGROYW1lLCBmaWx0ZXJPcGVyYXRvciwgZmlsdGVyVmFsdWUsIHByZWRpY2F0ZSwgbWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZSwgYWN0dWFsT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmZpbHRlckJ5Q29sdW1uKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbGVhckZpbHRlcmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3coaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RSb3dzID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdFJvd3Mocm93SW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Q2VsbCA9IGZ1bmN0aW9uIChjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdENlbGwoY2VsbEluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUuc2VhcmNoKHNlYXJjaFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZS5wcmludCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zdGFydEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJvdyh0cik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlY2FsY0luZGVudFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXRoaXMuaXNEZXRhaWwoKSkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuZ2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgcGVyUGl4ZWwgPSBpbmRlbnRXaWR0aCAvIDMwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKHBlclBpeGVsID49IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCA9ICgzMCAvIHBlclBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAzMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgY29udGVudENvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBpLCB3aWR0aDogaW5kZW50V2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuc2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnLCAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlck1vZHVsZS5yZW9yZGVyQ29sdW1ucyhmcm9tRk5hbWUsIHRvRk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmaWVsZE5hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU1vZHVsZS5hdXRvRml0Q29sdW1ucyhmaWVsZE5hbWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uY2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZS5yZW5kZXJDb2x1bW5DaG9vc2VyKHgsIHksIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmluaXRpYWxpemVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3dpZHRoU2VydmljZScsIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignY2VsbFJlbmRlcmVyRmFjdG9yeScsIG5ldyBjZWxsX3JlbmRlcl9mYWN0b3J5XzEuQ2VsbFJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdyZW5kZXJlckZhY3RvcnknLCBuZXcgcmVuZGVyZXJfZmFjdG9yeV8xLlJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdsb2NhbGl6YXRpb24nLCB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV80LkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3ZhbHVlRm9ybWF0dGVyJywgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIodGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3Nob3dIaWRlU2VydmljZScsIHRoaXMuc2hvd0hpZGVyID0gbmV3IHNob3dfaGlkZV8xLlNob3dIaWRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2FyaWFTZXJ2aWNlJywgdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJvY2Vzc01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc0NvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWc7XG4gICAgICAgICAgICB2YXIgajtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNMZW4gPSBzQ29scy5sZW5ndGg7IGogPCBzTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQ29sc1tqXS5maWVsZCA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xzLnB1c2goeyBmaWVsZDogZ0NvbHNbaV0sIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc18xLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5zb3J0ZWRDb2x1bW5zLnB1c2goc0NvbHNbal0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHNbal0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzXzEuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXNfMS5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBnQ29sc1tpXTsgfSlbMF0gOiB0aGlzXzEuZ2V0Q29sdW1uQnlGaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpLCBsZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzLnBhcmVudEtleUZpZWxkVmFsdWUpID8gJ3VuZGVmaW5lZCcgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlKHRoaXMucXVlcnlTdHJpbmcsICdlcXVhbCcsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ3JpZFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVIb3Zlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWRldmljZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnXSwgW10pO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyRmFjdG9yeSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZSA9IHJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZSA9IG5ldyBwcmludF8xLlByaW50KHRoaXMsIHRoaXMuc2Nyb2xsTW9kdWxlKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEluaXRpYWxpemVyKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFdpZHRoKCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVHcmlkUG9wVXBFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBvcHVwJywgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNvbnRlbnQnLCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW2NvbnRlbnQsIGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVwdGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZG93bnRhaWwgZS10YWlsJyB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUdyaWRMaW5lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS12ZXJ0aWNhbGxpbmVzJywgJ2UtaG9yaXpvbnRhbGxpbmVzJywgJ2UtaGlkZWxpbmVzJywgJ2UtYm90aGxpbmVzJ10pO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRMaW5lcykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3Jpem9udGFsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS12ZXJ0aWNhbGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWJvdGhsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXBwbHlUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmdldENvbnRlbnQoKSwgJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IHRoaXMuZWxlbWVudC50YWJJbmRleCA9PT0gLTEgPyAwIDogdGhpcy5lbGVtZW50LnRhYkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2tleWRvd24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLnJlY2FsY0luZGVudFdpZHRoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoTWVkaWFDb2wuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaE1lZGlhQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q3VycmVudFZpZXdSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbG93R3JvdXBpbmcgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEucmVjb3JkcyA6IHRoaXMuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tb3VzZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZHBvcHVwJykgJiYgZS50b3VjaGVzKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jbG9uZXByb3BlcnRpZXMnKS5sZW5ndGggfHwgdGhpcy5jaGVja0VkaXQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCghdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHx8XG4gICAgICAgICAgICAgICAgKCEodGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpICYmIHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNoZWNrRWRpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgJiYgdHIgJiYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRyb3cnKSB8fCB0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtYWRkZWRyb3cnKSk7XG4gICAgICAgICAgICByZXR1cm4gaXNFZGl0IHx8ICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiZcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWVkaXRlZGJhdGNoY2VsbCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJykuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kYmxjbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmZvY3VzT3V0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2xlYXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2FuY2VsOm5vdCguZS1oaWRlKScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlckNsZWFyKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2xlYXIuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzQ2hpbGRHcmlkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzRGV0YWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hpbGRHcmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRWRpdCAmJiBlLmFjdGlvbiAhPT0gJ2VzY2FwZScgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgZS5hY3Rpb24gIT09ICd0YWInICYmIGUuYWN0aW9uICE9PSAnc2hpZnRUYWInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdjdHJsUGx1c1AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMua2V5UHJlc3NlZCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEluamVjdGVkTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluamVjdGVkTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk9iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcmlkO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVBbHRSb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUhvdmVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0tleWJvYXJkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dUZXh0V3JhcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFRleHRXcmFwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidGV4dFdyYXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGFnaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgcGFnZV9zZXR0aW5nc18xLlBhZ2VTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwYWdlU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVWaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgU2VhcmNoU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VhcmNoU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NvcnRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTb3J0U2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic29ydFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NlbGVjdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KC0xKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlbGVjdGVkUm93SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTZWxlY3Rpb25TZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25TZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93RmlsdGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZW9yZGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZXNpemluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93Um93RHJhZ0FuZERyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBSb3dEcm9wU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJvcFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRmlsdGVyU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZmlsdGVyU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0dyb3VwaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgR3JvdXBTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncm91cFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRWRpdFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVkaXRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZVJvdylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2hvd0NvbHVtbkNob29zZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2RlZmF1bHQnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImdyaWRMaW5lc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXRhaWxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGlsZEdyaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYWxscGFnZXMnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFTb3VyY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ0b29sYmFyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwibG9hZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25CZWdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25GYWlsdXJlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93U2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbERlc2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1N0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludENvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZVByaW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRldGFpbERhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaFNhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVnaW5FZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxFZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTYXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIm9uUmVzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0b3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgR3JpZCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEdyaWQpO1xuICAgIGV4cG9ydHMuR3JpZCA9IEdyaWQ7XG4gICAgR3JpZC5JbmplY3Qoc2VsZWN0aW9uXzEuU2VsZWN0aW9uKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2dyaWQuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmFsdWVGb3JtYXR0ZXIoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VsdHVyZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRsLmN1bHR1cmUgPSBjdWx0dXJlTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0Rm9ybWF0RnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5nZXRQYXJzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0RGF0ZVBhcnNlcihmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXROdW1iZXJQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZyb21WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScgfHwgdHlwZSA9PT0gJ2RhdGV0aW1lJyB8fCB0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUudG9WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmb3JtYXQpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuc2V0Q3VsdHVyZSA9IGZ1bmN0aW9uIChjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0Q3VsdHVyZShjdWx0dXJlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWYWx1ZUZvcm1hdHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmFsdWVGb3JtYXR0ZXIgPSBWYWx1ZUZvcm1hdHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZnVuY3Rpb24gZG9lc0ltcGxlbWVudEludGVyZmFjZSh0YXJnZXQsIGNoZWNrRm9yKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQucHJvdG90eXBlICYmIGNoZWNrRm9yIGluIHRhcmdldC5wcm90b3R5cGU7XG4gICAgfVxuICAgIGV4cG9ydHMuZG9lc0ltcGxlbWVudEludGVyZmFjZSA9IGRvZXNJbXBsZW1lbnRJbnRlcmZhY2U7XG4gICAgZnVuY3Rpb24gdmFsdWVBY2Nlc3NvcihmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgIGZpZWxkID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChmaWVsZCkgPyAnJyA6IGZpZWxkO1xuICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZShmaWVsZCwgZGF0YSk7XG4gICAgfVxuICAgIGV4cG9ydHMudmFsdWVBY2Nlc3NvciA9IHZhbHVlQWNjZXNzb3I7XG4gICAgZnVuY3Rpb24gZ2V0VXBkYXRlVXNpbmdSYWYodXBkYXRlRnVuY3Rpb24sIGNhbGxCYWNrKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKG51bGwsIHVwZGF0ZUZ1bmN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VXBkYXRlVXNpbmdSYWYgPSBnZXRVcGRhdGVVc2luZ1JhZjtcbiAgICBmdW5jdGlvbiBpdGVyYXRlQXJyYXlPck9iamVjdChjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHByZWQgPSBwcmVkaWNhdGUoY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocHJlZCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBleHBvcnRzLml0ZXJhdGVBcnJheU9yT2JqZWN0ID0gaXRlcmF0ZUFycmF5T3JPYmplY3Q7XG4gICAgZnVuY3Rpb24gdGVtcGxhdGVDb21waWxlcih0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBleHBvcnRzLnRlbXBsYXRlQ29tcGlsZXIgPSB0ZW1wbGF0ZUNvbXBpbGVyO1xuICAgIGZ1bmN0aW9uIHNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBjb3B5QXR0ciA9IHt9O1xuICAgICAgICB2YXIgbGl0ZXJhbHMgPSBbJ3N0eWxlJywgJ2NsYXNzJ107XG4gICAgICAgIGVqMl9iYXNlXzIuZXh0ZW5kKGNvcHlBdHRyLCBjdXN0b21BdHRyaWJ1dGVzLCB7fSk7XG4gICAgICAgIGlmICgnc3R5bGUnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKG5vZGUsIGNvcHlBdHRyW2xpdGVyYWxzWzBdXSk7XG4gICAgICAgICAgICBkZWxldGUgY29weUF0dHJbbGl0ZXJhbHNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY2xhc3MnIGluIGNvcHlBdHRyKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKFtub2RlXSwgY29weUF0dHJbbGl0ZXJhbHNbMV1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1sxXV07XG4gICAgICAgIH1cbiAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKG5vZGUsIGNvcHlBdHRyKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMgPSBzZXRTdHlsZUFuZEF0dHJpYnV0ZXM7XG4gICAgZnVuY3Rpb24gZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCwgZXhjbHVkZSkge1xuICAgICAgICB2YXIgbW92ZWQgPSBlajJfYmFzZV8yLmV4dGVuZChjb3BpZWQsIGZpcnN0LCBzZWNvbmQpO1xuICAgICAgICBPYmplY3Qua2V5cyhtb3ZlZCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbW92ZWRbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1vdmVkO1xuICAgIH1cbiAgICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcbiAgICBmdW5jdGlvbiBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zLCBhdXRvV2lkdGgpIHtcbiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuOyBjKyspIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbHVtbnNbY10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbih7IGZpZWxkOiBjb2x1bW5zW2NdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIShjb2x1bW5zW2NdIGluc3RhbmNlb2YgY29sdW1uXzEuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgIGlmICghY29sdW1uc1tjXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKGNvbHVtbnNbY10pO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2NdLmNvbHVtbnMgPSBwcmVwYXJlQ29sdW1ucyhjb2x1bW5zW2NdLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4uaGVhZGVyVGV4dCA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRleHQpID8gY29sdW1uLmZpZWxkIHx8ICcnIDogY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICBjb2x1bW4udmFsdWVBY2Nlc3NvciA9IGNvbHVtbi52YWx1ZUFjY2Vzc29yIHx8IHZhbHVlQWNjZXNzb3I7XG4gICAgICAgICAgICBjb2x1bW4ud2lkdGggPSBhdXRvV2lkdGggJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4ud2lkdGgpID8gMjAwIDogY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uc1tjXSA9IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICB9XG4gICAgZXhwb3J0cy5wcmVwYXJlQ29sdW1ucyA9IHByZXBhcmVDb2x1bW5zO1xuICAgIGZ1bmN0aW9uIHNldENzc0luR3JpZFBvcFVwKHBvcFVwLCBlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIHBvcFVwU3BhbiA9IHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gcG9wVXAucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHRhcmdldFBvc2l0aW9uID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBpc0JvdHRvbVRhaWw7XG4gICAgICAgIHBvcFVwU3Bhbi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHBvcFVwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgaXNCb3R0b21UYWlsID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpID4gcG9wVXAub2Zmc2V0SGVpZ2h0ICsgMTA7XG4gICAgICAgIHBvcFVwLnN0eWxlLnRvcCA9IHRhcmdldFBvc2l0aW9uLnRvcCAtIHBvc2l0aW9uLnRvcCArXG4gICAgICAgICAgICAoaXNCb3R0b21UYWlsID8gLShwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgOiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMCkgKyAncHgnO1xuICAgICAgICBwb3BVcC5zdHlsZS5sZWZ0ID0gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wVXAsIGUsIHRhcmdldFBvc2l0aW9uLCBwb3NpdGlvbi5sZWZ0KSArICdweCc7XG4gICAgICAgIGlmIChpc0JvdHRvbVRhaWwpIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLWRvd250YWlsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLXVwdGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldENzc0luR3JpZFBvcFVwID0gc2V0Q3NzSW5HcmlkUG9wVXA7XG4gICAgZnVuY3Rpb24gZ2V0UG9wdXBMZWZ0UG9zaXRpb24ocG9wdXAsIGUsIHRhcmdldFBvc2l0aW9uLCBsZWZ0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHBvcHVwLm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgdmFyIHggPSBnZXRQb3NpdGlvbihlKS54O1xuICAgICAgICBpZiAoeCAtIHRhcmdldFBvc2l0aW9uLmxlZnQgPCB3aWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFBvc2l0aW9uLmxlZnQgLSBsZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldFBvc2l0aW9uLnJpZ2h0IC0geCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ucmlnaHQgLSBsZWZ0IC0gd2lkdGggKiAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcGVydGllcyhvYmopIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuZ2V0VmFsdWUoJ3Byb3BlcnRpZXMnLCBvYmopO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BlcnRpZXMgPSBnZXRBY3R1YWxQcm9wZXJ0aWVzO1xuICAgIGZ1bmN0aW9uIHBhcmVudHNVbnRpbChlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIGV4cG9ydHMucGFyZW50c1VudGlsID0gcGFyZW50c1VudGlsO1xuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRJbmRleChlbGVtZW50LCBlbGVtZW50cykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uaXNFcXVhbE5vZGUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBleHBvcnRzLmdldEVsZW1lbnRJbmRleCA9IGdldEVsZW1lbnRJbmRleDtcbiAgICBmdW5jdGlvbiBpbkFycmF5KHZhbHVlLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbltpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGV4cG9ydHMuaW5BcnJheSA9IGluQXJyYXk7XG4gICAgZnVuY3Rpb24gZ2V0QWN0dWFsUHJvcEZyb21Db2xsKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGNvbGwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldLmhhc093blByb3BlcnR5KCdwcm9wZXJ0aWVzJykpIHtcbiAgICAgICAgICAgICAgICBjb2xsLnB1c2goY29sbGVjdGlvbltpXS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbDtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRBY3R1YWxQcm9wRnJvbUNvbGwgPSBnZXRBY3R1YWxQcm9wRnJvbUNvbGw7XG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCh0YXJnZXQsIHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbWVudHNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMucmVtb3ZlRWxlbWVudCA9IHJlbW92ZUVsZW1lbnQ7XG4gICAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oZSkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB7fTtcbiAgICAgICAgcG9zaXRpb24ueCA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WCkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOlxuICAgICAgICAgICAgZS5jbGllbnRYKTtcbiAgICAgICAgcG9zaXRpb24ueSA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WSkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOlxuICAgICAgICAgICAgZS5jbGllbnRZKTtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFBvc2l0aW9uID0gZ2V0UG9zaXRpb247XG4gICAgdmFyIHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gZ2V0VWlkKHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgdWlkKys7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0VWlkID0gZ2V0VWlkO1xuICAgIGZ1bmN0aW9uIGFwcGVuZENoaWxkcmVuKGVsZW0sIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG4gICAgZXhwb3J0cy5hcHBlbmRDaGlsZHJlbiA9IGFwcGVuZENoaWxkcmVuO1xuICAgIGZ1bmN0aW9uIHBhcmVudHMoZWxlbSwgc2VsZWN0b3IsIGlzSUQpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW07XG4gICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0lEID8gcGFyZW50LmlkID09PSBzZWxlY3RvciA6IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzID0gcGFyZW50cztcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgZGF0YSwgY29sdW1uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUgPyBjb2x1bW4uY3VzdG9tQWdncmVnYXRlLmNhbGwoY29udGV4dCwgZGF0YSwgY29sdW1uKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlajJfZGF0YV8xLkRhdGFVdGlsLmFnZ3JlZ2F0ZXNbdHlwZV0oZGF0YSwgY29sdW1uLmZpZWxkKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVBZ2dyZWdhdGUgPSBjYWxjdWxhdGVBZ2dyZWdhdGU7XG4gICAgdmFyIHNjcm9sbFdpZHRoID0gbnVsbDtcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxCYXJXaWR0aCgpIHtcbiAgICAgICAgaWYgKHNjcm9sbFdpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpdk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHZhbHVlID0gMDtcbiAgICAgICAgZGl2Tm9kZS5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOjEwMHB4O2hlaWdodDogMTAwcHg7b3ZlcmZsb3c6IHNjcm9sbDtwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiAtOTk5OXB4Oyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHZhbHVlID0gKGRpdk5vZGUub2Zmc2V0V2lkdGggLSBkaXZOb2RlLmNsaWVudFdpZHRoKSB8IDA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2Tm9kZSk7XG4gICAgICAgIHJldHVybiBzY3JvbGxXaWR0aCA9IHZhbHVlO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFNjcm9sbEJhcldpZHRoID0gZ2V0U2Nyb2xsQmFyV2lkdGg7XG4gICAgdmFyIHJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBnZXRSb3dIZWlnaHQoZWxlbWVudCkge1xuICAgICAgICBpZiAocm93SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIHN0eWxlczogJ3Zpc2liaWxpdHk6IGhpZGRlbicgfSk7XG4gICAgICAgIHRhYmxlLmlubmVySFRNTCA9ICc8dHI+PHRkIGNsYXNzPVwiZS1yb3djZWxsXCI+QTx0ZD48L3RyPic7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB2YXIgcmVjdCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQodGFibGUpO1xuICAgICAgICByb3dIZWlnaHQgPSBNYXRoLmNlaWwocmVjdC5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gcm93SGVpZ2h0O1xuICAgIH1cbiAgICBleHBvcnRzLmdldFJvd0hlaWdodCA9IGdldFJvd0hlaWdodDtcbiAgICBmdW5jdGlvbiBpc0VkaXRhYmxlKGNvbCwgdHlwZSwgZWxlbSkge1xuICAgICAgICB2YXIgcm93ID0gcGFyZW50c1VudGlsKGVsZW0sICdlLXJvdycpO1xuICAgICAgICB2YXIgaXNPbGRSb3cgPSAhcm93ID8gdHJ1ZSA6IHJvdyAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2JlZ2luRWRpdCcgJiYgaXNPbGRSb3cpIHtcbiAgICAgICAgICAgIGlmIChjb2wuaXNJZGVudGl0eSB8fCBjb2wuaXNQcmltYXJ5S2V5IHx8ICFjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNPbGRSb3cgJiYgIWNvbC5hbGxvd0VkaXRpbmcgJiYgIWNvbC5pc0lkZW50aXR5ICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5pc0VkaXRhYmxlID0gaXNFZGl0YWJsZTtcbiAgICBmdW5jdGlvbiBpc0FjdGlvblByZXZlbnQoaW5zdCkge1xuICAgICAgICB2YXIgZGxnID0gaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaW5zdC5lbGVtZW50LmlkICsgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIHJldHVybiBpbnN0LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAoaW5zdC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCkgJiZcbiAgICAgICAgICAgIChkbGcgPyBkbGcuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBvcHVwLWNsb3NlJykgOiB0cnVlKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pc0FjdGlvblByZXZlbnQgPSBpc0FjdGlvblByZXZlbnQ7XG4gICAgZnVuY3Rpb24gd3JhcChlbGVtLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIGNsTmFtZSA9ICdlLXdyYXAnO1xuICAgICAgICBlbGVtID0gZWxlbSBpbnN0YW5jZW9mIEFycmF5ID8gZWxlbSA6IFtlbGVtXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhY3Rpb24gPyBlbGVtW2ldLmNsYXNzTGlzdC5hZGQoY2xOYW1lKSA6IGVsZW1baV0uY2xhc3NMaXN0LnJlbW92ZShjbE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMud3JhcCA9IHdyYXA7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdmFsdWVfZm9ybWF0dGVyXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dTb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dSZXNpemluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93RmlsdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dHcm91cGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93RWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNob3dJbkNvbHVtbkNob29zZXIgPSB0cnVlO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdXRpbF8xLmdldFVpZCgnZ3JpZC1jb2x1bW4nKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZm9ybWF0ICYmIChvcHRpb25zLmZvcm1hdC5za2VsZXRvbiB8fCBvcHRpb25zLmZvcm1hdC5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb3JtYXR0ZXIodmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBhcnNlcih2YWx1ZUZvcm1hdHRlci5nZXRQYXJzZXJGdW5jdGlvbihvcHRpb25zLmZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dTb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0UGFyc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0UGFyc2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlckZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Q29sdW1uVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldERvbVNldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVIdG1sRW5jb2RlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW4gPSBDb2x1bW47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuY3JlYXRlZCA9ICdjcmVhdGUnO1xuICAgIGV4cG9ydHMuZGVzdHJveWVkID0gJ2Rlc3Ryb3knO1xuICAgIGV4cG9ydHMubG9hZCA9ICdsb2FkJztcbiAgICBleHBvcnRzLnJvd0RhdGFCb3VuZCA9ICdyb3dEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMucXVlcnlDZWxsSW5mbyA9ICdxdWVyeUNlbGxJbmZvJztcbiAgICBleHBvcnRzLmFjdGlvbkJlZ2luID0gJ2FjdGlvbkJlZ2luJztcbiAgICBleHBvcnRzLmFjdGlvbkNvbXBsZXRlID0gJ2FjdGlvbkNvbXBsZXRlJztcbiAgICBleHBvcnRzLmFjdGlvbkZhaWx1cmUgPSAnYWN0aW9uRmFpbHVyZSc7XG4gICAgZXhwb3J0cy5kYXRhQm91bmQgPSAnZGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGluZyA9ICdyb3dTZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0ZWQgPSAncm93U2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RpbmcgPSAncm93RGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RlZCA9ICdyb3dEZXNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3RpbmcgPSAnY2VsbFNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0ZWQgPSAnY2VsbFNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxEZXNlbGVjdGluZyA9ICdjZWxsRGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbERlc2VsZWN0ZWQgPSAnY2VsbERlc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0YXJ0ID0gJ2NvbHVtbkRyYWdTdGFydCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnID0gJ2NvbHVtbkRyYWcnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJvcCA9ICdjb2x1bW5Ecm9wJztcbiAgICBleHBvcnRzLnJvd0RyYWdTdGFydCA9ICdyb3dEcmFnU3RhcnQnO1xuICAgIGV4cG9ydHMucm93RHJhZyA9ICdyb3dEcmFnJztcbiAgICBleHBvcnRzLnJvd0Ryb3AgPSAncm93RHJvcCc7XG4gICAgZXhwb3J0cy5iZWZvcmVQcmludCA9ICdiZWZvcmVQcmludCc7XG4gICAgZXhwb3J0cy5wcmludENvbXBsZXRlID0gJ3ByaW50Q29tcGxldGUnO1xuICAgIGV4cG9ydHMuZGV0YWlsRGF0YUJvdW5kID0gJ2RldGFpbERhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy50b29sYmFyQ2xpY2sgPSAndG9vbGJhckNsaWNrJztcbiAgICBleHBvcnRzLmJhdGNoQWRkID0gJ2JhdGNoQWRkJztcbiAgICBleHBvcnRzLmJhdGNoRGVsZXRlID0gJ2JhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoQWRkID0gJ2JlZm9yZUJhdGNoQWRkJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoRGVsZXRlID0gJ2JlZm9yZUJhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoU2F2ZSA9ICdiZWZvcmVCYXRjaFNhdmUnO1xuICAgIGV4cG9ydHMuYmVnaW5FZGl0ID0gJ2JlZ2luRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsRWRpdCA9ICdjZWxsRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsU2F2ZSA9ICdjZWxsU2F2ZSc7XG4gICAgZXhwb3J0cy5lbmRBZGQgPSAnZW5kQWRkJztcbiAgICBleHBvcnRzLmVuZERlbGV0ZSA9ICdlbmREZWxldGUnO1xuICAgIGV4cG9ydHMuZW5kRWRpdCA9ICdlbmRFZGl0JztcbiAgICBleHBvcnRzLnJlY29yZERvdWJsZUNsaWNrID0gJ3JlY29yZERvdWJsZUNsaWNrJztcbiAgICBleHBvcnRzLnJlY29yZENsaWNrID0gJ3JlY29yZENsaWNrJztcbiAgICBleHBvcnRzLmJlZm9yZURhdGFCb3VuZCA9ICdiZWZvcmVEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMuYmVmb3JlT3BlbkNvbHVtbkNob29zZXIgPSAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInO1xuICAgIGV4cG9ydHMucmVzaXplU3RhcnQgPSAncmVzaXplU3RhcnQnO1xuICAgIGV4cG9ydHMub25SZXNpemUgPSAnb25SZXNpemUnO1xuICAgIGV4cG9ydHMucmVzaXplU3RvcCA9ICdyZXNpemVTdG9wJztcbiAgICBleHBvcnRzLmluaXRpYWxMb2FkID0gJ2luaXRpYWwtbG9hZCc7XG4gICAgZXhwb3J0cy5pbml0aWFsRW5kID0gJ2luaXRpYWwtZW5kJztcbiAgICBleHBvcnRzLmRhdGFSZWFkeSA9ICdkYXRhLXJlYWR5JztcbiAgICBleHBvcnRzLmNvbnRlbnRSZWFkeSA9ICdjb250ZW50LXJlYWR5JztcbiAgICBleHBvcnRzLnVpVXBkYXRlID0gJ3VpLXVwZGF0ZSc7XG4gICAgZXhwb3J0cy5pbkJvdW5kTW9kZWxDaGFuZ2VkID0gJ2luYm91bmQtbW9kZWwtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5tb2RlbENoYW5nZWQgPSAnbW9kZWwtY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5jb2xHcm91cFJlZnJlc2ggPSAnY29sZ3JvdXAtcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5oZWFkZXJSZWZyZXNoZWQgPSAnaGVhZGVyLXJlZnJlc2hlZCc7XG4gICAgZXhwb3J0cy5wYWdlQmVnaW4gPSAncGFnaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnBhZ2VDb21wbGV0ZSA9ICdwYWdpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc29ydEJlZ2luID0gJ3NvcnRpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuc29ydENvbXBsZXRlID0gJ3NvcnRpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZmlsdGVyQmVnaW4gPSAnZmlsdGVyaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLmZpbHRlckNvbXBsZXRlID0gJ2ZpbHRlcmluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5zZWFyY2hCZWdpbiA9ICdzZWFyY2hpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMuc2VhcmNoQ29tcGxldGUgPSAnc2VhcmNoaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlb3JkZXJCZWdpbiA9ICdyZW9yZGVyLWJlZ2luJztcbiAgICBleHBvcnRzLnJlb3JkZXJDb21wbGV0ZSA9ICdyZW9yZGVyLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQmVnaW4gPSAncm93ZHJhZ2FuZGRyb3AtYmVnaW4nO1xuICAgIGV4cG9ydHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSA9ICdyb3dkcmFnYW5kZHJvcC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5ncm91cEJlZ2luID0gJ2dyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLmdyb3VwQ29tcGxldGUgPSAnZ3JvdXBpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMudW5ncm91cEJlZ2luID0gJ3VuZ3JvdXBpbmctYmVnaW4nO1xuICAgIGV4cG9ydHMudW5ncm91cENvbXBsZXRlID0gJ3VuZ3JvdXBpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0aW9uQmVnaW4gPSAncm93c2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlID0gJ3Jvd3NlbGVjdGVkJztcbiAgICBleHBvcnRzLmNvbHVtblNlbGVjdGlvbkJlZ2luID0gJ2NvbHVtbnNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25Db21wbGV0ZSA9ICdjb2x1bW5zZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW9uQmVnaW4gPSAnY2VsbHNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUgPSAnY2VsbHNlbGVjdGVkJztcbiAgICBleHBvcnRzLmtleVByZXNzZWQgPSAna2V5LXByZXNzZWQnO1xuICAgIGV4cG9ydHMuY2xpY2sgPSAnY2xpY2snO1xuICAgIGV4cG9ydHMuZGVzdHJveSA9ICdkZXN0cm95JztcbiAgICBleHBvcnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkID0gJ2NvbHVtbi12aXNpYmxlLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuc2Nyb2xsID0gJ3Njcm9sbCc7XG4gICAgZXhwb3J0cy5jb2x1bW5XaWR0aENoYW5nZWQgPSAnY29sdW1uLXdpZHRoLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkID0gJ2NvbHVtbi1wb3NpdGlvbi1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wID0gJ3Jvdy1kcmFnLWFuZC1kcm9wJztcbiAgICBleHBvcnRzLnJvd3NBZGRlZCA9ICdyb3dzLWFkZGVkJztcbiAgICBleHBvcnRzLnJvd3NSZW1vdmVkID0gJ3Jvd3MtcmVtb3ZlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnU3RvcCA9ICdjb2x1bW4tZHJhZy1zdG9wJztcbiAgICBleHBvcnRzLmhlYWRlckRyb3AgPSAnaGVhZGVyLWRyb3AnO1xuICAgIGV4cG9ydHMuZGF0YVNvdXJjZU1vZGlmaWVkID0gJ2RhdGFzb3VyY2UtbW9kaWZpZWQnO1xuICAgIGV4cG9ydHMucmVmcmVzaENvbXBsZXRlID0gJ3JlZnJlc2gtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucmVmcmVzaFZpcnR1YWxCbG9jayA9ICdyZWZyZXNoLXZpcnR1YWwtYmxvY2snO1xuICAgIGV4cG9ydHMuZGJsY2xpY2sgPSAnZGJsY2xpY2snO1xuICAgIGV4cG9ydHMudG9vbGJhclJlZnJlc2ggPSAndG9vbGJhci1yZWZyZXNoJztcbiAgICBleHBvcnRzLmJ1bGtTYXZlID0gJ2J1bGstc2F2ZSc7XG4gICAgZXhwb3J0cy5hdXRvQ29sID0gJ2F1dG8tY29sJztcbiAgICBleHBvcnRzLnRvb2x0aXBEZXN0cm95ID0gJ3Rvb2x0aXAtZGVzdHJveSc7XG4gICAgZXhwb3J0cy51cGRhdGVEYXRhID0gJ3VwZGF0ZS1kYXRhJztcbiAgICBleHBvcnRzLmVkaXRCZWdpbiA9ICdlZGl0LWJlZ2luJztcbiAgICBleHBvcnRzLmVkaXRDb21wbGV0ZSA9ICdlZGl0LWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmFkZEJlZ2luID0gJ2FkZC1iZWdpbic7XG4gICAgZXhwb3J0cy5hZGRDb21wbGV0ZSA9ICdhZGQtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2F2ZUNvbXBsZXRlID0gJ3NhdmUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZGVsZXRlQmVnaW4gPSAnZGVsZXRlLWJlZ2luJztcbiAgICBleHBvcnRzLmRlbGV0ZUNvbXBsZXRlID0gJ2RlbGV0ZS1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wcmV2ZW50QmF0Y2ggPSAncHJldmVudC1iYXRjaCc7XG4gICAgZXhwb3J0cy5kaWFsb2dEZXN0cm95ID0gJ2RpYWxvZy1kZXN0cm95JztcbiAgICBleHBvcnRzLmNydWRBY3Rpb24gPSAnY3J1ZC1BY3Rpb24nO1xuICAgIGV4cG9ydHMuYWRkRGVsZXRlQWN0aW9uID0gJ2FkZC1kZWxldGUtQWN0aW9uJztcbiAgICBleHBvcnRzLmRlc3Ryb3lGb3JtID0gJ2Rlc3Ryb3ktZm9ybSc7XG4gICAgZXhwb3J0cy5kb3VibGVUYXAgPSAnZG91YmxlLXRhcCc7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS9jb25zdGFudC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlbnVtXzEsIGRhdGFfMSwgZXZlbnRzLCB1dGlsXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEsIGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLCBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5yZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07IH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShlLnJlcXVlc3RUeXBlICsgXCItYmVnaW5cIiwgZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgZSk7XG4gICAgICAgICAgICBpZiAoZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hEYXRhTWFuYWdlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRCdXN5KHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IHRoaXMuZGF0YS5nZXREYXRhKGFyZ3MsIHRoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmRpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXMgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyID0gZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMudmFsaWRhdGVHcm91cFJlY29yZHMoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJGYWlsdXJlKGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5zZW5kQnVsa1JlcXVlc3QgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5kYXRhLnNhdmVDaGFuZ2VzKGFyZ3MuY2hhbmdlcywgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKVswXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2Uub2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFNYW5hZ2VyKHsgcmVxdWVzdFR5cGU6ICdiYXRjaHNhdmUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZG1TdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRtRmFpbHVyZShlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZG1TdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRtRmFpbHVyZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyRmFpbHVyZShlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eVJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW1wdHlSb3codHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZW1wdHlSb3cgPSBmdW5jdGlvbiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHlyb3cnIH0pO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW1wdHlSZWNvcmQnKSxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBjb2xzcGFuOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJFbXB0eSh0Ym9keSk7XG4gICAgICAgICAgICBpZiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuZGF0YUJvdW5kLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlQ29sdW1uVHlwZSA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSByZWNvcmQgJiYgcmVjb3JkLml0ZW1zID8gcmVjb3JkLml0ZW1zWzBdIDogcmVjb3JkO1xuICAgICAgICAgICAgdmFyIGZtdHIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBlajJfYmFzZV8yLmdldFZhbHVlKGNvbHVtbnNbaV0uZmllbGQgfHwgJycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbFR5cGVEZWYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbHVtbnNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS50eXBlID0gdmFsdWUuZ2V0RGF5ID8gKHZhbHVlLmdldEhvdXJzKCkgPiAwIHx8IHZhbHVlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5nZXRTZWNvbmRzKCkgPiAwIHx8IHZhbHVlLmdldE1pbGxpc2Vjb25kcygpID4gMCA/ICdkYXRldGltZScgOiAnZGF0ZScpIDogdHlwZW9mICh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoY29sdW1uc1tpXS5mb3JtYXQpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2x1bW5zW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRGb3JtYXR0ZXIoZm10ci5nZXRGb3JtYXRGdW5jdGlvbih7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghY29sdW1uc1tpXS5mb3JtYXQgJiYgY29sdW1uc1tpXS50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogJ24yJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0udHlwZSA9IGNvbHVtbnNbaV0udHlwZSB8fCBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlclN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlRGF0YUJvdW5kLCBlKTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBPYmplY3Qua2V5cyhlLnJlc3VsdCkubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgZ09iai5jdXJyZW50Vmlld0RhdGEgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgIGlmICghbGVuICYmIGUuY291bnQgJiYgZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlc09uSW5pdGlhbFJlbmRlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NvbFR5cGVEZWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtblR5cGUoZS5yZXN1bHRbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kYXRhUmVhZHksIGVqMl9iYXNlXzIuZXh0ZW5kKHsgY291bnQ6IGUuY291bnQsIHJlc3VsdDogZS5yZXN1bHQsIGFnZ3JlZ2F0ZXM6IGUuYWdncmVnYXRlcyB9LCBhcmdzKSk7XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIHx8IChhcmdzICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICd1bmdyb3VwaW5nJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlZnJlc2hDb250ZW50Um93cyhhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5sMTBuLmdldENvbnN0YW50KCdFbXB0eURhdGFTb3VyY2VFcnJvcicpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5zZXRSb3dFbGVtZW50cyhbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoYXJncy5yZXF1ZXN0VHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSArICctY29tcGxldGUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoYWN0aW9uLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZGF0YU1hbmFnZXJGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgeyBidXN5OiBmYWxzZSwgaW52YWxpZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlSb3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVzT25Jbml0aWFsUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb2x1bW5zKGUucmVzdWx0WzBdKTtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5idWlsZENvbHVtbnMgPSBmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IE9iamVjdC5rZXlzKHJlY29yZCk7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2xzW2ldID0geyAnZmllbGQnOiBjb2x1bW5zW2ldIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHNbaV0ud2lkdGggPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2xzW2ldLndpZHRoKSA/IGNvbHNbaV0ud2lkdGggOiAyMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1ucyA9IGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHZhciBjZWxscmVuZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIG5ldyBoZWFkZXJfY2VsbF9yZW5kZXJlcl8xLkhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGF0YSwgbmV3IGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIG5ldyBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMS5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5JbmRlbnQsIG5ldyBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLkluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uLCBuZXcgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEuR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eSwgbmV3IGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLkdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5FeHBhbmQsIG5ldyBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLkV4cGFuZENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50LCBuZXcgaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLkhlYWRlckluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgbmV3IHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlciwgbmV3IGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEuRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQsIG5ldyBkZXRhaWxfZXhwYW5kX2NlbGxfcmVuZGVyZXJfMS5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlZnJlc2hDb21wbGV0ZSwgdGhpcy5yZWZyZXNoQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmJ1bGtTYXZlLCB0aGlzLnNlbmRCdWxrUmVxdWVzdCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudmFsaWRhdGVHcm91cFJlY29yZHMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGUucmVzdWx0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBncm91cDAgPSBlLnJlc3VsdFswXTtcbiAgICAgICAgICAgIHZhciBncm91cE4gPSBlLnJlc3VsdFtpbmRleF07XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gW107XG4gICAgICAgICAgICB2YXIgYWRkV2hlcmUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUucHVzaChuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoJ2ZpZWxkJywgJz09JywgZ3JvdXAuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGdyb3VwLmtleSkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dC53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihwcmVkaWNhdGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICAgICAgYWRkV2hlcmUocXVlcnkpO1xuICAgICAgICAgICAgdmFyIGN1ckRtID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZS5yZXN1bHQpO1xuICAgICAgICAgICAgdmFyIGN1ckZpbHRlciA9IGN1ckRtLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICB2YXIgbmV3UXVlcnkgPSB0aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKTtcbiAgICAgICAgICAgIHZhciByUHJlZGljYXRlID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmlzUmVtb3RlKCkpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByUHJlZGljYXRlLnB1c2goX3RoaXMuZ2V0UHJlZGljYXRlKGdyb3VwLmZpZWxkLCAnZXF1YWwnLCBncm91cC5rZXkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdRdWVyeS53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihyUHJlZGljYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRXaGVyZShuZXdRdWVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgZWoyX2RhdGFfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLmdldERhdGEoe30sIG5ld1F1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlR3JvdXBJbmZvKGN1ckZpbHRlciwgci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmdldFByZWRpY2F0ZSA9IGZ1bmN0aW9uIChrZXksIG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0RGF0ZVByZWRpY2F0ZSh7IGZpZWxkOiBrZXksIG9wZXJhdG9yOiBvcGVyYXRvciwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlR3JvdXBJbmZvID0gZnVuY3Rpb24gKGN1cnJlbnQsIHVudG91Y2hlZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkbSA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHVudG91Y2hlZCk7XG4gICAgICAgICAgICBjdXJyZW50LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXAgPSBkbS5leGVjdXRlTG9jYWwobmV3IGVqMl9kYXRhXzEuUXVlcnkoKVxuICAgICAgICAgICAgICAgICAgICAud2hlcmUobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKCdmaWVsZCcsICc9PScsIGVsZW1lbnQuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGVsZW1lbnQua2V5KSkpKVswXTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNvdW50ID0gdUdyb3VwLmNvdW50O1xuICAgICAgICAgICAgICAgIHZhciBpdGVtR3JvdXAgPSBlbGVtZW50Lml0ZW1zO1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXBJdGVtID0gdUdyb3VwLml0ZW1zO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtR3JvdXAuR3JvdXBHdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXRlbXMgPSBfdGhpcy51cGRhdGVHcm91cEluZm8oZWxlbWVudC5pdGVtcywgdUdyb3VwLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlIGluc3RhbmNlb2YgQXJyYXkgPyBjb2x1bW4udHlwZSA6IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFnZ3JlZ2F0ZXNba2V5XSA9IHV0aWxfMS5jYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgaXRlbUdyb3VwLmxldmVsID8gdUdyb3VwSXRlbS5yZWNvcmRzIDogdUdyb3VwLml0ZW1zLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyID0gUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlbnVtXzEsIHJvd19yZW5kZXJlcl8xLCBjZWxsXzEsIHJvd18xLCBldmVudHMsIGVqMl9iYXNlXzQsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVyUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyUmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCEoZ09iai5hbGxvd1Jlb3JkZXJpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2Nsb25lIGUtaGVhZGVyY2xvbmUnIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnNlbmRlci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJjZWxsZGl2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2Jyk7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC50ZXh0Q29udGVudCA9IGhlYWRlcmNlbGxkaXYgP1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkJ5VWlkKGhlYWRlcmNlbGxkaXYuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuaGVhZGVyVGV4dCA6IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSAoaGVpZ2h0IC0gNikudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnLCBfdGhpcy5jb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7IHRhcmdldDogZS50YXJnZXQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBldmVudDogZS5ldmVudCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3Nlc3QgfHwgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcnVwYXJyb3cnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1yZW9yZGVyZG93bmFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjYW5jZWw7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgaWYgKCghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpICYmICF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpIHx8XG4gICAgICAgICAgICAgICAgICAgICghZ09iai5hbGxvd1Jlb3JkZXJpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWUuaGVscGVyLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBldmVudDogZS5ldmVudCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGNhbmNlbDogY2FuY2VsIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHVpZCA9IGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAhKGdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuaGVhZGVyRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCB1aWQ6IHVpZCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnd2lkdGhTZXJ2aWNlJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuc2V0VmlzaWJsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLnJlZnJlc2hVSSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJUYWJsZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJhZygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS50SGVhZC5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyB9IH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHRoZWFkID0gZmluZEhlYWRlclJvdy50aGVhZDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7IGNsYXNzTmFtZTogJ2UtaGlkZScgfSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgcm93Qm9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBib2R5Q2VsbDtcbiAgICAgICAgICAgIHZhciByb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3dzW2ldLmNlbGxzW2pdO1xuICAgICAgICAgICAgICAgICAgICBib2R5Q2VsbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgcm93Qm9keS5hcHBlbmRDaGlsZChib2R5Q2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgfHwgZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgnZS1zb3J0ZmlsdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvd0JvZHkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRhYmxlLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgICAgICB2YXIgY29sSGVhZGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1jb2x1bW5oZWFkZXInIH0pO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGNvbEhlYWRlcjtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93O1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMuZ2V0T2JqRGVwdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhpKTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5lbnN1cmVDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMuZ2V0SGVhZGVyQ2VsbHMocm93cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb2xEZXB0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93ID0gcm93UmVuZGVyZXIucmVuZGVyKHJvd3NbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHtcbiAgICAgICAgICAgICAgICB0aGVhZDogdGhlYWQsXG4gICAgICAgICAgICAgICAgcm93czogcm93c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmaW5kSGVhZGVyUm93O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUoY29sLCB7ICdkaXNwbGF5JzogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmVuc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW5fMiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbl8yOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoYykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29sc1tpXSwgcm93cywgMCwgaSA9PT0gMCwgZmFsc2UsIGkgPT09IChsZW4gLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDZWxscyA9IGZ1bmN0aW9uIChjb2xzLCByb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbCwgaXNMYXN0Q29sKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbCA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGNvbHMsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIHRoaXMuY29sRGVwdGggLSBpbmRleCwgKGlzRmlyc3RPYmogPyAnJyA6IChpc0ZpcnN0Q29sID8gJ2UtZmlyc3RjZWxsJyA6ICcnKSkgKyBsYXN0Q29sLCBpbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZChjb2xzLnVpZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ250KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaW5kZXhdLmNlbGxzLnB1c2gobmV3IGNlbGxfMS5DZWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgY29sdW1uOiBjb2xzLCBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gdGhpcy5hcHBlbmRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIHJvd3MsIGluZGV4ICsgMSwgaXNGaXJzdE9iaiwgaSA9PT0gMCwgaSA9PT0gKGxlbiAtIDEpICYmIGlzTGFzdENvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBjZWxsVHlwZSwgcm93U3BhbiwgY2xhc3NOYW1lLCByb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlLFxuICAgICAgICAgICAgICAgICdyb3dTcGFuJzogcm93U3BhbixcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdpbmRleCc6IHJvd0luZGV4LFxuICAgICAgICAgICAgICAgICdjb2xJbmRleCc6IGNvbEluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFvcHQucm93U3BhbiB8fCBvcHQucm93U3BhbiA8IDIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0LnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRSb3dzKCkpO1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlWYWwgPSAnJztcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgY2xlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgY2xlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICAgICAgaWR4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVZhbCA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmdldENvbEdyb3VwKCkuY2hpbGROb2Rlc1tpZHhdLCB7ICdkaXNwbGF5JzogZGlzcGxheVZhbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0YWJsZS5yZW1vdmVDaGlsZCh0YWJsZS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0gdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUoZmluZEhlYWRlclJvdy50aGVhZCwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEJlZm9yZSh0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKSwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ29udGVudCh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb0NvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7fSk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93VGV4dFdyYXAgJiYgdGhpcy5wYXJlbnQudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSA9PT0gJ2hlYWRlcicpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChyb3dzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0T2JqRGVwdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWF4ID0gMDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcHRoID0gdGhpcy5jaGVja0RlcHRoKGNvbHNbaV0sIDApO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPCBkZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBkZXB0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF4ICsgMTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jaGVja0RlcHRoID0gZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5jaGVja0RlcHRoKGNvbC5jb2x1bW5zW2ldLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENlbGxDbnQgPSBmdW5jdGlvbiAoY29sLCBjbnQpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2wuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjbnQgPSB0aGlzLmdldENlbGxDbnQoY29sLmNvbHVtbnNbaV0sIGNudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUhlYWRlckRyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dSZW9yZGVyaW5nIHx8ICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwoZ09iai5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhlYWRlclJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZyA9IG5ldyBlajJfYmFzZV80LkRyYWdnYWJsZShoZWFkZXJSb3dzW2ldLCB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1oZWFkZXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3AsXG4gICAgICAgICAgICAgICAgICAgIGFib3J0OiAnLmUtcmhhbmRsZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUhlYWRlckRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfNC5Ecm9wcGFibGUoZ09iai5nZXRIZWFkZXJDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkhlYWRlclJlbmRlciA9IEhlYWRlclJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY29uc3RhbnRfMSwgdXRpbF8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd1JlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93UmVuZGVyZXIoc2VydmljZUxvY2F0b3IsIGNlbGxUeXBlLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGF0dHJzOiB7IHJvbGU6ICdyb3cnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmNlbGxUeXBlID0gY2VsbFR5cGU7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgaXNDaGFuZ2VkLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHJvdy5kYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvdy5jaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93LnVpZCArICddJyk7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHRyLmNlbGxzKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxzXzEgPSBjZWxsczsgX2kgPCBjZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHJvd0FyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgY2VsbEFyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgYXR0ckNvcHkgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgYXR0cmlidXRlcywge30pO1xuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLmluZGV4T2Yocm93LmluZGV4KSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21Sb3codHIsIHJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModHIsIGF0dHJDb3B5KTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIHJvdy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXJGYWN0ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93LmNlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgY2VsbC5pc1NlbGVjdGVkID0gcm93LmlzU2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSB8fCBlbnVtXzEuQ2VsbFR5cGUuRGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gY2VsbFJlbmRlcmVyLnJlbmRlcihyb3cuY2VsbHNbaV0sIHJvdy5kYXRhLCB7ICdpbmRleCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHJvdy5pbmRleCkgPyByb3cuaW5kZXgudG9TdHJpbmcoKSA6ICcnIH0pO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmNlbGxzW2ldLmNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGNvbnN0YW50XzEucXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoY2VsbEFyZ3MsIHsgY2VsbDogdGQsIGNvbHVtbjogY2VsbC5jb2x1bW4gfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihjb25zdGFudF8xLnJvd0RhdGFCb3VuZCwgZWoyX2Jhc2VfMS5leHRlbmQocm93QXJncywgeyByb3c6IHRyIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKHJvdy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5idWlsZEF0dHJpYnV0ZUZyb21Sb3cgPSBmdW5jdGlvbiAodHIsIHJvdykge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAncm93aW5kZXgnOiAnYXJpYS1yb3dpbmRleCcsICdkYXRhVUlEJzogJ2RhdGEtdWlkJywgJ2FyaWFTZWxlY3RlZCc6ICdhcmlhLXNlbGVjdGVkJyB9O1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLXJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc0FsdFJvdykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1hbHRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLnJvd2luZGV4XSA9IHJvdy5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IHJvdy5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy51aWQpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuZGF0YVVJRF0gPSByb3cudWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmFyaWFTZWxlY3RlZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIGF0dHIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93UmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd1JlbmRlcmVyID0gUm93UmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvcm93LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsVHlwZTtcbiAgICAoZnVuY3Rpb24gKENlbGxUeXBlKSB7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGF0YVwiXSA9IDBdID0gXCJEYXRhXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSGVhZGVyXCJdID0gMV0gPSBcIkhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIlN1bW1hcnlcIl0gPSAyXSA9IFwiU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwU3VtbWFyeVwiXSA9IDNdID0gXCJHcm91cFN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJDYXB0aW9uU3VtbWFyeVwiXSA9IDRdID0gXCJDYXB0aW9uU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkZpbHRlclwiXSA9IDVdID0gXCJGaWx0ZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJJbmRlbnRcIl0gPSA2XSA9IFwiSW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBDYXB0aW9uXCJdID0gN10gPSBcIkdyb3VwQ2FwdGlvblwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwQ2FwdGlvbkVtcHR5XCJdID0gOF0gPSBcIkdyb3VwQ2FwdGlvbkVtcHR5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRXhwYW5kXCJdID0gOV0gPSBcIkV4cGFuZFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkhlYWRlckluZGVudFwiXSA9IDEwXSA9IFwiSGVhZGVySW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiU3RhY2tlZEhlYWRlclwiXSA9IDExXSA9IFwiU3RhY2tlZEhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRldGFpbEhlYWRlclwiXSA9IDEyXSA9IFwiRGV0YWlsSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGV0YWlsRXhwYW5kXCJdID0gMTNdID0gXCJEZXRhaWxFeHBhbmRcIjtcbiAgICB9KShDZWxsVHlwZSA9IGV4cG9ydHMuQ2VsbFR5cGUgfHwgKGV4cG9ydHMuQ2VsbFR5cGUgPSB7fSkpO1xuICAgIHZhciBSZW5kZXJUeXBlO1xuICAgIChmdW5jdGlvbiAoUmVuZGVyVHlwZSkge1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJIZWFkZXJcIl0gPSAwXSA9IFwiSGVhZGVyXCI7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIkNvbnRlbnRcIl0gPSAxXSA9IFwiQ29udGVudFwiO1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJTdW1tYXJ5XCJdID0gMl0gPSBcIlN1bW1hcnlcIjtcbiAgICB9KShSZW5kZXJUeXBlID0gZXhwb3J0cy5SZW5kZXJUeXBlIHx8IChleHBvcnRzLlJlbmRlclR5cGUgPSB7fSkpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvZW51bS5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbChvcHRpb25zKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsID0gQ2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3cob3B0aW9ucykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUm93O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3cgPSBSb3c7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL3Jvdy5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERhdGEocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaW5pdERhdGFNYW5hZ2VyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd3NSZW1vdmVkLCB0aGlzLnJlbW92ZVJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5pbml0RGF0YU1hbmFnZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYWRkRGVsZXRlQWN0aW9uLCB0aGlzLmdldERhdGEsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERhdGEucHJvdG90eXBlLmluaXREYXRhTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyID0gZ09iai5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/IGdPYmouZGF0YVNvdXJjZSA6XG4gICAgICAgICAgICAgICAgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5kYXRhU291cmNlKSA/IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKCkgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihnT2JqLmRhdGFTb3VyY2UpKTtcbiAgICAgICAgICAgIGdPYmoucXVlcnkgPSBnT2JqLnF1ZXJ5IGluc3RhbmNlb2YgZWoyX2RhdGFfMS5RdWVyeSA/IGdPYmoucXVlcnkgOiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKHNraXBQYWdlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gZ09iai5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgJiYgZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc1R5cGUgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sLmZpZWxkKS50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc1R5cGUgIT09ICdkYXRlJyAmJiBzVHlwZSAhPT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUoY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgIWNvbC5tYXRjaENhc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUodGhpcy5nZXREYXRlUHJlZGljYXRlKGNvbCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBzU2V0dGluZ3MgPSBnT2JqLnNlYXJjaFNldHRpbmdzO1xuICAgICAgICAgICAgICAgIHNTZXR0aW5ncy5maWVsZHMgPSBzU2V0dGluZ3MuZmllbGRzLmxlbmd0aCA/IHNTZXR0aW5ncy5maWVsZHMgOiBnT2JqLmdldENvbHVtbkZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgICAgICBxdWVyeS5zZWFyY2goc1NldHRpbmdzLmtleSwgc1NldHRpbmdzLmZpZWxkcywgc1NldHRpbmdzLm9wZXJhdG9yLCBzU2V0dGluZ3MuaWdub3JlQ2FzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlIGluc3RhbmNlb2YgQXJyYXkgPyBjb2x1bW4udHlwZSA6IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHF1ZXJ5LmFnZ3JlZ2F0ZSh0eXBlLCBjb2x1bW4uZmllbGQpOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKChnT2JqLmFsbG93U29ydGluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpICYmIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIHZhciBzb3J0R3JwID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbnMubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS5zb3J0QnkoY29sdW1uc1tpXS5maWVsZCwgY29sdW1uc1tpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEdycC5wdXNoKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzb3J0R3JwLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnNvcnRCeShzb3J0R3JwW2ldLmZpZWxkLCBzb3J0R3JwW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChnT2JqLmFsbG93UGFnaW5nIHx8IGdPYmouZW5hYmxlVmlydHVhbGl6YXRpb24pICYmIHNraXBQYWdlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucGFnZShnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSwgZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lmdyb3VwKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uIChhcmdzLCBxdWVyeSkge1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0geyByZXF1ZXN0VHlwZTogJycgfTsgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KGFyZ3MuZm9yZWlnbktleURhdGEgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhcmdzLmZvcmVpZ25LZXlEYXRhKS5sZW5ndGggP1xuICAgICAgICAgICAgICAgIGFyZ3MuZm9yZWlnbktleURhdGEgOiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5yZXF1ZXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgPyBxdWVyeSA6IHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLnJlbW92ZShrZXksIGFyZ3MuZGF0YVswXSwgbnVsbCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuaW5zZXJ0KGFyZ3MuZGF0YSwgbnVsbCwgcXVlcnksIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYW5hZ2VyLmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmNydWRBY3Rpb25zID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHByID0gJ3Byb21pc2UnO1xuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KGFyZ3MuZm9yZWlnbktleURhdGEgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhcmdzLmZvcmVpZ25LZXlEYXRhKS5sZW5ndGggPyBhcmdzLmZvcmVpZ25LZXlEYXRhIDpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5yZXF1ZXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5kYXRhTWFuYWdlci51cGRhdGUoa2V5LCBhcmdzLmRhdGEsIG51bGwsIHRoaXMuZ2VuZXJhdGVRdWVyeSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzW3ByXSA9IHByb21pc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNydWRBY3Rpb24sIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5kYXRhTWFuYWdlci5zYXZlQ2hhbmdlcyhjaGFuZ2VzLCBrZXksIG51bGwsIHRoaXMuZ2VuZXJhdGVRdWVyeSgpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5pc1JlbW90ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2Uub2ZmbGluZSAhPT0gdHJ1ZSAmJiB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UudXJsICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldERhdGVQcmVkaWNhdGUgPSBmdW5jdGlvbiAoZmlsdGVyT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgcHJldkRhdGU7XG4gICAgICAgICAgICB2YXIgbmV4dERhdGU7XG4gICAgICAgICAgICB2YXIgcHJldk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciBuZXh0T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoZmlsdGVyT2JqZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIHByZXZEYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgLSAxKSk7XG4gICAgICAgICAgICBuZXh0RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpICsgMikpO1xuICAgICAgICAgICAgcHJldk9iai52YWx1ZSA9IHByZXZEYXRlO1xuICAgICAgICAgICAgbmV4dE9iai52YWx1ZSA9IG5leHREYXRlO1xuICAgICAgICAgICAgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJykge1xuICAgICAgICAgICAgICAgIHByZXZPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW4nO1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdsZXNzdGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW5vcmVxdWFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVTdCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShwcmV2T2JqLmZpZWxkLCBwcmV2T2JqLm9wZXJhdG9yLCBwcmV2T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlRW5kID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKG5leHRPYmouZmllbGQsIG5leHRPYmoub3BlcmF0b3IsIG5leHRPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcgPyBwcmVkaWNhdGVTdC5hbmQocHJlZGljYXRlRW5kKSA6IHByZWRpY2F0ZVN0Lm9yKHByZWRpY2F0ZUVuZCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmFkZFJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGUucmVjb3Jkcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbi5zcGxpY2UoZS50b0luZGV4LCAwLCBlLnJlY29yZHNbaSAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUucmVtb3ZlUm93cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uO1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24gPSBqc29uLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiBlLmluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT09IC0xOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yZW1vdmVSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmFkZERlbGV0ZUFjdGlvbiwgdGhpcy5nZXREYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGEgPSBEYXRhO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRlbnRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2x1bW5Ecm9wLCB7IHRhcmdldDogZS50YXJnZXQsIGRyb3BwZWRFbGVtZW50OiBlLmRyb3BwZWRFbGVtZW50IH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGUuZHJvcHBlZEVsZW1lbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmFmQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeShfdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29udGVudFJlYWR5LCB7fSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmRhdGFCb3VuZCwge30pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoX3RoaXMuYXJncy5yZXF1ZXN0VHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSArICctY29tcGxldGUnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGFjdGlvbiwgX3RoaXMuYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnYXJpYVNlcnZpY2UnKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5nZXRNb2RlbEdlbmVyYXRvcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5jb2xHcm91cFJlZnJlc2gsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkY29udGVudCcgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNvbnRlbnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnMoaW5uZXJEaXYsIHsgYnVzeTogZmFsc2UgfSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZShjb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwge1xuICAgICAgICAgICAgICAgIG11bHRpc2VsZWN0YWJsZTogdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb250ZW50RHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jcmVhdGVDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzcGFjaW5nOiAnMC4yNXB4Jywgcm9sZTogJ2dyaWQnLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfY29udGVudF90YWJsZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKSk7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hDb250ZW50Um93cyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0ge307IH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IGdPYmouY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzID0gW107XG4gICAgICAgICAgICB2YXIgbW9kZWxEYXRhID0gdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5nZXRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW9kZWxEYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLnJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZ09iai5nZXRSb3dUZW1wbGF0ZSgpKGVqMl9iYXNlXzIuZXh0ZW5kKHsgaW5kZXg6IGkgfSwgZGF0YVNvdXJjZVtpXSkpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNUUiA9IGVsZW1lbnRzW2pdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0cic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUUiB8fCAoZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCAmJiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ciA9IGlzVFIgPyBlbGVtZW50c1tqXSA6IGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2gobW9kZWxEYXRhW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWxEYXRhW2ldLmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSB0ci5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsOm5vdCguZS1oaWRlKScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLmNsYXNzTGlzdC5hZGQoJ2UtZGV0YWlscm93dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RWxlbWVudHMucHVzaCh0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmdldFRhYmxlKCksIHsgY29sY291bnQ6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgICAgIHV0aWxfMS5nZXRVcGRhdGVVc2luZ1JhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFwcGVuZENvbnRlbnQodGJvZHksIGZyYWcsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgdGhpcy5yYWZDYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGJvZHksIGZyYWcsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0UGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRQYW5lbCA9IHBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VGFibGUgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlID0gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd0VsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRDb2xHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXAgPSBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMuZ2V0Um93cygpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdGVzdFJvdztcbiAgICAgICAgICAgIHJvd3Muc29tZShmdW5jdGlvbiAocikgeyBpZiAoci5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICB0ZXN0Um93ID0gcjtcbiAgICAgICAgICAgIH0gcmV0dXJuIHIuaXNEYXRhUm93OyB9KTtcbiAgICAgICAgICAgIHZhciB0YXNrcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuU2tpcChjb2x1bW4sIHRlc3RSb3csIGlkeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gY29sdW1uLnZpc2libGUgPT09IHRydWUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZE5vZGVzW2lkeF0sIHsgJ2Rpc3BsYXknOiBkaXNwbGF5VmFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ29udGVudFJvd3MoeyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jb2xHcm91cFJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDb2xHcm91cCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEdyb3VwID0gdGhpcy5nZXRDb2xHcm91cCgpO1xuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmlubmVySFRNTCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplQ29udGVudERyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUoZ09iai5nZXRDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNhblNraXAgPSBmdW5jdGlvbiAoY29sdW1uLCByb3csIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3cpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkgfHxcbiAgICAgICAgICAgICAgICByb3cuY2VsbHNbaW5kZXhdLnZpc2libGUgPT09IGNvbHVtbi52aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvciA9IHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgPyBuZXcgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCkgOiBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFNlbGVjdGlvbiA9IGZ1bmN0aW9uICh1aWQsIHNldCwgY2xlYXJBbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Um93cygpLmZpbHRlcihmdW5jdGlvbiAocm93KSB7IHJldHVybiBjbGVhckFsbCB8fCB1aWQgPT09IHJvdy51aWQ7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmlzU2VsZWN0ZWQgPSBzZXQ7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZW50UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZW50UmVuZGVyID0gQ29udGVudFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd18xLCBlbnVtXzEsIGNlbGxfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/IGFyZ3Muc3RhcnRJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoOyBpIDwgbGVuOyBpKyssIHN0YXJ0SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5lbnN1cmVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2xzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZXgsIGNzc0NsYXNzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBvcHRpb25zLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtcm93Jyk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb25zLmNzc0NsYXNzID0gY3NzQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zLmlzQWx0Um93ID0gdGhpcy5wYXJlbnQuZW5hYmxlQWx0Um93ID8gaW5kZXggJSAyICE9PSAwIDogZmFsc2U7XG4gICAgICAgICAgICBvcHRpb25zLmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKGluZGV4KSA+IC0xO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5lbnN1cmVDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IGNlbGxzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2VsbHMob3B0aW9ucykpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1taWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgZHVtbWllcy5mb3JFYWNoKGZ1bmN0aW9uIChkdW1teSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGR1bW15LCBvcHRpb25zLnVpZCwgdW5kZWZpbmVkLCBudWxsLCBpbmRleCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgcm93SWQsIGNlbGxUeXBlLCBjb2xTcGFuLCBvSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCB8fCBjb2x1bW4udGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiByb3dJZCxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGxUeXBlKSA/IGNlbGxUeXBlIDogZW51bV8xLkNlbGxUeXBlLkRhdGEsXG4gICAgICAgICAgICAgICAgJ2NvbFNwYW4nOiBjb2xTcGFuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdC5pc0RhdGFDZWxsKSB7XG4gICAgICAgICAgICAgICAgb3B0LmluZGV4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dNb2RlbEdlbmVyYXRvciA9IFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVqMl9iYXNlXzEsIGVudW1fMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cE1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwTW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwTW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zdW1tYXJ5TW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMuY2FwdGlvbk1vZGVsR2VuID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdlbmVyYXRlUm93cy5jYWxsKHRoaXMsIGRhdGEsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24gPyAodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSkgKiBkYXRhLnJlY29yZHMubGVuZ3RoIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcygwLCBkYXRhW2ldLCBkYXRhLmxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R3JvdXBlZFJlY29yZHMgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEsIHJhdykge1xuICAgICAgICAgICAgdmFyIGxldmVsID0gcmF3O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YS5pdGVtcykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkYXRhLkdyb3VwR3VpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLmNvbmNhdCh0aGlzLmdlbmVyYXRlRGF0YVJvd3MoZGF0YSwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKGluZGV4LCBkYXRhW2pdLCBkYXRhLmxldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHRoaXMucm93cy5jb25jYXQodGhpcy5nZW5lcmF0ZUNhcHRpb25Sb3coZGF0YSwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pdGVtcyAmJiBkYXRhLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKGluZGV4ICsgMSwgZGF0YS5pdGVtcywgZGF0YS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnJvd3MpLnB1c2guYXBwbHkoX2EsIHRoaXMuc3VtbWFyeU1vZGVsR2VuLmdlbmVyYXRlUm93cyhkYXRhLCB7IGxldmVsOiBsZXZlbCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDYXB0aW9uUm93Q2VsbHMgPSBmdW5jdGlvbiAoZmllbGQsIGluZGVudCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgdmFyIHZpc2libGVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMucGFyZW50LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBmaWVsZDsgfSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZExlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBpbmRleGVzLmluZGV4T2YoaW5kZW50KSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGVudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5FeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGVudCA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gMSA6XG4gICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoICsgZ3JvdXBlZExlbiArIChnT2JqLmRldGFpbFRlbXBsYXRlIHx8IGdPYmouY2hpbGRHcmlkID8gMSA6IDApIC1cbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ICsgKHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoID8gLTEgOiAwKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGggJiYgIXRoaXMuY2FwdGlvbk1vZGVsR2VuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uQ2VsbHMgPSB0aGlzLmNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoZGF0YSlbMF07XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQoZGF0YSwgY2FwdGlvbkNlbGxzLmRhdGEpO1xuICAgICAgICAgICAgICAgIHZpc2libGVzID0gY2FwdGlvbkNlbGxzLmNlbGxzLmZpbHRlcihmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IHZpc2libGVzLnNsaWNlKGdyb3VwZWRMZW4gKyAxLCB2aXNpYmxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHZpc2libGVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IFtjb2x1bW5dIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHZhciB3RmxhZyA9IHRydWU7XG4gICAgICAgICAgICBjb2xzLmZvckVhY2goZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wRmxhZyA9IHdGbGFnICYmIGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpICE9PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAodG1wRmxhZykge1xuICAgICAgICAgICAgICAgICAgICB3RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2VsbFR5cGUgPSAhX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IHRtcEZsYWcgP1xuICAgICAgICAgICAgICAgICAgICBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uIDogZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbkVtcHR5O1xuICAgICAgICAgICAgICAgIGluZGVudCA9IF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBjZWxsVHlwZSA9PT0gZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiA/IGluZGVudCArIGdyb3VwZWRMZW4gOiBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaChfdGhpcy5nZW5lcmF0ZUNlbGwoY29sdW1uLCBudWxsLCBjZWxsVHlwZSwgaW5kZW50KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNlbGxzLnB1c2guYXBwbHkoY2VsbHMsIHZpc2libGVzKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVDYXB0aW9uUm93ID0gZnVuY3Rpb24gKGRhdGEsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGRhdGEuZmllbGQpO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGRhdGEpO1xuICAgICAgICAgICAgaWYgKGNvbCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5maWVsZCA9IGRhdGEuZmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuaW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5nZXRDYXB0aW9uUm93Q2VsbHMoZGF0YS5maWVsZCwgaW5kZW50LCByb3cuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZURhdGFSb3dzID0gZnVuY3Rpb24gKGRhdGEsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhkYXRhW2ldLCB0aGlzLmluZGV4LCBpID8gdW5kZWZpbmVkIDogJ2UtZmlyc3RjaGlsZHJvdycsIGluZGVudCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbmRlbnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnVuc2hpZnQodGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUluZGVudENlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5JbmRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaW5wdXQuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJvdy5pbmRlbnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2Yocm93LmluZGVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMudW5zaGlmdChfdGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjUm93ID0gX3RoaXMuZ2VuZXJhdGVDYXB0aW9uUm93KHJvdy5kYXRhLCByb3cuaW5kZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gY1Jvdy5jZWxscztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwTW9kZWxHZW5lcmF0b3I7XG4gICAgfShyb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IpKTtcbiAgICBleHBvcnRzLkdyb3VwTW9kZWxHZW5lcmF0b3IgPSBHcm91cE1vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vbW9kZWxzL2NlbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfMSwgY29sdW1uXzEsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZW51bV8xLCBjZWxsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWdncmVnYXRlcy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gcm93LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoY29sdW1uLmZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IF90aGlzLmNvbHVtblNlbGVjdG9yKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IGNvbHVtbnM6IGNvbHVtbnMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBjb2x1bW5zLnB1c2gobmV3IGNvbHVtbl8xLkNvbHVtbih7fSkpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaChuZXcgY29sdW1uXzEuQ29sdW1uKHt9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW5zLnB1c2guYXBwbHkoY29sdW1ucywgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChpbnB1dCwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmJ1aWxkU3VtbWFyeURhdGEoaW5wdXQsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpLmZvckVhY2goZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByb3dzLnB1c2goX3RoaXMuZ2V0R2VuZXJhdGVkUm93KHJvdywgZGF0YVtpbmRleF0sIGFyZ3MgPyBhcmdzLmxldmVsIDogdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdlbmVyYXRlZFJvdyA9IGZ1bmN0aW9uIChzdW1tYXJ5Um93LCBkYXRhLCByYXcpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZW50cyA9IHRoaXMuZ2V0SW5kZW50QnlMZXZlbChyYXcpO1xuICAgICAgICAgICAgdmFyIGluZGVudExlbmd0aCA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggKyAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgPyAxIDogMCk7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsgcmV0dXJuIHRtcC5wdXNoKF90aGlzLmdldEdlbmVyYXRlZENlbGwodmFsdWUsIHN1bW1hcnlSb3csIGluZGV4ID49IGluZGVudExlbmd0aCA/IF90aGlzLmdldENlbGxUeXBlKCkgOiBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50LCBpbmRlbnRzW2luZGV4XSkpOyB9KTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KHsgZGF0YTogZGF0YSwgYXR0cmlidXRlczogeyBjbGFzczogJ2Utc3VtbWFyeXJvdycgfSB9KTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRtcDtcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gdG1wLnNvbWUoZnVuY3Rpb24gKGNlbGwpIHsgcmV0dXJuIGNlbGwuaXNEYXRhQ2VsbCAmJiBjZWxsLnZpc2libGU7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHZW5lcmF0ZWRDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgc3VtbWFyeVJvdywgY2VsbFR5cGUsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIHNDb2x1bW4gPSBzdW1tYXJ5Um93LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChzY29sdW1uKSB7IHJldHVybiBzY29sdW1uLmNvbHVtbk5hbWUgPT09IGNvbHVtbi5maWVsZDsgfSlbMF07XG4gICAgICAgICAgICB2YXIgYXR0cnMgPSB7ICdzdHlsZSc6IHsgJ3RleHRBbGlnbic6IGNvbHVtbi50ZXh0QWxpZ24gfSB9O1xuICAgICAgICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICAgICAgICAgIGF0dHJzLmNsYXNzID0gaW5kZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc0NvbHVtbiksXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiBzQ29sdW1uICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNDb2x1bW4uZm9vdGVyVGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgfHwgc0NvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IHNDb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBzQ29sdW1uIHx8IHt9LFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogYXR0cnMsXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogY2VsbFR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuYnVpbGRTdW1tYXJ5RGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGR1bW15ID0gW107XG4gICAgICAgICAgICB2YXIgc3VtbWFyeVJvd3MgPSB0aGlzLmdldERhdGEoKTtcbiAgICAgICAgICAgIHZhciBzaW5nbGUgPSB7fTtcbiAgICAgICAgICAgIHZhciBrZXkgPSAnJztcbiAgICAgICAgICAgIHN1bW1hcnlSb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHNpbmdsZSA9IHt9O1xuICAgICAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGUgPSBfdGhpcy5zZXRUZW1wbGF0ZShjb2x1bW4sIChhcmdzICYmIGFyZ3MuYWdncmVnYXRlcykgPyBhcmdzIDogZGF0YSwgc2luZ2xlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkdW1teS5wdXNoKHNpbmdsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkdW1teTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRJbmRlbnRCeUxldmVsID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuICdlLWluZGVudGNlbGx0b3AnOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChjb2x1bW4sIGRhdGEsIHNpbmdsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlO1xuICAgICAgICAgICAgdmFyIGhlbHBlciA9IHt9O1xuICAgICAgICAgICAgdmFyIGZvcm1hdEZuID0gY29sdW1uLmdldEZvcm1hdHRlcigpIHx8IChmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYTsgfTsgfSkoKTtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGRhdGE7XG4gICAgICAgICAgICBpZiAoISh0eXBlcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHR5cGVzID0gW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gY29sdW1uLmZpZWxkICsgJyAtICcgKyB0eXBlO1xuICAgICAgICAgICAgICAgIHZhciBkaXNwID0gY29sdW1uLmNvbHVtbk5hbWU7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGdyb3VwLmFnZ3JlZ2F0ZXMgJiYgZ3JvdXAuYWdncmVnYXRlc1trZXldID8gZ3JvdXAuYWdncmVnYXRlc1trZXldIDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBncm91cC5hZ2dyZWdhdGVzID8gZ3JvdXAucmVzdWx0IDogZGF0YSwgY29sdW1uLCBfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXSA9IHNpbmdsZVtkaXNwXSB8fCB7fTtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1ba2V5XSA9IHZhbDtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1bdHlwZV0gPSBmb3JtYXRGbih2YWwpO1xuICAgICAgICAgICAgICAgIGlmIChncm91cC5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0uZmllbGQgPSBncm91cC5maWVsZDtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdLmtleSA9IGdyb3VwLmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlbHBlci5mb3JtYXQgPSBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICBjb2x1bW4uc2V0VGVtcGxhdGUoaGVscGVyKTtcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGU7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLlN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAodiwgaW5keCkgeyByZXR1cm4gaW5keCA8PSBsZXZlbCAtIDEgPyAnJyA6ICdlLWluZGVudGNlbGx0b3AnOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluaXRWYWwgPSB7IGNvbHVtbnM6IFtdIH07XG4gICAgICAgICAgICByZXR1cm4gW19zdXBlci5wcm90b3R5cGUuZ2V0RGF0YS5jYWxsKHRoaXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXYuY29sdW1ucyA9IHByZXYuY29sdW1ucy5jb25jYXQoY3VyLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICB9LCBpbml0VmFsKV07XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZ2V0RGF0YSgpWzBdLmNvbHVtbnMgfHwgW10pLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXplciA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlciA9IGxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0dGVyLnRvVmlldyh2YWx1ZSwgY29sdW1uLmdldEZvcm1hdHRlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpdGVyYWxzID0gWydpbmRleCddO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNlbGwuY29sdW1uLmdldENvbHVtblRlbXBsYXRlKCkoZWoyX2Jhc2VfMS5leHRlbmQoeyAnaW5kZXgnOiBhdHRyaWJ1dGVzW2xpdGVyYWxzWzBdXSB9LCBkYXRhKSk7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKG5vZGUsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBub2RlLmlubmVyVGV4dCArICcgaXMgdGVtcGxhdGUgY2VsbCcgKyAnIGNvbHVtbiBoZWFkZXIgJyArXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmludm9rZUZvcm1hdHRlciA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdHRlcikpIHtcbiAgICAgICAgICAgICAgICBpZiAodXRpbF8xLmRvZXNJbXBsZW1lbnRJbnRlcmZhY2UoY29sdW1uLmZvcm1hdHRlciwgJ2dldFZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlciA9IGNvbHVtbi5mb3JtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IGZvcm1hdHRlcigpLmdldFZhbHVlKGNvbHVtbiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb2x1bW4uZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlcihjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb2x1bW4uZm9ybWF0dGVyLmdldFZhbHVlKGNvbHVtbiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZyZXNoQ2VsbChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVEQgPSBmdW5jdGlvbiAodGQsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5yZWZyZXNoQ2VsbChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChub2RlLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hDZWxsID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlubmVySHRtbCA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0KGNvbHVtbiwgdmFsdWUsIGRhdGEpO1xuICAgICAgICAgICAgaW5uZXJIdG1sID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzTnVsbCA9ICh2YWx1ZSAhPT0gJ3RydWUnICYmIHZhbHVlICE9PSAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmRpc3BsYXlBc0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckh0bWwgPSBpc051bGwgPyBudWxsIDogJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkaXNhYmxlZCAnICsgKHZhbHVlID09PSAndHJ1ZScgPyAnY2hlY2tlZCcgOiAnJykgKyAnLz4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsZVN0ciA9IGlzTnVsbCA/IG51bGwgOiB2YWx1ZSA9PT0gJ3RydWUnID8gJ1RydWUnIDogJ0ZhbHNlJztcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sID0gbG9jYWxlU3RyID8gdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQobG9jYWxlU3RyKSA6IGlubmVySHRtbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJvbUZvcm1hdHRlciA9IHRoaXMuaW52b2tlRm9ybWF0dGVyKGNvbHVtbiwgdmFsdWUsIGRhdGEpO1xuICAgICAgICAgICAgaW5uZXJIdG1sID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdHRlcikgPyBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZyb21Gb3JtYXR0ZXIpID8gJycgOiBmcm9tRm9ybWF0dGVyLnRvU3RyaW5nKCkgOiBpbm5lckh0bWw7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGlubmVySHRtbCArICcgY29sdW1uIGhlYWRlciAnICsgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ldmFsdWF0ZShub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSHRtbChub2RlLCBpbm5lckh0bWwsIGNvbHVtbi5nZXREb21TZXR0ZXIgPyBjb2x1bW4uZ2V0RG9tU2V0dGVyKCkgOiAnaW5uZXJIVE1MJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMobm9kZSwgY2VsbCwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCwgcHJvcGVydHkpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gdm9pZCAwKSB7IHByb3BlcnR5ID0gJ2lubmVySFRNTCc7IH1cbiAgICAgICAgICAgIG5vZGVbcHJvcGVydHldID0gaW5uZXJIdG1sO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwobm9kZSwgY2VsbCk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjZWxsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjb2x1bW4uY3VzdG9tQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLnRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUudGV4dEFsaWduID0gY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5idWlsZEF0dHJpYnV0ZUZyb21DZWxsID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwpIHtcbiAgICAgICAgICAgIHZhciBhdHRyID0ge307XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHsgJ2NvbGluZGV4JzogJ2FyaWEtY29saW5kZXgnIH07XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sU3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIuY29sU3BhbiA9IGNlbGwuY29sU3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLnJvd1NwYW4pIHtcbiAgICAgICAgICAgICAgICBhdHRyLnJvd1NwYW4gPSBjZWxsLnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLXRlbXBsYXRlY2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwuaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaC5hcHBseShjbGFzc2VzLCBbJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsLmluZGV4KSkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5jb2xpbmRleF0gPSBjZWxsLmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjZWxsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0ci5jbGFzcyA9IGNsYXNzZXM7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGF0dHIpO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4udmFsdWVBY2Nlc3Nvcihjb2x1bW4uZmllbGQsIGRhdGEsIGNvbHVtbik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDZWxsUmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxSZW5kZXJlciA9IENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSwgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIZWFkZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdjb2x1bW5oZWFkZXInLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2UgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIF90aGlzLmhUeHRFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVydGV4dCcgfSk7XG4gICAgICAgICAgICBfdGhpcy5zb3J0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc29ydGZpbHRlcmRpdiBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIF90aGlzLmd1aSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ndWkuY2xvbmVOb2RlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlcGFyZUhlYWRlcihjZWxsLCBub2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGNlbGwsIG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW4obm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVwYXJlSGVhZGVyKGNlbGwsIG5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUhlYWRlciA9IGZ1bmN0aW9uIChjZWxsLCBub2RlKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0ID0gdGhpcy5oVHh0RWxlLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgaGVhZGVyVGV4dFtjb2x1bW4uZ2V0RG9tU2V0dGVyKCldID0gdmFsdWU7XG4gICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChoZWFkZXJUZXh0KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpbm5lckRJViwge1xuICAgICAgICAgICAgICAgICdlLW1hcHBpbmd1aWQnOiBjb2x1bW4udWlkLFxuICAgICAgICAgICAgICAgICdjbGFzcyc6ICdlLWhlYWRlcmNlbGxkaXYnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVGcm9tQ2VsbChub2RlLCBjZWxsKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kSHRtbChub2RlLCBpbm5lckRJVik7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMuc29ydEVsZS5jbG9uZU5vZGUoKSk7XG4gICAgICAgICAgICBpZiAoY2VsbC5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2VsbC5jbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjb2x1bW4uY3VzdG9tQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIGFyaWFBdHRyLnNvcnQgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBhcmlhQXR0ci5ncmFiYmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNsYXNzTmFtZSA9IGNvbHVtbi5hbGxvd1Jlc2l6aW5nID8gJ2UtcmhhbmRsZXIgZS1yY3Vyc29yJyA6ICdlLXJzdXBwcmVzcyc7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyhub2RlLCBhcmlhQXR0cik7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRleHRBbGlnbikgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnRleHRBbGlnbikpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxpZ25tZW50ID0gY29sdW1uLmhlYWRlclRleHRBbGlnbiB8fCBjb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLnN0eWxlLnRleHRBbGlnbiA9IGFsaWdubWVudDtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ25tZW50ID09PSAncmlnaHQnIHx8IGFsaWdubWVudCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChhbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnZS1yaWdodGFsaWduJyA6ICdlLWxlZnRhbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5yb3dTcGFuKSA/IGNlbGwucm93U3BhbiA6IDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsICcxJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChpbm5lckh0bWwpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJDZWxsUmVuZGVyZXIgPSBIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFyaWFTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQXJpYVNlcnZpY2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZ1tuYW1lXSwgb3B0aW9uc1tuYW1lXSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCwgZXhwYW5kKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZXhwYW5kLCBleHBhbmQpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0U29ydCA9IGZ1bmN0aW9uICh0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLnNvcnQsIGRpcmVjdGlvbiwgdHlwZW9mIGRpcmVjdGlvbiA9PT0gJ2Jvb2xlYW4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEJ1c3kgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0J1c3kpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5idXN5LCBpc0J1c3kpO1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmludmFsaWQsIG51bGwsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0R3JhYmJlZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzR3JhYmJlZCwgcmVtb3ZlKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZ3JhYmJlZCwgaXNHcmFiYmVkLCByZW1vdmUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RHJvcFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzVGFyZ2V0KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZHJvcGVmZmVjdCwgJ2NvcHknLCAhaXNUYXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQXJpYVNlcnZpY2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFyaWFTZXJ2aWNlID0gQXJpYVNlcnZpY2U7XG4gICAgZnVuY3Rpb24gc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgYXR0cmlidXRlLCB2YWx1ZSwgcmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIGV4cGFuZDogJ2FyaWEtZXhwYW5kZWQnLFxuICAgICAgICByb2xlOiAncm9sZScsXG4gICAgICAgIHNlbGVjdGVkOiAnYXJpYS1zZWxlY3RlZCcsXG4gICAgICAgIG11bHRpc2VsZWN0YWJsZTogJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJyxcbiAgICAgICAgc29ydDogJ2FyaWEtc29ydCcsXG4gICAgICAgIGJ1c3k6ICdhcmlhLWJ1c3knLFxuICAgICAgICBpbnZhbGlkOiAnYXJpYS1pbnZhbGlkJyxcbiAgICAgICAgZ3JhYmJlZDogJ2FyaWEtZ3JhYmJlZCcsXG4gICAgICAgIGRyb3BlZmZlY3Q6ICdhcmlhLWRyb3BlZmZlY3QnLFxuICAgICAgICBoYXNwb3B1cDogJ2FyaWEtaGFzcG9wdXAnLFxuICAgICAgICBsZXZlbDogJ2FyaWEtbGV2ZWwnLFxuICAgICAgICBjb2xjb3VudDogJ2FyaWEtY29sY291bnQnXG4gICAgfTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwgZS1zdGFja2VkaGVhZGVyY2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdGFja2VkaGVhZGVyY2VsbGRpdicgfSk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY2VsbC5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi50b29sVGlwKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgY2VsbC5jb2x1bW4udG9vbFRpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjZWxsLmNvbHVtbi50ZXh0QWxpZ24pKSB7XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLnRleHRBbGlnbiA9IGNlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAnMScpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkluZGVudENlbGxSZW5kZXJlciA9IEluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5mb3JtYXQoY2VsbC5jb2x1bW4sIGNlbGwuY29sdW1uLnZhbHVlQWNjZXNzb3IoJ2tleScsIGRhdGEsIGNlbGwuY29sdW1uKSk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IGNlbGwuY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdmFsdWUgKyAnIC0gJyArIGRhdGEuY291bnQgKyAnICcgK1xuICAgICAgICAgICAgICAgIChkYXRhLmNvdW50IDwgMiA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KCdJdGVtJykgOiB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudCgnSXRlbXMnKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lckhUTUwgKyAnIGlzIGdyb3VwY2FwdGlvbiBjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciA9IEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB2YXIgR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2luZGVudC1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaW5kZW50X2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzZXhwYW5kJztcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScsIGRhdGEuZmllbGQpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmd2YWx1ZScsIGRhdGEua2V5KTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwYW5kQ2VsbFJlbmRlcmVyO1xuICAgIH0oaW5kZW50X2NlbGxfcmVuZGVyZXJfMS5JbmRlbnRDZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkV4cGFuZENlbGxSZW5kZXJlciA9IEV4cGFuZENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cHRvcGxlZnRjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbGRpdiBlLWVtcHR5Y2VsbCcsIGlubmVySFRNTDogJyZuYnNwOycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHljZWxsJyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkRldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kZXRhaWwtaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWRldGFpbHJvd2NvbGxhcHNlJyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScsIHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtZHRkaWFnb25hbHJpZ2h0IGUtaWNvbi1ncmlnaHRhcnJvdycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIgPSBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFJlbmRlcmVyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxSZW5kZXJNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBDZWxsUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5hZGRDZWxsUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgbmFtZSA9IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldENlbGxSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZSA6IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgY2VsbFJlbmRlcmVyIFwiICsgbmFtZSArIFwiIGlzIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlckZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxSZW5kZXJlckZhY3RvcnkgPSBDZWxsUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VydmljZUxvY2F0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTZXJ2aWNlTG9jYXRvcigpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBTZXJ2aWNlTG9jYXRvci5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZXJ2aWNlc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VzW25hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VydmljZUxvY2F0b3IucHJvdG90eXBlLmdldFNlcnZpY2UgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZXJ2aWNlc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSBzZXJ2aWNlIFwiICsgbmFtZSArIFwiIGlzIG5vdCByZWdpc3RlcmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlc1tuYW1lXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlcnZpY2VMb2NhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZXJ2aWNlTG9jYXRvciA9IFNlcnZpY2VMb2NhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJlbmRlcmVyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlbmRlcmVyRmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmFkZFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIHZhciByTmFtZSA9IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5SZW5kZXJUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVuZGVyZXJNYXBbck5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJNYXBbck5hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgck5hbWUgPSBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuUmVuZGVyVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSByZW5kZXJlciBcIiArIHJOYW1lICsgXCIgaXMgbm90IGZvdW5kXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlck1hcFtyTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW5kZXJlckZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlbmRlcmVyRmFjdG9yeSA9IFJlbmRlcmVyRmFjdG9yeTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjb25zdGFudF8xLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uV2lkdGhTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aFRvQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIHZhciB3RmxhZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uV2lkdGgobmV3IGNvbHVtbl8xLkNvbHVtbih7IHdpZHRoOiAnMzBweCcgfSksIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbldpZHRoKG5ldyBjb2x1bW5fMS5Db2x1bW4oeyB3aWR0aDogJzMwcHgnIH0pLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Q29sdW1uV2lkdGgoY29sdW1uLCB3RmxhZyA/IHVuZGVmaW5lZCA6IGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldENvbHVtbldpZHRoID0gZnVuY3Rpb24gKGNvbHVtbiwgaW5kZXgsIG1vZHVsZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCkgOiBpbmRleDtcbiAgICAgICAgICAgIHZhciBjV2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY1dpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRXaWR0aChjV2lkdGgsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoVG9UYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHsgaW5kZXg6IGNvbHVtbkluZGV4LCB3aWR0aDogY1dpZHRoLCBjb2x1bW46IGNvbHVtbiwgbW9kdWxlOiBtb2R1bGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgZldpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KHdpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDb2wgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ29sKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF0uc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXhdLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFNpYmxpbmdzSGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IHRoaXMuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbihlbGVtZW50LCAncHJldmlvdXMnKTtcbiAgICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICduZXh0Jyk7XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXMgKyBuZXh0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldEhlaWdodEZyb21EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2libGluZyA9IGVsZW1lbnRbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nW2RpcmVjdGlvbiArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgJiYgdGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludChjb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5taW5XaWR0aCAmJiB3aWR0aCA8IHBhcnNlSW50KGNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1pbldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGNvbHVtbi5tYXhXaWR0aCAmJiB3aWR0aCA+IHBhcnNlSW50KGNvbHVtbi5tYXhXaWR0aC50b1N0cmluZygpLCAxMCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5tYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0VGFibGVXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgdFdpZHRoID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgIT09IGZhbHNlICYmIGNXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0V2lkdGggKz0gcGFyc2VJbnQoY1dpZHRoLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdFdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9UYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQodGhpcy5nZXRUYWJsZVdpZHRoKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgdmFyIGVkaXQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlLmUtaW5saW5lLWVkaXQnKTtcbiAgICAgICAgICAgIGlmIChlZGl0KSB7XG4gICAgICAgICAgICAgICAgZWRpdC5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbldpZHRoU2VydmljZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uV2lkdGhTZXJ2aWNlID0gQ29sdW1uV2lkdGhTZXJ2aWNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUGFnZVNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQYWdlU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhZ2VTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEyKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFnZVNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg4KVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFnZUNvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwidG90YWxSZWNvcmRzQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5QYWdlU2V0dGluZ3MgPSBQYWdlU2V0dGluZ3M7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZWxlY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTZWxlY3Rpb24ocGFyZW50LCBzZWxlY3Rpb25TZXR0aW5ncywgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNldHRpbmdzID0gc2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBsb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChhcmdzLCB0eXBlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWxlY3Rpb24nO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc0VkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuaXNFZGl0O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8ICFzZWxlY3RlZFJvdyB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUm93U2VsZWN0ZWQgPSBzZWxlY3RlZFJvdy5oYXNBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIHZhciBpc1Rvb2dsZSA9IGluZGV4ID09PSB0aGlzLnByZXZSb3dJbmRleCAmJiBpc1Jvd1NlbGVjdGVkO1xuICAgICAgICAgICAgaWYgKCFpc1Rvb2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdERhdGEsIHJvd0luZGV4OiBpbmRleCwgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHJvdzogc2VsZWN0ZWRSb3csIHByZXZpb3VzUm93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LCB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9vZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKGluZGV4KTtcbiAgICAgICAgICAgIGlmICghaXNUb29nbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHJvdzogc2VsZWN0ZWRSb3csIHByZXZpb3VzUm93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LCB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RSb3dzQnlSYW5nZSA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzKHRoaXMuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93cyA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93ID0gZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcm93SW5kZXhlc1swXV07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIHJvd0luZGV4ZXM6IHJvd0luZGV4ZXMsIHJvdzogc2VsZWN0ZWRSb3csIHJvd0luZGV4OiByb3dJbmRleGVzWzBdLCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhXG4gICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSb3coKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93SW5kZXhlc18xID0gcm93SW5kZXhlczsgX2kgPCByb3dJbmRleGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcm93SW5kZXhlc18xW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1NlbGVjdGlvbihnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXgpLCByb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKHJvd0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRSb3dzVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93SW5kZXhlc18yID0gcm93SW5kZXhlczsgX2kgPCByb3dJbmRleGVzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcm93SW5kZXhlc18yW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcm93SW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciBpc1VuU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5pbmRleE9mKHJvd0luZGV4KSA+IC0xO1xuICAgICAgICAgICAgICAgIGdPYmouc2VsZWN0ZWRSb3dJbmRleCA9IHJvd0luZGV4O1xuICAgICAgICAgICAgICAgIGlmIChpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5zcGxpY2UodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCksIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3Jkcy5zcGxpY2UodGhpcy5zZWxlY3RlZFJlY29yZHMuaW5kZXhPZihzZWxlY3RlZFJvdyksIDEpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdy5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCBmYWxzZSwgbnVsbCwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgW3Jvd0luZGV4XSwgZGF0YSwgW3NlbGVjdGVkUm93XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSwgcm93SW5kZXg6IHJvd0luZGV4LCByb3c6IHNlbGVjdGVkUm93LCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1NlbGVjdGlvbihzZWxlY3RlZFJvdywgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd1Byb3BzKHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSwgcm93SW5kZXg6IHJvd0luZGV4LCByb3c6IHNlbGVjdGVkUm93LCB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRDb2xsZWN0aW9uRnJvbUluZGV4ZXMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICB2YXIgX2EgPSAoc3RhcnRJbmRleCA8IGVuZEluZGV4KSA/XG4gICAgICAgICAgICAgICAgeyBpOiBzdGFydEluZGV4LCBtYXg6IGVuZEluZGV4IH0gOiB7IGk6IGVuZEluZGV4LCBtYXg6IHN0YXJ0SW5kZXggfSwgaSA9IF9hLmksIG1heCA9IF9hLm1heDtcbiAgICAgICAgICAgIGZvciAoOyBpIDw9IG1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPiBlbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJSb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZSb3dJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzUm93U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggJiYgdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRSb3csIHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5wdXNoKHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMucHVzaChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICBzZWxlY3RlZFJvdy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCB0cnVlLCBudWxsLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICAgICAgaWYgKHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVt0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXV0pO1xuICAgICAgICAgICAgICAgICAgICByb3cucHVzaCh0aGlzLnBhcmVudC5nZXRSb3dzKClbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXgucHVzaCh0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd18xID0gdGhpcy5wYXJlbnQuZ2V0Um93QnlJbmRleCh0aGlzLnNlbGVjdGVkUm93SW5kZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93XzEucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHJvd18xLCBmYWxzZSwgdHJ1ZSwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGVkLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yb3dEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCByb3dJbmRleCwgZGF0YSwgcm93KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIHtcbiAgICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsIGRhdGE6IGRhdGEsIHJvdzogcm93XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGNlbGxJbmRleC5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkgfHwgIXNlbGVjdGVkQ2VsbCB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzQ2VsbFNlbGVjdGVkID0gc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgdmFyIGlzVXBkYXRlID0gISghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykgJiZcbiAgICAgICAgICAgICAgICBjZWxsSW5kZXgucm93SW5kZXggPT09IHRoaXMucHJldkNJZHhzLnJvd0luZGV4ICYmIGNlbGxJbmRleC5jZWxsSW5kZXggPT09IHRoaXMucHJldkNJZHhzLmNlbGxJbmRleCAmJlxuICAgICAgICAgICAgICAgIGlzQ2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgIGlmIChpc1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKCk7XG4gICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoY2VsbEluZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsc0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChzdGFydEluZGV4LnJvd0luZGV4LCBzdGFydEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICB2YXIgbWluO1xuICAgICAgICAgICAgdmFyIG1heDtcbiAgICAgICAgICAgIHZhciBzdEluZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHZhciBlZEluZGV4ID0gZW5kSW5kZXggPSBlbmRJbmRleCA/IGVuZEluZGV4IDogc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHZhciBjZWxsSW5kZXhlcztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gc3RhcnRJbmRleC5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBzdGFydEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKCk7XG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleC5yb3dJbmRleCA+IGVuZEluZGV4LnJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBlbmRJbmRleDtcbiAgICAgICAgICAgICAgICBlbmRJbmRleCA9IHRlbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleC5yb3dJbmRleDsgaSA8PSBlbmRJbmRleC5yb3dJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MuY2VsbFNlbGVjdGlvbk1vZGUgIT09ICdib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGkgPT09IHN0YXJ0SW5kZXgucm93SW5kZXggPyAoc3RhcnRJbmRleC5jZWxsSW5kZXgpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gaSA9PT0gZW5kSW5kZXgucm93SW5kZXggPyAoZW5kSW5kZXguY2VsbEluZGV4KSA6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBzdGFydEluZGV4LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZW5kSW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBtaW4gPCBtYXggPyBtaW4gOiBtYXgsIGxlbiA9IG1pbiA+IG1heCA/IG1pbiA6IG1heDsgaiA8PSBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoaSwgaik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcy5wdXNoKGopO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLnB1c2goeyByb3dJbmRleDogaSwgY2VsbEluZGV4ZXM6IGNlbGxJbmRleGVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoc3RJbmRleCwgZWRJbmRleCk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBzdGFydEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHMgPSBmdW5jdGlvbiAocm93Q2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSByb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjZWxsTGVuID0gcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXMubGVuZ3RoOyBqIDwgY2VsbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLmNlbGxJbmRleGVzW2pdIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0sIHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0pO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZENlbGxzVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgY2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4KTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY2VsbEluZGV4ZXNbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsSW5kZXhlc18xID0gY2VsbEluZGV4ZXM7IF9pIDwgY2VsbEluZGV4ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gY2VsbEluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSBjZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGlzVW5TZWxlY3RlZCA9IGluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsSWR4ID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2VsbElkeC5pbmRleE9mKGNlbGxJbmRleC5jZWxsSW5kZXgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIFt7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbY2VsbEluZGV4LmNlbGxJbmRleF0gfV0sIHNlbGVjdGVkRGF0YSwgW3NlbGVjdGVkQ2VsbF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsSWR4LnNwbGljZShzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5TZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXguY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oYXJncywgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXhlc1swXSwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jZWxsRGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgY2VsbEluZGV4ZXMsIGRhdGEsIGNlbGxzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIHtcbiAgICAgICAgICAgICAgICBjZWxsczogY2VsbHMsIGRhdGE6IGRhdGEsIGNlbGxJbmRleGVzOiBjZWxsSW5kZXhlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlQ2VsbFNlbGVjdGlvbiA9IGZ1bmN0aW9uIChzZWxlY3RlZENlbGwsIHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd0NlbGxJbmRleCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LmFkZCgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoY2VsbCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBjZWxsO1xuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgY2VsbC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Q0lkeHMgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzID0gZW5kSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCAmJiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJvd0NlbGxJbmRleCA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpc1Jvd0F2YWlsO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXggPT09IHJvd0NlbGxJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jvd0F2YWlsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSb3dBdmFpbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLmluZGV4T2Yocm93Q2VsbEluZGV4LmNlbGxJbmRleCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXMucHVzaChyb3dDZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbcm93Q2VsbEluZGV4LmNlbGxJbmRleF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGxzID0gdGhpcy5nZXRTZWxlY3RlZENlbGxzRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHZhciByb3dDZWxsID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVtyb3dDZWxsW2ldLnJvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjTGVuID0gcm93Q2VsbC5sZW5ndGg7IGogPCBjTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsW2ldLnJvd0luZGV4LCByb3dDZWxsW2ldLmNlbGxJbmRleGVzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGluZywgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZENlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCByb3dDZWxsLCBkYXRhLCBjZWxscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMgPSBjZWxscy5jb25jYXQoW10uc2xpY2UuY2FsbChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHgxID0gdGhpcy54O1xuICAgICAgICAgICAgdmFyIHkxID0gdGhpcy55O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgdmFyIHgyID0gcG9zaXRpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHkyID0gcG9zaXRpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICB2YXIgdG1wO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRoaXMucGFyZW50LmVsZW1lbnQub2Zmc2V0TGVmdCArIDIsIGUuY2xpZW50WSksICd0cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHgxID4geDIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB4MjtcbiAgICAgICAgICAgICAgICB4MiA9IHgxO1xuICAgICAgICAgICAgICAgIHgxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkxID4geTIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB5MjtcbiAgICAgICAgICAgICAgICB5MiA9IHkxO1xuICAgICAgICAgICAgICAgIHkxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0geTEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0geDIgLSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0geTIgLSB5MSArICdweCc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMuc3RhcnRJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZS1kaXNhYmxldXNlcnNlbGVjdCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LmJvZHksICdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICFlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc1NpbmdsZVNlbCgpIHx8IGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICd0ZCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy54ID0gcG9zdGlvbi54IC0gZ0JSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy55ID0gcG9zdGlvbi55IC0gZ0JSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkZHJhZ2FyZWEnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuY2xlYXJTZWxBZnRlclJlZnJlc2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jbGVhclNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuY2xlYXJTZWxBZnRlclJlZnJlc2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY2xlYXJTZWxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLnR5cGUpICYmIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5tb2RlKSB8fFxuICAgICAgICAgICAgICAgICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5jZWxsU2VsZWN0aW9uTW9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaGlkZVBvcFVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93c2VsZWN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGUuY3RybEtleSB8fCB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2g7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBlLnNoaWZ0S2V5O1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIocGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSwgcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCkpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3B1cChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucG9wVXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaG93UG9wdXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdXRpbF8xLnNldENzc0luR3JpZFBvcFVwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJyksIGUsICdlLXJvd3NlbGVjdCBlLWljb25zIGUtaWNvbi1yb3dzZWxlY3QnICtcbiAgICAgICAgICAgICAgICAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAxIHx8IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgJiYgIXRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSA/IHJvd0luZGV4IDogdGhpcy5wcmV2Um93SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSA/IHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9IDogdGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93c1RvU2VsZWN0aW9uKFtyb3dJbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2VsbHNUb1NlbGVjdGlvbihbeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjaGVja1Njcm9sbDtcbiAgICAgICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBjaGVja1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bkFycm93S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBjaGVja1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBBcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0QXJyb3dLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRBcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdob21lJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWVLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsSG9tZSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHJsSG9tZUtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW5kJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxFbmRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnREb3duJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdERvd25LZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRVcEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdFJpZ2h0S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0TGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRMZWZ0S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VzY2FwZSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsUGx1c0EnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybFBsdXNBKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbEVsZW0gPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCB8fCB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPyB0aGlzLnNlbGVjdGVkUmVjb3Jkc1swXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb3dCeUluZGV4KHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSByb3cub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSByb3cucm93SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEVsZW0uc2Nyb2xsVG9wID0gc2Nyb2xsRWxlbS5zY3JvbGxUb3AgKyAoZS5hY3Rpb24gPT09ICdkb3duQXJyb3cnID8gaGVpZ2h0IDogaGVpZ2h0ICogLTEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1Zpc2libGUocm93KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggIT09IDAgJiYgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbi5sZW5ndGggIT09IHJvd0luZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrVmlzaWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc3QgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgICAgIHZhciB5ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBzdDtcbiAgICAgICAgICAgIHJldHVybiB5ICsgMzYgPCAod2luZG93LmlubmVySGVpZ2h0ICsgc3QpIC0gdGhpcy5nZXRSb3dIZWlnaHQoZWxlbWVudCkgJiYgeSA+IChzdCAtIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KSArXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRSb3dIZWlnaHQoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Um93SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsUGx1c0EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSgwLCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSwgY2VsbEluZGV4OiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kb3duQXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5RG93blVwS2V5KDEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpICYmIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cEFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseURvd25VcEtleSgtMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCkgJiYgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCAtIDEgPiAtMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxID4gLTEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5RG93blVwS2V5ID0gZnVuY3Rpb24gKGtleSwgY29uZDEsIGNvbmQyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgY29uZDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhnT2JqLnNlbGVjdGVkUm93SW5kZXggKyBrZXkpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlVcERvd24oZ09iai5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiBjb25kMikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXksIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVVwRG93biA9IGZ1bmN0aW9uIChyb3dJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNJbmRleCA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMuY29udGVudFJlbmRlcmVyLmdldFJvd0J5SW5kZXgocm93SW5kZXgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjSW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJpZ2h0QXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByZVNlbGVjdGVkQ2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzO1xuICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgxLCAwLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubGVmdEFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVTZWxlY3RlZENlbGxJbmRleCA9IHRoaXMucHJldkVDSWR4cztcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoLTEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggLSAxID4gLTEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5UmlnaHRMZWZ0S2V5ID0gZnVuY3Rpb24gKGtleTEsIGtleTIsIGNvbmQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4O1xuICAgICAgICAgICAgdmFyIHJvd0luZGV4O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykpIHtcbiAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmQgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleTEgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5MSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleTE7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXkxID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5MSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0ga2V5MjtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggPSB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXkxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxIaWRlKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISgoY2VsbEluZGV4ID09PSAwICYmIHJvd0luZGV4ID09PSAwKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGNlbGxJbmRleCA9PT0gZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSAmJiByb3dJbmRleCA9PT0gZ09iai5nZXRSb3dzKCkubGVuZ3RoIC0gMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KGtleTEsIGtleTIsIGNvbmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHRoaXMucHJlU2VsZWN0ZWRDZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXhfMSA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0VsZW1lbnQgPSBlajJfYmFzZV8zLmNsb3Nlc3QodGhpcy50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsSW5kZXhfMSArIGtleTEgPiAtMSAmJiBjZWxsSW5kZXhfMSArIGtleTEgPCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY2VsbEluZGV4XzEgKyBrZXkxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkxICs9IGtleTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleShrZXkxLCBrZXkyLCBjb25kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5ob21lS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUhvbWVFbmRLZXkoeyByb3dJbmRleDogdGhpcy5jdXJyZW50SW5kZXggfHwgMCwgY2VsbEluZGV4OiAwIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmVuZEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlIb21lRW5kS2V5KHsgcm93SW5kZXg6IHRoaXMuY3VycmVudEluZGV4IHx8IDAsIGNlbGxJbmRleDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlIb21lRW5kS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsSGlkZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuY2VsbEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgtMSwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgxLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgoa2V5LnJvd0luZGV4LCBrZXkuY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnREb3duS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBlajJfYmFzZV8yLmlzVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgPyB0aGlzLnByZXZSb3dJbmRleCArIDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGdPYmouc2VsZWN0ZWRSb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggKyAxIDogZ09iai5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4IDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihlbmRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxLCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiAxLCBjZWxsSW5kZXg6IDAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnRVcEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBlajJfYmFzZV8yLmlzVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgPyAodGhpcy5wcmV2Um93SW5kZXggLSAxID4gLTEgPyAodGhpcy5wcmV2Um93SW5kZXggLSAxKSA6IDApIDpcbiAgICAgICAgICAgICAgICAgICAgKChnT2JqLnNlbGVjdGVkUm93SW5kZXggLSAxKSA+IC0xID8gZ09iai5zZWxlY3RlZFJvd0luZGV4IC0gMSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlVcERvd24oZW5kSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiYgKHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCAtIDEpID4gLTEgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxLCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdExlZnRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkoLTEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IC0gMSA+IC0xKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdFJpZ2h0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5KDEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkgPSBmdW5jdGlvbiAoa2V5LCBjb25kKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb25kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5IH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MuY2VsbFNlbGVjdGlvbk1vZGUgPT09ICdmbG93JyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGtleSA+IDAgPyB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplIDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4IC0gMSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0geyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5LCBjZWxsSW5kZXg6IGtleSA+IDAgPyAwIDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5LCBjZWxsSW5kZXg6IGtleSA+IDAgPyAwIDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGxJbmRleCkgJiYgdGhpcy5pc0NlbGxIaWRlKGNlbGxJbmRleCkgJiYgISgoY2VsbEluZGV4LnJvd0luZGV4ID09PSAwICYmIGNlbGxJbmRleC5jZWxsSW5kZXggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgICAgIChjZWxsSW5kZXgucm93SW5kZXggPT09IGdPYmouZ2V0Um93cygpLmxlbmd0aCAtIDEgJiYgY2VsbEluZGV4LmNlbGxJbmRleCA9PT0gZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5KGtleSwgY2VsbEluZGV4LmNlbGxJbmRleCA+IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmN0cmxIb21lS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUN0cmxIb21lRW5kS2V5KDAsIDApO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmN0cmxFbmRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5Q3RybEhvbWVFbmRLZXkodGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseUN0cmxIb21lRW5kS2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY29sSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjb2xJbmRleCB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxIaWRlKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNvbEluZGV4IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoLTEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoMSwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyA9IGZ1bmN0aW9uIChyb3csIGlzQWRkLCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNlbGxzW2ldLCBhcmdzLnNsaWNlKCksIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjZWxsc1tpXSwgW10sIGFyZ3Muc2xpY2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyZXIoKS5zZXRTZWxlY3Rpb24ocm93ID8gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGwsIGlzQWRkLCBjbGVhckFsbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNSb3dUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ3JvdycgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdjZWxsJyB8fCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdib3RoJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc1NpbmdsZVNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzQ2VsbEhpZGUgPSBmdW5jdGlvbiAoY2VsbEluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMucGFyZW50LmdldENvbHVtbnMoKVtjZWxsSW5kZXguY2VsbEluZGV4XS52aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50UmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIgPSB0aGlzLmZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UmVuZGVyZXI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvbiA9IFNlbGVjdGlvbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3NlbGVjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlYXJjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNlYXJjaCwgYXJnMTogc2VhcmNoU3RyaW5nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFN0cmluZyAhPT0gZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSA9IHNlYXJjaFN0cmluZztcbiAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMua2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nOiB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXksIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlYXJjaDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VhcmNoID0gU2VhcmNoO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VhcmNoLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2hvd0hpZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTaG93SGlkZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIHNob3dCeSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFRvZ2dsZUZpZWxkcyhjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKGtleXMsIHNob3dCeSk7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgaGlkZUJ5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgaGlkZUJ5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldFRvZ2dsZUZpZWxkcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBmaW5hbGl6ZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplZCA9IFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplZDtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgZ2V0S2V5QnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChrZXlzLCBmdW5jdGlvbiAoa2V5LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QoX3RoaXMucGFyZW50LmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2dldEtleUJ5XSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgY29sdW1ucyA9IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1ucykgPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiBjb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgY29sdW1ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTaG93SGlkZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2hvd0hpZGUgPSBTaG93SGlkZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Nob3ctaGlkZS5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGNvbnN0YW50XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2Nyb2xsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2Nyb2xsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZXMgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Njcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LndpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlICYmIHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUudG9vbGJhci5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLnJlZnJlc2hPdmVyZmxvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVPdmVyZmxvdyhjb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGgoKSAtIHRoaXMuZ2V0VGhyZXNob2xkKCk7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIGNvbnRlbnQuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gc2Nyb2xsV2lkdGggPiAwID8gJzFweCcgOiAnMHB4JztcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSBzY3JvbGxXaWR0aCA+IDAgPyBzY3JvbGxXaWR0aCArICdweCcgOiAnMHB4JztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVQYWRkaW5nID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5nZXRDc3NQcm9wZXJ0aWVzKHJ0bCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5wYXJlbnRFbGVtZW50LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgIT09ICcxMDAlJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy53aWR0aFNlcnZpY2UuZ2V0U2libGluZ3NIZWlnaHQoY29udGVudCk7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9ICdjYWxjKDEwMCUgLSAnICsgaGVpZ2h0ICsgJ3B4KSc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0VGhyZXNob2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFwcE5hbWUgPSBlajJfYmFzZV8xLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgaWYgKGFwcE5hbWUgPT09ICdtb3ppbGxhJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCB0aGlzLndpcmVFdmVudHMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHZhciBpc0hlYWRlciA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgc0xpbWl0ID0gdGFyZ2V0LnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBpc0Zvb3RlciA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3VtbWFyeWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9PT0gbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSAhaXNIZWFkZXIgPyBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgOiB0YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzRm9vdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlci5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLnNjcm9sbCwgeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25lVGltZVJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5jb250ZW50LCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5oZWFkZXIpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWFkZXIsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmNvbnRlbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0YWJsZS5zY3JvbGxIZWlnaHQgPCB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cjpsYXN0LWNoaWxkIHRkJyksICdlLWxhc3Ryb3djZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbExlZnQgPSB0aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IHRoaXMucHJldmlvdXNWYWx1ZXMudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldENzc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0ge307XG4gICAgICAgICAgICB2YXIgZW5hYmxlUnRsID0gZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChydGwpID8gdGhpcy5wYXJlbnQuZW5hYmxlUnRsIDogcnRsO1xuICAgICAgICAgICAgY3NzLmJvcmRlciA9IGVuYWJsZVJ0bCA/ICdib3JkZXJMZWZ0V2lkdGgnIDogJ2JvcmRlclJpZ2h0V2lkdGgnO1xuICAgICAgICAgICAgY3NzLnBhZGRpbmcgPSBlbmFibGVSdGwgPyAncGFkZGluZ0xlZnQnIDogJ3BhZGRpbmdSaWdodCc7XG4gICAgICAgICAgICByZXR1cm4gY3NzO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmVuc3VyZU92ZXJmbG93ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUub3ZlcmZsb3dZID0gdGhpcy5wYXJlbnQuaGVpZ2h0ID09PSAnYXV0bycgPyAnYXV0bycgOiAnc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaGVpZ2h0ID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhZGRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBhZGRpbmcoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkXSwgJ2UtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGRdLCAnZS1jb250ZW50Jyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5nZXRTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2Nyb2xsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TY3JvbGwgPSBTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFByaW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUHJpbnQocGFyZW50LCBzY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5jb250ZW50UmVhZHkuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IHNjcm9sbE1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBQcmludC5wcm90b3R5cGUucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pc1ByaW50aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGdPYmouZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93ID0gd2luZG93Lm9wZW4oJycsICdwcmludCcsICdoZWlnaHQ9JyArIHdpbmRvdy5vdXRlckhlaWdodCArICcsd2lkdGg9JyArIHdpbmRvdy5vdXRlcldpZHRoICsgJyx0YWJiYXI9bm8nKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cubW92ZVRvKDAsIDApO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5yZXNpemVUbyhzY3JlZW4uYXZhaWxXaWR0aCwgc2NyZWVuLmF2YWlsSGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucHJpbnRNb2RlID09PSAnY3VycmVudHBhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWFkeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BhZ2VyRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmFsbG93UGFnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuY29udGVudFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW50aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYWdlckRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZ09iai5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGFnZXJEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGdPYmouYWxsb3dQYWdpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLnNjcm9sbE1vZHVsZS5nZXRDc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY29udGVudCcpO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgIGhlYWRlckRpdi5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9ICcnO1xuICAgICAgICAgICAgICAgIGhlYWRlckRpdi5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDb2xHcm91cChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1ncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1pbmRlbnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRvb2xiYXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgJiYgZ09iai5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1maWx0ZXJiYXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hY3RpdmUnKSwgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2VsbHNlbGVjdGlvbjFiYWNrZ3JvdW5kJyksICdlLWNlbGxzZWxlY3Rpb24xYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdwcmludCcsIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3M6IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgndHJbYXJpYS1zZWxlY3RlZD1cInRydWVcIl0nKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlUHJpbnQsIGFyZ3MpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5wcmludCh0aGlzLmVsZW1lbnQsIHRoaXMucHJpbnRXaW5kb3cpO1xuICAgICAgICAgICAgdGhpcy5pc1ByaW50aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnByaW50Q29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUucmVtb3ZlQ29sR3JvdXAgPSBmdW5jdGlvbiAoZGVwdGgpIHtcbiAgICAgICAgICAgIHZhciBncm91cENhcHRpb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXBjYXB0aW9uJyk7XG4gICAgICAgICAgICB2YXIgY29sU3BhbiA9IGdyb3VwQ2FwdGlvbltkZXB0aCAtIDFdLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cENhcHRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBncm91cENhcHRpb25baV0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sU3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sR3JvdXBzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbEdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGVwdGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb2xHcm91cHNbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwcmludCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcmludDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUHJpbnQgPSBQcmludDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3ByaW50LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgZWoyX2Jhc2VfMywgdmFsdWVfZm9ybWF0dGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFnZ3JlZ2F0ZUNvbHVtbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBZ2dyZWdhdGVDb2x1bW4sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZUNvbHVtbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudGVtcGxhdGVGbiA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQgJiYgKHRoaXMuZm9ybWF0LnNrZWxldG9uIHx8IHRoaXMuZm9ybWF0LmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24odGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLmdldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEZuO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLnNldFRlbXBsYXRlID0gZnVuY3Rpb24gKGhlbHBlcikge1xuICAgICAgICAgICAgaWYgKGhlbHBlciA9PT0gdm9pZCAwKSB7IGhlbHBlciA9IHt9OyB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmZvb3RlclRlbXBsYXRlLCBoZWxwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZSwgaGVscGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmdyb3VwQ2FwdGlvblRlbXBsYXRlLCBoZWxwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCB0eXBlKV07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGVDb2x1bW47XG4gICAgfShlajJfYmFzZV8zLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJjb2x1bW5OYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJncm91cEZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZ3JvdXBDYXB0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJjdXN0b21BZ2dyZWdhdGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZUNvbHVtbiA9IEFnZ3JlZ2F0ZUNvbHVtbjtcbiAgICB2YXIgQWdncmVnYXRlUm93ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFnZ3JlZ2F0ZVJvdywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlUm93KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGVSb3c7XG4gICAgfShlajJfYmFzZV8zLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Db2xsZWN0aW9uKFtdLCBBZ2dyZWdhdGVDb2x1bW4pXG4gICAgXSwgQWdncmVnYXRlUm93LnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGVSb3cgPSBBZ2dyZWdhdGVSb3c7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2FnZ3JlZ2F0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kYXRhXzEsIGVqMl9iYXNlXzIsIGVqMl9idXR0b25zXzEsIGV2ZW50cywgZWoyX3BvcHVwc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5DaG9vc2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uQ2hvb3NlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGxnaGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsT3BlbkRsZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuaGlkZURpYWxvZy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJEbGdDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLmdldFNob3dIaWRlU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnc2hvd0hpZGVTZXJ2aWNlJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MnKSkgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldEVsZW1lbnQsICcuZS1jYy10b29sYmFyJykpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbHVtbmNob29zZXItYnRuJykgfHwgdGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtdG9vbGJhcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5pbml0aWFsT3BlbkRsZyAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB8fCAhdGhpcy5pc0RsZ09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jYy1jYW5jZWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2NzZWFyY2gnKS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJTZWFyY2goJycpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuaGlkZURpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmRsZ09iaikgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDb2x1bW5DaG9vc2VyID0gZnVuY3Rpb24gKHgsIHksIHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgICAgIHZhciBhcmdzMSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlcicsIGVsZW1lbnQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYmVmb3JlT3BlbkNvbHVtbkNob29zZXIsIGFyZ3MxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDaGVja2JveFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICc0MzBweCc7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRWaXNpYmxlID0gdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgdmFyIG5ld3BvcyA9IGVqMl9wb3B1cHNfMS5jYWxjdWxhdGVSZWxhdGl2ZUJhc2VkUG9zaXRpb24odGFyZ2V0LmNsb3Nlc3QoJy5lLXRvb2xiYXItaXRlbScpLCB0aGlzLmRsZ09iai5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBlbGVtZW50VmlzaWJsZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLnRvcCA9IG5ld3Bvcy50b3AgKyB0YXJnZXQuY2xvc2VzdCgnLmUtY2MtdG9vbGJhcicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgdmFyIGRsZ1dpZHRoID0gMjUwO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtYmlnZ2VyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLndpZHRoID0gMjUzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV2aWNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoub3BlbiA9IHRoaXMubU9wZW5EbGcuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IHRhcmdldC5vZmZzZXRMZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9ICgobmV3cG9zLmxlZnQgLSBkbGdXaWR0aCkgKyB0YXJnZXQuY2xvc2VzdCgnLmUtY2MtdG9vbGJhcicpLmNsaWVudFdpZHRoKSArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLm9wZW5Db2x1bW5DaG9vc2VyID0gZnVuY3Rpb24gKFgsIFkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbE9wZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5jb250ZW50ID0gdGhpcy5yZW5kZXJDaG9vc2VyTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKFgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLnRvcCA9IFkgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IFggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdPYmouc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJEbGdDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHk7XG4gICAgICAgICAgICB0aGlzLmRsZ0RpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjZGxnIGUtY2MnLCBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfY2NkbGcnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRsZ0Rpdik7XG4gICAgICAgICAgICB2YXIgeHBvcyA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSAyNTA7XG4gICAgICAgICAgICB2YXIgZGlhbG9Qb3MgPSB0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgICAgdmFyIHRhckVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjZGl2Jyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGFyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0geyBYOiBudWxsLCBZOiBudWxsIH07XG4gICAgICAgICAgICB0aGlzLmRsZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2hvb3NlQ29sdW1ucycpLFxuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXJlbnQuZWxlbWVudC5pZCksXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbmZpcm1EbGdCdG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGlzUHJpbWFyeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MgZS1jY19va2J0bicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsZWFyQWN0aW9ucy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQgZS1jYyBlLWNjLWNuYnRuJywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9XG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucmVuZGVyQ2hvb3Nlckxpc3QoKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogMjUwLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1jYycsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouYXBwZW5kVG8odGhpcy5kbGdEaXYpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDaG9vc2VyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1haW4tZGl2IGUtY2MnIH0pO1xuICAgICAgICAgICAgdmFyIHNlYXJjaERpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjLXNlYXJjaGRpdiBlLWNjIGUtaW5wdXQtZ3JvdXAnIH0pO1xuICAgICAgICAgICAgdmFyIGNjc2VhcmNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjc2VhcmNoIGUtY2MgZS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJykgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY2NzZWFyY2hpY29uID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjc2VhcmNoLWljb24gZS1pY29ucyBlLWNjIGUtaW5wdXQtZ3JvdXAtaWNvbicgfSk7XG4gICAgICAgICAgICB2YXIgY29uRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2MtY29udGVudGRpdicgfSk7XG4gICAgICAgICAgICB0aGlzLmlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaW5uZXJkaXYgZS1jYycgfSk7XG4gICAgICAgICAgICBzZWFyY2hEaXYuYXBwZW5kQ2hpbGQoY2NzZWFyY2hlbGUpO1xuICAgICAgICAgICAgc2VhcmNoRGl2LmFwcGVuZENoaWxkKGNjc2VhcmNoaWNvbik7XG4gICAgICAgICAgICBjY3NlYXJjaGVsZS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2NzZWFyY2hlbGUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2Q29udGVudCA9IHRoaXMucmVmcmVzaENoZWNrYm94TGlzdCh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChpbm5lckRpdkNvbnRlbnQpO1xuICAgICAgICAgICAgY29uRGl2LmFwcGVuZENoaWxkKHRoaXMuaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKHNlYXJjaERpdik7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYuYXBwZW5kQ2hpbGQoY29uRGl2KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5EaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbmZpcm1EbGdCdG5DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLmhpZGVDb2x1bW4sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLnNob3dDb2x1bW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NvbHVtbnN0YXRlJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMsIGRpYWxvZ0luc3RhbmNlOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2Uuc2V0VmlzaWJsZSh0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckFjdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdGVDb2x1bW5zLCBzdGF0ZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlQ29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sVWlkID0gc3RhdGVDb2x1bW5zW2luZGV4XS5yZXBsYWNlKCdlLWNjJywgJycpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoY29sVWlkKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sLnZpc2libGUgPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGVhckFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrc3RhdGVjb2x1bW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGUuZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHVuY2hlY2tDb2x1bW4gPSB0YXJnZXRFbGUuaWQ7XG4gICAgICAgICAgICBpZiAoZS5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4uc3BsaWNlKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4ucHVzaCh1bmNoZWNrQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbi5zcGxpY2UodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbiksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbi5wdXNoKHVuY2hlY2tDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3NlclNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHZhciBjbGVhclNlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGZsdHJDb2w7XG4gICAgICAgICAgICBpZiAoc2VhcmNoVmFsID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmx0ckNvbCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCdoZWFkZXJUZXh0JywgJ3N0YXJ0c3dpdGgnLCBzZWFyY2hWYWwsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbHRyQ29sLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuaW5uZXJIVE1MID0gJyAnO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnJlZnJlc2hDaGVja2JveExpc3QoZmx0ckNvbCwgc2VhcmNoVmFsKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbk1hdGNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjIGUtbm1hdGNoJyB9KTtcbiAgICAgICAgICAgICAgICBuTWF0Y2hlbGUuaW5uZXJIVE1MID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdNYXRjaHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmFwcGVuZENoaWxkKG5NYXRjaGVsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5jbGFzc0xpc3QuYWRkKCdlLWNjbm1kaXYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveExpc3QgPSBmdW5jdGlvbiAoZ2RDb2wsIHNlYXJjaFZhbCkge1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJywgeyBjbGFzc05hbWU6ICdlLWNjdWwtZWxlIGUtY2MnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZENvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ2RDb2xbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGVja2JveChjb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVsRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVmcmVzaENoZWNrYm94U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtaW5wdXQnKS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNjLWNoYm94JylbaV07XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGVsZW1lbnQuaWQucmVwbGFjZSgnZS1jYycsICcnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNoZWNrYm94ID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGNjbGlzdDtcbiAgICAgICAgICAgIHZhciBoaWRlQ29sU3RhdGU7XG4gICAgICAgICAgICB2YXIgc2hvd0NvbFN0YXRlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQm94T2JqO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5zaG93SW5Db2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgY2NsaXN0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsaScsIHsgY2xhc3NOYW1lOiAnZS1jY2xpc3QgZS1jYycsIHN0eWxlczogJ2xpc3Qtc3R5bGU6Tm9uZScsIGlkOiAnZS1jY2xpXycgKyBjb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjY2xhYmUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLWNjJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY2NjaGVja2JveGxpc3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjIGUtY2MtY2hib3ggJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdlLWNjJyArIGNvbHVtbi51aWQsIGF0dHJzOiB7IHR5cGU6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNjbGFiZS5hcHBlbmRDaGlsZChjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgaGlkZUNvbFN0YXRlID0gdGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoJ2UtY2MnICsgY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHNob3dDb2xTdGF0ZSA9IHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKCdlLWNjJyArIGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGVja0JveE9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgbGFiZWw6IGNvbHVtbi5oZWFkZXJUZXh0LCBjaGVja2VkOiB0cnVlLCBjaGFuZ2U6IHRoaXMuY2hlY2tzdGF0ZWNvbHVtbi5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoY29sdW1uLnZpc2libGUgJiYgIWhpZGVDb2xTdGF0ZSkgfHwgc2hvd0NvbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQm94T2JqLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hPYmouY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGVja0JveE9iai5hcHBlbmRUbyhjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgY2NsaXN0LmFwcGVuZENoaWxkKGNjbGFiZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2NsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSAhcHJveHkuZmxhZyAmJiBlLmtleUNvZGUgIT09IDEzID8gNTAwIDogMDtcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBwcm94eS5jb2x1bW5DaG9vc2VyU2VhcmNoKHByb3h5LnNlYXJjaFZhbHVlKTsgfSwgaW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuYWRkY2FuY2VsSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtY2NzZWFyY2gtaWNvbicpLmNsYXNzTGlzdC5hZGQoJ2UtY2MtY2FuY2VsJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5tT3BlbkRsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2Mtc2VhcmNoZGl2JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICAgICAgdmFyIGNoZWxlID0gdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpWzBdO1xuICAgICAgICAgICAgY2hlbGUuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29sdW1uQ2hvb3Nlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5DaG9vc2VyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5DaG9vc2VyID0gQ29sdW1uQ2hvb3Nlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80NF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2FjdGlvbnMvZGF0YVwiLCBcIi4vYWN0aW9ucy9zb3J0XCIsIFwiLi9hY3Rpb25zL3BhZ2VcIiwgXCIuL2FjdGlvbnMvc2VsZWN0aW9uXCIsIFwiLi9hY3Rpb25zL2ZpbHRlclwiLCBcIi4vYWN0aW9ucy9zZWFyY2hcIiwgXCIuL2FjdGlvbnMvc2Nyb2xsXCIsIFwiLi9hY3Rpb25zL3Jlc2l6ZVwiLCBcIi4vYWN0aW9ucy9yZW9yZGVyXCIsIFwiLi9hY3Rpb25zL3Jvdy1yZW9yZGVyXCIsIFwiLi9hY3Rpb25zL2dyb3VwXCIsIFwiLi9hY3Rpb25zL3ByaW50XCIsIFwiLi9hY3Rpb25zL2RldGFpbC1yb3dcIiwgXCIuL2FjdGlvbnMvdG9vbGJhclwiLCBcIi4vYWN0aW9ucy9hZ2dyZWdhdGVcIiwgXCIuL2FjdGlvbnMvdmlydHVhbC1zY3JvbGxcIiwgXCIuL2FjdGlvbnMvZWRpdFwiLCBcIi4vYWN0aW9ucy9iYXRjaC1lZGl0XCIsIFwiLi9hY3Rpb25zL2lubGluZS1lZGl0XCIsIFwiLi9hY3Rpb25zL25vcm1hbC1lZGl0XCIsIFwiLi9hY3Rpb25zL2RpYWxvZy1lZGl0XCIsIFwiLi9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGF0YV8xLCBzb3J0XzEsIHBhZ2VfMSwgc2VsZWN0aW9uXzEsIGZpbHRlcl8xLCBzZWFyY2hfMSwgc2Nyb2xsXzEsIHJlc2l6ZV8xLCByZW9yZGVyXzEsIHJvd19yZW9yZGVyXzEsIGdyb3VwXzEsIHByaW50XzEsIGRldGFpbF9yb3dfMSwgdG9vbGJhcl8xLCBhZ2dyZWdhdGVfMSwgdmlydHVhbF9zY3JvbGxfMSwgZWRpdF8xLCBiYXRjaF9lZGl0XzEsIGlubGluZV9lZGl0XzEsIG5vcm1hbF9lZGl0XzEsIGRpYWxvZ19lZGl0XzEsIGNvbHVtbl9jaG9vc2VyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGRhdGFfMSk7XG4gICAgX19leHBvcnQoc29ydF8xKTtcbiAgICBfX2V4cG9ydChwYWdlXzEpO1xuICAgIF9fZXhwb3J0KHNlbGVjdGlvbl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfMSk7XG4gICAgX19leHBvcnQoc2VhcmNoXzEpO1xuICAgIF9fZXhwb3J0KHNjcm9sbF8xKTtcbiAgICBfX2V4cG9ydChyZXNpemVfMSk7XG4gICAgX19leHBvcnQocmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF8xKTtcbiAgICBfX2V4cG9ydChwcmludF8xKTtcbiAgICBfX2V4cG9ydChkZXRhaWxfcm93XzEpO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG4gICAgX19leHBvcnQoYWdncmVnYXRlXzEpO1xuICAgIF9fZXhwb3J0KHZpcnR1YWxfc2Nyb2xsXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChub3JtYWxfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChjb2x1bW5fY2hvb3Nlcl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwKHBhcmVudCwgZ3JvdXBTZXR0aW5ncywgc29ydGVkQ29sdW1ucywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdjbG9uZSBlLWdkY2xvbmUnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ2xpbmUtaGVpZ2h0OjIzcHgnLCBhdHRyczogeyBhY3Rpb246ICdncm91cGluZycgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JvdXBoZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JvdXBoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJywgX3RoaXMuY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtdW5ncm91cGRyYWcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBfdGhpcy5jb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVuZ3JvdXBkcmFnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCEodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fCB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWEuc2V0R3JhYmJlZChfdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCdbYXJpYS1ncmFiYmVkPXRydWVdJyksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCksICdlLWdyaWQnKS5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYXJpYSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MgPSBncm91cFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5EcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSAmJlxuICAgICAgICAgICAgICAgICEodGhpcy5wYXJlbnQuYWxsb3dSZW9yZGVyaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1ub3RhbGxvd2VkY3VyJ10sIFsnZS1kZWZhdWx0Y3VyJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyb3VwZHJvcGFyZWEnKSA/IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhvdmVyJykgOiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ob3ZlcicpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGwnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcEFyZWEgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYS5zZXREcm9wVGFyZ2V0KGRyb3BBcmVhLCBlLmNvbHVtbi5hbGxvd0dyb3VwaW5nKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IGUudGFyZ2V0IDogdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgdGhpcy5hcmlhLnNldEdyYWJiZWQoZWxlbWVudCwgdHJ1ZSwgIWUuY29sdW1uLmFsbG93R3JvdXBpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSA9PT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5VWlkKGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpLCAnZS1ncmlkJykuZ2V0QXR0cmlidXRlKCdpZCcpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuY29sdW1uRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5jb2x1bW5EcmFnU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3ApO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBDb2x1bW4oY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0VXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdPYmouYWxsb3dTZWxlY3Rpb24gPyBnT2JqLmdldFNlbGVjdGVkUm93SW5kZXhlcygpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFSb3cgPSBnT2JqLmdldERhdGFSb3dzKClbc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoIC0gMV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdycFJvdyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhUm93LnJvd0luZGV4OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdycFJvdyA9IHJvd3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKGdycFJvdy5xdWVyeVNlbGVjdG9yKGUuYWN0aW9uID09PSAnYWx0VXBBcnJvdycgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U29ydEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy51bkdyb3VwRnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUdyb3VwRnJvbUhlYWRlcihlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bkdyb3VwRnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVuZ3JvdXBidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudG9vZ2xlR3JvdXBGcm9tSGVhZGVyID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hcHBseVNvcnRGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTb3J0aW5nICYmIGdIZWFkZXIgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpICYmXG4gICAgICAgICAgICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2Rlc2NlbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2FzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlUm93cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgIGlmICh0cmd0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0cmd0LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgcm93SWR4ID0gdHJndC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHJvd05vZGVzKS5zbGljZShyb3dJZHggKyAxLCByb3dOb2Rlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciBpc0hpZGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZEVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRvRXhwYW5kID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGVudCA9IHRyZ3QucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzZXhwYW5kJztcbiAgICAgICAgICAgICAgICAgICAgdHJndC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICBleHBhbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXNIaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHJndC5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzY29sbGFwc2UnO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodHJndCwgZXhwYW5kKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpW2NlbGxJZHhdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylbY2VsbElkeF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluZGVudGNlbGwnKSAmJiByb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtaW5kZW50Y2VsbCcpLmxlbmd0aCA9PT0gaW5kZW50ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kRWxlbSA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kRWxlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9FeHBhbmQucHVzaChleHBhbmRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2kgLSAxXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1kZXRhaWxyb3djb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b0V4cGFuZC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzY29sbGFwc2UnO1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyh0b0V4cGFuZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoaXNFeHBhbmQpIHtcbiAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgcm93O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlY29yZHBsdXNleHBhbmQsIC5lLXJlY29yZHBsdXNjb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKGlzRXhwYW5kID8gJy5lLXJlY29yZHBsdXNjb2xsYXBzZScgOiAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzZXhwYW5kJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmQgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERyYWdBbmREcm9wKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlckdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGRyb3BhcmVhJywgYXR0cnM6IHsgJ3RhYmluZGV4JzogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHRoaXMucGFyZW50LmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSAmJiAhdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdMYWJlbCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBkcmFnTGFiZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZ3JvdXBlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPT09IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyb3VwZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXREcmFnQW5kRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdIZWFkZXJEcm9wKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHSGVhZGVyRHJhZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbGl6ZUdIZWFkZXJEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRyYWcgPSBuZXcgZWoyX2Jhc2VfMS5EcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWdyb3VwaGVhZGVyY2VsbCcsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5oZWFkZXJEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghZS51aWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoZS51aWQpO1xuICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsaXplR0hlYWRlckRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmNvbnRlbnRSZWZyZXNoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSBnT2JqLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW47XG4gICAgICAgICAgICB0aGlzLmNvbE5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBjb2x1bW5OYW1lOyB9KVswXSA6IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnVuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jb2xOYW1lID0gY29sdW1uLmZpZWxkO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICBjb2x1bW5zLnNwbGljZShjb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSwgMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbk5hbWUgPT09IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgY29sdW1ucy5wdXNoKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQgPT09IHRoaXMuY29sTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSBpKSB7XG4gICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5wdXNoKHsgZmllbGQ6IHRoaXMuY29sTmFtZSwgZGlyZWN0aW9uOiAnYXNjZW5kaW5nJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFnT2JqLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgPT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEZyb21Hcm91cERyb3AodGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpID4gLTEgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2xOYW1lLCByZXF1ZXN0VHlwZTogJ2dyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8zLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGRDb2xUb0dyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgIHZhciBncm91cGVkQ29sdW1uID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZC1pY29uIGUtZ3JvdXBoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHZhciBjaGlsZERpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBhdHRyczogeyAnZWotbWFwcGluZ25hbWUnOiBmaWVsZCB9IH0pO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNlbGwgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXB0ZXh0JywgaW5uZXJIVE1MOiBjb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnc29ydCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10b2dnbGVncm91cGJ1dHRvbiBlLWljb25zIGUtaWNvbi11bmdyb3VwIGUtdG9nZ2xldW5ncm91cCcsIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICd1bmdyb3VwIGJ1dHRvbicgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZywuZS1kZXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1hc2NlbmRpbmcnKSA/ICdhc2NlbmRpbmcnIDogJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXBzb3J0IGUtaWNvbnMgJyArICgnZS0nICsgZGlyZWN0aW9uICsgJyBlLWljb24tJyArIGRpcmVjdGlvbiksIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3NvcnQgdGhlIGdyb3VwZWQgY29sdW1uJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS11bmdyb3VwYnV0dG9uIGUtaWNvbnMgZS1pY29uLWhpZGUnLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1VuR3JvdXAnKSwgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3VuZ3JvdXAgdGhlIGdyb3VwZWQgY29sdW1uJyB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogdGhpcy5ncm91cFNldHRpbmdzLnNob3dVbmdyb3VwQnV0dG9uID8gJycgOiAnZGlzcGxheTpub25lJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZ3JvdXBlZENvbHVtbi5hcHBlbmRDaGlsZChjaGlsZERpdik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZ3JvdXBlZENvbHVtbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZWZyZXNoVG9nZ2xlQnRuID0gZnVuY3Rpb24gKGlzUmVtb3ZlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGxkaXYnKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhlYWRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGVhZGVyc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZW1wdHljZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoaGVhZGVyc1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdycHRvZ2dsZWJ0bicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGhlYWRlcnNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JwdG9nZ2xlYnRuJylbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaV0uYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdycHRvZ2dsZWJ0biBlLWljb25zICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uLmZpZWxkKSA+IC0xID8gJ2UtdG9nZ2xldW5ncm91cCBlLWljb24tdW5ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdlLXRvZ2dsZWdyb3VwIGUtaWNvbi1ncm91cCcpLCBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnR3JvdXAgYnV0dG9uJyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlQ29sRnJvbUdyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5nZXRHSGVhZGVyQ2VsbChmaWVsZCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSA+IC0xID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbE5hbWUsIHJlcXVlc3RUeXBlOiAnZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0Ryb3BBcmVhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSA/IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJycgOiB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93R3JvdXBlZENvbHVtbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwZWRDb2x1bW4odGhpcy5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1VuZ3JvdXBCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VW5ncm91cEJ1dHRvbiwgJ2UtdW5ncm91cGJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dUb2dnbGVCdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25WaXNpYmlsaXR5KHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uLCAnZS10b2dnbGVncm91cGJ1dHRvbiAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlZnJlc2hIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwZWRDb2x1bW4gPSBmdW5jdGlvbiAoaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZCh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1uc1tpXSkudmlzaWJsZSA9IGlzVmlzaWJsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkgPSBmdW5jdGlvbiAoaXNWaXNpYmxlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWUpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ0hlYWRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGdIZWFkZXJbaV0uc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckdyb3VwaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bih0cnVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jbGVhckdyb3VwaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2xzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JvdXAnO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBnQ29scyA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5hbGxvd1NvcnRpbmcgJiYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgW10pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0bnVtYmVyJywgaW5uZXJIVE1MOiAoaSArIDEpLnRvU3RyaW5nKCkgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkgJiYgdGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHNvcnQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZGlyZWN0aW9uID09PSAnYXNjZW5kaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKS5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cHNvcnQnKSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihnQ29sc1tpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZ0NvbHNbaV0pLnNldEF0dHJpYnV0ZSgnYXJpYS1ncm91cGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdldEdIZWFkZXJDZWxsID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZWotbWFwcGluZ25hbWU9JyArIGZpZWxkICsgJ10nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2VqLW1hcHBpbmduYW1lPScgKyBmaWVsZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXA7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkdyb3VwID0gR3JvdXA7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnQocGFyZW50LCBzb3J0U2V0dGluZ3MsIHNvcnRlZENvbHVtbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MgPSBzb3J0U2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMgPSBzb3J0ZWRDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU29ydC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc29ydGVkQ29sdW1uID0geyBmaWVsZDogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uIH07XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnQ29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IFtzb3J0ZWRDb2x1bW5dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlZENvbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZChnQ29sc1tpXSwgc29ydGVkQ29scyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5OYW1lID09PSBnQ29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNDb2wgPSB0aGlzLmdldFNvcnRDb2x1bW5Gcm9tRmllbGQoZ0NvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaCh7IGZpZWxkOiBzQ29sLmZpZWxkLCBkaXJlY3Rpb246IHNDb2wuZGlyZWN0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IHNvcnRlZENvbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQodGhpcy5jb2x1bW5OYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2luZGV4XSA9IHNvcnRlZENvbHVtbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RTb3J0ZWRDb2wgPSB0aGlzLmNvbHVtbk5hbWU7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH07XG4gICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zb3J0Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpLmFsbG93U29ydGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNvcnRDb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGNvbHVtbk5hbWUsIGFyZzI6IGRpcmVjdGlvbiwgYXJnMzogaXNNdWx0aVNvcnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gaXNNdWx0aVNvcnQ7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvcnRlZENvbHMoY29sdW1uTmFtZSwgaXNNdWx0aVNvcnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVTb3J0ZWRDb2xzID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuc29ydGVkQ29sdW1uc1tpXSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoMCwgdGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5wdXNoKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHV0aWxfMS5nZXRBY3R1YWxQcm9wRnJvbUNvbGwodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmNsZWFyU29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5yZW1vdmVTb3J0Q29sdW1uLCBhcmcxOiBmaWVsZCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kZWxDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgc29ydGVkQ29sdW1ucykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBzb3J0ZWRDb2x1bW5zID8gc29ydGVkQ29sdW1ucyA6IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2wuZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbihjb2wuZmllbGQsIGNvbC5kaXJlY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW9kZWxDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1zb3J0ZGlyZWN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclNvcnRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBvcFVwQ2xpY2tIYW5kbGVyKGUpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncnB0b2dnbGVidG4nKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGwnKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGxkaXYnKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmhhbmRsZXInKSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ09iai5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmZpZWxkO1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAhdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCA/ICdhc2NlbmRpbmcnIDpcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oZmllbGQsIGRpcmVjdGlvbiwgZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3BVcChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnNob3dQb3BVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utc29ydGRpcmVjdCBlLWljb25zIGUtaWNvbi1zb3J0ZGlyZWN0JyArICh0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoID4gMSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc29ydGRpcmVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5hZGRTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIGNvbHNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpU29ydCAmJiBjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSwgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcnRleHQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoZmlsdGVyRWxlbWVudCwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZVNvcnRJY29ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBvc2l0aW9uID8gcG9zaXRpb24gOiAwLCBsZW4gPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb3NpdGlvbikgPyBwb3NpdGlvbiArIDEgOiBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFtdLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZycsICdlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydG51bWJlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykucmVtb3ZlQ2hpbGQoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZUFyaWFBdHRyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnNvcnRlZENvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGNvbCkuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBcmlhQXR0cigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU29ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU29ydCA9IFNvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXJcIiwgXCIuLi8uLi9wYWdlci9leHRlcm5hbC1tZXNzYWdlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHBhZ2VyXzEsIGV4dGVybmFsX21lc3NhZ2VfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgcGFnZXJfMS5QYWdlci5JbmplY3QoZXh0ZXJuYWxfbWVzc2FnZV8xLkV4dGVybmFsTWVzc2FnZSk7XG4gICAgdmFyIFBhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlKHBhcmVudCwgcGFnZVNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzID0gcGFnZVNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXInO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBhZ2VyJyB9KTtcbiAgICAgICAgICAgIHBhZ2VyT2JqID0gdXRpbF8xLmV4dGVuZCh7fSwgZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKHRoaXMucGFnZVNldHRpbmdzKSksIHtcbiAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IGdPYmouZW5hYmxlUnRsLCBsb2NhbGU6IGdPYmoubG9jYWxlLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHRoaXMuYWRkQXJpYUF0dHIuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSwgWydwYXJlbnRPYmonLCAncHJvcE5hbWUnXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqID0gbmV3IHBhZ2VyXzEuUGFnZXIocGFnZXJPYmopO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hZGRBcmlhQXR0ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbnVtZXJpY0NvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgbGlua3MgPSBudW1lcmljQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLW93bnMnLCB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFsnLmUtbWZpcnN0JywgJy5lLW1wcmV2JywgJy5lLWZpcnN0JywgJy5lLXByZXYnLCAnLmUtbmV4dCcsICcuZS1sYXN0JywgJy5lLW1uZXh0JywgJy5lLW1sYXN0J107XG4gICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmdvVG9QYWdlKHBhZ2VObyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSwgcmVxdWVzdFR5cGU6ICdwYWdpbmcnLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9ialtwcm9wXSA9IG5ld1Byb3BbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb3JjZUNhbmNlbCB8fCB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9yY2VDYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5nb1RvUGFnZSwgYXJnMTogZS5jdXJyZW50UGFnZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5jdXJyZW50UGFnZSA9IGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZvcmNlQ2FuY2VsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldlBhZ2UgPSB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gZS5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdwYWdpbmcnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZTogcHJldlBhZ2UsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IGUuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhblNraXBBY3Rpb24oZS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuYWN0aW9uIGluIGtleUFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioa2V5QWN0aW9uc1tlLmFjdGlvbl0pLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmNhblNraXBBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IHtcbiAgICAgICAgICAgICAgICBwYWdlVXA6IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwuc2Nyb2xsVG9wICE9PSAwOyB9LFxuICAgICAgICAgICAgICAgIHBhZ2VEb3duOiBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuICEoZWwuc2Nyb2xsVG9wID49IGVsLnNjcm9sbEhlaWdodCAtIGVsLmNsaWVudEhlaWdodCk7IH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGVudCcpICYmXG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5pc0VxdWFsTm9kZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQpICYmIFsncGFnZVVwJywgJ3BhZ2VEb3duJ10uaW5kZXhPZihhY3Rpb24pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYWdlW2FjdGlvbl0odGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VyT2JqLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZW5hYmxlRXh0ZXJuYWxNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmV4dGVybmFsTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFwcGVuZFRvRWxlbWVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRHcmlkUGFnZXIodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUb0VsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICAgICAgbG9hZDogdGhpcy5yZW5kZXIsXG4gICAgICAgICAgICAgICAgZW5kOiB0aGlzLmFwcGVuZFRvRWxlbWVudCxcbiAgICAgICAgICAgICAgICByZWFkeTogdGhpcy5kYXRhUmVhZHksXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHRoaXMub25BY3Rpb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVMYXlvdXQ6IHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsXG4gICAgICAgICAgICAgICAgaW5ib3VuZENoYW5nZTogdGhpcy5vblByb3BlcnR5Q2hhbmdlZCxcbiAgICAgICAgICAgICAgICBrZXlQcmVzczogdGhpcy5rZXlQcmVzc0hhbmRsZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaGFuZGxlcnMubG9hZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5oYW5kbGVycy5lbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5oYW5kbGVycy5yZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucGFnZUNvbXBsZXRlLCB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5oYW5kbGVycy51cGRhdGVMYXlvdXQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMuaGFuZGxlcnMuaW5ib3VuZENoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5oYW5kbGVycy5rZXlQcmVzcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmhhbmRsZXJzLmxvYWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmhhbmRsZXJzLmVuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5oYW5kbGVycy5yZWFkeSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnBhZ2VDb21wbGV0ZSwgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmhhbmRsZXJzLnVwZGF0ZUxheW91dCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMuaGFuZGxlcnMuaW5ib3VuZENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMuaGFuZGxlcnMua2V5UHJlc3MpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlID0gUGFnZTtcbiAgICB2YXIga2V5QWN0aW9ucyA9IHtcbiAgICAgICAgcGFnZVVwOiAnLmUtcHJldicsXG4gICAgICAgIHBhZ2VEb3duOiAnLmUtbmV4dCcsXG4gICAgICAgIGN0cmxBbHRQYWdlRG93bjogJy5lLWxhc3QnLFxuICAgICAgICBjdHJsQWx0UGFnZVVwOiAnLmUtZmlyc3QnLFxuICAgICAgICBhbHRQYWdlVXA6ICcuZS1wcCcsXG4gICAgICAgIGFsdFBhZ2VEb3duOiAnLmUtbnAnXG4gICAgfTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRDb25zdGFudHMgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VJbmZvOiAnezB9IG9mIHsxfSBwYWdlcycsXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtc0luZm86ICcoezB9IGl0ZW1zKScsXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGZpcnN0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIGxhc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGxhc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VyVG9vbHRpcDogJ0dvIHRvIG5leHQgcGFnZXInLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZXJUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZXInXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyTW9kdWxlID0gbmV3IG51bWVyaWNfY29udGFpbmVyXzEuTnVtZXJpY0NvbnRhaW5lcihfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUgPSBuZXcgcGFnZXJfbWVzc2FnZV8xLlBhZ2VyTWVzc2FnZShfdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlcXVpcmVkTW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtb2R1bGVzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdleHRlcm5hbE1lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgMDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgdGhpcy5hZGRBcmlhTGFiZWwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NyZWF0ZWQnLCB7ICdjdXJyZW50UGFnZSc6IHRoaXMuY3VycmVudFBhZ2UsICd0b3RhbFJlY29yZHNDb3VudCc6IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ2VuYWJsZUV4dGVybmFsTWVzc2FnZScsICdlbmFibGVQYWdlck1lc3NhZ2UnLCAnY3VycmVudFBhZ2UnLCAnZW5hYmxlUXVlcnlTdHJpbmcnLFxuICAgICAgICAgICAgICAgICdwYWdlU2l6ZScsICdwYWdlQ291bnQnLCAndG90YWxSZWNvcmRzQ291bnQnLCAnZXh0ZXJuYWxNZXNzYWdlJywgJ2N1c3RvbVRleHQnLCAnY2xpY2snLCAnY3JlYXRlZCddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZUNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXJyZW50UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKG5ld1Byb3AuY3VycmVudFBhZ2UsIG9sZFByb3AuY3VycmVudFBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvdGFsUmVjb3Jkc0NvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tVGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVFeHRlcm5hbE1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVQYWdlck1lc3NhZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRMb2NhbGl6ZWRMYWJlbCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZU9iai5nZXRDb25zdGFudChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKHBhZ2VObykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU5vO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrR29Ub1BhZ2UgPSBmdW5jdGlvbiAobmV3UGFnZU5vLCBvbGRQYWdlTm8pIHtcbiAgICAgICAgICAgIGlmIChuZXdQYWdlTm8gIT09IHRoaXMuY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChvbGRQYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2VObyA9IG9sZFBhZ2VObztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZpb3VzUGFnZU5vICE9PSBuZXdQYWdlTm8gJiYgKG5ld1BhZ2VObyA+PSAxICYmIG5ld1BhZ2VObyA8PSB0aGlzLnRvdGFsUGFnZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jdXJyZW50UGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVRdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVlcnlTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUudXBkYXRlUlRMID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmluaXRMb2NhbGl6YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV8xLkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdENvbnN0YW50cywgdGhpcy5sb2NhbGUpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUudXBkYXRlUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gdGhpcy5nZXRVcGRhdGVkVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCAncGFnZScsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHsgcGF0aDogdXBkYXRlZFVybCB9LCAnJywgdXBkYXRlZFVybCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRVcGRhdGVkVVJMID0gZnVuY3Rpb24gKHVyaSwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlZ3ggPSBuZXcgUmVnRXhwKCcoWz98Jl0pJyArIGtleSArICc9Lio/KCZ8I3wkKScsICdpJyk7XG4gICAgICAgICAgICBpZiAodXJpLm1hdGNoKHJlZ3gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVyaS5yZXBsYWNlKHJlZ3gsICckMScgKyBrZXkgKyAnPScgKyB2YWx1ZSArICckMicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSAnJztcbiAgICAgICAgICAgICAgICBpZiAodXJpLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzaCA9IHVyaS5yZXBsYWNlKC8uKiMvLCAnIycpO1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSB1cmkucmVwbGFjZSgvIy4qLywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXJpICsgKHVyaS5pbmRleE9mKCc/JykgIT09IC0xID8gJyYnIDogJz8nKSArIGtleSArICc9JyArIHZhbHVlICsgaGFzaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlckZpcnN0UHJldkRpdkZvckRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1maXJzdCBlLWljb25zIGUtaWNvbi1maXJzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ2ZpcnN0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbXByZXYgZS1pY29ucyBlLWljb24tcHJldicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyTmV4dExhc3REaXZGb3JEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tbmV4dCBlLWljb25zIGUtaWNvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuYWRkQXJpYUxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSBbJy5lLW1maXJzdCcsICcuZS1tcHJldicsICcuZS1tbmV4dCcsICcuZS1tbGFzdCddO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlRXh0ZXJuYWxNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlUGFnZXJNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTIpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInBhZ2VTaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTApXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInBhZ2VDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZXh0ZXJuYWxNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJycpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImN1c3RvbVRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgUGFnZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQYWdlcik7XG4gICAgZXhwb3J0cy5QYWdlciA9IFBhZ2VyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0NvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNDb250YWluZXIocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudCA9IHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTnVtZXJpY0NvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoTnVtZXJpY0xpbmtzKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICBwYWdlck9iai50b3RhbFBhZ2VzID0gKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50ICUgcGFnZXJPYmoucGFnZVNpemUgPT09IDApID8gKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IC8gcGFnZXJPYmoucGFnZVNpemUpIDpcbiAgICAgICAgICAgICAgICAocGFyc2VJbnQoKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IC8gcGFnZXJPYmoucGFnZVNpemUpLnRvU3RyaW5nKCksIDEwKSArIDEpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0h0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlZnJlc2hOdW1lcmljTGlua3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGluaztcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgZGl2ID0gcGFnZXJPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBhZ2VyT2JqLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGluayA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtbnVtZXJpY2l0ZW0gZS1zcGFjaW5nIGUtcGFnZXItZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICdsaW5rJywgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dvdG8gUGFnZSAnICsgaSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGxpbmssIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMubGlua3MgPSBbXS5zbGljZS5jYWxsKGRpdi5jaGlsZE5vZGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYWdlckVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck51bWVyaWNDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXBhZ2VyY29udGFpbmVyJywgYXR0cnM6IHsgJ3JvbGUnOiAnbmF2aWdhdGlvbicgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0TlByZXYodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJldlBhZ2VyU2V0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbnVtZXJpY2NvbnRhaW5lcicgfSkpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dE5MYXN0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyRmlyc3ROUHJldiA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5maXJzdCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMuZmlyc3QsIHRoaXMucHJldl0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyUHJldlBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLlBQID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLXBwIGUtc3BhY2luZycsIGlubmVySFRNTDogJy4uLicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VyVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5QUCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck5leHRQYWdlclNldCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5OUCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1ucCBlLXNwYWNpbmcnLFxuICAgICAgICAgICAgICAgIGlubmVySFRNTDogJy4uLicsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLk5QKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dE5MYXN0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFt0aGlzLm5leHQsIHRoaXMubGFzdF0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBwYWdlck9iai5wcmV2aW91c1BhZ2VObyA9IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGUnKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpKSkge1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUxpbmtzSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTZXQ7XG4gICAgICAgICAgICB2YXIgcGFnZU5vO1xuICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzID09PSAxID8gMSA6IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID4gcGFnZXJPYmoudG90YWxQYWdlcyAmJiBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhZ2VTZXQgPSBwYXJzZUludCgocGFnZXJPYmouY3VycmVudFBhZ2UgLyBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAlIHBhZ2VyT2JqLnBhZ2VDb3VudCA9PT0gMCAmJiBjdXJyZW50UGFnZVNldCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IGN1cnJlbnRQYWdlU2V0IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYWdlTm8gPSAoY3VycmVudFBhZ2VTZXQgKiBwYWdlck9iai5wYWdlQ291bnQpICsgMSArIGk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA8PSBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlTm8udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uaW5uZXJIVE1MID0gIXBhZ2VyT2JqLmN1c3RvbVRleHQgPyBwYWdlTm8udG9TdHJpbmcoKSA6IHBhZ2VyT2JqLmN1c3RvbVRleHQgKyBwYWdlTm87XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAhPT0gcGFnZU5vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdlLXBhZ2VyLWRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzW2ldLCBbXSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMubGFzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZXJPYmoudG90YWxQYWdlcy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucHJldi5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLm5leHQuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsICcxJyk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuUFAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzWzBdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApIC0gcGFnZXJPYmoucGFnZUNvdW50KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuTlAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzW3RoaXMubGlua3MubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlU3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5QcmV2U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV4dE5MYXN0U3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzWyh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlIC0gMSkgJSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudF0sIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlID0gWydlLWZpcnN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2VEaXNhYmxlZCA9IFsnZS1maXJzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IFsnZS1wcmV2cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZURpc2FibGVkID0gWydlLXByZXZwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlLCBwcmV2UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKSwgZmlyc3RQYWdlLCBmaXJzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wcmV2LCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5maXJzdCwgZmlyc3RQYWdlRGlzYWJsZWQsIGZpcnN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2VEaXNhYmxlZCwgcHJldlBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgPiB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dFBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSB0aGlzLmxpbmtzWzBdLmlubmVySFRNTC5yZXBsYWNlKHBhZ2VyT2JqLmN1c3RvbVRleHQsICcnKTtcbiAgICAgICAgICAgIGlmICghZmlyc3RQYWdlLmxlbmd0aCB8fCAhdGhpcy5saW5rcy5sZW5ndGggfHwgKHBhcnNlSW50KGZpcnN0UGFnZSwgMTApICsgcGFnZXJPYmoucGFnZUNvdW50ID4gcGFnZXJPYmoudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10sIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10sIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZU5leHROTGFzdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZSA9IFsnZS1sYXN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZURpc2FibGVkID0gWydlLWxhc3RwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSBbJ2UtbmV4dHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2VEaXNhYmxlZCA9IFsnZS1uZXh0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA9PT0gcGFnZXJPYmoudG90YWxQYWdlcyB8fCBwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2VEaXNhYmxlZCwgbmV4dFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlRGlzYWJsZWQsIGxhc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxhc3QsIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLm5leHQsIG5leHRQYWdlLCBuZXh0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLCBsYXN0UGFnZSwgbGFzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKSwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0NvbnRhaW5lcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtZXJpY0NvbnRhaW5lciA9IE51bWVyaWNDb250YWluZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhcmVudG1zZ2JhcicsIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ1BhZ2VyIEluZm9ybWF0aW9uJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXBhZ2Vub21zZycsIHN0eWxlczogJ3RleHRhbGlnbjpyaWdodCcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZWNvdW50bXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXBwZW5kKFt0aGlzLnBhZ2VOb01zZ0VsZW0sIHRoaXMucGFnZUNvdW50TXNnRWxlbV0sIGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ2N1cnJlbnRQYWdlSW5mbycpLCBbcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgPT09IDAgPyAwIDpcbiAgICAgICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UsIHBhZ2VyT2JqLnRvdGFsUGFnZXMgfHwgMF0pICsgJyAnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ3RvdGFsSXRlbXNJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCB8fCAwXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgKyB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmhpZGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZUNvdW50TXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VOb01zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoc3RyLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcmVneDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlZ3ggPSBuZXcgUmVnRXhwKCdcXFxceycgKyAoaSkgKyAnXFxcXH0nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWd4LCBhcmdzW2ldLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZXJNZXNzYWdlID0gUGFnZXJNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4dGVybmFsTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4dGVybmFsTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXh0ZXJuYWxNZXNzYWdlJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmV4dGVybmFsbXNnJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgZXh0ZXJuYWwgbWVzc2FnZScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZS50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHRlcm5hbE1lc3NhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4dGVybmFsTWVzc2FnZSA9IEV4dGVybmFsTWVzc2FnZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIGV2ZW50cywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyKHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIpO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxyZW5kZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLCBuZXcgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMS5GaWx0ZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyJyB9KTtcbiAgICAgICAgICAgICAgICByb3cgPSB0aGlzLmdlbmVyYXRlUm93KCk7XG4gICAgICAgICAgICAgICAgcm93LmRhdGEgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb3dSZW5kZXJlci5yZW5kZXIocm93LCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbC5jbGFzc05hbWUgPSAnZS1maWx0ZXJiYXJjZWxsIGUtbWFzdGVyY2VsbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdlbmVyYXRlQ2VsbHMoKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChkdW1teSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNlbGxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAncm93SWQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdGaWx0ZXJiYXJUaXRsZScpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLCBvcGVyYXRvcjogdGhpcy5vcGVyYXRvciwgdmFsdWU6IHRoaXMudmFsdWUsIHByZWRpY2F0ZTogdGhpcy5wcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgbWF0Y2hDYXNlOiB0aGlzLm1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWU6IHt9LCBhY3R1YWxPcGVyYXRvcjoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEZpbHRlcmVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMucHVzaCh0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1c2luJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4oY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgY29sLnByZWRpY2F0ZSwgY29sLm1hdGNoQ2FzZSwgY29sLmFjdHVhbEZpbHRlclZhbHVlLCBjb2wuYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGw7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICF0aGlzLmNvbHVtbi5hbGxvd0ZpbHRlcmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5maWx0ZXJCeUNvbHVtbiwgYXJnMTogZmllbGROYW1lLCBhcmcyOiBmaWx0ZXJPcGVyYXRvciwgYXJnMzogZmlsdGVyVmFsdWUsIGFyZzQ6IHByZWRpY2F0ZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnNTogbWF0Y2hDYXNlLCBhcmc2OiBhY3R1YWxGaWx0ZXJWYWx1ZSwgYXJnNzogYWN0dWFsT3BlcmF0b3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IG1hdGNoQ2FzZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGUgfHwgJ2FuZCc7XG4gICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gZmlsdGVyT3BlcmF0b3I7XG4gICAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZE5hbWUpLnNldEF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyVmFsdWUubGVuZ3RoIDwgMSB8fCB0aGlzLmNoZWNrRm9yU2tpcElucHV0KHRoaXMuY29sdW1uLCBmaWx0ZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgPyAnJyA6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWx0ZXJDZWxsLnZhbHVlICE9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGZpbHRlckNlbGwudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkKHRoaXMuY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLmZpZWxkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RmlsdGVyQmFyU3RhdHVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByb3BlcnRpZXNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVFeHRlcm5hbE1lc3NhZ2UoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhckZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2xzW2ldLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBmaWVsZCAmJiBjb2wudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmIGNvbC5wcmVkaWNhdGUgPT09IHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGZpZWxkLCBhcmcyOiBpc0NsZWFyRmlsdGVyQmFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNDbGVhckZpbHRlckJhciA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBjb2xzW2ldLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc1tmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29scy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGQpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5tYXRjaGVzKHRhcmdldCwgJy5lLWZpbHRlcmJhciBpbnB1dCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQodGFyZ2V0LmlkLnNwbGl0KCdfJylbMF0pO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNyb3NzSWNvbih0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5maWx0ZXJTZXR0aW5ncy5tb2RlID09PSAnaW1tZWRpYXRlJyB8fCBlLmtleUNvZGUgPT09IDEzKSAmJiBlLmtleUNvZGUgIT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRhcmdldC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZpbHRlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlU3BhbkNsYXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGV4dCA9IHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHRhcmdldFRleHQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcnRleHQnKSAmJiAhdGFyZ2V0LmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdEZpbHRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Jvc3NJY29uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJ0ZXh0JykgJiYgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUNyb3NzSWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVGaWx0ZXJNc2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlclNldHRpbmdzLnNob3dGaWx0ZXJCYXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMuZmlsdGVyU3RhdHVzTXNnICE9PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9ICcnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjb2x1bW5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpbmRleF0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnICs9ICcgJiYgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSBjb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB0aGlzLnZhbHVlc1tjb2x1bW4uZmllbGRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai51cGRhdGVFeHRlcm5hbE1lc3NhZ2UodGhpcy5maWx0ZXJTdGF0dXNNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jaGVja0ZvclNraXBJbnB1dCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaXNTa2lwO1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz0nLCAnICcsICchJ107XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9kYXRhXzEuRGF0YVV0aWwub3BlcmF0b3JTeW1ib2xzW3ZhbHVlXSB8fCBza2lwSW5wdXQuaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpc1NraXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVfMSA9IHZhbHVlOyBfaSA8IHZhbHVlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2YWx1ZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBJbnB1dC5pbmRleE9mKHZhbCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc1NraXA7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0ZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5vblRpbWVyVGljaygpOyB9LCBlLmtleUNvZGUgPT09IDEzID8gMCA6IHRoaXMuZmlsdGVyU2V0dGluZ3MuaW1tZWRpYXRlTW9kZURlbGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblRpbWVyVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsdGVyRWxlbWVudC52YWx1ZSkpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZpbHRlclZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCeUNvbHVtbih0aGlzLmNvbHVtbi5maWVsZCwgdGhpcy5vcGVyYXRvciwgdGhpcy52YWx1ZSwgdGhpcy5wcmVkaWNhdGUsIHRoaXMubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuY29sdW1uLmZpZWxkXSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyRWxlbWVudC52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS52YWxpZGF0ZUZpbHRlclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc+JywgJzwnLCAnPScsICchJ107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWx1ZVtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlLnN1YnN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSAnJyAmJiB2YWx1ZS5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWVGb3JtYXR0ZXIuZnJvbVZpZXcodGhpcy52YWx1ZSwgdGhpcy5jb2x1bW4uZ2V0UGFyc2VyKCksIHRoaXMuY29sdW1uLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3BlcmF0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5zdGFydHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLmNoYXJBdCh2YWx1ZS5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZW5kc1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE9wZXJhdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlT3AgPSB2YWx1ZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICB2YXIgbXVsdGlwbGVPcCA9IHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9ycyA9IGVqMl9iYXNlXzIuZXh0ZW5kKHsgJz0nOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbCwgJyEnOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5ub3RFcXVhbCB9LCBlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9scyk7XG4gICAgICAgICAgICBpZiAob3BlcmF0b3JzLmhhc093blByb3BlcnR5KHNpbmdsZU9wKSB8fCBvcGVyYXRvcnMuaGFzT3duUHJvcGVydHkobXVsdGlwbGVPcCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW3NpbmdsZU9wXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW211bHRpcGxlT3BdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5sZXNzVGhhbiB8fCB0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5ncmVhdGVyVGhhbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmNoYXJBdCgwKSA9PT0gJz0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yICsgJ29yZXF1YWwnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1maWx0ZXJiYXJjZWxsJykpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbHMuc3BsaWNlKGUudG9JbmRleCwgMCwgZmlsdGVyQ2VsbHMuc3BsaWNlKGUuZnJvbUluZGV4LCAxKVswXSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpbHRlckNlbGxzXzEgPSBmaWx0ZXJDZWxsczsgX2kgPCBmaWx0ZXJDZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZmlsdGVyQ2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXIgPSBGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpbHRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1maWx0ZXJiYXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmFsbG93RmlsdGVyaW5nKSB8fCBjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0cnRlbXAnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmx0cnRlbXBkaXYnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUuY3JlYXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGVtcChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZS1maWx0ZXJVaV9pbnB1dCBlLWZpbHRlcnRleHQgZS1mbHRyVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmlsdGVyZGl2IGUtZmx0cmlucHV0ZGl2J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVydGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VhcmNoJywgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0ICsgY2VsbC5hdHRyaWJ1dGVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdID8gZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0gOiAnJywgcm9sZTogJ3NlYXJjaCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2FuY2VsIGUtaGlkZSBlLWljb25zIGUtaWNvbi1oaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnY2xlYXIgZmlsdGVyIGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyA9PT0gZmFsc2UgfHwgY29sdW1uLmZpZWxkID09PSAnJyB8fCBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlUmVhZCA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5yZWFkO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVdyaXRlID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLndyaXRlO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0geyBlbGVtZW50OiBpbnB1dCwgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlUmVhZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWFkID0gYXJncy5jb2x1bW4gPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXBsYXRlUmVhZCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVdyaXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVdyaXRlLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlLmNhbGwodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJESVYpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRmlsdGVyQ2VsbFJlbmRlcmVyID0gRmlsdGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdCA9IHtcbiAgICAgICAgcm9vdDogJ2UtcmhhbmRsZXInLFxuICAgICAgICBzdXBwcmVzczogJ2UtcnN1cHByZXNzJyxcbiAgICAgICAgaWNvbjogJ2Utcmljb24nLFxuICAgICAgICBoZWxwZXI6ICdlLXJoZWxwZXInLFxuICAgICAgICBoZWFkZXI6ICd0aC5lLWhlYWRlcmNlbGwnLFxuICAgICAgICBjdXJzb3I6ICdlLXJjdXJzb3InLFxuICAgICAgICBsaW5lczogJ2UtcmxpbmVzJ1xuICAgIH07XG4gICAgdmFyIFJlc2l6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlc2l6ZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBuZXcgd2lkdGhfY29udHJvbGxlcl8xLkNvbHVtbldpZHRoU2VydmljZShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWUgPSAoZk5hbWUgPT09IHVuZGVmaW5lZCB8fCBmTmFtZSA9PT0gbnVsbCB8fCBmTmFtZS5sZW5ndGggPD0gMCkgP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZmllbGQ7IH0pIDogKHR5cGVvZiBmTmFtZSA9PT0gJ3N0cmluZycpID8gW2ZOYW1lXSA6IGZOYW1lO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUNvbHVtbiA9IGZ1bmN0aW9uIChmTmFtZSwgaW5kZXgsIGlkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGFibGUgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGhDbG9uZSA9IGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IDA7XG4gICAgICAgICAgICBpZiAoaW5kZW50V2lkdGhDbG9uZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnRXaWR0aENsb25lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGVudFdpZHRoICs9IGluZGVudFdpZHRoQ2xvbmVbaV0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVpZCA9IGlkID8gaWQgOiB0aGlzLnBhcmVudC5nZXRVaWRCeUNvbHVtbkZpZWxkKGZOYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCh1aWQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHRDbG9uZSA9IGhlYWRlclRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJylbY29sdW1uSW5kZXhdLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0ID0gW2hlYWRlclRleHRDbG9uZV07XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHRDbG9uZSA9IGNvbnRlbnRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidGQ6bnRoLWNoaWxkKFwiICsgKGNvbHVtbkluZGV4ICsgMSkgKyBcIilcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudFRleHRDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUZXh0W2ldID0gY29udGVudFRleHRDbG9uZVtpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd0hlYWRlciA9IHRoaXMuY3JlYXRlVGFibGUoaGVhZGVyVGFibGUsIGhlYWRlclRleHQsIGhlYWRlckRpdlRhZyk7XG4gICAgICAgICAgICB2YXIgd0NvbnRlbnQgPSB0aGlzLmNyZWF0ZVRhYmxlKGNvbnRlbnRUYWJsZSwgY29udGVudFRleHQsIGNvbnRlbnREaXZUYWcpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbmJ5aW5kZXggPSBnT2JqLmdldENvbHVtbnMoKVtpbmRleF07XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKHdIZWFkZXIgPiB3Q29udGVudCkgPyBjb2x1bW5ieWluZGV4LndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdIZWFkZXIpIDogY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3Q29udGVudCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChnT2JqLmdldENvbHVtbnMoKVtpbmRleF0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ09iai5nZXRDb2x1bW5zKCkuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC53aWR0aCA9PT0gbnVsbCB8fCB4LndpZHRoID09PSB1bmRlZmluZWQgfHwgeC53aWR0aC5sZW5ndGggPD0gMDsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRXaWR0aCA9IHRXaWR0aCArIHBhcnNlSW50KGVsZW1lbnQud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YWJsZVdpZHRoXzEgPSB0V2lkdGggKyBpbmRlbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0YWJsZVdpZHRoXzEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGVXaWR0aCA9IGhlYWRlclRhYmxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnR3aWR0aCA9IChnT2JqLmdldENvbnRlbnQoKS5zY3JvbGxXaWR0aCk7XG4gICAgICAgICAgICBpZiAoY29udGVudHdpZHRoID4gdGFibGVXaWR0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LmFkZCgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZXNpemUnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmZpbmRDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBmTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gX3RoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XS52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2l6ZUNvbHVtbihmaWVsZE5hbWUsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGV4dCwgdGFnKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB0ZXh0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBteVRyLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTmFtZSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJykuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRXaWR0aFZhbHVlID0gbXlUYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG9mZnNldFdpZHRoVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5ncmlkTGluZXMgPT09ICd2ZXJ0aWNhbCcgfHwgdGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAnYm90aCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmxpbmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0SGFuZGxlckhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRSZXNpemVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIF90aGlzLnJlc2l6ZVN0YXJ0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRSZXNpemVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuc2V0SGFuZGxlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnN1cHByZXNzKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWxlLnN0eWxlLmhlaWdodCA9IGVsZS5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYWxsQXV0b0ZpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbihjb2wuZmllbGQsIHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2wudWlkKSwgY29sLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSGVscGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSB0aGlzLmdldFRhcmdldENvbHVtbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSAodGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWluTW92ZSArPSB0aGlzLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiAhdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnJlc2l6ZVN0YXJ0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ2FkZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbmNlbFJlc2l6ZUFjdGlvbiA9IGZ1bmN0aW9uIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnJlc2l6aW5nKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoKSB7XG4gICAgICAgICAgICBpZiAobWluV2lkdGggJiYgd2lkdGggPCBtaW5XaWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW5XaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXhXaWR0aCAmJiB3aWR0aCA+IG1heFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemluZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVggPSB0aGlzLmdldFBvaW50WChlKTtcbiAgICAgICAgICAgIHZhciBtb3VzZW1vdmUgPSB0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAtKHBhZ2VYIC0gdGhpcy5wYWdlWCkgOiAocGFnZVggLSB0aGlzLnBhZ2VYKTtcbiAgICAgICAgICAgIHZhciBjb2xEYXRhID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludCh0aGlzLndpZHRoU2VydmljZS5nZXRXaWR0aCh0aGlzLmNvbHVtbikudG9TdHJpbmcoKSwgMTApICsgbW91c2Vtb3ZlLFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IHRoaXMuY29sdW1uLm1heFdpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWF4V2lkdGgudG9TdHJpbmcoKSwgMTApIDogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sRGF0YS53aWR0aCwgY29sRGF0YS5taW5XaWR0aCwgY29sRGF0YS5tYXhXaWR0aCk7XG4gICAgICAgICAgICBpZiAoKCF0aGlzLnBhcmVudC5lbmFibGVSdGwgJiYgdGhpcy5taW5Nb3ZlID49IHBhZ2VYKSB8fCAodGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA8PSBwYWdlWCkpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVggPSB0aGlzLm1pbk1vdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHBhcnNlSW50KHRoaXMuY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSBwYWdlWDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbi53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3aWR0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLm9uUmVzaXplLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cCh0aGlzLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgodGhpcy5jb2x1bW4sIG51bGwsICdyZXNpemUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUhlbHBlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcigncmVtb3ZlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdG9wLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgdGhpcy5kb3VibGVUYXBFdmVudChlKTtcbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFBvaW50WCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucGFnZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlQ29sR3JvdXAgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC51aWQgPT09IGNvbHVtbi51aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLndpZHRoID0gY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGNlbGwucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS51cGRhdGVDdXJzb3IgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpO1xuICAgICAgICAgICAgaGVhZGVyUm93cy5wdXNoKHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0W2FjdGlvbl0oZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuY3Vyc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wYWdlWCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFwcGVuZEhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWxwZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLm9mZnNldEhlaWdodCAtIHRoaXMuZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHZhciB0ciA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0ci5pbmRleE9mKHJlY3QucGFyZW50RWxlbWVudCk7IGkgPCB0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhlaWdodCArPSB0cltpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jYWxjUG9zKHJlY3QpO1xuICAgICAgICAgICAgcG9zLmxlZnQgKz0gKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6ICcgKyBoZWlnaHQgKyAncHg7IHRvcDogJyArIHBvcy50b3AgKyAncHg7IGxlZnQ6JyArIE1hdGguZmxvb3IocG9zLmxlZnQpICsgJ3B4Oyc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICByZXR1cm4gZWxlLnNjcm9sbFdpZHRoID4gZWxlLmNsaWVudFdpZHRoID8gdXRpbF8xLmdldFNjcm9sbEJhcldpZHRoKCkgOiAwO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbW92ZUhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2xzID0gZS50YXJnZXQuY2xhc3NMaXN0O1xuICAgICAgICAgICAgaWYgKCEoY2xzLmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnJvb3QpIHx8IGNscy5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKSkgJiYgdGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS51cGRhdGVIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0aGlzLmVsZW1lbnQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmhlbHBlci5zdHlsZS5sZWZ0ID0gTWF0aC5mbG9vcih0aGlzLmNhbGNQb3MocmVjdCkubGVmdCArICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAwIC0gMSA6IHJlY3Qub2Zmc2V0V2lkdGggLSAyKSkgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbGNQb3MgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudE9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBlbGVtLm9mZnNldFBhcmVudCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgd2hpbGUgKG9mZnNldFBhcmVudCAmJlxuICAgICAgICAgICAgICAgIChvZmZzZXRQYXJlbnQgPT09IGRvYy5ib2R5IHx8IG9mZnNldFBhcmVudCA9PT0gZG9jLmRvY3VtZW50RWxlbWVudCkgJiZcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZWxlbSAmJiBvZmZzZXRQYXJlbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5kb3VibGVUYXBFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRVc2VyQWdlbnQoKSAmJiB0aGlzLmlzRGJsQ2xrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlcigpLCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsQXV0b0ZpdChlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlckFnZW50ID0gZWoyX2Jhc2VfMS5Ccm93c2VyLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIC9pcGhvbmV8aXBvZHxpcGFkLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudGltZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZXNpemU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlc2l6ZSA9IFJlc2l6ZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlc2l6ZS5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVvcmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlb3JkZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yZW9yZGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZywgdGhpcy5kcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuZHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgdGhpcy5kcmFnU3RvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNoa0Ryb3BQb3NpdGlvbiA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHNyY0VsZW0ucGFyZW50RWxlbWVudC5pc0VxdWFsTm9kZShkZXN0RWxlbS5wYXJlbnRFbGVtZW50KSAmJiB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHNyY0VsZW0sIGRlc3RFbGVtKSA+IC0xO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jaGtEcm9wQWxsQ29scyA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgdmFyIGlzRm91bmQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgd2hpbGUgKCFpc0ZvdW5kICYmIGhlYWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IGhlYWRlcnMucG9wKCk7XG4gICAgICAgICAgICAgICAgaXNGb3VuZCA9IHNyY0VsZW0gIT09IGhlYWRlciAmJiB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHNyY0VsZW0sIGRlc3RFbGVtKSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzRm91bmQ7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmZpbmRDb2xQYXJlbnQgPSBmdW5jdGlvbiAoY29sLCBjb2xzLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gY29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29sc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbnQgPSBwYXJlbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucHVzaChjb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbmRDb2xQYXJlbnQoY29sLCBjb2xzW2ldLmNvbHVtbnMsIHBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zcGxpY2UoY250LCBwYXJlbnQubGVuZ3RoIC0gY250KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRDb2x1bW5zTW9kZWwgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk1vZGVsID0gW107XG4gICAgICAgICAgICB2YXIgc3ViQ29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Nb2RlbC5wdXNoKGNvbHNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViQ29scyA9IHN1YkNvbHMuY29uY2F0KGNvbHNbaV0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YkNvbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uTW9kZWwgPSBjb2x1bW5Nb2RlbC5jb25jYXQodGhpcy5nZXRDb2x1bW5zTW9kZWwoc3ViQ29scykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbk1vZGVsO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5oZWFkZXJEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJ3RoJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVzdEVsZW0gPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoZGVzdEVsZW0gJiYgISghdGhpcy5jaGtEcm9wUG9zaXRpb24odGhpcy5lbGVtZW50LCBkZXN0RWxlbSkgfHwgIXRoaXMuY2hrRHJvcEFsbENvbHModGhpcy5lbGVtZW50LCBkZXN0RWxlbSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBvbGRJZHggPSB1dGlsXzEuZ2V0RWxlbWVudEluZGV4KHRoaXMuZWxlbWVudCwgaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNNb2RlbCh0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tvbGRJZHhdO1xuICAgICAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgodGhpcy5lbGVtZW50LCBkZXN0RWxlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQ29sdW1ucyhuZXdJbmRleCwgY29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKGdPYmopIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5tb3ZlQ29sdW1ucyA9IGZ1bmN0aW9uIChkZXN0SW5kZXgsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMubW92ZUNvbHVtbnMsIGFyZzE6IGRlc3RJbmRleCwgYXJnMjogY29sdW1uIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChjb2x1bW4sIHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc3JjSWR4ID0gdXRpbF8xLmluQXJyYXkoY29sdW1uLCBjb2xzKTtcbiAgICAgICAgICAgIGlmICghZ09iai5hbGxvd1Jlb3JkZXJpbmcgfHwgc3JjSWR4ID09PSBkZXN0SW5kZXggfHwgc3JjSWR4ID09PSAtMSB8fCBkZXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29scy5zcGxpY2UoZGVzdEluZGV4LCAwLCBjb2xzLnNwbGljZShzcmNJZHgsIDEpWzBdKTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1ucyh0cnVlKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHsgZnJvbUluZGV4OiBkZXN0SW5kZXgsIHRvSW5kZXg6IHNyY0lkeCB9KTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncmVvcmRlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleCA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYXRDb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zTW9kZWwoY29scyk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoZmxhdENvbHVtbnNbdXRpbF8xLmdldEVsZW1lbnRJbmRleChzcmNFbGVtLCBoZWFkZXJzKV0sIGNvbHMpO1xuICAgICAgICAgICAgY29scyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogY29scztcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaW5BcnJheShmbGF0Q29sdW1uc1t1dGlsXzEuZ2V0RWxlbWVudEluZGV4KGRlc3RFbGVtLCBoZWFkZXJzKV0sIGNvbHMpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRDb2xQYXJlbnQgPSBmdW5jdGlvbiAoY29sdW1uLCBjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sUGFyZW50KGNvbHVtbiwgY29sdW1ucywgcGFyZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50c1twYXJlbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKHRvRk5hbWUpO1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGNvbHVtbiwgdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBkZXN0SW5kZXggPSB1dGlsXzEuaW5BcnJheShjb2x1bW4sIGNvbHVtbnMpO1xuICAgICAgICAgICAgaWYgKGRlc3RJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQ29sdW1ucyhkZXN0SW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZnJvbUZOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNyZWF0ZVJlb3JkZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgdGhpcy51cEFycm93ID0gaGVhZGVyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtaWNvbi1yZW9yZGVydXBhcnJvdyBlLXJlb3JkZXJ1cGFycm93JywgYXR0cnM6IHsgc3R5bGU6ICdkaXNwbGF5Om5vbmUnIH0gfSkpO1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cgPSBoZWFkZXIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1pY29uLXJlb3JkZXJkb3duYXJyb3cgZS1yZW9yZGVyZG93bmFycm93JywgYXR0cnM6IHsgc3R5bGU6ICdkaXNwbGF5Om5vbmUnIH0gfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7IHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLnVwQXJyb3cpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5kb3duQXJyb3cpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJlb3JkZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZywgdGhpcy5kcmFnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmRyYWdTdGFydCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB0aGlzLmRyYWdTdG9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtaGVhZGVyY2VsbDpub3QoLmUtc3RhY2tlZEhlYWRlckNlbGwpJyk7XG4gICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgdmFyIGlzTGVmdCA9IHRoaXMueCA+IHV0aWxfMS5nZXRQb3NpdGlvbihlLmV2ZW50KS54ICsgZ09iai5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlb3JkZXJpbmRpY2F0ZScpLCBbJ2UtcmVvcmRlcmluZGljYXRlJ10pO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsUG9zdGlvbihlLmV2ZW50KTtcbiAgICAgICAgICAgIGlmIChjbG9zZXN0ICYmICFjbG9zZXN0LmlzRXF1YWxOb2RlKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBjbG9zZXN0O1xuICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmNoa0Ryb3BQb3NpdGlvbih0aGlzLmVsZW1lbnQsIHRhcmdldCkgfHwgIXRoaXMuY2hrRHJvcEFsbENvbHModGhpcy5lbGVtZW50LCB0YXJnZXQpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFycm93UG9zaXRpb24odGFyZ2V0LCBpc0xlZnQpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1hbGxvd0Ryb3AnLCAnZS1yZW9yZGVyaW5kaWNhdGUnXSwgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghKGdPYmouYWxsb3dHcm91cGluZyAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnLCB7IHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW4gfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFBvc3Rpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB4ID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpLng7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdEJhc2UgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbEVsZW0gPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoeCA+IGNsaVJlY3RCYXNlLmxlZnQgJiYgeCA8IGNsaVJlY3RCYXNlLmxlZnQgKyAzNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5zZXRTY3JvbGxMZWZ0KHNjcm9sbEVsZW0sIHRydWUpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh4IDwgY2xpUmVjdEJhc2UucmlnaHQgJiYgeCA+IGNsaVJlY3RCYXNlLnJpZ2h0IC0gMzUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMuc2V0U2Nyb2xsTGVmdChzY3JvbGxFbGVtLCBmYWxzZSk7IH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc2V0U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uIChzY3JvbGxFbGVtLCBpc0xlZnQpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0ID0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0ICsgKGlzTGVmdCA/IC01IDogNSk7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCAhPT0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnN0b3BUaW1lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS51cGRhdGVBcnJvd1Bvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldCwgaXNMZWZ0KSB7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0QmFzZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAoKGlzTGVmdCAmJiBjbGlSZWN0LmxlZnQgPCBjbGlSZWN0QmFzZS5sZWZ0KSB8fCAoIWlzTGVmdCAmJiBjbGlSZWN0LnJpZ2h0ID4gY2xpUmVjdEJhc2UucmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLnRvcCA9IGNsaVJlY3QudG9wICsgY2xpUmVjdC5oZWlnaHQgLSBjbGlSZWN0QmFzZS50b3AgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cuc3R5bGUudG9wID0gY2xpUmVjdC50b3AgLSBjbGlSZWN0QmFzZS50b3AgLSA0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS5sZWZ0ID0gdGhpcy5kb3duQXJyb3cuc3R5bGUubGVmdCA9IChpc0xlZnQgPyBjbGlSZWN0LmxlZnQgOiBjbGlSZWN0LnJpZ2h0KSAtIGNsaVJlY3RCYXNlLmxlZnQgLSA0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnJyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICB0aGlzLnggPSB1dGlsXzEuZ2V0UG9zaXRpb24oZS5ldmVudCkueCArIGdPYmouZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgaWYgKCFlLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW4gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yZW9yZGVyaW5kaWNhdGUnKSwgWydlLXJlb3JkZXJpbmRpY2F0ZSddKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc2V0RGlzcGxheSA9IGZ1bmN0aW9uIChkaXNwbGF5KSB7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdy5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncmVvcmRlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW9yZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW9yZGVyID0gUmVvcmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlb3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93REQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dERChwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRkcmFnYXJlYScpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgICAgICAhZS5zZW5kZXIudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdhbmRkcm9wIGUtZ3JpZCBlLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogJ2hlaWdodDpcImF1dG9cIiwgei1pbmRleDoyLCB3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgc3R5bGVzOiAnd2lkdGg6JyArIGdPYmouZWxlbWVudC5vZmZzZXRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBzZWxlY3RlZFJvd3NbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRkcmFnYXJlYScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJywgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgJiYgZHJvcEVsZW0gJiYgZHJvcEVsZW0uZWoyX2luc3RhbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wRWxlbS5lajJfaW5zdGFuY2VzWzBdLmdldENvbnRlbnQoKS5jbGFzc0xpc3QuYWRkKCdlLWFsbG93Um93RHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5pc0RyYWdTdG9wID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLmdldEVsZW1lbnRGcm9tUG9zaXRpb24oY2xvbmVFbGVtZW50LCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZywge1xuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Utcm93ZHJhZycpO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChjbG9uZUVsZW1lbnQucGFyZW50RWxlbWVudCwgJ2UtZ3JpZCcpLmlkID09PSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZCcpLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5nZXRFbGVtZW50RnJvbVBvc2l0aW9uKGUuaGVscGVyLCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1yb3dkcmFnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAmJiBkcm9wRWxlbSAmJiBkcm9wRWxlbS5lajJfaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXNbMF0uZ2V0Q29udGVudCgpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtYWxsb3dSb3dEcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJvcCwge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLFxuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBSb3dERC5wcm90b3R5cGUuaW5pdGlhbGl6ZURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIHZhciBkcmFnO1xuICAgICAgICAgICAgZHJhZyA9IG5ldyBlajJfYmFzZV8xLkRyYWdnYWJsZShnT2JqLmdldENvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1yb3djZWxsJyxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldEVsZW1lbnRGcm9tUG9zaXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB1dGlsXzEuZ2V0UG9zaXRpb24oZXZlbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldFRhcmdldElkeCA9IGZ1bmN0aW9uICh0YXJnZXRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRSb3cgPyBwYXJzZUludCh0YXJnZXRSb3cuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5jb2x1bW5Ecm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpICE9PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFJvdyA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHNyY0NvbnRyb2wgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5wYXJlbnRFbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3JjQ29udHJvbCA9IGUuZHJvcHBlZEVsZW1lbnQucGFyZW50RWxlbWVudC5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3JjQ29udHJvbC5lbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQgJiYgc3JjQ29udHJvbC5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgIT09IGdPYmouZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJlY29yZHMoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5kZXggPSBjdXJyZW50SW5kZXggPSB0aGlzLmdldFRhcmdldElkeCh0YXJnZXRSb3cpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHRhcmdldEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0SW5kZXggKyAoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnJvd3NBZGRlZCwgeyB0b0luZGV4OiB0YXJnZXRJbmRleCwgcmVjb3JkczogcmVjb3JkcyB9KTtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyb3dkcmFnYW5kZHJvcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpcCA9IHNyY0NvbnRyb2wuYWxsb3dQYWdpbmcgP1xuICAgICAgICAgICAgICAgICAgICAoc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVjb3Jkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5wdXNoKHNraXAgKyBzZWxlY3RlZFJvd3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcmNDb250cm9sLm5vdGlmeShldmVudHMucm93c1JlbW92ZWQsIHsgaW5kZXhlczogdGhpcy5zZWxlY3RlZFJvd3MgfSk7XG4gICAgICAgICAgICAgICAgc3JjQ29udHJvbC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncm93ZHJhZ2FuZGRyb3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jvd0RyYWdBbmREcm9wJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd0REO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dERCA9IFJvd0REO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9ncmlkXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGdyaWRfMSwgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxSb3cocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZShlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0ZCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS50b29nbGVFeHBhbmRjb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudERldGFpbHMnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRSb3cgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuW3RyLnJvd0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ3JlY29yZHMnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YVtrZXldIDogZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VycmVudFZpZXdEYXRhW3RyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxjZWxsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxpbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihkZXRhaWxDZWxsLCBnT2JqLmdldERldGFpbFRlbXBsYXRlKCkoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5jaGlsZEdyaWRbcGFyZW50XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SUQ6IGdPYmouZWxlbWVudC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UHJpbWFyeUtleXM6IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50S2V5RmllbGQ6IGdPYmouY2hpbGRHcmlkLnF1ZXJ5U3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZFZhbHVlOiBkYXRhW2dPYmouY2hpbGRHcmlkLnF1ZXJ5U3RyaW5nXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Um93RGF0YTogZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWQgPSBuZXcgZ3JpZF8xLkdyaWQoZ09iai5jaGlsZEdyaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGVzID0gZ3JpZC5nZXRJbmplY3RlZE1vZHVsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5qZWN0ZWRNb2R1ZXMgPSBnT2JqLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbW9kdWxlcyB8fCBtb2R1bGVzLmxlbmd0aCAhPT0gaW5qZWN0ZWRNb2R1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuc2V0SW5qZWN0ZWRNb2R1bGVzKGluamVjdGVkTW9kdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnY2hpbGQnICsgdXRpbF8xLnBhcmVudHModHIsICdlLWdyaWQnKS5sZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ19ncmlkJyArIHRyLnJvd0luZGV4ICsgdXRpbF8xLmdldFVpZCgnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmFwcGVuZFRvKGdyaWRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxDZWxsLmFwcGVuZENoaWxkKGdyaWRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChkZXRhaWxDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRldGFpbFJvdywgdHIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRSb3dzKCkuc3BsaWNlKHRyLnJvd0luZGV4ICsgMSwgMCwgZGV0YWlsUm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZGV0YWlsRGF0YUJvdW5kLCB7IGRldGFpbEVsZW1lbnQ6IGRldGFpbENlbGwsIGRhdGE6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10sIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSwgWydlLWR0ZGlhZ29uYWxyaWdodCcsICdlLWljb24tZ3JpZ2h0YXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsUm93KG5leHRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93Y29sbGFwc2UnXSwgWydlLWRldGFpbHJvd2V4cGFuZCddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmlzRGV0YWlsUm93ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdyAmJiByb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5nZXRURGZyb21JbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICh0ciAmJiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHIucXVlcnlTZWxlY3RvcihjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRURGZyb21JbmRleCh0YXJnZXQsICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZSh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHRkO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZCA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlzRXhwYW5kID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbHRVcEFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkYXRhUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlLCAuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuYWN0aW9uID09PSAnYWx0RG93bkFycm93JyA/IHRoaXMuZXhwYW5kKHRkKSA6IHRoaXMuY29sbGFwc2UodGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2RldGFpbFJvdyc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRldGFpbFJvdyA9IERldGFpbFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX25hdmlnYXRpb25zXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUb29sYmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVG9vbGJhcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHZhciBwcmVJdGVtcyA9IFsnYWRkJywgJ2VkaXQnLCAndXBkYXRlJywgJ2RlbGV0ZScsICdjYW5jZWwnLCAncHJpbnQnLFxuICAgICAgICAgICAgICAgICdwZGZleHBvcnQnLCAnZXhjZWxleHBvcnQnLCAnd29yZGV4cG9ydCcsICdjc3ZleHBvcnQnXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJlSXRlbXNfMSA9IHByZUl0ZW1zOyBfaSA8IHByZUl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBwcmVJdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxlTmFtZSA9IGl0ZW1bMF0udG9VcHBlckNhc2UoKSArIGl0ZW0uc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW0sIHByZWZpeEljb246ICdlLScgKyBpdGVtLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSksIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuc2VhcmNoID0ge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfc2VhcmNoJywgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiZS1zZWFyY2hcIiByb2xlPVwic2VhcmNoXCIgPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJ1dHRvblwiIGNsYXNzPVwiZS1zZWFyY2hmaW5kIGUtaWNvbnNcIiB0YWJpbmRleD1cIi0xXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPSBcInNlYXJjaFwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cIicgKyB0aGlzLmdyaWRJRCArICdfc2VhcmNoYmFyXCIgYXJpYS1tdWx0aWxpbmU9IFwiZmFsc2VcIiB0eXBlPVwic2VhcmNoXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPScgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpICsgJz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDwvaW5wdXQ+PC9kaXY+JywgdG9vbHRpcFRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJyksIGFsaWduOiAncmlnaHQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuY29sdW1uY2hvb3NlciA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyAnY29sdW1uY2hvb3NlcicsIGNzc0NsYXNzOiAnZS1jYyBlLWNjZGl2IGUtY2MtdG9vbGJhcicsIHN1ZmZpeEljb246ICdlLScgKyAnY29sdW1uY2hvb3Nlci1idG4nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdDb2x1bW5zJywgdG9vbHRpcFRleHQ6ICdjb2x1bW5zJywgYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG9vbGJhci5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgZWoyX25hdmlnYXRpb25zXzEuVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLFxuICAgICAgICAgICAgICAgIGNsaWNrZWQ6IHRoaXMudG9vbGJhckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVBlcnNpc3RlbmNlOiB0aGlzLnBhcmVudC5lbmFibGVQZXJzaXN0ZW5jZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ190b29sYmFySXRlbXMnIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnRvb2xiYXIuZWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkoKVsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hiYXInKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoQm94KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hUb29sYmFySXRlbXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbmFibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVkaXQgPSBnT2JqLmVkaXRTZXR0aW5ncztcbiAgICAgICAgICAgIGVkaXQuYWxsb3dBZGRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKSA6IGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dFZGl0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2VkaXQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dEZWxldGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCAmJiAoZWRpdC5hbGxvd0FkZGluZyB8fCBlZGl0LmFsbG93RWRpdGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfdXBkYXRlJywgdGhpcy5ncmlkSUQgKyAnX2NhbmNlbCddO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMgPSBbdGhpcy5ncmlkSUQgKyAnX2FkZCcsIHRoaXMuZ3JpZElEICsgJ19lZGl0JywgdGhpcy5ncmlkSUQgKyAnX2RlbGV0ZSddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmFibGVJdGVtcyhlbmFibGVJdGVtcywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGRpc2FibGVJdGVtcywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRvb2xiYXJJdGVtcyA9IHRoaXMucGFyZW50LnRvb2xiYXIgfHwgW107XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRvb2xiYXJJdGVtc18xID0gdG9vbGJhckl0ZW1zOyBfaSA8IHRvb2xiYXJJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdG9vbGJhckl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHR5cGVvZiAoaXRlbSkgPT09ICdzdHJpbmcnID8gaXRlbXMucHVzaCh0aGlzLmdldEl0ZW1PYmplY3QoaXRlbSkpIDogaXRlbXMucHVzaCh0aGlzLmdldEl0ZW0oaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGl0ZW1PYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU9iamVjdC50ZXh0XTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQoaXRlbSwgaXRlbSwgaXRlbU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbU9iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW1OYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU5hbWVdIHx8IHsgdGV4dDogaXRlbU5hbWUsIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW1OYW1lIH07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVuYWJsZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc0VuYWJsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmVuYWJsZUl0ZW1zKGVsZW1lbnQucGFyZW50RWxlbWVudCwgaXNFbmFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudG9vbGJhckNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdJRCA9IHRoaXMuZ3JpZElEO1xuICAgICAgICAgICAgaWYgKCFhcmdzLml0ZW0pIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChhcmdzLml0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfcHJpbnQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnByaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19lZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX3VwZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2FkZCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWRkUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19kZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfc2VhcmNoJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQuaWQgPT09IGdJRCArICdfc2VhcmNoYnV0dG9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY29sdW1uY2hvb3Nlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRhckVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmNyZWF0ZUNvbHVtbmNob29zZXIoeCwgeSwgdGFyZ2V0RWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy50b29sYmFyQ2xpY2ssIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSB8fCAhdGhpcy5wYXJlbnQudG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VhcmNoKHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVwZGF0ZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEVsZW1lbnQudmFsdWUgPSB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLndpcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVuV2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMudXBkYXRlU2VhcmNoQm94LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy50b29sYmFyUmVmcmVzaCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndG9vbGJhcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUb29sYmFyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ub29sYmFyID0gVG9vbGJhcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82MF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCJcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvc3VtbWFyeS1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlbnVtXzEsIGNvbnN0YW50XzEsIGZvb3Rlcl9yZW5kZXJlcl8xLCBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhZ2dyZWdhdGUnO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmluaXRpYXRlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjZWxsRmFjID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMS5TdW1tYXJ5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgW2VudW1fMS5DZWxsVHlwZS5TdW1tYXJ5LCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnldLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VsbEZhYy5hZGRDZWxsUmVuZGVyZXIodHlwZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyID0gbmV3IGZvb3Rlcl9yZW5kZXJlcl8xLkZvb3RlclJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yLnJlZ2lzdGVyKCdmb290ZXJSZW5kZXJlcicsIHRoaXMuZm9vdGVyUmVuZGVyZXIpO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXBhcmVTdW1tYXJ5SW5mbygpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCwgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucHJlcGFyZVN1bW1hcnlJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHN1bW1hcnlJdGVyYXRvcih0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLCBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFDb2x1bW4gPSBfdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW4uZmllbGQpIHx8IHt9O1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZGF0YUNvbHVtbi50eXBlO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5mb3JtYXQgPSBfdGhpcy5nZXRGb3JtYXRGcm9tVHlwZShjb2x1bW4uZm9ybWF0LCB0eXBlKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNvbHVtbk5hbWUgPSBjb2x1bW4uY29sdW1uTmFtZSB8fCBjb2x1bW4uZmllbGQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRGb3JtYXRGcm9tVHlwZSA9IGZ1bmN0aW9uIChmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHR5cGUpIHx8IHR5cGVvZiBmb3JtYXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmo7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IGZvcm1hdDogZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6IHR5cGUsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlclJlbmRlcmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVSZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHZhciBjTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBnTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZ01vZGVsLmdldERhdGEoKS5sZW5ndGggIT09IDAgfHwgIWNNb2RlbC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5tb2RlbENoYW5nZWQsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5pbml0aWFsRW5kLCB0aGlzLmluaXRpYXRlUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZSA9IEFnZ3JlZ2F0ZTtcbiAgICBmdW5jdGlvbiBzdW1tYXJ5SXRlcmF0b3IoYWdncmVnYXRlcywgY2FsbGJhY2spIHtcbiAgICAgICAgYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNvbHVtbiwgcm93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5zdW1tYXJ5SXRlcmF0b3IgPSBzdW1tYXJ5SXRlcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBjb25zdGFudF8xLCBjb250ZW50X3JlbmRlcmVyXzEsIHJvd19yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGb290ZXJSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGb290ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRm9vdGVyUmVuZGVyZXIoZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGdyaWRNb2R1bGUsIHNlcnZpY2VMb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYWdncmVnYXRlcyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gZ3JpZE1vZHVsZTtcbiAgICAgICAgICAgIF90aGlzLmxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLm1vZGVsR2VuZXJhdG9yID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRmb290ZXInIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGlubmVyRGl2LnN0eWxlLm92ZXJmbG93WCA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRQYWdlcigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZShkaXYsIHRoaXMucGFyZW50LmdldFBhZ2VyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBpbm5lckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpO1xuICAgICAgICAgICAgdmFyIHRGb290ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Zm9vdCcpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodEZvb3QpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdW1tYXJ5Q29udGVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgQXJyYXkgPyB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogdGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgdmFyIHN1bW1hcmllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGR1bW1pZXMgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoaW5wdXQsIGUgfHwgdGhpcy5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciByb3dyZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgcm93cmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVFInLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeXJvdycgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBzcm93ID0gMCwgbGVuID0gc3VtbWFyaWVzLmxlbmd0aDsgc3JvdyA8IGxlbjsgc3JvdysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3Nbc3Jvd107XG4gICAgICAgICAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ciA9IHJvd3JlbmRlcmVyLnJlbmRlcihyb3csIGR1bW1pZXMpO1xuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS50Rm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgICAgICB0aGlzLmFnZ3JlZ2F0ZXMgPSBlO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkudEZvb3QuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclN1bW1hcnlDb250ZW50KGUpO1xuICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaENvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDb2wgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5yZXBsYWNlQ2hpbGQoaGVhZGVyQ29sLCB0aGlzLmdldENvbEdyb3VwKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cChoZWFkZXJDb2wpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUub25XaWR0aENoYW5nZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmdldENvbEdyb3VwKCkuY2hpbGRyZW5bYXJncy5pbmRleF0uc3R5bGUud2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQoYXJncy53aWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9vdGVyVGFibGVXaWR0aCh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyBsZWZ0OiB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZC5zY3JvbGxMZWZ0IH07IH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLnNjcm9sbExlZnQgPSBlLmxlZnQ7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sR3JvdXBSZWZyZXNoLCB0aGlzLnJlZnJlc2hDb2wsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMub25XaWR0aENoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnNjcm9sbCwgdGhpcy5vblNjcm9sbCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2xHcm91cFJlZnJlc2gsIHRoaXMucmVmcmVzaENvbCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMub25XaWR0aENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5zY3JvbGwsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlRm9vdGVyVGFibGVXaWR0aCA9IGZ1bmN0aW9uICh0Rm9vdCkge1xuICAgICAgICAgICAgdmFyIHRIZWFkID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0SGVhZCAmJiB0Rm9vdCkge1xuICAgICAgICAgICAgICAgIHRGb290LnN0eWxlLndpZHRoID0gdEhlYWQuc3R5bGUud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGb290ZXJSZW5kZXJlcjtcbiAgICB9KGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKSk7XG4gICAgZXhwb3J0cy5Gb290ZXJSZW5kZXJlciA9IEZvb3RlclJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN1bW1hcnlDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3VtbWFyeUNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3VtbWFyeUNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeWNlbGwnLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN1bW1hcnlDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBrZXk7XG4gICAgICAgICAgICBrZXkgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udHlwZSkgPyBjb2x1bW4uZmllbGQgKyAnIC0gJyArIChjb2x1bW4udHlwZSkgOiBjb2x1bW4uY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXSA/IGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdW2tleV0gOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeUNlbGxSZW5kZXJlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgaWYgKCEoY29sdW1uLmZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmbiA9IGNvbHVtbi5nZXRUZW1wbGF0ZShjZWxsLmNlbGxUeXBlKTtcbiAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCBmbihkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXSkpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3VtbWFyeUNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLlN1bW1hcnlDZWxsUmVuZGVyZXIgPSBTdW1tYXJ5Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlclwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbFNjcm9sbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxTY3JvbGwocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd2aXJ0dWFsc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlciwgbmV3IHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLlZpcnR1YWxIZWFkZXJSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEuVmlydHVhbENvbnRlbnRSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZVBhZ2VTaXplKCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmVuc3VyZVBhZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd0hlaWdodCA9IHV0aWxfMS5nZXRSb3dIZWlnaHQodGhpcy5wYXJlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IH5+KHRoaXMucGFyZW50LmhlaWdodCAvIHJvd0hlaWdodCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5ibG9ja1NpemUgKiAyO1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRQcm9wZXJ0aWVzKHsgcGFnZVNldHRpbmdzOiB7IHBhZ2VTaXplOiBzaXplIDwgaGVpZ2h0ID8gaGVpZ2h0IDogc2l6ZSB9IH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMucmVmcmVzaFZpcnR1YWxFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMucmVmcmVzaFZpcnR1YWxFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUucmVmcmVzaFZpcnR1YWxFbGVtZW50ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBhcmdzLm1vZHVsZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCkucmVmcmVzaFZpcnR1YWxFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxTY3JvbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxTY3JvbGwgPSBWaXJ0dWFsU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvdmlydHVhbC1zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9oZWFkZXItcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXJcIiwgXCIuLi9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfZGF0YV8xLCB1dGlsXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgY29udGVudF9yZW5kZXJlcl8xLCBoZWFkZXJfcmVuZGVyZXJfMSwgaW50ZXJzZWN0aW9uX29ic2VydmVyXzEsIHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsQ29udGVudFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFZpcnR1YWxDb250ZW50UmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxDb250ZW50UmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wcmV2SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIF90aGlzLnByZXZlbnRFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuYWN0aW9ucyA9IFsnZmlsdGVyaW5nJywgJ3NlYXJjaGluZycsICdncm91cGluZycsICd1bmdyb3VwaW5nJ107XG4gICAgICAgICAgICBfdGhpcy5vZmZzZXRzID0ge307XG4gICAgICAgICAgICBfdGhpcy50bXBPZmZzZXRzID0ge307XG4gICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlID0gbmV3IFZpcnR1YWxFbGVtZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgX3RoaXMub2Zmc2V0S2V5cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLmV2ZW50TGlzdGVuZXIoJ29uJyk7XG4gICAgICAgICAgICBfdGhpcy52Z2VuZXJhdG9yID0gX3RoaXMuZ2VuZXJhdG9yO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5JykuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS50YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50ID0gdGhpcy5jb250ZW50ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlclBsYWNlSG9sZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUud3JhcHBlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VFdmVudCA9ICh0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciAmJiAhdGhpcy5wYXJlbnQuZGF0YVNvdXJjZS5kYXRhU291cmNlLm9mZmxpbmUpO1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGVudCwgcGFnZUhlaWdodDogdGhpcy5nZXRCbG9ja0hlaWdodCgpICogMiwgZGVib3VuY2VFdmVudDogZGVib3VuY2VFdmVudCxcbiAgICAgICAgICAgICAgICBheGVzOiB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IFsnWCcsICdZJ10gOiBbJ1knXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgaW50ZXJzZWN0aW9uX29ic2VydmVyXzEuSW50ZXJTZWN0aW9uT2JzZXJ2ZXIodGhpcy52aXJ0dWFsRWxlLndyYXBwZXIsIG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckVtcHR5ID0gZnVuY3Rpb24gKHRib2R5KSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKDAsIDApO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5zY3JvbGxMaXN0ZW5lciA9IGZ1bmN0aW9uIChzY3JvbGxBcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2ZW50RXZlbnQgfHwgdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdGhpcy5jb250ZW50ID09PSBlajJfYmFzZV8xLmNsb3Nlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJy5lLWNvbnRlbnQnKSB8fCB0aGlzLmNvbnRlbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHNjcm9sbEFyZ3Muc2VudGluZWw7XG4gICAgICAgICAgICB2YXIgdmlld0luZm8gPSB0aGlzLmdldEluZm9Gcm9tVmlldyhzY3JvbGxBcmdzLmRpcmVjdGlvbiwgaW5mbywgc2Nyb2xsQXJncy5vZmZzZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldkluZm8gJiYgKChpbmZvLmF4aXMgPT09ICdZJyAmJiB0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpID09PSB2aWV3SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICB8fCAoaW5mby5heGlzID09PSAnWCcgJiYgdGhpcy5wcmV2SW5mby5jb2x1bW5JbmRleGVzLnRvU3RyaW5nKCkgPT09IHZpZXdJbmZvLmNvbHVtbkluZGV4ZXMudG9TdHJpbmcoKSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IHZpZXdJbmZvLmNvbHVtbkluZGV4ZXMgOiBbXSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSB2aWV3SW5mby5sb2FkTmV4dCAmJiAhdmlld0luZm8ubG9hZFNlbGYgPyB2aWV3SW5mby5uZXh0SW5mby5wYWdlIDogdmlld0luZm8ucGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSh2aWV3SW5mby5ldmVudCwgeyByZXF1ZXN0VHlwZTogJ3ZpcnR1YWxzY3JvbGwnLCB2aXJ0dWFsSW5mbzogdmlld0luZm8gfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmJsb2NrID0gZnVuY3Rpb24gKGJsaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKGJsayk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEluZm9Gcm9tVmlldyA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGluZm8sIGUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wQmxvY2tzID0gW107XG4gICAgICAgICAgICB2YXIgaW5mb1R5cGUgPSB7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBzZW50aW5lbEluZm86IGluZm8sIG9mZnNldHM6IGUgfTtcbiAgICAgICAgICAgIGluZm9UeXBlLnBhZ2UgPSB0aGlzLmdldFBhZ2VGcm9tVG9wKGUudG9wLCBpbmZvVHlwZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ibG9ja0luZGV4ZXMgPSB0ZW1wQmxvY2tzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvVHlwZS5wYWdlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmxvYWRTZWxmID0gIXRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKHRlbXBCbG9ja3NbaW5mb1R5cGUuYmxvY2tdKTtcbiAgICAgICAgICAgIHZhciBibG9ja3MgPSB0aGlzLmVuc3VyZUJsb2NrcyhpbmZvVHlwZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ibG9ja0luZGV4ZXMgPSBibG9ja3M7XG4gICAgICAgICAgICBpbmZvVHlwZS5sb2FkTmV4dCA9ICFibG9ja3MuZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHRlbXBCbG9ja3MuaW5kZXhPZih2YWwpID09PSAtMTsgfSlcbiAgICAgICAgICAgICAgICAuZXZlcnkodGhpcy5ibG9jay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmV2ZW50ID0gKGluZm9UeXBlLmxvYWROZXh0IHx8IGluZm9UeXBlLmxvYWRTZWxmKSA/IGNvbnN0YW50XzEubW9kZWxDaGFuZ2VkIDogY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrO1xuICAgICAgICAgICAgaW5mb1R5cGUubmV4dEluZm8gPSBpbmZvVHlwZS5sb2FkTmV4dCA/IHsgcGFnZTogTWF0aC5tYXgoMSwgaW5mb1R5cGUucGFnZSArIChkaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAtMSkpIH0gOiB7fTtcbiAgICAgICAgICAgIGluZm9UeXBlLmNvbHVtbkluZGV4ZXMgPSBpbmZvLmF4aXMgPT09ICdYJyA/IHRoaXMudmdlbmVyYXRvci5nZXRDb2x1bW5JbmRleGVzKCkgOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5mby5heGlzID09PSAnWCcpIHtcbiAgICAgICAgICAgICAgICBpbmZvVHlwZS5ldmVudCA9IGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmZvVHlwZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZW5zdXJlQmxvY2tzID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbmZvLmJsb2NrSW5kZXhlc1tpbmZvLmJsb2NrXTtcbiAgICAgICAgICAgIHZhciBtSWR4O1xuICAgICAgICAgICAgdmFyIG9sZCA9IGluZGV4O1xuICAgICAgICAgICAgdmFyIG1heCA9IE1hdGgubWF4O1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBpbmZvLmRpcmVjdGlvbiA9PT0gJ2Rvd24nID8gW21heChpbmRleCwgMSksICsraW5kZXgsICsraW5kZXhdIDogW21heChpbmRleCAtIDEsIDEpLCBpbmRleCwgaW5kZXggKyAxXTtcbiAgICAgICAgICAgIGluZGV4ZXMgPSBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAodmFsLCBpbmQpIHsgcmV0dXJuIGluZGV4ZXMuaW5kZXhPZih2YWwpID09PSBpbmQ7IH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkgPT09IGluZGV4ZXMudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZm8ubG9hZFNlbGYgfHwgKGluZm8uZGlyZWN0aW9uID09PSAnZG93bicgJiYgdGhpcy5pc0VuZEJsb2NrKG9sZCkpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mby5wYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ZXMuc29tZShmdW5jdGlvbiAodmFsLCBpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsID09PSBfdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbUlkeCA9IGluZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG1JZHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBpbmRleGVzLnNsaWNlKDAsIG1JZHggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9jayA9PT0gMCAmJiBpbmRleGVzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzBdIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcyA9IFtpbmRleGVzWzBdIC0gMSwgaW5kZXhlc1swXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBuZXdDaGlsZCwgZSkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSBlLnZpcnR1YWxJbmZvO1xuICAgICAgICAgICAgdGhpcy5wcmV2SW5mbyA9IHRoaXMucHJldkluZm8gfHwgZS52aXJ0dWFsSW5mbztcbiAgICAgICAgICAgIHZhciBjQmxvY2sgPSAoaW5mby5jb2x1bW5JbmRleGVzWzBdKSAtIDE7XG4gICAgICAgICAgICB2YXIgY09mZnNldCA9IHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNCbG9jayk7XG4gICAgICAgICAgICB2YXIgd2lkdGg7XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gaW5mby5ibG9ja0luZGV4ZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE9mZnNldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSB0aGlzLmdldFRyYW5zbGF0ZVkodGhpcy5jb250ZW50LnNjcm9sbFRvcCwgdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCwgaW5mbyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoY09mZnNldCwgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoY09mZnNldCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY0luZGV4ID0gaW5mby5jb2x1bW5JbmRleGVzO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0luZGV4W2NJbmRleC5sZW5ndGggLSAxXSkgLSB0aGlzLmdldENvbHVtbk9mZnNldChjSW5kZXhbMF0gLSAxKSArICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuc2V0V3JhcHBlcldpZHRoKHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5zZXRXcmFwcGVyV2lkdGgod2lkdGgsIHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGVqMl9iYXNlXzIuQnJvd3Nlci5pc0lFKTtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZGlyZWN0aW9uID09PSAndXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibGsgPSB0aGlzLm9mZnNldHNbdGhpcy5nZXRUb3RhbEJsb2NrcygpXSAtIHRoaXMucHJldkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc1RvcCA9IHRoaXMuY29udGVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSBzVG9wICsgYmxrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVyLnNldFBhZ2VIZWlnaHQodGhpcy5nZXRPZmZzZXQoYmxvY2tzW2Jsb2Nrcy5sZW5ndGggLSAxXSkgLSB0aGlzLmdldE9mZnNldChibG9ja3NbMF0gLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZJbmZvID0gaW5mbztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoZS5jb3VudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gZS5jb3VudDtcbiAgICAgICAgICAgICAgICB0aGlzLm1heFBhZ2UgPSBNYXRoLmNlaWwoZS5jb3VudCAvIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTY3JvbGxQb3NpdGlvbihlLnJlcXVlc3RUeXBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuc2V0VmlydHVhbEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbHVtbk9mZnNldCh0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCArIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggLSAxKSArICdweCcgOiAnMTAwJSc7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuc2V0VmlydHVhbEhlaWdodCh0aGlzLm9mZnNldHNbdGhpcy5nZXRUb3RhbEJsb2NrcygpXSwgd2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5zZXRWaXJ0dWFsSGVpZ2h0KDEsIHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0UGFnZUZyb21Ub3AgPSBmdW5jdGlvbiAoc1RvcCwgaW5mbykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHZhciBwYWdlID0gMDtcbiAgICAgICAgICAgIHZhciBleHRyYSA9IHRoaXMub2Zmc2V0c1t0b3RhbF0gLSB0aGlzLnByZXZIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLm9mZnNldEtleXMuc29tZShmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlPZmZzZXQgPSBOdW1iZXIob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gc1RvcCA8IF90aGlzLm9mZnNldHNbb2Zmc2V0XSB8fCAoaU9mZnNldCA9PT0gdG90YWwgJiYgc1RvcCA+IF90aGlzLm9mZnNldHNbb2Zmc2V0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2NrID0gaU9mZnNldCAlIDIgPT09IDAgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKF90aGlzLnZnZW5lcmF0b3IuZ2V0UGFnZShpT2Zmc2V0KSwgX3RoaXMubWF4UGFnZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYm9yZGVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGFnZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWSA9IGZ1bmN0aW9uIChzVG9wLCBjSGVpZ2h0LCBpbmZvKSB7XG4gICAgICAgICAgICBpZiAoaW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5mbyA9IHsgcGFnZTogdGhpcy5nZXRQYWdlRnJvbVRvcChzVG9wLCB7fSkgfTtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mby5wYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBibG9jayA9IChpbmZvLmJsb2NrSW5kZXhlc1swXSB8fCAxKSAtIDE7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5nZXRPZmZzZXQoYmxvY2spO1xuICAgICAgICAgICAgdmFyIGVuZFRyYW5zbGF0ZSA9IHRoaXMuZ2V0T2Zmc2V0KGluZm8uYmxvY2tJbmRleGVzW2luZm8uYmxvY2tJbmRleGVzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGUgPiBzVG9wID8gdGhpcy5nZXRPZmZzZXQoYmxvY2sgLSAxKSA6IGVuZFRyYW5zbGF0ZSA8IChzVG9wICsgY0hlaWdodCkgPyB0aGlzLmdldE9mZnNldChibG9jayArIDEpIDogdHJhbnNsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRPZmZzZXQgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLm9mZnNldHNbYmxvY2tdIHwgMCwgdGhpcy5vZmZzZXRzW3RoaXMubWF4QmxvY2tdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25FbnRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgY3VycmVudCwgZGlyZWN0aW9uLCBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHhBeGlzID0gY3VycmVudC5heGlzID09PSAnWCc7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IF90aGlzLnByZXZJbmZvLm9mZnNldHMgPyBfdGhpcy5wcmV2SW5mby5vZmZzZXRzLnRvcCA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF90aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciB4ID0gX3RoaXMuZ2V0Q29sdW1uT2Zmc2V0KHhBeGlzID8gX3RoaXMudmdlbmVyYXRvci5nZXRDb2x1bW5JbmRleGVzKClbMF0gLSAxIDogX3RoaXMucHJldkluZm8uY29sdW1uSW5kZXhlc1swXSAtIDEpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gX3RoaXMuZ2V0VHJhbnNsYXRlWShlLnRvcCwgaGVpZ2h0LCB4QXhpcyAmJiB0b3AgPT09IGUudG9wID8gX3RoaXMucHJldkluZm8gOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoeCwgTWF0aC5taW4oeSwgX3RoaXMub2Zmc2V0c1tfdGhpcy5tYXhCbG9ja10pKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlci52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKHgsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRbYWN0aW9uXShjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5vbkRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFthY3Rpb25dKGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaywgdGhpcy5yZWZyZXNoQ29udGVudFJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5wYXJlbnRbYWN0aW9uXShldmVudCArIFwiLWJlZ2luXCIsIF90aGlzLm9uQWN0aW9uQmVnaW4sIF90aGlzKTsgfSk7XG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZShmdW5jdGlvbiAoc2Nyb2xsQXJncykgeyByZXR1cm4gX3RoaXMuc2Nyb2xsTGlzdGVuZXIoc2Nyb2xsQXJncyk7IH0sIF90aGlzLm9uRW50ZXJlZCgpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCBmbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb250ZW50UmVhZHksIGZuLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmxvY2tTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA+PiAxO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRCbG9ja0hlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJsb2NrU2l6ZSgpICogdXRpbF8xLmdldFJvd0hlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5pc0VuZEJsb2NrID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgdG90YWxCbG9ja3MgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gdG90YWxCbG9ja3MgfHwgaW5kZXggPT09IHRvdGFsQmxvY2tzIC0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0VG90YWxCbG9ja3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuY291bnQgLyB0aGlzLmdldEJsb2NrU2l6ZSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Q29sdW1uT2Zmc2V0ID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmNPZmZzZXRzW2Jsb2NrXSB8IDA7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldE1vZGVsR2VuZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5WaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZXNldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9ucy5zb21lKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IGFjdGlvbjsgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IHRoaXMuY29udGVudC5zY3JvbGxUb3AgIT09IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0UHJvcGVydGllcyh7IHBhZ2VTZXR0aW5nczogeyBjdXJyZW50UGFnZTogMSB9IH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5nZXRSb3dzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXM7XG4gICAgICAgICAgICB2YXIgc3RhcnRJZHggPSAocHJldlswXSAtIDEpICogdGhpcy5nZXRCbG9ja1NpemUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4IC0gc3RhcnRJZHhdO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoT2Zmc2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93ID0gMDtcbiAgICAgICAgICAgIHZhciBiU2l6ZSA9IHRoaXMuZ2V0QmxvY2tTaXplKCk7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICB0aGlzLnByZXZIZWlnaHQgPSB0aGlzLm9mZnNldHNbdG90YWxdO1xuICAgICAgICAgICAgdGhpcy5tYXhCbG9jayA9IHRvdGFsICUgMiA9PT0gMCA/IHRvdGFsIC0gMiA6IHRvdGFsIC0gMTtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkodG90YWwpKS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gKytyb3c7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IChfdGhpcy52Z2VuZXJhdG9yLmNhY2hlW2Jsb2NrXSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciByZW0gPSBfdGhpcy5jb3VudCAlIGJTaXplO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gYmxvY2sgaW4gX3RoaXMudmdlbmVyYXRvci5jYWNoZSA/XG4gICAgICAgICAgICAgICAgICAgIHRtcCAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKSA6IHJlbSAmJiBibG9jayA9PT0gdG90YWwgPyByZW0gKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCkgOiBfdGhpcy5nZXRCbG9ja0hlaWdodCgpO1xuICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldHNbYmxvY2tdID0gKF90aGlzLm9mZnNldHNbYmxvY2sgLSAxXSB8IDApICsgc2l6ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy50bXBPZmZzZXRzW2Jsb2NrXSA9IF90aGlzLm9mZnNldHNbYmxvY2sgLSAxXSB8IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMub2Zmc2V0cyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZnZW5lcmF0b3IucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFZpcnR1YWxFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy52Z2VuZXJhdG9yLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxDb250ZW50UmVuZGVyZXI7XG4gICAgfShjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcikpO1xuICAgIGV4cG9ydHMuVmlydHVhbENvbnRlbnRSZW5kZXJlciA9IFZpcnR1YWxDb250ZW50UmVuZGVyZXI7XG4gICAgdmFyIFZpcnR1YWxIZWFkZXJSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhWaXJ0dWFsSGVhZGVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxIZWFkZXJSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUgPSBuZXcgVmlydHVhbEVsZW1lbnRIYW5kbGVyKCk7XG4gICAgICAgICAgICBfdGhpcy5nZW4gPSBuZXcgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS52aXJ0dWFsSW5mby5zZW50aW5lbEluZm8uYXhpcyA9PT0gJ1gnID8gX3RoaXMucmVmcmVzaFVJKCkgOiBudWxsOyB9LCBfdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMuZ2VuLmdldENvbHVtbkluZGV4ZXModGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQpKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS50YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlclBsYWNlSG9sZGVyKCdhYnNvbHV0ZScpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS53cmFwcGVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdlbi5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLmdlbi5nZXRDb2x1bW5JbmRleGVzKHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkKSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlZnJlc2hVSS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbEhlYWRlclJlbmRlcmVyO1xuICAgIH0oaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsSGVhZGVyUmVuZGVyZXIgPSBWaXJ0dWFsSGVhZGVyUmVuZGVyZXI7XG4gICAgdmFyIFZpcnR1YWxFbGVtZW50SGFuZGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxFbGVtZW50SGFuZGxlcigpIHtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnJlbmRlcldyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS12aXJ0dWFsdGFibGUnIH0pO1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMudGFibGUpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcHBlcik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUucmVuZGVyUGxhY2VIb2xkZXIgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uID0gJ3JlbGF0aXZlJzsgfVxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXZpcnR1YWx0cmFjaycsIHN0eWxlczogXCJwb3NpdGlvbjpcIiArIHBvc2l0aW9uIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLmFkanVzdFRhYmxlID0gZnVuY3Rpb24gKHhWYWx1ZSwgeVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyB4VmFsdWUgKyBcInB4LCBcIiArIHlWYWx1ZSArIFwicHgpXCI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuc2V0V3JhcHBlcldpZHRoID0gZnVuY3Rpb24gKHdpZHRoLCBmdWxsKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUud2lkdGggPSB3aWR0aCA/IHdpZHRoICsgXCJweFwiIDogZnVsbCA/ICcxMDAlJyA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnNldFZpcnR1YWxIZWlnaHQgPSBmdW5jdGlvbiAoaGVpZ2h0LCB3aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsRWxlbWVudEhhbmRsZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxFbGVtZW50SGFuZGxlciA9IFZpcnR1YWxFbGVtZW50SGFuZGxlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbnRlclNlY3Rpb25PYnNlcnZlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEludGVyU2VjdGlvbk9ic2VydmVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmZyb21XaGVlbCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zZW50aW5lbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgJ3VwJzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSByZWN0LnRvcCAtIF90aGlzLmNvbnRhaW5lclJlY3QudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gdG9wID49IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9wICsgKF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDIpID49IDA7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF4aXM6ICdZJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2Rvd24nOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNIZWlnaHQgPSBfdGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gcmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSByZWN0LmJvdHRvbSA8PSBfdGhpcy5jb250YWluZXJSZWN0LmJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3AgLSAoX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMikgPD0gX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1knXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAncmlnaHQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gcmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHJpZ2h0IDwgX3RoaXMuY29udGFpbmVyUmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaWdodCAtIF90aGlzLmNvbnRhaW5lclJlY3Qud2lkdGggPD0gX3RoaXMuY29udGFpbmVyUmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1gnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IGxlZnQgPiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlZnQgKyBfdGhpcy5jb250YWluZXJSZWN0LndpZHRoID49IF90aGlzLmNvbnRhaW5lclJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1gnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJlY3QgPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMub3B0aW9ucy5jb250YWluZXIsICd3aGVlbCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZyb21XaGVlbCA9IHRydWU7IH0sIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMub3B0aW9ucy5jb250YWluZXIsICdzY3JvbGwnLCB0aGlzLnZpcnR1YWxTY3JvbGxIYW5kbGVyKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLnNlbnRpbmVsSW5mb1tkaXJlY3Rpb25dO1xuICAgICAgICAgICAgcmV0dXJuIGluZm8uY2hlY2sodGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBpbmZvKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnZpcnR1YWxTY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcHJldlRvcCA9IDA7XG4gICAgICAgICAgICB2YXIgcHJldkxlZnQgPSAwO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlZDEwMCA9IGVqMl9iYXNlXzIuZGVib3VuY2UoY2FsbGJhY2ssIDEwMCk7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VkNTAgPSBlajJfYmFzZV8yLmRlYm91bmNlKGNhbGxiYWNrLCA1MCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gZS50YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gZS50YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gcHJldlRvcCA8IHRvcCA/ICdkb3duJyA6ICd1cCc7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gcHJldkxlZnQgPT09IGxlZnQgPyBkaXJlY3Rpb24gOiBwcmV2TGVmdCA8IGxlZnQgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICAgICAgICAgIHByZXZUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgcHJldkxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gX3RoaXMuc2VudGluZWxJbmZvW2RpcmVjdGlvbl07XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuYXhlcy5pbmRleE9mKGN1cnJlbnQuYXhpcykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gX3RoaXMuY2hlY2soZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5lbnRlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRW50ZXJDYWxsYmFjayhfdGhpcy5lbGVtZW50LCBjdXJyZW50LCBkaXJlY3Rpb24sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBfdGhpcy5mcm9tV2hlZWwgPyBfdGhpcy5vcHRpb25zLmRlYm91bmNlRXZlbnQgPyBkZWJvdW5jZWQxMDAgOiBjYWxsYmFjayA6IGRlYm91bmNlZDEwMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuYXhpcyA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbiA9IGRlYm91bmNlZDUwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZuKHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIHNlbnRpbmVsOiBjdXJyZW50LCBvZmZzZXQ6IHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZnJvbVdoZWVsID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuc2V0UGFnZUhlaWdodCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEludGVyU2VjdGlvbk9ic2VydmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5JbnRlclNlY3Rpb25PYnNlcnZlciA9IEludGVyU2VjdGlvbk9ic2VydmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2ludGVyc2VjdGlvbi1vYnNlcnZlci5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5jT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5yb3dNb2RlbEdlbmVyYXRvciA9IHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgPyBuZXcgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCkgOiBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBub3RpZnlBcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZm8gPSBub3RpZnlBcmdzLnZpcnR1YWxJbmZvID0gbm90aWZ5QXJncy52aXJ0dWFsSW5mbyB8fCB0aGlzLmdldERhdGEoKTtcbiAgICAgICAgICAgIHZhciB4QXhpcyA9IGluZm8uc2VudGluZWxJbmZvICYmIGluZm8uc2VudGluZWxJbmZvLmF4aXMgPT09ICdYJztcbiAgICAgICAgICAgIHZhciBwYWdlID0gIXhBeGlzICYmIGluZm8ubG9hZE5leHQgJiYgIWluZm8ubG9hZFNlbGYgPyBpbmZvLm5leHRJbmZvLnBhZ2UgOiBpbmZvLnBhZ2U7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gfn4odGhpcy5tb2RlbC5wYWdlU2l6ZSAvIDIpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLmdldEJsb2NrSW5kZXhlcyhwYWdlKTtcbiAgICAgICAgICAgIHZhciBsb2FkZWRCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBbmRSZXNldENhY2hlKG5vdGlmeUFyZ3MucmVxdWVzdFR5cGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVt2YWx1ZV0gPSBfdGhpcy5yb3dNb2RlbEdlbmVyYXRvci5yZWZyZXNoUm93cyhfdGhpcy5jYWNoZVt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBfdGhpcy5yb3dNb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlydHVhbEluZm86IGluZm8sIHN0YXJ0SW5kZXg6IF90aGlzLmdldFN0YXJ0SW5kZXgodmFsdWUsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWFuID0gfn5NYXRoLm1heChyb3dzLmxlbmd0aCwgX3RoaXMubW9kZWwucGFnZVNpemUpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVtpbmRleGVzWzBdXSA9IHJvd3Muc2xpY2UoMCwgbWVkaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1sxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW2luZGV4ZXNbMV1dID0gcm93cy5zbGljZShtZWRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAmJiAheEF4aXMgJiYgX3RoaXMuY2FjaGVbdmFsdWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW3ZhbHVlXSA9IF90aGlzLnVwZGF0ZUdyb3VwUm93KF90aGlzLmNhY2hlW3ZhbHVlXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIF90aGlzLmNhY2hlW3ZhbHVlXSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZEJsb2Nrcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzID0gbG9hZGVkQmxvY2tzO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRCbG9ja0luZGV4ZXMgPSBmdW5jdGlvbiAocGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYWdlICsgKHBhZ2UgLSAxKSwgcGFnZSAqIDJdO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFBhZ2UgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBibG9jayAlIDIgPT09IDAgPyBibG9jayAvIDIgOiAoYmxvY2sgKyAxKSAvIDI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXNCbG9ja0F2YWlsYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluIHRoaXMuY2FjaGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGFnZTogdGhpcy5tb2RlbC5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICBibG9ja0luZGV4ZXM6IHRoaXMuZ2V0QmxvY2tJbmRleGVzKHRoaXMubW9kZWwuY3VycmVudFBhZ2UpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2Rvd24nLFxuICAgICAgICAgICAgICAgIGNvbHVtbkluZGV4ZXM6IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRTdGFydEluZGV4ID0gZnVuY3Rpb24gKGJsaywgZGF0YSwgZnVsbCkge1xuICAgICAgICAgICAgaWYgKGZ1bGwgPT09IHZvaWQgMCkgeyBmdWxsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIHBhZ2UgPSB0aGlzLmdldFBhZ2UoYmxrKTtcbiAgICAgICAgICAgIHZhciBldmVuID0gYmxrICUgMiA9PT0gMDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IChwYWdlIC0gMSkgKiB0aGlzLm1vZGVsLnBhZ2VTaXplO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bGwgfHwgIWV2ZW4gPyBpbmRleCA6IGluZGV4ICsgfn4odGhpcy5tb2RlbC5wYWdlU2l6ZSAvIDIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENvbHVtbkluZGV4ZXMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChjb250ZW50ID09PSB2b2lkIDApIHsgY29udGVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkOyB9XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNMZWZ0ID0gY29udGVudC5zY3JvbGxMZWZ0IHwgMDtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5jT2Zmc2V0cyk7XG4gICAgICAgICAgICB2YXIgY1dpZHRoID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIHNMZWZ0ID0gTWF0aC5taW4odGhpcy5jT2Zmc2V0c1trZXlzLmxlbmd0aCAtIDFdIC0gY1dpZHRoLCBzTGVmdCk7XG4gICAgICAgICAgICB2YXIgY2FsV2lkdGggPSBlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgPyAyICogY1dpZHRoIDogY1dpZHRoIC8gMjtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gc0xlZnQgKyBjV2lkdGggKyAoc0xlZnQgPT09IDAgPyBjYWxXaWR0aCA6IDApO1xuICAgICAgICAgICAga2V5cy5zb21lKGZ1bmN0aW9uIChvZmZzZXQsIGluZHgsIGlucHV0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlPZmZzZXQgPSBOdW1iZXIob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0VmFsID0gX3RoaXMuY09mZnNldHNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gc0xlZnQgLSBjYWxXaWR0aCA8PSBvZmZzZXRWYWwgJiYgbGVmdCArIGNhbFdpZHRoID49IG9mZnNldFZhbDtcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnQgKyBjYWxXaWR0aCA8IG9mZnNldFZhbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY2hlY2tBbmRSZXNldENhY2hlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIGNsZWFyID0gWydwYWdpbmcnLCAncmVmcmVzaCcsICdzb3J0aW5nJywgJ2ZpbHRlcmluZycsICdzZWFyY2hpbmcnLCAnZ3JvdXBpbmcnLCAndW5ncm91cGluZyddXG4gICAgICAgICAgICAgICAgLnNvbWUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBhY3Rpb24gPT09IHZhbHVlOyB9KTtcbiAgICAgICAgICAgIGlmIChjbGVhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsZWFyO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnJlZnJlc2hDb2xPZmZzZXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSAwO1xuICAgICAgICAgICAgdGhpcy5jT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgdmFyIGdMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGNMZW4gPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpc1Zpc2libGUgPSBmdW5jdGlvbiAoY29sdW1uKSB7IHJldHVybiBjb2x1bW4udmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICghX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW4gPyBfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uLmZpZWxkKSA8IDAgOiBjb2x1bW4udmlzaWJsZSk7IH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoYywgbikgeyByZXR1cm4gX3RoaXMuY09mZnNldHNbbl0gPSAoX3RoaXMuY09mZnNldHNbbiAtIDFdIHwgMCkgKyAzMDsgfSk7XG4gICAgICAgICAgICBBcnJheS5hcHBseShudWxsLCBBcnJheShjTGVuKSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbCsrOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaywgaSkge1xuICAgICAgICAgICAgICAgIGJsb2NrID0gYmxvY2sgKyBnTGVuO1xuICAgICAgICAgICAgICAgIF90aGlzLmNPZmZzZXRzW2Jsb2NrXSA9IChfdGhpcy5jT2Zmc2V0c1tibG9jayAtIDFdIHwgMCkgKyAoaXNWaXNpYmxlKGNvbHNbaV0pID8gcGFyc2VJbnQoY29sc1tpXS53aWR0aCwgMTApIDogMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS51cGRhdGVHcm91cFJvdyA9IGZ1bmN0aW9uIChjdXJyZW50LCBibG9jaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjdXJyZW50Rmlyc3QgPSBjdXJyZW50WzBdO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIoa2V5KSA8IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmNvbmNhdChfdGhpcy5jYWNoZVtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rmlyc3QuaXNEYXRhUm93IHx8IGJsb2NrICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0ZUdyb3VwKGN1cnJlbnQsIHJvd3MpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLml0ZXJhdGVHcm91cCA9IGZ1bmN0aW9uIChjdXJyZW50LCByb3dzKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpcnN0ID0gY3VycmVudFswXTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaXJzdC5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc1ByZXNlbnQgPSBjdXJyZW50LnNvbWUoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3dzLnNvbWUoZnVuY3Rpb24gKG9Sb3csIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSBvUm93ICYmIG9Sb3cuZGF0YS5maWVsZCAhPT0gdW5kZWZpbmVkICYmIG9Sb3cuZGF0YS5maWVsZCA9PT0gcm93LmRhdGEuZmllbGQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG9Sb3cuZGF0YS5rZXkgPT09IHJvdy5kYXRhLmtleTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGlzUHJlc2VudCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdGhpcy5pdGVyYXRlR3JvdXAoY3VycmVudCwgcm93cy5zbGljZShvZmZzZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gcm93cyA9IHJvd3MuY29uY2F0KF90aGlzLmNhY2hlW2tleV0pOyB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IgPSBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9lZGl0LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGxcIiwgXCIuLi9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGxcIiwgXCIuLi9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsXCIsIFwiLi9pbmxpbmUtZWRpdFwiLCBcIi4vYmF0Y2gtZWRpdFwiLCBcIi4vZGlhbG9nLWVkaXRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBldmVudHMsIGVkaXRfcmVuZGVyZXJfMSwgYm9vbGVhbl9lZGl0X2NlbGxfMSwgZHJvcGRvd25fZWRpdF9jZWxsXzEsIG51bWVyaWNfZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGlubGluZV9lZGl0XzEsIGJhdGNoX2VkaXRfMSwgZGlhbG9nX2VkaXRfMSwgZWoyX3BvcHVwc18xLCB1dGlsXzEsIGVqMl9wb3B1cHNfMiwgZWoyX2lucHV0c18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRDZWxsVHlwZSA9IHtcbiAgICAgICAgICAgICAgICAnZHJvcGRvd25lZGl0JzogZHJvcGRvd25fZWRpdF9jZWxsXzEuRHJvcERvd25FZGl0Q2VsbCxcbiAgICAgICAgICAgICAgICAnbnVtZXJpY2VkaXQnOiBudW1lcmljX2VkaXRfY2VsbF8xLk51bWVyaWNFZGl0Q2VsbCwgJ2Jvb2xlYW5lZGl0JzogYm9vbGVhbl9lZGl0X2NlbGxfMS5Cb29sZWFuRWRpdENlbGwsICdkZWZhdWx0JzogZGVmYXVsdF9lZGl0X2NlbGxfMS5EZWZhdWx0RWRpdENlbGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0geyAnaW5saW5lJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnbm9ybWFsJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnYmF0Y2gnOiBiYXRjaF9lZGl0XzEuQmF0Y2hFZGl0LCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfMS5EaWFsb2dFZGl0IH07XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdE9iaigpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUNvbFR5cGVPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNvbC5lZGl0ID0gZWoyX2Jhc2VfMi5leHRlbmQobmV3IHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZSAmJiB0aGlzLmVkaXRDZWxsVHlwZVtjb2wuZWRpdFR5cGVdID9cbiAgICAgICAgICAgICAgICAgICAgY29sLmVkaXRUeXBlIDogJ2RlZmF1bHQnXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciksIGNvbC5lZGl0IHx8IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZWRpdCc7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dBZGRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0RlbGV0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dFZGl0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCBnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbEVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0T2JqKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUVkaXRPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgZWRpdF9yZW5kZXJlcl8xLkVkaXRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sVHlwZU9iaigpO1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQWxlcnREbGcoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29uZmlybURsZygpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnRhcEV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudGFwRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlckFnZW50KCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRvdWJsZVRhcCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIC9pcGhvbmV8aXBvZHxpcGFkLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnRpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCBnT2JqLmlzRWRpdCB8fCBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdFZGl0T3BlcmF0aW9uQWxlcnQnLCB0aGlzLmFsZXJ0RE9iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdHIpIHtcbiAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHIuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnN0YXJ0RWRpdCh0cik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZ1xuICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdDYW5jZWxFZGl0JywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChnT2JqLnNlbGVjdGVkUm93SW5kZXgpIHx8IGdPYmouc2VsZWN0ZWRSb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdEZWxldGVPcGVyYXRpb25BbGVydCcsIHRoaXMuYWxlcnRET2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3Muc2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdDb25maXJtRGVsZXRlJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZChmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZWxldGVSb3cgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlUmVjb3JkKG51bGwsIHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3BhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCldKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJyAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3Muc2hvd0NvbmZpcm1EaWFsb2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0JhdGNoU2F2ZUNvbmZpcm0nLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUNlbGwgPSBmdW5jdGlvbiAocm93SW5kZXgsIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnVwZGF0ZUNlbGwocm93SW5kZXgsIGZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnVwZGF0ZVJvdyhpbmRleCwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmJhdGNoQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hTYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbmRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVkaXRDZWxsID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmVkaXRDZWxsKGluZGV4LCBmaWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVkaXRGb3JtVmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtT2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybU9iai52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRCYXRjaENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcyA/IHRoaXMuZWRpdE1vZHVsZS5nZXRCYXRjaENoYW5nZXMoKSA6IHt9O1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRDdXJyZW50RWRpdENlbGxEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMuZ2V0Q3VycmVudEVkaXRlZERhdGEodGhpcy5mb3JtT2JqLmVsZW1lbnQsIHt9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmpbT2JqZWN0LmtleXMob2JqKVswXV07XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNhdmVDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnNhdmVDZWxsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVuZEVkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zaG93RGlhbG9nID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9iaikge1xuICAgICAgICAgICAgb2JqLmNvbnRlbnQgPSAnPGRpdj4nICsgdGhpcy5sMTBuLmdldENvbnN0YW50KGNvbnRlbnQpICsgJzwvZGl2Pic7XG4gICAgICAgICAgICBvYmouc2hvdygpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRWYWx1ZUZyb21UeXBlID0gZnVuY3Rpb24gKGNvbCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSB2YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29sLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB2YWwgPSAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChwYXJzZUZsb2F0KHZhbHVlKSkgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXRUeXBlICE9PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWx1ZSA9PT0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdUcnVlJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdkYXRlcGlja2VyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveVRvb2xUaXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS10b29sdGlwJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGVsZW0uZWoyX2luc3RhbmNlc1swXS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNyZWF0ZUNvbmZpcm1EbGcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IHRoaXMuZGxnV2lkZ2V0KFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRsZ09rLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnT0tCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLXByaW1hcnknLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5kbGdDYW5jZWwuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCAnRWRpdENvbmZpcm0nKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY3JlYXRlQWxlcnREbGcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iaiA9IHRoaXMuZGxnV2lkZ2V0KFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmFsZXJ0Q2xpY2suYmluZCh0aGlzKSwgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBjc3NDbGFzczogJ2UtZmxhdCcsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgJ0VkaXRBbGVydCcpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hbGVydENsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmouaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kbGdXaWRnZXQgPSBmdW5jdGlvbiAoYnRuT3B0aW9ucywgbmFtZSkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIG5hbWUgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc01vZGFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMzIwcHgnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBidG5PcHRpb25zO1xuICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICAgICAgb2JqLmFwcGVuZFRvKGRpdik7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kbGdDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ09rID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5kaWFsb2dPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1kbGctY29udGVudCcpLmZpcnN0RWxlbWVudENoaWxkLmlubmVyVGV4dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdDb25maXJtRGVsZXRlJyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEVkaXQnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQmF0Y2hTYXZlQ29uZmlybScpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0JhdGNoU2F2ZUxvc3RDaGFuZ2VzJyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnQ2FuY2VsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYXV0b0NvbCwgdGhpcy51cGRhdGVDb2xUeXBlT2JqLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy50b29sdGlwRGVzdHJveSwgdGhpcy5kZXN0cm95VG9vbFRpcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucHJldmVudEJhdGNoLCB0aGlzLnByZXZlbnRCYXRjaCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveUZvcm0sIHRoaXMuZGVzdHJveUZvcm0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMub25BY3Rpb25CZWdpbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCB0aGlzLmFjdGlvbkNvbXBsZXRlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMud2lyZUV2ZW50cywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmF1dG9Db2wsIHRoaXMudXBkYXRlQ29sVHlwZU9iaik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB0aGlzLmRlc3Ryb3lUb29sVGlwKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucHJldmVudEJhdGNoLCB0aGlzLnByZXZlbnRCYXRjaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3lGb3JtLCB0aGlzLmRlc3Ryb3lGb3JtKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCB0aGlzLmFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLm9uQWN0aW9uQmVnaW4pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnVud2lyZUV2ZW50cyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAnYWRkJyAmJiBlLnJlcXVlc3RUeXBlICE9PSAnYmVnaW5FZGl0JyAmJiBlLnJlcXVlc3RUeXBlICE9PSAnZGVsZXRlJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRDdXJyZW50RWRpdGVkRGF0YSA9IGZ1bmN0aW9uIChmb3JtLCBlZGl0ZWREYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGlucHV0cyA9IFtdLnNsaWNlLmNhbGwoZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1maWVsZCcpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpbnB1dHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeVVpZChpbnB1dHNbaV0uZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChjb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZWRpdC5yZWFkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMi5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZ09iai5lZGl0TW9kdWxlLmdldFZhbHVlRnJvbVR5cGUoY29sLCBjb2wuZWRpdC5yZWFkKGlucHV0c1tpXSkpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKGNvbC5maWVsZCwgdmFsdWUsIGVkaXRlZERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlZGl0ZWREYXRhO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5vbkFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJiB0aGlzLmZvcm1PYmogJiYgIXRoaXMuZm9ybU9iai5pc0Rlc3Ryb3llZCAmJiAhZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lGb3JtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95V2lkZ2V0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95V2lkZ2V0cyA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICBjb2xzID0gY29scyA/IGNvbHMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzEgPSBjb2xzOyBfaSA8IGNvbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXQuZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95Rm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmogJiYgIXRoaXMuZm9ybU9iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybU9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtcG9wdXAtb3BlbicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnByZXZlbnRCYXRjaCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRPYmogPSBhcmdzO1xuICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdCYXRjaFNhdmVMb3N0Q2hhbmdlcycsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZXhlY3V0ZUFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE9iai5oYW5kbGVyLmNhbGwodGhpcy5wcmV2ZW50T2JqLmluc3RhbmNlLCB0aGlzLnByZXZlbnRPYmouYXJnMSwgdGhpcy5wcmV2ZW50T2JqLmFyZzIsIHRoaXMucHJldmVudE9iai5hcmczLCB0aGlzLnByZXZlbnRPYmouYXJnNCwgdGhpcy5wcmV2ZW50T2JqLmFyZzUsIHRoaXMucHJldmVudE9iai5hcmc2LCB0aGlzLnByZXZlbnRPYmouYXJnNyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFwcGx5Rm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpO1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0ge307XG4gICAgICAgICAgICBjb2xzID0gY29scyA/IGNvbHMgOiBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMiA9IGNvbHM7IF9pIDwgY29sc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmFsaWRhdGlvblJ1bGVzICYmIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnIycgKyBnT2JqLmVsZW1lbnQuaWQgKyBjb2wuZmllbGQpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBydWxlc1tjb2wuZmllbGRdID0gY29sLnZhbGlkYXRpb25SdWxlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmogPSBuZXcgZWoyX2lucHV0c18xLkZvcm1WYWxpZGF0b3IoZm9ybSwge1xuICAgICAgICAgICAgICAgIHJ1bGVzOiBydWxlcyxcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uQ29tcGxldGU6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbGlkYXRpb25Db21wbGV0ZShhcmdzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGN1c3RvbVBsYWNlbWVudDogZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsRXJyb3JQbGFjZW1lbnQoaW5wdXRFbGVtZW50LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnZhbEVycm9yUGxhY2VtZW50ID0gZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSB1dGlsXzEucGFyZW50c1VudGlsKGlucHV0RWxlbWVudCwgJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghdGQuZWoyX2luc3RhbmNlcyB8fCAhdGQuZWoyX2luc3RhbmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2x0aXAgPSBuZXcgZWoyX3BvcHVwc18yLlRvb2x0aXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbnNPbjogJ2N1c3RvbScsIGNvbnRlbnQ6IGVycm9yLCBwb3NpdGlvbjogJ2JvdHRvbSBjZW50ZXInLCBjc3NDbGFzczogJ2UtZ3JpZGVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogeyBvcGVuOiB7IGVmZmVjdDogJ05vbmUnIH0sIGNsb3NlOiB7IGVmZmVjdDogJ05vbmUnIH0gfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5hcHBlbmRUbyh0ZCk7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXAub3Blbih0ZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZC5lajJfaW5zdGFuY2VzWzBdLmNvbnRlbnQgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB1dGlsXzEucGFyZW50c1VudGlsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmlucHV0TmFtZSksICdlLXJvd2NlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbSAmJiBlbGVtLmVqMl9pbnN0YW5jZXMgJiYgZWxlbS5lajJfaW5zdGFuY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdE9iaiA9IGVsZW0uZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3RhdHVzID09PSAnZmFpbHVyZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRPYmoub3Blbih1dGlsXzEucGFyZW50c1VudGlsKGFyZ3MuZWxlbWVudCwgJ2Utcm93Y2VsbCcpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRPYmouY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0T2JqLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FZGl0ID0gRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2VkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIE51bWVyaWNFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmllbGQnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuY29sdW1uLmZpZWxkLCBuYW1lOiBhcmdzLmNvbHVtbi5maWVsZCwgJ2UtbWFwcGluZ3VpZCc6IGFyZ3MuY29sdW1uLnVpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWoyX2luc3RhbmNlc1swXS52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gYXJncy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgaXNJbmxpbmUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZyc7XG4gICAgICAgICAgICB0aGlzLm9iaiA9IG5ldyBlajJfaW5wdXRzXzEuTnVtZXJpY1RleHRCb3goZWoyX2Jhc2VfMS5leHRlbmQoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJzZUZsb2F0KGFyZ3Mucm93RGF0YVtjb2wuZmllbGRdKSwgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlzSW5saW5lID8gJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGZsb2F0TGFiZWxUeXBlOiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICB9LCBjb2wuZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgY29sLmZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqICYmICF0aGlzLm9iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWVyaWNFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtZXJpY0VkaXRDZWxsID0gTnVtZXJpY0VkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIlxuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2lubGluZS1lZGl0LXJlbmRlcmVyXCIsIFwiLi9iYXRjaC1lZGl0LXJlbmRlcmVyXCIsIFwiLi9kaWFsb2ctZWRpdC1yZW5kZXJlclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaW5saW5lX2VkaXRfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRWRpdFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0ge1xuICAgICAgICAgICAgICAgICdpbmxpbmUnOiBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLklubGluZUVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgJ25vcm1hbCc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlciwgJ2JhdGNoJzogYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLkJhdGNoRWRpdFJlbmRlciwgJ2RpYWxvZyc6IGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEuRGlhbG9nRWRpdFJlbmRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyB0aGlzLmVkaXRUeXBlW3RoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlXShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5hZGROZXcgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGROZXcodGhpcy5nZXRFZGl0RWxlbWVudHMoYXJncyksIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5jb252ZXJ0V2lkZ2V0KGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUodGhpcy5nZXRFZGl0RWxlbWVudHMoYXJncyksIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5jb252ZXJ0V2lkZ2V0KGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5jb252ZXJ0V2lkZ2V0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaXNGb2N1c2VkO1xuICAgICAgICAgICAgdmFyIGNlbGw7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnID8gZ09iai5jb2x1bW5zIDogW2dPYmouZ2V0Q29sdW1uQnlGaWVsZChhcmdzLmNvbHVtbk5hbWUpXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18xID0gY29sczsgX2kgPCBjb2xzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjb2wudmFsdWVBY2Nlc3Nvcihjb2wuZmllbGQsIGFyZ3Mucm93RGF0YSwgY29sKTtcbiAgICAgICAgICAgICAgICBjZWxsID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPScgKyBjb2wudWlkICsgJ10nKTtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LndyaXRlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sLmVkaXQud3JpdGUoeyByb3dEYXRhOiBhcmdzLnJvd0RhdGEsIGVsZW1lbnQ6IGNlbGwsIGNvbHVtbjogY29sLCByZXF1ZXN0VHlwZTogYXJncy5yZXF1ZXN0VHlwZSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRm9jdXNlZCAmJiAhY2VsbC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW1lbnQoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIGlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5mb2N1c0VsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgZWxlbS5mb2N1cygpO1xuICAgICAgICAgICAgaWYgKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRlZmF1bHRjZWxsJykpIHtcbiAgICAgICAgICAgICAgICBlbGVtLnNldFNlbGVjdGlvblJhbmdlKGVsZW0udmFsdWUubGVuZ3RoLCBlbGVtLnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50cyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0ge307XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgPyBnT2JqLmNvbHVtbnMgOiBbZ09iai5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuY29sdW1uTmFtZSldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzIgPSBjb2xzOyBfaSA8IGNvbHNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18yW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2wudmFsdWVBY2Nlc3Nvcihjb2wuZmllbGQsIGFyZ3Mucm93RGF0YSwgY29sKTtcbiAgICAgICAgICAgICAgICB2YXIgdEFyZ3MgPSB7IGNvbHVtbjogY29sLCB2YWx1ZTogdmFsdWUsIHR5cGU6IGFyZ3MucmVxdWVzdFR5cGUgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LmNyZWF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSBjb2wuZWRpdC5jcmVhdGUodEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc0lucHV0ID0gaW5wdXQudGFnTmFtZSAhPT0gJ2lucHV0JyAmJiBpbnB1dC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaXNJbnB1dCA/IGlucHV0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgOiBpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb2wuZmllbGQsICdlLW1hcHBpbmd1aWQnOiBjb2wudWlkLFxuICAgICAgICAgICAgICAgICAgICBpZDogZ09iai5lbGVtZW50LmlkICsgY29sLmZpZWxkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGlucHV0LCBbJ2UtaW5wdXQnLCAnZS1maWVsZCddLCBbXSk7XG4gICAgICAgICAgICAgICAgaWYgKChjb2wuaXNQcmltYXJ5S2V5IHx8IGNvbC5pc0lkZW50aXR5KSAmJiBhcmdzLnJlcXVlc3RUeXBlID09PSAnYmVnaW5FZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbY29sLnVpZF0gPSBpbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkVkaXRSZW5kZXIgPSBFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW5saW5lRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXRSZW5kZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS5hZGROZXcgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBhcmdzLnJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2Utcm93IGUtYWRkZWRyb3cnIH0pO1xuICAgICAgICAgICAgdGJvZHkuaW5zZXJ0QmVmb3JlKGFyZ3Mucm93LCB0Ym9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgYXJncy5yb3cuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhcmdzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCB0cnVlKSk7XG4gICAgICAgICAgICBhcmdzLnJvdy5jbGFzc0xpc3QuYWRkKCdlLWVkaXRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgaXNFZGl0KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdMZW4gPSAwO1xuICAgICAgICAgICAgdmFyIGlzRGV0YWlsID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5kZXRhaWxUZW1wbGF0ZSkgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5jaGlsZEdyaWQpID8gMSA6IDA7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZ0xlbiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1lZGl0Y2VsbCBlLW5vcm1hbGVkaXQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbHNwYW46IChnT2JqLmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoICsgZ0xlbiArIGlzRGV0YWlsKS50b1N0cmluZygpIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUgZS1pbmxpbmUtZWRpdCcsIGF0dHJzOiB7IGNlbGxzcGFjaW5nOiAnMC4yNScgfSB9KTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKGlzRGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgdHIuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93Y29sbGFwc2UnIH0pLCB0ci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgZ0xlbikge1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSkpO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGRfMSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHN0eWxlOiAndGV4dC1hbGlnbjonICsgKGNvbC50ZXh0QWxpZ24gPyBjb2wudGV4dEFsaWduIDogJycpIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZF8xLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbC51aWRdKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXRUeXBlID09PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRkXzEuY2xhc3NMaXN0LmFkZCgnZS1ib29sY2VsbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZF8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgICAgICByZXR1cm4gdGQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0UmVuZGVyID0gSW5saW5lRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCYXRjaEVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXRjaEVkaXRSZW5kZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBCYXRjaEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgYXJncy5jZWxsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgYXJncy5jZWxsLmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIGFyZ3MpKTtcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWVkaXRlZGJhdGNoY2VsbCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QoYXJncy5yb3csIFsnZS1lZGl0ZWRyb3cnLCAnZS1iYXRjaHJvdyddLCBbXSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChlbGVtZW50c1thcmdzLmNvbHVtbk9iamVjdC51aWRdKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbk9iamVjdC5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWJvb2xjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWFyZ3MuY29sdW1uT2JqZWN0LmVkaXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXRib3gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmF0Y2hFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5CYXRjaEVkaXRSZW5kZXIgPSBCYXRjaEVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9wb3B1cHNfMSwgZWoyX2Jhc2VfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEaWFsb2dFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nRWRpdFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kaWFsb2dEZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuc2V0TG9jYWxlT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVEaWFsb2coZWxlbWVudHMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuY3JlYXRlRGlhbG9nID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdfZGlhbG9nRWRpdF93cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRpYWxvZyk7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsZU9iaigpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmlzRWRpdCA/IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRWRpdEZvcm1UaXRsZScpICsgYXJncy5wcmltYXJ5S2V5VmFsdWVbMF0gOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0FkZEZvcm1UaXRsZScpLCBpc01vZGFsOiB0cnVlLCB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMpLCBzaG93Q2xvc2VJY29uOiB0cnVlLCBhbGxvd0RyYWdnaW5nOiB0cnVlLCBjbG9zZTogdGhpcy5kZXN0cm95LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogdHJ1ZSwgd2lkdGg6ICczMzBweCcsIHRhcmdldDogZ09iai5lbGVtZW50LCBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9LFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTYXZlQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLCBidXR0b25Nb2RlbDogeyBjc3NDbGFzczogJ2UtZmxhdCcsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfSB9XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5hcHBlbmRUbyh0aGlzLmRpYWxvZyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmJ0bkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpLnRvTG93ZXJDYXNlKCkgPT09IGUudGFyZ2V0LmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbmRFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kZXN0cm95Rm9ybSwge30pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogdGhpcy5pc0VkaXQgPyAnZS1lZGl0ZWRyb3cnIDogJ2UtaW5zZXJ0ZWRyb3cnIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzZweCcgfSB9KTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xzW2ldLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNlbGwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyBzdHlsZTogJ3RleHQtYWxpZ246bGVmdDt3aWR0aDoxOTBweCcgfSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBpbm5lckhUTUw6IGNvbHNbaV0uZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbY29sc1tpXS51aWRdLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYmwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLW5vc2VsZWN0JywgYXR0cnM6IHsgZm9yOiBlbGVtLmlkLCBzdHlsZTogZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gJycgOiAndmVydGljYWwtYWxpZ246IHRvcDsnIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIGxibC5pbm5lckhUTUwgPSBjb2xzW2ldLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICBkYXRhQ2VsbC5hcHBlbmRDaGlsZChsYmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGwuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sc1tpXS51aWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZGF0YUNlbGwpO1xuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXRSZW5kZXIgPSBEaWFsb2dFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9vbGVhbkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQm9vbGVhbkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtYm9vbGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogYXJncy52YWx1ZSwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRWRpdENlbGwgPSBCb29sZWFuRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRHJvcERvd25FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERyb3BEb3duRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCB0eXBlOiAndGV4dCcsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3QoZWoyX2Jhc2VfMS5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmRhdGFTb3VyY2UpLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLnNlbGVjdChhcmdzLmNvbHVtbi5maWVsZCksIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB2YWx1ZTogYXJncy5jb2x1bW4uZmllbGQgfSwgdmFsdWU6IGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0sXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGFjdGlvbkNvbXBsZXRlOiB0aGlzLmRkQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlzSW5saW5lID8gJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LCBwb3B1cEhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogaXNJbmxpbmUgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICB9LCBhcmdzLmNvbHVtbi5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBhcmdzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWoyX2luc3RhbmNlc1swXS52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGRBY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnJlc3VsdCA9IGUucmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodmFsLCBpLCB2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5pbmRleE9mKHZhbCkgPT09IGk7IH0pO1xuICAgICAgICAgICAgZS5yZXN1bHQuc29ydCgpO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRHJvcERvd25FZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRHJvcERvd25FZGl0Q2VsbCA9IERyb3BEb3duRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNzdfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIlxuLy8gbW9kdWxlIGlkID0gNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERlZmF1bHRFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERlZmF1bHRFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCBlLWlucHV0IGUtZGVmYXVsdGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsIHZhbHVlOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnZhbHVlKSA/IGFyZ3MudmFsdWUgOiAnJywgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGQsIHN0eWxlOiAndGV4dC1hbGlnbjonICsgY29sLnRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogYXJncy5lbGVtZW50LCBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGVmYXVsdEVkaXRDZWxsID0gRGVmYXVsdEVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKElubGluZUVkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0ID0gSW5saW5lRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTm9ybWFsRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5vcm1hbEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKSA/IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkgOiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRPbkRibENsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5zdGFydEVkaXQodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZGl0Q29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5lZGl0Um93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5VmFsdWVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdGhpcy5lZGl0Um93SW5kZXggPSBwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMucm93SW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltYXJ5S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXlWYWx1ZXMucHVzaCh0aGlzLnByZXZpb3VzRGF0YVtwcmltYXJ5S2V5c1tpXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcm93OiB0ciwgcHJpbWFyeUtleTogcHJpbWFyeUtleXMsIHByaW1hcnlLZXlWYWx1ZTogcHJpbWFyeUtleVZhbHVlcywgcmVxdWVzdFR5cGU6ICdiZWdpbkVkaXQnLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCByb3dJbmRleDogdGhpcy5yb3dJbmRleCwgdHlwZTogJ2VkaXQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWdpbkVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gJ2FjdGlvbkJlZ2luJztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5pc0VkaXQgfHwgIWdPYmouZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLnByZXZpb3VzRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIGRhdGE6IGVkaXRlZERhdGEsIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCwgZm9yZWlnbktleURhdGE6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGdPYmouZWRpdE1vZHVsZS5nZXRDdXJyZW50RWRpdGVkRGF0YShnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVkaXRlZHJvdycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy51cGRhdGVEYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2FkZCc7XG4gICAgICAgICAgICAgICAgYXJncy5zZWxlY3RlZFJvdyA9IDA7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0aGlzLnVpZCk7XG4gICAgICAgICAgICBpZiAocm93T2JqKSB7XG4gICAgICAgICAgICAgICAgcm93T2JqLmNoYW5nZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHJvdy5yZWZyZXNoKHJvd09iaiwgdGhpcy5wYXJlbnQuY29sdW1ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NhbmNlbCcsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHNlbGVjdGVkUm93OiBnT2JqLnNlbGVjdGVkUm93SW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvdyhhcmdzLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5yb3dJbmRleCk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2FkZCcsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLnVpZCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhW2NvbC5maWVsZF0gPSBkYXRhICYmIGRhdGFbY29sLmZpZWxkXSA/IGRhdGFbY29sLmZpZWxkXSA6IGNvbC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdhZGQnLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh7IHJvd0RhdGE6IGFyZ3MuZGF0YSwgcmVxdWVzdFR5cGU6ICdhZGQnIH0pO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Um93SW5kZXggPSB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2RlbGV0ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZm9yZWlnbktleURhdGE6IHt9LFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEgPyBbZGF0YV0gOiB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJlY29yZHMoKSwgdHI6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93cygpLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuc3RvcEVkaXRTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZWxldGVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jcnVkQWN0aW9uLCB0aGlzLmVkaXRIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOb3JtYWxFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ob3JtYWxFZGl0ID0gTm9ybWFsRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCYXRjaEVkaXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXRjaEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuZGF0YUJvdW5kLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYXRhQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2FkZCcsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiYgIXRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHgoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Jyk7XG4gICAgICAgICAgICBpZiAoKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykpICYmIHRyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApLCB0aGlzLnBhcmVudC5jb2x1bW5zW3BhcnNlSW50KHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0ID0gdGhpcy5wYXJlbnQuaXNFZGl0O1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1wb3B1cC1vcGVuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGlzRWRpdCA9IGlzRWRpdCAmJiAhdGhpcy52YWxpZGF0ZUZvcm1PYmooKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TmV4dENlbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFRhYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0UHJldkNlbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0ICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxLCB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCB8fCAhKHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID09PSAwICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgICAgICEodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9PT0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID09PSB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlRm9jdXNPbkVycm9yKGUpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlRm9jdXNPbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlRm9ybU9iaigpICYmIChlLmFjdGlvbiA9PT0gJ3RhYicgfHwgZS5hY3Rpb24gPT09ICdzaGlmdFRhYicpKSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuaXNBZGRSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0TmV4dENlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2xkSWR4ID0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggKyAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsSWR4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCsrO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCgwLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRJZHggIT09IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdFByZXZDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9sZElkeCA9IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4O1xuICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0aGlzLmZpbmRQcmV2RWRpdGFibGVDZWxsKHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4IC0gMSwgdGhpcy5pc0FkZFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KSk7XG4gICAgICAgICAgICBpZiAoY2VsbElkeCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSBjZWxsSWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCAtIDEgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgtLTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IHRoaXMuZmluZFByZXZFZGl0YWJsZUNlbGwodGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGggLSAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRJZHggIT09IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SWR4LCBjZWxsSWR4KSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcm93SWR4O1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSBjZWxsSWR4O1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChyb3dJZHgsIHRoaXMucGFyZW50LmNvbHVtbnNbY2VsbElkeF0uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGdPYmouY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93c1tpXS51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJvd09iamVjdEZyb21VSUQocm93c1tpXS51aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dzW2ldLmNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5pc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodHIsIFtdLCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1JlbmRlcmVyLnJlZnJlc2gocm93c1tpXSwgZ09iai5jb2x1bW5zLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgdGhpcy5idWxrRGVsZXRlKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa0FkZFJvdyhkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQgJiYgdGhpcy52YWxpZGF0ZUZvcm1PYmooKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmF0Y2hTYXZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudmFsaWRhdGVGb3JtT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiAmJiAhdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYmF0Y2hTYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5nZXRCYXRjaENoYW5nZXMoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyBiYXRjaENoYW5nZXM6IGNoYW5nZXMsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hTYXZlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5idWxrU2F2ZSwgeyBjaGFuZ2VzOiBjaGFuZ2VzIH0pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0ge1xuICAgICAgICAgICAgICAgIGFkZGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgZGVsZXRlZFJlY29yZHM6IFtdLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRSZWNvcmRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd3NfMSA9IHJvd3M7IF9pIDwgcm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJvdy5lZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuYWRkZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmRlbGV0ZWRSZWNvcmRzLnB1c2gocm93LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmNoYW5nZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUm93T2JqZWN0ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCkudW5zaGlmdChyb3cpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtEZWxldGUgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZGF0YSA/IHRoaXMuZ2V0SW5kZXhGcm9tRGF0YShkYXRhKSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IGRhdGEgPyBkYXRhIDogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVswXSxcbiAgICAgICAgICAgICAgICByb3c6IGRhdGEgPyBnT2JqLmdldFJvd3MoKVtpbmRleF0gOiBnT2JqLmdldFNlbGVjdGVkUm93cygpWzBdLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFhcmdzLnJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGlmIChhcmdzLnJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGFyZ3Mucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSBnT2JqLmdldFJvd09iamVjdEZyb21VSUQodWlkKTtcbiAgICAgICAgICAgICAgICByb3dPYmouaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcm93T2JqLmVkaXQgPSAnZGVsZXRlJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWhpZGRlbnJvdycsICdlLXVwZGF0ZWR0ZCddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dJZHgoKTtcbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgICAgIGRlbGV0ZSBhcmdzLnJvdztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoUm93SWR4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGRlbnJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4Jywgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0SW5kZXhGcm9tRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmluQXJyYXkoZGF0YSwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtBZGRSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSBkYXRhID8gZGF0YSA6IHRoaXMuZ2V0RGVmYXVsdERhdGEoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGRlZmF1bHREYXRhOiBkZWZhdWx0RGF0YSxcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hBZGQsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbERhdGEgPSBtb2RlbC5nZW5lcmF0ZVJvd3MoW2FyZ3MuZGVmYXVsdERhdGFdKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhWzBdLCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgY29sO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSwgdHIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUodHIsIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyh0ci5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJyksIFsnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBtb2RlbERhdGFbMF0uZGF0YSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uZWRpdCA9ICdhZGQnO1xuICAgICAgICAgICAgdGhpcy5hZGRSb3dPYmplY3QobW9kZWxEYXRhWzBdKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coMCk7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwoMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29sID0gZ09iai5jb2x1bW5zW2luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKDAsIGNvbC5maWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGFyZ3MuZGVmYXVsdERhdGEsIHJvdzogdHIsXG4gICAgICAgICAgICAgICAgY29sdW1uT2JqZWN0OiBjb2wsIGNvbHVtbkluZGV4OiBpbmRleCwgcHJpbWFyeUtleTogYXJncy5wcmltYXJ5S2V5LCBjZWxsOiB0ci5jZWxsc1tpbmRleF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJhdGNoQWRkLCBhcmdzMSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZmluZE5leHRFZGl0YWJsZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZmluZFByZXZFZGl0YWJsZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1uSW5kZXg7IGkgPiAtMTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FkZCAmJiB0aGlzLmNoZWNrTlBDZWxsKGNvbHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FkZCAmJiAhY29sc1tpXS50ZW1wbGF0ZSAmJiBjb2xzW2ldLnZpc2libGUgJiYgY29sc1tpXS5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNoZWNrTlBDZWxsID0gZnVuY3Rpb24gKGNvbCkge1xuICAgICAgICAgICAgcmV0dXJuICFjb2wudGVtcGxhdGUgJiYgY29sLnZpc2libGUgJiYgIWNvbC5pc1ByaW1hcnlLZXkgJiYgIWNvbC5pc0lkZW50aXR5ICYmIGNvbC5hbGxvd0VkaXRpbmc7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGVmYXVsdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBkVmFsdWVzID0geyAnbnVtYmVyJzogMCwgJ3N0cmluZyc6IG51bGwsICdib29sZWFuJzogZmFsc2UsICdkYXRlJzogbnVsbCwgJ2RhdGV0aW1lJzogbnVsbCB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGRhdGFbY29sLmZpZWxkXSA9IGNvbC5kZWZhdWx0VmFsdWUgPyBjb2wuZGVmYXVsdFZhbHVlIDogZFZhbHVlc1tjb2wudHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zZXRDZWxsSWR4ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdMZW4gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGFyZ2V0LmNlbGxJbmRleCAtIGdMZW47XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbCA9IGZ1bmN0aW9uIChpbmRleCwgZmllbGQsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgJiYgY29sLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCAmJiAhKHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkID09PSBmaWVsZCAmJiB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID09PSBpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gZ09iai5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoKGtleXNbMF0gPT09IGNvbC5maWVsZCAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB8fCBjb2wudGVtcGxhdGUgfHwgY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93RGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLmdldERhdGFCeUluZGV4KGluZGV4KSk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGw6IHJvdy5jZWxsc1t0aGlzLmdldENlbGxJZHgoY29sLnVpZCldLCByb3c6IHJvdyxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogY29sLmZpZWxkLCBjb2x1bW5PYmplY3Q6IGNvbCwgaXNGb3JlaWduS2V5OiAhZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2wuZm9yZWlnbktleVZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToga2V5cywgcm93RGF0YTogcm93RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblJ1bGVzOiBlajJfYmFzZV8xLmV4dGVuZCh7fSwgY29sLnZhbGlkYXRpb25SdWxlcyA/IGNvbC52YWxpZGF0aW9uUnVsZXMgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3dEYXRhW2NvbC5maWVsZF0sIHR5cGU6ICFpc0FkZCA/ICdlZGl0JyA6ICdhZGQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNlbGxFZGl0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiByb3dEYXRhLCBjb2x1bW46IGNvbCwgdmFsdWU6IGFyZ3MudmFsdWUsIGlzRm9yZWlnbktleTogYXJncy5pc0ZvcmVpZ25LZXksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHgoYXJncy5jZWxsKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS11cGRhdGVkdGQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sb3JlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScpO1xuICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKFtjb2xdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICBpZiAoY29sICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0uY2VsbHNbdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGZpZWxkKV07XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFREKHRkLCBjb2wsIHJvd09iaiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnF1ZXJ5Q2VsbEluZm8sIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogdGQsIGNvbHVtbjogY29sLCBkYXRhOiByb3dPYmouY2hhbmdlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENoYW5nZXMgPSBmdW5jdGlvbiAocm93T2JqLCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghcm93T2JqLmNoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICByb3dPYmouY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCByb3dPYmouZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dPYmouY2hhbmdlc1tmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbChpbmRleCwgY29sLCBkYXRhW2NvbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldENlbGxJZHggPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgY0lkeCA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQodWlkKSArIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmNoaWxkR3JpZCkpIHtcbiAgICAgICAgICAgICAgICBjSWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY0lkeDtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoVEQgPSBmdW5jdGlvbiAodGQsIGNvbHVtbiwgcm93T2JqLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBuZXcgY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLnNldENoYW5nZXMocm93T2JqLCBjb2x1bW4uZmllbGQsIHZhbHVlKTtcbiAgICAgICAgICAgIGNlbGwucmVmcmVzaFREKHRkLCByb3dPYmouY2VsbHNbdGhpcy5nZXRDZWxsSWR4KGNvbHVtbi51aWQpXSwgcm93T2JqLmNoYW5nZXMpO1xuICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zYXZlQ2VsbCA9IGZ1bmN0aW9uIChpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghaXNGb3JjZVNhdmUgJiYgKCFnT2JqLmlzRWRpdCB8fCB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ciA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGhpcy5mb3JtLCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKHRoaXMuZm9ybSwge30pO1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHRoaXMuY2VsbERldGFpbHMucm93RGF0YSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2x1bW4uZmllbGQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVkaXRlZERhdGFbY29sdW1uLmZpZWxkXSxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiB0aGlzLmNlbGxEZXRhaWxzLnJvd0RhdGEsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5jZWxsRGV0YWlscy52YWx1ZSxcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbHVtbixcbiAgICAgICAgICAgICAgICBjZWxsOiB0aGlzLmZvcm0ucGFyZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICBpc0ZvcmVpZ25LZXk6IHRoaXMuY2VsbERldGFpbHMuaXNGb3JlaWduS2V5LCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lGb3JtKCk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveVdpZGdldHMoW2NvbHVtbl0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQoYXJncy5jZWxsLCBjb2x1bW4sIGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh0ci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpLCBhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRyLCBbXSwgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10pO1xuICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZWRpdGVkYmF0Y2hjZWxsJyk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpICYmIGFyZ3MudmFsdWUudG9TdHJpbmcoKSA9PT1cbiAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsRGV0YWlscy52YWx1ZSkgPyB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlIDogJycpLnRvU3RyaW5nKCkgJiYgIXRoaXMuaXNDb2xvcmVkKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGF0YUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICByZXR1cm4gcm93LmNoYW5nZXMgPyByb3cuY2hhbmdlcyA6IHJvdy5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnZhbENvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBlZGl0ID0gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZTtcbiAgICAgICAgICAgIGVkaXQudmFsaWRhdGlvbkNvbXBsZXRlKGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmN1c3RvbVBsYWNlbWVudCA9IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgZWRpdCA9IHRoaXMucGFyZW50LmVkaXRNb2R1bGU7XG4gICAgICAgICAgICBlZGl0LnZhbEVycm9yUGxhY2VtZW50KGlucHV0RWxlbWVudCwgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmF0Y2hFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5CYXRjaEVkaXQgPSBCYXRjaEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEaWFsb2dFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERpYWxvZ0VkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEaWFsb2dFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5EaWFsb2dFZGl0ID0gRGlhbG9nRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29sdW1uXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy5qc1xuLy8gbW9kdWxlIGlkID0gODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2JhdGNoLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVhZGVyX3JlbmRlcmVyXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIHJlbmRlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChoZWFkZXJfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY29udGVudF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChoZWFkZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzdGFja2VkX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocmVuZGVyXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl9jZWxsX3JlbmRlcmVyXzIpO1xuICAgIF9fZXhwb3J0KGluZGVudF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChiYXRjaF9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGlubGluZV9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYm9vbGVhbl9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZGVmYXVsdF9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZHJvcGRvd25fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KG51bWVyaWNfZWRpdF9jZWxsXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvclwiLCBcIi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJfZmFjdG9yeV8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlX2xvY2F0b3JfMSk7XG4gICAgX19leHBvcnQocm93X21vZGVsX2dlbmVyYXRvcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF9tb2RlbF9nZW5lcmF0b3JfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMuanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcGFnZXJcIiwgXCIuL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcGFnZXJfMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCBudW1lcmljX2NvbnRhaW5lcl8xLCBwYWdlcl9tZXNzYWdlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBhZ2VyXzEpO1xuICAgIF9fZXhwb3J0KGV4dGVybmFsX21lc3NhZ2VfMSk7XG4gICAgX19leHBvcnQobnVtZXJpY19jb250YWluZXJfMSk7XG4gICAgX19leHBvcnQocGFnZXJfbWVzc2FnZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}