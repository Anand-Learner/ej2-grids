/*!
*  filename: ej2-grids.umd.min.js
*  version : 15.4.23
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-dropdowns"),require("@syncfusion/ej2-calendars"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-excel-export"),require("@syncfusion/ej2-pdf-export")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-popups","@syncfusion/ej2-data","@syncfusion/ej2-buttons","@syncfusion/ej2-inputs","@syncfusion/ej2-dropdowns","@syncfusion/ej2-calendars","@syncfusion/ej2-navigations","@syncfusion/ej2-excel-export","@syncfusion/ej2-pdf-export"],t):t(e.ej={},e.ej2Base,e.ej2Popups,e.ej2Data,e.ej2Buttons,e.ej2Inputs,e.ej2Dropdowns,e.ej2Calendars,e.ej2Navigations,e.ej2ExcelExport,e.ej2PdfExport)}(this,function(e,t,i,r,n,o,s,l,a,c,p){"use strict";function d(e,t){return e.prototype&&t in e.prototype}function h(e,i,r){return e=t.isNullOrUndefined(e)?"":e,t.getValue(e,i)}function u(e,t){requestAnimationFrame(function(){try{t(null,e())}catch(e){t(e)}})}function g(e,i){for(var r=[],n=0,o=e.length;n<o;n++){var s=i(e[n],n);t.isNullOrUndefined(s)||r.push(s)}return r}function f(e){if(e)try{if(document.querySelectorAll(e).length)return t.compile(document.querySelector(e).innerHTML.trim())}catch(i){return t.compile(e)}}function m(e,i){var r={},n=["style","class"];t.extend(r,i,{}),"style"in r&&(t.setStyleAttribute(e,r[n[0]]),delete r[n[0]]),"class"in r&&(t.addClass([e],r[n[1]]),delete r[n[1]]),t.attributes(e,r)}function y(e,i,r,n){var o=t.extend(e,i,r);return Object.keys(o).forEach(function(e,t){-1!==n.indexOf(e)&&delete o[e]}),o}function v(e,i){for(var r=0,n=e.length;r<n;r++){var o=void 0;"string"==typeof e[r]?o=new X({field:e[r]}):e[r]instanceof X?o=e[r]:e[r].columns?(o=new X(e[r]),e[r].columns=v(e[r].columns)):o=new X(e[r]),o.headerText=t.isNullOrUndefined(o.headerText)?o.field||"":o.headerText,o.valueAccessor=o.valueAccessor||h,o.width=i&&t.isNullOrUndefined(o.width)?200:o.width,t.isNullOrUndefined(o.visible)&&(o.visible=!0),e[r]=o}return e}function C(e,i,r){var n,o=e.querySelector("span"),s=e.parentElement.getBoundingClientRect(),l=i.target.getBoundingClientRect();o.className=r,e.style.display="",n=(t.isNullOrUndefined(i.clientY)?i.changedTouches[0].clientY:i.clientY)>e.offsetHeight+10,e.style.top=l.top-s.top+(n?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,i,r){var n=e.offsetWidth/2,o=R(t).x;return o-i.left<n?i.left-r:i.right-o<n?i.right-r-2*n:o-r-n}(e,i,l,s.left)+"px",n?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}function w(e){return e instanceof t.ChildProperty?t.getValue("properties",e):e}function b(e,t,i){for(var r=e;r&&(i?r.id!==t:!r.classList.contains(t));)r=r.parentElement;return r}function S(e,t){for(var i=-1,r=0,n=t.length;r<n;r++)if(t[r].isEqualNode(e)){i=r;break}return i}function x(e,t){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function E(e){for(var t=[],i=0,r=e.length;i<r;i++)e[i].hasOwnProperty("properties")?t.push(e[i].properties):t.push(e[i]);return t}function T(e,i){for(var r=[].slice.call(e.querySelectorAll(i)),n=0;n<r.length;n++)t.remove(r[n])}function R(e){var i={};return i.x=t.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,i.y=t.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,i}function I(e){return e+Y++}function D(e,t){for(var i=0,r=t.length;i<r;i++)r===t.length?e.appendChild(t[i]):e.appendChild(t[0]);return e}function k(e,t,i){for(var r=e,n=[];r;)(i?r.id===t:r.classList.contains(t))&&n.push(r),r=r.parentElement;return n}function O(e,t,i,n){return"custom"===e?i.customAggregate?i.customAggregate.call(n,t,i):"":r.DataUtil.aggregates[e](t,i.field)}function P(){if(null!==J)return J;var e=document.createElement("div"),t=0;return e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth|0,document.body.removeChild(e),J=t}function M(e){if(void 0!==K)return K;var i=t.createElement("table",{className:"e-table",styles:"visibility: hidden"});i.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(i);var r=i.querySelector("td").getBoundingClientRect();return e.removeChild(i),K=Math.ceil(r.height)}function L(e,t,i){var r=b(i,"e-row"),n=!r||r&&!r.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(e.isIdentity||e.isPrimaryKey||!e.allowEditing):!(n&&!e.allowEditing&&!e.isIdentity&&!e.isPrimaryKey)}function F(e){var t=e.element.querySelector("#"+e.element.id+"EditConfirm");return"batch"===e.editSettings.mode&&e.element.querySelectorAll(".e-updatedtd").length&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function A(e,t){e=e instanceof Array?e:[e];for(var i=0;i<e.length;i++)t?e[i].classList.add("e-wrap"):e[i].classList.remove("e-wrap")}function N(e){for(var i=0,r=[].slice.call(e.querySelectorAll("button"));i<r.length;i++){var n=r[i];t.attributes(n,{type:"button"})}}function B(e,t){var i=e.getService("valueFormatter");switch(t.type){case"date":t.setFormatter(i.getFormatFunction({type:"date",skeleton:t.format})),t.setParser(i.getParserFunction({type:"date",skeleton:t.format}));break;case"datetime":t.setFormatter(i.getFormatFunction({type:"dateTime",skeleton:t.format})),t.setParser(i.getParserFunction({type:"dateTime",skeleton:t.format}));break;case"number":t.setFormatter(i.getFormatFunction({format:t.format})),t.setParser(i.getParserFunction({format:t.format}))}}function H(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];for(var o=0,s=e.length;o<s;o++)i?(t.classList(e[o],r.slice(),[]),e[o].setAttribute("aria-selected","true")):(t.classList(e[o],[],r.slice()),e[o].removeAttribute("aria-selected"))}function q(e){for(var t={},i=[],r=0;r<e.length;r++)e[r]in t||(i.push(e[r].toString()),t[e[r]]=1);return i}function j(e,t){var r=t.element.style.display;t.element.style.display="block";var n=t.width,o=i.calculateRelativeBasedPosition(e,t.element);t.element.style.display=r,t.element.style.top=o.top+e.getBoundingClientRect().height-5+"px";var s=o.left-n+e.clientWidth;t.element.style.left=s<1?n+s-16+"px":s+-4+"px"}function z(e,t){e.popup.element.style.zIndex=(t.zIndex+1).toString()}function U(e){var i=e.querySelector(".e-frame");i.classList.contains("e-check")?t.classList(i,["e-uncheck"],["e-check"]):t.classList(i,["e-check"],["e-uncheck"])}function _(e,i,r){var n=t.createElement("div",{className:r});return n.appendChild(i),n.setAttribute("uid",e),n}function V(e,i){t.removeClass([e],["e-check","e-stop","e-uncheck"]),i?e.classList.add("e-check"):e.classList.add("e-uncheck")}function G(e,t,i,r){r?e.removeAttribute(t):e&&e.setAttribute(t,i)}function W(e,t){e.forEach(function(e){e.columns.forEach(function(i){t(i,e)})})}var K,Q=function(){function e(e){this.intl=new t.Internationalization,t.isNullOrUndefined(e)||(this.intl.culture=e)}return e.prototype.getFormatFunction=function(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},e.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},e.prototype.fromView=function(e,t,i){return"date"===i||"datetime"===i||"number"===i?t(e):e},e.prototype.toView=function(e,i){var r=e;return t.isNullOrUndefined(i)||t.isNullOrUndefined(e)||(r=i(e)),r},e.prototype.setCulture=function(e){t.isNullOrUndefined(e)||t.setCulture(e)},e}(),X=function(){function e(e){this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,t.merge(this,e),this.uid=I("grid-column");var i=new Q;e.format&&(e.format.skeleton||e.format.format)&&(this.setFormatter(i.getFormatFunction(e.format)),this.setParser(i.getParserFunction(e.format))),this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1),this.commands&&!this.textAlign&&(this.textAlign="right"),(this.template||this.commandsTemplate)&&(this.templateFn=f(this.template||this.commandsTemplate)),this.filter.itemTemplate&&(this.fltrTemplateFn=f(this.filter.itemTemplate))}return e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setFormatter=function(e){this.formatFn=e},e.prototype.getParser=function(){return this.parserFn},e.prototype.setParser=function(e){this.parserFn=e},e.prototype.getColumnTemplate=function(){return this.templateFn},e.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},e.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},e}(),Y=0,J=null,$="queryCellInfo",Z="actionBegin",ee="actionComplete",te="actionFailure",ie="dataBound",re="rowSelecting",ne="rowSelected",oe="rowDeselecting",se="rowDeselected",le="cellSelecting",ae="cellSelected",ce="cellDeselecting",pe="cellDeselected",de="columnDragStart",he="columnDrag",ue="columnDrop",ge="rowDragStart",fe="rowDrag",me="rowDrop",ye="printComplete",ve="detailDataBound",Ce="toolbarClick",we="batchAdd",be="batchDelete",Se="beforeBatchAdd",xe="beforeBatchDelete",Ee="beforeBatchSave",Te="recordDoubleClick",Re="beforeDataBound",Ie="beforeOpenColumnChooser",De="checkBoxChange",ke="filterchoicerequest",Oe="filterafteropen",Pe="filterbeforeopen",Me="initial-load",Le="initial-end",Fe="data-ready",Ae="content-ready",Ne="ui-update",Be="on-empty",He="inbound-model-changed",qe="model-changed",je="colgroup-refresh",ze="header-refreshed",Ue="paging-complete",_e="sorting-complete",Ve="filtering-complete",Ge="searching-complete",We="reorder-complete",Ke="rowdraganddrop-complete",Qe="grouping-complete",Xe="ungrouping-complete",Ye="rowselected",Je="cellselected",$e="beforecellfocused",Ze="cellfocused",et="key-pressed",tt="click",it="destroy",rt="column-visible-changed",nt="scroll",ot="column-width-changed",st="column-position-changed",lt="rows-added",at="rows-removed",ct="column-drag-stop",pt="header-drop",dt="datasource-modified",ht="refresh-complete",ut="refresh-virtual-block",gt="dblclick",ft="toolbar-refresh",mt="bulk-save",yt="auto-col",vt="tooltip-destroy",Ct="update-data",wt="save-complete",bt="delete-complete",St="prevent-batch",xt="dialog-destroy",Et="crud-Action",Tt="add-delete-Action",Rt="destroy-form",It="double-tap",Dt="beforeExcelExport",kt="excelExportComplete",Ot="excelQueryCellInfo",Pt="beforePdfExport",Mt="pdfExportComplete",Lt="pdfQueryCellInfo",Ft="contextMenuClick",At="freezerefresh",Nt="freezerender",Bt="contextMenuOpen",Ht="contextMenuClick",qt="columnMenuOpen",jt="filterOpen",zt="filterDialogCreated",Ut="filter-menu-close";!function(e){e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn"}(e.CellType||(e.CellType={})),function(e){e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary"}(e.RenderType||(e.RenderType={})),function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e[e.Cancel=4]="Cancel",e[e.Print=5]="Print",e[e.Search=6]="Search",e[e.ColumnChooser=7]="ColumnChooser",e[e.PdfExport=8]="PdfExport",e[e.ExcelExport=9]="ExcelExport",e[e.CsvExport=10]="CsvExport",e[e.WordExport=11]="WordExport"}(e.ToolbarItem||(e.ToolbarItem={}));var _t=function(){function e(e,i,r){this.defaultConstants={Search:"Search",OK:"OK",Cancel:"Cancel",Filter:"Filter",Clear:"Clear",SelectAll:"Select All",Blanks:"Blanks",True:"True",False:"False",NoResult:"No Matches Found"},this.values={},this.cBoxTrue=n.createCheckBox(!1,{checked:!0,label:" "}),this.cBoxFalse=n.createCheckBox(!1,{checked:!1,label:" "}),this.parent=e,this.id=this.parent.element.id,this.serviceLocator=r,this.filterSettings=i,this.valueFormatter=new Q(this.parent.locale),this.initLocale(this.defaultConstants),this.cBoxTrue.insertBefore(t.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(t.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&t.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.initLocale=function(e){this.localeObj=new t.L10n(this.getModuleName(),this.defaultConstants,this.parent.locale||"en-US")},e.prototype.destroy=function(){this.closeDialog()},e.prototype.wireEvents=function(){t.EventHandler.add(this.dlg,"click",this.clickHandler,this),t.EventHandler.add(this.dlg.querySelector(".e-searchinput"),"keyup",this.searchBoxKeyUp,this)},e.prototype.unWireEvents=function(){t.EventHandler.remove(this.dlg,"click",this.clickHandler);var e=this.dlg.querySelector(".e-searchinput");e&&t.EventHandler.remove(e,"keyup",this.searchBoxKeyUp)},e.prototype.searchBoxClick=function(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},e.prototype.searchBoxKeyUp=function(e){this.refreshCheckboxes(),this.updateSearchIcon()},e.prototype.updateSearchIcon=function(){this.sInput.value.length?t.classList(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):t.classList(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},e.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},e.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof r.DataManager))for(var t=0;t<e.length;t++)if("object"!=typeof e){var i={};i[this.options.field]=e[t],e[t]=i}},e.prototype.updateModel=function(e){this.options=e,this.options.dataSource=e.dataSource,this.updateDataSource(),this.options.type=e.type||"string",this.options.format=e.format||"",this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.sortedColumns=e.sortedColumns||this.parent.sortSettings.columns,this.options.query=e.query||new r.Query,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.values={},this.isFiltered=e.filteredColumns.length,t.extend(this.defaultConstants,e.localizedStrings)},e.prototype.getAndSetChkElem=function(e){return this.dlg=t.createElement("div",{id:this.id+this.options.type+"_excelDlg",className:"e-checkboxfilter e-filter-popup"}),this.sBox=t.createElement("div",{className:"e-searchcontainer"}),e.hideSearchbox||(this.sInput=t.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=t.createElement("span",{className:"e-searchclear e-search-icon e-icons",attrs:{type:"text",placeholder:this.getLocalizedLabel("Search")}}),this.searchBox=t.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),o.Input.createInput({element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}}),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=t.createElement("div",{className:"e-spinner"}),this.cBox=t.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},e.prototype.showDialog=function(e){var r={requestType:Pe,filterModel:this,columnName:this.options.field,columnType:this.options.type};this.parent.trigger(Z,r),this.dialogObj=new i.Dialog({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),width:!t.isNullOrUndefined(b(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OK":"Filter"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"Cancel":"Clear")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight="800px",this.dialogObj.show(),this.wireEvents(),i.createSpinner({target:this.spinner}),i.showSpinner(this.spinner),this.getAllData()},e.prototype.dialogCreated=function(e){t.Browser.isDevice?this.dialogObj.position={X:"center",Y:"center"}:j(this.options.target,this.dialogObj),this.parent.notify(zt,e)},e.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},e.prototype.closeDialog=function(){this.dialogObj&&!this.dialogObj.isDestroyed&&(this.parent.notify(Ut,{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),t.remove(this.dlg),this.dlg=null)},e.prototype.clearFilter=function(){this.options.handler({action:"clear-filter",field:this.options.field})},e.prototype.btnClick=function(e){var t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OK":"Filter").toLowerCase()===t?this.fltrBtnHandler():this.getLocalizedLabel("Clear").toLowerCase()===t&&this.clearFilter(),this.closeDialog()},e.prototype.fltrBtnHandler=function(){var i=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),r="equal",n="string"!==this.options.type||this.options.allowCaseSensitive,o={field:this.options.field,predicate:"or",operator:r,matchcase:n},s=this.itemsCnt!==i.length&&this.itemsCnt-i.length<i.length;s&&(r="notequal",i=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),o.predicate="and",o.operator="notequal");for(var l,a,c=[],p=0;p<i.length;p++)l=this.values[b(i[p],"e-ftrchk").getAttribute("uid")],a=t.extend({},{value:l},o),l&&!l.toString().length&&(a.operator=s?"notequal":"equal"),c.push("date"===this.options.type?e.setDateObject(a):a);this.initiateFilter(c)},e.prototype.initiateFilter=function(e){var i,n=e[0];if(!t.isNullOrUndefined(n)){i=n.ejpredicate?n.ejpredicate:new r.Predicate(n.field,n.operator,n.value,!n.matchCase);for(var o=1;o<e.length;o++)i=void 0!==e[o].ejpredicate?i[e[o].predicate](e[o].ejpredicate):i[e[o].predicate](e[o].field,e[o].operator,e[o].value,!e[o].matchCase);var s={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:r.Predicate.or(i)};this.options.handler(s)}},e.prototype.refreshCheckboxes=function(){var e=this.sInput.value,i=this.options.query.clone(),r="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,n="contains";r=""===r||void 0===r?void 0:r,"boolean"===this.options.type&&(void 0!==r&&-1!==this.getLocalizedLabel("True").toLowerCase().indexOf(r.toLowerCase())?r="true":void 0!==r&&-1!==this.getLocalizedLabel("False").toLowerCase().indexOf(r.toLowerCase())&&(r="false")),("date"===this.options.type||"datetime"===this.options.type)&&(r=this.valueFormatter.fromView(e,this.options.parserFn,this.options.type),n="equal",t.isNullOrUndefined(r)&&e.length)||(e.length&&i.where(this.options.field,n,r,!0),this.processDataSource(i))},e.prototype.getPredicateFromCols=function(i){for(var r,n=e.getPredicate(i),o=0,s=Object.keys(n);o<s.length;o++){var l=n[s[o]];r=t.isNullOrUndefined(r)?l:r.and(l)}return r},e.prototype.getAllData=function(){var e=this,t=new r.Query;t.requiresCount(),this.options.dataSource=this.options.dataSource instanceof r.DataManager?this.options.dataSource:new r.DataManager(this.options.dataSource);this.options.dataSource.executeQuery(t).then(function(t){return e.dataSuccess(t)})},e.prototype.dataSuccess=function(t){this.fullData=t.result;var i=new r.Query;if(this.options.filteredColumns.length){for(var n=[],o=0;o<this.options.filteredColumns.length;o++)this.options.filteredColumns[o].field!==this.options.field&&n.push(this.options.filteredColumns[o]);var s=this.getPredicateFromCols(n);s&&i.where(s)}var l=new r.DataManager(this.fullData).executeLocal(i),a=e.getDistinct(l,this.options.field);this.filteredData=a.records,this.processDataSource(null,!0);var c={requestType:Oe,filterModel:this,columnName:this.options.field,columnType:this.options.type};this.parent.trigger(ee,c)},e.prototype.processDataSource=function(e,t){i.showSpinner(this.spinner),(e=e||this.options.query.clone()).requiresCount();var n={requestType:ke,filterModel:this,query:e,dataSource:this.filteredData};this.parent.trigger(Z,n);var o=new r.DataManager(n.dataSource).executeLocal(n.query);this.updateResult(),this.createFilterItems(o.result,t)},e.prototype.updateResult=function(){this.result={};var e=this.getPredicateFromCols(this.options.filteredColumns),i=new r.Query;e&&i.where(e);for(var n=0,o=new r.DataManager(this.fullData).executeLocal(i);n<o.length;n++){var s=o[n];this.result[t.getValue(this.options.field,s)]=!0}},e.prototype.clickHandler=function(e){var t=e.target,i=b(t,"e-checkbox-wrapper");if(b(t,"e-searchbox")&&this.searchBoxClick(e),i){var r=i.querySelector(".e-selectall");r?this.updateAllCBoxes(!r.classList.contains("e-check")):U(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}},e.prototype.updateAllCBoxes=function(e){for(var t=0,i=[].slice.call(this.cBox.querySelectorAll(".e-frame"));t<i.length;t++){V(i[t],e)}},e.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.dialogObj.element.querySelector(".e-btn").focus())},e.prototype.createCheckbox=function(e,i){var r=i?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0),n=r.querySelector(".e-label");if(n.innerHTML=!t.isNullOrUndefined(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),this.options.template){n.innerHTML="";var o={};o[this.options.field]=e,D(n,this.options.template(o))}return r},e.prototype.updateIndeterminatenBtn=function(){var e=this.cBox.children.length-1,i=[],r=this.cBox.querySelector(".e-selectall"),n=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length,o=this.dlg.querySelector(".e-footer-content").querySelector(".e-btn").ej2_instances[0];o.disabled=!1,e===n?i=["e-check"]:n?i=["e-stop"]:(i=["e-uncheck"],o.disabled=!0),t.removeClass([r],["e-check","e-stop","e-uncheck"]),t.addClass([r],i)},e.prototype.createFilterItems=function(e,n){var o=t.createElement("div");if(this.itemsCnt=e.length,e.length){var s=_(I("cbox"),this.createCheckbox(this.getLocalizedLabel("SelectAll"),!1),"e-ftrchk");s.querySelector(".e-frame").classList.add("e-selectall"),o.appendChild(s);for(var l=new r.DataManager(this.options.filteredColumns).executeLocal((new r.Query).where("field","equal",this.options.field)).length,a=0;a<e.length;a++){var c=I("cbox");this.values[c]=t.getValue(this.options.field,e[a]);var p=this.valueFormatter.toView(t.getValue(this.options.field,e[a]),this.options.formatFn);o.appendChild(_(c,this.createCheckbox(p,this.getCheckedState(l,this.values[c])),"e-ftrchk"))}this.cBox.innerHTML=o.innerHTML,this.updateIndeterminatenBtn()}else o.appendChild(t.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML=o.innerHTML;var d={requestType:ke,filterModel:this,dataSource:e};this.parent.trigger(ee,d),i.hideSpinner(this.spinner)},e.prototype.getCheckedState=function(e,t){return!this.isFiltered||!e||this.result[t]},e.getDistinct=function(e,i){for(var n,o=e.length,s=[],l={};o--;)if(n=e[o],n=t.getValue(i,n),!t.isNullOrUndefined(n)){if(!(n in l)){var a={};a.ejValue=n,t.setValue(i,n,a),s.push(a)}l[n]=!0}return r.DataUtil.group(r.DataUtil.sort(s,i,r.DataUtil.fnAscending),"ejValue")},e.setDateObject=function(e){var i=t.extend({},w(e)),n=t.extend({},w(e)),o=new Date(e.value),s=new Date(o.setDate(o.getDate()-1)),l=new Date(o.setDate(o.getDate()+2));i.value=s,n.value=l,"equal"===e.operator?(n.operator="lessthan",n.predicate="and",i.operator="greaterthan",i.predicate="and"):"notequal"===e.operator&&(n.operator="greaterthanorequal",n.predicate="or",i.operator="lessthanorequal",i.predicate="or");var a=new r.Predicate(i.field,i.operator,i.value,!1),c=new r.Predicate(n.field,n.operator,n.value,!1);return e.ejpredicate="equal"===e.operator?a.and(c):a.or(c),e.type="date",e},e.getPredicate=function(t){for(var i=e.getDistinct(t,"field").records,n=[],o={},s=0;s<i.length;s++)0!==(n=new r.DataManager(t).executeLocal((new r.Query).where("field","equal",i[s].field))).length&&(o[i[s].field]=e.generatePredicate(n));return o},e.generatePredicate=function(t){var i,n,o=t?t.length:0;i="date"===(n=e.updateDateFilter(t[0])).type||"datetime"===n.type?e.getDatePredicate(n):n.ejpredicate?n.ejpredicate:new r.Predicate(n.field,n.operator,n.value,e.getCaseValue(n));for(var s=1;s<o;s++)t[s]=e.updateDateFilter(t[s]),o>2&&s>1&&"or"===t[s].predicate?"date"===t[s].type||"datetime"===t[s].type?i.predicates.push(e.getDatePredicate(t[s])):i.predicates.push(new r.Predicate(t[s].field,t[s].operator,t[s].value,e.getCaseValue(t[s]))):i="date"===t[s].type||"datetime"===t[s].type?i[t[s].predicate](e.getDatePredicate(t[s])):t[s].ejpredicate?i[t[s].predicate](t[s].ejpredicate):i[t[s].predicate](t[s].field,t[s].operator,t[s].value,e.getCaseValue(t[s]));return i||null},e.getCaseValue=function(e){return(!t.isNullOrUndefined(e.ignoreCase)||!t.isNullOrUndefined(e.matchCase))&&(t.isNullOrUndefined(e.ignoreCase)?!e.matchCase:e.ignoreCase)},e.getDatePredicate=function(e){return e.value instanceof Date&&(e.ignoreCase=-1!==["equal","notequal"].indexOf(e.operator)),new r.Predicate(e.field,e.operator,e.value,e.ignoreCase)},e.updateDateFilter=function(t){return"date"===t.type||t.value instanceof Date?-1===["equal","notequal"].indexOf(t.operator)?t:e.setDateObject(t):t},e.prototype.getModuleName=function(){return"checkboxFilter"},e}(),Vt=function(){function e(e,t){this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||(this.parent.on(lt,this.addRows,this),this.parent.on(at,this.removeRows,this),this.parent.on(dt,this.initDataManager,this),this.parent.on(it,this.destroy,this),this.parent.on(Ct,this.crudActions,this),this.parent.on(Tt,this.getData,this))}return e.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof r.DataManager?e.dataSource:t.isNullOrUndefined(e.dataSource)?new r.DataManager:new r.DataManager(e.dataSource),e.query=e.query instanceof r.Query?e.query:new r.Query},e.prototype.generateQuery=function(e){var i=this.parent,r=i.query.clone();if(i.allowFiltering&&i.filterSettings.columns.length){var n=i.filterSettings.columns,o=void 0;if("checkbox"===i.filterSettings.type||"excel"===i.filterSettings.type){for(var s=_t.getPredicate(i.filterSettings.columns),l=0,a=Object.keys(s);l<a.length;l++){var c=s[a[l]];o=t.isNullOrUndefined(o)?c:o.and(c)}void 0!==o&&r.where(o)}else for(var p=0,d=n;p<d.length;p++){var h=d[p],u=i.getColumnByField(h.field).type;"date"!==u&&"datetime"!==u?r.where(h.field,h.operator,h.value,!h.matchCase):r.where(this.getDatePredicate(h))}}if(i.searchSettings.key.length){var g=i.searchSettings;g.fields=g.fields.length?g.fields:i.getColumnFieldNames(),r.search(g.key,g.fields,g.operator,g.ignoreCase)}if(i.aggregates.forEach(function(e){e.columns.forEach(function(e){(e.type instanceof Array?e.type:[e.type]).forEach(function(t){return r.aggregate(t,e.field)})})}),(i.allowSorting||i.allowGrouping)&&i.sortSettings.columns.length){for(var f=[],m=(n=i.sortSettings.columns).length-1;m>-1;m--)-1===i.groupSettings.columns.indexOf(n[m].field)?r.sortBy(n[m].field,n[m].direction):f.push(n[m]);m=0;for(var y=f.length;m<y;m++)r.sortBy(f[m].field,f[m].direction)}if((i.allowPaging||i.enableVirtualization)&&!0!==e&&(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),r.page(i.pageSettings.currentPage,i.pageSettings.pageSize)),i.allowGrouping&&i.groupSettings.columns.length)for(m=0,y=(n=i.groupSettings.columns).length;m<y;m++){var v=i.getColumnByField(n[m]).enableGroupByFormat,C=i.getColumnByField(n[m]).format;v?r.group(n[m],this.formatGroupColumn.bind(this),C):r.group(n[m],null)}return r},e.prototype.getData=function(e,t){var i=this;void 0===e&&(e={requestType:""});var n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(e.requestType){case"delete":t=t||this.generateQuery(),this.dataManager.remove(n,e.data[0],null,t);break;case"save":t=t||this.generateQuery(),this.dataManager.insert(e.data,null,t,0)}if(this.dataManager.ready){var o=new r.Deferred;return this.dataManager.ready.then(function(e){i.dataManager.executeQuery(t).then(function(e){o.resolve(e)})}).catch(function(e){o.reject(e)}),o.promise}return this.dataManager.executeQuery(t)},e.prototype.formatGroupColumn=function(e,i){var r=this.parent,n=this.serviceLocator,o=r.getColumnByField(i),s=e;o.type||(o.type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":typeof e),t.isNullOrUndefined(o.getFormatter())&&B(n,o);return Q.prototype.toView(e,o.getFormatter())},e.prototype.crudActions=function(e){this.generateQuery();var t=null,i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(e.requestType){case"save":t=this.dataManager.update(i,e.data,null,this.generateQuery())}e.promise=t,this.parent.notify(Et,e)},e.prototype.saveChanges=function(e,t){return this.dataManager.saveChanges(e,t,null,this.generateQuery().requiresCount())},e.prototype.getKey=function(e){if(e&&e.length)return e[0]},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url},e.prototype.getDatePredicate=function(e){var i,n,o,s=t.extend({},w(e)),l=t.extend({},w(e)),a=new Date(e.value);if("equal"===e.operator||"notEqual"===e.operator){n=new Date(a.setDate(a.getDate()-1)),o=new Date(a.setDate(a.getDate()+2)),s.value=n,l.value=o,"equal"===e.operator?(s.operator="greaterthan",l.operator="lessthan"):"notEqual"===e.operator&&(s.operator="lessthanorequal",l.operator="greaterthanorequal");var c=new r.Predicate(s.field,s.operator,s.value,!1),p=new r.Predicate(l.field,l.operator,l.value,!1);i="equal"===e.operator?c.and(p):c.or(p)}else{i=new r.Predicate(s.field,s.operator,s.value,!1)}return i},e.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])},e.prototype.removeRows=function(e){var t=this.dataManager.dataSource.json;this.dataManager.dataSource.json=t.filter(function(t,i){return-1===e.records.indexOf(t)})},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(lt,this.addRows),this.parent.off(at,this.removeRows),this.parent.off(dt,this.initDataManager),this.parent.off(dt,this.destroy),this.parent.off(Ct,this.crudActions),this.parent.off(Tt,this.getData))},e}(),Gt=function(){return function(e){t.merge(this,e)}}(),Wt=function(){return function(e){this.isSpanned=!1,t.merge(this,e)}}(),Kt=function(){function i(e,t){this.serviceLocator=e,this.parent=t}return i.prototype.render=function(i,r,n,o){for(var s=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(r.cells[n].cellType||e.CellType.Data),l=r.cells[n].cellSpan?r.cells[n].cellSpan:i.colSpan+n<=r.cells.length?i.colSpan:r.cells.length-n,a=0,c=n+1;c<n+l&&c<r.cells.length;c++)!1===r.cells[c].visible?a++:r.cells[c].isSpanned=!0;if(a>0){for(c=n+l;c<n+l+a&&c<r.cells.length;c++)r.cells[c].isSpanned=!0;n+l+a>=r.cells.length&&(l-=n+l+a-r.cells.length)}return r.cells[n].cellSpan&&(r.data[i.column.field]=r.cells[n].spanText,o=s.render(r.cells[n],r.data,{index:t.isNullOrUndefined(r.index)?"":r.index.toString()})),l>1&&t.attributes(o,{colSpan:l.toString(),"aria-colSpan":l.toString()}),!this.parent.enableColumnVirtualization||r.cells[n].cellSpan||this.containsKey(i.column.field,i.data[i.column.field])||this.backupMergeCells(i.column.field,i.data[i.column.field],i.colSpan),o},i.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},i.prototype.generteKey=function(e,t){return e+"__"+t.toString()},i.prototype.splitKey=function(e){return e.split("__")},i.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},i.prototype.getMergeCells=function(){return this.parent.mergeCells},i.prototype.setMergeCells=function(e,t){this.parent.mergeCells[e]=t},i.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],o=t[n],s=this.splitKey(n),l=this.getIndexFromAllColumns(s[0]),a=this.parent.getColumnIndexesInView(),c=o-(a[0]-l);if(l<a[0]&&c>1)for(var p=0,d=e;p<d.length;p++){var h=d[p];if(h.data[s[0]].toString()===s[1].toString()){h.cells[0].cellSpan=c,h.cells[0].spanText=s[1];break}}}return e},i.prototype.getIndexFromAllColumns=function(e){return g(this.parent.getVisibleColumns(),function(t,i){if(t.field===e)return i})[0]},i}(),Qt=function(){function i(e,i,r){this.element=t.createElement("tr",{attrs:{role:"row"}}),this.cellType=i,this.serviceLocator=e,this.parent=r}return i.prototype.render=function(e,t,i,r,n){return this.refreshRow(e,t,i,r,n)},i.prototype.refresh=function(e,i,r,n,o){r&&(e.data=t.extend({},e.changes),this.refreshMergeCells(e));var s=this.parent.element.querySelector("[data-uid="+e.uid+"]"),l=this.refreshRow(e,i,n,o),a=[].slice.call(l.cells);s.innerHTML="";for(var c=0,p=a;c<p.length;c++){var d=p[c];s.appendChild(d)}},i.prototype.refreshRow=function(i,r,n,o,s){var l=t.isNullOrUndefined(s)?this.element.cloneNode():s,a={data:i.data},c={data:i.data},p=t.extend({},n,{});i.isDataRow&&(i.isSelected=this.parent.getSelectedRowIndexes().indexOf(i.index)>-1),this.buildAttributeFromRow(l,i),t.attributes(l,p),m(l,i.attributes);for(var d=this.serviceLocator.getService("cellRendererFactory"),h=0,u=i.cells.length;h<u;h++){var g=i.cells[h];g.isSelected=i.isSelected;var f=d.getCellRenderer(i.cells[h].cellType||e.CellType.Data).render(i.cells[h],i.data,{index:t.isNullOrUndefined(i.index)?"":i.index.toString()});if(i.cells[h].cellType!==e.CellType.Filter){if(i.cells[h].cellType===e.CellType.Data&&(this.parent.trigger($,t.extend(c,{cell:f,column:g.column,colSpan:1})),c.colSpan>1||i.cells[h].cellSpan>1)){f=new Kt(this.serviceLocator,this.parent).render(c,i,h,f)}i.cells[h].isSpanned||l.appendChild(f)}}return i.isDataRow&&this.parent.trigger("rowDataBound",t.extend(a,{row:l})),i.cssClass&&l.classList.add(i.cssClass),l},i.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++){i[t].isSpanned=!1}return e},i.prototype.buildAttributeFromRow=function(e,i){var r={},n="aria-rowindex",o="data-uid",s="aria-selected",l=[];i.isDataRow&&l.push("e-row"),i.isAltRow&&l.push("e-altrow"),t.isNullOrUndefined(i.index)||(r[n]=i.index),i.rowSpan&&(r.rowSpan=i.rowSpan),i.uid&&(r[o]=i.uid),i.isSelected&&(r[s]=!0),!1===i.visible&&l.push("e-hide"),r.class=l,m(e,r)},i}(),Xt=function(){function i(e){this.parent=e}return i.prototype.generateRows=function(e,t){for(var i=[],r=this.parent.enableVirtualization?t.startIndex:0,n=0,o=Object.keys(e).length;n<o;n++,r++)i[n]=this.generateRow(e[n],r);return i},i.prototype.ensureColumns=function(){var t=[];return(this.parent.detailTemplate||this.parent.childGrid)&&t.push(this.generateCell({},null,e.CellType.DetailExpand)),t},i.prototype.generateRow=function(e,t,i,r){var n={};n.uid=I("grid-row"),n.data=e,n.index=t,n.indent=r,n.isDataRow=!0,n.cssClass=i,n.isAltRow=!!this.parent.enableAltRow&&t%2!=0,n.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1;var o=this.ensureColumns(),s=new Gt(n);return s.cells=o.concat(this.generateCells(n)),s},i.prototype.generateCells=function(i){var r=this,n=[];return this.parent.getColumns().forEach(function(o,s){return n.push(r.generateCell(o,i.uid,t.isNullOrUndefined(o.commands)?void 0:e.CellType.CommandColumn,null,s))}),n},i.prototype.generateCell=function(i,r,n,o,s){var l={visible:i.visible,isDataCell:!t.isNullOrUndefined(i.field||i.template),isTemplate:!t.isNullOrUndefined(i.template),rowID:r,column:i,cellType:t.isNullOrUndefined(n)?e.CellType.Data:n,colSpan:o,commands:i.commands};return(l.isDataCell||"checkbox"===l.column.type)&&(l.index=this.parent.getColumnIndexByField(i.field)),new Wt(l)},i.prototype.refreshRows=function(e){var t=this;return e.forEach(function(e){return e.cells=t.generateCells(e)}),e},i}(),Yt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jt=function(){function i(e){this.parent=e}return i.prototype.getData=function(){var e=this,t=[];return this.parent.aggregates.slice().forEach(function(i){var r=i.columns.filter(function(t){return!(t.footerTemplate||t.groupFooterTemplate||t.groupCaptionTemplate)||e.columnSelector(t)});r.length&&t.push({columns:r})}),t},i.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},i.prototype.getColumns=function(){var e=[];return this.parent.allowGrouping&&this.parent.groupSettings.columns.forEach(function(t){return e.push(new X({}))}),this.parent.detailTemplate&&e.push(new X({})),e.push.apply(e,this.parent.getColumns()),e},i.prototype.generateRows=function(e,t){var i=this;if(0===this.parent.currentViewData.length)return[];var r=this.buildSummaryData(e,t),n=[];return this.getData().forEach(function(e,o){n.push(i.getGeneratedRow(e,r[o],t?t.level:void 0))}),n},i.prototype.getGeneratedRow=function(t,i,r){var n=this,o=[],s=this.getIndentByLevel(r),l=this.parent.groupSettings.columns.length+(this.parent.detailTemplate?1:0);this.getColumns().forEach(function(i,r){return o.push(n.getGeneratedCell(i,t,r>=l?n.getCellType():e.CellType.Indent,s[r]))});var a=new Gt({data:i,attributes:{class:"e-summaryrow"}});return a.cells=o,a.visible=o.some(function(e){return e.isDataCell&&e.visible}),a},i.prototype.getGeneratedCell=function(e,i,r,n){var o=i.columns.filter(function(t){return t.columnName===e.field})[0],s={style:{textAlign:e.textAlign}};n&&(s.class=n);var l={visible:e.visible,isDataCell:!t.isNullOrUndefined(o),isTemplate:o&&!t.isNullOrUndefined(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:s,cellType:r};return new Wt(l)},i.prototype.buildSummaryData=function(e,t){var i=this,r=[],n={};return this.getData().forEach(function(o){n={},o.columns.forEach(function(r){n=i.setTemplate(r,t&&t.aggregates?t:e,n)}),r.push(n)}),r},i.prototype.getIndentByLevel=function(e){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},i.prototype.setTemplate=function(e,i,r){var n=this,o=e.type,s={},l=e.getFormatter()||function(e){return e},a=i;return o instanceof Array||(o=[e.type]),o.forEach(function(o){var s=e.field+" - "+o,c=e.columnName,p=a.aggregates&&!t.isNullOrUndefined(a.aggregates[s])?a.aggregates[s]:O(o,a.aggregates?a.result:i,e,n.parent);r[c]=r[c]||{},r[c][s]=p,r[c][o]=l(p),a.field&&(r[c].field=a.field,r[c].key=a.key)}),s.format=e.getFormatter(),e.setTemplate(s),r},i.prototype.getCellType=function(){return e.CellType.Summary},i}(),$t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Yt(i,t),i.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},i.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(t,i){return i<=e-1?"":"e-indentcelltop"})},i.prototype.getCellType=function(){return e.CellType.GroupSummary},i}(Jt),Zt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Yt(i,t),i.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},i.prototype.getData=function(){return[t.prototype.getData.call(this).reduce(function(e,t){return e.columns=e.columns.concat(t.columns),e},{columns:[]})]},i.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},i.prototype.getCellType=function(){return e.CellType.CaptionSummary},i}(Jt),ei=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ti=function(i){function r(e){var t=i.call(this,e)||this;return t.rows=[],t.index=0,t.parent=e,t.summaryModelGen=new $t(e),t.captionModelGen=new Zt(e),t}return ei(r,i),r.prototype.generateRows=function(e,t){if(0===this.parent.groupSettings.columns.length)return i.prototype.generateRows.call(this,e,t);this.rows=[],this.index=this.parent.enableVirtualization?(this.parent.pageSettings.currentPage-1)*e.records.length:0;for(var r=0,n=e.length;r<n;r++)this.getGroupedRecords(0,e[r],e.level);return this.index=0,this.rows},r.prototype.getGroupedRecords=function(e,i,r){var n=r;if(t.isNullOrUndefined(i.items))if(t.isNullOrUndefined(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,e));else for(var o=0,s=i.length;o<s;o++)this.getGroupedRecords(e,i[o],i.level);else this.rows=this.rows.concat(this.generateCaptionRow(i,e)),i.items&&i.items.length&&this.getGroupedRecords(e+1,i.items,i.items.level),this.parent.aggregates.length&&(l=this.rows).push.apply(l,this.summaryModelGen.generateRows(i,{level:n}));var l},r.prototype.getCaptionRowCells=function(i,r,n){var o=this,s=[],l=[],a=this.parent.getColumnByField(i),c=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(e){return e.field===i})[0]);var p=this.parent.groupSettings.columns.length,d=this.parent;if(!this.parent.enableColumnVirtualization||-1!==c.indexOf(r)){for(var h=0;h<r;h++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,e.CellType.Expand))}if(r=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+p+(d.detailTemplate||d.childGrid?1:0)-r+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var u=this.captionModelGen.generateRows(n)[0];t.extend(n,u.data);var g=0;u.cells.some(function(e,t){return g=t,e.visible&&e.isDataCell}),l=u.cells.slice(g).filter(function(e){return e.visible}),u.visible&&l[0].column.field===this.parent.getVisibleColumns()[0].field&&(l=l.slice(1)),1===this.parent.getVisibleColumns().length&&(l=[]),r-=l.length}var f=!0;return(this.parent.enableColumnVirtualization?this.parent.getColumns():[a]).forEach(function(t,i){var n=f&&-1!==c.indexOf(r);n&&(f=!1);var l=!o.parent.enableColumnVirtualization||n?e.CellType.GroupCaption:e.CellType.GroupCaptionEmpty;r=o.parent.enableColumnVirtualization&&l===e.CellType.GroupCaption?r+p:r,s.push(o.generateCell(a,null,l,r))}),s.push.apply(s,l),s},r.prototype.generateCaptionRow=function(e,i){var r={},n=this.parent.getColumnByField(e.field);r.data=t.extend({},e),n&&(r.data.field=e.field),r.isDataRow=!1;var o=new Gt(r);return o.indent=i,o.cells=this.getCaptionRowCells(e.field,i,o.data),o},r.prototype.generateDataRows=function(e,t){for(var i=[],r=this.parent.getColumnIndexesInView(),n=0,o=e.length;n<o;n++){i[n]=this.generateRow(e[n],this.index,n?void 0:"e-firstchildrow",t);for(var s=0;s<t;s++)this.parent.enableColumnVirtualization&&-1===r.indexOf(t)||i[n].cells.unshift(this.generateIndentCell());this.index++}return i},r.prototype.generateIndentCell=function(){return this.generateCell({},null,e.CellType.Indent)},r.prototype.refreshRows=function(e){var t=this,i=this.parent.getColumnIndexesInView();return e.forEach(function(e){if(e.isDataRow){e.cells=t.generateCells(e);for(var r=0;r<e.indent;r++)t.parent.enableColumnVirtualization&&-1===i.indexOf(e.indent)||e.cells.unshift(t.generateIndentCell())}else{var n=t.generateCaptionRow(e.data,e.indent);e.cells=n.cells}}),e},r}(Xt),ii=function(){function e(e,i){var r=this;this.rows=[],this.isLoaded=!0,this.drop=function(e){r.parent.notify(ue,{target:e.target,droppedElement:e.droppedElement}),t.remove(e.droppedElement)},this.rafCallback=function(e){return function(){if(r.ariaService.setBusy(r.getPanel().firstChild,!1),!r.parent.isDestroyed){if(r.parent.notify(Ae,{rows:r.rows,args:e}),r.isLoaded&&(r.parent.trigger(ie,{}),r.parent.allowTextWrap&&r.parent.notify(Nt,{case:"textwrap"})),e){var t=(e.requestType||"").toLowerCase()+"-complete";r.parent.notify(t,e)}r.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=i,this.ariaService=this.serviceLocator.getService("ariaService"),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.on(rt,this.setVisible,this),this.parent.on(je,this.colGroupRefresh,this))}return e.prototype.renderPanel=function(){var e=this.parent,i=t.createElement("div",{className:"e-gridcontent"}),r=t.createElement("div",{className:"e-content"});t.Browser.isDevice||r.setAttribute("tabindex","0"),this.ariaService.setOptions(r,{busy:!1}),i.appendChild(r),this.setPanel(i),e.element.appendChild(i)},e.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createContentTable()),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop()},e.prototype.createContentTable=function(){var e=this.getPanel().firstChild,i=t.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+"_content_table"}});return this.setColGroup(this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(t.createElement("tbody")),e.appendChild(i),e},e.prototype.refreshContentRows=function(e){var i=this;void 0===e&&(e={});var r=this.parent;if(0!==r.currentViewData.length){var n,o,s=r.currentViewData,l=document.createDocumentFragment(),a=document.createDocumentFragment(),c=r.getColumns(),p=new Qt(this.serviceLocator,null,this.parent);this.rowElements=[],this.rows=[];var d=this.generator.generateRows(s,e),h=d[0].cells[0].index,g=this.getPanel().querySelector(".e-frozencontent"),f=this.getPanel().querySelector(".e-movablecontent"),m=this.getPanel().querySelector(".e-content");if(this.parent.enableColumnVirtualization){new Kt(this.serviceLocator,this.parent).updateVirtualCells(d)}this.parent.frozenColumns&&h>=this.parent.frozenColumns?this.tbody=f.querySelector("tbody"):this.tbody=this.getTable().querySelector("tbody");for(var y=0,v=d.length;y<v;y++){if(r.rowTemplate)for(var C=r.getRowTemplate()(t.extend({index:y},s[y]),r,"rowTemplate"),w=0;w<C.length;w++){var b="tr"===C[w].nodeName.toLowerCase();(b||C[w].querySelectorAll&&C[w].querySelectorAll("tr").length)&&(n=b?C[w]:C[w].querySelector("tr"))}else n=p.render(d[y],c);if(r.frozenRows&&y<r.frozenRows?a.appendChild(n):l.appendChild(n),this.rows.push(d[y]),d[y].isDataRow){var S=n.querySelectorAll(".e-rowcell:not(.e-hide)")[0];S&&S.classList.add("e-detailrowvisible"),this.rowElements.push(n)}this.ariaService.setOptions(this.getTable(),{colcount:r.getColumns().length.toString()})}r.frozenRows&&((o=r.frozenColumns?r.getHeaderContent().querySelector(0===h?".e-frozenheader":".e-movableheader").querySelector("tbody"):r.getHeaderTable().querySelector("tbody")).innerHTML="",o.appendChild(a)),r.frozenRows&&0===h&&m.offsetHeight===Number(r.height)&&(m.style.height=m.offsetHeight-o.offsetHeight+"px"),r.frozenColumns&&0===h&&(this.getPanel().firstChild.style.overflowY="hidden"),this.args=e,u(function(){t.remove(i.tbody),i.tbody=t.createElement("tbody"),r.frozenColumns?(i.tbody.appendChild(l),0===h?(i.isLoaded=!1,g.querySelector("table").appendChild(i.tbody)):(i.tbody.childElementCount<1&&i.tbody.appendChild(t.createElement("tr").appendChild(t.createElement("td"))),i.isLoaded=!0,f.querySelector("table").appendChild(i.tbody),g.style.height=f.offsetHeight-P()+"px",f.style.overflow="scroll")):i.appendContent(i.tbody,l,e),r.frozenColumns&&0===h&&i.refreshContentRows(e)},this.rafCallback(e))}},e.prototype.appendContent=function(e,t,i){e.appendChild(t),this.getTable().appendChild(e)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getTable=function(){return this.contentTable},e.prototype.setTable=function(e){this.contentTable=e},e.prototype.getRows=function(){return this.rows},e.prototype.getRowElements=function(){return this.rowElements},e.prototype.setRowElements=function(e){this.rowElements=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return this.colgroup=e},e.prototype.setVisible=function(e){var i;this.getRows().some(function(e){return e.isDataRow&&(i=e),e.isDataRow});for(var r=0,n=e.length;r<n;r++){var o=e[r],s=this.parent.getNormalizedColumnIndex(o.uid);if(!this.canSkip(o,i,s)){var l=!0===o.visible?"":"none";t.setStyleAttribute(this.getColGroup().childNodes[s],{display:l})}}this.refreshContentRows({requestType:"refresh"})},e.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.getColGroup();e.innerHTML=this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").innerHTML,this.setColGroup(e)}},e.prototype.initializeContentDrop=function(){var e=this.parent;new t.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.canSkip=function(e,i,r){return t.isNullOrUndefined(i)||t.isNullOrUndefined(e.visible)||i.cells[r].visible===e.visible},e.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new ti(this.parent):new Xt(this.parent)},e.prototype.renderEmpty=function(e){this.getTable().appendChild(e)},e.prototype.setSelection=function(e,t,i){this.getRows().filter(function(t){return i||e===t.uid}).forEach(function(e){return e.isSelected=t})},e.prototype.getRowByIndex=function(e){return this.parent.getDataRows()[e]},e}(),ri=function(){function i(e,i){var r=this;this.helper=function(e){var i=r.parent,n=e.sender.target,o=b(n,"e-headercell");if(!i.allowReordering&&!i.allowGrouping||!t.isNullOrUndefined(o)&&o.querySelectorAll(".e-checkselectall").length>0)return!1;var s=t.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),l=n.classList.contains("e-headercell")?n:o;if(!l)return!1;var a=l.offsetHeight,c=l.querySelector(".e-headercelldiv"),p=i.getColumnByUid(c.getAttribute("e-mappinguid"));return t.isNullOrUndefined(p.headerTemplate)?s.textContent=c?i.getColumnByUid(c.getAttribute("e-mappinguid")).headerText:l.firstElementChild.innerHTML:-1!==p.headerTemplate.indexOf("#")?s.innerHTML=document.querySelector(p.headerTemplate).innerHTML.trim():s.innerHTML=p.headerTemplate,s.style.width=l.offsetWidth+"px",s.style.height=l.offsetHeight+"px",s.style.lineHeight=(a-6).toString()+"px",l.querySelector(".e-headercelldiv")&&(r.column=i.getColumnByUid(l.querySelector(".e-headercelldiv").getAttribute("e-mappinguid")),s.setAttribute("e-mappinguid",r.column.uid)),i.element.appendChild(s),s},this.dragStart=function(e){var t=r.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify(de,{target:e.target,column:r.column,event:e.event})},this.drag=function(e){var i=r.parent,n=e.target;if(n){var o=t.closest(n,".e-grid"),s=r.parent.element.querySelector(".e-cloneproperties");if(!o||o.getAttribute("id")!==i.element.getAttribute("id"))return t.classList(s,["e-notallowedcur"],["e-defaultcur"]),void(i.allowReordering&&(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none"));i.notify(he,{target:e.target,column:r.column,event:e.event})}},this.dragStop=function(e){var i,n=r.parent;n.element.querySelector(".e-gridpopup").style.display="none",(!b(e.target,"e-headercell")&&!b(e.target,"e-groupdroparea")||!n.allowReordering&&b(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&b(e.target,"e-groupdroparea"))&&(t.remove(e.helper),i=!0),n.notify(ct,{target:e.target,event:e.event,column:r.column,cancel:i})},this.drop=function(e){var i=r.parent,n=e.droppedElement.getAttribute("e-mappinguid"),o=t.closest(e.target,".e-grid");t.remove(e.droppedElement),o&&o.getAttribute("id")!==i.element.getAttribute("id")||!i.allowReordering&&!i.allowGrouping||i.notify(pt,{target:e.target,uid:n})},this.parent=e,this.serviceLocator=i,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.on(rt,this.setVisible,this),this.parent.on(st,this.refreshUI,this))}return i.prototype.renderPanel=function(){var e=t.createElement("div",{className:"e-gridheader"}),i=t.createElement("div",{className:"e-headercontent"});e.appendChild(i),this.setPanel(e),this.parent.element.appendChild(e)},i.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(ze,{rows:this.rows})},i.prototype.getPanel=function(){return this.headerPanel},i.prototype.setPanel=function(e){this.headerPanel=e},i.prototype.getTable=function(){return this.headerTable},i.prototype.setTable=function(e){this.headerTable=e},i.prototype.getColGroup=function(){return this.colgroup},i.prototype.setColGroup=function(e){return this.colgroup=e},i.prototype.getRows=function(){return this.getTable().tHead.rows},i.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().firstChild;return t.appendChild(e),t},i.prototype.createTable=function(){for(var i,r=this.parent,n=(r.getColumns(),t.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid"}})),o=(this.getPanel().firstChild,this.createHeaderContent()),s=o.thead,l=t.createElement("tbody",{className:this.parent.frozenRows?"":"e-hide"}),a=t.createElement("colgroup"),c=t.createElement("tr"),p=this.rows=o.rows,d=(new Qt(this.serviceLocator,e.CellType.Header),0),h=p.length;d<h;d++)for(var u=0,g=p[d].cells.length;u<g;u++){p[d].cells[u];i=t.createElement("td"),c.appendChild(i)}return(r.allowFiltering||r.allowSorting||r.allowGrouping)&&n.classList.add("e-sortfilter"),this.updateColGroup(a),l.appendChild(c),n.appendChild(this.setColGroup(a)),n.appendChild(s),n.appendChild(l),this.ariaService.setOptions(n,{colcount:r.getColumns().length.toString()}),n},i.prototype.createHeaderContent=function(){var i=this.parent,r=i.getColumns(),n=t.createElement("thead"),o=t.createElement("tr",{className:"e-columnheader"}),s=new Qt(this.serviceLocator,e.CellType.Header,i);s.element=o;var l,a=[];this.colDepth=this.getObjDepth();for(var c=0,p=this.colDepth;c<p;c++)a[c]=this.generateRow(c),a[c].cells=[];a=this.ensureColumns(a),a=this.getHeaderCells(a);for(c=0,p=this.colDepth;c<p;c++)l=s.render(a[c],r),n.appendChild(l);return{thead:n,rows:a}},i.prototype.updateColGroup=function(e){var i,r=this.parent.getColumns(),n=this.parent.getColumnIndexesInView();if(this.parent.allowGrouping)for(var o=0,s=this.parent.groupSettings.columns.length;o<s;o++)this.parent.enableColumnVirtualization&&-1===n.indexOf(o)||(i=t.createElement("col"),e.appendChild(i));(this.parent.detailTemplate||this.parent.childGrid)&&(i=t.createElement("col"),e.appendChild(i));for(o=0,s=r.length;o<s;o++)i=t.createElement("col"),!1===r[o].visible&&t.setStyleAttribute(i,{display:"none"}),e.appendChild(i);return e},i.prototype.ensureColumns=function(t){for(var i=this.parent,r=this.parent.getColumnIndexesInView(),n=0,o=t.length;n<o;n++){if(i.allowGrouping)for(var s=0,l=i.groupSettings.columns.length;s<l;s++)this.parent.enableColumnVirtualization&&-1===r.indexOf(s)||t[n].cells.push(this.generateCell({},e.CellType.HeaderIndent));(i.detailTemplate||i.childGrid)&&t[n].cells.push(this.generateCell({},e.CellType.DetailHeader))}return t},i.prototype.getHeaderCells=function(e){var t;this.parent.frozenColumns&&(t=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead")?this.parent.columns.slice(this.parent.frozenColumns,this.parent.columns.length):this.parent.columns.slice(0,this.parent.frozenColumns));for(var i=this.parent.enableColumnVirtualization?this.parent.getColumns():this.parent.frozenColumns?t:this.parent.columns,r=0,n=i.length;r<n;r++)e=this.appendCells(i[r],e,0,0===r,!1,r===n-1);return e},i.prototype.appendCells=function(t,i,r,n,o,s){var l=s?"e-lastcell":"";if(t.columns){var a=this.getCellCnt(t,0);a&&i[r].cells.push(new Wt({cellType:e.CellType.StackedHeader,column:t,colSpan:a}));for(var c=0,p=t.columns.length;c<p;c++)i=this.appendCells(t.columns[c],i,r+1,n,0===c,c===p-1&&s)}else i[r].cells.push(this.generateCell(t,e.CellType.Header,this.colDepth-r,(n?"":o?"e-firstcell":"")+l,r,this.parent.getColumnIndexByUid(t.uid)));return i},i.prototype.generateRow=function(e){return new Gt({})},i.prototype.generateCell=function(e,i,r,n,o,s){var l={visible:e.visible,isDataCell:!1,isTemplate:!t.isNullOrUndefined(e.headerTemplate),rowID:"",column:e,cellType:i,rowSpan:r,className:n,index:o,colIndex:s};return(!l.rowSpan||l.rowSpan<2)&&delete l.rowSpan,new Wt(l)},i.prototype.setVisible=function(e){[].slice.call(this.getRows());for(var i,r="",n=0,o=e.length;n<o;n++){var s=e[n];i=this.parent.getNormalizedColumnIndex(s.uid),!1===s.visible&&(r="none"),t.setStyleAttribute(this.getColGroup().childNodes[i],{display:r}),this.refreshUI()}},i.prototype.refreshUI=function(){var e=this.getPanel(),i=this.getTable();t.remove(this.getTable()),i.removeChild(i.firstChild),i.removeChild(i.childNodes[0]);var r=t.createElement("colgroup"),n=this.createHeaderContent();this.rows=n.rows,i.insertBefore(n.thead,i.firstChild),this.updateColGroup(r),i.insertBefore(this.setColGroup(r),i.firstChild),this.setTable(i),this.appendContent(i),this.parent.notify(je,{}),this.widthService.setWidthToColumns(),this.initializeHeaderDrag();for(var o=[].slice.call(e.querySelectorAll("tr.e-columnheader")),s=0,l=o;s<l.length;s++){var a=l[s],c=[].slice.call(a.querySelectorAll(".e-grouptopleftcell"));c.length&&c[c.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(ze,{rows:this.rows}),this.parent.allowTextWrap&&"header"===this.parent.textWrapSettings.wrapMode&&A(o,!0)},i.prototype.appendContent=function(e){this.getPanel().firstChild.appendChild(e)},i.prototype.getObjDepth=function(){for(var e=0,t=this.parent.columns,i=0,r=t.length;i<r;i++){var n=this.checkDepth(t[i],0);e<n&&(e=n)}return e+1},i.prototype.checkDepth=function(e,t){if(e.columns){t++;for(var i=0,r=e.columns.length;i<r;i++)t=this.checkDepth(e.columns[i],t)}return t},i.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,r=e.columns.length;i<r;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t},i.prototype.initializeHeaderDrag=function(){var e=this.parent;if(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)for(var i=[].slice.call(e.getHeaderContent().querySelectorAll(".e-columnheader")),r=0,n=i.length;r<n;r++)new t.Draggable(i[r],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler"})},i.prototype.initializeHeaderDrop=function(){var e=this.parent;new t.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},i}(),ni=function(){function e(e,i){this.element=t.createElement("TD",{className:"e-rowcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=t.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}}),this.localizer=i.getService("localization"),this.formatter=i.getService("valueFormatter"),this.parent=e}return e.prototype.getGui=function(){return""},e.prototype.format=function(e,i,r){return t.isNullOrUndefined(e.format)||(i=this.formatter.toView(i,e.getFormatter())),t.isNullOrUndefined(i)?"":i.toString()},e.prototype.evaluate=function(e,i,r,n){var o;if(i.column.template){return o=i.column.getColumnTemplate()(t.extend({index:n.index},r),this.parent,"template"),D(e,o),e.setAttribute("aria-label",e.innerText+" is template cell column header "+i.column.headerText),!1}return!0},e.prototype.invokeFormatter=function(e,i,r){if(!t.isNullOrUndefined(e.formatter))if(d(e.formatter,"getValue")){i=(new(0,e.formatter)).getValue(e,r)}else i="function"==typeof e.formatter?e.formatter(e,r):e.formatter.getValue(e,r);return i},e.prototype.render=function(e,t,i){return this.refreshCell(e,t,i)},e.prototype.refreshTD=function(e,t,i,r){var n=this.refreshCell(t,i,r);e.innerHTML="";for(var o=0,s=[].slice.call(n.childNodes);o<s.length;o++){var l=s[o];e.appendChild(l)}},e.prototype.refreshCell=function(e,i,r){var o=this.element.cloneNode(),s=e.column,l=this.getGui(),a=this.getValue(s.field,i,s);if("date"!==s.type||t.isNullOrUndefined(a)||(a=new Date(a)),a=this.format(s,a,i),l=a.toString(),"boolean"===s.type)if(s.displayAsCheckBox)o.classList.add("e-checkbox"),l='<input type="checkbox" disabled />';else{var c="true"!==a&&"false"!==a?null:"true"===a?"True":"False";l=c?this.localizer.getConstant(c):l}var p=this.invokeFormatter(s,a,i);if(l=t.isNullOrUndefined(s.formatter)?l:t.isNullOrUndefined(p)?"":p.toString(),o.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(o,e,i,r)&&"checkbox"!==s.type)this.appendHtml(o,l,s.getDomSetter?s.getDomSetter():"innerHTML");else if("checkbox"===s.type){o.classList.add("e-gridchkbox"),o.setAttribute("aria-label","column header "+e.column.headerText),a=!!this.parent.selectionSettings.persistSelection&&"true"===a;var d=n.createCheckBox(!1,{checked:a,label:" "});d.insertBefore(this.rowChkBox.cloneNode(),d.firstChild),o.appendChild(d)}if(this.setAttributes(o,e,r),"boolean"===s.type){new n.CheckBox({disabled:!0,checked:isNaN(parseInt(a,10))?"true"===a:parseInt(a,10)>0}).appendTo(o.firstElementChild)}return o},e.prototype.appendHtml=function(e,t,i){return void 0===i&&(i="innerHTML"),e[i]=t,e},e.prototype.setAttributes=function(e,t,i){var r=t.column;this.buildAttributeFromCell(e,t),m(e,i),m(e,t.attributes),r.customAttributes&&m(e,r.customAttributes),r.textAlign&&(e.style.textAlign=r.textAlign),"clip"===r.clipMode?e.classList.add("e-gridclip"):"ellipsiswithtooltip"===r.clipMode&&e.classList.add("e-ellipsistooltip")},e.prototype.buildAttributeFromCell=function(e,i){var r={},n=[];i.colSpan&&(r.colSpan=i.colSpan),i.rowSpan&&(r.rowSpan=i.rowSpan),i.isTemplate&&n.push("e-templatecell"),i.isSelected&&n.push.apply(n,["e-selectionbackground","e-active"]),t.isNullOrUndefined(i.index)||(r["aria-colindex"]=i.index),i.visible||n.push("e-hide"),r.class=n,m(e,r)},e.prototype.getValue=function(e,t,i){return i.valueAccessor(i.field,t,i)},e}(),oi=function(){function e(){}return e.prototype.setOptions=function(e,t){Object.keys(t).forEach(function(i){return G(e,si[i],t[i])})},e.prototype.setExpand=function(e,t){G(e,si.expand,t)},e.prototype.setSort=function(e,t){G(e,si.sort,t,"boolean"==typeof t)},e.prototype.setBusy=function(e,t){G(e,si.busy,t),G(e,si.invalid,null,!0)},e.prototype.setGrabbed=function(e,t,i){G(e,si.grabbed,t,i)},e.prototype.setDropTarget=function(e,t){G(e,si.dropeffect,"copy",!t)},e}(),si={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount"},li=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ai=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),i.ariaService=new oi,i.hTxtEle=t.createElement("span",{className:"e-headertext"}),i.sortEle=t.createElement("div",{className:"e-sortfilterdiv e-icons"}),i.gui=t.createElement("div"),i.chkAllBox=t.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}}),i}return li(i,e),i.prototype.getGui=function(){return this.gui.cloneNode()},i.prototype.render=function(e,i,r){var n=this.element.cloneNode(),o=t.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,n,o)},i.prototype.refresh=function(e,i){this.clean(i);var r=t.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,i,r)},i.prototype.clean=function(e){e.innerHTML=""},i.prototype.prepareHeader=function(e,i,r){var o=e.column,s={},l=this.getGui();if(t.attributes(l,{"e-mappinguid":o.uid,class:"e-headercelldiv"}),"checkbox"!==o.type){var a=o.headerText,c=this.hTxtEle.cloneNode();c[o.getDomSetter()]=a,l.appendChild(c)}else{o.editType="booleanedit";var p=n.createCheckBox(!1,{checked:!1,label:" "});p.insertBefore(this.chkAllBox.cloneNode(),p.firstChild),l.appendChild(p),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,e),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"filterbar"!==this.parent.filterSettings.type&&o.allowFiltering&&!t.isNullOrUndefined(o.field)&&(!this.parent.showColumnMenu||!o.showColumnMenu)){t.attributes(r,{"e-mappinguid":"e-flmenu-"+o.uid}),i.classList.add("e-fltr-icon");var d=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==d.length)for(var h=0;h<this.parent.columns.length;h++)for(var u=0;u<this.parent.filterSettings.columns.length;u++)if(this.parent.filterSettings.columns[u].field===o.field){r.classList.add("e-filtered"),d.push(o.field);break}i.appendChild(r.cloneNode())}if(e.className&&i.classList.add(e.className),o.customAttributes&&m(i,o.customAttributes),o.allowSorting&&(s.sort="none"),o.allowGrouping&&(s.grabbed=!1),i=this.extendPrepareHeader(o,i),t.isNullOrUndefined(o.headerTemplate)||(-1!==o.headerTemplate.indexOf("#")?l.innerHTML=document.querySelector(o.headerTemplate).innerHTML.trim():l.innerHTML=o.headerTemplate),this.ariaService.setOptions(i,s),!t.isNullOrUndefined(o.headerTextAlign)||!t.isNullOrUndefined(o.textAlign)){var g=o.headerTextAlign||o.textAlign;l.style.textAlign=g,"right"===g||"left"===g?i.classList.add("right"===g?"e-rightalign":"e-leftalign"):"center"===g&&i.classList.add("e-centeralign")}return"clip"===o.clipMode?i.classList.add("e-gridclip"):"ellipsiswithtooltip"===o.clipMode&&i.classList.add("e-ellipsistooltip"),i.setAttribute("aria-rowspan",(t.isNullOrUndefined(e.rowSpan)?1:e.rowSpan).toString()),i.setAttribute("aria-colspan","1"),i},i.prototype.extendPrepareHeader=function(e,i){if(this.parent.showColumnMenu&&e.showColumnMenu){var r=t.createElement("div",{className:"e-icons e-columnmenu"}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length)for(var o=0;o<this.parent.columns.length;o++)for(var s=0;s<this.parent.filterSettings.columns.length;s++)if(this.parent.filterSettings.columns[s].field===e.field){r.classList.add("e-filtered"),n.push(e.field);break}i.classList.add("e-fltr-icon"),i.appendChild(r)}if(this.parent.allowResizing){var l=t.createElement("div");l.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},i.prototype.appendHtml=function(e,t){return e.appendChild(t),e},i}(ni),ci=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),i}return ci(i,e),i.prototype.render=function(e,i,r){var n=this.element.cloneNode(),o=t.createElement("div",{className:"e-stackedheadercelldiv"});return n.appendChild(o),o.innerHTML=e.column.headerText,e.column.toolTip&&n.setAttribute("title",e.column.toolTip),t.isNullOrUndefined(e.column.textAlign)||(o.style.textAlign=e.column.textAlign),n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-colspan",e.colSpan.toString()),n.setAttribute("aria-rowspan","1"),n},i}(ni),di=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TD",{className:"e-indentcell"}),i}return di(i,e),i.prototype.render=function(e,t){var i=this.element.cloneNode();return m(i,e.attributes),i},i}(ni),ui=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TD",{className:"e-groupcaption",attrs:{role:"gridcell",tabindex:"-1"}}),i}return ui(i,e),i.prototype.render=function(e,i){var r=this.element.cloneNode(),n=this.parent,o=e.column.enableGroupByFormat?i.key:this.format(e.column,e.column.valueAccessor("key",i,e.column));return t.isNullOrUndefined(n.groupSettings.captionTemplate)?r.innerHTML=e.column.headerText+": "+o+" - "+i.count+" "+(i.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items")):D(r,-1!==n.groupSettings.captionTemplate.indexOf("#")?f(document.querySelector(n.groupSettings.captionTemplate).innerHTML.trim())(i):f(n.groupSettings.captionTemplate)(i)),r.setAttribute("colspan",e.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+" is groupcaption cell"),r},i}(ni),fi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TD",{className:"e-groupcaption"}),i}return ui(i,e),i.prototype.render=function(e,t){var i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i},i}(ni),mi=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return mi(i,e),i.prototype.render=function(e,i){var r=this.element.cloneNode();return r.className="e-recordplusexpand",r.setAttribute("ej-mappingname",i.field),r.setAttribute("ej-mappingvalue",i.key),r.setAttribute("aria-expanded","true"),r.setAttribute("tabindex","-1"),r.appendChild(t.createElement("div",{className:"e-icons e-gdiagonaldown e-icon-gdownarrow"})),r},i}(hi),vi=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ci=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TH",{className:"e-grouptopleftcell"}),i}return vi(i,e),i.prototype.render=function(e,i){var r=this.element.cloneNode();return r.appendChild(t.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:"&nbsp;"})),r},i}(ni),wi=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TH",{className:"e-detailheadercell"}),i}return wi(i,e),i.prototype.render=function(e,i){var r=this.element.cloneNode();return r.appendChild(t.createElement("div",{className:"e-emptycell"})),r},i}(ni),Si=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xi=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),i}return Si(i,e),i.prototype.render=function(){var e=this.element.cloneNode();return e.appendChild(t.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),e},i}(ni),Ei=function(){function i(e,t){this.parent=e,this.locator=t,this.data=new Vt(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return i.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(e.RenderType.Header),this.contentRenderer=this.renderer.getRenderer(e.RenderType.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.refreshDataManager()},i.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.parent.notify(e.requestType+"-begin",e),this.parent.trigger(Z,e),e.cancel||this.refreshDataManager(e)},i.prototype.refreshComplete=function(e){this.parent.trigger(ee,e)},i.prototype.refreshDataManager=function(e){var t=this;void 0===e&&(e={}),"virtualscroll"!==e.requestType&&this.parent.showSpinner(),this.parent.isEdit=!1,this.ariaService.setBusy(this.parent.getContent().firstChild,!0);var i=this.data.getData(e,this.data.generateQuery().requiresCount());this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(i=i.then(function(e){return t.validateGroupRecords(e)})),i.then(function(i){return t.dataManagerSuccess(i,e)}).catch(function(e){return t.dataManagerFailure(e)})},i.prototype.sendBulkRequest=function(e){var t=this,i=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0]);this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):i.then(function(i){return t.dmSuccess(i,e)}).catch(function(e){return t.dmFailure(e)})},i.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},i.prototype.dmFailure=function(e){this.dataManagerFailure(e)},i.prototype.renderEmptyRow=function(){this.emptyRow(!0)},i.prototype.emptyRow=function(e){var i,r=this.parent,n=this.contentRenderer.getTable().querySelector("tbody");t.remove(n),n=t.createElement("tbody"),(i=t.createElement("tr",{className:"e-emptyrow"})).appendChild(t.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:r.getColumns().length.toString()}})),n.appendChild(i),this.contentRenderer.renderEmpty(n),e&&(this.parent.trigger(ie,{}),this.parent.notify(Be,{rows:[new Gt({isDataRow:!0,cells:[new Wt({isDataCell:!0,visible:!0})]})]}))},i.prototype.updateColumnType=function(e){for(var i,r=this.parent.getColumns(),n=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter"),s=0,l=r.length;s<l;s++){i=t.getValue(r[s].field||"",n),t.isNullOrUndefined(i)?r[s].type=r[s].type||null:(this.isColTypeDef=!0,r[s].type||(r[s].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var a=new Q;r[s].format&&(r[s].format.skeleton||r[s].format.format)&&(r[s].setFormatter(a.getFormatFunction(r[s].format)),r[s].setParser(a.getParserFunction(r[s].format))),"string"==typeof r[s].format?B(this.locator,r[s]):r[s].format||"number"!==r[s].type||r[s].setParser(o.getParserFunction({format:"n2"}))}},i.prototype.dataManagerSuccess=function(e,i){var r=this.parent;r.trigger(Re,e);var n=Object.keys(e.result).length;if(!this.parent.isDestroyed){if(this.parent.notify(vt,{}),r.currentViewData=e.result,!n&&e.count&&r.allowPaging)return r.pageSettings.currentPage=Math.ceil(e.count/r.pageSettings.pageSize),void r.dataBind();if(!r.getColumns().length&&n&&this.updatesOnInitialRender(e),this.isColTypeDef||this.updateColumnType(r.getCurrentViewRecords()[0]),this.parent.notify(Fe,t.extend({count:e.count,result:e.result,aggregates:e.aggregates},i)),(r.groupSettings.columns.length||i&&"ungrouping"===i.requestType)&&this.headerRenderer.refreshUI(),n)this.contentRenderer.refreshContentRows(i);else{if(!r.getColumns().length)return r.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.renderEmptyRow(),i){var o=(i.requestType||"").toLowerCase()+"-complete";this.parent.notify(o,i)}this.parent.hideSpinner()}}},i.prototype.dataManagerFailure=function(e){this.ariaService.setOptions(this.parent.getContent().firstChild,{busy:!1,invalid:!0}),this.parent.trigger(te,{error:e}),this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.hideSpinner()},i.prototype.updatesOnInitialRender=function(e){this.buildColumns(e.result[0]),v(this.parent.columns),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.notify(yt,{})},i.prototype.buildColumns=function(e){for(var i=Object.keys(e),r=[],n=0,o=i.length;n<o;n++)r[n]={field:i[n]},this.parent.enableColumnVirtualization&&(r[n].width=t.isNullOrUndefined(r[n].width)?200:r[n].width);this.parent.columns=r},i.prototype.instantiateRenderer=function(){this.renderer.addRenderer(e.RenderType.Header,new ri(this.parent,this.locator)),this.renderer.addRenderer(e.RenderType.Content,new ii(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(e.CellType.Header,new ai(this.parent,this.locator)),t.addCellRenderer(e.CellType.Data,new ni(this.parent,this.locator)),t.addCellRenderer(e.CellType.StackedHeader,new pi(this.parent,this.locator)),t.addCellRenderer(e.CellType.Indent,new hi(this.parent,this.locator)),t.addCellRenderer(e.CellType.GroupCaption,new gi(this.parent,this.locator)),t.addCellRenderer(e.CellType.GroupCaptionEmpty,new fi(this.parent,this.locator)),t.addCellRenderer(e.CellType.Expand,new yi(this.parent,this.locator)),t.addCellRenderer(e.CellType.HeaderIndent,new Ci(this.parent,this.locator)),t.addCellRenderer(e.CellType.StackedHeader,new pi(this.parent,this.locator)),t.addCellRenderer(e.CellType.DetailHeader,new bi(this.parent,this.locator)),t.addCellRenderer(e.CellType.DetailExpand,new xi(this.parent,this.locator))},i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Me,this.instantiateRenderer,this),this.parent.on(qe,this.refresh,this),this.parent.on(ht,this.refreshComplete,this),this.parent.on(mt,this.sendBulkRequest,this))},i.prototype.validateGroupRecords=function(e){var t=this,i=e.result.length-1;if(i<0)return Promise.resolve(e);var n=e.result[0],o=e.result[i],s=[],l=function(e){[n,o].forEach(function(e){return s.push(new r.Predicate("field","==",e.field).and(t.getPredicate("key","equal",e.key)))}),e.where(r.Predicate.or(s))},a=new r.Query;l(a);var c=new r.DataManager(e.result).executeLocal(a),p=this.data.generateQuery(!0),d=[];this.data.isRemote()?([n,o].forEach(function(e){return d.push(t.getPredicate(e.field,"equal",e.key))}),p.where(r.Predicate.or(d))):l(p);var h=new r.Deferred;return this.data.getData({},p).then(function(i){t.updateGroupInfo(c,i.result),h.resolve(e)}).catch(function(e){return h.reject(e)}),h.promise},i.prototype.getPredicate=function(e,t,i){return i instanceof Date?this.data.getDatePredicate({field:e,operator:t,value:i}):new r.Predicate(e,t,i)},i.prototype.updateGroupInfo=function(e,t){var i=this,n=new r.DataManager(t);return e.forEach(function(e,t,o){var s=n.executeLocal((new r.Query).where(new r.Predicate("field","==",e.field).and(i.getPredicate("key","equal",e.key))))[0];e.count=s.count;var l=e.items,a=s.items;l.GroupGuid&&(e.items=i.updateGroupInfo(e.items,s.items)),i.parent.aggregates.forEach(function(t){return t.columns.forEach(function(t){(t.type instanceof Array?t.type:[t.type]).forEach(function(i){var r=t.field+" - "+i;e.aggregates[r]=O(i,l.level?a.records:s.items,t)})})})}),e},i}(),Ti=function(){function i(){this.cellRenderMap={}}return i.prototype.addCellRenderer=function(i,r){i="string"==typeof i?i:t.getEnumValue(e.CellType,i),t.isNullOrUndefined(this.cellRenderMap[i])&&(this.cellRenderMap[i]=r)},i.prototype.getCellRenderer=function(i){if(i="string"==typeof i?i:t.getEnumValue(e.CellType,i),t.isNullOrUndefined(this.cellRenderMap[i]))throw"The cellRenderer "+i+" is not found";return this.cellRenderMap[i]},i}(),Ri=function(){function e(){this.services={}}return e.prototype.register=function(e,i){t.isNullOrUndefined(this.services[e])&&(this.services[e]=i)},e.prototype.getService=function(e){if(t.isNullOrUndefined(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),Ii=function(){function i(){this.rendererMap={}}return i.prototype.addRenderer=function(i,r){var n=t.getEnumValue(e.RenderType,i);t.isNullOrUndefined(this.rendererMap[n])&&(this.rendererMap[n]=r)},i.prototype.getRenderer=function(i){var r=t.getEnumValue(e.RenderType,i);if(t.isNullOrUndefined(this.rendererMap[r]))throw"The renderer "+r+" is not found";return this.rendererMap[r]},i}(),Di=function(){function e(e){this.parent=e}return e.prototype.setWidthToColumns=function(){var e=this,t=0,i=this.parent.getColumnIndexesInView(),r=!0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;t<n;t++)this.parent.enableColumnVirtualization&&-1===i.indexOf(t)?r=!1:this.setColumnWidth(new X({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new X({width:"30px"}),t),this.parent.getColumns().forEach(function(t,i){e.setColumnWidth(t,r?void 0:i)})},e.prototype.setColumnWidth=function(e,i,r){var n=t.isNullOrUndefined(i)?this.parent.getNormalizedColumnIndex(e.uid):i,o=this.getWidth(e);null!==o&&(this.setWidth(o,n),this.parent.allowResizing&&"resize"===r&&this.setWidthToTable(),this.parent.notify(ot,{index:n,width:o,column:e,module:r}))},e.prototype.setWidth=function(e,i){var r,n=this.parent.getHeaderTable(),o=this.parent.getContentTable(),s=t.formatUnit(e),l=this.parent.getHeaderContent().querySelector(".e-movableheader");(r=this.parent.frozenColumns&&i>=this.parent.frozenColumns&&l&&l.querySelector("colgroup")?l.querySelector("colgroup").children[i-this.parent.frozenColumns]:n.querySelector("colgroup").children[i])&&(r.style.width=s);var a;(a=this.parent.frozenColumns&&i>=this.parent.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[i-this.parent.frozenColumns]:o.querySelector("colgroup").children[i])&&(a.style.width=s);var c=o.querySelector(".e-table.e-inline-edit");c&&(c.querySelector("colgroup").children[i].style.width=s)},e.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},e.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],r=0,n=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)n.some(function(e){return i.classList.contains(e)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},e.prototype.getWidth=function(e){if(t.isNullOrUndefined(e.width)&&this.parent.allowResizing&&(e.width=200),!e.width)return null;var i=parseInt(e.width.toString(),10);return e.minWidth&&i<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&i>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,i=0,r=e;i<r.length;i++){var n=r[i],o=this.getWidth(n);!1!==n.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},e.prototype.setWidthToTable=function(){var e=null;if(this.parent.frozenColumns){for(var i=0,r=this.parent.getContentTable().querySelector("colgroup"),n=t.select(".e-movablecontent"),o=0;o<this.parent.getHeaderTable().querySelector(".e-columnheader").children.length;o++)i+=parseInt(r.children[o].style.width,10);e=t.formatUnit(i),this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e,i=0;for(o=0;o<t.select(".e-movableheader").querySelector(".e-columnheader").children.length;o++)i+=parseInt(n.children[0].querySelector("colgroup").children[o].style.width,10);e=t.formatUnit(i),t.select(".e-movableheader").firstElementChild.style.width=e,t.select(".e-movablecontent").firstElementChild.style.width=e}else e=t.formatUnit(this.getTableWidth(this.parent.getColumns())),this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e;var s=this.parent.element.querySelector(".e-table.e-inline-edit");s&&(s.style.width=e)},e}(),ki=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oi=function(){function e(e){this.currentInfo={},this.oneTime=!0,this.forget=!0,this.skipFocus=!1,this.prevIndexes={},this.parent=e,this.addEventListener()}return e.prototype.focusCheck=function(e){var i=e.target;this.skipFocus=null!==t.closest(i,"e-pager")},e.prototype.onFocus=function(){if(!this.parent.isDestroyed){this.setActive(!0);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(this.focus(),this.skipFocus=!1)}},e.prototype.onClick=function(e,i){var r=!t.isNullOrUndefined(t.closest(e.target,".e-gridcontent"));if(!(!r&&t.isNullOrUndefined(t.closest(e.target,".e-gridheader"))||e.target.classList.contains("e-filtermenudiv"))){var n={cancel:!1,byKey:!1,byClick:!t.isNullOrUndefined(e.target),clickArgs:e};if(this.parent.notify($e,n),!n.cancel){this.setActive(r);!1!==this.getContent().onClick(e,i)&&this.focus()}}},e.prototype.onKeyPress=function(e){if(!this.skipOn(e)){var t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify($e,t),!t.cancel){var i=this.getContent().matrix.current;if(this.currentInfo.outline=!0,this.swap=this.getContent().jump(e.action,i),this.swap){var r=this.header===this.getContent();this.setActive(r);var n=r?-1:this.header.matrix.matrix.length,o=this.getContent().matrix.get(n,i[1],[0,0],e.action,this.getContent().validator());this.getContent().matrix.current=[n,o[1]],this.prevIndexes={}}e.preventDefault(),this.getContent().onKeyPress(e),this.focus(e)}}},e.prototype.skipOn=function(e){var i=e.target;return!!i&&("batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2","delete"].indexOf(e.action)>-1)||null!==t.closest(document.activeElement,".e-filterbarcell")&&["leftArrow","rightArrow"].indexOf(e.action)>-1||null===t.closest(i,".e-gridcontent")&&null===t.closest(i,".e-gridheader")||"space"===e.action&&!i.classList.contains("e-gridchkbox")&&null===t.closest(i,".e-gridchkbox")&&null===t.closest(i,".e-headerchkcelldiv"))},e.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},e.prototype.getContent=function(){return this.active||this.content},e.prototype.setActive=function(e){this.active=e?this.content:this.header},e.prototype.setFocusedElement=function(e){var t=this;this.currentInfo.elementToFocus=e,setTimeout(function(){return t.currentInfo.elementToFocus.focus()},0)},e.prototype.focus=function(e){this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},e.prototype.removeFocus=function(){this.currentInfo.element&&(t.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.elementToFocus.tabIndex=-1)},e.prototype.addFocus=function(e,i){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!t.isNullOrUndefined(i),e.element){var r=e.elementToFocus.classList.contains("e-focus");if(!r){this.currentInfo.outline&&t.addClass([e.element],["e-focused"]),t.addClass([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,r||this.setFocusedElement(e.elementToFocus),this.parent.notify(Ze,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!t.isNullOrUndefined(i),byClick:t.isNullOrUndefined(i),keyArgs:i,isJump:this.swap,container:this.getContent().getInfo(i),outline:!t.isNullOrUndefined(i)});var n=this.getContent().matrix.current,o=n[0],s=n[1];this.prevIndexes={rowIndex:o,cellIndex:s}}}},e.prototype.refreshMatrix=function(e){var t=this;return function(i){e&&!t.content&&(t.content=new Mi(t.parent)),e||t.header||(t.header=new Li(t.parent));var r=e?t.content:t.header;r.matrix.generate(i.rows,r.selector),r.generateRows(i.rows);i.args&&["paging","grouping"].indexOf(i.args.requestType)>-1&&(t.skipFocus=!0,t.onFocus())}},e.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||this.parent.frozenColumns||this.parent.frozenRows||(t.EventHandler.add(this.parent.element,"mousedown",this.focusCheck,this),t.EventHandler.add(this.parent.element,"focus",this.onFocus,this),this.parent.on(et,this.onKeyPress,this),this.parent.on(tt,this.onClick,this),this.parent.on(Ae,this.refreshMatrix(!0),this),this.parent.on(ze,this.refreshMatrix(),this),this.parent.on("close-edit",this.restoreFocus,this),["start-edit","start-add"].forEach(function(t){return e.parent.on(t,e.clearOutline,e)}),["sorting"].forEach(function(t){return e.parent.on(t+"-complete",e.restoreFocus,e)}),this.parent.on(we,this.refreshMatrix(!0),this),this.parent.on(be,this.refreshMatrix(!0),this),this.parent.on(ve,this.refreshMatrix(!0),this),this.parent.on(Be,this.refreshMatrix(!0),this))},e.prototype.removeEventListener=function(){var e=this;this.parent.isDestroyed||(t.EventHandler.remove(this.parent.element,"mousedown",this.focusCheck),t.EventHandler.remove(this.parent.element,"focus",this.onFocus),this.parent.off(et,this.onKeyPress),this.parent.off(tt,this.onClick),this.parent.off(Ae,this.refreshMatrix(!0)),this.parent.off(ze,this.refreshMatrix()),this.parent.off("close-edit",this.restoreFocus),["start-edit","start-add"].forEach(function(t){return e.parent.off(t,e.clearOutline)}),["sorting"].forEach(function(t){return e.parent.off(t+"-complete",e.restoreFocus)}),this.parent.off(we,this.refreshMatrix(!0)),this.parent.off(be,this.refreshMatrix(!0)),this.parent.off(ve,this.refreshMatrix(!0)),this.parent.off(Be,this.refreshMatrix(!0)))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.restoreFocus=function(){this.addFocus(this.getContent().getFocusInfo())},e.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.currentInfo.element&&this.currentInfo.elementToFocus&&t.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},e.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e?{rowIndex:null,cellIndex:null}:this.prevIndexes},e.prototype.forgetPrevious=function(){this.forget=!0},e}(),Pi=function(){function e(){this.matrix=[],this.current=[]}return e.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0},e.prototype.get=function(e,i,r,n,o){var s=i;if(e+r[0]<0)return[e,i];e=Math.max(0,Math.min(e+r[0],this.rows)),i=Math.max(0,Math.min(i+r[1],this.matrix[e].length-1));var l=this.first(this.matrix[e],i,r,!0,n);i=null===l?s:l;var a=t.getValue(e+"."+i,this.matrix);return this.inValid(a)||!o(e,i,n)?this.get(e,s,r,n,o):[e,i]},e.prototype.first=function(e,t,i,r,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some(function(e){return 1===e})?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?r?0:++t:t+i[1],i,!1,n):t},e.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]},e.prototype.generate=function(e,t){var i=this;return this.rows=e.length-1,this.matrix=[],e.forEach(function(e,r){var n=e.cells.filter(function(e){return!0!==e.isSpanned});i.columns=Math.max(n.length-1,0|i.columns),n.forEach(function(n,o){i.set(r,o,t(e,n))})}),this.matrix},e.prototype.inValid=function(e){return 0===e||void 0===e},e}(),Mi=function(){function i(e){var t=this;this.matrix=new Pi,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[e]||null}}return i.prototype.onKeyPress=function(e){var t=this.keyActions[e.action],i=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);i&&this.matrix.select(i[0],i[1])},i.prototype.getCurrentFromAction=function(e,t,i,r){if(void 0===t&&(t=[0,0]),!i&&!this.indexesByKey(e))return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),o=n[0],s=n[1],l=n[2],a=n[3];return this.matrix.get(o,s,[l,a],e,this.validator())},i.prototype.onClick=function(e,i){var r=e.target;if(r=r.classList.contains("e-rowcell")?r:t.closest(r,"td.e-rowcell")){var n=[r.parentElement.rowIndex,r.cellIndex],o=n[0],s=n[1],l=this.matrix.current,a=l[0],c=l[1],p=t.getValue(o+"."+s,this.matrix.matrix);if(this.matrix.inValid(p)||!i&&a===o&&c===s)return!1;this.matrix.select(o,s)}},i.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=void 0===i?0:i,n=t[1],o=void 0===n?0:n;return this.matrix.current=[r,o],e.element=this.parent.getContentTable().rows[r].cells[o],e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-detailcell"),e},i.prototype.getFocusable=function(e){var t=[].slice.call(e.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'));return t.length?t[0]:e},i.prototype.selector=function(t,i){var r=[e.CellType.Expand,e.CellType.GroupCaption,e.CellType.CaptionSummary,e.CellType.GroupSummary];return(t.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||t.isDataRow&&i.cellType===e.CellType.DetailExpand||!t.isDataRow&&r.indexOf(i.cellType)>-1||i.column&&"checkbox"===i.column.type)&&!("delete"===t.edit&&t.isDirty)},i.prototype.jump=function(e,t){return"upArrow"===e&&0===t[0]},i.prototype.generateRows=function(e){},i.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,r=i[0],n=i[1],o=t.element.classList.contains("e-rowcell"),s=o||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10),r),Math.min(parseInt(t.element.getAttribute("aria-colindex"),10),n)];return{isContent:!0,isDataCell:o,indexes:[l[0],l[1]],isSelectable:s}},i.prototype.validator=function(){var e=this.parent.getContentTable();return function(t,i,r){var n=e.rows[t].cells[i];return"enter"===r||"shiftEnter"===r?n.classList.contains("e-rowcell"):!("shiftUp"!==r&&"shiftDown"!==r||!n.classList.contains("e-rowcell"))||"shiftUp"!==r&&"shiftDown"!==r&&0!==n.getBoundingClientRect().width}},i.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=void 0===i?-1:i,n=t[1],o=void 0===n?-1:n;if(r<0||o<0)return!0;var s=this.parent.getContentTable().rows[r].cells[o];return"enter"!==e.action&&"shiftEnter"!==e.action||s.classList.contains("e-rowcell")},i}(),Li=function(e){function i(t){return e.call(this,t)||this}return ki(i,e),i.prototype.onClick=function(e){var i=e.target;if(i=i.classList.contains("e-headercell")?i:t.closest(i,"th")){var r=[i.parentElement.rowIndex,i.cellIndex],n=r[0],o=r[1],s=t.getValue(n+"."+o,this.matrix.matrix);if(this.matrix.inValid(s))return!1;this.matrix.select(i.parentElement.rowIndex,i.cellIndex)}},i.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=void 0===i?0:i,n=t[1],o=void 0===n?0:n;return e.element=this.parent.getHeaderTable().rows[r].cells[o],e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell"),e},i.prototype.selector=function(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate)||"checkbox"===t.column.type},i.prototype.jump=function(e,t){return"downArrow"===e&&t[0]===this.matrix.matrix.length-1},i.prototype.generateRows=function(e){var t=this,i=this.matrix.matrix.length;this.parent.allowFiltering&&"filterbar"===this.parent.filterSettings.type&&(this.matrix.rows=++this.matrix.rows,e[0].cells.forEach(function(e,r){return t.matrix.set(i,r,e.visible&&!1!==e.column.allowFiltering)}))},i.prototype.getInfo=function(){return{isContent:!1,isHeader:!0}},i.prototype.validator=function(){return function(){return!0}},i.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=t[1];if(i<0||r<0)return!0;var n=this.parent.getHeaderTable().rows[i].cells[r];return"enter"!==e.action||!n.classList.contains("e-headercell")},i}(Mi),Fi=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ai=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Ni=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Fi(i,e),Ai([t.Property(12)],i.prototype,"pageSize",void 0),Ai([t.Property(8)],i.prototype,"pageCount",void 0),Ai([t.Property(1)],i.prototype,"currentPage",void 0),Ai([t.Property()],i.prototype,"totalRecordsCount",void 0),Ai([t.Property(!1)],i.prototype,"enableQueryString",void 0),Ai([t.Property(!1)],i.prototype,"pageSizes",void 0),Ai([t.Property(null)],i.prototype,"template",void 0),i}(t.ChildProperty),Bi=function(){function i(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.persistSelection=!1,this.selectedRowState={},this.isBatchEdit=!1,this.prevKey=0,this.totalRecordsCount=0,this.isChkAll=!1,this.isUnChkAll=!1,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.selectionRequest=!1,this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener()}return i.prototype.initializeSelection=function(){t.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this)},i.prototype.onActionBegin=function(e,t){this.parent.trigger(t,e)},i.prototype.onActionComplete=function(e,t){this.parent.trigger(t,e)},i.prototype.getModuleName=function(){return"selection"},i.prototype.destroy=function(){this.hidePopUp(),this.clearSelection(),this.removeEventListener(),t.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler)},i.prototype.isEditing=function(){return("inline"===this.parent.editSettings.mode||"batch"===this.parent.editSettings.mode&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.persistSelection},i.prototype.selectRow=function(e,t){var i=this.parent,r=i.getRowByIndex(e),n=i.getCurrentViewRecords()[e];if(this.isRowType()&&r&&!this.isEditing()){var o=r.hasAttribute("aria-selected");(t=t?e===this.prevRowIndex&&o:t)||this.onActionBegin({data:n,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,target:this.target},re),this.clearRow(),t||(this.updateRowSelection(r,e),this.parent.selectedRowIndex=e),this.updateRowProps(e),t||this.onActionComplete({data:n,rowIndex:e,row:r,previousRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,target:this.target},ne)}},i.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.parent.selectedRowIndex=t},i.prototype.selectRows=function(e){var t=this.parent,i=t.getRowByIndex(e[0]),r=t.getCurrentViewRecords()[e[0]];if(!this.isSingleSel()&&this.isRowType()&&!this.isEditing()){this.onActionBegin({rowIndexes:e,row:i,rowIndex:e[0],target:this.target,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:r},re),this.clearRow();for(var n=0,o=e;n<o.length;n++){var s=o[n];this.updateRowSelection(t.getRowByIndex(s),s)}this.updateRowProps(e[0]),this.onActionComplete({rowIndexes:e,row:i,rowIndex:e[0],target:this.target,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:r},ne)}},i.prototype.addRowsToSelection=function(e){var t=this.parent,i=t.getRowByIndex(e[0]);if(!this.isSingleSel()&&this.isRowType()&&!this.isEditing())for(var r=0,n=e;r<n.length;r++){var o=n[r],s=t.getCurrentViewRecords()[o],l=this.selectedRowIndexes.indexOf(o)>-1;t.selectedRowIndex=o,l?(this.rowDeselect(oe,[o],s,[i]),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(o),1),this.selectedRecords.splice(this.selectedRecords.indexOf(i),1),i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(oe,[o],s,[i])):(this.onActionBegin({data:s,rowIndex:o,row:i,target:this.target,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest},re),this.updateRowSelection(i,o)),this.updateRowProps(o),l||this.onActionComplete({data:s,rowIndex:o,row:i,target:this.target,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex},ne)}},i.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],r=e<t?{i:e,max:t}:{i:t,max:e},n=r.i,o=r.max;n<=o;n++)i.push(n);return e>t&&i.reverse(),i},i.prototype.clearRow=function(){this.clearRowSelection(),this.selectedRowIndexes=[],this.selectedRecords=[],this.parent.selectedRowIndex=-1,"single"===this.selectionSettings.type&&this.persistSelection&&(this.selectedRowState={})},i.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},i.prototype.updatePersistCollection=function(e,i){if(this.persistSelection&&!t.isNullOrUndefined(e)){var r=this.parent.getRowObjectFromUID(e.getAttribute("data-uid")),n=r?r.data[this.primaryKey]:null;if(null===n)return;r.isSelected=i,i?(this.selectedRowState[n]=i,this.selectionRequest&&this.persistSelectedData.indexOf(r.data)<0&&this.persistSelectedData.push(r.data)):(delete this.selectedRowState[n],this.selectionRequest&&this.persistSelectedData.indexOf(r.data)>=0&&this.persistSelectedData.splice(this.persistSelectedData.indexOf(r.data),1))}},i.prototype.updateCheckBoxes=function(e,i){if(!t.isNullOrUndefined(e)){var r=e.querySelector(".e-checkselect");t.isNullOrUndefined(r)||(V(r.nextElementSibling,i),(t.isNullOrUndefined(this.checkedTarget)||!t.isNullOrUndefined(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState())}},i.prototype.updateRowSelection=function(e,t){if(e&&(this.selectedRowIndexes.push(t),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus)){var i=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide)");if(!i)return;this.focus.onClick({target:i},!0)}},i.prototype.clearSelection=function(){if(!this.persistSelection||this.persistSelection&&!this.parent.isEdit||!t.isNullOrUndefined(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.clearRowSelection(),this.clearCellSelection(),this.enableSelectMultiTouch=!1}},i.prototype.clearRowSelection=function(){if(this.isRowSelected){this.parent.getDataRows();for(var e=[],t=[],i=[],r=this.parent.getCurrentViewRecords(),n=0,o=this.selectedRowIndexes.length;n<o;n++)e.push(r[this.selectedRowIndexes[n]]),t.push(this.parent.getRows()[this.selectedRowIndexes[n]]),i.push(this.selectedRowIndexes[n]);this.rowDeselect(oe,i,e,t);for(n=0,o=this.selectedRowIndexes.length;n<o;n++){var s=this.parent.getRowByIndex(this.selectedRowIndexes[n]);s&&s.removeAttribute("aria-selected"),this.addRemoveClassesForRow(s,!1,!0,"e-selectionbackground","e-active"),this.updatePersistCollection(s,!1),this.updateCheckBoxes(s)}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.parent.selectedRowIndex=void 0,this.rowDeselect(se,i,e,t)}},i.prototype.rowDeselect=function(e,t,i,r){this.updatePersistCollection(r[0],!1),this.parent.trigger(e,{rowIndex:t,data:i,row:r}),this.updateCheckBoxes(r[0])},i.prototype.selectCell=function(e,i){if(this.isCellType()){var r=this.parent,n=r.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex));this.currentIndex=e.rowIndex;var o=r.getCurrentViewRecords()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var s=n.classList.contains("e-cellselectionbackground");(i=i?!(!t.isUndefined(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&s):i)&&this.onActionBegin({data:o,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?r.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},le),this.clearCell(),i&&this.updateCellSelection(n,e.rowIndex,e.cellIndex),this.updateCellProps(e,e),i&&this.onActionComplete({data:o,cellIndex:e,currentCell:n,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?r.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},ae)}}},i.prototype.selectCellsByRange=function(e,t){if(this.isCellType()){var i,r,n,o=this.parent,s=o.getCellFromIndex(e.rowIndex,e.cellIndex),l=e,a=t=t||e;this.currentIndex=e.rowIndex;var c=o.getCurrentViewRecords()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){if(this.onActionBegin({data:c,cellIndex:e,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?o.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},le),this.clearCell(),e.rowIndex>t.rowIndex){var p=e;e=t,t=p}for(var d=e.rowIndex;d<=t.rowIndex;d++){"box"!==this.selectionSettings.cellSelectionMode?(i=d===e.rowIndex?e.cellIndex:0,r=d===t.rowIndex?t.cellIndex:this.getLastColIndex(d)):(i=e.cellIndex,r=t.cellIndex),n=[];for(var h=i<r?i:r,u=i>r?i:r;h<=u;h++)(s=o.getCellFromIndex(d,h))&&(n.push(h),this.updateCellSelection(s),this.addAttribute(s));this.selectedRowCellIndexes.push({rowIndex:d,cellIndexes:n})}this.updateCellProps(l,a),this.onActionComplete({data:c,cellIndex:e,currentCell:s,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?o.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},ae)}}},i.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]);this.currentIndex=e[0].rowIndex;var r=t.getCurrentViewRecords()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.onActionBegin({data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},le);for(var n=0,o=e.length;n<o;n++)for(var s=0,l=e[n].cellIndexes.length;s<l;s++)(i=t.getCellFromIndex(e[n].rowIndex,e[n].cellIndexes[s]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[n].rowIndex,cellIndex:e[n].cellIndexes[s]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]}),this.onActionComplete({data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},ae)}}},i.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,i=this.parent,r=i.getCellFromIndex(e[0].rowIndex,this.getColIndex(e[0].rowIndex,e[0].cellIndex));this.currentIndex=e[0].rowIndex;var n=i.getCurrentViewRecords()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing())for(var o=0,s=e;o<s.length;o++){for(var l=s[o],a=0,c=this.selectedRowCellIndexes.length;a<c;a++)if(this.selectedRowCellIndexes[a].rowIndex===l.rowIndex){t=a;break}var p={data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,previousRowCellIndex:this.prevECIdxs,currentCell:r,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},d=t>-1;if(d){var h=this.selectedRowCellIndexes[t].cellIndexes;h.indexOf(l.cellIndex)>-1?(this.cellDeselect(ce,[{rowIndex:l.rowIndex,cellIndexes:[l.cellIndex]}],n,[r]),h.splice(h.indexOf(l.cellIndex),1),r.classList.remove("e-cellselectionbackground"),r.removeAttribute("aria-selected"),this.cellDeselect(pe,[{rowIndex:l.rowIndex,cellIndexes:[l.cellIndex]}],n,[r])):(d=!1,this.onActionBegin(p,le),this.addRowCellIndex({rowIndex:l.rowIndex,cellIndex:l.cellIndex}),this.updateCellSelection(r),this.addAttribute(r))}else this.onActionBegin(p,le),this.updateCellSelection(r,l.rowIndex,l.cellIndex);this.updateCellProps(l,l),d||this.onActionComplete({data:n,cellIndex:e[0],currentCell:r,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,previousRowCellIndex:this.prevECIdxs,selectedRowCellIndex:this.selectedRowCellIndexes},ae)}}},i.prototype.getColIndex=function(e,t){for(var i=this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell"),r=0;r<i.length;r++){if(parseInt(i[r].getAttribute("aria-colindex"),10)===t)return r}return-1},i.prototype.getLastColIndex=function(e){var t=this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("aria-colindex"),10)},i.prototype.clearCell=function(){this.clearCellSelection()},i.prototype.cellDeselect=function(e,i,r,n){n[0]&&n[0].classList.contains("e-gridchkbox")&&this.updateCheckBoxes(t.closest(n[0],"tr")),this.parent.trigger(e,{cells:n,data:r,cellIndexes:i})},i.prototype.updateCellSelection=function(e,i,r){t.isNullOrUndefined(i)||this.addRowCellIndex({rowIndex:i,cellIndex:r}),e.classList.add("e-cellselectionbackground"),e.classList.contains("e-gridchkbox")&&this.updateCheckBoxes(t.closest(e,"tr"),!0),this.addAttribute(e)},i.prototype.addAttribute=function(e){this.target=e,t.isNullOrUndefined(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},i.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},i.prototype.addRowCellIndex=function(e){for(var t,i,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[r].rowIndex===e.rowIndex){t=!0,i=r;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},i.prototype.clearCellSelection=function(){if(this.isCellSelected){for(var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,r=[],n=[],o=e.getCurrentViewRecords(),s=0,l=i.length;s<l;s++){r.push(o[i[s].rowIndex]);for(var a=0,c=i.length;a<c;a++)n.push(this.parent.getCellFromIndex(i[s].rowIndex,i[s].cellIndexes[a]))}this.cellDeselect(ce,i,r,n);for(s=0,l=t.length;s<l;s++)t[s].classList.remove("e-cellselectionbackground"),t[s].removeAttribute("aria-selected");this.selectedRowCellIndexes=[],this.isCellSelected=!1,this.cellDeselect(pe,i,r,n)}},i.prototype.getSelectedCellsElement=function(){for(var e=this.parent.getDataRows(),t=[],i=0,r=e.length;i<r;i++)t=t.concat([].slice.call(e[i].querySelectorAll(".e-cellselectionbackground")));return t},i.prototype.mouseMoveHandler=function(e){e.preventDefault();var i,r=this.parent.element.getBoundingClientRect(),n=this.x,o=this.y,s=R(e),l=s.x-r.left,a=s.y-r.top,c=t.closest(e.target,"tr");if(this.isDragged=!0,c||(c=t.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),n>l&&(i=l,l=n,n=i),o>a&&(i=a,a=o,o=i),this.element.style.left=n+"px",this.element.style.top=o+"px",this.element.style.width=l-n+"px",this.element.style.height=a-o+"px",c&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(c.getAttribute("aria-rowindex"),10);this.selectRowsByRange(this.startIndex,p)}},i.prototype.mouseUpHandler=function(e){document.body.classList.remove("e-disableuserselect"),t.remove(this.element),t.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),t.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler),this.isDragged=!1},i.prototype.mouseDownHandler=function(e){var i=e.target,r=b(i,"e-grid");if((!r||r.id===this.parent.element.id)&&((e.shiftKey||e.ctrlKey)&&e.preventDefault(),this.parent.allowRowDragAndDrop&&i.classList.contains("e-rowcell")&&!e.shiftKey&&!e.ctrlKey)){if(!this.isRowType()||this.isSingleSel()||t.closest(i,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);document.body.classList.add("e-disableuserselect");var n=t.closest(e.target,"tr"),o=this.parent.element.getBoundingClientRect(),s=R(e);this.startIndex=parseInt(n.getAttribute("aria-rowindex"),10),this.x=s.x-o.left,this.y=s.y-o.top,this.element=t.createElement("div",{className:"e-griddragarea"}),this.parent.getContent().appendChild(this.element),t.EventHandler.add(this.parent.getContent(),"mousemove",this.mouseMoveHandler,this),t.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this)}},i.prototype.clearSelAfterRefresh=function(e){"virtualscroll"===e.requestType||this.persistSelection||this.clearSelection()},i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Le,this.initializeSelection,this),this.parent.on(Ye,this.onActionComplete,this),this.parent.on(Je,this.onActionComplete,this),this.parent.on(He,this.onPropertyChanged,this),this.parent.on(tt,this.clickHandler,this),this.parent.on(Ze,this.onCellFocused,this),this.parent.on(Fe,this.dataReady,this),this.parent.on(Fe,this.clearSelAfterRefresh,this),this.parent.on(st,this.clearSelection,this),this.parent.on(Ae,this.initialEnd,this),this.parent.addEventListener(ie,this.onDataBound.bind(this)),this.parent.addEventListener(Z,this.actionBegin.bind(this)),this.parent.addEventListener(ee,this.actionComplete.bind(this)),this.parent.on(at,this.rowsRemoved,this))},i.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Le,this.initializeSelection),this.parent.off(Ye,this.onActionComplete),this.parent.off(Je,this.onActionComplete),this.parent.off(He,this.onPropertyChanged),this.parent.off(tt,this.clickHandler),this.parent.off(Ze,this.onCellFocused),this.parent.off(Fe,this.dataReady),this.parent.off(Fe,this.clearSelAfterRefresh),this.parent.off(st,this.clearSelection),this.parent.removeEventListener(ie,this.onDataBound),this.parent.removeEventListener(Z,this.actionBegin),this.parent.removeEventListener(ee,this.actionComplete),this.parent.off(at,this.rowsRemoved))},i.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()},i.prototype.dataReady=function(e){"virtualscroll"===e.requestType||this.persistSelection||this.clearSelection()},i.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.parent;t.isNullOrUndefined(e.properties.type)||"single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&this.clearCellSelection(),this.selectedRowIndexes.length>1&&this.clearRowSelection(),this.enableSelectMultiTouch=!1,this.hidePopUp()),t.isNullOrUndefined(e.properties.mode)&&t.isNullOrUndefined(e.properties.cellSelectionMode)||this.clearSelection(),this.checkBoxSelectionChanged()}},i.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},i.prototype.initialEnd=function(){this.parent.off(Ae,this.initialEnd),this.selectRow(this.parent.selectedRowIndex),this.checkBoxSelectionChanged()},i.prototype.checkBoxSelectionChanged=function(){for(var e=!1,i=0,n=this.parent.columns;i<n.length;i++){var o=n[i];if("checkbox"===o.type){this.isChkSelection=!0,this.parent.selectionSettings.type="multiple",this.chkField=o.field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,t.isNullOrUndefined(this.totalRecordsCount)&&(this.totalRecordsCount=this.parent.getCurrentViewRecords().length),this.chkAllBox=this.parent.element.querySelector(".e-checkselectall"),this.chkAllObj=this.chkAllBox,e=!0,this.parent.element.classList.add("e-checkboxselection");break}}if(e||(this.isChkSelection=!1,this.chkField="",this.chkAllBox=this.chkAllObj=null,this.parent.element.classList.remove("e-checkboxselection")),this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0){if(this.persistSelection=!0,this.parent.element.classList.add("e-persistselection"),this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!this.parent.enableVirtualization&&this.chkField&&0===Object.keys(this.selectedRowState).length){var s=this.parent.getDataModule(),l=(new r.Query).where(this.chkField,"equal",!0),a=s.getData({},l),c=this;this.parent.showSpinner(),a.then(function(e){c.dataSuccess(e.result),c.refreshPersistSelection(),c.parent.hideSpinner()})}}else this.persistSelection=!1,this.parent.element.classList.remove("e-persistselection"),this.selectedRowState={}},i.prototype.dataSuccess=function(e){for(var i=0;i<e.length;i++)t.isNullOrUndefined(this.selectedRowState[e[i][this.primaryKey]])&&e[i][this.chkField]&&(this.selectedRowState[e[i][this.primaryKey]]=e[i][this.chkField]);this.persistSelectedData=e},i.prototype.refreshPersistSelection=function(){this.chkAllBox=this.parent.element.querySelector(".e-checkselectall"),this.chkAllObj=this.chkAllBox;var e=this.parent.getRows();if(e.length>0&&(this.persistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var r=this.parent.getRowObjectFromUID(e[i].getAttribute("data-uid")),n=r?r.data[this.primaryKey]:null;if(null===n)return;var o=void 0,s=e[i].querySelector(".e-checkselect");this.selectedRowState[n]||this.isChkAll&&this.chkAllCollec.indexOf(n)<0||this.isUnChkAll&&this.chkAllCollec.indexOf(n)>0||!this.isChkAll&&!this.isUnChkAll&&this.chkField&&r.data[this.chkField]&&s.checked?(t.push(parseInt(e[i].getAttribute("aria-rowindex"),10)),o=!0):(o=!1,this.checkedTarget!==s&&this.isChkSelection&&V(s.nextElementSibling,o)),this.updatePersistCollection(e[i],o)}"multiple"===this.selectionSettings.type?this.selectRows(t):(this.clearSelection(),t.length>0&&this.selectRow(t[0],!0))}this.isChkSelection&&this.setCheckAllState()},i.prototype.actionBegin=function(e){if("save"===e.requestType&&this.persistSelection){var i=this.parent.element.querySelector(".e-edit-checkselect");if(!t.isNullOrUndefined(i)){var r=t.closest(i,".e-editedrow");if(r){"dialog"===this.parent.editSettings.mode&&(r=this.parent.element.querySelector(".e-dlgeditrow"));var n=this.parent.getRowObjectFromUID(r.getAttribute("data-uid"));if(!n)return;this.selectedRowState[n.data[this.primaryKey]]=n.isSelected=i.checked}else this.isCheckedOnAdd=i.checked}}},i.prototype.actionComplete=function(e){if("save"===e.requestType&&this.persistSelection){if("add"===e.action&&this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}},i.prototype.onDataBound=function(){if(this.persistSelection||this.chkField){if(this.parent.enableVirtualization){var e=this.parent.getCurrentViewRecords();this.dataSuccess(e)}this.refreshPersistSelection()}},i.prototype.checkSelectAllAction=function(e){var i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.chkAllBox,e?(this.selectRowsByRange(0,this.parent.getCurrentViewRecords().length),this.isChkAll=!0,this.isUnChkAll=!1):(this.clearSelection(),this.isUnChkAll=!0,this.isChkAll=!1),this.chkAllCollec=[],this.persistSelection){for(var r=this.parent.getRows(),n=0;n<r.length;n++)this.updatePersistCollection(r[n],e);this.isUnChkAll&&(this.selectedRowState={},this.persistSelectedData=[])}if(!t.isNullOrUndefined(i)){V(i.querySelector(".e-edit-checkselect").nextElementSibling,e)}},i.prototype.checkSelectAll=function(e){var t=e.nextElementSibling.classList.contains("e-check");this.checkSelectAllAction(!t),this.target=null,this.setCheckAllState(),this.triggerChkChangeEvent(e,!t)},i.prototype.checkSelect=function(e){var i=t.closest(this.checkedTarget,".e-rowcell");this.isMultiCtrlRequest=!0;var r=parseInt(i.parentElement.getAttribute("aria-rowindex"),10);this.persistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++r,this.rowCellSelectionHandler(r,parseInt(i.getAttribute("aria-colindex"),10)),this.moveIntoUncheckCollection(t.closest(i,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},i.prototype.moveIntoUncheckCollection=function(e){if(this.isChkAll||this.isUnChkAll){var t=this.parent.getRowObjectFromUID(e.getAttribute("data-uid")),i=t?t.data[this.primaryKey]:null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},i.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger(De,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},i.prototype.setCheckAllState=function(){if(this.isChkSelection){var e=Object.keys(this.selectedRowState).length;this.persistSelection||(e=this.selectedRecords.length,this.totalRecordsCount=this.parent.getCurrentViewRecords().length);var i=this.chkAllBox.nextElementSibling;t.removeClass([i],["e-check","e-stop","e-uncheck"]),e===this.totalRecordsCount||this.persistSelection&&this.parent.allowPaging&&this.isChkAll&&0===this.chkAllCollec.length?t.addClass([i],["e-check"]):0===e||0===this.parent.getCurrentViewRecords().length?t.addClass([i],["e-uncheck"]):t.addClass([i],["e-stop"])}},i.prototype.clickHandler=function(e){var i=e.target;this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);var r=!1;this.preventFocus=!0;var n;this.selectionRequest=!0;var o=b(i,"e-checkbox-wrapper");if(o&&o.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=i=o.querySelector('input[type="checkbox"]'),r=!0),i&&i.classList.contains("e-rowcell")&&!this.parent.selectionSettings.checkboxOnly||r){if(this.isChkSelection&&(this.isMultiCtrlRequest=!0),this.target=i,t.isNullOrUndefined(n)){var s=parseInt(i.parentElement.getAttribute("aria-rowindex"),10);this.persistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++s,this.rowCellSelectionHandler(s,parseInt(i.getAttribute("aria-colindex"),10)),this.isChkSelection&&(this.moveIntoUncheckCollection(t.closest(i,".e-row")),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):(this.checkSelect(n),this.target=t.closest(i,".e-rowcell"));!this.isChkSelection&&t.Browser.isDevice&&"multiple"===this.parent.selectionSettings.type&&this.showPopup(e)}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,this.selectionRequest=!1,this.preventFocus=!1},i.prototype.popUpClickHandler=function(e){var i=e.target;t.closest(i,".e-headercell")||e.target.classList.contains("e-rowcell")||t.closest(i,".e-gridpopup")?i.classList.contains("e-rowselect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},i.prototype.showPopup=function(e){C(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+("multiple"===this.selectionSettings.type&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},i.prototype.rowCellSelectionHandler=function(e,i){this.isMultiCtrlRequest||this.isMultiShiftRequest?this.isMultiShiftRequest?(this.selectRowsByRange(t.isUndefined(this.prevRowIndex)?e:this.prevRowIndex,e),this.selectCellsByRange(t.isUndefined(this.prevCIdxs)?{rowIndex:e,cellIndex:i}:this.prevCIdxs,{rowIndex:e,cellIndex:i})):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:i}])):(this.isDragged||this.selectRow(e,!0),this.selectCell({rowIndex:e,cellIndex:i},!0)),this.isDragged=!1},i.prototype.onCellFocused=function(e){var t=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action),i=e.container.isHeader&&!(e.byKey&&"space"===e.keyArgs.action);if(e.byKey&&!t){var r=e.container.isContent?e.container.indexes:e.indexes,n=r[0],o=r[1],s=this.focus.getPrevIndexes();if(!(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&n===s.rowIndex&&o===s.cellIndex)){switch(this.preventFocus=!0,e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.applyDownUpKey(n,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(n,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(n,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(n,o);break;case"home":case"end":this.applyHomeEndKey(n,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(n,o);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.selectionRequest=!0;var l=e.element;l.classList.contains("e-checkselectall")?(this.checkedTarget=l,this.checkSelectAll(this.checkedTarget)):l.classList.contains("e-checkselect")&&(this.checkedTarget=l,this.checkSelect(this.checkedTarget)),this.selectionRequest=!1}this.preventFocus=!1}}else t&&this.clearSelection()},i.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.parent.getRows().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},i.prototype.applyDownUpKey=function(e,t){var i=this.parent;this.isChkSelection&&this.isChkAll&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},i.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute("aria-colindex"),10);this.target=this.contentRenderer.getRowByIndex(e).querySelectorAll(".e-rowcell")[t],this.addAttribute(this.target)}},i.prototype.applyRightLeftKey=function(e,t){this.parent;this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},i.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},i.prototype.shiftDownKey=function(e,i){this.parent;this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(t.isUndefined(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:i}),this.isMultiShiftRequest=!1},i.prototype.applyShiftLeftRightKey=function(e,t){this.parent;this.isMultiShiftRequest=!0,this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},i.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},i.prototype.addRemoveClassesForRow=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var o=[].slice.call(e.querySelectorAll(".e-rowcell")),s=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand");s&&o.push(s),H.apply(void 0,[o,t].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},i.prototype.isRowType=function(){return"row"===this.selectionSettings.mode||"both"===this.selectionSettings.mode},i.prototype.isCellType=function(){return"cell"===this.selectionSettings.mode||"both"===this.selectionSettings.mode},i.prototype.isSingleSel=function(){return"single"===this.selectionSettings.type},i.prototype.getRenderer=function(){return t.isNullOrUndefined(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(e.RenderType.Content)),this.contentRenderer},i.prototype.getSelectedRecords=function(){return this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data})},i}(),Hi=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.search=function(e){var t=this.parent;F(t)?t.notify(St,{instance:this,handler:this.search,arg1:e}):(e=e.toLowerCase())!==t.searchSettings.key&&(t.searchSettings.key=e,t.dataBind())},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(He,this.onPropertyChanged,this),this.parent.on(Ge,this.onActionComplete,this),this.parent.on(it,this.destroy,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(He,this.onPropertyChanged),this.parent.off(Ge,this.onActionComplete),this.parent.off(it,this.destroy))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(t.isNullOrUndefined(e.properties.key)?this.parent.notify(qe,{requestType:"searching",type:Z}):this.parent.notify(qe,{requestType:"searching",type:Z,searchString:this.parent.searchSettings.key}))},e.prototype.onActionComplete=function(e){this.parent.trigger(ee,t.extend(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:ee}))},e.prototype.getModuleName=function(){return"search"},e}(),qi=function(){function e(e){this.parent=e}return e.prototype.show=function(e,t){if(!this.batchChanges(this.show,e,t)){var i=this.getToggleFields(e),r=this.getColumns(i,t);r.forEach(function(e){e.visible=!0}),this.setVisible(r)}},e.prototype.hide=function(e,t){if(!this.batchChanges(this.hide,e,t)){var i=this.getToggleFields(e),r=this.getColumns(i,t);r.forEach(function(e){e.visible=!1}),this.setVisible(r)}},e.prototype.batchChanges=function(e,t,i){return!!F(this.parent)&&(this.parent.notify(St,{instance:this,handler:e,arg1:t,arg2:i}),!0)},e.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},e.prototype.getColumns=function(e,t){var i=this;return g(e,function(e,r){return g(i.parent.getColumns(),function(i,r){if(i[t]===e)return i})[0]})},e.prototype.setVisible=function(e){e=t.isNullOrUndefined(e)?this.parent.getColumns():e,this.parent.notify(rt,e)},e}(),ji=function(){function e(e){this.lastScrollTop=0,this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Di(e),this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(){this.parent.element.style.width=t.formatUnit(this.parent.width),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},e.prototype.setHeight=function(){var e=0,i=this.parent.getContent().firstChild;this.parent.frozenRows?(e=this.parent.getHeaderContent().querySelector("tbody").offsetHeight,i.style.height=t.formatUnit(this.parent.height-e)):i.style.height=t.formatUnit(this.parent.height),this.ensureOverflow(i)},e.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),i=e.getScrollBarWidth()-this.getThreshold(),r=this.getCssProperties();t.firstChild.style[r.border]=i>0?"1px":"0px",t.style[r.padding]=i>0?i+"px":"0px"},e.prototype.removePadding=function(e){var t=this.getCssProperties(e);this.parent.getHeaderContent().firstChild.style[t.border]="",this.parent.getHeaderContent().firstChild.parentElement.style[t.padding]=""},e.prototype.refresh=function(){if("100%"===this.parent.height){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===t.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Be,this.wireEvents,this),this.parent.on(Ae,this.wireEvents,this),this.parent.on(Ne,this.onPropertyChanged,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Be,this.wireEvents),this.parent.off(Ae,this.wireEvents),this.parent.off(Ne,this.onPropertyChanged))},e.prototype.onContentScroll=function(e){var t=this,i=e,r=i.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")){var n=e.target,o=n.scrollLeft,s=(n.scrollWidth,n.classList.contains("e-summarycontent"));t.previousValues.left!==o?(i.scrollLeft=o,s&&(t.header.scrollLeft=o),t.previousValues.left=o,t.parent.notify(nt,{left:o})):t.previousValues.top=r?n.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var r=e.target.scrollTop;t.previousValues.top!==r&&(i.scrollTop=r,t.previousValues.top=r,t.parent.isDestroyed)}}},e.prototype.onWheelScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var r=i.scrollTop+e.deltaMode===1?30*e.deltaY:e.deltaY;t.previousValues.top!==r&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=r,i.scrollTop=r,t.previousValues.top=r)}}},e.prototype.onTouchScroll=function(e){var t=this,i=e;return function(e){if("mouse"!==e.pointerType){var r,n,o=t.getPointXY(e),s=i.scrollTop+(t.pageXY.y-o.y),l=i.scrollLeft+(t.pageXY.x-o.x);if(t.parent.getHeaderContent().contains(e.target)){if(n=t.parent.frozenColumns?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().firstChild,t.previousValues.left===l||l<0||n.scrollWidth-n.clientWidth<l)return;e.preventDefault(),n.scrollLeft=l,i.scrollLeft=l,t.pageXY.x=o.x,t.previousValues.left=l}else{if(r=t.parent.getContent().querySelector(".e-frozencontent"),t.previousValues.top===s||s<0||r.scrollHeight-r.clientHeight<s)return;e.preventDefault(),r.scrollTop=s,i.scrollTop=s,t.pageXY.y=o.y,t.previousValues.top=s}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){if(this.oneTimeReady){this.content=this.parent.getContent().firstChild,this.header=this.parent.getHeaderContent().firstChild;var e=this.content.querySelector(".e-movablecontent"),i=this.content.querySelector(".e-frozencontent"),r=this.header.querySelector(".e-movableheader");this.parent.frozenRows&&(t.EventHandler.add(this.parent.frozenColumns?r:this.header,"touchstart pointerdown",this.setPageXY(),this),t.EventHandler.add(this.parent.frozenColumns?r:this.header,"touchmove pointermove",this.onTouchScroll(this.parent.frozenColumns?e:this.content),this)),this.parent.frozenColumns?(t.EventHandler.add(e,"scroll",this.onContentScroll(r),this),t.EventHandler.add(e,"scroll",this.onFreezeContentScroll(i),this),t.EventHandler.add(i,"scroll",this.onFreezeContentScroll(e),this),t.EventHandler.add(r,"scroll",this.onContentScroll(e),this),t.EventHandler.add(i,"wheel",this.onWheelScroll(e),this),t.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),t.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(e),this)):(t.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),t.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&t.EventHandler.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.refresh(),this.oneTimeReady=!1}var n=this.parent.getContentTable();n.scrollHeight<this.parent.getContent().clientHeight&&(t.addClass(n.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.frozenColumns&&t.addClass(this.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),this.parent.enableVirtualization||(this.content.scrollLeft=this.header.scrollLeft,this.content.scrollTop=this.previousValues.top),this.parent.enableColumnVirtualization||(this.content.scrollLeft=this.header.scrollLeft)},e.prototype.getCssProperties=function(e){var i={},r=t.isNullOrUndefined(e)?this.parent.enableRtl:e;return i.border=r?"borderLeftWidth":"borderRightWidth",i.padding=r?"paddingLeft":"paddingRight",i},e.prototype.ensureOverflow=function(e){this.parent.frozenColumns?e.querySelector(".e-movablecontent").style.overflowY="auto"===this.parent.height?"auto":"scroll":e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth())},e.prototype.destroy=function(){this.removeEventListener(),this.removePadding(),t.removeClass([this.parent.getHeaderContent().firstChild],"e-headercontent"),t.removeClass([this.parent.getContent().firstChild],"e-content"),this.parent.getContent().firstChild.style.height="",this.parent.element.style.width="",t.EventHandler.remove(this.parent.getContent().firstChild,"scroll",this.onContentScroll)},e.getScrollBarWidth=function(){return P()},e}(),zi=function(){function e(e,t){this.parent=e,this.parent.isDestroyed||(this.parent.on(Ae,this.contentReady.bind(this)),this.scrollModule=t)}return e.prototype.print=function(){var e=this.parent;this.isPrinting=!0,this.element=e.element.cloneNode(!0),this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),e.allowPaging?"currentpage"===e.printMode?(this.element.querySelector(".e-gridpager").style.display="none",this.contentReady()):(this.isPagerDisabled=!0,e.allowPaging=!1,e.dataBind()):this.contentReady()},e.prototype.contentReady=function(){var e=this.parent;if(this.isPrinting){if(this.isPagerDisabled&&(this.element=e.element.cloneNode(!0),this.isPagerDisabled=!1,e.allowPaging=!0),"auto"!==e.height){var i=this.scrollModule.getCssProperties(),r=this.element.querySelector(".e-content"),n=this.element.querySelector(".e-gridheader");r.style.height="auto",r.style.overflowY="auto",n.style[i.padding]="",n.firstElementChild.style[i.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?(this.removeColGroup(e.groupSettings.columns.length),T(this.element,".e-grouptopleftcell"),T(this.element,".e-recordpluscollapse"),T(this.element,".e-indentcell"),T(this.element,".e-recordplusexpand")):this.element.querySelector(".e-groupdroparea").style.display="none"),e.toolbar&&(this.element.querySelector(".e-toolbar").style.display="none"),e.allowFiltering&&"filterbar"===e.filterSettings.type&&(this.element.querySelector(".e-filterbar").style.display="none"),e.allowSelection&&(t.removeClass(this.element.querySelectorAll(".e-active"),"e-active"),t.removeClass(this.element.querySelectorAll(".e-cellselection1background"),"e-cellselection1background"));var o={requestType:"print",element:this.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]')};e.trigger("beforePrint",o),t.print(this.element,this.printWindow),this.isPrinting=!1,e.trigger(ye,o)}},e.prototype.removeColGroup=function(e){for(var t=this.element.querySelectorAll(".e-groupcaption"),i=t[e-1].getAttribute("colspan"),r=0;r<t.length;r++)t[r].setAttribute("colspan",i);var n=this.element.querySelectorAll("colgroup");for(r=0;r<n.length;r++)for(var o=0;o<e;o++)n[r].childNodes[o].style.display="none"},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"print"},e}(),Ui=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_i=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Vi=function(i){function r(){var e=null!==i&&i.apply(this,arguments)||this;return e.templateFn={},e}return Ui(r,i),r.prototype.setFormatter=function(){var e=new Q;this.format&&(this.format.skeleton||this.format.format)&&(this.formatFn=e.getFormatFunction(this.format))},r.prototype.getFormatter=function(){return this.formatFn},r.prototype.setTemplate=function(i){void 0===i&&(i={}),void 0!==this.footerTemplate&&(this.templateFn[t.getEnumValue(e.CellType,e.CellType.Summary)]={fn:t.compile(this.footerTemplate,i),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[t.getEnumValue(e.CellType,e.CellType.GroupSummary)]={fn:t.compile(this.groupFooterTemplate,i),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[t.getEnumValue(e.CellType,e.CellType.CaptionSummary)]={fn:t.compile(this.groupCaptionTemplate,i),property:"groupCaptionTemplate"})},r.prototype.getTemplate=function(i){return this.templateFn[t.getEnumValue(e.CellType,i)]},_i([t.Property()],r.prototype,"type",void 0),_i([t.Property()],r.prototype,"field",void 0),_i([t.Property()],r.prototype,"columnName",void 0),_i([t.Property()],r.prototype,"format",void 0),_i([t.Property()],r.prototype,"footerTemplate",void 0),_i([t.Property()],r.prototype,"groupFooterTemplate",void 0),_i([t.Property()],r.prototype,"groupCaptionTemplate",void 0),_i([t.Property()],r.prototype,"customAggregate",void 0),r}(t.ChildProperty),Gi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ui(i,e),_i([t.Collection([],Vi)],i.prototype,"columns",void 0),i}(t.ChildProperty),Wi=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ae,this.initialEnd,this),this.parent.on(et,this.keyDownHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(et,this.keyDownHandler)},e.prototype.initialEnd=function(){this.parent.off(Ae,this.initialEnd),this.clipBoardTextArea=t.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{readonly:"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)},e.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){if(this.clipBoardTextArea.value=this.copyContent="","cell"!==this.parent.selectionSettings.mode){var i=this.parent.getRows(),r=this.parent.getSelectedRowIndexes().sort(function(e,t){return e-t});e&&(this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-headercell")),!1,"\t",e),this.copyContent+="\n");for(var n=0;n<r.length;n++)n>0&&(this.copyContent+="\n"),this.getCopyData([].slice.call(i[r[n]].querySelectorAll(".e-rowcell")),!1,"\t",e)}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e);var o={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",o),o.cancel)return;this.clipBoardTextArea.value=this.copyContent=o.data,t.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,i,r){for(var n=0;n<e.length;n++)r&&t&&(this.copyContent+=this.parent.getVisibleColumns()[parseInt(e[n].getAttribute("aria-colindex"),10)].headerText+"\n"),this.copyContent+=e[n].textContent,n<e.length-1&&(this.copyContent+=i)},e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getModuleName=function(){return"clipboard"},e.prototype.destroy=function(){this.removeEventListener(),t.remove(this.clipBoardTextArea)},e}(),Ki=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qi=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Xi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property()],i.prototype,"field",void 0),Qi([t.Property()],i.prototype,"direction",void 0),i}(t.ChildProperty),Yi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Collection([],Xi)],i.prototype,"columns",void 0),Qi([t.Property(!0)],i.prototype,"allowUnsort",void 0),i}(t.ChildProperty),Ji=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property()],i.prototype,"field",void 0),Qi([t.Property()],i.prototype,"operator",void 0),Qi([t.Property()],i.prototype,"value",void 0),Qi([t.Property()],i.prototype,"matchCase",void 0),Qi([t.Property()],i.prototype,"predicate",void 0),Qi([t.Property({})],i.prototype,"actualFilterValue",void 0),Qi([t.Property({})],i.prototype,"actualOperator",void 0),Qi([t.Property()],i.prototype,"type",void 0),Qi([t.Property()],i.prototype,"ejpredicate",void 0),Qi([t.Property()],i.prototype,"matchcase",void 0),Qi([t.Property()],i.prototype,"ignoreCase",void 0),i}(t.ChildProperty),$i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Collection([],Ji)],i.prototype,"columns",void 0),Qi([t.Property("filterbar")],i.prototype,"type",void 0),Qi([t.Property()],i.prototype,"mode",void 0),Qi([t.Property(!0)],i.prototype,"showFilterBarStatus",void 0),Qi([t.Property(1500)],i.prototype,"immediateModeDelay",void 0),Qi([t.Property()],i.prototype,"operators",void 0),i}(t.ChildProperty),Zi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property("row")],i.prototype,"mode",void 0),Qi([t.Property("flow")],i.prototype,"cellSelectionMode",void 0),Qi([t.Property("single")],i.prototype,"type",void 0),Qi([t.Property(!1)],i.prototype,"checkboxOnly",void 0),Qi([t.Property(!1)],i.prototype,"persistSelection",void 0),i}(t.ChildProperty),er=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property([])],i.prototype,"fields",void 0),Qi([t.Property("")],i.prototype,"key",void 0),Qi([t.Property("contains")],i.prototype,"operator",void 0),Qi([t.Property(!0)],i.prototype,"ignoreCase",void 0),i}(t.ChildProperty),tr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property()],i.prototype,"targetID",void 0),i}(t.ChildProperty),ir=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property("both")],i.prototype,"wrapMode",void 0),i}(t.ChildProperty),rr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property(!0)],i.prototype,"showDropArea",void 0),Qi([t.Property(!1)],i.prototype,"showToggleButton",void 0),Qi([t.Property(!1)],i.prototype,"showGroupedColumn",void 0),Qi([t.Property(!0)],i.prototype,"showUngroupButton",void 0),Qi([t.Property(!1)],i.prototype,"disablePageWiseAggregates",void 0),Qi([t.Property([])],i.prototype,"columns",void 0),Qi([t.Property()],i.prototype,"captionTemplate",void 0),i}(t.ChildProperty),nr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ki(i,e),Qi([t.Property(!1)],i.prototype,"allowAdding",void 0),Qi([t.Property(!1)],i.prototype,"allowEditing",void 0),Qi([t.Property(!1)],i.prototype,"allowDeleting",void 0),Qi([t.Property("normal")],i.prototype,"mode",void 0),Qi([t.Property(!0)],i.prototype,"allowEditOnDblClick",void 0),Qi([t.Property(!0)],i.prototype,"showConfirmDialog",void 0),Qi([t.Property(!1)],i.prototype,"showDeleteConfirmDialog",void 0),i}(t.ChildProperty),or=function(r){function n(e,i){var n=r.call(this,e,i)||this;return n.isInitial=!0,n.sortedColumns=[],n.inViewIndexes=[],n.mediaCol=[],n.isMediaQuery=!1,n.isInitialLoad=!1,n.freezeRefresh=t.Component.prototype.refresh,n.mergeCells={},n.isEdit=!1,n.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},n.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No Matches Found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Auto Fit all columns",autoFit:"Auto Fit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",Columnchooser:"Columns"},n.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H"},t.setValue("mergePersistData",n.mergePersistGridData,n),n}return Ki(n,r),n.prototype.getPersistData=function(){var e=this,t=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex"],i={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[]};return t.forEach(function(t){for(var r=e[t],n=0,o=i[t];n<o.length;n++){delete r[o[n]]}}),this.ignoreInArrays(["filter","edit","filterBarTemplate","headerTemplate","template","commandTemplate","commands"],this.columns),this.addOnPersist(t)},n.prototype.ignoreInArrays=function(e,t){var i=this;t.forEach(function(t){t.columns?(i.ignoreInColumn(e,t),i.ignoreInArrays(e,t.columns)):i.ignoreInColumn(e,t)})},n.prototype.ignoreInColumn=function(e,t){e.forEach(function(e){delete t[e]})},n.prototype.requiredModules=function(){var e=[];return this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.frozenColumns||this.frozenRows)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e),e},n.prototype.extendRequiredModules=function(e){this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]})},n.prototype.preRender=function(){this.serviceLocator=new Ri,this.initializeServices()},n.prototype.render=function(){this.ariaService.setOptions(this.element,{role:"grid"}),i.createSpinner({target:this.element}),this.renderModule=new Ei(this,this.serviceLocator),this.getMediaColumns(),this.searchModule=new Hi(this),this.scrollModule=new ji(this),this.notify(Me,{}),this.trigger("load"),v(this.columns,this.enableColumnVirtualization),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.showSpinner(),this.notify(Le,{})},n.prototype.showSpinner=function(){i.showSpinner(this.element)},n.prototype.hideSpinner=function(){i.hideSpinner(this.element)},n.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!t.isNullOrUndefined(e))for(var i=0;i<e.length;i++)if(!t.isNullOrUndefined(e[i].hideAtMedia)){this.mediaCol.push(e[i]);var r=window.matchMedia(e[i].hideAtMedia);this.mediaQueryUpdate(i,r),r.addListener(this.mediaQueryUpdate.bind(this,i))}}},n.prototype.mediaQueryUpdate=function(e,t){this.isMediaQuery=!0;var i=this.getColumns()[e];i.visible=t.matches,this.isInitialLoad&&(i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText"))},n.prototype.refreshMediaCol=function(){this.isMediaQuery&&(this.refresh(),this.isMediaQuery=!1),this.isInitialLoad=!0},n.prototype.eventInitializer=function(){},n.prototype.destroy=function(){this.unwireEvents(),this.removeListener(),this.notify(it,{}),this.destroyDependentModules(),r.prototype.destroy.call(this),this.element.innerHTML="",t.classList(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device"])},n.prototype.destroyDependentModules=function(){this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy()},n.prototype.getModuleName=function(){return"grid"},n.prototype.onPropertyChanged=function(e,i){var n,o=!1,s=!1;if(!this.isDestroyed){for(var l=0,a=Object.keys(e);l<a.length;l++){var c=a[l];switch(c){case"allowPaging":this.notify(Ne,{module:"pager",enable:this.allowPaging}),o=!0;break;case"pageSettings":this.notify(He,{module:"pager",properties:e.pageSettings}),t.isNullOrUndefined(e.pageSettings.currentPage)&&t.isNullOrUndefined(e.pageSettings.totalRecordsCount)&&(o=!0);break;case"currencyCode":case"locale":r.prototype.refresh.call(this);break;case"allowSorting":this.notify(Ne,{module:"sort",enable:this.allowSorting}),o=!0,n=!0;break;case"allowFiltering":this.notify(Ne,{module:"filter",enable:this.allowFiltering}),o=!0;break;case"height":case"width":this.notify(Ne,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.notify(Ne,{module:"reorder",enable:this.allowReordering}),n=!0;break;case"allowRowDragAndDrop":this.notify(Ne,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop});break;case"rowTemplate":this.rowTemplateFn=f(this.rowTemplate),o=!0;break;case"detailTemplate":this.detailTemplateFn=f(this.detailTemplate),o=!0;break;case"allowGrouping":this.notify(Ne,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),o=!0,n=!0;break;case"childGrid":o=!0;break;case"toolbar":this.notify(Ne,{module:"toolbar"});break;case"groupSettings":t.isNullOrUndefined(e.groupSettings.showDropArea)||(this.headerModule.refreshUI(),o=!0,n=!0),this.notify(He,{module:"group",properties:e.groupSettings});break;case"aggregates":this.notify(Ne,{module:"aggregate",properties:e});break;case"columns":this.updateColumnObject(),s=!0;break;case"frozenColumns":case"frozenRows":this.freezeRefresh();break;default:this.extendedPropertyChange(c,e)}}n&&this.updateDefaultCursor(),s?this.refresh():o&&(this.notify(qe,{requestType:"refresh"}),o=!1)}},n.prototype.extendedPropertyChange=function(e,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=i.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!i.enableRtl),this.scrollModule.setPadding()),this.toolbar&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=i.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=i.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=i.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind());break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"filterSettings":this.notify(He,{module:"filter",properties:i.filterSettings});break;case"searchSettings":this.notify(He,{module:"search",properties:i.searchSettings});break;case"sortSettings":this.notify(He,{module:"sort"});break;case"selectionSettings":this.notify(He,{module:"selection",properties:i.selectionSettings});break;case"editSettings":this.notify(He,{module:"edit",properties:i.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Nt,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":this.notify(dt,{}),this.renderModule.refresh();break;case"enableHover":(i.enableHover?t.addClass:t.removeClass)([this.element],"e-gridhover")}},n.prototype.updateDefaultCursor=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-columnheader"));e<t.length;e++){var i=t[e];this.allowSorting||this.allowGrouping||this.allowReordering?i.classList.remove("e-defaultcursor"):i.classList.add("e-defaultcursor")}},n.prototype.updateColumnModel=function(e){for(var t=0,i=e.length;t<i;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t])},n.prototype.getColumns=function(){var e=this,i=this.inViewIndexes.map(function(t){return t-e.groupSettings.columns.length}).filter(function(e){return e>-1}),r=i.length;this.enableColumnVirtualization&&!t.isNullOrUndefined(this.columnModel)&&0!==this.columnModel.length||(this.columnModel=[],this.updateColumnModel(this.columns));return 0===r?this.columnModel:this.columnModel.slice(i[0],i[r-1]+1)},n.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},n.prototype.getLocaleConstants=function(){return this.defaultLocale},n.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},n.prototype.getVisibleColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var r=i[t];r.visible&&e.push(r)}return e},n.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},n.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},n.prototype.getContentTable=function(){return this.contentModule.getTable()},n.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},n.prototype.getContent=function(){return this.contentModule.getPanel()},n.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},n.prototype.getHeaderTable=function(){return this.headerModule.getTable()},n.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},n.prototype.getFooterContent=function(){return t.isNullOrUndefined(this.footerElement)&&(this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0]),this.footerElement},n.prototype.getFooterContentTable=function(){return t.isNullOrUndefined(this.footerElement)&&(this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0]),this.footerElement.firstChild.firstChild},n.prototype.getPager=function(){return this.gridPager},n.prototype.setGridPager=function(e){this.gridPager=e},n.prototype.getRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},n.prototype.getRows=function(){return this.contentModule.getRowElements()},n.prototype.getRowInfo=function(e){var i=e,r={};if(!t.isNullOrUndefined(e)&&t.isNullOrUndefined(b(i,"e-detailrowcollapse")&&t.isNullOrUndefined(b(i,"e-recordplusexpand")))){var n=t.closest(i,".e-rowcell");if(!t.isNullOrUndefined(n)){var o=parseInt(n.getAttribute("aria-colindex"),10),s=t.closest(n,".e-row"),l=parseInt(s.getAttribute("aria-rowindex"),10),a=this.contentModule.getRows().filter(function(e){return e.uid===s.getAttribute("data-uid")}),c=a[0].data,p=a[0].cells[o].column;r={cell:n,cellIndex:o,row:s,rowIndex:l,rowData:c,column:p}}}return r},n.prototype.getDataRows=function(){for(var e=[].slice.call(this.getContentTable().querySelector("tbody").children),t=[],i=0,r=e.length;i<r;i++)e[i].classList.contains("e-row")&&!e[i].classList.contains("e-hiddenrow")&&t.push(e[i]);return t},n.prototype.getCellFromIndex=function(e,t){return this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},n.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},n.prototype.getRowObjectFromUID=function(e){for(var t=0,i=this.contentModule.getRows();t<i.length;t++){var r=i[t];if(r.uid===e)return r}return null},n.prototype.getRowsObject=function(){return this.contentModule.getRows()},n.prototype.getColumnHeaderByField=function(e){return this.getColumnHeaderByUid(this.getColumnByField(e).uid)},n.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},n.prototype.getColumnByField=function(e){return g(this.getColumns(),function(t,i){if(t.field===e)return t})[0]},n.prototype.getColumnIndexByField=function(e){var i=g(this.getColumns(),function(t,i){if(t.field===e)return i})[0];return t.isNullOrUndefined(i)?-1:i},n.prototype.getColumnByUid=function(e){return g(this.getColumns(),function(t,i){if(t.uid===e)return t})[0]},n.prototype.getColumnIndexByUid=function(e){var i=g(this.getColumns(),function(t,i){if(t.uid===e)return i})[0];return t.isNullOrUndefined(i)?-1:i},n.prototype.getUidByColumnField=function(e){return g(this.getColumns(),function(t,i){if(t.field===e)return t.uid})[0]},n.prototype.getNormalizedColumnIndex=function(e){var t=this.getColumnIndexByUid(e);return this.allowGrouping&&(t+=this.groupSettings.columns.length),this.isDetail()&&t++,t},n.prototype.getColumnFieldNames=function(){for(var e,t=[],i=0,r=this.getColumns().length;i<r;i++)(e=this.getColumns()[i]).visible&&t.push(e.field);return t},n.prototype.getRowTemplate=function(){return this.rowTemplateFn},n.prototype.getDetailTemplate=function(){return this.detailTemplateFn},n.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],t=0,i=this.columns,r=i.length;t<r;t++)i[t].isPrimaryKey&&e.push(i[t].field);return e},n.prototype.refresh=function(){this.headerModule.refreshUI(),this.renderModule.refresh()},n.prototype.refreshHeader=function(){this.headerModule.refreshUI()},n.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},n.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},n.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule.selectedRowCellIndexes},n.prototype.getSelectedRecords=function(){return this.selectionModule.getSelectedRecords()},n.prototype.getDataModule=function(){return this.renderModule.data},n.prototype.showColumns=function(e,t){t=t||"headerText",this.showHider.show(e,t)},n.prototype.hideColumns=function(e,t){t=t||"headerText",this.showHider.hide(e,t)},n.prototype.goToPage=function(e){this.pagerModule.goToPage(e)},n.prototype.updateExternalMessage=function(e){this.pagerModule.updateExternalMessage(e)},n.prototype.sortColumn=function(e,t,i){this.sortModule.sortColumn(e,t,i)},n.prototype.clearSorting=function(){this.sortModule.clearSorting()},n.prototype.removeSortColumn=function(e){this.sortModule.removeSortColumn(e)},n.prototype.filterByColumn=function(e,t,i,r,n,o,s){this.filterModule.filterByColumn(e,t,i,r,n,o,s)},n.prototype.clearFiltering=function(){this.filterModule.clearFiltering()},n.prototype.removeFilteredColsByField=function(e,t){this.filterModule.removeFilteredColsByField(e,t)},n.prototype.selectRow=function(e,t){this.selectionModule.selectRow(e,t)},n.prototype.selectRows=function(e){this.selectionModule.selectRows(e)},n.prototype.clearSelection=function(){this.selectionModule.clearSelection()},n.prototype.selectCell=function(e,t){this.selectionModule.selectCell(e,t)},n.prototype.search=function(e){this.searchModule.search(e)},n.prototype.print=function(){this.printModule.print()},n.prototype.deleteRecord=function(e,t){this.editModule.deleteRecord(e,t)},n.prototype.startEdit=function(){this.editModule.startEdit()},n.prototype.endEdit=function(){this.editModule.endEdit()},n.prototype.closeEdit=function(){this.editModule.closeEdit()},n.prototype.addRecord=function(e){this.editModule.addRecord(e)},n.prototype.deleteRow=function(e){this.editModule.deleteRow(e)},n.prototype.copy=function(e){this.clipboardModule.copy(e)},n.prototype.recalcIndentWidth=function(){if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=[].slice.call(this.getHeaderTable().querySelector("colgroup").childNodes),i=[].slice.call(this.getContentTable().querySelector("colgroup").childNodes),r=e/30,n=0;for(r>=1&&(e=30/r),this.enableColumnVirtualization&&(e=30);n<this.groupSettings.columns.length;)t[n].style.width=e+"px",i[n].style.width=e+"px",this.notify(ot,{index:n,width:e}),n++;this.isDetail()&&(t[n].style.width=e+"px",i[n].style.width=e+"px",this.notify(ot,{index:n,width:e})),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},n.prototype.reorderColumns=function(e,t){this.reorderModule.reorderColumns(e,t)},n.prototype.autoFitColumns=function(e){this.resizeModule.autoFitColumns(e)},n.prototype.createColumnchooser=function(e,t,i){this.columnChooserModule.renderColumnChooser(e,t,i)},n.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Di(this)),this.serviceLocator.register("cellRendererFactory",new Ti),this.serviceLocator.register("rendererFactory",new Ii),this.serviceLocator.register("localization",this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Q(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new qi(this)),this.serviceLocator.register("ariaService",this.ariaService=new oi),this.serviceLocator.register("focus",this.focusModule=new Oi(this))},n.prototype.processModel=function(){var e,i,r=this.groupSettings.columns,n=this.sortSettings.columns;if(this.allowGrouping)for(var o=function(t,o){i=0;for(var l=n.length;i<l;i++)if(n[i].field===r[t]){e=!0;break}if(e?s.allowSorting?s.sortedColumns.push(n[i].field):n[i].direction="ascending":n.push({field:r[t],direction:"ascending"}),!s.groupSettings.showGroupedColumn){(s.enableColumnVirtualization?s.columns.filter(function(e){return e.field===r[t]})[0]:s.getColumnByField(r[t])).visible=!1}},s=this,l=0,a=r.length;l<a;l++)o(l);if(this.rowTemplateFn=f(this.rowTemplate),this.detailTemplateFn=f(this.detailTemplate),!t.isNullOrUndefined(this.parentDetails)){var c=t.isNullOrUndefined(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}},n.prototype.gridRender=function(){this.updateRTL(),this.enableHover&&this.element.classList.add("e-gridhover"),t.Browser.isDevice&&this.element.classList.add("e-device"),t.classList(this.element,["e-responsive","e-default"],[]);var i=this.serviceLocator.getService("rendererFactory");this.headerModule=i.getRenderer(e.RenderType.Header),this.contentModule=i.getRenderer(e.RenderType.Content),this.printModule=new zi(this,this.scrollModule),this.clipboardModule=new Wi(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap()},n.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},n.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},n.prototype.createGridPopUpElement=function(){var e=t.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),i=t.createElement("div",{className:"e-content",attrs:{tabIndex:"-1"}});t.append([i,t.createElement("div",{className:"e-uptail e-tail"})],e),i.appendChild(t.createElement("span")),t.append([i,t.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},n.prototype.updateGridLines=function(){switch(t.classList(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"horizontal":this.element.classList.add("e-horizontallines");break;case"vertical":this.element.classList.add("e-verticallines");break;case"none":this.element.classList.add("e-hidelines");break;case"both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},n.prototype.updateResizeLines=function(){this.allowResizing&&"vertical"!==this.gridLines&&"both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},n.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.querySelectorAll(".e-columnheader"));switch(this.textWrapSettings.wrapMode){case"header":A(this.element,!1),A(this.getContent(),!1),A(e,!0);break;case"content":A(this.getContent(),!0),A(this.element,!1),A(e,!1);break;default:A(this.element,!0),A(this.getContent(),!1),A(e,!1)}}},n.prototype.removeTextWrap=function(){A(this.element,!1);A([].slice.call(this.element.querySelectorAll(".e-columnheader")),!1),A(this.getContent(),!1)},n.prototype.refreshTooltip=function(){for(var e,t=this.getHeaderTable(),r=(this.getContentTable(),this.createTable(t,"e-gridheader","header")),n=this.createTable(t,"e-gridheader","content"),o=this.element.querySelectorAll(".e-ellipsistooltip"),s=[],l=0;l<o.length;l++)s[l]=o[l];s.forEach(function(o){var s=t.contains(o)?r:n,l=t.contains(o)?"th":"tr";if(s.querySelector(l).className=o.className,s.querySelector(l).innerHTML=o.innerHTML,(e=s.querySelector(l).getBoundingClientRect().width)>o.getBoundingClientRect().width&&!o.classList.contains("e-tooltip"))new i.Tooltip({content:o.innerHTML},o);else e<o.getBoundingClientRect().width&&o.classList.contains("e-tooltip")&&o.ej2_instances[0].destroy()}),document.body.removeChild(r),document.body.removeChild(n)},n.prototype.createTable=function(e,i,r){var n=t.createElement("div");n.className=this.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var o=t.createElement("div");o.className=i;var s=t.createElement("table");s.className=e.className,s.style.cssText="table-layout: auto;width: auto";var l="header"===r?"th":"td",a=t.createElement("tr"),c=t.createElement(l);return a.appendChild(c),s.appendChild(a),o.appendChild(s),n.appendChild(o),document.body.appendChild(n),n},n.prototype.wireEvents=function(){t.EventHandler.add(this.element,"click",this.mouseClickHandler,this),t.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this),t.EventHandler.add(this.element,"focusout",this.focusOutHandler,this),t.EventHandler.add(this.getContent(),"dblclick",this.dblClickHandler,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},n.prototype.unwireEvents=function(){t.EventHandler.remove(this.element,"click",this.mouseClickHandler),t.EventHandler.remove(this.element,"touchend",this.mouseClickHandler),t.EventHandler.remove(this.element,"focusout",this.focusOutHandler)},n.prototype.addListener=function(){var e=this;this.isDestroyed||(this.on(Fe,this.dataReady,this),this.on(Ae,this.recalcIndentWidth,this),[Ct,qe,Ae,ot].forEach(function(t){return e.on(t,e.refreshTooltip,e)}),this.on(ze,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(ie,this.dataBoundFunction))},n.prototype.removeListener=function(){var e=this;this.isDestroyed||(this.off(Fe,this.dataReady),this.off(Ae,this.recalcIndentWidth),[Ct,qe,Ae,ot].forEach(function(t){return e.off(t,e.refreshTooltip)}),this.off(ze,this.recalcIndentWidth),this.removeEventListener(ie,this.dataBoundFunction))},n.prototype.getCurrentViewRecords=function(){return this.allowGrouping&&this.groupSettings.columns.length?this.currentViewData.records:this.currentViewData},n.prototype.mouseClickHandler=function(e){this.isChildGrid(e)||b(e.target,"e-gridpopup")&&e.touches||this.element.querySelectorAll(".e-cloneproperties").length||this.checkEdit(e)||(!this.allowRowDragAndDrop&&b(e.target,"e-gridcontent")||!this.allowGrouping&&!this.allowReordering&&b(e.target,"e-gridheader"))&&e.touches||(b(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&e.preventDefault(),this.notify(tt,e))},n.prototype.checkEdit=function(e){var t=b(e.target,"e-row"),i="batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains("e-editedrow")||t.classList.contains("e-addedrow"));return!b(e.target,"e-unboundcelldiv")&&(i||b(e.target,"e-rowcell")&&b(e.target,"e-rowcell").classList.contains("e-editedbatchcell"))},n.prototype.dblClickHandler=function(e){if(b(e.target,"e-grid").id===this.element.id&&!t.closest(e.target,".e-unboundcelldiv")){var i=this.getRowInfo(e.target);i.target=e.target,this.trigger(Te,i),this.notify(gt,e)}},n.prototype.focusOutHandler=function(e){if(!this.isChildGrid(e)){b(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="none");var t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide")}},n.prototype.isChildGrid=function(e){var t=b(e.target,"e-grid");return!(!t||t.id===this.element.id)},n.prototype.mergePersistGridData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!t.isNullOrUndefined(e)&&""!==e){var i=JSON.parse(e),r=Object.keys(i);this.isProtectedOnChange=!0;for(var n=function(e){"object"!=typeof o[e]||t.isNullOrUndefined(o[e])?o[e]=i[e]:Array.isArray(o[e])?o[e].forEach(function(r,n){t.extend(r,i[e][n])}):t.extend(o[e],i[e])},o=this,s=0,l=r;s<l.length;s++){n(l[s])}this.isProtectedOnChange=!1}},n.prototype.isDetail=function(){return!t.isNullOrUndefined(this.detailTemplate)||!t.isNullOrUndefined(this.childGrid)},n.prototype.keyActionHandler=function(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(et,e))},n.prototype.setInjectedModules=function(e){this.injectedModules=e},n.prototype.updateColumnObject=function(){v(this.columns,this.enableColumnVirtualization),(this.editSettings.allowEditing||this.editSettings.allowAdding||this.editSettings.allowDeleting)&&this.notify(yt,{})},n.prototype.refreshColumns=function(){this.updateColumnObject(),this.refresh()},n.prototype.excelExport=function(e,t,i){return this.excelExportModule.Map(this,e,t,i,!1)},n.prototype.csvExport=function(e,t,i){return this.excelExportModule.Map(this,e,t,i,!0)},n.prototype.pdfExport=function(e,t,i){return this.pdfExportModule.Map(this,e,t,i)},n.prototype.isCommandColumn=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(r.columns){if(this.isCommandColumn(r.columns))return!0}else if(r.commands||r.commandsTemplate)return!0}return!1},n.prototype.groupColumn=function(e){this.groupModule.groupColumn(e)},n.prototype.ungroupColumn=function(e){this.groupModule.ungroupColumn(e)},n.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},n.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},n.prototype.showColumn=function(e,t){this.showHider.show(e,t)},n.prototype.hideColumn=function(e,t){this.showHider.hide(e,t)},Qi([t.Property([])],n.prototype,"columns",void 0),Qi([t.Property(!0)],n.prototype,"enableAltRow",void 0),Qi([t.Property(!0)],n.prototype,"enableHover",void 0),Qi([t.Property(!0)],n.prototype,"allowKeyboard",void 0),Qi([t.Property(!1)],n.prototype,"allowTextWrap",void 0),Qi([t.Complex({},ir)],n.prototype,"textWrapSettings",void 0),Qi([t.Property(!1)],n.prototype,"allowPaging",void 0),Qi([t.Complex({},Ni)],n.prototype,"pageSettings",void 0),Qi([t.Property(!1)],n.prototype,"enableVirtualization",void 0),Qi([t.Property(!1)],n.prototype,"enableColumnVirtualization",void 0),Qi([t.Complex({},er)],n.prototype,"searchSettings",void 0),Qi([t.Property(!1)],n.prototype,"allowSorting",void 0),Qi([t.Property(!0)],n.prototype,"allowMultiSorting",void 0),Qi([t.Property(!1)],n.prototype,"allowExcelExport",void 0),Qi([t.Property(!1)],n.prototype,"allowPdfExport",void 0),Qi([t.Complex({},Yi)],n.prototype,"sortSettings",void 0),Qi([t.Property(!0)],n.prototype,"allowSelection",void 0),Qi([t.Property(-1)],n.prototype,"selectedRowIndex",void 0),Qi([t.Complex({},Zi)],n.prototype,"selectionSettings",void 0),Qi([t.Property(!1)],n.prototype,"allowFiltering",void 0),Qi([t.Property(!1)],n.prototype,"allowReordering",void 0),Qi([t.Property(!1)],n.prototype,"allowResizing",void 0),Qi([t.Property(!1)],n.prototype,"allowRowDragAndDrop",void 0),Qi([t.Complex({},tr)],n.prototype,"rowDropSettings",void 0),Qi([t.Complex({},$i)],n.prototype,"filterSettings",void 0),Qi([t.Property(!1)],n.prototype,"allowGrouping",void 0),Qi([t.Property(!1)],n.prototype,"showColumnMenu",void 0),Qi([t.Complex({},rr)],n.prototype,"groupSettings",void 0),Qi([t.Complex({},nr)],n.prototype,"editSettings",void 0),Qi([t.Collection([],Gi)],n.prototype,"aggregates",void 0),Qi([t.Property(!1)],n.prototype,"showColumnChooser",void 0),Qi([t.Property("auto")],n.prototype,"height",void 0),Qi([t.Property("auto")],n.prototype,"width",void 0),Qi([t.Property("default")],n.prototype,"gridLines",void 0),Qi([t.Property()],n.prototype,"rowTemplate",void 0),Qi([t.Property()],n.prototype,"detailTemplate",void 0),Qi([t.Property()],n.prototype,"childGrid",void 0),Qi([t.Property()],n.prototype,"queryString",void 0),Qi([t.Property("allpages")],n.prototype,"printMode",void 0),Qi([t.Property([])],n.prototype,"dataSource",void 0),Qi([t.Property()],n.prototype,"query",void 0),Qi([t.Property("USD")],n.prototype,"currencyCode",void 0),Qi([t.Property()],n.prototype,"toolbar",void 0),Qi([t.Property()],n.prototype,"contextMenuItems",void 0),Qi([t.Property()],n.prototype,"columnMenuItems",void 0),Qi([t.Property()],n.prototype,"toolbarTemplate",void 0),Qi([t.Property()],n.prototype,"pagerTemplate",void 0),Qi([t.Property(0)],n.prototype,"frozenRows",void 0),Qi([t.Property(0)],n.prototype,"frozenColumns",void 0),Qi([t.Event()],n.prototype,"created",void 0),Qi([t.Event()],n.prototype,"destroyed",void 0),Qi([t.Event()],n.prototype,"load",void 0),Qi([t.Event()],n.prototype,"rowDataBound",void 0),Qi([t.Event()],n.prototype,"queryCellInfo",void 0),Qi([t.Event()],n.prototype,"actionBegin",void 0),Qi([t.Event()],n.prototype,"actionComplete",void 0),Qi([t.Event()],n.prototype,"actionFailure",void 0),Qi([t.Event()],n.prototype,"dataBound",void 0),Qi([t.Event()],n.prototype,"recordDoubleClick",void 0),Qi([t.Event()],n.prototype,"rowSelecting",void 0),Qi([t.Event()],n.prototype,"rowSelected",void 0),Qi([t.Event()],n.prototype,"rowDeselecting",void 0),Qi([t.Event()],n.prototype,"rowDeselected",void 0),Qi([t.Event()],n.prototype,"cellSelecting",void 0),Qi([t.Event()],n.prototype,"cellSelected",void 0),Qi([t.Event()],n.prototype,"cellDeselecting",void 0),Qi([t.Event()],n.prototype,"cellDeselected",void 0),Qi([t.Event()],n.prototype,"columnDragStart",void 0),Qi([t.Event()],n.prototype,"columnDrag",void 0),Qi([t.Event()],n.prototype,"columnDrop",void 0),Qi([t.Event()],n.prototype,"printComplete",void 0),Qi([t.Event()],n.prototype,"beforePrint",void 0),Qi([t.Event()],n.prototype,"pdfQueryCellInfo",void 0),Qi([t.Event()],n.prototype,"excelQueryCellInfo",void 0),Qi([t.Event()],n.prototype,"beforeExcelExport",void 0),Qi([t.Event()],n.prototype,"excelExportComplete",void 0),Qi([t.Event()],n.prototype,"beforePdfExport",void 0),Qi([t.Event()],n.prototype,"pdfExportComplete",void 0),Qi([t.Event()],n.prototype,"detailDataBound",void 0),Qi([t.Event()],n.prototype,"rowDragStart",void 0),Qi([t.Event()],n.prototype,"rowDrag",void 0),Qi([t.Event()],n.prototype,"rowDrop",void 0),Qi([t.Event()],n.prototype,"toolbarClick",void 0),Qi([t.Event()],n.prototype,"beforeOpenColumnChooser",void 0),Qi([t.Event()],n.prototype,"batchAdd",void 0),Qi([t.Event()],n.prototype,"batchDelete",void 0),Qi([t.Event()],n.prototype,"beforeBatchAdd",void 0),Qi([t.Event()],n.prototype,"beforeBatchDelete",void 0),Qi([t.Event()],n.prototype,"beforeBatchSave",void 0),Qi([t.Event()],n.prototype,"beginEdit",void 0),Qi([t.Event()],n.prototype,"cellEdit",void 0),Qi([t.Event()],n.prototype,"cellSave",void 0),Qi([t.Event()],n.prototype,"resizeStart",void 0),Qi([t.Event()],n.prototype,"onResize",void 0),Qi([t.Event()],n.prototype,"resizeStop",void 0),Qi([t.Event()],n.prototype,"beforeDataBound",void 0),Qi([t.Event()],n.prototype,"contextMenuOpen",void 0),Qi([t.Event()],n.prototype,"contextMenuClick",void 0),Qi([t.Event()],n.prototype,"columnMenuOpen",void 0),Qi([t.Event()],n.prototype,"columnMenuClick",void 0),Qi([t.Event()],n.prototype,"checkBoxChange",void 0),Qi([t.Event()],n.prototype,"beforeCopy",void 0),n=Qi([t.NotifyPropertyChanges],n)}(t.Component);or.Inject(Bi);var sr=function(){function e(e,t,i,r){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new oi,this.parent=e,this.sortSettings=t,this.sortedColumns=i,this.focus=r.getService("focus"),this.addEventListener()}return e.prototype.updateModel=function(){var e,t={field:this.columnName,direction:this.direction},i=this.parent.groupSettings.columns,r=!1;if(this.isMultiSort)(e=this.getSortedColsIndexByField(this.columnName))>-1&&this.sortSettings.columns.splice(e,1),this.sortSettings.columns.push(t),this.sortSettings.columns=this.sortSettings.columns;else if(i.length){for(var n=[],o=0,s=i.length;o<s;o++)if(e=this.getSortedColsIndexByField(i[o],n),this.columnName===i[o])r=!0,n.push(t);else{var l=this.getSortColumnFromField(i[o]);n.push({field:l.field,direction:l.direction})}r||n.push(t),this.sortSettings.columns=n}else this.sortSettings.columns=[t];this.parent.dataBind(),this.lastSortedCol=this.columnName},e.prototype.onActionComplete=function(e){var i=this.isRemove?{requestType:"sorting",type:ee}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:ee};this.isRemove=!1,this.parent.trigger(ee,t.extend(e,i))},e.prototype.sortColumn=function(e,t,i){var r=this.parent;if(!1!==this.parent.getColumnByField(e).allowSorting&&!this.parent.isContextMenuOpen())if(r.allowMultiSorting||(i=r.allowMultiSorting),this.isActionPrevent())r.notify(St,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:i});else{this.columnName=e,this.direction=t,this.isMultiSort=i,this.removeSortIcons();r.getColumnHeaderByField(e);this.updateSortedCols(e,i),this.updateModel()}},e.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var i=0,r=this.sortedColumns.length;i<r;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[i])<0&&(this.sortedColumns.splice(i,1),r--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){if(this.contentRefresh){var t=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:Z}:{requestType:"sorting",type:Z};this.parent.notify(qe,t)}this.removeSortIcons(),this.addSortIcons()}},e.prototype.clearSorting=function(){var e=E(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(St,{instance:this,handler:this.clearSorting});else for(var t=0,i=e.length;t<i;t++)this.removeSortColumn(e[t].field)},e.prototype.isActionPrevent=function(){return F(this.parent)},e.prototype.removeSortColumn=function(e){var t=this.parent,i=this.sortSettings.columns;if(this.isActionPrevent())this.parent.notify(St,{instance:this,handler:this.removeSortColumn,arg1:e});else{this.removeSortIcons();for(var r=0,n=i.length;r<n;r++)if(i[r].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(i[r].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(i[r].field),1),i.splice(r,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(qe,{requestType:"sorting",type:Z});break}this.addSortIcons()}},e.prototype.getSortedColsIndexByField=function(e,t){for(var i=t||this.sortSettings.columns,r=0,n=i.length;r<n;r++)if(i[r].field===e)return r;return-1},e.prototype.getModuleName=function(){return"sort"},e.prototype.initialEnd=function(){if(this.parent.off(Ae,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var t=0,i=e.sortSettings.columns;t<i.length;t++){var r=i[t];this.sortedColumns.indexOf(r.field)>-1&&this.sortColumn(r.field,r.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ae,this.initialEnd,this),this.parent.on(_e,this.onActionComplete,this),this.parent.on(He,this.onPropertyChanged,this),this.parent.on(tt,this.clickHandler,this),this.parent.on(ze,this.refreshSortIcons,this),this.parent.on(et,this.keyPressed,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(_e,this.onActionComplete),this.parent.off(He,this.onPropertyChanged),this.parent.off(tt,this.clickHandler),this.parent.off(ze,this.refreshSortIcons),this.parent.off(et,this.keyPressed))},e.prototype.destroy=function(){this.isModelChanged=!1,this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),this.clearSorting(),this.isModelChanged=!0,this.removeEventListener()},e.prototype.clickHandler=function(e){this.popUpClickHandler(e);var i=t.closest(e.target,".e-headercell");if(i&&!e.target.classList.contains("e-grptogglebtn")&&!e.target.classList.contains("e-stackedheadercell")&&!e.target.classList.contains("e-stackedheadercelldiv")&&!i.classList.contains("e-resized")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")){var r=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));i.querySelectorAll(".e-ascending").length;"checkbox"!==r.type&&(this.initiateSort(i,e,r),t.Browser.isDevice&&this.showPopUp(e))}i&&i.classList.remove("e-resized")},e.prototype.keyPressed=function(e){if(!this.parent.isEdit&&("enter"===e.action||"ctrlEnter"===e.action||"shiftEnter"===e.action)){var t=this.focus.getFocusedElement();if(!t||!t.classList.contains("e-headercell")||this.parent.frozenColumns||this.parent.frozenRows)return;var i=this.parent.getColumnByUid(t.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(t,e,i)}},e.prototype.initiateSort=function(e,t,i){var r=this.parent,n=i.field,o=e.querySelectorAll(".e-ascending").length?"descending":"ascending";t.shiftKey||this.sortSettings.allowUnsort&&e.querySelectorAll(".e-descending").length&&!(r.groupSettings.columns.indexOf(n)>-1)?this.removeSortColumn(n):this.sortColumn(n,o,t.ctrlKey||this.enableSortMultiTouch)},e.prototype.showPopUp=function(e){var i=t.closest(e.target,".e-headercell");t.isNullOrUndefined(i)&&!this.parent.isContextMenuOpen()||C(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},e.prototype.popUpClickHandler=function(e){var i=e.target;t.closest(i,".e-headercell")||e.target.classList.contains("e-rowcell")||t.closest(i,".e-gridpopup")?i.classList.contains("e-sortdirect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.addSortIcons=function(){for(var e,i,r=this.parent,n=this.sortSettings.columns,o=this.parent.getColumns().map(function(e){return e.field}),s=0,l=n.length;s<l;s++)-1!==o.indexOf(n[s].field)&&(e=r.getColumnHeaderByField(n[s].field),this.aria.setSort(e,n[s].direction),this.isMultiSort&&n.length>1&&e.querySelector(".e-headercelldiv").insertBefore(t.createElement("span",{className:"e-sortnumber",innerHTML:(s+1).toString()}),e.querySelector(".e-headertext")),i=e.querySelector(".e-sortfilterdiv"),"ascending"===n[s].direction?t.classList(i,["e-ascending","e-icon-ascending"],[]):t.classList(i,["e-descending","e-icon-descending"],[]))},e.prototype.removeSortIcons=function(e){for(var i,r=this.parent,n=this.sortSettings.columns,o=this.parent.getColumns().map(function(e){return e.field}),s=e||0,l=t.isNullOrUndefined(e)?n.length:e+1;s<l;s++)r.allowGrouping&&r.groupSettings.columns.indexOf(n[s].field)>-1||-1!==o.indexOf(n[s].field)&&(i=r.getColumnHeaderByField(n[s].field),this.aria.setSort(i,"none"),t.classList(i.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),i.querySelector(".e-sortnumber")&&i.querySelector(".e-headercelldiv").removeChild(i.querySelector(".e-sortnumber")))},e.prototype.getSortColumnFromField=function(e){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[t].field===e)return this.sortSettings.columns[t];return!1},e.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map(function(e){return e.field}),t=0,i=this.sortedColumns;t<i.length;t++){var r=i[t];if(-1!==e.indexOf(r)){var n=this.parent.getColumnHeaderByField(r);this.aria.setSort(n,this.getSortColumnFromField(r).direction)}}},e.prototype.refreshSortIcons=function(){this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr()},e}(),lr=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,i=this.pagerModule,r=i.element.querySelector(".e-numericcontainer"),n=document.createDocumentFragment();r.innerHTML="";for(var o=1;o<=i.pageCount;o++)e=t.createElement("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+o}}),i.currentPage===o&&t.classList(e,["e-currentitem","e-active"],["e-pager-default"]),n.appendChild(e);r.appendChild(n),this.links=[].slice.call(r.childNodes)},e.prototype.wireEvents=function(){t.EventHandler.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){t.EventHandler.remove(this.pagerElement,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=t.createElement("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(t.createElement("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=t.createElement("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=t.createElement("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),t.append([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){this.PP=t.createElement("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1"}}),e.appendChild(this.PP)},e.prototype.renderNextPagerSet=function(e){this.NP=t.createElement("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1"}}),e.appendChild(this.NP)},e.prototype.renderNextNLast=function(e){this.next=t.createElement("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=t.createElement("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),t.append([this.next,this.last],e)},e.prototype.clickHandler=function(e){var i=this.pagerModule,r=e.target;return i.previousPageNo=i.currentPage,r.classList.contains("e-disable")||t.isNullOrUndefined(r.getAttribute("index"))||(i.currentPage=parseInt(r.getAttribute("index"),10),i.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,i,r=this.pagerModule;r.currentPage=1===r.totalPages?1:r.currentPage,r.currentPage>r.totalPages&&r.totalPages&&(r.currentPage=r.totalPages),e=parseInt((r.currentPage/r.pageCount).toString(),10),r.currentPage%r.pageCount==0&&e>0&&(e-=1);for(var n=0;n<r.pageCount;n++)(i=e*r.pageCount+1+n)<=r.totalPages?(this.links[n].style.display="",this.links[n].setAttribute("index",i.toString()),this.links[n].innerHTML=r.customText?r.customText+i:i.toString(),r.currentPage!==i?this.links[n].classList.add("e-pager-default"):this.links[n].classList.remove("e-pager-default")):this.links[n].style.display="none",t.classList(this.links[n],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",r.totalPages.toString()),this.prev.setAttribute("index",(r.currentPage-1).toString()),this.next.setAttribute("index",(r.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",r.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(r.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(r.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-r.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&t.classList(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],i=["e-firstpagedisabled","e-disable"],r=["e-prevpage","e-pager-default"],n=["e-prevpagedisabled","e-disable"];this.pagerModule.currentPage>1?(t.classList(this.prev,r,n),t.classList(this.first,e,i),t.classList(this.pagerElement.querySelector(".e-mfirst"),e,i),t.classList(this.pagerElement.querySelector(".e-mprev"),r,n)):(t.classList(this.prev,n,r),t.classList(this.first,i,e),t.classList(this.pagerElement.querySelector(".e-mprev"),n,r),t.classList(this.pagerElement.querySelector(".e-mfirst"),i,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?t.classList(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):t.classList(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,i=this.links[0].innerHTML.replace(e.customText,"");!i.length||!this.links.length||parseInt(i,10)+e.pageCount>e.totalPages?t.classList(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):t.classList(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],i=["e-lastpagedisabled","e-disable"],r=["e-nextpage","e-pager-default"],n=["e-nextpagedisabled","e-disable"],o=this.pagerModule;o.currentPage===o.totalPages||0===o.totalRecordsCount?(t.classList(this.last,i,e),t.classList(this.next,n,r),t.classList(this.pagerElement.querySelector(".e-mlast"),i,e),t.classList(this.pagerElement.querySelector(".e-mnext"),n,r)):(t.classList(this.last,e,i),t.classList(this.next,r,n),t.classList(this.pagerElement.querySelector(".e-mlast"),e,i),t.classList(this.pagerElement.querySelector(".e-mnext"),r,n))},e}(),ar=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=t.createElement("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=t.createElement("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=t.createElement("span",{className:"e-pagecountmsg",styles:"textalign:right"}),t.append([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("totalItemsInfo"),[e.totalRecordsCount||0]),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var i,r=0;r<t.length;r++)i=new RegExp("\\{"+r+"\\}","gm"),e=e.replace(i,t[r].toString());return e},e}(),cr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pr=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},dr=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page"},r.containerModule=new lr(r),r.pagerMessageModule=new ar(r),r}return cr(i,e),i.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},i.prototype.preRender=function(){},i.prototype.render=function(){this.template?this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},i.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.element.innerHTML=""},i.prototype.getModuleName=function(){return"pager"},i.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed)for(var i=0,r=Object.keys(e);i<r.length;i++){switch(r[i]){case"pageCount":this.containerModule.refreshNumericLinks(),this.containerModule.refresh();break;case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged();break;case"pageSize":case"totalRecordsCount":case"customText":this.refresh();break;case"pageSizes":this.checkpagesizes()&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}},i.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},i.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},i.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},i.prototype.checkGoToPage=function(e,i){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),t.isNullOrUndefined(i)||(this.previousPageNo=i),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},i.prototype.currentPageChanged=function(){this.enableQueryString&&this.updateQueryString(this.currentPage);var e={currentPage:this.currentPage,cancel:!1};this.trigger("click",e),e.cancel||this.refresh()},i.prototype.pagerTemplate=function(){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages};e=this.getPagerTemplate()(t),D(this.element,e)},i.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},i.prototype.getPagerTemplate=function(){return this.templateFn},i.prototype.compile=function(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=t.compile(document.querySelector(e).innerHTML.trim()))}catch(i){this.templateFn=t.compile(e)}},i.prototype.refresh=function(){this.template?(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},i.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},i.prototype.initLocalization=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultConstants,this.locale)},i.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},i.prototype.getUpdatedURL=function(e,t,i){var r=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(r))return e.replace(r,"$1"+t+"="+i+"$2");var n="";return-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+n},i.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(t.createElement("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(t.createElement("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},i.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(t.createElement("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(t.createElement("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},i.prototype.addAriaLabel=function(){var e=this;t.Browser.isDevice||[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"].forEach(function(t){var i=e.element.querySelector(t);i.setAttribute("aria-label",i.getAttribute("title"))})},pr([t.Property(!1)],i.prototype,"enableQueryString",void 0),pr([t.Property(!1)],i.prototype,"enableExternalMessage",void 0),pr([t.Property(!0)],i.prototype,"enablePagerMessage",void 0),pr([t.Property(12)],i.prototype,"pageSize",void 0),pr([t.Property(10)],i.prototype,"pageCount",void 0),pr([t.Property(1)],i.prototype,"currentPage",void 0),pr([t.Property()],i.prototype,"totalRecordsCount",void 0),pr([t.Property()],i.prototype,"externalMessage",void 0),pr([t.Property(!1)],i.prototype,"pageSizes",void 0),pr([t.Property()],i.prototype,"template",void 0),pr([t.Property("")],i.prototype,"customText",void 0),pr([t.Event()],i.prototype,"click",void 0),pr([t.Event()],i.prototype,"dropDownChanged",void 0),pr([t.Event()],i.prototype,"created",void 0),i=pr([t.NotifyPropertyChanges],i)}(t.Component),hr=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"pagerdropdown"},e.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=t.createElement("div",{className:"e-pagesizes"});var i=t.createElement("div",{className:"e-pagerdropdown"}),r=t.createElement("div",{className:"e-pagerconstant"}),n=t.createElement("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=t.createElement("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),i.appendChild(n),r.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(i),this.pagerDropDownDiv.appendChild(r),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var o=this.pagerModule.pageSizes,l=o.length?o:[5,10,12,20],a=l.indexOf(this.pagerModule.pageSize)>-1?this.pagerModule.pageSize:l[0];this.dropDownListObject=new s.DropDownList({dataSource:l,value:a,change:this.onChange.bind(this)}),this.dropDownListObject.appendTo(n),e.pageSize=a,e.dataBind(),e.trigger("dropDownChanged",{pageSize:a})},e.prototype.onChange=function(e){this.pagerModule.pageSize=this.dropDownListObject.value,this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:this.dropDownListObject.value})},e.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.dropDownListObject.destroy(),t.remove(this.pagerDropDownDiv))},e}(),ur=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"externalMessage"},e.prototype.render=function(){this.element=t.createElement("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()},e.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},e.prototype.hideMessage=function(){this.element.style.display="none"},e.prototype.showMessage=function(){this.element.style.display=""},e.prototype.destroy=function(){t.remove(this.element)},e}();dr.Inject(ur,hr);var gr=function(){function e(e,t){this.parent=e,this.pageSettings=t,this.addEventListener()}return e.prototype.getModuleName=function(){return"pager"},e.prototype.render=function(){var e,i=this.parent;this.pagerDestroy(),t.isNullOrUndefined(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate),this.element=t.createElement("div",{className:"e-gridpager"}),e=y({},t.extend({},w(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:i.enableRtl,locale:i.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]),this.pagerObj=new dr(e)},e.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.pageSettings.currentPage=1},e.prototype.addAriaAttr=function(){var e=this;if(!this.pageSettings.template){for(var t=this.element.querySelector(".e-numericcontainer").querySelectorAll("a"),i=0;i<t.length;i++)this.parent.getContentTable()&&t[i].setAttribute("aria-owns",this.parent.getContentTable().id);[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"].forEach(function(t){var i=e.element.querySelector(t);e.parent.getContentTable()&&i.setAttribute("aria-owns",e.parent.getContentTable().id)})}},e.prototype.dataReady=function(e){this.updateModel(e)},e.prototype.refresh=function(){this.pagerObj.refresh()},e.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},e.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count,this.parent.dataBind()},e.prototype.onActionComplete=function(e){this.parent.trigger(ee,t.extend(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:ee}))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.pagerObj[n]=t[n]}this.pagerObj.dataBind()}},e.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||F(t))return this.isForceCancel?this.isForceCancel=!1:(t.notify(St,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.isForceCancel=!0,this.pagerObj.currentPage=t.pageSettings.currentPage,this.pagerObj.dataBind()),void(e.cancel=!0);var i=this.pageSettings.currentPage;this.pageSettings.currentPage=e.currentPage,this.parent.notify(qe,{requestType:"paging",previousPage:i,currentPage:e.currentPage,type:Z})},e.prototype.keyPressHandler=function(e){this.canSkipAction(e.action)||e.action in fr&&(e.preventDefault(),this.element.querySelector(fr[e.action]).click())},e.prototype.canSkipAction=function(e){var t=document.activeElement;return!(!t.classList.contains("e-content")||!t.isEqualNode(this.parent.getContent().firstElementChild)||-1===["pageUp","pageDown"].indexOf(e))&&{pageUp:function(e){return 0!==e.scrollTop},pageDown:function(e){return!(e.scrollTop>=e.scrollHeight-e.clientHeight)}}[e](this.parent.getContent().firstChild)},e.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},e.prototype.appendToElement=function(e){this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.appendTo(this.element)},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement())},e.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler},this.parent.isDestroyed||(this.parent.on(Me,this.handlers.load,this),this.parent.on(Le,this.handlers.end,this),this.parent.on(Fe,this.handlers.ready,this),this.parent.on(Ue,this.handlers.complete,this),this.parent.on(Ne,this.handlers.updateLayout,this),this.parent.on(He,this.handlers.inboundChange,this),this.parent.on(et,this.handlers.keyPress,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Me,this.handlers.load),this.parent.off(Le,this.handlers.end),this.parent.off(Fe,this.handlers.ready),this.parent.off(Ue,this.handlers.complete),this.parent.off(Ne,this.handlers.updateLayout),this.parent.off(He,this.handlers.inboundChange),this.parent.off(et,this.handlers.keyPress))},e.prototype.destroy=function(){this.removeEventListener(),this.pagerDestroy()},e.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),t.remove(this.element))},e}(),fr={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},mr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yr=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TH",{className:"e-filterbarcell"}),i}return mr(i,e),i.prototype.getGui=function(){return t.createElement("div")},i.prototype.render=function(e,i){var r,n=this.parent.element.querySelector(".e-filterbar"),o=this.element.cloneNode(),s=this.getGui(),l=e.column;if("checkbox"!==l.type){if(n.appendChild(o),!t.isNullOrUndefined(l.allowFiltering)&&!l.allowFiltering||t.isNullOrUndefined(l.filterBarTemplate))t.attributes(s,{class:"e-filterdiv e-fltrinputdiv"}),r=t.createElement("input",{id:l.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:l.headerText+e.attributes.title,value:i[e.column.field]?i[e.column.field]:"",role:"search"}}),s.appendChild(r),s.appendChild(t.createElement("span",{className:"e-cancel e-hide e-icons e-icon-hide",attrs:{"aria-label":"clear filter cell",tabindex:"-1"}}));else if(o.classList.add("e-fltrtemp"),t.attributes(s,{class:"e-fltrtempdiv"}),t.isNullOrUndefined(l.filterBarTemplate.create))r=t.createElement("input",{id:l.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:l.headerText}}),s.appendChild(r);else{var a={column:l,node:Element},c=l.filterBarTemplate.create;if("string"==typeof c&&(c=t.getValue(c,window)),"string"==typeof(r=c(a))){var p=t.createElement("div");p.innerHTML=r,r=p.firstChild}t.attributes(s,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:l.headerText,id:l.field+"_filterBarcell"}),s.appendChild(r)}if((!1===l.allowFiltering||""===l.field||t.isNullOrUndefined(l.field))&&(r.setAttribute("disabled","true"),r.classList.add("e-disable")),l.visible||o.classList.add("e-hide"),this.appendHtml(o,s),(t.isNullOrUndefined(l.allowFiltering)||l.allowFiltering)&&!t.isNullOrUndefined(l.filterBarTemplate)){var d=l.filterBarTemplate.write;a={element:r,column:l};"string"==typeof d&&(d=t.getValue(d,window)),d.call(this,a)}}return o},i.prototype.appendHtml=function(e,t){return e.appendChild(t),e},i}(ni),vr=function(){function e(e,t,i,r){this.parent=e,this.serviceLocator=i,this.filterSettings=r,this.customFilterOperators=t}return e.prototype.renderOperatorUI=function(e,i,r,n){this.dialogObj=n;var o=r.type+"Operator";this.optrData=this.customOptr=t.isNullOrUndefined(this.parent.filterSettings.operators)||t.isNullOrUndefined(this.parent.filterSettings.operators[o])?this.customFilterOperators[o]:this.parent.filterSettings.operators[o];var l=this.customOptr,a=this.dropSelectedVal(r,o),c=t.createElement("div",{className:"e-flm_optrdiv"});e.appendChild(c);var p=t.createElement("input",{id:r.uid+"-floptr"});c.appendChild(p),this.dropOptr=new s.DropDownList({dataSource:l,fields:{text:"text",value:"value"},open:this.dropDownOpen.bind(this),text:a}),this.dropOptr.appendTo("#"+r.uid+"-floptr")},e.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e.prototype.dropSelectedVal=function(e,i){for(var n="",o=0,s=this.parent.filterSettings.columns;o<s.length;o++){var l=s[o];if(e.field===l.field){var a=new r.DataManager(this.optrData).executeLocal((new r.Query).where("value","equal",l.operator));n=t.isNullOrUndefined(a[0])?"":a[0].text}}return""===n&&(n=this.optrData[0].text),n},e.prototype.getFlOperator=function(){return this.dropOptr.value},e}(),Cr=function(){function e(e,t,i){this.parent=e,this.serLocator=t,this.filterSettings=i}return e.prototype.create=function(e){var i=this;this.instance=t.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.actObj=new s.AutoComplete({dataSource:this.parent.dataSource instanceof r.DataManager?this.parent.dataSource:new r.DataManager(this.parent.dataSource),fields:{value:e.column.field},locale:this.parent.locale,enableRtl:this.parent.enableRtl,sortOrder:"Ascending",open:this.openPopup.bind(this),cssClass:"e-popup-flmenu",focus:function(){i.actObj.filterType=e.getOptrInstance.getFlOperator()},autofill:!0,placeholder:e.localizeText.getConstant("EnterValue"),actionComplete:function(e){e.result=e.result.filter(function(e,t,r){return r.map(function(e){return e[i.actObj.fields.value]}).indexOf(e[i.actObj.fields.value])===t})}}),this.actObj.appendTo(this.instance)},e.prototype.write=function(e){this.filterSettings.columns;if(""!==e.filteredValue){document.querySelector("#strui-"+e.column.uid).ej2_instances[0].value=e.filteredValue}},e.prototype.read=function(e,t,i,r){var n=document.querySelector("#strui-"+t.uid).ej2_instances[0].value;r.filterByColumn(t.field,i,n,"and",!1)},e.prototype.openPopup=function(e){z(e,this.dialogObj)},e}(),wr=function(){function e(e,t,i){this.filterSettings=i,this.parent=e,this.serviceLocator=t}return e.prototype.create=function(e){this.instance=t.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new o.NumericTextBox({format:e.column.format,locale:this.parent.locale,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl}),this.numericTxtObj.appendTo(this.instance)},e.prototype.write=function(e){document.querySelector("#numberui-"+e.column.uid).ej2_instances[0].value=e.filteredValue},e.prototype.read=function(e,t,i,r){var n=document.querySelector("#numberui-"+t.uid).ej2_instances[0].value;r.filterByColumn(t.field,i,n,"and",!0)},e}(),br=function(){function e(e,t,i){this.parent=e,this.serviceLocator=t,this.filterSettings=i}return e.prototype.create=function(e){this.elem=t.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new s.DropDownList({dataSource:this.parent.dataSource instanceof r.DataManager?this.parent.dataSource:new r.DataManager(this.parent.dataSource),query:(new r.Query).select(e.column.field),fields:{text:e.column.field,value:e.column.field},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this),actionComplete:this.ddActionComplete}),this.dropInstance.appendTo(this.elem)},e.prototype.write=function(e){document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0].text=t.isNullOrUndefined(e.filteredValue)?"":e.filteredValue},e.prototype.read=function(e,t,i,r){var n=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0].value;r.filterByColumn(t.field,i,n,"and",!1)},e.prototype.ddActionComplete=function(e){e.result=q(e.result)},e.prototype.openPopup=function(e){z(e,this.dialogObj)},e}(),Sr=function(){function e(e,t,i){this.parent=e,this.locator=t,this.fltrSettings=i}return e.prototype.create=function(e){var i=new t.Internationalization,r=e.column.format,n=i.getDatePattern({type:"date",skeleton:r},!1);this.dialogObj=e.dialogObj,this.inputElem=t.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),this.datePickerObj=new l.DatePicker({format:n,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this)}),this.datePickerObj.appendTo(this.inputElem)},e.prototype.write=function(e){this.fltrSettings.columns;document.querySelector("#dateui-"+e.column.uid).ej2_instances[0].value=t.isNullOrUndefined(e.filteredValue)?null:new Date(e.filteredValue)},e.prototype.read=function(e,t,i,r){var n=document.querySelector("#dateui-"+t.uid).ej2_instances[0].value;r.filterByColumn(t.field,i,n,"and",!0)},e.prototype.openPopup=function(e){e.popupElement.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e}(),xr=function(){function e(e,t,i,r,n){this.colTypes={string:Cr,number:wr,date:Sr,boolean:br,datetime:Sr},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.customFilterOperators=r,this.filterObj=n,this.flMuiObj=new vr(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization")}return e.prototype.openDialog=function(e){this.col=this.parent.getColumnByField(e.field),(t.isNullOrUndefined(this.col.filter)||t.isNullOrUndefined(this.col.filter.type)||"menu"===this.col.filter.type)&&this.renderDlgContent(e.target,this.col)},e.prototype.closeDialog=function(){var e=document.getElementById(this.dlgObj.element.id);this.dlgObj&&!this.dlgObj.isDestroyed&&e&&(this.parent.notify(Ut,{field:this.col.field}),this.dlgObj.destroy(),t.remove(e))},e.prototype.renderDlgContent=function(e,r){var n=t.createElement("div",{className:"e-flmenu-maindiv",id:r.uid+"-flmenu"});this.dlgDiv=t.createElement("div",{className:"e-flmenu",id:r.uid+"-flmdlg"}),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new i.Dialog({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,r),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,r),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,r),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:"e-flmenu-cancelbtn"}}],content:n,width:!t.isNullOrUndefined(b(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:"e-filter-popup"}),this.dlgObj.appendTo(this.dlgDiv)},e.prototype.dialogCreated=function(e,i){t.Browser.isDevice||j(e,this.dlgObj),this.renderFilterUI(e,i),this.parent.notify(zt,{}),this.dlgObj.element.style.maxHeight="350px",this.dlgObj.show(),this.writeMethod(i,this.dlgObj.element.querySelector("#"+i.uid+"-flmenu"))},e.prototype.renderFilterUI=function(e,t){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.renderOperatorUI(i,e,t),this.renderFlValueUI(i,e,t)},e.prototype.renderOperatorUI=function(e,t,i){this.flMuiObj.renderOperatorUI(e,t,i,this.dlgObj)},e.prototype.renderFlValueUI=function(e,i,r){var n=t.createElement("div",{className:"e-flmenu-valuediv"});e.appendChild(n);this.flMuiObj,this.dlgObj;var o=new this.colTypes[r.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(t.isNullOrUndefined(r.filter)||t.isNullOrUndefined(r.filter.ui)||t.isNullOrUndefined(r.filter.ui.create))o.create({column:r,target:n,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj});else{var s=r.filter.ui.create;"string"==typeof s&&(s=t.getValue(s,window)),r.filter.ui.create({column:r,target:n,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}},e.prototype.writeMethod=function(e,i){for(var r,n=i.querySelector(".e-flmenu-valinput"),o=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),s=0,l=this.filterSettings.columns;s<l.length;s++){var a=l[s];e.field===a.field&&(r=a.value)}if(t.isNullOrUndefined(e.filter)||t.isNullOrUndefined(e.filter.ui)||t.isNullOrUndefined(e.filter.ui.write))o.write({column:e,target:n,parent:this.parent,filteredValue:r});else{var c=e.filter.ui.write;"string"==typeof c&&(c=t.getValue(c,window)),e.filter.ui.write({column:e,target:n,parent:this.parent,filteredValue:r})}},e.prototype.filterBtnClick=function(e){var i,r=this.dlgObj.element.querySelector(".e-flmenu-valuediv input");i=this.flMuiObj.getFlOperator();var n=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(t.isNullOrUndefined(e.filter)||t.isNullOrUndefined(e.filter.ui)||t.isNullOrUndefined(e.filter.ui.read))n.read(r,e,i,this.filterObj);else{var o=e.filter.ui.read;"string"==typeof o&&(o=t.getValue(o,window)),e.filter.ui.read({element:r,column:e,operator:i,fltrObj:this.filterObj})}var s=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",l=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(s);l&&l.classList.add("e-filtered"),this.closeDialog()},e.prototype.clearBtnClick=function(e){this.filterObj.removeFilteredColsByField(e.field),this.closeDialog();var t=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",i=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(t);i&&i.classList.remove("e-filtered")},e.prototype.destroy=function(){},e}(),Er=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tr=function(e){function c(i,r,n,o){var s=e.call(this,i,r,n)||this;return s.localeConstants={ClearFilter:"Clear Filter",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",MatchCase:"Match Case",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",CustomFilter:"Custom Filter",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",OK:"OK",Cancel:"Cancel",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:"},s.customFilterOperators=o,t.extend(s.defaultConstants,s.localeConstants),s.isExcel=!0,s.initLocale(s.defaultConstants),s}return Er(c,e),c.prototype.getCMenuDS=function(e,t){var i={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","","CustomFilter"]};i.date=i.number,i.datetime=i.number;for(var r=[],n=0;n<i[e].length;n++)i[e][n].length?t?r.push({text:this.getLocalizedLabel(i[e][n])+"...",iconCss:"e-icons e-icon-check "+(t===i[e][n]?"":"e-emptyicon")}):r.push({text:this.getLocalizedLabel(i[e][n])+"..."}):r.push({separator:!0});return r},c.prototype.destroy=function(){this.dlg&&(e.prototype.destroy.call(this),this.unwireExEvents()),t.remove(this.cmenu)},c.prototype.createMenu=function(e,i,r){this.menu=t.createElement("div",{className:"e-contextmenu-wrapper"});var n=t.createElement("ul"),o=i?"e-icon-filter e-filtered":"e-icon-filter";n.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),i?"":"e-disabled",o)),"boolean"!==e&&n.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateFilter",number:"NumberFilter"}[e]),"e-submenu",r?"e-icon-check":o+" e-emptyicon",!0)),this.menu.appendChild(n)},c.prototype.createMenuElem=function(e,i,r,n){var o=t.createElement("li",{className:i+" e-menu-item"});return o.innerHTML=e,o.insertBefore(t.createElement("span",{className:"e-menu-icon e-icons "+r}),o.firstChild),n&&o.appendChild(t.createElement("span",{className:"e-icons e-caret"})),o},c.prototype.wireExEvents=function(){t.EventHandler.add(this.dlg,"mouseover",this.hoverHandler,this),t.EventHandler.add(this.dlg,"click",this.clickExHandler,this)},c.prototype.unwireExEvents=function(){t.EventHandler.remove(this.dlg,"mouseover",this.hoverHandler),t.EventHandler.remove(this.dlg,"click",this.clickExHandler)},c.prototype.clickExHandler=function(e){var t=b(e.target,"e-menu-item");t&&this.getLocalizedLabel("ClearFilter")===t.innerText&&(this.clearFilter(),this.closeDialog())},c.prototype.destroyCMenu=function(){this.menuObj&&!this.menuObj.isDestroyed&&this.menuObj.destroy()},c.prototype.hoverHandler=function(e){var i,r=e.target.querySelector(".e-contextmenu"),n=b(e.target,"e-menu-item"),o=this.menu.querySelector(".e-focused");if(o&&o.classList.remove("e-focused"),n&&(n.classList.add("e-focused"),i=n.classList.contains("e-submenu")),!r){if(!i){this.menu.querySelector(".e-submenu").classList.remove("e-selected"),this.isCMenuOpen=!1,this.destroyCMenu()}var s,l=this.getExistingPredicate(this.options.field);if(2===l.length?s="greaterThanOrEqual"===l[0].operator&&"lessThanOrEqual"===l[1].operator?"Between":"CustomFilter":1===l.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],s=this.getSelectedText(l[0].operator)),!this.isCMenuOpen&&i){n.classList.add("e-selected"),this.isCMenuOpen=!0;var c={items:this.getCMenuDS(this.options.type,s?s.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this)};this.parent.element.appendChild(this.cmenu),this.menuObj=new a.ContextMenu(c,this.cmenu);var p=this.menu.querySelector(".e-submenu").getBoundingClientRect(),d={top:0,left:0};if(t.Browser.isDevice){var h=this.getContextBounds(this.menuObj);d.top=(window.innerHeight-h.height)/2,d.left=(window.innerWidth-h.width)/2,this.closeDialog()}else d.top=p.top,d.left=this.getCMenuYPosition(this.dlg,this.menuObj);this.menuObj.open(d.top,d.left)}}},c.prototype.getContextBounds=function(e){this.menuObj.element.style.display;return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},c.prototype.getCMenuYPosition=function(e,t){var i=this.getContextBounds(t).width,r=e.getBoundingClientRect();return r.right+i-this.parent.element.clientWidth<1?r.right+1:r.left-i-1},c.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),this.dialogObj.dataBind();var i=this.getExistingPredicate(e.field).length;this.createMenu(e.type,i>0,1===i||2===i),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=t.createElement("ul",{className:"e-excel-menu"}),this.wireExEvents()},c.prototype.closeDialog=function(){e.prototype.closeDialog.call(this)},c.prototype.selectHandler=function(e){e.item&&(this.menuItem=e.item,this.renderDialogue(e))},c.prototype.renderDialogue=function(e){var r=e.element,n=this.options.field,o=t.createElement("div",{className:"e-xlfl-maindiv",id:n+"-xlflmenu"});this.dlgDiv=t.createElement("div",{className:"e-xlflmenu",id:n+"-xlfldlg"}),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new i.Dialog({header:"Custom Filter",isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,closeOnEscape:!1,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,r,n),buttons:[{click:this.filterBtnClick.bind(this,n),buttonModel:{content:this.getLocalizedLabel("OK"),isPrimary:!0,cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("Cancel"),cssClass:"e-xlfl-cancelbtn"}}],content:o,width:370,animationSettings:{effect:"None"}}),this.dlgObj.appendTo(this.dlgDiv)},c.prototype.removeDialog=function(){this.removeObjects([this.dropOptr,this.datePicker,this.actObj,this.numericTxtObj,this.dlgObj]),t.remove(this.dlgDiv)},c.prototype.clearBtnClick=function(e){this.clearFilter(),this.removeDialog()},c.prototype.createdDialog=function(e,t){this.renderCustomFilter(e,t),this.dlgObj.element.style.left="0px",this.dlgObj.element.style.top="0px",this.dlgObj.show()},c.prototype.renderCustomFilter=function(e,i){var r=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=t.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});r.appendChild(n);var o=t.createElement("div",{innerHTML:i,className:"e-xlfl-fieldset"});r.appendChild(o),this.renderFilterUI(i,r)},c.prototype.filterBtnClick=function(e){var t,i=this.dlgDiv.querySelector("#"+e+"-xlfl-frstvalue").ej2_instances[0],r=this.dlgDiv.querySelector("#"+e+"-xlfl-frstoptr").ej2_instances[0],n=this.dlgDiv.querySelector("#"+e+"-xlfl-secndvalue").ej2_instances[0],o=this.dlgDiv.querySelector("#"+e+"-xlfl-secndoptr").ej2_instances[0];if("string"===this.options.type){t=this.dlgDiv.querySelector("#"+e+"-xlflmtcase").ej2_instances[0].checked}var s=this.dlgDiv.querySelector("#"+e+"e-xlfl-frstpredicate").ej2_instances[0],l=(this.dlgDiv.querySelector("#"+e+"e-xlfl-secndpredicate").ej2_instances[0],s.checked?"and":"or");null===n.value&&(l="or"),this.filterByColumn(this.options.field,r.value,i.value?i.value:i.getText(),l,t,o.value,n.value),this.removeDialog()},c.prototype.filterByColumn=function(e,t,i,n,o,s,l){var a,c=[];i&&(c.push({field:this.options.field,predicate:"or",matchcase:o,operator:t,value:i,type:this.options.type}),a=new r.Predicate(this.options.field,t.toLowerCase(),i,o)),l&&(c.push({field:this.options.field,predicate:n,matchcase:o,operator:s,value:l,type:this.options.type}),a=a[n](this.options.field,s.toLowerCase(),l,o));var p={action:"filtering",filterCollection:c,field:this.options.field,ejpredicate:a};this.options.handler(p)},c.prototype.renderOperatorUI=function(e,i,r,n,o){var l=t.createElement("tr",{className:"e-xlfl-fields"});i.appendChild(l);var a=t.createElement("td",{className:"e-xlfl-optr"});l.appendChild(a);var c=t.createElement("div",{className:"e-xlfl-optrdiv"}),p=t.createElement("input",{id:e+r});c.appendChild(p),a.appendChild(c);var d=this.options.type+"Operator",h=this.customFilterOperators[d];this.optrData=h;var u=this.dropSelectedVal(e,n,o),g="";this.menuItem&&((g=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(u=o?g:void 0),g===this.getLocalizedLabel("Between")&&(u=this.getLocalizedLabel(o?"GreaterThanOrEqual":"LessThanOrEqual"))),this.dropOptr=new s.DropDownList({dataSource:h,fields:{text:"text",value:"value"},text:u,open:this.dropDownOpen.bind(this),enableRtl:this.parent.enableRtl}),this.dropOptr.appendTo(p);return{fieldElement:l,operator:this.getSelectedValue(u)}},c.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},c.prototype.getSelectedValue=function(e){var i=new r.DataManager(this.optrData).executeLocal((new r.Query).where("text","equal",e));return t.isNullOrUndefined(i[0])?"":i[0].value},c.prototype.dropSelectedVal=function(e,t,i){var r;return r=t.length>0?2===t.length?i?t[0].operator:t[1].operator:i?t[0].operator:void 0:i?"equal":void 0,this.getSelectedText(r)},c.prototype.getSelectedText=function(e){var i=new r.DataManager(this.optrData).executeLocal((new r.Query).where("value","equal",e));return t.isNullOrUndefined(i[0])?"":i[0].text},c.prototype.getExistingPredicate=function(e){_t.getDistinct(this.options.filteredColumns,"field").records;return new r.DataManager(this.options.filteredColumns).executeLocal((new r.Query).where("field","equal",e))},c.prototype.renderFilterUI=function(e,i){var r=this.getExistingPredicate(e),n=t.createElement("table",{className:"e-xlfl-tabel"});i.appendChild(n);var o=this.renderOperatorUI(e,n,"-xlfl-frstoptr",r,!0);this.renderFlValueUI(e,o,"-xlfl-frstvalue",r,!0);var s=t.createElement("tr",{className:"e-xlfl-predicate"});n.appendChild(s),this.renderRadioButton(e,s,r),"string"===this.options.type&&this.renderMatchCase(e,s,"-xlflmtcase",r),o=this.renderOperatorUI(e,n,"-xlfl-secndoptr",r,!1),this.renderFlValueUI(e,o,"-xlfl-secndvalue",r,!1)},c.prototype.renderRadioButton=function(e,i,r){var o=t.createElement("td",{className:"e-xlfl-radio"});i.appendChild(o);var s=t.createElement("div",{className:"e-xlfl-radiodiv"}),l=t.createElement("input",{id:e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),a=t.createElement("input",{id:e+"e-xlfl-secndpredicate",attrs:{type:"radio"}});s.appendChild(l),s.appendChild(a),o.appendChild(s);var c=new n.RadioButton({label:this.getLocalizedLabel("AND"),name:"default",cssClass:"e-xlfl-radio-and",checked:!0,enableRtl:this.parent.enableRtl}),p=new n.RadioButton({label:this.getLocalizedLabel("OR"),name:"default",cssClass:"e-xlfl-radio-or",enableRtl:this.parent.enableRtl});"and"===(2===r.length?r[1].predicate:"and")?(c.checked=!0,p.checked=!1):(p.checked=!0,c.checked=!1),c.appendTo(l),p.appendTo(a)},c.prototype.removeObjects=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];r&&!r.isDestroyed&&r.destroy()}},c.prototype.renderFlValueUI=function(e,i,r,n,o){var s=t.createElement("td",{className:"e-xlfl-value"});i.fieldElement.appendChild(s);var l=t.createElement("div",{className:"e-xlfl-valuediv"}),a=t.createElement("input",{id:e+r});l.appendChild(a),s.appendChild(l);var c,p;n.length>0&&(c=(p=2===n.length?o?n[0]:n[1]:o?n[0]:void 0)&&p.operator===i.operator?p.value:void 0);({string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),datetime:this.renderDate.bind(this)})[this.options.type](this.options,e,a,c,this.parent.enableRtl)},c.prototype.renderMatchCase=function(e,i,r,o){var s=t.createElement("td",{className:"e-xlfl-mtcase"});i.appendChild(s);var l=t.createElement("div",{className:"e-xlfl-matchcasediv"}),a=t.createElement("input",{id:e+r,attrs:{type:"checkbox"}});l.appendChild(a),s.appendChild(l);var c=o.length>0&&(2===o.length?o[1].matchcase:o[0].matchcase);new n.CheckBox({label:"Match Case",enableRtl:this.parent.enableRtl,checked:c}).appendTo(a)},c.prototype.renderDate=function(e,i,r,n,o){var s=(new t.Internationalization).getDatePattern({type:"date",skeleton:e.format},!1);this.datePicker=new l.DatePicker({format:s,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:o,value:new Date(n)}),this.datePicker.appendTo(r)},c.prototype.completeAction=function(e){e.result=q(e.result)},c.prototype.renderNumericTextBox=function(e,t,i,r,n){this.numericTxtObj=new o.NumericTextBox({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:n,value:r}),this.numericTxtObj.appendTo(i)},c.prototype.renderAutoComplete=function(e,t,i,n,o){var l=this,a=new s.AutoComplete({dataSource:e.dataSource instanceof r.DataManager?e.dataSource:new r.DataManager(e.dataSource),fields:{value:t},sortOrder:"Ascending",autofill:!0,focus:function(){a.filterType=l.dlgDiv.querySelector("#"+t+(i.id===t+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,a.ignoreCase="string"!==e.type||!l.dlgDiv.querySelector("#"+t+"-xlflmtcase").ej2_instances[0].checked},placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:o,actionComplete:function(e){e.result=e.result.filter(function(e,t,i){return i.map(function(e){return e[a.fields.value]}).indexOf(e[l.actObj.fields.value])===t})},value:n});a.appendTo(i),this.actObj=a},c.prototype.getModuleName=function(){return"excelFilter"},c}(_t),Rr=function(){function i(e,t,i){this.predicate="and",this.contentRefresh=!0,this.values={},this.nextFlMenuOpen="",this.type={menu:xr,checkbox:_t,excel:Tr},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.fltrDlgDetails={field:"",isOpen:!1},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.addEventListener()}return i.prototype.render=function(){var i=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"filterbar"===this.parent.filterSettings.type&&i.columns.length){var r=this.parent.element.querySelector(".e-filterbar");r&&t.remove(r);var n=new Qt(this.serviceLocator,e.CellType.Filter,i),o=void 0;this.serviceLocator.getService("cellRendererFactory").addCellRenderer(e.CellType.Filter,new yr(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),n.element=t.createElement("tr",{className:"e-filterbar"}),(o=this.generateRow()).data=this.values,this.parent.getHeaderContent().querySelector("thead").appendChild(n.element),this.element=n.render(o,i.getColumns(),null,null,n.element);var s=this.element.querySelector(".e-detailheadercell");s&&(s.className="e-filterbarcell e-mastercell");var l=[].slice.call(this.element.querySelectorAll(".e-grouptopleftcell"));l.length&&l[l.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify(Nt,{case:"filter"})}},i.prototype.destroy=function(){this.filterModule&&this.filterModule.destroy(),this.filterSettings.columns=[],this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),this.element&&(t.remove(this.element),this.parent.frozenColumns&&t.remove(this.parent.getHeaderContent().querySelector(".e-filterbar")))},i.prototype.generateRow=function(e){var t=new Gt({});return t.cells=this.generateCells(),t},i.prototype.generateCells=function(){var t=[];if(this.parent.allowGrouping)for(var i=0,r=this.parent.groupSettings.columns.length;i<r;i++)t.push(this.generateCell({},e.CellType.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&t.push(this.generateCell({},e.CellType.DetailHeader));for(var n=0,o=this.parent.getColumns();n<o.length;n++){var s=o[n];t.push(this.generateCell(s))}return t},i.prototype.generateCell=function(t,i){var r={visible:t.visible,isDataCell:!1,rowId:"",column:t,cellType:i||e.CellType.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new Wt(r)},i.prototype.updateModel=function(){this.currentFilterObject={field:this.fieldName,operator:this.operator,value:this.value,predicate:this.predicate,matchCase:this.matchCase,actualFilterValue:{},actualOperator:{}};var e=this.getFilteredColsIndexByField(this.fieldName);e>-1?this.filterSettings.columns[e]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},i.prototype.getFilteredColsIndexByField=function(e){for(var t=this.filterSettings.columns,i=0,r=t.length;i<r;i++)if(t[i].field===e)return i;return-1},i.prototype.onActionComplete=function(e){var i=this.isRemove?{requestType:"filtering",type:ee}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:ee};this.parent.trigger(ee,t.extend(e,i)),this.isRemove=!1},i.prototype.wireEvents=function(){t.EventHandler.add(this.parent.getHeaderContent(),"mousedown",this.updateSpanClass,this),t.EventHandler.add(this.parent.element,"focusin",this.updateSpanClass,this),t.EventHandler.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandler,this)},i.prototype.unWireEvents=function(){t.EventHandler.remove(this.parent.element,"focusin",this.updateSpanClass),t.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.updateSpanClass),t.EventHandler.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandler)},i.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},i.prototype.initialEnd=function(){if(this.parent.off(Ae,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var e=this.parent;this.contentRefresh=!1;for(var t=0,i=e.filterSettings.columns;t<i.length;t++){var r=i[t];this.filterByColumn(r.field,r.operator,r.value,r.predicate,r.matchCase,r.actualFilterValue,r.actualOperator)}this.updateFilterMsg(),this.contentRefresh=!0}},i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ne,this.enableAfterRender,this),this.parent.on(Ve,this.onActionComplete,this),this.parent.on(He,this.onPropertyChanged,this),this.parent.on(et,this.keyUpHandler,this),this.parent.on(st,this.columnPositionChanged,this),this.parent.frozenColumns?this.parent.on(At,this.render,this):this.parent.on(ze,this.render,this),this.parent.on(Ae,this.initialEnd,this),this.parent.on(Ut,this.filterMenuClose,this),t.EventHandler.add(document,"click",this.clickHandler,this),this.parent.on(jt,this.columnMenuFilter,this),this.parent.on(tt,this.filterIconClickHandler,this))},i.prototype.removeEventListener=function(){t.EventHandler.remove(document,"click",this.clickHandler),this.parent.isDestroyed||(this.parent.off(Ne,this.enableAfterRender),this.parent.off(Ve,this.onActionComplete),this.parent.off(He,this.onPropertyChanged),this.parent.off(et,this.keyUpHandler),this.parent.off(st,this.columnPositionChanged),this.parent.off(ze,this.render),this.parent.off(jt,this.columnMenuFilter),this.parent.off(Ut,this.filterMenuClose),this.parent.off(tt,this.filterIconClickHandler))},i.prototype.filterMenuClose=function(e){this.fltrDlgDetails.isOpen=!1},i.prototype.filterByColumn=function(e,i,r,n,o,s,l){var a,c=this.parent;if(this.column=c.getColumnByField(e),"filterbar"===this.filterSettings.type&&(a=c.getHeaderContent().querySelector("#"+this.column.field+"_filterBarcell")),t.isNullOrUndefined(this.column.allowFiltering)||this.column.allowFiltering)if(F(c))c.notify(St,{instance:this,handler:this.filterByColumn,arg1:e,arg2:i,arg3:r,arg4:n,arg5:o,arg6:s,arg7:l});else{if(this.value=r,this.matchCase=o||!1,this.fieldName=e,this.predicate=n||"and",this.operator=i,r=!t.isNullOrUndefined(r)&&r.toString(),"number"!==this.column.type&&"date"!==this.column.type||(this.matchCase=!0),this.values[this.column.field]=r,c.getColumnHeaderByField(e).setAttribute("aria-filtered","true"),r.length<1||this.checkForSkipInput(this.column,r))return this.filterStatusMsg=r.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();"filterbar"===this.filterSettings.type&&a.value!==r&&(a.value=r),this.checkAlreadyColFiltered(this.column.field)||this.updateModel()}},i.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var r=i[t];switch(r){case"columns":this.contentRefresh&&(this.parent.notify(qe,{currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,columns:this.filterSettings.columns,requestType:"filtering",type:Z}),this.updateFilterMsg());break;case"showFilterBarStatus":e.properties[r]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("")}}},i.prototype.clearFiltering=function(){var e=E(this.filterSettings.columns);if(F(this.parent))this.parent.notify(St,{instance:this,handler:this.clearFiltering});else{for(var t=0,i=e.length;t<i;t++)this.removeFilteredColsByField(e[t].field,!0);this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()}},i.prototype.checkAlreadyColFiltered=function(e){for(var t=0,i=this.filterSettings.columns;t<i.length;t++){var r=i[t];if(r.field===e&&r.value===this.value&&r.operator===this.operator&&r.predicate===this.predicate)return!0}return!1},i.prototype.columnMenuFilter=function(e){this.column=e.col;var i=t.closest(e.target,"#"+e.id);e.isClose&&!i?this.filterModule.closeDialog():i&&this.filterDialogOpen(this.column,e.target)},i.prototype.filterDialogOpen=function(e,i,r,n){var o=this.parent;this.filterModule&&this.filterModule.closeDialog(),this.filterModule=new this.type[e.filter.type||this.parent.filterSettings.type](this.parent,o.filterSettings,this.serviceLocator,this.customOperators,this),this.filterModule.openDialog({type:e.type,field:e.field,displayName:e.headerText,dataSource:e.filter.dataSource||o.dataSource,format:e.format,filteredColumns:o.filterSettings.columns,target:i,sortedColumns:o.sortSettings.columns,formatFn:e.getFormatter(),parserFn:e.getParser(),query:o.query,template:e.getFilterItemTemplate(),hideSearchbox:!t.isNullOrUndefined(e.filter.hideSearchbox)&&e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:o.getLocaleConstants(),position:{X:r,Y:n}})},i.prototype.removeFilteredColsByField=function(e,t){var i=this.filterSettings.columns;if(F(this.parent))this.parent.notify(St,{instance:this,handler:this.removeFilteredColsByField,arg1:e,arg2:t});else{for(var r=0,n=i.length;r<n;r++)if(i[r].field===e){"filterbar"!==this.filterSettings.type||t||(this.parent.getHeaderContent().querySelector("#"+i[r].field+"_filterBarcell"),delete this.values[e]),i.splice(r,1);var o=this.parent.getColumnHeaderByField(e);o.removeAttribute("aria-filtered"),"filterbar"!==this.filterSettings.type&&o.querySelector(".e-icon-filter").classList.remove("e-filtered"),this.isRemove=!0,this.parent.notify(qe,{requestType:"filtering",type:Z});break}this.updateFilterMsg()}},i.prototype.getModuleName=function(){return"filter"},i.prototype.keyUpHandler=function(e){var i=this.parent,r=e.target;if(r&&t.matches(r,".e-filterbar input")){if(this.column=i.getColumnByField(r.id.split("_")[0]),!this.column)return;this.updateCrossIcon(r),"immediate"!==this.filterSettings.mode&&13!==e.keyCode||9===e.keyCode||(this.value=r.value.trim(),this.processFilter(e))}},i.prototype.updateSpanClass=function(e){var t=e.target;if("mousedown"===e.type&&t.classList.contains("e-cancel")){var i=t.previousElementSibling;i.value="",t.classList.add("e-hide"),i.focus(),e.preventDefault()}return"focusin"===e.type&&t.classList.contains("e-filtertext")&&!t.disabled&&(this.lastFilterElement&&this.lastFilterElement.nextElementSibling.classList.add("e-hide"),this.updateCrossIcon(t),this.lastFilterElement=t),"focusin"===e.type&&!t.classList.contains("e-filtertext")&&this.lastFilterElement&&this.lastFilterElement.nextElementSibling.classList.add("e-hide"),!1},i.prototype.updateCrossIcon=function(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")},i.prototype.updateFilterMsg=function(){if("filterbar"===this.filterSettings.type){var e=this.parent,t=this.filterSettings.columns,i=(this.serviceLocator.getService("valueFormatter"),void 0);if(!this.filterSettings.showFilterBarStatus)return;if(t.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var r=0;r<t.length;r++)i=e.getColumnByField(t[r].field),r&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i.headerText+": "+this.values[i.field]}e.allowPaging&&e.updateExternalMessage(this.filterStatusMsg),this.filterStatusMsg=""}},i.prototype.checkForSkipInput=function(e,t){var i,n;if("number"===e.type)n=["="," ","!"],(r.DataUtil.operatorSymbols[t]||n.indexOf(t)>-1)&&(i=!0);else if("string"===e.type){n=[">","<","=","!"];for(var o=0,s=t;o<s.length;o++){var l=s[o];n.indexOf(l)>-1&&(i=!0)}}return i},i.prototype.processFilter=function(e){this.stopTimer(),this.startTimer(e)},i.prototype.startTimer=function(e){var t=this;this.timer=window.setInterval(function(){t.onTimerTick()},13===e.keyCode?0:this.filterSettings.immediateModeDelay)},i.prototype.stopTimer=function(){window.clearInterval(this.timer)},i.prototype.onTimerTick=function(){var e=this.element.querySelector("#"+this.column.field+"_filterBarcell");!e&&this.parent.frozenColumns&&(e=this.parent.getHeaderContent().querySelector("#"+this.column.field+"_filterBarcell"));var i=JSON.parse(JSON.stringify(e.value));if(this.stopTimer(),!t.isNullOrUndefined(this.column.filterBarTemplate)){var r=this.column.filterBarTemplate.read;"string"==typeof r&&(r=t.getValue(r,window)),this.value=r.call(this,e)}""!==this.value?(this.validateFilterValue(this.value),this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.matchCase),this.values[this.column.field]=i,e.value=i,this.updateFilterMsg()):this.removeFilteredColsByField(this.column.field)},i.prototype.validateFilterValue=function(e){var i,r;this.parent;switch(this.matchCase=!0,this.column.type){case"number":this.operator=this.filterOperators.equal,i=[">","<","=","!"];for(var n=0;n<e.length;n++)if(i.indexOf(e[n])>-1){r=n;break}this.getOperator(e.substring(r)),0!==r&&(this.value=e.substring(0,r)),""!==this.value&&e.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,this.getOperator(e),""!==this.value&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),t.isNullOrUndefined(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,"*"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(e.length-1)?(this.value=this.value.slice(0,-1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.endsWith):this.operator=this.filterOperators.startsWith;break;case"boolean":"true"===e.toLowerCase()||"1"===e?this.value=!0:"false"===e.toLowerCase()||"0"===e?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.operator=this.filterOperators.equal}},i.prototype.getOperator=function(e){var i=e.charAt(0),n=e.slice(0,2),o=t.extend({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},r.DataUtil.operatorSymbols);(o.hasOwnProperty(i)||o.hasOwnProperty(n))&&(this.operator=o[i],this.value=e.substring(1),this.operator||(this.operator=o[n],this.value=e.substring(2))),this.operator!==this.filterOperators.lessThan&&this.operator!==this.filterOperators.greaterThan||"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},i.prototype.columnPositionChanged=function(e){if("filterbar"===this.parent.filterSettings.type){var t=[].slice.call(this.element.querySelectorAll(".e-filterbarcell"));t.splice(e.toIndex,0,t.splice(e.fromIndex,1)[0]),this.element.innerHTML="";for(var i=0,r=t;i<r.length;i++){var n=r[i];this.element.appendChild(n)}}},i.prototype.getLocalizedCustomOperators=function(){var e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterThan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterThanOrEqual",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessThan",text:this.l10n.getConstant("LessThan")},{value:"lessThanOrEqual",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notEqual",text:this.l10n.getConstant("NotEqual")}];this.customOperators={stringOperator:[{value:"startsWith",text:this.l10n.getConstant("StartsWith")},{value:"endsWith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notEqual",text:this.l10n.getConstant("NotEqual")}],numberOperator:e,dateOperator:e,datetimeOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notEqual",text:this.l10n.getConstant("NotEqual")}]}},i.prototype.filterIconClickHandler=function(e){var t=e.target;if(t.classList.contains("e-filtermenudiv")&&("menu"===this.parent.filterSettings.type||"checkbox"===this.parent.filterSettings.type||"excel"===this.parent.filterSettings.type)){var i=this.parent,r=i.getColumnByUid(b(t,"e-headercell").firstElementChild.getAttribute("e-mappinguid")),n=i.element.getBoundingClientRect(),o=t.getBoundingClientRect();if(this.column=r,this.fltrDlgDetails.field===r.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:r.field,isOpen:!0},this.filterDialogOpen(this.column,t,o.right-n.left,o.bottom-n.top)}},i.prototype.clickHandler=function(e){if("menu"===this.parent.filterSettings.type||"checkbox"===this.parent.filterSettings.type||"excel"===this.parent.filterSettings.type){this.parent;var i=e.target,r=i.classList.contains("e-day");if(b(i,"e-filter-popup")||i.classList.contains("e-filtermenudiv"))return;!this.filterModule||b(i,"e-popup-wrapper")||t.closest(i,".e-filter-item.e-menu-item")||b(i,"e-popup")||r||this.filterModule.closeDialog(i)}},i.prototype.filterHandler=function(e){for(var t,i=new r.DataManager(this.filterSettings.columns),n=(new r.Query).where("field",this.filterOperators.equal,e.field),o=i.executeLocal(n),s=0;s<o.length;s++){for(var l=-1,a=0;a<this.filterSettings.columns.length;a++)if(o[s].field===this.filterSettings.columns[a].field){l=a;break}-1!==l&&this.filterSettings.columns.splice(l,1)}var c=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter";t=this.parent.getColumnHeaderByField(e.field).querySelector(c),"filtering"===e.action?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&t&&t.classList.add("e-filtered")):(t&&t.classList.remove("e-filtered"),this.parent.refresh()),this.parent.dataBind()},i}(),Ir={root:"e-rhandler",suppress:"e-rsuppress",icon:"e-ricon",helper:"e-rhelper",header:"th.e-headercell",cursor:"e-rcursor"},Dr=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.parent.isDestroyed||(this.widthService=new Di(e),this.addEventListener())}return e.prototype.autoFitColumns=function(e){var t=void 0===e||null===e||e.length<=0?this.parent.getColumns().map(function(e){return e.field}):"string"==typeof e?[e]:e;this.findColumn(t)},e.prototype.resizeColumn=function(e,i,r){var n=this.parent,o=0,s=this.parent.getHeaderTable(),l=this.parent.getContentTable(),a=n.getHeaderTable().querySelector("tr").querySelectorAll(".e-grouptopleftcell"),c=0;if(a.length>0)for(var p=0;p<a.length;p++)c+=a[p].offsetWidth;var d=r||this.parent.getUidByColumnField(e),h=this.parent.getNormalizedColumnIndex(d),u=[s.querySelectorAll("th")[h].cloneNode(!0)],g=l.querySelectorAll("td:nth-child("+(h+1)+")"),f=[];for(p=0;p<g.length;p++)f[p]=g[p].cloneNode(!0);var m=this.createTable(s,u,"e-gridheader"),y=this.createTable(l,f,"e-gridcontent"),v=n.getColumns()[i];v.width=m>y?t.formatUnit(m):t.formatUnit(y);if(this.widthService.setColumnWidth(n.getColumns()[i]),!this.parent.allowResizing){!1===n.getColumns().some(function(e){return null===e.width||void 0===e.width||e.width.length<=0})&&n.getColumns().forEach(function(e){e.visible&&(o+=parseInt(e.width,10))});var C=o+c;o>0&&(s.style.width=t.formatUnit(C),l.style.width=t.formatUnit(C))}var w=s.offsetWidth;n.getContent().scrollWidth>w?(s.classList.add("e-tableborder"),l.classList.add("e-tableborder")):(s.classList.remove("e-tableborder"),l.classList.remove("e-tableborder"))},e.prototype.destroy=function(){this.widthService=null,this.unwireEvents(),this.removeEventListener()},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){var t=this;e.forEach(function(e){var i=e,r=t.parent.getColumnIndexByField(i);!0===t.parent.getColumns()[r].visible&&t.resizeColumn(i,r)})},e.prototype.createTable=function(e,i,r){var n=t.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var o=t.createElement("div");o.className=r;var s=t.createElement("table");s.className=e.className,s.style.cssText="table-layout: auto;width: auto";var l=t.createElement("tr");i.forEach(function(t){var i=l.cloneNode();i.className=e.querySelector("tr").className,i.appendChild(t),s.appendChild(i)}),o.appendChild(s),n.appendChild(o),document.body.appendChild(n);var a=s.getBoundingClientRect().width;return document.body.removeChild(n),Math.ceil(a)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.frozenColumns?this.parent.on(At,this.render,this):this.parent.on(ze,this.render,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(ze,this.render)},e.prototype.render=function(){this.wireEvents(),this.setHandlerHeight()},e.prototype.wireEvents=function(){var e=this;this.getResizeHandlers().forEach(function(i){i.style.height=i.parentElement.offsetHeight+"px",t.EventHandler.add(i,t.Browser.touchStartEvent,e.resizeStart,e),t.EventHandler.add(i,gt,e.callAutoFit,e)})},e.prototype.unwireEvents=function(){var e=this;this.getResizeHandlers().forEach(function(i){t.EventHandler.remove(i,t.Browser.touchStartEvent,e.resizeStart),t.EventHandler.remove(i,gt,e.callAutoFit)})},e.prototype.getResizeHandlers=function(){return this.parent.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+Ir.root)):[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+Ir.root))},e.prototype.setHandlerHeight=function(){[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+Ir.suppress)).forEach(function(e){e.style.height=e.parentElement.offsetHeight+"px"})},e.prototype.callAutoFit=function(e){var t=this.getTargetColumn(e);this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid)},e.prototype.resizeStart=function(e){if(!this.helper){if(0===this.getScrollBarWidth()){for(var i=0,r=this.refreshColumnWidth();i<r.length;i++){var n=r[i];this.widthService.setColumnWidth(n)}this.widthService.setWidthToTable()}this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.parent.enableRtl?this.minMove=parseInt(this.column.width.toString(),10)-(this.column.minWidth?parseInt(this.column.minWidth.toString(),10):0):this.minMove=(this.column.minWidth?parseInt(this.column.minWidth.toString(),10):0)-parseInt(this.column.width.toString(),10),this.minMove+=this.pageX}if(t.Browser.isDevice&&!this.helper.classList.contains(Ir.icon))this.helper.classList.add(Ir.icon),t.EventHandler.add(document,t.Browser.touchStartEvent,this.removeHelper,this),t.EventHandler.add(this.helper,t.Browser.touchStartEvent,this.resizeStart,this);else{var o={e:e,column:this.column};if(this.parent.trigger("resizeStart",o),o.cancel)return void this.cancelResizeAction();t.EventHandler.add(document,t.Browser.touchEndEvent,this.resizeEnd,this),t.EventHandler.add(this.parent.element,t.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add")}},e.prototype.cancelResizeAction=function(e){e&&(t.EventHandler.remove(this.parent.element,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),t.Browser.isDevice&&(t.EventHandler.remove(document,t.Browser.touchStartEvent,this.removeHelper),t.EventHandler.remove(this.helper,t.Browser.touchStartEvent,this.resizeStart)),t.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},e.prototype.resizing=function(e){var i=this.getPointX(e),r=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,n={width:parseInt(this.widthService.getWidth(this.column).toString(),10)+r,minWidth:this.column.minWidth?parseInt(this.column.minWidth.toString(),10):null,maxWidth:this.column.maxWidth?parseInt(this.column.maxWidth.toString(),10):null},o=this.getWidth(n.width,n.minWidth,n.maxWidth);if((!this.parent.enableRtl&&this.minMove>=i||this.parent.enableRtl&&this.minMove<=i)&&(o=this.column.minWidth?parseInt(this.column.minWidth.toString(),10):0,this.pageX=i=this.minMove),o!==parseInt(this.column.width.toString(),10)){this.pageX=i,this.column.width=t.formatUnit(o);var s={e:e,column:this.column};if(this.parent.trigger("onResize",s),s.cancel)return void this.cancelResizeAction(!0);this.widthService.setColumnWidth(this.column,null,"resize"),this.updateHelper()}this.isDblClk=!1},e.prototype.resizeEnd=function(e){if(this.helper&&!this.parent.isDestroyed){t.EventHandler.remove(this.parent.element,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),t.detach(this.helper);var i={e:e,column:this.column};this.parent.trigger("resizeStop",i),t.closest(this.element,".e-headercell").classList.add("e-resized"),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderTable().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var r=i[t],n=0,o=e;n<o.length;n++){var s=o[n];if(r.querySelector("[e-mappinguid]")&&r.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===s.uid&&s.visible){s.width=r.getBoundingClientRect().width;break}}return e},e.prototype.getTargetColumn=function(e){var i=t.closest(e.target,Ir.header).querySelector(".e-headercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,r=t;i<r.length;i++){r[i].classList[e](Ir.cursor)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=t.createElement("div",{className:Ir.helper}),this.parent.element.appendChild(this.helper);var e=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),i=t.closest(this.element,Ir.header),r=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));this.parent.frozenColumns&&(i.parentElement.children.length!==this.parent.frozenColumns?r.splice(0,r.length/2):r.splice(r.length/2,r.length/2));for(var n=r.indexOf(i.parentElement);n<r.length;n++)e+=r[n].offsetHeight;var o=this.calcPos(i);o.left+=this.parent.enableRtl?-1:i.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+o.top+"px; left:"+Math.floor(o.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?P():0},e.prototype.removeHelper=function(e){var i=e.target.classList;i.contains(Ir.root)||i.contains(Ir.icon)||!this.helper||(t.EventHandler.remove(document,t.Browser.touchStartEvent,this.removeHelper),t.EventHandler.remove(this.helper,t.Browser.touchStartEvent,this.resizeStart),t.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=t.closest(this.element,Ir.header),i=Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2));i>this.parentElementWidth?this.helper.style.left=this.parentElementWidth-2+"px":this.helper.style.left=i+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),r=e.ownerDocument,n=e.offsetParent||r.documentElement;n&&(n===r.body||n===r.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=t.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),kr=function(){function e(e){this.parent=e,this.parent.isDestroyed||(this.parent.on(pt,this.headerDrop,this),this.parent.on(Ne,this.enableAfterRender,this),this.parent.on(We,this.onActionComplete,this),this.parent.on(he,this.drag,this),this.parent.on(de,this.dragStart,this),this.parent.on(ct,this.dragStop,this),this.parent.on(pt,this.headerDrop,this),this.parent.on(ze,this.createReorderElement,this))}return e.prototype.chkDropPosition=function(e,t){return e.parentElement.isEqualNode(t.parentElement)&&this.targetParentContainerIndex(e,t)>-1},e.prototype.chkDropAllCols=function(e,t){for(var i,r=[].slice.call(this.parent.element.getElementsByClassName("e-headercell"));!i&&r.length>0;)i=e!==r.pop()&&this.targetParentContainerIndex(e,t)>-1;return i},e.prototype.findColParent=function(e,t,i){i=i;for(var r=0,n=t.length;r<n;r++){if(e===t[r])return!0;if(t[r].columns){var o=i.length;if(i.push(t[r]),this.findColParent(e,t[r].columns,i))return!0;i.splice(o,i.length-o)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],i=[],r=0,n=e.length;r<n;r++)t.push(e[r]),e[r].columns&&(i=i.concat(e[r].columns));return i.length&&(t=t.concat(this.getColumnsModel(i))),t},e.prototype.headerDrop=function(e){this.parent;if(t.closest(e.target,"th")){var i=t.closest(e.target,".e-headercell");if(i&&this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i)){var r=[].slice.call(this.parent.element.getElementsByClassName("e-headercell")),n=S(this.element,r),o=this.getColumnsModel(this.parent.columns)[n],s=this.targetParentContainerIndex(this.element,i);this.moveColumns(s,o)}}},e.prototype.isActionPrevent=function(e){return F(e)},e.prototype.moveColumns=function(e,t){var i=this.parent;if(this.isActionPrevent(i))i.notify(St,{instance:this,handler:this.moveColumns,arg1:e,arg2:t});else{var r=this.getColParent(t,this.parent.columns),n=r?r.columns:this.parent.columns,o=x(t,n);i.allowReordering&&o!==e&&-1!==o&&-1!==e&&(n.splice(e,0,n.splice(o,1)[0]),i.getColumns(!0),i.notify(st,{fromIndex:e,toIndex:o}),i.notify(qe,{type:Z,requestType:"reorder"}))}},e.prototype.targetParentContainerIndex=function(e,t){var i=[].slice.call(this.parent.element.getElementsByClassName("e-headercell")),r=this.parent.columns,n=this.getColumnsModel(r),o=this.getColParent(n[S(e,i)],r);return r=o?o.columns:r,x(n[S(t,i)],r)},e.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},e.prototype.reorderColumns=function(e,t){var i=this.parent.getColumnByField(t),r=this.getColParent(i,this.parent.columns),n=x(i,r?r.columns:this.parent.columns);n>-1&&this.moveColumns(n,this.parent.getColumnByField(e))},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.createReorderElement()},e.prototype.createReorderElement=function(){var e=this.parent.element.querySelector(".e-headercontent");this.upArrow=e.appendChild(t.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(t.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},e.prototype.onActionComplete=function(e){this.parent.trigger(ee,t.extend(e,{type:ee}))},e.prototype.destroy=function(){this.parent.isDestroyed||(t.remove(this.upArrow),t.remove(this.downArrow),this.parent.off(pt,this.headerDrop),this.parent.off(Ne,this.enableAfterRender),this.parent.off(We,this.onActionComplete),this.parent.off(he,this.drag),this.parent.off(de,this.dragStart),this.parent.off(ct,this.dragStop),this.parent.off(ze,this.createReorderElement))},e.prototype.drag=function(e){var i=this.parent,r=e.target,n=t.closest(r,".e-headercell:not(.e-stackedHeaderCell)"),o=i.element.querySelector(".e-cloneproperties"),s=this.x>R(e.event).x+i.getContent().firstElementChild.scrollLeft;t.removeClass(i.getHeaderTable().querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),t.classList(o,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),n&&!n.isEqualNode(this.element)&&(r=n,this.chkDropPosition(this.element,r)&&this.chkDropAllCols(this.element,r)?(this.updateArrowPosition(r,s),t.classList(r,["e-allowDrop","e-reorderindicate"],[])):i.allowGrouping&&b(e.target,"e-groupdroparea")||t.classList(o,["e-notallowedcur"],["e-defaultcur"])),i.trigger(he,{target:r,draggableType:"headercell",column:e.column})},e.prototype.updateScrollPostion=function(e){var t=this,i=R(e).x,r=this.parent.element.getBoundingClientRect(),n=this.parent.getContent().firstElementChild;i>r.left&&i<r.left+35?this.timer=window.setInterval(function(){t.setScrollLeft(n,!0)},50):i<r.right&&i>r.right-35&&(this.timer=window.setInterval(function(){t.setScrollLeft(n,!1)},50))},e.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var i=e.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect();t&&i.left<r.left||!t&&i.right>r.right||(this.upArrow.style.top=i.top+i.height-r.top+"px",this.downArrow.style.top=i.top-r.top-4+"px",this.upArrow.style.left=this.downArrow.style.left=(t?i.left:i.right)-r.left-4+"px",this.setDisplay(""))},e.prototype.dragStart=function(e){var t=this.parent,i=e.target;this.element=i.classList.contains("e-headercell")?i:b(i,"e-headercell"),this.x=R(e.event).x+t.getContent().firstElementChild.scrollLeft,t.trigger(de,{target:i,draggableType:"headercell",column:e.column})},e.prototype.dragStop=function(e){var i=this.parent;this.setDisplay("none"),this.stopTimer(),e.cancel||i.trigger(ue,{target:e.target,draggableType:"headercell",column:e.column}),t.removeClass(i.getHeaderTable().querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),Or=function(){function e(e){var i=this;this.selectedRows=[],this.helper=function(e){var r=i.parent;if(document.getElementsByClassName("e-griddragarea").length||!e.sender.target.classList.contains("e-selectionbackground")&&"single"!==r.selectionSettings.type)return!1;var n=t.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+r.element.offsetWidth}),o=t.createElement("table",{styles:"width:"+r.element.offsetWidth}),s=t.createElement("tbody");if("row"===r.selectionSettings.mode&&"single"===r.selectionSettings.type){var l=parseInt(e.sender.target.parentElement.getAttribute("aria-rowindex"),10);r.selectRow(l)}for(var a=r.getSelectedRows(),c=0,p=a.length;c<p;c++){var d=a[c].cloneNode(!0);T(d,".e-indentcell"),T(d,".e-detailrowcollapse"),T(d,".e-detailrowexpand"),s.appendChild(d)}return o.appendChild(s),n.appendChild(o),r.element.appendChild(n),n},this.dragStart=function(e){var t=i.parent;if(!document.getElementsByClassName("e-griddragarea").length){t.trigger(ge,{rows:t.getSelectedRows(),target:e.target,draggableType:"rows",data:t.getSelectedRecords()});var r=document.getElementById(t.rowDropSettings.targetID);t.rowDropSettings.targetID&&r&&r.ej2_instances&&r.ej2_instances[0].getContent().classList.add("e-allowRowDrop"),i.isDragStop=!1}},this.drag=function(e){var r=i.parent,n=i.parent.element.querySelector(".e-cloneproperties"),o=i.getElementFromPosition(n,e.event);t.classList(n,["e-defaultcur"],["e-notallowedcur"]),r.trigger(fe,{rows:r.getSelectedRows(),target:o,draggableType:"rows",data:r.getSelectedRecords()}),r.element.classList.add("e-rowdrag"),b(o,"e-gridcontent")&&b(n.parentElement,"e-grid").id!==b(o,"e-grid").id||t.classList(n,["e-notallowedcur"],["e-defaultcur"])},this.dragStop=function(e){var r=i.parent;if(!i.parent.isDestroyed){var n=i.getElementFromPosition(e.helper,e.event);r.element.classList.remove("e-rowdrag");var o=document.getElementById(r.rowDropSettings.targetID);r.rowDropSettings.targetID&&o&&o.ej2_instances&&o.ej2_instances[0].getContent().classList.remove("e-allowRowDrop"),r.trigger(me,{target:n,draggableType:"rows",rows:r.getSelectedRows(),data:r.getSelectedRecords()}),b(n,"e-gridcontent")||t.remove(e.helper)}},this.parent=e,this.parent.isDestroyed||(this.parent.on(Le,this.initializeDrag,this),this.parent.on(ue,this.columnDrop,this),this.parent.on(Ke,this.onActionComplete,this),this.parent.on(Ne,this.enableAfterRender,this))}return e.prototype.initializeDrag=function(){var e=this.parent;new t.Draggable(e.getContent(),{dragTarget:".e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.getElementFromPosition=function(e,t){var i,r=R(t);return e.style.display="none",i=document.elementFromPoint(r.x,r.y),e.style.display="",i},e.prototype.onActionComplete=function(e){this.parent.trigger(ee,t.extend(e,{type:ee}))},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.columnDrop=function(e){var i=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")){var r=t.closest(e.target,"tr"),n=void 0;if(e.droppedElement.parentElement.id===i.element.id)return;if((n=e.droppedElement.parentElement.ej2_instances[0]).element.id!==i.element.id&&n.rowDropSettings.targetID!==i.element.id)return;var o=n.getSelectedRecords(),s=this.getTargetIdx(r);isNaN(s)&&(s=0),i.allowPaging&&(s=s+i.pageSettings.currentPage*i.pageSettings.pageSize-i.pageSettings.pageSize),i.notify(lt,{toIndex:s,records:o}),i.notify(qe,{type:Z,requestType:"rowdraganddrop"});var l=n.getSelectedRowIndexes(),a=n.allowPaging?n.pageSettings.currentPage*n.pageSettings.pageSize-n.pageSettings.pageSize:0;this.selectedRows=[];for(var c=0,p=o.length;c<p;c++)this.selectedRows.push(a+l[c]);n.notify(at,{indexes:this.selectedRows,records:o}),n.notify(qe,{type:Z,requestType:"rowdraganddrop"})}},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.initializeDrag()},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Le,this.initializeDrag),this.parent.off(ue,this.columnDrop),this.parent.off(Ke,this.onActionComplete),this.parent.off(Ne,this.enableAfterRender))},e.prototype.getModuleName=function(){return"rowDragAndDrop"},e}(),Pr=function(){function e(e,i,r,n){var o=this;this.visualElement=t.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var t=o.parent,i=e.sender.target,r=i.classList.contains("e-groupheadercell")?i:b(i,"e-groupheadercell");return!!r&&(o.column=t.getColumnByField(r.firstElementChild.getAttribute("ej-mappingname")),o.visualElement.textContent=r.textContent,o.visualElement.style.width=r.offsetWidth+2+"px",o.visualElement.style.height=r.offsetHeight+2+"px",o.visualElement.setAttribute("e-mappinguid",o.column.uid),t.element.appendChild(o.visualElement),o.visualElement)},this.dragStart=function(){o.parent.element.classList.add("e-ungroupdrag")},this.drag=function(e){var i=e.target,r=o.parent.element.querySelector(".e-cloneproperties");o.parent.trigger(he,{target:i,draggableType:"headercell",column:o.column}),t.classList(r,["e-defaultcur"],["e-notallowedcur"]),b(i,"e-gridcontent")||b(i,"e-headercell")||t.classList(r,["e-notallowedcur"],["e-defaultcur"])},this.dragStop=function(e){o.parent.element.classList.remove("e-ungroupdrag"),b(e.target,"e-gridcontent")||b(e.target,"e-gridheader")||t.remove(e.helper)},this.drop=function(e){var i=o.parent,r=i.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));o.element.classList.remove("e-hover"),t.remove(e.droppedElement),o.aria.setDropTarget(o.parent.element.querySelector(".e-groupdroparea"),!1),o.aria.setGrabbed(o.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),t.isNullOrUndefined(r)||!1===r.allowGrouping||b(i.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==i.element.getAttribute("id")||o.groupColumn(r.field)},this.contentRefresh=!0,this.aria=new oi,this.parent=e,this.groupSettings=i,this.serviceLocator=n,this.sortedColumns=r,this.focus=n.getService("focus"),this.addEventListener()}return e.prototype.columnDrag=function(e){this.parent;var i=this.parent.element.querySelector(".e-cloneproperties");t.classList(i,["e-defaultcur"],["e-notallowedcur"]),b(e.target,"e-groupdroparea")||this.parent.allowReordering&&b(e.target,"e-headercell")||t.classList(i,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){this.parent;var t=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(t,e.column.allowGrouping);var i=e.target.classList.contains("e-headercell")?e.target:b(e.target,"e-headercell");this.aria.setGrabbed(i,!0,!e.column.allowGrouping)}},e.prototype.columnDrop=function(e){var i=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var r=i.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(t.isNullOrUndefined(r)||!1===r.allowGrouping||b(i.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==i.element.getAttribute("id"))return;this.ungroupColumn(r.field)}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ne,this.enableAfterRender,this),this.parent.on(Qe,this.onActionComplete,this),this.parent.on(Xe,this.onActionComplete,this),this.parent.on(He,this.onPropertyChanged,this),this.parent.on(tt,this.clickHandler,this),this.parent.on(he,this.columnDrag,this),this.parent.on(de,this.columnDragStart,this),this.parent.on(ue,this.columnDrop,this),this.parent.on(ze,this.refreshSortIcons,this),this.parent.on(_e,this.refreshSortIcons,this),this.parent.on(et,this.keyPressHandler,this),this.parent.on(Ae,this.initialEnd,this),this.parent.on(Le,this.render,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Le,this.render),this.parent.off(Ne,this.enableAfterRender),this.parent.off(Qe,this.onActionComplete),this.parent.off(Xe,this.onActionComplete),this.parent.off(He,this.onPropertyChanged),this.parent.off(tt,this.clickHandler),this.parent.off(he,this.columnDrag),this.parent.off(de,this.columnDragStart),this.parent.off(ue,this.columnDrop),this.parent.off(ze,this.refreshSortIcons),this.parent.off(_e,this.refreshSortIcons),this.parent.off(et,this.keyPressHandler))},e.prototype.initialEnd=function(){var e=this.parent;if(this.parent.off(Ae,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var t=0,i=e.groupSettings.columns;t<i.length;t++){var r=i[t];this.groupColumn(r)}this.contentRefresh=!0}},e.prototype.keyPressHandler=function(e){var t=this.parent;if(this.groupSettings.columns.length)switch(e.preventDefault(),e.action){case"altDownArrow":case"altUpArrow":var i=t.allowSelection?t.getSelectedRowIndexes():[];if(i.length){for(var r=t.getContentTable().querySelector("tbody").children,n=void 0,o=t.getDataRows()[i[i.length-1]].rowIndex;o>=0;o--)if(!r[o].classList.contains("e-row")&&!r[o].classList.contains("e-detailrow")){n=r[o];break}this.expandCollapseRows(n.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(this.parent.isEdit)return;var s=this.focus.getFocusedElement().parentElement.querySelector('[class^="e-record"]');if(!s)break;this.expandCollapseRows(s)}},e.prototype.clickHandler=function(e){this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)},e.prototype.unGroupFromTarget=function(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))},e.prototype.toogleGroupFromHeader=function(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))},e.prototype.applySortFromTarget=function(e){var i=this.parent,r=t.closest(e,".e-groupheadercell");if(i.allowSorting&&r&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")){var n=r.firstElementChild.getAttribute("ej-mappingname");i.getColumnHeaderByField(n).querySelectorAll(".e-ascending").length?i.sortColumn(n,"descending",!0):i.sortColumn(n,"ascending",!0)}},e.prototype.expandCollapseRows=function(e){var i=b(e,"e-recordplusexpand")||b(e,"e-recordpluscollapse");if(i){var r=i.cellIndex,n=i.parentElement.rowIndex,o=this.parent.getContentTable().querySelector("tbody").children,s=[].slice.call(o).slice(n+1,o.length),l=void 0,a=void 0,c=[],p=i.parentElement.querySelectorAll(".e-indentcell").length,d=!1;i.classList.contains("e-recordpluscollapse")?(t.addClass([i],"e-recordplusexpand"),t.removeClass([i],"e-recordpluscollapse"),i.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",d=!0):(l=!0,t.removeClass([i],"e-recordplusexpand"),t.addClass([i],"e-recordpluscollapse"),i.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow"),this.aria.setExpand(i,d);for(var h=0,u=s.length;h<u&&(s[h].querySelectorAll("td")[r]&&s[h].querySelectorAll("td")[r].classList.contains("e-indentcell")&&s);h++)l?s[h].style.display="none":s[h].querySelectorAll(".e-indentcell").length===p+1&&(s[h].style.display="",(a=s[h].querySelector(".e-recordplusexpand"))&&c.push(a),s[h].classList.contains("e-detailrow")&&s[h-1].querySelectorAll(".e-detailrowcollapse").length&&(s[h].style.display="none"));for(h=0,u=c.length;h<u;h++)t.removeClass([c[h]],"e-recordplusexpand"),t.addClass([c[h]],"e-recordpluscollapse"),c[h].firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",this.expandCollapseRows(c[h])}},e.prototype.expandCollapse=function(e){for(var t,i=this.parent.getContentTable().querySelector("tbody").children,r=0,n=i.length;r<n;r++)i[r].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((t=i[r].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"))&&(t.className=e?"e-recordplusexpand":"e-recordpluscollapse",t.firstElementChild.className=e?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"),i[r].firstElementChild.classList.contains("e-recordplusexpand")||i[r].firstElementChild.classList.contains("e-recordpluscollapse")||(i[r].style.display=e?"":"none")):i[r].style.display=e?"":"none"},e.prototype.expandAll=function(){this.expandCollapse(!0)},e.prototype.collapseAll=function(){this.expandCollapse(!1)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn()},e.prototype.renderGroupDropArea=function(){var e=this.parent.element.querySelector(".e-groupdroparea");e&&t.remove(e),this.element=t.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},e.prototype.updateGroupDropArea=function(){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}else this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&1===this.groupSettings.columns.length&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){new t.Draggable(this.element,{dragTarget:".e-groupheadercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.initializeGHeaderDrop=function(){this.parent,new t.Droppable(this.element,{accept:".e-dragclone",drop:this.drop})},e.prototype.groupColumn=function(e){var i=this.parent,r=i.getColumnByField(e);t.isNullOrUndefined(r)||!1===r.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(e)>-1||(F(i)?i.notify(St,{instance:this,handler:this.groupColumn,arg1:e}):(r.visible=i.groupSettings.showGroupedColumn,this.colName=e,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea()))},e.prototype.ungroupColumn=function(e){var i=this.parent,r=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(t){return t.field===e})[0]:i.getColumnByField(e);if(!(t.isNullOrUndefined(r)||!1===r.allowGrouping||this.groupSettings.columns.indexOf(e)<0))if(F(i))i.notify(St,{instance:this,handler:this.ungroupColumn,arg1:e});else{r.visible=!0,this.colName=r.field;var n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(e)<0)for(var o=0,s=i.sortSettings.columns.length;o<s;o++)if(e===i.sortSettings.columns[o].field){i.sortSettings.columns.splice(o,1);break}this.groupSettings.columns=n,i.allowGrouping&&this.parent.dataBind()}},e.prototype.updateModel=function(){var e=this.parent,t=0,i=JSON.parse(JSON.stringify(this.groupSettings.columns));for(i.push(this.colName),this.groupSettings.columns=i;t<e.sortSettings.columns.length&&e.sortSettings.columns[t].field!==this.colName;)t++;e.sortSettings.columns.length===t?e.sortSettings.columns.push({field:this.colName,direction:"ascending"}):e.allowSorting||(e.sortSettings.columns[t].direction="ascending"),this.parent.dataBind()},e.prototype.onActionComplete=function(e){this.parent;"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var i=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:ee}:{requestType:"ungrouping",type:ee};this.parent.trigger(ee,t.extend(e,i))},e.prototype.addColToGroupDrop=function(e){var i=this.parent,r="ascending",n=t.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=t.createElement("div",{attrs:{"ej-mappingname":e}}),s=this.parent.getColumnByField(e),l=i.getColumnHeaderByUid(s.uid);t.isNullOrUndefined(s.headerTemplate)?o.appendChild(t.createElement("span",{className:"e-grouptext",innerHTML:s.headerText,attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})):(-1!==s.headerTemplate.indexOf("#")?o.innerHTML=document.querySelector(s.headerTemplate).innerHTML.trim():o.innerHTML=s.headerTemplate,o.firstElementChild.classList.add("e-grouptext")),this.groupSettings.showToggleButton&&o.appendChild(t.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"ungroup button"}})),l.querySelectorAll(".e-ascending,.e-descending").length&&(r=l.querySelector(".e-ascending")?"ascending":"descending"),o.appendChild(t.createElement("span",{className:"e-groupsort e-icons e-"+r+" e-icon-"+r,innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),o.appendChild(t.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":"ungroup the grouped column"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),n.appendChild(o),this.element.appendChild(n)},e.prototype.refreshToggleBtn=function(e){if(this.groupSettings.showToggleButton)for(var i=[].slice.call(this.parent.element.getElementsByClassName("e-headercelldiv")),r=0,n=i.length;r<n;r++)if(!i[r].classList.contains("e-emptycell")){var o=this.parent.getColumnByUid(i[r].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!o.showColumnMenu)&&(i[r].querySelectorAll(".e-grptogglebtn").length&&t.remove(i[r].querySelectorAll(".e-grptogglebtn")[0]),e||i[r].appendChild(t.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(o.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":"Group button"}})))}},e.prototype.removeColFromGroupDrop=function(e){t.remove(this.getGHeaderCell(e)),this.updateGroupDropArea()},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){switch(i[t]){case"columns":if(this.contentRefresh){var r=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:Z}:{requestType:"ungrouping",type:Z};this.parent.notify(qe,r)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?this.element.style.display="":this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(qe,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader()}}},e.prototype.updateGroupedColumn=function(e){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[t]).visible=e},e.prototype.updateButtonVisibility=function(e,t){for(var i=[].slice.call(this.element.querySelectorAll("."+t)),r=0;r<i.length;r++)i[r].style.display=e?"":"none"},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},e.prototype.destroy=function(){this.clearGrouping(),this.removeEventListener(),this.refreshToggleBtn(!0),t.remove(this.element)},e.prototype.clearGrouping=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var t=0,i=e.length;t<i;t++)this.ungroupColumn(e[t]);this.contentRefresh=!0},e.prototype.getModuleName=function(){return"group"},e.prototype.refreshSortIcons=function(e){var i,r=this.parent,n=r.sortSettings.columns,o=r.groupSettings.columns,s=this.parent.getColumns().map(function(e){return e.field});this.refreshToggleBtn();for(var l=0,a=n.length;l<a;l++)-1!==s.indexOf(n[l].field)&&(i=r.getColumnHeaderByField(n[l].field),!r.allowSorting&&(this.sortedColumns.indexOf(n[l].field)>-1||this.groupSettings.columns.indexOf(n[l].field)>-1)?(t.classList(i.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),n.length>1&&i.querySelector(".e-headercelldiv").appendChild(t.createElement("span",{className:"e-sortnumber",innerHTML:(l+1).toString()}))):this.getGHeaderCell(n[l].field)&&this.getGHeaderCell(n[l].field).querySelectorAll(".e-groupsort").length&&("ascending"===n[l].direction?t.classList(this.getGHeaderCell(n[l].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):t.classList(this.getGHeaderCell(n[l].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(l=0,a=o.length;l<a;l++)-1!==s.indexOf(o[l])&&r.getColumnHeaderByField(o[l]).setAttribute("aria-grouped","true")},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector("[ej-mappingname="+e+"]")?this.element.querySelector("[ej-mappingname="+e+"]").parentElement:null},e}(),Mr=function(){function i(e,t){this.aria=new oi,this.parent=e,this.parent.isDestroyed||(this.focus=t.getService("focus"),this.parent.on(tt,this.clickHandler,this),this.parent.on(it,this.destroy,this),this.parent.on(et,this.keyPressHandler,this))}return i.prototype.clickHandler=function(e){this.toogleExpandcollapse(t.closest(e.target,"td"))},i.prototype.toogleExpandcollapse=function(i){var r=this.parent;if(i&&(i.classList.contains("e-detailrowcollapse")||i.classList.contains("e-detailrowexpand"))){var n=i.parentElement,o=n.getAttribute("data-uid"),s=this.parent.getContentTable().querySelector("tbody").children[n.rowIndex+1];if(i.classList.contains("e-detailrowcollapse")){var l=(r.allowGrouping&&r.groupSettings.columns.length?r.currentViewData.records:r.currentViewData)[n.getAttribute("aria-rowindex")];if(this.isDetailRow(s))s.style.display="";else if(r.getDetailTemplate()||r.childGrid){var a=t.createElement("tr",{className:"e-detailrow"}),c=t.createElement("td",{className:"e-detailcell"});c.setAttribute("colspan",this.parent.getVisibleColumns().length.toString());for(var p=new Gt({isDataRow:!0,cells:[new Wt({cellType:e.CellType.Indent}),new Wt({isDataCell:!0,visible:!0})]}),d=0,h=r.groupSettings.columns.length;d<h;d++)a.appendChild(t.createElement("td",{className:"e-indentcell"})),p.cells.unshift(new Wt({cellType:e.CellType.Indent}));if(a.appendChild(t.createElement("td",{className:"e-detailindentcell"})),a.appendChild(c),n.parentNode.insertBefore(a,n.nextSibling),r.detailTemplate)D(c,r.getDetailTemplate()(l,r,"detailTemplate"));else{r.childGrid.parentDetails={parentID:r.element.id,parentPrimaryKeys:r.getPrimaryKeyFieldNames(),parentKeyField:r.childGrid.queryString,parentKeyFieldValue:l[r.childGrid.queryString],parentRowData:l};var u=new or(r.childGrid),g=u.getInjectedModules(),f=r.getInjectedModules();g&&g.length===f.length||u.setInjectedModules(f);var m=t.createElement("div",{id:"child"+k(n,"e-grid").length+"_grid"+n.rowIndex+I("")});c.appendChild(m),u.appendTo(m)}a.appendChild(c),n.parentNode.insertBefore(a,n.nextSibling);var y;this.parent.getRowsObject().some(function(e,t){return y=t,e.uid===o}),r.getRows().splice(n.rowIndex+1,0,a),this.parent.getRowsObject().splice(y+1,0,p),r.trigger(ve,{detailElement:c,data:l}),r.notify(ve,{rows:this.parent.getRowsObject()})}t.classList(i,["e-detailrowexpand"],["e-detailrowcollapse"]),t.classList(i.firstElementChild,["e-dtdiagonaldown","e-icon-gdownarrow"],["e-dtdiagonalright","e-icon-grightarrow"]),this.aria.setExpand(i,!0)}else this.isDetailRow(s)&&(s.style.display="none"),t.classList(i,["e-detailrowcollapse"],["e-detailrowexpand"]),t.classList(i.firstElementChild,["e-dtdiagonalright","e-icon-grightarrow"],["e-dtdiagonaldown","e-icon-gdownarrow"]),this.aria.setExpand(i,!1)}},i.prototype.isDetailRow=function(e){return e&&e.classList.contains("e-detailrow")},i.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(tt,this.clickHandler),this.parent.off(it,this.destroy),this.parent.off(et,this.keyPressHandler))},i.prototype.getTDfromIndex=function(e,t){var i=this.parent.getDataRows()[e];return i&&i.querySelector(t)?i.querySelector(t):null},i.prototype.expand=function(e){isNaN(e)||(e=this.getTDfromIndex(e,".e-detailrowcollapse")),e&&e.classList.contains("e-detailrowcollapse")&&this.toogleExpandcollapse(e)},i.prototype.collapse=function(e){isNaN(e)||(e=this.getTDfromIndex(e,".e-detailrowexpand")),e&&e.classList.contains("e-detailrowexpand")&&this.toogleExpandcollapse(e)},i.prototype.expandAll=function(){this.expandCollapse(!0)},i.prototype.collapseAll=function(){this.expandCollapse(!1)},i.prototype.expandCollapse=function(e){for(var t,i=this.parent.getDataRows(),r=0,n=i.length;r<n;r++)t=i[r].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),e?this.expand(t):this.collapse(t)},i.prototype.keyPressHandler=function(e){var t=this.parent;switch(e.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"altUpArrow":case"altDownArrow":var i=t.allowSelection?t.getSelectedRowIndexes():[];if(i.length){var r=t.getDataRows()[i[i.length-1]].querySelector(".e-detailrowcollapse, .e-detailrowexpand");"altDownArrow"===e.action?this.expand(r):this.collapse(r)}break;case"enter":if(this.parent.isEdit)return;var n=this.focus.getFocusedElement();if(!n.classList.contains("e-detailrowcollapse")&&!n.classList.contains("e-detailrowexpand"))break;this.toogleExpandcollapse(n)}},i.prototype.getModuleName=function(){return"detailRow"},i}(),Lr=function(){function e(e,t){this.predefinedItems={},this.items=["add","edit","update","delete","cancel","print","search","columnchooser","pdfexport","excelexport","csvexport","wordexport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=0,t=["add","edit","update","delete","cancel","print","pdfexport","excelexport","wordexport","csvexport"];e<t.length;e++){var i=t[e],r=i[0].toUpperCase()+i.slice(1);this.predefinedItems[i]={id:this.gridID+"_"+i,prefixIcon:"e-"+i,text:this.l10n.getConstant(r),tooltipText:this.l10n.getConstant(r)}}this.predefinedItems.search={id:this.gridID+"_search",template:'<div class="e-search" role="search" >                         <span id="'+this.gridID+'_searchbutton" class="e-searchfind e-icons" tabindex="-1"                         role="button" aria-label= "search"></span>                         <input id="'+this.gridID+'_searchbar" aria-multiline= "false" type="search"                         placeholder='+this.l10n.getConstant("Search")+">                         </input></div>",tooltipText:this.l10n.getConstant("Search"),align:"right"},this.predefinedItems.columnchooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:"Columns",tooltipText:"columns",align:"right"},this.createToolbar()},e.prototype.getToolbar=function(){return this.toolbar.element},e.prototype.destroy=function(){this.toolbar.isDestroyed||(this.unWireEvent(),this.toolbar.destroy(),this.removeEventListener(),t.remove(this.element))},e.prototype.createToolbar=function(){var e=this.getItems();this.toolbar=new a.Toolbar({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl});var i="viewContainerRef";this.parent[i]&&(this.toolbar.registeredTemplate={},this.toolbar[i]=this.parent[i]),this.element=t.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.toolbarTemplate?"string"==typeof this.parent.toolbarTemplate?(this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element):D(this.element,f(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate")):this.toolbar.appendTo(this.element),this.parent.element.insertBefore(this.element,this.parent.getHeaderContent()),this.searchElement=this.element.querySelector("#"+this.gridID+"_searchbar"),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},e.prototype.refreshToolbarItems=function(e){var t=this.parent,i=[],r=[],n=t.editSettings;n.allowAdding?i.push(this.gridID+"_add"):r.push(this.gridID+"_add"),n.allowEditing?i.push(this.gridID+"_edit"):r.push(this.gridID+"_edit"),n.allowDeleting?i.push(this.gridID+"_delete"):r.push(this.gridID+"_delete"),"batch"===t.editSettings.mode?t.element.querySelectorAll(".e-updatedtd").length&&(n.allowAdding||n.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(r.push(this.gridID+"_update"),r.push(this.gridID+"_cancel")):t.isEdit&&(n.allowAdding||n.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],r=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(r.push(this.gridID+"_update"),r.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(r,!1)},e.prototype.getItems=function(){var e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];for(var i=0,r=t;i<r.length;i++){var n=r[i];switch(typeof n){case"number":e.push(this.getItemObject(this.items[n]));break;case"string":e.push(this.getItemObject(n));break;default:e.push(this.getItem(n))}}return e},e.prototype.getItem=function(e){var i=this.predefinedItems[e.text];return i?t.extend(i,i,e):e},e.prototype.getItemObject=function(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}},e.prototype.enableItems=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i],o=this.element.querySelector("#"+n);o&&this.toolbar.enableItems(o.parentElement,t)}},e.prototype.toolbarClickHandler=function(e){var t=this.parent,i=this.gridID;if(e.item)switch(e.item.id){case i+"_print":t.print();break;case i+"_edit":t.startEdit();break;case i+"_update":t.endEdit();break;case i+"_cancel":t.closeEdit();break;case i+"_add":t.addRecord();break;case i+"_delete":t.deleteRecord();break;case i+"_search":e.originalEvent.target.id===i+"_searchbutton"&&this.search();break;case i+"_columnchooser":var r=this.parent.element.querySelector(".e-ccdiv"),n=r.getBoundingClientRect().top,o=r.getBoundingClientRect().left,s=e.originalEvent.target;n=r.getBoundingClientRect().top+r.offsetTop,t.createColumnchooser(o,n,s);break;default:t.trigger(Ce,e)}else t.trigger(Ce,e)},e.prototype.modelChanged=function(e){"edit"===e.module&&this.refreshToolbarItems()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&t.remove(this.element),this.render())},e.prototype.keyUpHandler=function(e){13===e.keyCode&&this.search()},e.prototype.search=function(){this.parent.search(this.searchElement.value)},e.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},e.prototype.wireEvent=function(){this.searchElement&&t.EventHandler.add(this.searchElement,"keyup",this.keyUpHandler,this)},e.prototype.unWireEvent=function(){this.searchElement&&t.EventHandler.remove(this.searchElement,"keyup",this.keyUpHandler)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Le,this.render,this),this.parent.on(Ne,this.onPropertyChanged,this),this.parent.on(He,this.updateSearchBox.bind(this)),this.parent.on(qe,this.refreshToolbarItems,this),this.parent.on(ft,this.refreshToolbarItems,this),this.parent.on(He,this.modelChanged,this),this.parent.on(ie,this.refreshToolbarItems,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Le,this.render),this.parent.off(Ne,this.onPropertyChanged),this.parent.off(He,this.updateSearchBox),this.parent.off(qe,this.refreshToolbarItems),this.parent.off(ft,this.refreshToolbarItems),this.parent.off(He,this.modelChanged),this.parent.off(ie,this.refreshToolbarItems))},e.prototype.getModuleName=function(){return"toolbar"},e}(),Fr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ar=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.aggregates={},r.parent=t,r.locator=i,r.modelGenerator=new Jt(r.parent),r.addEventListener(),r}return Fr(i,e),i.prototype.renderPanel=function(){var e=t.createElement("div",{className:"e-gridfooter"}),i=t.createElement("div",{className:"e-summarycontent"});t.Browser.isDevice&&(i.style.overflowX="scroll"),e.appendChild(i),this.setPanel(e),null!=this.parent.getPager()?this.parent.element.insertBefore(e,this.parent.getPager()):this.parent.element.appendChild(e)},i.prototype.renderTable=function(){this.getPanel();var e=this.createContentTable().querySelector(".e-table"),i=t.createElement("tfoot");e.appendChild(i),this.setTable(e)},i.prototype.renderSummaryContent=function(e){var i=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData,r=this.modelGenerator.getData(),n=this.modelGenerator.getColumns(),o=this.modelGenerator.generateRows(i,e||this.aggregates),s=document.createDocumentFragment(),l=new Qt(this.locator,null,this.parent);l.element=t.createElement("TR",{className:"e-summaryrow"});for(var a=0,c=r.length;a<c;a++){var p=o[a];if(p){var d=l.render(p,n);s.appendChild(d)}}this.getTable().tFoot.appendChild(s),this.aggregates=e},i.prototype.refresh=function(e){this.getTable().tFoot.innerHTML="",this.renderSummaryContent(e),this.onScroll()},i.prototype.refreshCol=function(){var e=this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0);this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)},i.prototype.onWidthChange=function(e){this.getColGroup().children[e.index].style.width=t.formatUnit(e.width),this.parent.allowResizing&&"resize"===e.module&&this.updateFooterTableWidth(this.getTable())},i.prototype.onScroll=function(e){void 0===e&&(e={left:this.parent.getContent().firstChild.scrollLeft}),this.getPanel().firstChild.scrollLeft=e.left},i.prototype.columnVisibilityChanged=function(){this.refresh()},i.prototype.addEventListener=function(){this.parent.on(je,this.refreshCol,this),this.parent.on(ot,this.onWidthChange,this),this.parent.on(nt,this.onScroll,this),this.parent.on(rt,this.columnVisibilityChanged,this)},i.prototype.removeEventListener=function(){this.parent.off(je,this.refreshCol),this.parent.off(ot,this.onWidthChange),this.parent.off(nt,this.onScroll),this.parent.off(rt,this.columnVisibilityChanged)},i.prototype.updateFooterTableWidth=function(e){var t=this.parent.getHeaderTable();t&&e&&(e.style.width=t.style.width)},i}(ii),Nr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Br=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.element=t.createElement("TD",{className:"e-summarycell",attrs:{role:"gridcell",tabindex:"-1"}}),i}return Nr(i,e),i.prototype.getValue=function(e,i,r){var n;return n=t.isNullOrUndefined(r.type)?r.columnName:r.field+" - "+r.type,i[r.columnName]?i[r.columnName][n]:""},i.prototype.evaluate=function(e,t,i,r){var n=t.column;if(!(n.footerTemplate||n.groupFooterTemplate||n.groupCaptionTemplate))return!0;var o=n.getTemplate(t.cellType);return D(e,o.fn(i[n.columnName],this.parent,o.property)),!1},i}(ni),Hr=function(){function i(e,t){this.parent=e,this.locator=t,this.addEventListener()}return i.prototype.getModuleName=function(){return"aggregate"},i.prototype.initiateRender=function(){var t=this,i=this.locator.getService("cellRendererFactory"),r=new Br(this.parent,this.locator);[e.CellType.Summary,e.CellType.CaptionSummary,e.CellType.GroupSummary].forEach(function(e){return i.addCellRenderer(e,r)}),this.footerRenderer=new Ar(this.parent,this.locator),this.footerRenderer.renderPanel(),this.footerRenderer.renderTable(),this.locator.register("footerRenderer",this.footerRenderer);var n=function(){t.prepareSummaryInfo(),t.parent.off(Fe,n)};this.parent.on(Fe,n,this),this.parent.on(Fe,this.footerRenderer.refresh,this.footerRenderer)},i.prototype.prepareSummaryInfo=function(){var e=this;W(this.parent.aggregates,function(t){var i=(e.parent.getColumnByField(t.field)||{}).type;t.format=e.getFormatFromType(t.format,i),t.setFormatter(),t.columnName=t.columnName||t.field})},i.prototype.getFormatFromType=function(e,i){if(t.isNullOrUndefined(i)||"string"!=typeof e)return e;var r;switch(i){case"number":r={format:e};break;case"date":r={type:i,skeleton:e};break;case"datetime":r={type:"dateTime",skeleton:e}}return r},i.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){t.isNullOrUndefined(this.footerRenderer)&&this.initiateRender(),this.prepareSummaryInfo(),this.footerRenderer.refresh();var i=new Zt(this.parent);0===new $t(this.parent).getData().length&&i.isEmpty()||this.parent.notify(qe,{})}},i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Le,this.initiateRender,this),this.parent.on(Ne,this.onPropertyChanged,this))},i.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.footerRenderer.removeEventListener(),this.parent.off(Le,this.initiateRender),this.parent.off(Fe,this.footerRenderer.refresh),this.parent.off(Ne,this.onPropertyChanged))},i.prototype.destroy=function(){this.removeEventListener(),t.remove(this.parent.element.querySelector(".e-gridfooter"))},i}(),qr=function(){function e(e,t){var i=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var r=e.top-i.containerRect.top;return t.entered=r>=0,r+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){i.options.container.clientHeight;var r=e.bottom;return t.entered=e.bottom<=i.containerRect.bottom,r-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var r=e.right;return t.entered=r<i.containerRect.right,r-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(e,t){var r=e.left;return t.entered=r>0,r+i.containerRect.width>=i.containerRect.left},axis:"X"}},this.element=e,this.options=t}return e.prototype.observe=function(e,i){var r=this;this.containerRect=this.options.container.getBoundingClientRect(),t.EventHandler.add(this.options.container,"wheel",function(){return r.fromWheel=!0},this),t.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(e,i),this)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,i){var r=this,n=0,o=0,s=t.debounce(e,100),l=t.debounce(e,50);return function(t){var a=t.target.scrollTop,c=t.target.scrollLeft,p=n<a?"down":"up";p=o===c?p:o<c?"right":"left",n=a,o=c;var d=r.sentinelInfo[p];if(-1!==r.options.axes.indexOf(d.axis)){var h=r.check(p);if(d.entered&&i(r.element,d,p,{top:a,left:c}),h){var u=r.fromWheel?r.options.debounceEvent?s:e:s;"X"===d.axis&&(u=l),u({direction:p,sentinel:d,offset:{top:a,left:c}})}r.fromWheel=!1}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),jr=function(){function e(e){this.cOffsets={},this.cache={},this.data={},this.groups={},this.parent=e,this.model=this.parent.pageSettings,this.rowModelGenerator=this.parent.allowGrouping?new ti(this.parent):new Xt(this.parent)}return e.prototype.generateRows=function(e,t){var i=this,r=t.virtualInfo=t.virtualInfo||this.getData(),n=r.sentinelInfo&&"X"===r.sentinelInfo.axis,o=n||!r.loadNext||r.loadSelf?r.page:r.nextInfo.page,s=[],l=(this.model.pageSize,this.getBlockIndexes(o)),a=[];return this.checkAndResetCache(t.requestType),this.parent.enableColumnVirtualization&&r.blockIndexes.forEach(function(e){i.isBlockAvailable(e)&&(i.cache[e]=i.rowModelGenerator.refreshRows(i.cache[e]))}),r.blockIndexes.forEach(function(t){if(!i.isBlockAvailable(t)){var o=i.rowModelGenerator.generateRows(e,{virtualInfo:r,startIndex:i.getStartIndex(t,e)}),c=~~Math.max(o.length,i.model.pageSize)/2;i.isBlockAvailable(l[0])||(i.cache[l[0]]=o.slice(0,c)),i.isBlockAvailable(l[1])||(i.cache[l[1]]=o.slice(c))}i.parent.groupSettings.columns.length&&!n&&i.cache[t]&&(i.cache[t]=i.updateGroupRow(i.cache[t],t)),s.push.apply(s,i.cache[t]),i.isBlockAvailable(t)&&a.push(t)}),r.blockIndexes=a,s},e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.isBlockAvailable=function(e){return e in this.cache},e.prototype.getData=function(){return{page:this.model.currentPage,blockIndexes:this.getBlockIndexes(this.model.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getStartIndex=function(e,t,i){void 0===i&&(i=!0);var r=e%2==0,n=(this.getPage(e)-1)*this.model.pageSize;return i||!r?n:n+~~(this.model.pageSize/2)},e.prototype.getColumnIndexes=function(e){var i=this;void 0===e&&(e=this.parent.getHeaderContent().firstChild);var r=[],n=0|e.scrollLeft,o=Object.keys(this.cOffsets),s=e.getBoundingClientRect().width;n=Math.min(this.cOffsets[o.length-1]-s,n);var l=t.Browser.isDevice?2*s:s/2,a=n+s+(0===n?l:0);return o.some(function(e,t,o){var s=Number(e),c=i.cOffsets[e];return n-l<=c&&a+l>=c&&r.push(s),a+l<c}),r},e.prototype.checkAndResetCache=function(e){var t=["paging","refresh","sorting","filtering","searching","grouping","ungrouping"].some(function(t){return e===t});return t&&(this.cache={},this.data={},this.groups={}),t},e.prototype.refreshColOffsets=function(){var e=this,t=0;this.cOffsets={};var i=this.parent.groupSettings.columns.length,r=this.parent.columns,n=r.length;this.parent.groupSettings.columns.forEach(function(t,i){return e.cOffsets[i]=30+(0|e.cOffsets[i-1])}),Array.apply(null,Array(n)).map(function(){return t++}).forEach(function(t,n){t+=i,e.cOffsets[t]=(0|e.cOffsets[t-1])+(function(t){return t.visible&&(e.parent.groupSettings.showGroupedColumn?t.visible:e.parent.groupSettings.columns.indexOf(t.field)<0)}(r[n])?parseInt(r[n].width,10):0)})},e.prototype.updateGroupRow=function(e,t){var i=this,r=e[0],n=[];return Object.keys(this.cache).forEach(function(e){Number(e)<t&&(n=n.concat(i.cache[e]))}),r&&r.isDataRow||t%2==0?e:this.iterateGroup(e,n)},e.prototype.iterateGroup=function(e,t){var i=e[0],r=0;if(i&&i.isDataRow)return e;return e.some(function(e){return t.some(function(t,i){var n=t&&void 0!==t.data.field&&t.data.field===e.data.field&&t.data.key===e.data.key;return n&&(r=i),n})})&&(e.shift(),e=this.iterateGroup(e,t.slice(r))),e},e.prototype.getRows=function(){var e=this,t=[];return Object.keys(this.cache).forEach(function(i){return t=t.concat(e.cache[i])}),t},e}(),zr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ur=function(i){function n(e,t){var r=i.call(this,e,t)||this;return r.prevHeight=0,r.preventEvent=!1,r.actions=["filtering","searching","grouping","ungrouping"],r.offsets={},r.tmpOffsets={},r.virtualEle=new Vr,r.offsetKeys=[],r.isFocused=!1,r.locator=t,r.eventListener("on"),r.vgenerator=r.generator,r}return zr(n,i),n.prototype.renderTable=function(){this.header=this.locator.getService("rendererFactory").getRenderer(e.RenderType.Header),i.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().firstChild,this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder(),this.virtualEle.wrapper.style.position="absolute";var t=this.parent.dataSource instanceof r.DataManager&&!this.parent.dataSource.dataSource.offline,n={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:t,axes:this.parent.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new qr(this.virtualEle.wrapper,n)},n.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.virtualEle.adjustTable(0,0)},n.prototype.scrollListener=function(e){if(this.preventEvent||this.parent.isDestroyed)this.preventEvent=!1;else{this.isFocused=this.content===t.closest(document.activeElement,".e-content")||this.content===document.activeElement;var i=e.sentinel,r=this.getInfoFromView(e.direction,i,e.offset);this.prevInfo&&("Y"===i.axis&&this.prevInfo.blockIndexes.toString()===r.blockIndexes.toString()||"X"===i.axis&&this.prevInfo.columnIndexes.toString()===r.columnIndexes.toString())||(this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization?r.columnIndexes:[]),this.parent.pageSettings.currentPage=r.loadNext&&!r.loadSelf?r.nextInfo.page:r.page,this.parent.notify(r.event,{requestType:"virtualscroll",virtualInfo:r}))}},n.prototype.block=function(e){return this.vgenerator.isBlockAvailable(e)},n.prototype.getInfoFromView=function(e,t,i){var r=[],n={direction:e,sentinelInfo:t,offsets:i};n.page=this.getPageFromTop(i.top,n),n.blockIndexes=r=this.vgenerator.getBlockIndexes(n.page),n.loadSelf=!this.vgenerator.isBlockAvailable(r[n.block]);var o=this.ensureBlocks(n);return n.blockIndexes=o,n.loadNext=!o.filter(function(e){return-1===r.indexOf(e)}).every(this.block.bind(this)),n.event=n.loadNext||n.loadSelf?qe:ut,n.nextInfo=n.loadNext?{page:Math.max(1,n.page+("down"===e?1:-1))}:{},n.columnIndexes="X"===t.axis?this.vgenerator.getColumnIndexes():this.parent.getColumnIndexesInView(),this.parent.enableColumnVirtualization&&"X"===t.axis&&(n.event=ut),n},n.prototype.ensureBlocks=function(e){var t,i=this,r=e.blockIndexes[e.block],n=r,o=Math.max,s="down"===e.direction?[o(r,1),++r,++r]:[o(r-1,1),r,r+1];return s=s.filter(function(e,t){return s.indexOf(e)===t}),this.prevInfo.blockIndexes.toString()===s.toString()?s:((e.loadSelf||"down"===e.direction&&this.isEndBlock(n))&&(s=this.vgenerator.getBlockIndexes(e.page)),s.some(function(e,r){var n=e===i.getTotalBlocks();return n&&(t=r),n}),void 0!==t&&(s=s.slice(0,t+1),0===e.block&&1===s.length&&this.vgenerator.isBlockAvailable(s[0]-1)&&(s=[s[0]-1,s[0]])),s)},n.prototype.appendContent=function(e,i,r){var n=r.virtualInfo;this.prevInfo=this.prevInfo||r.virtualInfo;var o,s=n.columnIndexes[0]-1,l=this.getColumnOffset(s),a=n.blockIndexes;this.parent.groupSettings.columns.length&&this.refreshOffsets();var c=this.getTranslateY(this.content.scrollTop,this.content.getBoundingClientRect().height,n);if(this.virtualEle.adjustTable(l,c),this.parent.enableColumnVirtualization&&this.header.virtualEle.adjustTable(l,0),this.parent.enableColumnVirtualization){var p=n.columnIndexes;o=this.getColumnOffset(p[p.length-1])-this.getColumnOffset(p[0]-1)+"",this.header.virtualEle.setWrapperWidth(o)}if(this.virtualEle.setWrapperWidth(o,this.parent.enableColumnVirtualization||t.Browser.isIE),e.appendChild(i),this.getTable().appendChild(e),this.parent.groupSettings.columns.length){if("up"===n.direction){var d=this.offsets[this.getTotalBlocks()]-this.prevHeight;this.preventEvent=!0;var h=this.content.scrollTop;this.content.scrollTop=h+d}this.setVirtualHeight(),this.observer.setPageHeight(this.getOffset(a[a.length-1])-this.getOffset(a[0]-1))}this.prevInfo=n,this.isFocused&&this.content.focus()},n.prototype.onDataReady=function(e){t.isNullOrUndefined(e.count)||(this.count=e.count,this.maxPage=Math.ceil(e.count/this.parent.pageSettings.pageSize)),this.refreshOffsets(),this.setVirtualHeight(),this.resetScrollPosition(e.requestType)},n.prototype.setVirtualHeight=function(){var e=this.parent.enableColumnVirtualization?this.getColumnOffset(this.parent.columns.length+this.parent.groupSettings.columns.length-1)+"px":"100%";this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()],e),this.parent.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,e)},n.prototype.getPageFromTop=function(e,t){var i=this,r=this.getTotalBlocks(),n=0;this.offsets[r],this.prevHeight;return this.offsetKeys.some(function(o){var s=Number(o),l=e<i.offsets[o]||s===r&&e>i.offsets[o];return l&&(t.block=s%2==0?1:0,n=Math.max(1,Math.min(i.vgenerator.getPage(s),i.maxPage))),l}),n},n.prototype.getTranslateY=function(e,t,i){void 0===i&&((i={page:this.getPageFromTop(e,{})}).blockIndexes=this.vgenerator.getBlockIndexes(i.page));var r=(i.blockIndexes[0]||1)-1,n=this.getOffset(r),o=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);return n>e?this.getOffset(r-1):o<e+t?this.getOffset(r+1):n},n.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],this.offsets[this.maxBlock])},n.prototype.onEntered=function(){var e=this;return function(t,i,r,n){var o="X"===i.axis,s=e.prevInfo.offsets?e.prevInfo.offsets.top:null,l=e.content.getBoundingClientRect().height,a=e.getColumnOffset(o?e.vgenerator.getColumnIndexes()[0]-1:e.prevInfo.columnIndexes[0]-1),c=e.getTranslateY(n.top,l,o&&s===n.top?e.prevInfo:void 0);e.virtualEle.adjustTable(a,Math.min(c,e.offsets[e.maxBlock])),e.parent.enableColumnVirtualization&&e.header.virtualEle.adjustTable(a,0)}},n.prototype.eventListener=function(e){var t=this;this.parent[e](Fe,this.onDataReady,this),this.parent[e](ut,this.refreshContentRows,this),this.actions.forEach(function(i){return t.parent[e](i+"-begin",t.onActionBegin,t)});var i=function(){t.observer.observe(function(e){return t.scrollListener(e)},t.onEntered()),t.parent.off(Ae,i)};this.parent.on(Ae,i,this)},n.prototype.getBlockSize=function(){return this.parent.pageSettings.pageSize>>1},n.prototype.getBlockHeight=function(){return this.getBlockSize()*M()},n.prototype.isEndBlock=function(e){var t=this.getTotalBlocks();return e>=t||e===t-1},n.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},n.prototype.getColumnOffset=function(e){return 0|this.vgenerator.cOffsets[e]},n.prototype.getModelGenerator=function(){return new jr(this.parent)},n.prototype.resetScrollPosition=function(e){this.actions.some(function(t){return t===e})&&(this.preventEvent=0!==this.content.scrollTop,this.content.scrollTop=0)},n.prototype.onActionBegin=function(e){this.parent.setProperties({pageSettings:{currentPage:1}},!0)},n.prototype.getRows=function(){return this.vgenerator.getRows()},n.prototype.getRowByIndex=function(e){var t=(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize();return this.parent.getDataRows()[e-t]},n.prototype.refreshOffsets=function(){var e=this,t=0,i=this.getBlockSize(),r=this.getTotalBlocks();this.prevHeight=this.offsets[r],this.maxBlock=r%2==0?r-2:r-1,this.offsets={},Array.apply(null,Array(r)).map(function(){return++t}).forEach(function(t){var n=(e.vgenerator.cache[t]||[]).length,o=e.count%i,s=t in e.vgenerator.cache?n*M():o&&t===r?o*M():e.getBlockHeight();e.offsets[t]=(0|e.offsets[t-1])+s,e.tmpOffsets[t]=0|e.offsets[t-1]}),this.offsetKeys=Object.keys(this.offsets),this.parent.enableColumnVirtualization&&this.vgenerator.refreshColOffsets()},n.prototype.refreshVirtualElement=function(){this.vgenerator.refreshColOffsets(),this.setVirtualHeight()},n}(ii),_r=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.virtualEle=new Vr,r.gen=new jr(r.parent),r.parent.on(ut,function(e){return"X"===e.virtualInfo.sentinelInfo.axis?r.refreshUI():null},r),r}return zr(t,e),t.prototype.renderTable=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild)),e.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().firstChild,this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder("absolute")},t.prototype.appendContent=function(e){this.virtualEle.wrapper.appendChild(e)},t.prototype.refreshUI=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild)),e.prototype.refreshUI.call(this)},t}(ri),Vr=function(){function e(){}return e.prototype.renderWrapper=function(){this.wrapper=t.createElement("div",{className:"e-virtualtable"}),this.wrapper.appendChild(this.table),this.content.appendChild(this.wrapper)},e.prototype.renderPlaceHolder=function(e){void 0===e&&(e="relative"),this.placeholder=t.createElement("div",{className:"e-virtualtrack",styles:"position:"+e}),this.content.appendChild(this.placeholder)},e.prototype.adjustTable=function(e,t){this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=e+"px",this.placeholder.style.width=t},e}(),Gr=function(){function t(e,t){this.parent=e,this.locator=t,this.addEventListener()}return t.prototype.getModuleName=function(){return"virtualscroll"},t.prototype.instantiateRenderer=function(){var t=this.locator.getService("rendererFactory");this.parent.enableColumnVirtualization&&t.addRenderer(e.RenderType.Header,new _r(this.parent,this.locator)),t.addRenderer(e.RenderType.Content,new Ur(this.parent,this.locator)),this.ensurePageSize()},t.prototype.ensurePageSize=function(){var e=M(this.parent.element);this.blockSize=~~(this.parent.height/e);var t=2*this.blockSize,i=this.parent.pageSettings.pageSize;this.parent.setProperties({pageSettings:{pageSize:i<t?t:i}},!0)},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Me,this.instantiateRenderer,this),this.parent.on(ot,this.refreshVirtualElement,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Me,this.instantiateRenderer),this.parent.off(ot,this.refreshVirtualElement))},t.prototype.refreshVirtualElement=function(t){if(this.parent.enableColumnVirtualization&&"resize"===t.module){this.locator.getService("rendererFactory").getRenderer(e.RenderType.Content).refreshVirtualElement()}},t.prototype.destroy=function(){this.removeEventListener()},t}(),Wr=function(){function e(e){this.parent=e}return e.prototype.addNew=function(e,i){var r=this.parent.getContentTable().querySelector("tbody");i.row=t.createElement("tr",{className:"e-row e-addedrow"}),r.insertBefore(i.row,r.firstChild),i.row.appendChild(this.getEditElement(e,!1))},e.prototype.update=function(e,t){var i=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",t.row.appendChild(this.getEditElement(e,!0,i)),t.row.classList.add("e-editedrow")},e.prototype.getEditElement=function(e,i,r){var n=this.parent,o=0,s=t.isNullOrUndefined(n.detailTemplate)&&t.isNullOrUndefined(n.childGrid)?0:1;n.allowGrouping&&(o=n.groupSettings.columns.length);var l=t.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(n.getVisibleColumns().length+o+s).toString()}}),a=t.createElement("form",{id:n.element.id+"EditForm",className:"e-gridform"}),c=t.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25"}});c.appendChild(n.getContentTable().querySelector("colgroup").cloneNode(!0));var p=t.createElement("tbody"),d=t.createElement("tr"),h=0;for(s&&d.insertBefore(t.createElement("td",{className:"e-detailrowcollapse"}),d.firstChild);h<o;)d.appendChild(t.createElement("td",{className:"e-indentcell"})),h++;var u=0;for(h=0;i&&u<r.length&&h<n.getColumns().length||h<n.getColumns().length;){var g=i?r[u].getAttribute("colspan"):null,f=n.getColumns()[h];if(f.visible){var m=t.createElement("td",{className:"e-rowcell",attrs:{style:"text-align:"+(f.textAlign?f.textAlign:""),colspan:g||""}});m.appendChild(e[f.uid]),"booleanedit"===f.editType?m.classList.add("e-boolcell"):(f.commands||f.commandsTemplate)&&t.addClass([m],"e-unboundcell"),d.appendChild(m)}h=g?h+parseInt(g,10):h+1,u++}return p.appendChild(d),c.appendChild(p),a.appendChild(c),l.appendChild(a),l},e}(),Kr=function(){function e(e){this.parent=e}return e.prototype.update=function(e,i){i.cell.innerHTML="",i.cell.appendChild(this.getEditElement(e,i)),i.cell.classList.add("e-editedbatchcell"),t.classList(i.row,["e-editedrow","e-batchrow"],[])},e.prototype.getEditElement=function(e,i){var r=this.parent,n=t.createElement("form",{id:r.element.id+"EditForm",className:"e-gridform"});return n.appendChild(e[i.columnObject.uid]),"booleanedit"===i.columnObject.editType&&i.cell.classList.add("e-boolcell"),i.columnObject.editType||i.cell.classList.add("e-inputbox"),n},e}(),Qr=function(){function e(e,t){this.parent=e,this.serviceLocator=t,this.parent.isDestroyed||(this.parent.on(xt,this.destroy,this),this.parent.on(it,this.destroy,this))}return e.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},e.prototype.addNew=function(e,t){this.isEdit=!1,this.createDialog(e,t)},e.prototype.update=function(e,t){this.isEdit=!0,this.createDialog(e,t)},e.prototype.createDialog=function(e,r){var n=this.parent;this.dialog=t.createElement("div",{id:n.element.id+"_dialogEdit_wrapper"}),n.element.appendChild(this.dialog),this.setLocaleObj(),this.dialogObj=new i.Dialog({header:this.isEdit?this.l10n.getConstant("EditFormTitle")+r.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle"),isModal:!0,visible:!0,cssClass:"e-edit-dialog",content:this.getEditElement(e),showCloseIcon:!0,allowDragging:!0,close:this.destroy.bind(this),closeOnEscape:!0,width:"330px",target:n.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]}),this.dialogObj.appendTo(this.dialog),N(this.dialogObj.element)},e.prototype.btnClick=function(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.toLowerCase()?(this.parent.closeEdit(),this.destroy()):this.parent.endEdit()},e.prototype.destroy=function(e){this.parent.notify(Rt,{}),this.parent.isEdit=!1,this.parent.notify(ft,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),t.remove(this.dialog))},e.prototype.getEditElement=function(e){for(var i=this.parent,r=t.createElement("div",{className:this.isEdit?"e-editedrow":"e-insertedrow"}),n=t.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"}),o=t.createElement("table",{className:"e-table",attrs:{cellspacing:"6px"}}),s=t.createElement("tbody"),l=i.getColumns(),a=0;a<l.length;a++)if(l[a].visible&&!l[a].commands&&!l[a].commandsTemplate){var c=t.createElement("tr"),p=t.createElement("td",{className:"e-rowcell",attrs:{style:"text-align:left;width:190px"}});t.createElement("label",{innerHTML:l[a].field});e[l[a].uid].classList.remove("e-input"),p.appendChild(e[l[a].uid]),c.appendChild(p),s.appendChild(c)}return o.appendChild(s),n.appendChild(o),r.appendChild(n),r},e}(),Xr=function(){function i(e,t){this.editType={inline:Wr,normal:Wr,batch:Kr,dialog:Qr},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}return i.prototype.addNew=function(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)},i.prototype.update=function(e){this.renderer.update(this.getEditElements(e),e),this.convertWidget(e)},i.prototype.convertWidget=function(e){for(var t,i,r=this.parent,n=r.element.querySelector(".e-gridform"),o=0,s="batch"!==r.editSettings.mode?r.getColumns():[r.getColumnByField(e.columnName)];o<s.length;o++){var l=s[o];if(l.visible&&!l.commands){l.valueAccessor(l.field,e.rowData,l),i=n.querySelector("[e-mappinguid="+l.uid+"]");l.edit.write;l.edit.write({rowData:e.rowData,element:i,column:l,requestType:e.requestType,row:e.row}),t||i.getAttribute("disabled")||(this.focusElement(i,e.type),t=!0)}}},i.prototype.focusElement=function(e,i){var r=this.parent.element.querySelector(".e-edit-checkselect");t.isNullOrUndefined(r)||r.nextElementSibling.classList.add("e-focus"),"batch"===this.parent.editSettings.mode?this.focus.onClick({target:t.closest(e,"td")},!0):e.focus(),e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)},i.prototype.getEditElements=function(i){for(var r=this.parent,n={},o="batch"!==r.editSettings.mode?r.getColumns():[r.getColumnByField(i.columnName)],s=0,l=o.length;s<l;s++){var a=o[s];if(a.visible)if(a.commands||a.commandsTemplate){var c=this.serviceLocator.getService("cellRendererFactory"),p=new Xt(this.parent),d=c.getCellRenderer(e.CellType.CommandColumn),h=p.generateRows(i.rowData)[0].cells,u=d.render(h[s],i.rowData,{index:i.row?i.row.getAttribute("aria-rowindex"):0});(m=u.firstElementChild).setAttribute("textAlign",u.getAttribute("textAlign")),n[a.uid]=m}else{var g={column:a,value:a.valueAccessor(a.field,i.rowData,a),type:i.requestType,data:i.rowData},f=(a.edit.create,void 0);if("string"==typeof(f=a.edit.create(g))){var m;(m=t.createElement("div")).innerHTML=f,f=m.firstChild}var y="input"!==f.tagName&&f.querySelectorAll("input").length;t.attributes(y?f.querySelector("input"):f,{name:a.field,"e-mappinguid":a.uid,id:r.element.id+a.field}),t.classList(f,["e-input","e-field"],[]),"right"===a.textAlign&&f.classList.add("e-ralign"),(a.isPrimaryKey||a.isIdentity)&&"beginEdit"===i.requestType&&f.setAttribute("disabled","true"),n[a.uid]=f}}return n},i}(),Yr=function(){function e(e){this.activeClasses=["e-selectionbackground","e-active"],this.parent=e}return e.prototype.create=function(e){var i=e.column,r="e-field e-boolcell";return"checkbox"===i.type&&(r="e-field e-boolcell e-edit-checkselect"),t.createElement("input",{className:r,attrs:{type:"checkbox",value:e.value,"e-mappinguid":i.uid,id:this.parent.element.id+i.field,name:i.field}})},e.prototype.read=function(e){return e.checked},e.prototype.write=function(e){var i,r;if(t.isNullOrUndefined(e.row)||(i=e.row.querySelector(".e-edit-checkselect")),e.rowData[e.column.field]&&(r=JSON.parse(e.rowData[e.column.field].toString().toLowerCase())),!t.isNullOrUndefined(i)){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var o=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));r=!!o&&o.isSelected}H.apply(void 0,[[].slice.call(e.row.querySelectorAll(".e-rowcell")),r].concat(this.activeClasses))}this.obj=new n.CheckBox(t.extend({label:"dialog"!==this.parent.editSettings.mode?"":e.column.headerText,checked:r,disabled:!L(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,change:this.checkBoxChange.bind(this)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.checkBoxChange=function(e){if(this.editRow&&"dialog"!==this.editType){var t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),H.apply(void 0,[[].slice.call(this.editRow.querySelectorAll(".e-rowcell")),t].concat(this.activeClasses))}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Jr=function(){function e(e){this.parent=e}return e.prototype.create=function(e){return t.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+e.column.field,name:e.column.field,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){e.column;var i="dialog"!==this.parent.editSettings.mode;this.obj=new s.DropDownList(t.extend({dataSource:this.parent.dataSource instanceof r.DataManager?this.parent.dataSource:new r.DataManager(this.parent.dataSource),query:(new r.Query).select(e.column.field),enabled:L(e.column,e.requestType,e.element),fields:{value:e.column.field},value:e.rowData[e.column.field],enableRtl:this.parent.enableRtl,actionComplete:this.ddActionComplete,placeholder:i?"":e.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",open:this.dropDownOpen.bind(this)},e.column.edit.params)),this.obj.appendTo(e.element),e.element.setAttribute("name",e.column.field)},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.ddActionComplete=function(e){e.result=e.result.filter(function(e,t,i){return i.indexOf(e)===t}),e.result.sort()},e.prototype.dropDownOpen=function(e){var i=b(this.obj.element,"e-dialog");if(!t.isNullOrUndefined(i)){var r=this.parent.element.querySelector("#"+i.id).ej2_instances[0];e.popup.element.style.zIndex=(r.zIndex+1).toString()}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),$r=function(){function e(e){this.parent=e}return e.prototype.create=function(e){return t.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+e.column.field,name:e.column.field,"e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].focusOut(),e.ej2_instances[0].value},e.prototype.write=function(e){var i=e.column,r="dialog"!==this.parent.editSettings.mode;this.obj=new o.NumericTextBox(t.extend({value:parseFloat(e.rowData[i.field]),enableRtl:this.parent.enableRtl,placeholder:r?"":e.column.headerText,enabled:L(e.column,e.requestType,e.element),floatLabelType:"dialog"!==this.parent.editSettings.mode?"Never":"Always"},i.edit.params)),this.obj.appendTo(e.element),e.element.setAttribute("name",i.field)},e.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&this.obj.destroy()},e}(),Zr=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var i=e.column;return t.createElement("input",{className:"e-field e-input e-defaultcell",attrs:{type:"text",value:t.isNullOrUndefined(e.value)?"":e.value,"e-mappinguid":i.uid,id:this.parent.element.id+i.field,name:i.field,style:"text-align:"+i.textAlign}})},e.prototype.read=function(e){return e.value},e.prototype.write=function(e){e.column;var t="dialog"!==this.parent.editSettings.mode;o.Input.createInput({element:e.element,floatLabelType:"dialog"!==this.parent.editSettings.mode?"Never":"Always",properties:{enableRtl:this.parent.enableRtl,enabled:L(e.column,e.requestType,e.element),placeholder:t?"":e.column.headerText}})},e}(),en=function(){function e(e,t,i){this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}return e.prototype.clickHandler=function(e){var t=e.target,i=this.parent;b(t,"e-gridcontent")&&!b(t,"e-unboundcelldiv")&&(this.rowIndex=b(t,"e-rowcell")?parseInt(t.parentElement.getAttribute("aria-rowindex"),10):-1,i.isEdit&&i.editModule.endEdit())},e.prototype.dblClickHandler=function(e){b(e.target,"e-rowcell")&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(b(e.target,"e-row"))},e.prototype.editComplete=function(e){switch(this.parent.isEdit=!1,e.requestType){case"save":this.parent.element.classList.contains("e-checkboxselection")&&this.parent.element.classList.contains("e-persistselection")||this.parent.selectRow(0),this.parent.trigger(ee,t.extend(e,{requestType:"save",type:ee}));break;case"delete":this.parent.selectRow(this.editRowIndex),this.parent.trigger(ee,t.extend(e,{requestType:"delete",type:ee}))}},e.prototype.startEdit=function(e){var t=this.parent,i=t.getPrimaryKeyFieldNames(),r=[];this.rowIndex=this.editRowIndex=parseInt(e.getAttribute("aria-rowindex"),10),this.previousData=t.getCurrentViewRecords()[this.rowIndex];for(var n=0;n<i.length;n++)r.push(this.previousData[i[n]]);var o={row:e,primaryKey:i,primaryKeyValue:r,requestType:"beginEdit",rowData:this.previousData,rowIndex:this.rowIndex,type:"edit",cancel:!1};t.trigger("beginEdit",o),o.type="actionBegin",t.trigger(Z,o),o.cancel||(t.isEdit=!0,t.clearSelection(),"dialog"===t.editSettings.mode&&o.row.classList.add("e-dlgeditrow"),this.renderer.update(o),this.uid=e.getAttribute("data-uid"),t.editModule.applyFormValidation(),o.type="actionComplete",t.trigger(ee,o))},e.prototype.endEdit=function(){var e=this.parent;if(this.parent.isEdit&&e.editModule.formObj.validate()){var i=t.extend({},this.previousData),r={requestType:"save",type:Z,data:i,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}};if(i=e.editModule.getCurrentEditedData(e.element.querySelector(".e-gridform"),i),e.element.querySelectorAll(".e-editedrow").length){if(r.action="edit",e.trigger(Z,r),r.cancel)return;e.showSpinner(),this.destroyElements(),e.notify(Ct,r)}else{if(r.action="add",r.selectedRow=0,e.notify(qe,r),r.cancel)return;this.destroyElements()}this.stopEditStatus(),"dialog"===e.editSettings.mode&&"add"!==r.action&&e.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow")}},e.prototype.destroyElements=function(){var e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),e.notify(xt,{})},e.prototype.editHandler=function(e){var t=this;e.promise?e.promise.then(function(i){return t.edSucc(i,e)}).catch(function(e){return t.edFail(e)}):this.editSuccess({},e)},e.prototype.edSucc=function(e,t){this.editSuccess(e,t)},e.prototype.edFail=function(e){this.editFailure(e)},e.prototype.editSuccess=function(e,t){e.result?(this.parent.trigger(Re,e),t.data=e.result):this.parent.trigger(Re,t),t.type=ee,this.parent.isEdit=!1,this.refreshRow(t.data),this.parent.trigger(ee,t),this.parent.element.classList.contains("e-checkboxselection")&&this.parent.element.classList.contains("e-persistselection")||this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.element.focus(),this.parent.hideSpinner()},e.prototype.editFailure=function(e){this.parent.trigger(te,e)},e.prototype.refreshRow=function(e){var t=new Qt(this.serviceLocator,null,this.parent),i=this.parent.getRowObjectFromUID(this.uid);i&&(i.changes=e,t.refresh(i,this.parent.getColumns(),!0))},e.prototype.closeEdit=function(){if(this.parent.isEdit){var e=this.parent,t={requestType:"cancel",type:Z,data:this.previousData,selectedRow:e.selectedRowIndex};e.trigger(Z,t),e.isEdit=!1,this.stopEditStatus(),t.type=ee,"dialog"!==e.editSettings.mode&&this.refreshRow(t.data),e.selectRow(this.rowIndex),e.trigger(ee,t)}},e.prototype.addRecord=function(e){var t=this.parent;if(e)t.notify(qe,{requestType:"save",type:Z,data:e,selectedRow:0,action:"add"});else if(!t.isEdit){this.previousData={},this.uid="";for(var i=0,r=t.getColumns();i<r.length;i++){var n=r[i];this.previousData[n.field]=e&&e[n.field]?e[n.field]:n.defaultValue}var o={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:Z};t.trigger(Z,o),o.cancel||(t.isEdit=!0,t.clearSelection(),this.renderer.addNew({rowData:o.data,requestType:"add"}),t.editModule.applyFormValidation(),o.type=ee,o.row=t.element.querySelector(".e-addedrow"),t.trigger(ee,o))}},e.prototype.deleteRecord=function(e,t){this.editRowIndex=this.parent.selectedRowIndex,this.parent.notify(qe,{requestType:"delete",type:Z,foreignKeyData:{},data:t?[t]:this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1})},e.prototype.stopEditStatus=function(){var e=this.parent,i=e.element.querySelector(".e-addedrow");i&&t.remove(i),(i=e.element.querySelector(".e-editedrow"))&&i.classList.remove("e-editedrow")},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Et,this.editHandler,this),this.parent.on(It,this.dblClickHandler,this),this.parent.on(tt,this.clickHandler,this),this.parent.on(gt,this.dblClickHandler,this),this.parent.on(bt,this.editComplete,this),this.parent.on(wt,this.editComplete,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Et,this.editHandler),this.parent.off(It,this.dblClickHandler),this.parent.off(tt,this.clickHandler),this.parent.off(gt,this.dblClickHandler),this.parent.off(bt,this.editComplete),this.parent.off(wt,this.editComplete))},e.prototype.destroy=function(){this.removeEventListener()},e}(),tn=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rn=function(e){function t(t,i,r){var n=e.call(this,t,i)||this;return n.parent=t,n.serviceLocator=i,n.renderer=r,n}return tn(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t){e.prototype.addRecord.call(this,t)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.deleteRecord=function(t,i){e.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(en),nn=function(){function i(e,t,i){this.cellDetails={},this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(tt,this.clickHandler,this),this.parent.on(gt,this.dblClickHandler,this),this.parent.on($e,this.onBeforeCellFocused,this),this.parent.on(Ze,this.onCellFocused,this),this.dataBoundFunction=this.dataBound.bind(this),this.parent.addEventListener(ie,this.dataBoundFunction),this.parent.on(It,this.dblClickHandler,this))},i.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(tt,this.clickHandler),this.parent.off(gt,this.dblClickHandler),this.parent.off($e,this.onBeforeCellFocused),this.parent.on(Ze,this.onCellFocused),this.parent.removeEventListener(ie,this.dataBoundFunction),this.parent.off(It,this.dblClickHandler))},i.prototype.dataBound=function(){this.parent.notify(ft,{})},i.prototype.destroy=function(){this.removeEventListener()},i.prototype.clickHandler=function(e){b(e.target,this.parent.element.id+"_add",!0)||(this.saveCell(),b(e.target,"e-rowcell")&&!this.parent.isEdit&&this.setCellIdx(e.target))},i.prototype.dblClickHandler=function(e){var t=b(e.target,"e-rowcell"),i=b(e.target,"e-row");t&&i&&!isNaN(parseInt(t.getAttribute("aria-colindex"),10))&&this.editCell(parseInt(i.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(t.getAttribute("aria-colindex"),10)].field)},i.prototype.onBeforeCellFocused=function(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())},i.prototype.onCellFocused=function(e){var t=!e.container.isContent||!e.container.isDataCell;if(e.byKey&&!t){var i=e.container.indexes,r=i[0],n=i[1],o=this.parent.isEdit;if(!document.querySelectorAll(".e-popup-open").length)switch(o=o&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":o&&this.editCellFromIndex(r,n);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault(),o&&this.editCell(r,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(r,n),this.focus.focus()}}},i.prototype.isAddRow=function(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")},i.prototype.editCellFromIndex=function(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field)},i.prototype.closeEdit=function(){var e,i=this.parent,r=this.parent.getRowsObject(),n=new Qt(this.serviceLocator,null,this.parent);i.isEdit&&this.saveCell(!0),i.clearSelection();for(var o=0;o<r.length;o++)r[o].isDirty&&(e=i.getContentTable().querySelector("[data-uid="+r[o].uid+"]"))&&(e.classList.contains("e-insertedrow")?(t.remove(e),this.removeRowObjectFromUID(r[o].uid),o--):(delete r[o].changes,r[o].isDirty=!1,t.classList(e,[],["e-hiddenrow","e-updatedtd"]),n.refresh(r[o],i.getColumns(),!1)));i.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),i.notify(ft,{}),this.parent.notify(vt,{})},i.prototype.deleteRecord=function(e,t){this.saveCell(),this.validateFormObj()||this.bulkDelete(e,t)},i.prototype.addRecord=function(e){this.bulkAddRow(e)},i.prototype.endEdit=function(e){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},i.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},i.prototype.batchSave=function(){var e=this.parent;if(this.saveCell(),!e.isEdit){var t=this.getBatchChanges(),i={batchChanges:t,cancel:!1};e.trigger(Ee,i),i.cancel||(e.showSpinner(),e.notify(mt,{changes:t}))}},i.prototype.getBatchChanges=function(){for(var e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=0,i=this.parent.getRowsObject();t<i.length;t++){var r=i[t];if(r.isDirty)switch(r.edit){case"add":e.addedRecords.push(r.changes);break;case"delete":e.deletedRecords.push(r.data);break;default:e.changedRecords.push(r.changes)}}return e},i.prototype.removeRowObjectFromUID=function(e){for(var t=this.parent.getRowsObject(),i=0,r=t.length;i<r&&t[i].uid!==e;i++);t.splice(i,1)},i.prototype.addRowObject=function(e){this.parent.getRowsObject().unshift(e)},i.prototype.bulkDelete=function(e,i){var r=this.parent,n=i?this.getIndexFromData(i):r.selectedRowIndex,o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:n,rowData:i||r.getSelectedRecords()[0],row:i?r.getRows()[n]:r.getSelectedRows()[0],cancel:!1};if(o.row&&(r.trigger(xe,o),!o.cancel)){r.clearSelection();var s=o.row.getAttribute("data-uid");if(o.row.classList.contains("e-insertedrow"))this.removeRowObjectFromUID(s),t.remove(o.row);else{var l=r.getRowObjectFromUID(s);l.isDirty=!0,l.edit="delete",t.classList(o.row,["e-hiddenrow","e-updatedtd"],[])}this.refreshRowIdx(),r.selectRow(n),delete o.row,r.trigger(be,o),r.notify(be,{rows:this.parent.getRowsObject()}),r.notify(ft,{})}},i.prototype.refreshRowIdx=function(){for(var e=[].slice.call(this.parent.getContentTable().querySelector("tbody").children),t=0,i=0,r=e.length;t<r;t++)e[t].classList.contains("e-row")&&!e[t].classList.contains("e-hiddenrow")?(e[t].setAttribute("aria-rowindex",i.toString()),i++):e[t].removeAttribute("aria-rowindex")},i.prototype.getIndexFromData=function(e){return x(e,this.parent.getCurrentViewRecords())},i.prototype.bulkAddRow=function(i){var r=this.parent;if(r.editSettings.allowAdding&&(r.isEdit&&this.saveCell(),!r.isEdit)){var n={defaultData:i||this.getDefaultData(),primaryKey:r.getPrimaryKeyFieldNames(),cancel:!1};if(r.trigger(Se,n),!n.cancel){r.clearSelection();for(var o,s,l=new Qt(this.serviceLocator,null,this.parent),a=new Xt(this.parent).generateRows([n.defaultData]),c=l.render(a[0],r.getColumns()),p=0;p<this.parent.groupSettings.columns.length;p++)c.insertBefore(t.createElement("td",{className:"e-indentcell"}),c.firstChild),a[0].cells.unshift(new Wt({cellType:e.CellType.Indent}));var d=r.getContentTable().querySelector("tbody");c.classList.add("e-insertedrow"),d.insertBefore(c,d.firstChild),t.addClass(c.querySelectorAll(".e-rowcell"),["e-updatedtd"]),a[0].isDirty=!0,a[0].changes=t.extend({},a[0].data),a[0].edit="add",this.addRowObject(a[0]),this.refreshRowIdx(),this.focus.forgetPrevious(),r.selectRow(0),i||(s=this.findNextEditableCell(0,!0),o=r.getColumns()[s],this.editCell(0,o.field,!0));var h={defaultData:n.defaultData,row:c,columnObject:o,columnIndex:s,primaryKey:n.primaryKey,cell:c.cells[s]};r.trigger(we,h),r.notify(we,{rows:this.parent.getRowsObject()})}}},i.prototype.findNextEditableCell=function(e,t){for(var i=this.parent.getColumns(),r=i.length,n=e;n<r;n++){if(!t&&this.checkNPCell(i[n]))return n;if(t&&!i[n].template&&i[n].visible&&i[n].allowEditing)return n}return-1},i.prototype.checkNPCell=function(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing},i.prototype.getDefaultData=function(){for(var e={},t={number:0,string:null,boolean:!1,date:null,datetime:null},i=0,r=this.parent.getColumns();i<r.length;i++){var n=r[i];e[n.field]=n.defaultValue?n.defaultValue:t[n.type]}return e},i.prototype.setCellIdx=function(e){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.parentElement.getAttribute("aria-rowindex"),10)},i.prototype.editCell=function(e,i,r){var n=this.parent,o=n.getColumnByField(i),s=n.getPrimaryKeyFieldNames();if(n.editSettings.allowEditing&&o.allowEditing){if(!n.isEdit||this.cellDetails.column.field===i&&this.cellDetails.rowIndex===e||this.saveCell(),n.isEdit)return;var l=n.getDataRows()[e];if(s[0]===o.field&&!l.classList.contains("e-insertedrow")||o.template||o.columns)return;var a=t.extend({},this.getDataByIndex(e)),c=[].slice.apply(l.cells),p={cell:c[this.getColIndex(c,this.getCellIdx(o.uid))],row:l,columnName:o.field,columnObject:o,isForeignKey:!t.isNullOrUndefined(o.foreignKeyValue),primaryKey:s,rowData:a,validationRules:t.extend({},o.validationRules?o.validationRules:{}),value:a[o.field],type:r?"add":"edit",cancel:!1};if(!p.cell)return;if(n.trigger("cellEdit",p),p.cancel)return;this.cellDetails={rowData:a,column:o,value:p.value,isForeignKey:p.isForeignKey,rowIndex:e,cellIndex:parseInt(p.cell.getAttribute("aria-colindex"),10)},p.cell.classList.contains("e-updatedtd")&&(this.isColored=!0,p.cell.classList.remove("e-updatedtd")),n.isEdit=!0,n.clearSelection(),n.element.classList.contains("e-checkboxselection")&&n.element.classList.contains("e-persistselection")||n.selectRow(this.cellDetails.rowIndex,!0),this.renderer.update(p),this.form=n.element.querySelector("#"+n.element.id+"EditForm"),n.editModule.applyFormValidation([o]),this.parent.element.querySelector(".e-gridpopup").style.display="none"}},i.prototype.updateCell=function(e,t,i){var r=this.parent.getColumnByField(t);if(r&&!r.isPrimaryKey){var n=this.parent.getDataRows()[e].cells[this.parent.getColumnIndexByField(t)],o=this.parent.getRowObjectFromUID(n.parentElement.getAttribute("data-uid"));this.refreshTD(n,r,o,i),this.parent.trigger($,{cell:n,column:r,data:o.changes})}},i.prototype.setChanges=function(e,i,r){e.changes||(e.changes=t.extend({},e.data)),e.changes[i]=r,e.data[i]!==r&&(e.isDirty=!0)},i.prototype.updateRow=function(e,t){for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.updateCell(e,n,t[n])}},i.prototype.getCellIdx=function(e){var i=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return t.isNullOrUndefined(this.parent.detailTemplate)&&t.isNullOrUndefined(this.parent.childGrid)||i++,i},i.prototype.refreshTD=function(e,t,i,r){var n=new ni(this.parent,this.serviceLocator);this.setChanges(i,t.field,r),n.refreshTD(e,i.cells[this.getCellIdx(t.uid)],i.changes),e.classList.add("e-updatedtd"),this.parent.notify(ft,{})},i.prototype.getColIndex=function(e,t){for(var i=0;i<e.length;i++){if(parseInt(e[i].getAttribute("aria-colindex"),10)===t)return i}return-1},i.prototype.saveCell=function(e){var i=this.parent;if(e||i.isEdit&&!this.validateFormObj()){var r=b(this.form,"e-row"),n=this.cellDetails.column,o=i.editModule.getCurrentEditedData(this.form,{});o=t.extend(this.cellDetails.rowData,o);var s={columnName:n.field,value:o[n.field],rowData:this.cellDetails.rowData,previousValue:this.cellDetails.value,columnObject:n,cell:this.form.parentElement,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};e||i.trigger("cellSave",s),s.cancel||(i.editModule.destroyForm(),i.editModule.destroyWidgets([n]),this.parent.notify(vt,{}),this.refreshTD(s.cell,n,i.getRowObjectFromUID(r.getAttribute("data-uid")),s.value),t.removeClass([r],["e-editedrow","e-batchrow"]),t.removeClass([s.cell],["e-editedbatchcell","e-boolcell"]),i.isEdit=!1,t.isNullOrUndefined(s.value)||s.value.toString()!==(t.isNullOrUndefined(this.cellDetails.value)?"":this.cellDetails.value).toString()||this.isColored||s.cell.classList.remove("e-updatedtd"),i.notify(ft,{}),this.isColored=!1)}},i.prototype.getDataByIndex=function(e){var t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data},i}(),on=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sn=function(e){function t(t,i,r){var n=e.call(this,t,i)||this;return n.parent=t,n.serviceLocator=i,n.renderer=r,n}return on(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t){e.prototype.addRecord.call(this,t)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.deleteRecord=function(t,i){e.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(en),ln=function(){function e(e){this.parent=e}return e.prototype.create=function(e){return t.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+e.column.field,name:e.column.field,type:"text","e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.write=function(e){var i="dialog"!==this.parent.editSettings.mode;this.obj=new l.DatePicker(t.extend({floatLabelType:i?"Never":"Always",value:new Date(e.rowData[e.column.field]),placeholder:i?"":e.column.headerText,enableRtl:this.parent.enableRtl,enabled:L(e.column,e.type,e.element)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),an=function(){function e(e,t){this.editCellType={dropdownedit:Jr,numericedit:$r,datepickeredit:ln,booleanedit:Yr,defaultedit:Zr},this.editType={inline:rn,normal:rn,batch:nn,dialog:sn},this.tapped=!1,this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return e.prototype.updateColTypeObj=function(){for(var e=0,i=this.parent.getColumns();e<i.length;e++){var r=i[e];r.edit=t.extend(new this.editCellType[r.editType&&this.editCellType[r.editType]?r.editType:"defaultedit"](this.parent,this.serviceLocator),r.edit||{})}},e.prototype.getModuleName=function(){return"edit"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=this.parent,i=(e.properties,0),r=Object.keys(e.properties);i<r.length;i++){switch(r[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!1,t.refresh()}}},e.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new Xr(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},e.prototype.initialEnd=function(){this.updateColTypeObj()},e.prototype.wireEvents=function(){t.EventHandler.add(this.parent.getContent(),"touchstart",this.tapEvent,this)},e.prototype.unwireEvents=function(){t.EventHandler.remove(this.parent.getContent(),"touchstart",this.tapEvent)},e.prototype.tapEvent=function(e){this.getUserAgent()&&(this.tapped?(clearTimeout(this.tapped),this.parent.notify(It,e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e.prototype.startEdit=function(e){var t=this.parent;if(t.editSettings.allowEditing&&!t.isEdit&&"batch"!==t.editSettings.mode){if(t.getSelectedRows().length)e||(e=t.getSelectedRows()[0]);else if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj);"none"!==e.style.display&&(this.editModule.startEdit(e),this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}},e.prototype.closeEdit=function(){"batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.querySelectorAll(".e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify("close-edit",{}))},e.prototype.refreshToolbar=function(){this.parent.notify(ft,{})},e.prototype.addRecord=function(e){this.parent.editSettings.allowAdding&&(this.editModule.addRecord(e),this.refreshToolbar(),this.parent.notify("start-add",{}))},e.prototype.deleteRecord=function(e,i){var r=this.parent;if(r.editSettings.allowDeleting){if(!i){if(t.isNullOrUndefined(r.selectedRowIndex)||-1===r.selectedRowIndex)return void this.showDialog("DeleteOperationAlert",this.alertDObj);if(r.editSettings.showDeleteConfirmDialog)return void this.showDialog("ConfirmDelete",this.dialogObj)}this.editModule.deleteRecord(e,i)}},e.prototype.deleteRow=function(e){this.deleteRecord(null,this.parent.getCurrentViewRecords()[parseInt(e.getAttribute("aria-rowindex"),10)])},e.prototype.endEdit=function(){"batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},e.prototype.updateCell=function(e,t,i){this.editModule.updateCell(e,t,i)},e.prototype.updateRow=function(e,t){this.editModule.updateRow(e,t)},e.prototype.batchCancel=function(){this.closeEdit()},e.prototype.batchSave=function(){this.endEdit()},e.prototype.editCell=function(e,t){this.editModule.editCell(e,t)},e.prototype.editFormValidate=function(){return!!this.formObj&&this.formObj.validate()},e.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},e.prototype.getCurrentEditCellData=function(){var e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]},e.prototype.saveCell=function(){this.editModule.saveCell()},e.prototype.endEditing=function(){this.editModule.endEdit(),this.refreshToolbar()},e.prototype.showDialog=function(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show()},e.prototype.getValueFromType=function(e,t){var i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(i=t===this.l10n.getConstant("True"));break;case"date":"datepicker"!==e.editType&&t&&t.length&&(i=new Date(t))}return i},e.prototype.destroyToolTip=function(){for(var e=0,i=[].slice.call(this.parent.getContentTable().querySelectorAll(".e-griderror"));e<i.length;e++){var r=i[e];t.remove(r)}},e.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},e.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},e.prototype.alertClick=function(){this.alertDObj.hide()},e.prototype.dlgWidget=function(e,r){var n=t.createElement("div",{id:this.parent.element.id+r});this.parent.element.appendChild(n);var o={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};o.buttons=e;var s=new i.Dialog(o);return s.appendTo(n),N(s.element),s},e.prototype.dlgCancel=function(){this.dialogObj.hide()},e.prototype.dlgOk=function(e){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):this.executeAction()}this.dlgCancel()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(He,this.onPropertyChanged,this),this.parent.on(Le,this.initialEnd,this),this.parent.on(et,this.keyPressHandler,this),this.parent.on(yt,this.updateColTypeObj,this),this.parent.on(vt,this.destroyToolTip,this),this.parent.on(St,this.preventBatch,this),this.parent.on(Rt,this.destroyForm,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Z,this.actionBeginFunction),this.parent.addEventListener(ee,this.actionCompleteFunction),this.parent.on(Le,this.wireEvents,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(He,this.onPropertyChanged),this.parent.off(Le,this.initialEnd),this.parent.off(et,this.keyPressHandler),this.parent.off(yt,this.updateColTypeObj),this.parent.off(vt,this.destroyToolTip),this.parent.off(St,this.preventBatch),this.parent.off(Rt,this.destroyForm),this.parent.removeEventListener(ee,this.actionCompleteFunction),this.parent.removeEventListener(Z,this.actionBeginFunction),this.parent.off(Le,this.unwireEvents))},e.prototype.actionComplete=function(e){["add","beginEdit","save","delete","cancel"].indexOf(e.requestType)<0&&(this.parent.isEdit=!1),this.refreshToolbar()},e.prototype.getCurrentEditedData=function(e,i){for(var r=this.parent,n=[].slice.call(e.querySelectorAll(".e-field")),o=0,s=n.length;o<s;o++){var l=r.getColumnByUid(n[o].getAttribute("e-mappinguid")),a=void 0;if(l&&l.field){var c=l.edit.read;"string"==typeof c&&(c=t.getValue(c,window)),a="checkbox"!==l.type?r.editModule.getValueFromType(l,l.edit.read(n[o])):n[o].checked,t.setValue(l.field,a,i)}}return i},e.prototype.onActionBegin=function(e){"batch"!==this.parent.editSettings.mode&&"save"!==e.requestType&&this.formObj&&!this.formObj.isDestroyed&&(this.destroyForm(),this.destroyWidgets())},e.prototype.destroyWidgets=function(e){for(var t=0,i=e=e||this.parent.getColumns();t<i.length;t++){var r=i[t];r.edit.destroy&&r.edit.destroy()}},e.prototype.destroyForm=function(){this.destroyToolTip(),this.formObj&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.destroyToolTip()},e.prototype.destroy=function(){this.destroyForm(),this.removeEventListener();var e=this.dialogObj.element;this.dialogObj.destroy(),t.remove(e),e=this.alertDObj.element,this.alertDObj.destroy(),t.remove(e),this.unwireEvents()},e.prototype.keyPressHandler=function(e){switch(e.action){case"insert":this.addRecord();break;case"delete":this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":b(e.target,".e-unboundcelldiv")||"batch"===this.parent.editSettings.mode||!b(e.target,"e-gridcontent")||document.querySelectorAll(".e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.closeEdit()}},e.prototype.preventBatch=function(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)},e.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7)},e.prototype.applyFormValidation=function(e){for(var t=this,i=this.parent,r=i.element.querySelector(".e-gridform"),n={},s=0,l=e=e||i.columns;s<l.length;s++){var a=l[s];a.validationRules&&r.querySelectorAll("#"+i.element.id+a.field).length&&(n[a.field]=a.validationRules)}this.parent.editModule.formObj=new o.FormValidator(r,{rules:n,validationComplete:function(e){t.validationComplete(e)},customPlacement:function(e,i){t.valErrorPlacement(e,i)}})},e.prototype.valErrorPlacement=function(e,t){if(this.parent.isEdit){var i=t.getAttribute("for"),r=("dialog"!==this.parent.editSettings.mode?this.parent.getContentTable():this.parent.element.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper")).querySelector("#"+i+"_Error");r?r.querySelector(".e-tip-content").innerHTML=t.innerHTML:this.createTooltip(e,t,i,"")}},e.prototype.validationComplete=function(e){if(this.parent.isEdit){var t=("dialog"!==this.parent.editSettings.mode?this.parent.getContentTable():this.parent.element.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper")).querySelector("#"+e.inputName+"_Error");t&&("failure"===e.status?t.style.display="":t.style.display="none")}},e.prototype.createTooltip=function(e,i,r,n){var o="dialog"!==this.parent.editSettings.mode?this.parent.getContentTable():this.parent.element.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),s=o.getBoundingClientRect(),l=b(e,"e-rowcell").getBoundingClientRect(),a=t.createElement("div",{className:"e-tooltip-wrap e-popup e-griderror",id:r+"_Error",styles:"display:"+n+";top:"+(l.bottom-s.top+o.scrollTop+9)+"px;left:"+(l.left-s.left+o.scrollLeft+l.width/2)+"px;"}),c=t.createElement("div",{className:"e-tip-content"});c.appendChild(i);var p=t.createElement("div",{className:"e-arrow-tip e-tip-top"});p.appendChild(t.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),p.appendChild(t.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),a.appendChild(c),a.appendChild(p),o.appendChild(a),a.style.left=parseInt(a.style.left,10)-a.offsetWidth/2+"px"},e}(),cn=function(){function e(e,i){this.showColumn=[],this.hideColumn=[],this.isDlgOpen=!1,this.dlghide=!1,this.initialOpenDlg=!0,this.stateChangeColumns=[],this.isInitialOpen=!1,this.isCustomizeOpenCC=!1,this.cBoxTrue=n.createCheckBox(!0,{checked:!0,label:" "}),this.cBoxFalse=n.createCheckBox(!0,{checked:!1,label:" "}),this.parent=e,this.serviceLocator=i,this.addEventListener(),this.cBoxTrue.insertBefore(t.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(t.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&t.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.destroy=function(){this.removeEventListener(),this.unWireEvents(),!t.isNullOrUndefined(this.dlgObj)&&this.dlgObj.element&&this.dlgObj.destroy()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(tt,this.clickHandler,this),this.parent.on(Le,this.render,this),this.parent.addEventListener(ie,this.hideDialog.bind(this)),this.parent.on(it,this.destroy,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(tt,this.clickHandler),this.parent.off(Le,this.render),this.parent.off(it,this.destroy))},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderDlgContent(),this.getShowHideService=this.serviceLocator.getService("showHideService")},e.prototype.clickHandler=function(e){var i=e.target;if(!this.isCustomizeOpenCC)if(t.isNullOrUndefined(t.closest(i,".e-cc"))&&t.isNullOrUndefined(t.closest(i,".e-cc-toolbar")))t.isNullOrUndefined(this.dlgObj)||!this.dlgObj.visible||i.classList.contains("e-toolbar-items")||(this.dlgObj.hide(),this.refreshCheckboxState(),this.isDlgOpen=!1);else if(i.classList.contains("e-columnchooser-btn")||i.classList.contains("e-cc-toolbar")){if(this.initialOpenDlg&&this.dlgObj.visible||!this.isDlgOpen)return void(this.isDlgOpen=!0)}else i.classList.contains("e-cc-cancel")&&(i.parentElement.querySelector(".e-ccsearch").value="",this.columnChooserSearch(""),this.removeCancelIcon())},e.prototype.hideDialog=function(){!t.isNullOrUndefined(this.dlgObj)&&this.dlgObj.visible&&(this.dlgObj.hide(),this.isDlgOpen=!1)},e.prototype.renderColumnChooser=function(e,r,n){if(this.dlgObj.visible)this.hideDialog(),this.addcancelIcon();else{var o={requestType:"beforeOpenColumnChooser",element:this.parent.element,columns:this.parent.getColumns()};this.parent.trigger(Ie,o),this.refreshCheckboxState(),this.dlgObj.dataBind(),this.dlgObj.element.style.maxHeight="430px";var s=this.dlgObj.element.style.display;this.dlgObj.element.style.display="block";var l=i.calculateRelativeBasedPosition(t.closest(n,".e-toolbar-item"),this.dlgObj.element);this.dlgObj.element.style.display=s,this.dlgObj.element.style.top=l.top+t.closest(n,".e-cc-toolbar").getBoundingClientRect().height+"px";t.isNullOrUndefined(t.closest(n,".e-bigger"))||(this.dlgObj.width=253),t.Browser.isDevice?(this.dlgObj.target=document.body,this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition(),this.dlgObj.open=this.mOpenDlg.bind(this)):this.parent.enableRtl?this.dlgObj.element.style.left=n.offsetLeft+"px":this.dlgObj.element.style.left=l.left-250+t.closest(n,".e-cc-toolbar").clientWidth+2+"px",this.removeCancelIcon(),this.dlgObj.show()}},e.prototype.openColumnChooser=function(e,i){this.isCustomizeOpenCC=!0,this.dlgObj.visible?this.hideDialog():(this.isInitialOpen?this.refreshCheckboxState():this.dlgObj.content=this.renderChooserList(),this.dlgObj.dataBind(),this.dlgObj.position={X:"center",Y:"center"},t.isNullOrUndefined(e)?(this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition()):(this.dlgObj.element.style.top="",this.dlgObj.element.style.left="",this.dlgObj.element.style.top=i+"px",this.dlgObj.element.style.left=e+"px"),this.dlgObj.beforeOpen=this.customDialogOpen.bind(this),this.dlgObj.show(),this.isInitialOpen=!0,this.dlgObj.beforeClose=this.customDialogClose.bind(this))},e.prototype.customDialogOpen=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.add(e,"keyup",this.columnChooserManualSearch,this)},e.prototype.customDialogClose=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.remove(e,"keyup",this.columnChooserManualSearch)},e.prototype.renderDlgContent=function(){this.dlgDiv=t.createElement("div",{className:"e-ccdlg e-cc",id:this.parent.element.id+"_ccdlg"}),this.parent.element.appendChild(this.dlgDiv);this.parent.element.getBoundingClientRect().width,this.parent.enableRtl;var e=this.parent.element.querySelector(".e-ccdiv");t.isNullOrUndefined(e)||e.getBoundingClientRect().top,this.dlgObj=new i.Dialog({header:this.l10n.getConstant("ChooseColumns"),showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,target:document.getElementById(this.parent.element.id),buttons:[{click:this.confirmDlgBtnClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),isPrimary:!0,cssClass:"e-cc e-cc_okbtn"}},{click:this.clearActions.bind(this),buttonModel:{cssClass:"e-flat e-cc e-cc-cnbtn",content:this.l10n.getConstant("CancelButton")}}],content:this.renderChooserList(),width:250,cssClass:"e-cc",animationSettings:{effect:"None"}}),this.dlgObj.appendTo(this.dlgDiv),N(this.dlgObj.element),this.wireEvents()},e.prototype.renderChooserList=function(){this.mainDiv=t.createElement("div",{className:"e-main-div e-cc"});var e=t.createElement("div",{className:"e-cc-searchdiv e-cc e-input-group"}),i=t.createElement("input",{className:"e-ccsearch e-cc e-input",attrs:{placeholder:this.l10n.getConstant("Search")}}),r=t.createElement("span",{className:"e-ccsearch-icon e-icons e-cc e-input-group-icon"}),n=t.createElement("div",{className:"e-cc-contentdiv"});this.innerDiv=t.createElement("div",{className:"e-innerdiv e-cc"}),e.appendChild(i),e.appendChild(r),i.addEventListener("focus",this.searchFocus.bind(this,i)),i.addEventListener("blur",this.searchBlur.bind(this,i));var o=this.refreshCheckboxList(this.parent.getColumns());return this.innerDiv.appendChild(o),n.appendChild(this.innerDiv),this.mainDiv.appendChild(e),this.mainDiv.appendChild(n),this.mainDiv},e.prototype.searchFocus=function(e){e.parentElement.classList.add("e-input-focus")},e.prototype.searchBlur=function(e){e.parentElement.classList.remove("e-input-focus")},e.prototype.confirmDlgBtnClick=function(e){if(this.stateChangeColumns=[],!t.isNullOrUndefined(e)){this.hideColumn.length&&this.columnStateChange(this.hideColumn,!1),this.showColumn.length&&this.columnStateChange(this.showColumn,!0);var i={requestType:"columnstate",element:this.parent.element,columns:this.stateChangeColumns,dialogInstance:this.dlgObj};this.parent.trigger(ee,i),this.getShowHideService.setVisible(this.stateChangeColumns),this.clearActions()}},e.prototype.columnStateChange=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=this.parent.getColumnByUid(r);n.visible=t,this.stateChangeColumns.push(n)}},e.prototype.clearActions=function(){this.hideColumn=[],this.showColumn=[],this.hideDialog(),this.addcancelIcon()},e.prototype.checkstatecolumn=function(e,t){e?(-1!==this.hideColumn.indexOf(t)&&this.hideColumn.splice(this.hideColumn.indexOf(t),1),-1===this.showColumn.indexOf(t)&&this.showColumn.push(t)):(-1!==this.showColumn.indexOf(t)&&this.showColumn.splice(this.showColumn.indexOf(t),1),-1===this.hideColumn.indexOf(t)&&this.hideColumn.push(t))},e.prototype.columnChooserSearch=function(e){var i,n=!1;if(""===e?(this.removeCancelIcon(),i=this.parent.getColumns(),n=!0):i=new r.DataManager(this.parent.getColumns()).executeLocal((new r.Query).where("headerText","startswith",e,!0)),i.length)this.innerDiv.innerHTML=" ",this.innerDiv.classList.remove("e-ccnmdiv"),this.innerDiv.appendChild(this.refreshCheckboxList(i,e)),n||this.addcancelIcon();else{var o=t.createElement("span",{className:"e-cc e-nmatch"});o.innerHTML=this.l10n.getConstant("Matchs"),this.innerDiv.innerHTML=" ",this.innerDiv.appendChild(o),this.innerDiv.classList.add("e-ccnmdiv")}this.flag=!0,this.stopTimer()},e.prototype.wireEvents=function(){t.EventHandler.add(this.dlgObj.element,"click",this.checkBoxClickHandler,this);var e=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.add(e,"keyup",this.columnChooserManualSearch,this)},e.prototype.unWireEvents=function(){this.dlgObj.element&&t.EventHandler.remove(this.dlgObj.element,"click",this.checkBoxClickHandler);var e=this.dlgObj.content.querySelector("input.e-ccsearch");t.EventHandler.remove(e,"keyup",this.columnChooserManualSearch)},e.prototype.checkBoxClickHandler=function(e){var t,i=b(e.target,"e-checkbox-wrapper");if(i){if(U(i.parentElement),i.querySelector(".e-chk-hidden").focus(),i.querySelector(".e-check"))t=!0;else{if(!i.querySelector(".e-uncheck"))return;t=!1}var r=b(i,"e-ccheck").getAttribute("uid");this.checkstatecolumn(t,r)}},e.prototype.refreshCheckboxList=function(e,i){this.ulElement=t.createElement("ul",{className:"e-ccul-ele e-cc"});for(var r=0;r<e.length;r++){var n=e[r];this.renderCheckbox(n)}return this.ulElement},e.prototype.refreshCheckboxState=function(){this.dlgObj.element.querySelector(".e-cc.e-input").value="",this.columnChooserSearch("");for(var e=0;e<this.parent.element.querySelectorAll(".e-cc-chbox").length;e++){var t=this.parent.element.querySelectorAll(".e-cc-chbox")[e],i=b(t,"e-ccheck").getAttribute("uid");this.parent.getColumnByUid(i).visible?(t.checked=!0,this.checkState(t.parentElement.querySelector(".e-icons"),!0)):(t.checked=!1,this.checkState(t.parentElement.querySelector(".e-icons"),!1))}},e.prototype.checkState=function(e,i){i?t.classList(e,["e-check"],["e-uncheck"]):t.classList(e,["e-uncheck"],["e-check"])},e.prototype.createCheckBox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);return r.querySelector(".e-label").innerHTML=e,_(i,r,"e-ccheck")},e.prototype.renderCheckbox=function(e){var i,r,n;if(e.showInColumnChooser){i=t.createElement("li",{className:"e-cclist e-cc",styles:"list-style:None",id:"e-ccli_"+e.uid}),r=-1!==this.hideColumn.indexOf(e.uid),n=-1!==this.showColumn.indexOf(e.uid);var o=this.createCheckBox(e.headerText,e.visible&&!r||n,e.uid);i.appendChild(o),this.ulElement.appendChild(i)}},e.prototype.columnChooserManualSearch=function(e){this.addcancelIcon(),this.searchValue=e.target.value,this.stopTimer(),this.startTimer(e)},e.prototype.startTimer=function(e){var t=this,i=t.flag||13===e.keyCode?0:500;this.timer=window.setInterval(function(){t.columnChooserSearch(t.searchValue)},i)},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.addcancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.add("e-cc-cancel")},e.prototype.removeCancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.remove("e-cc-cancel")},e.prototype.mOpenDlg=function(){t.Browser.isDevice&&(this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.remove("e-input-focus"),this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0].focus())},e.prototype.getModuleName=function(){return"columnChooser"},e}(),pn=function(){function i(e){this.hideColumnInclude=!1,this.parent=e}return i.getQuery=function(e,t){return t.isRemote()?t.generateQuery(!0).requiresCount().take(e.pageSettings.totalRecordsCount):t.generateQuery(!0).requiresCount()},i.prototype.getHeaders=function(t,i){this.hideColumnInclude=!!i;var r=t;this.colDepth=this.measureColumnDepth(r);for(var n=[],o=[],s=0;s<this.colDepth;s++)n[s]=new Gt({}),n[s].cells=[];n=this.processColumns(n);for(var l=0,a=n=this.processHeaderCells(n);l<a.length;l++){var c=a[l];for(s=0;s<c.cells.length;s++){var p=c.cells[s];void 0===p.visible&&p.cellType!==e.CellType.StackedHeader&&(c.cells=this.removeCellFromRow(c.cells,s),s-=1),i||void 0===p.visible||p.visible||(c.cells=this.removeCellFromRow(c.cells,s),s-=1)}}for(s=0;s<r.length;s++)this.generateActualColumns(r[s],o);return{rows:n,columns:o}},i.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},i.prototype.generateActualColumns=function(e,t){if(e.columns){if(e.visible||this.hideColumnInclude){if(0!==this.getCellCount(e,0))for(var i=0;i<e.columns.length;i++)this.generateActualColumns(e.columns[i],t)}}else(e.visible||this.hideColumnInclude)&&t.push(e)},i.prototype.removeCellFromRow=function(e,t){for(var i=[],r=0;r<t;r++)i.push(e[r]);for(r=t+1;r<e.length;r++)i.push(e[r]);return i},i.prototype.processHeaderCells=function(e){for(var t=this.parent.enableColumnVirtualization?this.parent.getColumns():this.parent.columns,i=0;i<t.length;i++)e=this.appendGridCells(t[i],e,0,0===i,!1,i===t.length-1);return e},i.prototype.appendGridCells=function(t,i,r,n,o,s){var l=s?"e-lastcell":"";if(t.columns){var a=this.getCellCount(t,0);a&&i[r].cells.push(new Wt({cellType:e.CellType.StackedHeader,column:t,colSpan:a}));for(var c=void 0,p=0,d=t.columns.length;p<d;p++)t.columns[p].visible&&!c&&(c=!0),i=this.appendGridCells(t.columns[p],i,r+1,n,0===p,p===d-1&&s)}else i[r].cells.push(this.generateCell(t,e.CellType.Header,this.colDepth-r,(n?"":o?"e-firstcell":"")+l,r,this.parent.getColumnIndexByUid(t.uid)));return i},i.prototype.generateCell=function(e,i,r,n,o,s){var l={visible:e.visible,isDataCell:!1,isTemplate:!t.isNullOrUndefined(e.headerTemplate),rowID:"",column:e,cellType:i,rowSpan:r,className:n,index:o,colIndex:s};return(!l.rowSpan||l.rowSpan<2)&&delete l.rowSpan,new Wt(l)},i.prototype.processColumns=function(t){for(var i=this.parent,r=this.parent.getColumnIndexesInView(),n=0,o=t.length;n<o;n++){if(i.allowGrouping)for(var s=0,l=i.groupSettings.columns.length;s<l;s++)this.parent.enableColumnVirtualization&&-1===r.indexOf(s)||t[n].cells.push(this.generateCell({},e.CellType.HeaderIndent));(i.detailTemplate||i.childGrid)&&t[n].cells.push(this.generateCell({},e.CellType.DetailHeader))}return t},i.prototype.getCellCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getCellCount(e.columns[i],t);else(e.visible||this.hideColumnInclude)&&t++;return t},i.prototype.measureColumnDepth=function(e){for(var t=0,i=0;i<e.length;i++){var r=this.checkDepth(e[i],0);t<r&&(t=r)}return t+1},i.prototype.checkDepth=function(e,t){if(e.columns){t++;for(var i=0;i<e.columns.length;i++)t=this.checkDepth(e.columns[i],t)}return t},i}(),dn=function(){function e(){this.valueFormatter=new Q,this.internationalization=new t.Internationalization}return e.prototype.returnFormattedValue=function(e,i){return!t.isNullOrUndefined(e.value)&&e.value?this.valueFormatter.getFormatFunction(i)(e.value):""},e.prototype.formatCellValue=function(e){if("number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return e.value?this.internationalization.getNumberFormat({format:e.column.format})(e.value):"";if("boolean"===e.column.type)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return void 0===e.column.type||null===e.column.type?"":e.value.toString();if("string"==typeof e.column.format){var t=void 0;return t="date"===e.column.type?{type:"date",skeleton:e.column.format}:"time"===e.column.type?{type:"time",skeleton:e.column.format}:{type:"dateTime",skeleton:e.column.format},this.returnFormattedValue(e,t)}if(e.column.format instanceof Object&&void 0===e.column.format.type)return e.value.toString();var i=void 0;return i="date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,i)},e}(),hn=function(){function i(e){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="appendtosheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isElementIdChanged=!1,this.parent=e}return i.prototype.getModuleName=function(){return"ExcelExport"},i.prototype.init=function(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,this.helper=new pn(e),this.parent.isDestroyed||(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="appendtosheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new dn)},i.prototype.Map=function(e,t,i,r,n){var o=e;return o.trigger(Dt),this.data=new Vt(o),this.isExporting=!0,this.isCsvExport=n||!1,this.processRecords(o,t,i,r)},i.prototype.processRecords=function(e,t,i,n){var o=this;if(void 0!==t&&void 0!==t.dataSource&&t.dataSource instanceof r.DataManager){return new Promise(function(s,l){t.dataSource.executeQuery(new r.Query).then(function(r){o.init(e),o.processInnerRecords(e,t,i,n,r),s(o.book)})})}return new Promise(function(r,s){o.data.getData({},pn.getQuery(e,o.data)).then(function(s){o.init(e),o.processInnerRecords(e,t,i,n,s),r(o.book)})})},i.prototype.processInnerRecords=function(e,t,i,n,o){var s=5;void 0!==t&&void 0!==t.multipleExport&&(this.expType=void 0!==t.multipleExport.type?t.multipleExport.type:"appendtosheet",void 0!==t.multipleExport.blankRows&&(s=t.multipleExport.blankRows)),void 0===n?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[]):"newsheet"===this.expType?(this.workSheet=n.worksheets,this.rows=[],this.columns=[],this.styles=n.styles):(this.workSheet=[],this.rows=n.worksheets[0].rows,this.columns=n.worksheets[0].columns,this.styles=n.styles,this.rowLength=this.rows[this.rows.length-1].index+s,this.rowLength++),void 0!==t&&(void 0!==i?(void 0===t.header||!i&&"newsheet"!==this.expType||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),void 0!==t.footer&&("appendtosheet"===this.expType?i||(this.footer=JSON.parse(JSON.stringify(t.footer))):this.footer=JSON.parse(JSON.stringify(t.footer)))):(void 0!==t.header&&this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),void 0!==t.footer&&(this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=void 0!==t&&t.includeHiddenColumn;var l=this.helper.getHeaders(e.columns,this.includeHiddenColumn),a=0;void 0!==o.result.level&&(a+=o.result.level,a+=o.result.childLevels),this.processHeaderContent(e,l,t,a),void 0===t||void 0===t.dataSource||t.dataSource instanceof r.DataManager?void 0!==t&&"currentpage"===t.exportType?this.processRecordContent(e,o,l,i,e.getCurrentViewRecords()):this.processRecordContent(e,o,l,i):this.processRecordContent(e,o,l,i,t.dataSource),this.isExporting=!1,e.trigger(kt)},i.prototype.processRecordContent=function(e,t,i,r,n){e.columns;var o=void 0;void 0!==(o=void 0!==n?n:t.result).level?this.processGroupedRows(e,o,i,o.level):(this.processRecordRows(e,o,i,0),void 0!==t.aggregates&&(void 0!==n?this.processAggregates(e,t.result,n):this.processAggregates(e,t.result))),void 0!==this.footer&&("appendtosheet"===this.expType&&!r||"newsheet"===this.expType)&&this.processExcelFooter(this.footer);var s={};if(this.columns.length>0&&(s.columns=this.columns),s.rows=this.rows,this.workSheet.push(s),this.book.worksheets=this.workSheet,this.book.styles=this.styles,!r){if(this.isCsvExport){new c.Workbook(this.book,"csv").save("Export.csv")}else{new c.Workbook(this.book,"xlsx").save("Export.xlsx")}this.isElementIdChanged&&(e.element.id="")}},i.prototype.processGroupedRows=function(e,t,i,r){for(var n=0,o=t;n<o.length;n++){var s=o[n],l=[],a={};a.index=1+r;var c={value:s.key,column:e.getColumnByField(s.field),style:void 0};a.value=s.field+": "+this.exportValueFormatter.formatCellValue(c)+" - ",s.count>1?a.value+=s.count+" items":a.value+=s.count+" item",a.style=this.getCaptionThemeStyle(this.theme);var p=new Zt(e).generateRows(s);if(this.fillAggregates(e,p,t.level+t.childLevels,this.rowLength),l.push(a),this.rows[this.rows.length-1].cells.length>0){for(var d=t.level+t.childLevels+p[0].cells.length,h=0,u=0,g=this.rows[this.rows.length-1].cells;u<g.length;u++){var f=g[u];f.index<d&&(d=f.index),f.index>h&&(h=f.index),f.style=this.getCaptionThemeStyle(this.theme),l.push(f)}for(d-a.index>1&&(a.colSpan=d-a.index);h<i.columns.length+1+r;){var m={};0===t.childLevels?m.index=h:m.index=h+1,m.style=this.getCaptionThemeStyle(this.theme),l.push(m),h++}}else{for(var y=0,v=0,C=i.columns;v<C.length;v++){C[v].visible&&y++}a.colSpan=t.childLevels+y}this.rows[this.rows.length-1].cells=l,this.rowLength++,void 0!==t.childLevels&&t.childLevels>0?this.processGroupedRows(e,s.items,i,s.items.level):(this.processRecordRows(e,s.items,i,r),this.processAggregates(e,s,void 0,r))}},i.prototype.processRecordRows=function(e,i,r,n){for(var o=Object.keys(i).length,s=1,l=[],a=0;a<o;a++){l=[],s=1;for(var c=0,p=r.columns.length;c<p;c++){var d=i[a][r.columns[c].field];if(!t.isNullOrUndefined(d)){var h={data:i[a],column:r.columns[c]};e.trigger(Ot,t.extend(h,{column:r.columns[c],data:i[a],value:d,style:void 0,colSpan:1}));var u={};if(u.index=s+n,u.value=h.value,h.colSpan>1&&(u.colSpan=h.colSpan),void 0!==h.style){var g=this.getColumnStyle(e,s+n);u.style=this.mergeOptions(this.styles[g],h.style)}else u.style={name:e.element.id+"column"+(s+n)};l.push(u)}s++}this.rows.push({index:this.rowLength++,cells:l})}},i.prototype.processAggregates=function(e,t,i,r){var n=new Jt(e),o=void 0;if(o=void 0!==i?i:t,void 0===r&&(r=0),e.groupSettings.columns.length>0){var s=new $t(e).generateRows(o,{level:o.level});s.length>0&&this.fillAggregates(e,s,r)}var l=n.generateRows(o,t.aggregates);l.length>0&&this.fillAggregates(e,l,r)},i.prototype.fillAggregates=function(t,i,r,n){for(var o=0,s=i;o<s.length;o++){for(var l=s[o],a=[],c=0,p=0,d=l.cells;p<d.length;p++){var h=d[p],u={};if(h.visible||this.includeHiddenColumn)if(c++,h.isDataCell){if(u.index=c+r,void 0!==h.column.footerTemplate)u.value=this.getAggreateValue(e.CellType.Summary,h.column.footerTemplate,h,l);else if(void 0!==h.column.groupFooterTemplate)u.value=this.getAggreateValue(e.CellType.GroupSummary,h.column.groupFooterTemplate,h,l);else if(void 0!==h.column.groupCaptionTemplate)u.value=this.getAggreateValue(e.CellType.CaptionSummary,h.column.groupCaptionTemplate,h,l);else for(var g=0,f=Object.keys(l.data[h.column.field]);g<f.length;g++){f[g]===h.column.type&&(void 0!==l.data[h.column.field].sum?u.value=l.data[h.column.field].sum:void 0!==l.data[h.column.field].average?u.value=l.data[h.column.field].average:void 0!==l.data[h.column.field].max?u.value=l.data[h.column.field].max:void 0!==l.data[h.column.field].min?u.value=l.data[h.column.field].min:void 0!==l.data[h.column.field].count?u.value=l.data[h.column.field].count:void 0!==l.data[h.column.field].truecount?u.value=l.data[h.column.field].truecount:void 0!==l.data[h.column.field].falsecount?u.value=l.data[h.column.field].falsecount:void 0!==l.data[h.column.field].custom&&(u.value=l.data[h.column.field].custom))}u.style=this.getCaptionThemeStyle(this.theme),a.push(u)}else void 0===n&&(u.index=c+r,u.style=this.getCaptionThemeStyle(this.theme),a.push(u))}void 0!==n?this.rows.push({index:n,cells:a}):this.rows.push({index:this.rowLength++,cells:a})}},i.prototype.getAggreateValue=function(i,r,n,o){var s={};s[t.getEnumValue(e.CellType,n.cellType)]=t.compile(r);return s[t.getEnumValue(e.CellType,n.cellType)](o.data[n.column.field?n.column.field:n.column.columnName])[0].wholeText},i.prototype.mergeOptions=function(e,t){for(var i={},r=Object.keys(e),n=0;n<r.length;n++)"name"!==r[n]&&(i[r[n]]=e[r[n]]);r=Object.keys(t);for(n=0;n<r.length;n++)"name"!==r[n]&&(i[r[n]]=t[r[n]]);return i},i.prototype.getColumnStyle=function(e,t){for(var i=0,r=0,n=this.styles;r<n.length;r++){if(n[r].name===e.element.id+"column"+t)return i;i++}},i.prototype.processHeaderContent=function(e,t,i,r){e.columns;var n=t,o=n.rows,s=n.columns,l=[];if(r>0)for(var a=0;a!==r;)this.columns.push({index:a+1,width:30}),a++;for(var c=0;c<o.length;c++){for(var p=1+r,d=[],h=0;h<o[c].cells.length;h++){for(var u={},g={},f=o[c].cells[h],m={contains:!0,index:1};m.contains;)if(m=this.getIndex(l,1,p),p=m.index,!m.contains){g.index=m.index;break}if(void 0!==f.rowSpan&&1!==f.rowSpan){g.rowSpan=f.rowSpan;for(var y=1;y<f.rowSpan+1;y++){var v={rowIndex:0,columnIndex:0};v.rowIndex=y,v.columnIndex=p,l.push(v)}}void 0!==f.colSpan&&1!==f.colSpan&&(g.colSpan=f.colSpan,p=p+g.colSpan-1),g.value=f.column.headerText,void 0!==i&&void 0!==i.theme&&(this.theme=i.theme),u=this.getHeaderThemeStyle(this.theme),void 0!==f.column.textAlign&&(u.hAlign=f.column.textAlign),void 0!==f.column.headerTextAlign&&(u.hAlign=f.column.headerTextAlign),g.style=u,d.push(g),p++}this.rows.push({index:this.rowLength++,cells:d})}for(var C=0;C<s.length;C++)this.parseStyles(e,s[C],this.getRecordThemeStyle(this.theme),r+C+1)},i.prototype.getHeaderThemeStyle=function(e){var t={};return t.fontSize=12,t.borders={color:"#E0E0E0"},void 0!==e&&void 0!==e.header&&(t=this.updateThemeStyle(e.header,t)),t},i.prototype.updateThemeStyle=function(e,t){return void 0!==e.fontColor&&(t.fontColor=e.fontColor),void 0!==e.fontName&&(t.fontName=e.fontName),void 0!==e.fontSize&&(t.fontSize=e.fontSize),void 0!==e.borders&&(void 0!==e.borders.color&&(t.borders.color=e.borders.color),void 0!==e.borders.lineStyle&&(t.borders.lineStyle=e.borders.lineStyle)),!1!==e.bold&&(t.bold=e.bold),t},i.prototype.getCaptionThemeStyle=function(e){var t={};return t.fontSize=13,t.backColor="#F6F6F6",void 0!==e&&void 0!==e.caption&&(t=this.updateThemeStyle(e.caption,t)),t},i.prototype.getRecordThemeStyle=function(e){var t={};return t.fontSize=13,t.borders={color:"#E0E0E0"},void 0!==e&&void 0!==e.record&&(t=this.updateThemeStyle(e.record,t)),t},i.prototype.processExcelHeader=function(e){if(void 0!==e.rows&&("newsheet"===this.expType||1===this.rowLength)){var t=void 0;void 0===e.headerRows?this.rowLength=e.rows.length:this.rowLength=e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(var i=0;i<t;i++){var r=e.rows[i];null!==r.index&&void 0!==r.index||(r.index=i+1),this.updatedCellIndex(r)}}},i.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,i=0;i<t;i++){var r=e.cells[i];null!==r.index&&void 0!==r.index||(r.index=i+1)}this.rows.push(e)},i.prototype.processExcelFooter=function(e){if(void 0!==e.rows){var t=void 0;void 0===e.footerRows?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(var i=0;i<t;i++){var r=e.rows[i];null===r.index||void 0===r.index?r.index=this.rowLength++:r.index+=this.rowLength,this.updatedCellIndex(r)}}},i.prototype.getIndex=function(e,t,i){for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o.rowIndex===t&&o.columnIndex===i)return i+=1,{contains:!0,index:i}}return{contains:!1,index:i}},i.prototype.parseStyles=function(e,t,i,r){void 0!==t.format&&(void 0!==t.format.skeleton?(i.numberFormat=t.format.skeleton,void 0!==t.format.type&&(i.type=t.format.type)):(i.numberFormat=t.format,i.type=t.type)),void 0!==t.textAlign&&(i.hAlign=t.textAlign),Object.keys(i).length>0&&(i.name=e.element.id+"column"+r,this.styles.push(i)),void 0!==t.width&&this.columns.push({index:r,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})},i.prototype.destroy=function(){},i}(),un=function(){function i(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.parent=e,this.parent.isDestroyed}return i.prototype.getModuleName=function(){return"PdfExport"},i.prototype.init=function(e){this.exportValueFormatter=new dn,this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e;var t=e;this.helper=new pn(t),this.isGrouping=!1,this.isExporting=!0,t.trigger(Pt)},i.prototype.Map=function(e,t,i,n){var o=this;if(this.data=new Vt(this.parent),void 0!==t&&void 0!==t.dataSource&&t.dataSource instanceof r.DataManager){return new Promise(function(s,l){new r.DataManager({url:t.dataSource.dataSource.url,adaptor:t.dataSource.adaptor}).executeQuery(new r.Query).then(function(r){o.init(e),o.pdfDocument=void 0!==n?n:new p.PdfDocument,o.processExport(e,r,t,i),o.isExporting=!1,e.trigger(Mt),s(o.pdfDocument)})})}return new Promise(function(r,s){o.data.getData({},pn.getQuery(e,o.data)).then(function(s){o.init(e),o.pdfDocument=void 0!==n?n:new p.PdfDocument,o.processExport(e,s,t,i),o.isExporting=!1,e.trigger(Mt),r(o.pdfDocument)})})},i.prototype.processExport=function(e,t,i,r){void 0!==i&&(this.gridTheme=i.theme);var n=e.columns,o=t.result,s=this.pdfDocument.sections.add(),l=this.processExportProperties(i,o,s);void 0!==(o=l.dataSource).GroupGuid&&(this.isGrouping=!0);var a=(s=l.section).pages.add(),c=new p.PdfGrid,d=this.getHeaderThemeStyle(),h=d.border,u=d.font,g=d.brush,f=this.helper.getHeaders(n,this.hideColumnInclude),m=f.rows,y=f.columns;c=this.processGridHeaders(o.childLevels,c,m,y,h,u,g),this.setColumnProperties(y,c);var v=this.getSummaryCaptionThemeStyle();if(void 0!==o&&null!==o&&o.length>0){if(this.isGrouping?this.processGroupedRecords(c,o,y,e,h,0,v.font,v.brush,v.backgroundBrush,t):this.processRecord(h,y,e,o,c),void 0!==t.aggregates){var C=new Jt(e),w=void 0;w=this.customDataSource?C.generateRows(o,t.aggregates):this.currentViewData?C.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):this.isGrouping?C.generateRows(o.records,t.aggregates):C.generateRows(t.result,t.aggregates),this.processAggregates(w,c,h,v.font,v.brush,v.backgroundBrush,!1)}}else{c.rows.addRow().style.setBorder(h)}c.draw(a,20,20),r||this.pdfDocument.save("Export.pdf")},i.prototype.getSummaryCaptionThemeStyle=function(){if(void 0!==this.gridTheme&&void 0!==this.gridTheme.caption&&null!==this.gridTheme.caption){void 0!==this.gridTheme.caption.fontSize&&this.gridTheme.caption.fontSize;var e=new p.PdfColor;if(void 0!==this.gridTheme.caption.fontColor){var t=this.hexToRgb(this.gridTheme.caption.fontColor);e=new p.PdfColor(t.r,t.g,t.b)}return{font:new p.PdfStandardFont(p.PdfFontFamily.Helvetica,10.5),brush:new p.PdfSolidBrush(new p.PdfColor(e)),backgroundBrush:new p.PdfSolidBrush(new p.PdfColor(246,246,246))}}return{font:new p.PdfStandardFont(p.PdfFontFamily.Helvetica,9.75),brush:new p.PdfSolidBrush(new p.PdfColor(0,0,0)),backgroundBrush:new p.PdfSolidBrush(new p.PdfColor(246,246,246))}},i.prototype.getHeaderThemeStyle=function(){var e=new p.PdfBorders;if(void 0!==this.gridTheme&&void 0!==this.gridTheme.header&&null!==this.gridTheme.header){if(void 0!==this.gridTheme.header.borders&&void 0!==this.gridTheme.header.borders.color){var t=this.hexToRgb(this.gridTheme.header.borders.color);e.all=new p.PdfPen(new p.PdfColor(t.r,t.g,t.b))}var i=void 0!==this.gridTheme.header.fontSize?this.gridTheme.header.fontSize:10.5,r=new p.PdfColor;if(void 0!==this.gridTheme.header.fontColor){var n=this.hexToRgb(this.gridTheme.header.fontColor);r=new p.PdfColor(n.r,n.g,n.b)}return{border:e,font:new p.PdfStandardFont(p.PdfFontFamily.Helvetica,i),brush:new p.PdfSolidBrush(r)}}return e.all=new p.PdfPen(new p.PdfColor(234,234,234)),{border:e,font:new p.PdfStandardFont(p.PdfFontFamily.Helvetica,10.5),brush:new p.PdfSolidBrush(new p.PdfColor(102,102,102))}},i.prototype.processGroupedRecords=function(e,t,i,r,n,o,s,l,a,c){for(var d=o,h=0,u=t;h<u.length;h++){var g=u[h],f=e.rows.addRow(),m={value:g.key,column:r.getColumnByField(g.field),style:void 0},y=g.field+": "+this.exportValueFormatter.formatCellValue(m)+" - "+g.count+(t.count>1?" items":" item");f.cells.getCell(d).value=y,f.cells.getCell(d+1).style.stringFormat=new p.PdfStringFormat(p.PdfTextAlignment.Left),f.style.setBorder(n),f.style.setFont(s),f.style.setTextBrush(l),f.style.setBackgroundBrush(a);var v=void 0,C=new Zt(r);if(void 0!==(v=void 0!==g.items.records?C.generateRows(g.items.records,c.aggregates):C.generateRows(g.items,c.aggregates))&&0===v.length&&(f.cells.getCell(d+1).columnSpan=e.columns.count-(d+1)),void 0!==t.childLevels&&t.childLevels>0){this.processAggregates(v,e,n,s,l,a,!0,f,d),this.processGroupedRecords(e,g.items,i,r,n,d+1,s,l,a,c);v=new $t(r).generateRows(g.items.records,c.aggregates),this.processAggregates(v,e,n,s,l,a,!1)}else{this.processAggregates(v,e,n,s,l,a,!0,f,d),this.processRecord(n,i,r,g.items,e,d+1);v=new $t(r).generateRows(g.items,c.aggregates),this.processAggregates(v,e,n,s,l,a,!1)}}},i.prototype.processGridHeaders=function(e,t,i,r,n,o,s){var l=r.length;if(this.isGrouping&&(l+=e+1),t.columns.add(l),this.isGrouping)for(var a=0;a<e+1;a++)t.columns.getColumn(a).width=20;t.headers.add(i.length);for(a=0;a<i.length;a++){var c=t.headers.getHeader(a);c.style.setBorder(n),c.style.setFont(o),c.style.setTextBrush(s);var p=this.isGrouping?e+1:0;if(0===i[a].cells.length)for(var d=0;d<c.cells.count;d++){(h=c.cells.getCell(d)).value=""}else{for(d=0;d<p;d++){(h=c.cells.getCell(d)).value=""}for(d=0;d<i[a].cells.length;d++){var h;if(null!==(h=c.cells.getCell(p)).value){if(h.value=i[a].cells[d].column.headerText,void 0!==i[a].cells[d].column.headerTextAlign&&(h.style.stringFormat=this.getHorizontalAlignment(i[a].cells[d].column.headerTextAlign)),void 0!==i[a].cells[d].rowSpan){h.rowSpan=i[a].cells[d].rowSpan,h.style.stringFormat=this.getVerticalAlignment("bottom",h.style.stringFormat,i[a].cells[d].column.textAlign);for(var u=1;u<i[a].cells[d].rowSpan;u++)t.headers.getHeader(a+u).cells.getCell(p).value=null}void 0!==i[a].cells[d].colSpan&&(h.columnSpan=i[a].cells[d].colSpan),p+=h.columnSpan}else h.value="",p+=h.columnSpan,d-=1}}}return t.columns.count>=6&&(t.style.allowHorizontalOverflow=!0),t},i.prototype.processExportProperties=function(e,t,i){if(void 0!==e){if(void 0!==e.theme&&(this.gridTheme=e.theme),void 0!==e.pageOrientation||void 0!==e.pageSize){var n=new p.PdfPageSettings;n.orientation="landscape"===e.pageOrientation?p.PdfPageOrientation.Landscape:p.PdfPageOrientation.Portrait,n.size=this.getPageSize(e.pageSize),i.setPageSettings(n)}var o=this.pdfDocument.pageSettings.size;if(void 0!==e.header){var s=e.header,l=new p.PointF(0,s.fromTop),a=new p.SizeF(o.width-80,.75*s.height),c=new p.RectangleF(l,a);this.pdfDocument.template.top=this.drawPageTemplate(new p.PdfPageTemplateElement(c),s)}if(void 0!==e.footer){var d=e.footer;l=new p.PointF(0,o.width-80-.75*d.fromBottom),a=new p.SizeF(o.width-80,.75*d.height),c=new p.RectangleF(l,a);this.pdfDocument.template.bottom=this.drawPageTemplate(new p.PdfPageTemplateElement(c),d)}void 0===e.includeHiddenColumn||this.isGrouping||(this.hideColumnInclude=e.includeHiddenColumn),void 0!==e.dataSource?(e.dataSource instanceof r.DataManager||(t=e.dataSource),this.customDataSource=!0,this.currentViewData=!1):void 0!==e.exportType&&"currentpage"===e.exportType?(t=this.parent.getCurrentViewRecords(),this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1)}else this.currentViewData=!1,this.customDataSource=!1;return{dataSource:t,section:i}},i.prototype.drawPageTemplate=function(e,t){for(var i=0,r=t.contents;i<r.length;i++){var n=r[i];switch(this.processContentValidation(n),n.type){case"text":if(""===n.value||void 0===n.value||null===n.value||"string"!=typeof n.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,n);break;case"pagenumber":this.drawPageNumber(e,n);break;case"image":if(void 0===n.src||null===n.src||""===n.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,n);break;case"line":this.drawLine(e,n);break;default:throw new Error("Please set valid content type...")}}return e},i.prototype.processContentValidation=function(e){if(void 0===e.type||null===e.type)throw new Error("please set valid content type...");if("line"===e.type){if(void 0===e.points||null===e.points)throw new Error("please enter valid points in "+e.type+" content...");if(void 0===e.points.x1||null===e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(void 0===e.points.y1||null===e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(void 0===e.points.x2||null===e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(void 0===e.points.y2||null===e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(void 0===e.position||null===e.position)throw new Error("please enter valid position in "+e.type+" content...");if(void 0===e.position.x||null===e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(void 0===e.position.y||null===e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}},i.prototype.drawText=function(e,t){var i=this.getFont(t),r=this.getBrushFromContent(t),n=null;if(void 0!==t.style.textPenColor){var o=this.hexToRgb(t.style.textPenColor);n=new p.PdfPen(new p.PdfColor(o.r,o.g,o.b))}null==r&&null==n&&(r=new p.PdfSolidBrush(new p.PdfColor(0,0,0)));var s=t.value.toString(),l=.75*t.position.x,a=.75*t.position.y,c=this.setContentFormat(t,void 0);null!==c&&void 0!==c.format&&void 0!==c.size?e.graphics.drawString(s,i,n,r,l,a,c.size.width,c.size.height,c.format):e.graphics.drawString(s,i,n,r,l,a,void 0)},i.prototype.drawPageNumber=function(e,t){var i=this.getFont(t),r=null;if(void 0!==t.style.textBrushColor){var n=this.hexToRgb(t.style.textBrushColor);r=new p.PdfSolidBrush(new p.PdfColor(n.r,n.g,n.b))}else r=new p.PdfSolidBrush(new p.PdfColor(0,0,0));var o=new p.PdfPageNumberField(i,r);o.numberStyle=this.getPageNumberStyle(t.pageNumberType);var s,l;if(void 0!==t.format)if(-1!==t.format.indexOf("$total")&&-1!==t.format.indexOf("$current")){var a=new p.PdfPageCountField(i);l=t.format.indexOf("$total")>t.format.indexOf("$current")?(l=t.format.replace("$current","0")).replace("$total","1"):(l=t.format.replace("$current","1")).replace("$total","0"),s=new p.PdfCompositeField(i,r,l,o,a)}else if(-1!==t.format.indexOf("$current")&&-1===t.format.indexOf("$total"))l=t.format.replace("$current","0"),s=new p.PdfCompositeField(i,r,l,o);else{a=new p.PdfPageCountField(i);l=t.format.replace("$total","0"),s=new p.PdfCompositeField(i,r,l,a)}else l="{0}",s=new p.PdfCompositeField(i,r,l,o);var c=.75*t.position.x,d=.75*t.position.y,h=this.setContentFormat(t,s.stringFormat);null!==h&&void 0!==h.format&&void 0!==h.size&&(s.stringFormat=h.format,s.bounds=new p.RectangleF(c,d,h.size.width,h.size.height)),s.draw(e.graphics,c,d)},i.prototype.drawImage=function(e,t){var i=.75*t.position.x,r=.75*t.position.y,n=void 0!==t.size?.75*t.size.width:void 0,o=void 0!==t.size?.75*t.size.height:void 0,s=new p.PdfBitmap(t.src);void 0!==n?e.graphics.drawImage(s,i,r,n,o):e.graphics.drawImage(s,i,r)},i.prototype.drawLine=function(e,t){var i=.75*t.points.x1,r=.75*t.points.y1,n=.75*t.points.x2,o=.75*t.points.y2,s=this.getPenFromContent(t);void 0!==t.style&&null!==t.style&&(void 0!==t.style.penSize&&null!==t.style.penSize&&"number"==typeof t.style.penSize&&(s.width=.75*t.style.penSize),s.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(s,i,r,n,o)},i.prototype.processAggregates=function(i,r,n,o,s,l,a,c,p){for(var d=0,h=i;d<h.length;d++){for(var u=h[d],g=-1,f=0,m=!0,y=[],v=0;v<r.columns.count;v++){var C=u.cells[f];if(!this.hideColumnInclude){for(;void 0===C.visible;)void 0!==c&&void 0!==c.cells.getCell(v).value?(y.push(""),y.push(c.cells.getCell(v).value),m=!1,v+=1):y.push(""),v+=1,f+=1,C=u.cells[f];for(;void 0!==C.visible&&!C.visible;)f+=1,C=u.cells[f]}if(C.isDataCell){var w={};if(void 0!==C.column.footerTemplate||void 0!==C.column.groupCaptionTemplate||void 0!==C.column.groupFooterTemplate){w=(S=this.getTemplateFunction(w,v,g,C.column)).templateFunction,g=S.leastCaptionSummaryIndex;var b=w[t.getEnumValue(e.CellType,C.cellType)](u.data[C.column.field?C.column.field:C.column.columnName]);y.push(b[0].wholeText),m=!1}else{var S;void 0!==(S=this.getSummaryWithoutTemplate(u.data[C.column.field]))&&y.push(S)}}else y.push("");m&&""!==y[v]&&void 0!==y[v]&&null!==y[v]&&(m=!1),f+=1}if(!m)if(a)for(v=0;v<r.columns.count;v++)c.cells.getCell(v).value=y[v].toString(),v===p+1&&-1!==g?c.cells.getCell(v).columnSpan=g-(p+1):v===p+1&&-1===g&&(c.cells.getCell(v).columnSpan=r.columns.count-(p+1));else{var x=r.rows.addRow();x.style.setBorder(n),x.style.setFont(o),x.style.setTextBrush(s),x.style.setBackgroundBrush(l);for(var v=0;v<r.columns.count;v++)x.cells.getCell(v).value=y[v].toString()}}},i.prototype.getTemplateFunction=function(i,r,n,o){return void 0!==o.footerTemplate?i[t.getEnumValue(e.CellType,e.CellType.Summary)]=t.compile(o.footerTemplate):void 0!==o.groupCaptionTemplate?(-1===n&&(n=r),i[t.getEnumValue(e.CellType,e.CellType.CaptionSummary)]=t.compile(o.groupCaptionTemplate)):i[t.getEnumValue(e.CellType,e.CellType.GroupSummary)]=t.compile(o.groupFooterTemplate),{templateFunction:i,leastCaptionSummaryIndex:n}},i.prototype.getSummaryWithoutTemplate=function(e){return void 0!==e.sum?e.sum:void 0!==e.average?e.average:void 0!==e.max?e.max:void 0!==e.min?e.min:void 0!==e.count?e.count:void 0!==e.truecount?e.truecount:void 0!==e.falsecount?e.falsecount:void 0!==e.custom?e.custom:void 0},i.prototype.setColumnProperties=function(e,t){for(var i=this.isGrouping?t.columns.count-e.length:0,r=0;r<e.length;r++)void 0!==e[r].textAlign&&(t.columns.getColumn(r+i).format=this.getHorizontalAlignment(e[r].textAlign)),t.style.allowHorizontalOverflow&&void 0!==e[r].width&&(t.columns.getColumn(r+i).width="number"==typeof e[r].width?.75*e[r].width:.75*this.helper.getConvertedWidth(e[r].width))},i.prototype.setRecordThemeStyle=function(e,t){if(void 0!==this.gridTheme&&void 0!==this.gridTheme.record&&null!==this.gridTheme.record){var i=new p.PdfColor;if(void 0!==this.gridTheme.record.fontColor){var r=this.hexToRgb(this.gridTheme.record.fontColor);i=new p.PdfColor(r.r,r.g,r.b)}e.style.setTextBrush(new p.PdfSolidBrush(i))}else e.style.setTextBrush(new p.PdfSolidBrush(new p.PdfColor(0,0,0)));return e.style.setBorder(t),e},i.prototype.processRecord=function(e,t,i,r,n,o){for(var s=this.isGrouping?o:0,l=0,a=r;l<a.length;l++)for(var c=a[l],p=this.setRecordThemeStyle(n.rows.addRow(),e),d=0;d<t.length;d++){var h={data:c,value:c[t[d].field],column:t[d],style:void 0,colSpan:1};i.trigger(Lt,h);var u=p.cells.getCell(d+s);if(u.value=this.exportValueFormatter.formatCellValue(h),void 0!==h.style&&this.processCellStyle(u,h),h.colSpan>1){d+s+1+h.colSpan>p.cells.count&&(h.colSpan=p.cells.count-(d+s+1)),u.columnSpan=h.colSpan;for(var g=1;g<u.columnSpan;g++){p.cells.getCell(d+s+g).value=""}d+=h.colSpan-1}}},i.prototype.processCellStyle=function(e,t){if(void 0!==t.style.backgroundColor){var i=this.hexToRgb(t.style.backgroundColor);e.style.backgroundBrush=new p.PdfSolidBrush(new p.PdfColor(i.r,i.g,i.b))}if(void 0!==t.style.textAlignment&&(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),void 0!==t.style.verticalAlignment&&(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),void 0!==t.style.textBrushColor){var r=this.hexToRgb(t.style.textBrushColor);e.style.textBrush=new p.PdfSolidBrush(new p.PdfColor(r.r,r.g,r.b))}if(void 0!==t.style.textPenColor){var n=this.hexToRgb(t.style.textPenColor);e.style.textPen=new p.PdfPen(new p.PdfColor(n.r,n.g,n.b))}if(void 0===t.style.fontFamily&&void 0===t.style.fontSize&&void 0===t.style.bold&&void 0===t.style.italic&&void 0===t.style.underline&&void 0===t.style.strikeout||(e.style.font=this.getFont(t)),void 0!==t.style.border){var o=new p.PdfBorders,s=t.style.border.width,l=void 0!==s&&"number"==typeof s?.75*s:void 0,a=new p.PdfColor(196,196,196);if(void 0!==t.style.border.color){var c=this.hexToRgb(t.style.border.color);a=new p.PdfColor(c.r,c.g,c.b)}var d=new p.PdfPen(a,l);void 0!==t.style.border.dashStyle&&(d.dashStyle=this.getDashStyle(t.style.border.dashStyle)),o.all=d,e.style.borders=o}},i.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new p.PdfStringFormat),e){case"right":t.alignment=p.PdfTextAlignment.Right;break;case"center":t.alignment=p.PdfTextAlignment.Center;break;case"justify":t.alignment=p.PdfTextAlignment.Justify;break;case"left":t.alignment=p.PdfTextAlignment.Left}return t},i.prototype.getVerticalAlignment=function(e,t,i){switch(void 0===t&&(t=new p.PdfStringFormat,t=this.getHorizontalAlignment(i,t)),e){case"bottom":t.lineAlignment=p.PdfVerticalAlignment.Bottom;break;case"middle":t.lineAlignment=p.PdfVerticalAlignment.Middle;break;case"top":t.lineAlignment=p.PdfVerticalAlignment.Top}return t},i.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},i.prototype.getFont=function(e){var t=void 0!==e.style.fontSize?.75*e.style.fontSize:9.75,i=void 0!==e.style.fontFamily?this.getFontFamily(e.style.fontFamily):p.PdfFontFamily.Helvetica,r=p.PdfFontStyle.Regular;return void 0!==e.style.bold&&e.style.bold&&(r|=p.PdfFontStyle.Bold),void 0!==e.style.italic&&e.style.italic&&(r|=p.PdfFontStyle.Italic),void 0!==e.style.underline&&e.style.underline&&(r|=p.PdfFontStyle.Underline),void 0!==e.style.strikeout&&e.style.strikeout&&(r|=p.PdfFontStyle.Strikeout),new p.PdfStandardFont(i,t,r)},i.prototype.getPageNumberStyle=function(e){switch(e){case"lowerlatin":return 2;case"lowerroman":return 3;case"upperlatin":return 4;case"upperroman":return 5;default:return 1}},i.prototype.setContentFormat=function(e,t){if(void 0!==e.size){var i=.75*e.size.width,r=.75*e.size.height;if(t=new p.PdfStringFormat(p.PdfTextAlignment.Left,p.PdfVerticalAlignment.Middle),void 0!==e.style.hAlign)switch(e.style.hAlign){case"right":t.alignment=p.PdfTextAlignment.Right;break;case"center":t.alignment=p.PdfTextAlignment.Center;break;case"justify":t.alignment=p.PdfTextAlignment.Justify;break;default:t.alignment=p.PdfTextAlignment.Left}return void 0!==e.style.vAlign&&(t=this.getVerticalAlignment(e.style.vAlign,t)),{format:t,size:new p.SizeF(i,r)}}return null},i.prototype.getPageSize=function(e){switch(e){case"letter":return new p.SizeF(612,792);case"note":return new p.SizeF(540,720);case"legal":return new p.SizeF(612,1008);case"a0":return new p.SizeF(2380,3368);case"a1":return new p.SizeF(1684,2380);case"a2":return new p.SizeF(1190,1684);case"a3":return new p.SizeF(842,1190);case"a5":return new p.SizeF(421,595);case"a6":return new p.SizeF(297,421);case"a7":return new p.SizeF(210,297);case"a8":return new p.SizeF(148,210);case"a9":return new p.SizeF(105,148);case"b0":return new p.SizeF(2836,4008);case"b1":return new p.SizeF(2004,2836);case"b2":return new p.SizeF(1418,2004);case"b3":return new p.SizeF(1002,1418);case"b4":return new p.SizeF(709,1002);case"b5":return new p.SizeF(501,709);case"archa":return new p.SizeF(648,864);case"archb":return new p.SizeF(864,1296);case"archc":return new p.SizeF(1296,1728);case"archd":return new p.SizeF(1728,2592);case"arche":return new p.SizeF(2592,3456);case"flsa":return new p.SizeF(612,936);case"halfletter":return new p.SizeF(396,612);case"letter11x17":return new p.SizeF(792,1224);case"ledger":return new p.SizeF(1224,792);default:return new p.SizeF(595,842)}},i.prototype.getDashStyle=function(e){switch(e){case"dash":return 1;case"dot":return 2;case"dashdot":return 3;case"dashdotdot":return 4;default:return 0}},i.prototype.getPenFromContent=function(e){var t=new p.PdfPen(new p.PdfColor(0,0,0));if(void 0!==e.style&&null!==e.style&&void 0!==e.style.penColor){var i=this.hexToRgb(e.style.penColor);t=new p.PdfPen(new p.PdfColor(i.r,i.g,i.b))}return t},i.prototype.getBrushFromContent=function(e){var t=null;if(void 0!==e.style.textBrushColor){var i=this.hexToRgb(e.style.textBrushColor);t=new p.PdfSolidBrush(new p.PdfColor(i.r,i.g,i.b))}return t},i.prototype.hexToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},i.prototype.destroy=function(){},i}(),gn=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fn=function(e){function i(i,r){var n=e.call(this,i,r)||this;return n.buttonElement=t.createElement("button",{}),n.unbounDiv=t.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),n.element=t.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{role:"gridcell",tabindex:"-1"}}),n}return gn(i,e),i.prototype.render=function(e,i,r){var n=this.element.cloneNode();if(n.appendChild(this.unbounDiv.cloneNode()),n.setAttribute("aria-label","is Command column column header "+e.column.headerText),e.column.commandsTemplate)D(n.firstElementChild,e.column.getColumnTemplate()(i));else for(var o=0,s=e.commands;o<s.length;o++){var l=s[o];n=this.renderButton(n,l,r.index)}return this.setAttributes(n,e,r),this.parent.isEdit?(t.addClass(n.querySelectorAll(".e-edit-delete"),"e-hide"),t.removeClass(n.querySelectorAll(".e-save-cancel"),"e-hide")):(t.addClass(n.querySelectorAll(".e-save-cancel"),"e-hide"),t.removeClass(n.querySelectorAll(".e-edit-delete"),"e-hide")),n},i.prototype.renderButton=function(e,i,r){var o=this.buttonElement.cloneNode();switch(t.attributes(o,{id:this.parent.element.id+(i.type||"")+"_"+r,type:"button"}),o.onclick=i.buttonOption.click,e.firstElementChild.appendChild(new n.Button(i.buttonOption,o).element),i.type){case"edit":case"delete":t.addClass([o],["e-edit-delete","e-"+i.type+"button"]);break;case"cancel":case"save":t.addClass([o],["e-save-cancel","e-"+i.type+"button"])}return e},i}(ni),mn=function(){function i(e,t){this.parent=e,this.locator=t,this.addEventListener()}return i.prototype.initiateRender=function(){this.locator.getService("cellRendererFactory").addCellRenderer(e.CellType.CommandColumn,new fn(this.parent,this.locator))},i.prototype.commandClickHandler=function(e){var i=this.parent,r=this.parent.element.id,n=t.closest(e.target,"button");if(n&&i.editModule)switch(n.id.split("_")[0]){case r+"edit":this.parent.editModule.endEdit(),i.editModule.startEdit(t.closest(n,"tr"));break;case r+"cancel":i.editModule.closeEdit();break;case r+"save":this.parent.editModule.endEdit();break;case r+"delete":this.parent.editModule.endEdit(),i.editModule.deleteRow(t.closest(n,"tr"))}},i.prototype.getModuleName=function(){return"commandColumn"},i.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},i.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(tt,this.commandClickHandler),this.parent.off(Le,this.initiateRender),this.parent.off(et,this.keyPressHandler))},i.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(tt,this.commandClickHandler,this),this.parent.on(Le,this.initiateRender,this),this.parent.on(et,this.keyPressHandler,this))},i.prototype.keyPressHandler=function(e){"enter"===e.action&&t.closest(e.target,"button")&&(this.commandClickHandler(e),e.preventDefault())},i}(),yn={header:".e-gridheader",content:".e-gridcontent",edit:".e-inline-edit",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"},vn=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(Me,this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(Me,this.render)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=t.createElement("ul",{id:this.gridID+"_cmenu"}),this.parent.element.appendChild(this.element);var e="#"+this.gridID;this.contextMenu=new a.ContextMenu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)},e.prototype.getMenuItems=function(){for(var e=[],t=[],i=0,r=this.parent.contextMenuItems;i<r.length;i++){var n=r[i];"string"==typeof n&&-1!==this.getDefaultItems().indexOf(n)?-1!==n.toLocaleLowerCase().indexOf("export")?t.push(this.buildDefaultItems(n)):e.push(this.buildDefaultItems(n)):"string"!=typeof n&&e.push(n)}if(t.length>0){var o=this.buildDefaultItems("export");o.items=t,e.push(o)}return e},e.prototype.getLastPage=function(){var e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.contextMenuItemClick=function(e){switch(this.getKeyFromId(e.item.id)){case"autoFitAll":this.parent.autoFitColumns([]);break;case"autoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"group":this.parent.groupColumn(this.targetColumn.field);break;case"ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"edit":"batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute("aria-colindex"),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(this.cell.getAttribute("aria-colindex"),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit());break;case"delete":"batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),this.parent.editModule.deleteRow(this.parent.getRowByIndex(this.parent.selectedRowIndex));break;case"save":this.parent.editModule.endEdit();break;case"cancel":this.parent.editModule.closeEdit();break;case"copy":this.parent.copy();break;case"pdfExport":this.parent.pdfExport();break;case"excelExport":this.parent.excelExport();break;case"csvExport":this.parent.csvExport();break;case"sortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"ascending");break;case"sortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"descending");break;case"firstPage":this.parent.goToPage(1);break;case"prevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"lastPage":this.parent.goToPage(this.getLastPage());break;case"nextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}this.parent.trigger(Ft,e)},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof a.ContextMenu&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.contextMenuBeforeOpen=function(e){var i=t.closest(e.event.target,".e-grid");if(e.event&&i&&i!==this.parent.element)e.cancel=!0;else if(e.event&&(t.closest(e.event.target,"."+yn.groupHeader)||t.closest(e.event.target,"."+yn.touchPop)))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),this.selectRow(e.event);for(var r=0,n=e.items;r<n.length;r++){var o=n[r],s=this.getKeyFromId(o.id),l=this.defaultItems[s];if(-1!==this.getDefaultItems().indexOf(s))if(this.ensureDisabledStatus(s)&&this.disableItems.push(o.text),e.event&&this.ensureTarget(e.event.target,yn.edit))"save"!==s&&"cancel"!==s&&this.hiddenItems.push(o.text);else{if("batch"===this.parent.editSettings.mode&&(t.closest(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges().changedRecords.length||this.parent.editModule.getBatchChanges().addedRecords.length||this.parent.editModule.getBatchChanges().deletedRecords.length)&&("save"===s||"cancel"===s))continue;t.isNullOrUndefined(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,l.target)&&this.hiddenItems.push(o.text)}else o.target&&e.event&&!this.ensureTarget(e.event.target,o.target)&&this.hiddenItems.push(o.text)}this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),this.eventArgs=e.event,this.parent.trigger(Bt,e),this.hiddenItems.length===e.items.length&&(this.updateItemStatus(),e.cancel=!0)}},e.prototype.ensureTarget=function(e,i){var r=e;return!(!(r=i===yn.header||i===yn.content?b(t.closest(e,".e-table"),i.substr(1,i.length)):t.closest(e,i))||b(r,"e-grid")!==this.parent.element)},e.prototype.ensureDisabledStatus=function(e){var t=this,i=!1;switch(e){case"autoFitAll":case"autoFit":i=!this.parent.ensureModuleInjected(Dr);break;case"group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Pr)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0)&&(i=!0);break;case"ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(Pr)||this.parent.ensureModuleInjected(Pr)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(i=!0);break;case"edit":case"delete":case"save":case"cancel":this.parent.editModule||(i=!0);break;case"copy":0===this.parent.getSelectedRowIndexes().length&&(i=!0);break;case"export":this.parent.allowExcelExport&&this.parent.excelExport&&(this.parent.ensureModuleInjected(un)||this.parent.ensureModuleInjected(hn))||(i=!0);break;case"pdfExport":this.parent.allowPdfExport&&this.parent.ensureModuleInjected(un)||(i=!0);break;case"excelExport":case"csvExport":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(hn)||(i=!0);break;case"sortAscending":case"sortDescending":this.parent.allowSorting&&this.parent.ensureModuleInjected(sr)?this.parent.ensureModuleInjected(sr)&&this.parent.sortSettings.columns.length>0&&this.targetColumn&&this.parent.sortSettings.columns.forEach(function(r){r.field===t.targetColumn.field&&r.direction===e.replace("sort","").toLocaleLowerCase()&&(i=!0)}):i=!0;break;case"firstPage":case"prevPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(gr)||this.parent.ensureModuleInjected(gr)&&1===this.parent.pageSettings.currentPage)&&(i=!0);break;case"lastPage":case"nextPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(gr)||this.parent.ensureModuleInjected(gr)&&this.parent.pageSettings.currentPage===this.getLastPage())&&(i=!0)}return i},e.prototype.getContextMenu=function(){return this.element},e.prototype.destroy=function(){this.contextMenu.destroy(),t.remove(this.element),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.gridID+"_cmenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.gridID+"_cmenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"autoFitAll":case"autoFit":t={target:yn.header};break;case"group":t={target:yn.header,iconCss:yn.group};break;case"ungroup":t={target:yn.header,iconCss:yn.ungroup};break;case"edit":t={target:yn.content,iconCss:yn.editIcon};break;case"delete":t={target:yn.content,iconCss:yn.delete};break;case"save":t={target:yn.edit,iconCss:yn.save};break;case"cancel":t={target:yn.edit,iconCss:yn.cancel};break;case"copy":t={target:yn.content,iconCss:yn.copy};break;case"export":t={target:yn.content};break;case"pdfExport":t={target:yn.content,iconCss:yn.pdf};break;case"excelExport":t={target:yn.content,iconCss:yn.excel};break;case"csvExport":t={target:yn.content,iconCss:yn.csv};break;case"sortAscending":t={target:yn.header,iconCss:yn.ascending};break;case"sortDescending":t={target:yn.header,iconCss:yn.descending};break;case"firstPage":t={target:yn.pager,iconCss:yn.fPage};break;case"prevPage":t={target:yn.pager,iconCss:yn.pPage};break;case"lastPage":t={target:yn.pager,iconCss:yn.lPage};break;case"nextPage":t={target:yn.pager,iconCss:yn.nPage}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["autoFitAll","autoFit","group","ungroup","edit","delete","save","cancel","copy","export","pdfExport","excelExport","csvExport","sortAscending","sortDescending","firstPage","prevPage","lastPage","nextPage"]},e.prototype.setLocaleKey=function(){return{autoFitAll:"autoFitAll",autoFit:"autoFit",copy:"Copy",group:"Group",ungroup:"Ungroup",edit:"EditRecord",delete:"DeleteRecord",save:"Save",cancel:"CancelButton",pdfExport:"Pdfexport",excelExport:"Excelexport",csvExport:"Csvexport",export:"Export",sortAscending:"SortAscending",sortDescending:"SortDescending",firstPage:"FirstPage",lastPage:"LastPage",prevPage:"PreviousPage",nextPage:"NextPage"}},e.prototype.getColumn=function(e){var i=t.closest(e.target,"th.e-headercell");if(i){var r=i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(r)}return null},e.prototype.selectRow=function(e){this.cell=e.target,this.row=t.closest(e.target,"tr.e-row"),this.row&&this.parent.selectRow(this.parent.getDataRows().indexOf(this.row))},e}(),Cn=function(){function e(e){this.isFrzLoad=1,this.parent=e,this.rowModelGenerator=new Xt(this.parent)}return e.prototype.generateRows=function(e,t){var i=this.rowModelGenerator.generateRows(e,t);if(this.parent.frozenColumns)for(var r=0,n=i.length;r<n;r++)this.isFrzLoad%2==0?i[r].cells=i[r].cells.slice(this.parent.frozenColumns,i[r].cells.length):i[r].cells=i[r].cells.slice(0,this.parent.frozenColumns);return this.isFrzLoad++,i},e}(),wn=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bn=function(e){function i(t,i){return e.call(this,t,i)||this}return wn(i,e),i.prototype.renderPanel=function(){if(e.prototype.renderPanel.call(this),this.parent.frozenColumns){var i=t.createElement("div",{className:"e-frozencontent"}),r=t.createElement("div",{className:"e-movablecontent"});this.getPanel().firstChild.appendChild(i),this.getPanel().firstChild.appendChild(r),this.setFrozenContent(i),this.setMovableContent(r)}},i.prototype.renderEmpty=function(t){e.prototype.renderEmpty.call(this,t),this.parent.frozenColumns?(this.getMovableContent().querySelector("tbody").innerHTML="<tr><td></td></tr>",this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").innerHTML="",this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").innerHTML="")):this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector("tbody").innerHTML="")},i.prototype.setFrozenContent=function(e){this.frozenContent=e},i.prototype.setMovableContent=function(e){this.movableContent=e},i.prototype.getFrozenContent=function(){return this.frozenContent},i.prototype.getMovableContent=function(){return this.movableContent},i.prototype.getModelGenerator=function(){return new Cn(this.parent)},i.prototype.renderTable=function(){if(e.prototype.renderTable.call(this),this.parent.frozenColumns){this.getFrozenContent().appendChild(this.getTable());var t=this.getTable().cloneNode(!0);this.getMovableContent().appendChild(t)}this.parent.frozenRows&&this.parent.getHeaderContent().firstChild.classList.add("e-frozenhdrcont")},i}(ii),Sn=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.addEventListener(),r}return wn(i,e),i.prototype.addEventListener=function(){this.parent.on(Nt,this.refreshFreeze,this)},i.prototype.renderTable=function(){e.prototype.renderTable.call(this),this.rfshMovable()},i.prototype.renderPanel=function(){e.prototype.renderPanel.call(this);var i=t.createElement("div",{className:"e-frozenheader"}),r=t.createElement("div",{className:"e-movableheader"});this.getPanel().firstChild.appendChild(i),this.getPanel().firstChild.appendChild(r),this.setFrozenHeader(i),this.setMovableHeader(r)},i.prototype.refreshUI=function(){this.getMovableHeader().innerHTML="",e.prototype.refreshUI.call(this),this.rfshMovable();var i=this.getMovableHeader().querySelector("table");t.remove(this.getMovableHeader().querySelector("colgroup")),i.insertBefore(this.renderMovable(this.getFrozenHeader().querySelector("colgroup")),i.querySelector("thead"))},i.prototype.rfshMovable=function(){this.getFrozenHeader().appendChild(this.getTable()),this.getMovableHeader().appendChild(this.createTable()),this.refreshFreeze({case:"filter"}),this.parent.notify(At,{})},i.prototype.refreshFreeze=function(e){if("filter"===e.case){var t=this.getTable().querySelector(".e-filterbar");this.parent.allowFiltering&&t&&this.getMovableHeader().querySelector("thead")&&this.getMovableHeader().querySelector("thead").appendChild(this.renderMovable(t))}else if("textwrap"===e.case){var i=void 0,r=void 0,n=this.parent.textWrapSettings.wrapMode;("header"!==n||e.isModeChg)&&(i=this.parent.getContent().querySelector(".e-frozencontent").querySelectorAll("tr"),r=this.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(i,r,e.isModeChg,!0)),this.parent.frozenRows&&("content"===n&&this.parent.allowTextWrap?this.parent.getHeaderContent().firstChild.classList.add("e-wrap"):this.parent.getHeaderContent().firstChild.classList.remove("e-wrap"),"both"===n||e.isModeChg?(i=this.getFrozenHeader().querySelectorAll("tr"),r=this.getMovableHeader().querySelectorAll("tr")):(i=this.getFrozenHeader().querySelector("content"===n?"tbody":"thead").querySelectorAll("tr"),r=this.getMovableHeader().querySelector("content"===n?"tbody":"thead").querySelectorAll("tr")),this.setWrapHeight(i,r,e.isModeChg))}},i.prototype.setWrapHeight=function(e,t,i,r){for(var n,o,s=this.parent.allowTextWrap,l=this.parent.textWrapSettings.wrapMode,a=this.parent.getHeaderContent().querySelector("thead"),c=this.parent.getHeaderContent().querySelector("tbody"),p=0,d=e.length;p<d;p++)i&&("header"===l&&r||"content"===l&&a.contains(e[p])||"header"===l&&c.contains(e[p]))&&(e[p].style.height=null,t[p].style.height=null),n=e[p].offsetHeight,o=t[p].offsetHeight,s&&n<o||!s&&n>o?e[p].style.height=o+"px":(s&&n>o||!s&&n<o)&&(t[p].style.height=n+"px")},i.prototype.setFrozenHeader=function(e){this.frozenHeader=e},i.prototype.setMovableHeader=function(e){this.movableHeader=e},i.prototype.getFrozenHeader=function(){return this.frozenHeader},i.prototype.getMovableHeader=function(){return this.movableHeader},i.prototype.renderMovable=function(e){for(var t=e.cloneNode(!0),i=0;i<this.parent.frozenColumns;i++)t.removeChild(t.children[0]);i=this.parent.frozenColumns;for(var r=e.childElementCount;i<r;i++)e.removeChild(e.children[e.childElementCount-1]);return t},i}(ri),xn=function(){function t(e,t){this.parent=e,this.locator=t,this.addEventListener()}return t.prototype.getModuleName=function(){return"freeze"},t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(Me,this.instantiateRenderer,this)},t.prototype.instantiateRenderer=function(){var t=this.locator.getService("rendererFactory");this.parent.frozenColumns&&(t.addRenderer(e.RenderType.Header,new Sn(this.parent,this.locator)),t.addRenderer(e.RenderType.Content,new bn(this.parent,this.locator))),this.parent.frozenRows&&!this.parent.frozenColumns&&t.addRenderer(e.RenderType.Content,new bn(this.parent,this.locator))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(Me,this.instantiateRenderer)},t.prototype.destroy=function(){this.removeEventListener()},t}(),En=function(){function e(e,t){this.defaultItems={},this.localeText=this.setLocaleKey(),this.disableItems=[],this.hiddenItems=[],this.isOpen=!1,this.GROUP="e-icon-group",this.UNGROUP="e-icon-ungroup",this.ASCENDING="e-icon-ascending",this.DESCENDING="e-icon-descending",this.ROOT="e-columnmenu",this.FILTER="e-icon-filter",this.POP="e-filter-popup",this.WRAP="e-col-menu",this.CHOOSER="_chooser_",this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.wireEvents=function(){var e=this;this.getColumnMenuHandlers().forEach(function(i){t.EventHandler.add(i,"mousedown",e.columnMenuHandlerDown,e)})},e.prototype.unwireEvents=function(){var e=this;this.getColumnMenuHandlers().forEach(function(i){t.EventHandler.remove(i,"mousedown",e.columnMenuHandlerDown)})},e.prototype.destroy=function(){this.columnMenu.destroy(),this.removeEventListener(),this.unwireFilterEvents(),this.unwireEvents(),t.remove(this.element)},e.prototype.columnMenuHandlerClick=function(e){e.target.classList.contains("e-columnmenu")&&(this.isOpen?this.isOpen&&this.headerCell!==this.getHeaderCell(e)?(this.columnMenu.close(),this.openColumnMenu(e)):this.columnMenu.close():this.openColumnMenu(e))},e.prototype.openColumnMenu=function(e){var r={top:0,left:0};this.element.style.cssText="display:block;visibility:hidden";var n=this.element.getBoundingClientRect();this.element.style.cssText="display:none;visibility:visible",this.headerCell=this.getHeaderCell(e),t.Browser.isDevice?(r.top=window.innerHeight/2-n.height/2,r.left=window.innerWidth/2-n.width/2):this.parent.enableRtl?r=i.calculatePosition(this.headerCell,"left","bottom"):(r=i.calculatePosition(this.headerCell,"right","bottom")).left-=n.width,this.columnMenu.open(r.top,r.left),e.preventDefault()},e.prototype.columnMenuHandlerDown=function(e){this.isOpen=!("none"===this.element.style.display||""===this.element.style.display)},e.prototype.getColumnMenuHandlers=function(){return[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+this.ROOT))},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ze,this.wireEvents,this),this.parent.on(Le,this.render,this),this.isFilterItemAdded()&&this.parent.on(zt,this.filterPosition,this),this.parent.on(tt,this.columnMenuHandlerClick,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ze,this.unwireEvents),this.parent.off(Le,this.render),this.isFilterItemAdded()&&this.parent.off(zt,this.filterPosition),this.parent.off(tt,this.columnMenuHandlerClick))},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=t.createElement("ul",{id:this.gridID+"_columnmenu",className:"e-colmenu"}),this.parent.element.appendChild(this.element),this.columnMenu=new a.ContextMenu({cssClass:"e-grid-menu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getItems(),select:this.columnMenuItemClick.bind(this),beforeOpen:this.columnMenuBeforeOpen.bind(this),onClose:this.columnMenuOnClose.bind(this),beforeItemRender:this.beforeMenuItemRender.bind(this),beforeClose:this.columnMenuBeforeClose.bind(this)}),this.columnMenu.appendTo(this.element),this.wireFilterEvents()},e.prototype.wireFilterEvents=function(){!t.Browser.isDevice&&this.isFilterItemAdded()&&t.EventHandler.add(this.element,"mouseover",this.appendFilter,this)},e.prototype.unwireFilterEvents=function(){!t.Browser.isDevice&&this.isFilterItemAdded()&&t.EventHandler.remove(this.element,"mouseover",this.appendFilter)},e.prototype.beforeMenuItemRender=function(e){if(this.isChooserItem(e.item)){var i=this.getKeyFromId(e.item.id,this.CHOOSER),r=this.parent.getColumnByField(i),o=n.createCheckBox(!1,{label:e.item.text,checked:r.visible});this.parent.enableRtl&&o.classList.add("e-rtl"),e.element.innerHTML="",e.element.appendChild(o)}else e.item.id&&"filter"===this.getKeyFromId(e.item.id)&&(e.element.appendChild(t.createElement("span",{className:"e-icons e-caret"})),e.element.className+="e-filter-item e-menu-caret-icon")},e.prototype.columnMenuBeforeClose=function(e){!t.isNullOrUndefined(e.parentItem)&&"columnChooser"===this.getKeyFromId(e.parentItem.id)&&t.closest(e.event.target,".e-menu-parent")?e.cancel=!0:e.event&&(t.closest(e.event.target,"."+this.POP)||b(e.event.target,"e-popup"))&&(e.cancel=!0)},e.prototype.isChooserItem=function(e){return e.id&&e.id.indexOf("_colmenu_")>=0&&-1===this.getKeyFromId(e.id,this.CHOOSER).indexOf("_colmenu_")},e.prototype.columnMenuBeforeOpen=function(e){e.column=this.targetColumn=this.getColumn(),this.parent.trigger(qt,e);for(var t=0,i=e.items;t<i.length;t++){var r=i[t],n=this.getKeyFromId(r.id),o=this.defaultItems[n];-1!==this.getDefaultItems().indexOf(n)&&(this.ensureDisabledStatus(n)&&!o.hide?this.disableItems.push(r.text):r.hide&&this.hiddenItems.push(r.text))}this.columnMenu.enableItems(this.disableItems,!1),this.columnMenu.hideItems(this.hiddenItems)},e.prototype.ensureDisabledStatus=function(e){var t=this,i=!1;switch(e){case"group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Pr)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0)&&(i=!0);break;case"autoFitAll":case"autoFit":i=!this.parent.ensureModuleInjected(Dr);break;case"ungroup":(!this.parent.ensureModuleInjected(Pr)||this.parent.ensureModuleInjected(Pr)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(i=!0);break;case"sortDescending":case"sortAscending":this.parent.allowSorting&&this.parent.ensureModuleInjected(sr)&&this.parent.sortSettings.columns.length>0&&this.targetColumn?this.parent.sortSettings.columns.forEach(function(r){r.field===t.targetColumn.field&&r.direction===e.replace("sort","").toLocaleLowerCase()&&(i=!0)}):this.parent.allowSorting&&this.parent.ensureModuleInjected(sr)||(i=!0);break;case"filter":i=!(this.parent.allowFiltering&&"filterbar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(Rr))}return i},e.prototype.columnMenuItemClick=function(e){switch(this.isChooserItem(e.item)?"columnChooser":this.getKeyFromId(e.item.id)){case"autoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"autoFitAll":this.parent.autoFitColumns([]);break;case"ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"group":this.parent.groupColumn(this.targetColumn.field);break;case"sortAscending":this.parent.sortColumn(this.targetColumn.field,"ascending");break;case"sortDescending":this.parent.sortColumn(this.targetColumn.field,"descending");break;case"columnChooser":var t=this.getKeyFromId(e.item.id,this.CHOOSER),i=e.element.querySelector(".e-checkbox-wrapper .e-frame");i&&i.classList.contains("e-check")?(i.classList.remove("e-check"),this.parent.hideColumn(t,"field")):i&&(this.parent.showColumn(t,"field"),i.classList.add("e-check"));break;case"filter":this.getFilter(e.element,e.item.id)}this.parent.trigger(Ht,e)},e.prototype.columnMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof a.ContextMenu&&(this.columnMenu.enableItems(this.disableItems),this.disableItems=[],this.columnMenu.showItems(this.hiddenItems),this.hiddenItems=[],this.isFilterPopupOpen()&&this.getFilter(e.element,e.element.id,!0))},e.prototype.getDefaultItems=function(){return["autoFitAll","autoFit","sortAscending","sortDescending","group","ungroup","columnChooser","filter"]},e.prototype.getItems=function(){for(var e=[],t=0,i=this.parent.columnMenuItems?this.parent.columnMenuItems:this.getDefault();t<i.length;t++){var r=i[t];if("string"==typeof r)if("columnChooser"===r){var n=this.getDefaultItem(r);n.items=this.createChooserItems(),e.push(n)}else e.push(this.getDefaultItem(r));else e.push(r)}return e},e.prototype.getDefaultItem=function(e){var t={};switch(e){case"sortAscending":t={iconCss:this.ASCENDING};break;case"sortDescending":t={iconCss:this.DESCENDING};break;case"group":t={iconCss:this.GROUP};break;case"ungroup":t={iconCss:this.UNGROUP};break;case"filter":t={iconCss:this.FILTER}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.generateID=function(e,t){return this.gridID+"_colmenu_"+(t?t+e:e)},e.prototype.getKeyFromId=function(e,t){return e.replace(this.gridID+"_colmenu_"+(t||""),"")},e.prototype.getColumnMenu=function(){return this.element},e.prototype.getModuleName=function(){return"columnMenu"},e.prototype.setLocaleKey=function(){return{autoFitAll:"autoFitAll",autoFit:"autoFit",group:"Group",ungroup:"Ungroup",sortAscending:"SortAscending",sortDescending:"SortDescending",columnChooser:"Columnchooser",filter:"FilterMenu"}},e.prototype.getHeaderCell=function(e){return t.closest(e.target,"th.e-headercell")},e.prototype.getColumn=function(){if(this.headerCell){var e=this.headerCell.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(e)}return null},e.prototype.createChooserItems=function(){for(var e=[],t=0,i=this.parent.getColumns();t<i.length;t++){var r=i[t];r.showInColumnChooser&&e.push({id:this.generateID(r.field,this.CHOOSER),text:r.headerText?r.headerText:r.field})}return e},e.prototype.appendFilter=function(e){if(this.defaultItems.filter){var i=this.defaultItems.filter.id;t.closest(e.target,"#"+i)&&!this.isFilterPopupOpen()?this.getFilter(e.target,i):!t.closest(e.target,"#"+i)&&this.isFilterPopupOpen()&&this.getFilter(e.target,i,!0)}},e.prototype.getFilter=function(e,t,i){var r=this.getFilterPop();r?r.style.display=i?"none":"block":this.parent.notify(jt,{col:this.targetColumn,target:e,isClose:i,id:t})},e.prototype.setPosition=function(e,t){var i=this.parent.element.getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.left-i.left,o=r.top-i.top;i.height<o?o=o-t.offsetHeight+r.height:i.height<o+t.offsetHeight&&(o=i.height-t.offsetHeight),window.innerHeight<t.offsetHeight+o+i.top&&(o=window.innerHeight-t.offsetHeight-i.top),n+=this.parent.enableRtl?-t.offsetWidth:r.width,i.width<=n+t.offsetWidth?n-=r.width+t.offsetWidth:n<0&&(n+=t.offsetWidth+r.width),t.style.top=o+"px",t.style.left=n+"px"},e.prototype.filterPosition=function(e){var i=this.getFilterPop();if(i.classList.add(this.WRAP),!t.Browser.isDevice){var r=i.style.display;i.style.cssText+="display:block;visibility:hidden";var n=this.element.querySelector("."+this.FILTER);n&&(this.setPosition(n.parentElement,i),i.style.cssText+="display:"+r+";visibility:visible")}},e.prototype.getDefault=function(){var e=[];return this.parent.ensureModuleInjected(Dr)&&(e.push("autoFitAll"),e.push("autoFit")),this.parent.allowGrouping&&this.parent.ensureModuleInjected(Pr)&&(e.push("group"),e.push("ungroup")),this.parent.allowSorting&&this.parent.ensureModuleInjected(sr)&&(e.push("sortAscending"),e.push("sortDescending")),e.push("columnChooser"),this.parent.allowFiltering&&"filterbar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(Rr)&&e.push("filter"),e},e.prototype.isFilterPopupOpen=function(){var e=this.getFilterPop();return e&&"none"!==e.style.display},e.prototype.getFilterPop=function(){return this.parent.element.querySelector("."+this.POP)},e.prototype.isFilterItemAdded=function(){return this.parent.columnMenuItems&&this.parent.columnMenuItems.indexOf("filter")>=0||!this.parent.columnMenuItems},e}();e.SortDescriptor=Xi,e.SortSettings=Yi,e.Predicate=Ji,e.FilterSettings=$i,e.SelectionSettings=Zi,e.SearchSettings=er,e.RowDropSettings=tr,e.TextWrapSettings=ir,e.GroupSettings=rr,e.EditSettings=nr,e.Grid=or,e.doesImplementInterface=d,e.valueAccessor=h,e.getUpdateUsingRaf=u,e.iterateArrayOrObject=g,e.templateCompiler=f,e.setStyleAndAttributes=m,e.extend=y,e.prepareColumns=v,e.setCssInGridPopUp=C,e.getActualProperties=w,e.parentsUntil=b,e.getElementIndex=S,e.inArray=x,e.getActualPropFromColl=E,e.removeElement=T,e.getPosition=R,e.getUid=I,e.appendChildren=D,e.parents=k,e.calculateAggregate=O,e.getScrollBarWidth=P,e.getRowHeight=M,e.isEditable=L,e.isActionPrevent=F,e.wrap=A,e.changeButtonType=N,e.setFormatter=B,e.addRemoveActiveClasses=H,e.distinctStringValues=q,e.getFilterMenuPostion=j,e.getZIndexCalcualtion=z,e.toogleCheckbox=U,e.createCboxWithWrap=_,e.removeAddCboxClasses=V,e.created="create",e.destroyed="destroy",e.load="load",e.rowDataBound="rowDataBound",e.queryCellInfo=$,e.actionBegin=Z,e.actionComplete=ee,e.actionFailure=te,e.dataBound=ie,e.rowSelecting=re,e.rowSelected=ne,e.rowDeselecting=oe,e.rowDeselected=se,e.cellSelecting=le,e.cellSelected=ae,e.cellDeselecting=ce,e.cellDeselected=pe,e.columnDragStart=de,e.columnDrag=he,e.columnDrop=ue,e.rowDragStart=ge,e.rowDrag=fe,e.rowDrop=me,e.beforePrint="beforePrint",e.printComplete=ye,e.detailDataBound=ve,e.toolbarClick=Ce,e.batchAdd=we,e.batchDelete=be,e.beforeBatchAdd=Se,e.beforeBatchDelete=xe,e.beforeBatchSave=Ee,e.beginEdit="beginEdit",e.cellEdit="cellEdit",e.cellSave="cellSave",e.endAdd="endAdd",e.endDelete="endDelete",e.endEdit="endEdit",e.recordDoubleClick=Te,e.recordClick="recordClick",e.beforeDataBound=Re,e.beforeOpenColumnChooser=Ie,e.resizeStart="resizeStart",e.onResize="onResize",e.resizeStop="resizeStop",e.checkBoxChange=De,e.beforeCopy="beforeCopy",e.filterChoiceRequest=ke,e.filterAfterOpen=Oe,e.filterBeforeOpen=Pe,e.initialLoad=Me,e.initialEnd=Le,e.dataReady=Fe,e.contentReady=Ae,e.uiUpdate=Ne,e.onEmpty=Be,e.inBoundModelChanged=He,e.modelChanged=qe,e.colGroupRefresh=je,e.headerRefreshed=ze,e.pageBegin="paging-begin",e.pageComplete=Ue,e.sortBegin="sorting-begin",e.sortComplete=_e,e.filterBegin="filtering-begin",e.filterComplete=Ve,e.searchBegin="searching-begin",e.searchComplete=Ge,e.reorderBegin="reorder-begin",e.reorderComplete=We,e.rowDragAndDropBegin="rowdraganddrop-begin",e.rowDragAndDropComplete=Ke,e.groupBegin="grouping-begin",e.groupComplete=Qe,e.ungroupBegin="ungrouping-begin",e.ungroupComplete=Xe,e.rowSelectionBegin="rowselecting",e.rowSelectionComplete=Ye,e.columnSelectionBegin="columnselecting",e.columnSelectionComplete="columnselected",e.cellSelectionBegin="cellselecting",e.cellSelectionComplete=Je,e.beforeCellFocused=$e,e.cellFocused=Ze,e.keyPressed=et,e.click=tt,e.destroy=it,e.columnVisibilityChanged=rt,e.scroll=nt,e.columnWidthChanged=ot,e.columnPositionChanged=st,e.rowDragAndDrop="row-drag-and-drop",e.rowsAdded=lt,e.rowsRemoved=at,e.columnDragStop=ct,e.headerDrop=pt,e.dataSourceModified=dt,e.refreshComplete=ht,e.refreshVirtualBlock=ut,e.dblclick=gt,e.toolbarRefresh=ft,e.bulkSave=mt,e.autoCol=yt,e.tooltipDestroy=vt,e.updateData=Ct,e.editBegin="edit-begin",e.editComplete="edit-complete",e.addBegin="add-begin",e.addComplete="add-complete",e.saveComplete=wt,e.deleteBegin="delete-begin",e.deleteComplete=bt,e.preventBatch=St,e.dialogDestroy=xt,e.crudAction=Et,e.addDeleteAction=Tt,e.destroyForm=Rt,e.doubleTap=It,e.beforeExcelExport=Dt,e.excelExportComplete=kt,e.excelQueryCellInfo=Ot,e.beforePdfExport=Pt,e.pdfExportComplete=Mt,e.pdfQueryCellInfo=Lt,e.accessPredicate="access-predicate",e.contextMenuClick=Ft,e.freezeRefresh=At,e.freezeRender=Nt,e.contextMenuOpen=Bt,e.columnMenuClick=Ht,e.columnMenuOpen=qt,e.filterOpen=jt,e.filterDialogCreated=zt,e.filterMenuClose=Ut,e.Data=Vt,e.Sort=sr,e.Page=gr,e.Selection=Bi,e.Filter=Rr,e.Search=Hi,e.Scroll=ji,e.resizeClassList=Ir,e.Resize=Dr,e.Reorder=kr,e.RowDD=Or,e.Group=Pr,e.Print=zi,e.DetailRow=Mr,e.Toolbar=Lr,e.Aggregate=Hr,e.summaryIterator=W,e.VirtualScroll=Gr,e.Edit=an,e.BatchEdit=nn,e.InlineEdit=rn,e.NormalEdit=en,e.DialogEdit=sn,e.ColumnChooser=cn,e.ExcelExport=hn,e.PdfExport=un,e.ExportHelper=pn,e.ExportValueFormatter=dn,e.Clipboard=Wi,e.CommandColumn=mn,e.CheckBoxFilter=_t,e.menuClass=yn,e.ContextMenu=vn,e.Freeze=xn,e.ColumnMenu=En,e.ExcelFilter=Tr,e.Column=X,e.HeaderRender=ri,e.ContentRender=ii,e.RowRenderer=Qt,e.CellRenderer=ni,e.HeaderCellRenderer=ai,e.FilterCellRenderer=yr,e.StackedHeaderCellRenderer=pi,e.Render=Ei,e.IndentCellRenderer=hi,e.GroupCaptionCellRenderer=gi,e.GroupCaptionEmptyCellRenderer=fi,e.BatchEditRender=Kr,e.DialogEditRender=Qr,e.InlineEditRender=Wr,e.EditRender=Xr,e.BooleanEditCell=Yr,e.DefaultEditCell=Zr,e.DropDownEditCell=Jr,e.NumericEditCell=$r,e.DatePickerEditCell=ln,e.CommandColumnRenderer=fn,e.FreezeContentRender=bn,e.FreezeRender=Sn,e.StringFilterUI=Cr,e.NumberFilterUI=wr,e.DateFilterUI=Sr,e.BooleanFilterUI=br,e.FlMenuOptrUI=vr,e.CellRendererFactory=Ti,e.ServiceLocator=Ri,e.RowModelGenerator=Xt,e.GroupModelGenerator=ti,e.FreezeRowModelGenerator=Cn,e.Pager=dr,e.ExternalMessage=ur,e.NumericContainer=lr,e.PagerMessage=ar,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-grids.umd.min.js.map
